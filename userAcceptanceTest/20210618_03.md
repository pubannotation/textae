## 改行コード`\r\n`を含むテキストに対してレンダリングの位置がズレないこと

### 背景

1.  6.0.0 でテキスト中の改行のレンダリングをパラグラフから、css の`white-space: pre-wrap;`に変更しました
2.  この結果、改行のレンダリングをブラウザに任せました
3.  `\r\n`はテキスト上では 2 文字ですが、ブラウザ上では 1 つの改行としてレンダリングされます
4.  Span をレンダリングするときに、`\r\n`を 2 文字としてカウントしていたため、レンダリング位置が 1 文字分ずつ後ろにズレました
5.  6.3.21 で、TextAE 内部で扱うテキストの`\r\n`を`\n`に置き換えることで、1 文字として扱うことにしました
6.  6.4.0 で、TextAE で表示するテキストの`\r\n`を` \n`に置き換えることで、空白文字と改行文字の 2 文字でブラウザ上にレンダリングされるようにしました

### -- 手段 --

#### 改行コード`\r\n`を含むテキストに対して作成した Span の位置がズレないこと

1. Editor1 を選択
2. Term モードにする
3. 3 行目の先頭の単語`Although`を DenotationSpan にする
4. 保存ダイアログを開く
5. `Click to see the json source in a new window.`リンクをクリック
6. 表示された JSON の`T19`の begin が`147`、end が`155`であること

#### 改行コード`\r\n`を含むテキストに対してレンダリングの位置がズレないこと

1. http://pubannotation.org/projects/twitter-test/docs/sourcedb/@BLAH6-Tweets/sourceid/19546372/annotations.json を開く
2. 2 行目以降に DenotationSpan を作成する
3. DenotationSpan が選択した文字列に作成されること
