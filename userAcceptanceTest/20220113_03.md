## ブロックモード

### 背景

1.  6.2.0 からブロック機能を追加
2.  6.2.26 でブロックにボーダーを追加
3.  6.2.31 でブロックとテキストの間に左右 8 ピクセルの隙間を開けました
4.  6.2.50 で BlockEntity の右に隙間をあけました
5.  BlockSpan の表示位置を半行上に見せかけるために、BlockSpan は背景とヒットエリアを別に持っています
6.  Block モードではヒットエリアの z-index を加算するため、BlockSpan 自体をマウスオーバーできません。
7.  ヒットエリアに title 属性を設定していなかったため、ブロックモード中に BlockSpan をホバーしたときに、Span ID が表示されませんでした
8.  6.2.101 で対応しました
9.  ブロックを表現するためにテキスト上に装飾を配置すると、ブロック内のテキスト操作ができません。
10. BlockSpan を伸ばす、縮める操作が、DenotationSpan と統一できません。
11. 6.3.0 からブロックの表現を、BlockSpan の右側に箱を配置することにしました。

### -- 手段 --

1.  コントロールバーに B アイコンがあること
2.  B アイコンを押す
3.  Block モードになること
4.  エディタの背景が紫色になること
5.  テキストを選択する
6.  新しく BlockSpan が作られること
7.  作られた BlockSpan の背景がオレンジ色（選択中）であること
8.  BlockSpan の上下に点線ボーダーが表示されること
9.  BlockSpan の左右とテキストの間に隙間があること
10. BlockSpan の右側に紫色の領域（ヒットエリア）があること
11. BlockSpan の右側の領域に BlockEntity が表示されていること
12. テキストをクリックする
13. BlockSpan の背景色（オレンジ色）がなくなる（選択解除される）こと
14. BlockSpan の右側の紫色の領域（ヒットエリア）をクリックする
15. BlockSpan の背景がオレンジ色（選択中）になること
16. 削除ボタンをクリックする
17. 選択中の BlockSpan が削除されること
18. 戻せること
