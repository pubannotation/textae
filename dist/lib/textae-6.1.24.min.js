/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

!function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j>o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m>p&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m>p&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d>=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1>=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1>=m;m++)for(var n=0;d>=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e>=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p>=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s>=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f>q;q++)d[q]=o[q];for(var q=0;j>q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b>=f;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b>u;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:max_distance_below>v&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c>d?1:0},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(var h=1;b>=h;h++)for(var g=0;b-h>=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a>i;i++){for(var j=[new e(a)],k=0;a-i>k;k++)j.push(new f);for(var k=0;i>k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1>d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};window.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}(),function(){"use strict";var a,b=this;a="undefined"!=typeof exports?exports:b.jsPlumbGeom={};var c=function(a){return"[object Array]"===Object.prototype.toString.call(a)},d=function(a,b,d){return a=c(a)?a:[a.x,a.y],b=c(b)?b:[b.x,b.y],d(a,b)},e=a.gradient=function(a,b){return d(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-1/0:b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},f=(a.normal=function(a,b){return-1/e(a,b)},a.lineLength=function(a,b){return d(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return d(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),g=(a.theta=function(a,b){return d(a,b,function(a,b){var c=e(a,b),d=Math.atan(c),g=f(a,b);return(4==g||3==g)&&(d+=Math.PI),0>d&&(d+=2*Math.PI),d})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),h=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var d=e(a,b),i=f(a,b),j=c>0?g[i]:h[i],k=Math.atan(d),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var d=e(a,b),f=Math.atan(-1/d),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null==a?!1:"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e){var g=this.clone(b);for(var h in e)if(null==g[h]||c(e[h])||d(e[h]))g[h]=e[h];else if(a(e[h])){var i=[];a(g[h])&&i.push.apply(i,g[h]),i.push.apply(i,e[h]),g[h]=i}else if(f(e[h])){f(g[h])||(g[h]={});for(var j in e[h])g[h][j]=e[h][j]}return g},copyValues:function(a,b,c){for(var d=0;d<a.length;d++)c[a[d]]=b[a[d]]},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d){var e=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)];null!=e&&(a=a.replace(b[c],e))}return a},g=function(b){if(null!=b){if(c(b))return e(b);if(a(b)){for(var d=[],h=0;h<b.length;h++)d.push(g(b[h]));return d}if(f(b)){var i={};for(var j in b)i[j]=g(b[j]);return i}return b}};return g(b)},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(",");c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},clampToGrid:function(a,b,c,d,e){var f=function(a,b){var c=a%b,d=Math.floor(a/b),e=c>=b/2?1:0;return(d+e)*b};return[d||null==c?a:f(a,c[0]),e||null==c?b:f(b,c[1])]},indexOf:function(a,b){return jsPlumbUtil.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=jsPlumbUtil.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=jsPlumbUtil.indexOf(a,b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==jsPlumbUtil.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c,d,e){d=d||{},e=e||{},c=a(c)?c:[c];for(var f=0;f<c.length;f++)for(var g in c[f].prototype)c[f].prototype.hasOwnProperty(g)&&(b.prototype[g]=c[f].prototype[g]);var h=function(a){return function(){for(var b=0;b<c.length;b++)c[b].prototype[a]&&c[b].prototype[a].apply(this,arguments);return d[a].apply(this,arguments)}};for(var i in d)b.prototype[i]=h(i);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},logEnabled:!0,log:function(){if(jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(b){}},group:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.group(a)},groupEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.groupEnd(a)},time:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.time(a)},timeEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.timeEnd(a)},removeElement:function(a){null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a)},removeElements:function(a){for(var b=0;b<a.length;b++)jsPlumbUtil.removeElement(a[b])},sizeElement:function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(e){jsPlumbUtil.log("jsPlumb function failed : "+e)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(e){jsPlumbUtil.log("wrapped function failed : "+e)}return d}}},jsPlumbUtil.EventGenerator=function(){var a={},b=!1,c=["ready"];this.bind=function(b,c,d){return jsPlumbUtil.addToList(a,b,c,d),this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&g>h&&j!==!1;){if(-1!=jsPlumbUtil.findWithFunction(c,function(a){return a===d}))a[d][h](e,f);else try{j=a[d][h](e,f)}catch(k){jsPlumbUtil.log("jsPlumb: fire failed for event "+d+" : "+k)}h++,(null==a||null==a[d])&&(i=!0)}}return this},this.unbind=function(b){return b?delete a[b]:a={},this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.cleanupListeners=function(){for(var b in a)a[b].splice(0),delete a[b]}},jsPlumbUtil.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}(),function(){var a=!!document.createElement("canvas").getContext,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){if(void 0===c.vml){var a=document.body.appendChild(document.createElement("div"));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;null!=b&&null!=b.style?(b.style.behavior="url(#default#VML)",c.vml=b?"object"==typeof b.adj:!0):c.vml=!1,a.parentNode.removeChild(a)}return c.vml},d=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=jsPlumb.CurrentLibrary,i=h.getElementObject(g),j=a.getId(g),k=h.getOffset(i);b[j]||(b[j]=g,c.push(g),d[j]={});var l=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=h.getElementObject(b.childNodes[c]),i=a.getId(b.childNodes[c],null,!0);if(i&&e[i]&&e[i]>0){var m=h.getOffset(g);d[j][i]={id:i,offset:{left:m.left-k.left,top:m.top-k.top}},f[i]=j}l(b.childNodes[c])}};l(g)},this.updateOffsets=function(b){var c=jsPlumb.CurrentLibrary,e=c.getElementObject(b),g=c.getDOMElement(e),h=a.getId(g),i=d[h],j=c.getOffset(e);if(i)for(var k in i){var l=c.getElementObject(k),m=c.getOffset(l);d[h][k]={id:k,offset:{left:m.left-j.left,top:m.top-j.top}},f[k]=h}},this.endpointAdded=function(c){var g=jsPlumb.CurrentLibrary,h=document.body,i=a.getId(c),j=g.getElementObject(c),k=jsPlumb.CurrentLibrary.getOffset(j),l=c.parentNode;for(e[i]=e[i]?e[i]+1:1;null!=l&&l!=h;){var m=a.getId(l,null,!0);if(m&&b[m]){var n=g.getElementObject(l),o=g.getOffset(n);null==d[m][i]&&(d[m][i]={id:i,offset:{left:k.left-o.left,top:k.top-o.top}},f[i]=m);break}l=l.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(a,b,c,e){var g=f[b];if(g){d[e]||(d[e]={}),d[e][b]=d[g][b],delete d[g][b];var h=jsPlumb.CurrentLibrary.getOffset(c),i=jsPlumb.CurrentLibrary.getOffset(a);d[e][b].offset={left:i.left-h.left,top:i.top-h.top},f[b]=e}}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}}),window.jsPlumbAdapter={headless:!1,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["canvas","svg","vml"]},isRenderModeAvailable:function(d){return{canvas:a,svg:b,vml:c()}[d]},getDragManager:function(a){return new d(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable("canvas"),d=this.isRenderModeAvailable("svg"),e=this.isRenderModeAvailable("vml");"svg"===a?d?b="svg":c?b="canvas":e&&(b="vml"):"canvas"===a&&c?b="canvas":e&&(b="vml")}return b}}}(),function(){var a=jsPlumbUtil,b=function(a,b){y.CurrentLibrary.addClass(d(a),b)},c=function(a,b){y.CurrentLibrary.removeClass(d(a),b)},d=function(a){return y.CurrentLibrary.getElementObject(a)},e=function(a){return y.CurrentLibrary.getDOMElement(a)},f=function(a,b){var c=y.CurrentLibrary.getOffset(d(a));if(null!=b){var e=b.getZoom();return{left:c.left/e,top:c.top/e}}return c},g=function(a){return y.CurrentLibrary.getSize(d(a))},h=function(){return""+(new Date).getTime()},i=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};y.extend(b,a._jsPlumb.paintStyle),y.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},j=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],k={mouseout:"mouseexit"},l=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g>f;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},m=function(a){return null==a?null:a.split(" ")},n=function(b,c,d){if(b.getDefaultType){for(var e=b.getTypeDescriptor(),f=a.merge({},b.defaultType),g=0,h=b._jsPlumb.types.length;h>g;g++)f=a.merge(f,b._jsPlumb.instance.getType(b._jsPlumb.types[g],e));c&&(f=a.populate(f,c)),b.applyType(f,d),d||b.repaint()}},o=window.jsPlumbUIComponent=function(b){jsPlumbUtil.EventGenerator.apply(this,arguments);var c=this,d=arguments,e=c.idPrefix,f=e+(new Date).getTime(),g=y.CurrentLibrary;if(this._jsPlumb={instance:b._jsPlumb,parameters:b.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:b.beforeDetach,beforeDrop:b.beforeDrop,overlayPlacements:[],hoverClass:b.hoverClass||b._jsPlumb.Defaults.HoverClass||y.Defaults.HoverClass,types:[]},this.getId=function(){return f},b.events)for(var h in b.events)c.bind(h,b.events[h]);this.clone=function(){var a={};return this.constructor.apply(a,d),a}.bind(this),this.isDetachAllowed=function(b){var c=!0;if(this._jsPlumb.beforeDetach)try{c=this._jsPlumb.beforeDetach(b)}catch(d){a.log("jsPlumb: beforeDetach callback failed",d)}return c},this.isDropAllowed=function(b,c,d,e,f){var g=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f});if(this._jsPlumb.beforeDrop)try{g=this._jsPlumb.beforeDrop({sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f})}catch(h){a.log("jsPlumb: beforeDrop callback failed",h)}return g};var i=[],l=function(a,b,c){i.push([a,b,c]),a.bind(b,c)},m=[],n=function(a,b,c){var d=k[c]||c,e=function(a){b.fire(d,b,a)};m.push([a,c,e]),g.bind(a,c,e)},o=function(a,b,c){k[b]||b,g.unbind(a,b,c)};this.bindListeners=function(a,b,c){l(a,"click",function(a,c){b.fire("click",b,c)}),l(a,"dblclick",function(a,c){b.fire("dblclick",b,c)}),l(a,"contextmenu",function(a,c){b.fire("contextmenu",b,c)}),l(a,"mouseenter",function(a,d){b.isHover()||(c(!0),b.fire("mouseenter",b,d))}),l(a,"mouseexit",function(a,d){b.isHover()&&(c(!1),b.fire("mouseexit",b,d))}),l(a,"mousedown",function(a,c){b.fire("mousedown",b,c)}),l(a,"mouseup",function(a,c){b.fire("mouseup",b,c)})},this.unbindListeners=function(){for(var a=0;a<i.length;a++){var b=i[a];b[0].unbind(b[1],b[2])}i=null},this.attachListeners=function(a,b){for(var c=0,d=j.length;d>c;c++)n(a,b,j[c])},this.detachListeners=function(){for(var a=0;a<m.length;a++)o(m[a][0],m[a][1],m[a][2]);m=null},this.reattachListenersForElement=function(a){if(arguments.length>1){for(var b=0,c=j.length;c>b;b++)o(a,j[b]);for(b=1,c=arguments.length;c>b;b++)this.attachListeners(a,arguments[b])}}};jsPlumbUtil.extend(o,jsPlumbUtil.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},addClass:function(a){null!=this.canvas&&b(this.canvas,a)},removeClass:function(a){null!=this.canvas&&c(this.canvas,a)},setType:function(a,b,c){this._jsPlumb.types=m(a)||[],n(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){n(this,a,b)},hasType:function(a){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,a)},addType:function(a,b,c){var d=m(a),e=!1;if(null!=d){for(var f=0,g=d.length;g>f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&n(this,b,c)}},removeType:function(b,c){var d=m(b),e=!1,f=function(b){var c=a.indexOf(this._jsPlumb.types,b);return-1!=c?(this._jsPlumb.types.splice(c,1),!0):!1}.bind(this);if(null!=d){for(var g=0,h=d.length;h>g;g++)e=f(d[g])||e;e&&n(this,null,c)}},toggleType:function(a,b,c){var d=m(a);if(null!=d){for(var e=0,f=d.length;f>e;e++){var g=jsPlumbUtil.indexOf(this._jsPlumb.types,d[e]);-1!=g?this._jsPlumb.types.splice(g,1):this._jsPlumb.types.push(d[e])}n(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c])},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,i(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,i(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},cleanup:function(){this.unbindListeners(),this.detachListeners()},destroy:function(){this.cleanupListeners(),this.clone=null,this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,c){var d=y.CurrentLibrary;!this._jsPlumb||this._jsPlumb.instance.currentlyDragging||this._jsPlumb.instance.isHoverSuspended()||(this._jsPlumb.hover=a,null!=this.canvas&&null!=this._jsPlumb.instance.hoverClass&&d[a?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(c=c||h(),this.repaint({timestamp:c,recalc:!1}))),this.getAttachedElements&&!b&&l(this,a,h(),this))}});var p="__label",q=function(a,b){for(var c=-1,d=0,e=a._jsPlumb.overlays.length;e>d;d++)if(b===a._jsPlumb.overlays[d].id){c=d;break}return c},r=function(a,b){var c={cssClass:b.cssClass,labelStyle:a.labelStyle,id:p,component:a,_jsPlumb:a._jsPlumb.instance},d=y.extend(c,b);return new(y.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(d)},s=function(b,c){var d=null;if(a.isArray(c)){var e=c[0],f=y.extend({component:b,_jsPlumb:b._jsPlumb.instance},c[1]);3==c.length&&y.extend(f,c[2]),d=new(y.Overlays[b._jsPlumb.instance.getRenderMode()][e])(f)}else d=c.constructor==String?new(y.Overlays[b._jsPlumb.instance.getRenderMode()][c])({component:b,_jsPlumb:b._jsPlumb.instance}):c;b._jsPlumb.overlays.push(d)},t=function(a,b){var c=a.defaultOverlayKeys||[],d=b.overlays,e=function(b){return a._jsPlumb.instance.Defaults[b]||y.Defaults[b]||[]};d||(d=[]);for(var f=0,g=c.length;g>f;f++)d.unshift.apply(d,e(c[f]));return d},u=window.OverlayCapableJsPlumbUIComponent=function(a){o.apply(this,arguments),this._jsPlumb.overlays=[];var b=t(this,a);if(b)for(var c=0,d=b.length;d>c;c++)s(this,b[c]);if(a.label){var e=a.labelLocation||this.defaultLabelLocation||.5,f=a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle||y.Defaults.LabelStyle;this._jsPlumb.overlays.push(r(this,{label:a.label,location:e,labelStyle:f}))}};jsPlumbUtil.extend(u,o,{applyType:function(a,b){if(this.removeAllOverlays(b),a.overlays)for(var c=0,d=a.overlays.length;d>c;c++)this.addOverlay(a.overlays[c],!0)},setHover:function(a){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){s(this,a),b||this.repaint()},getOverlay:function(a){var b=q(this,a);return b>=0?this._jsPlumb.overlays[b]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length),this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a){var b=q(this,a);if(-1!=b){var c=this._jsPlumb.overlays[b];c.cleanup&&c.cleanup(),this._jsPlumb.overlays.splice(b,1),this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a]}},removeOverlays:function(){for(var a=0,b=arguments.length;b>a;a++)this.removeOverlay(arguments[a])},getLabel:function(){var a=this.getOverlay(p);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(p)},setLabel:function(a){var b=this.getOverlay(p);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=r(this,c),this._jsPlumb.overlays.push(b)}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(){for(var a=0;a<this._jsPlumb.overlays.length;a++)this._jsPlumb.overlays[a].cleanup(),this._jsPlumb.overlays[a].destroy();this._jsPlumb.overlays.splice(0),this._jsPlumb.overlayPositions=null},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{},this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null}});var v=0,w=function(){var a=v+1;return v++,a},x=window.jsPlumbInstance=function(i){this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},i&&y.extend(this.Defaults,i),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var j=this,k=w(),l=j.bind,m={},n=1,p=function(a){var b=e(a);return{el:b,id:jsPlumbUtil.isString(a)&&null==b?a:bb(b)}};this.getInstanceIndex=function(){return k},this.setZoom=function(a,b){n=a,b&&j.repaintEverything()},this.getZoom=function(){return n};for(var q in this.Defaults)m[q]=this.Defaults[q];this.bind=function(a,b){"ready"===a&&s?b():l.apply(j,[a,b])},j.importDefaults=function(a){for(var b in a)j.Defaults[b]=a[b];return j},j.restoreDefaults=function(){return j.Defaults=y.extend({},m),j};var r=null,s=!1,t=[],u={},v={},x={},z={},A={},B={},C=!1,D=[],E=!1,F=null,G=this.Defaults.Scope,H=null,I=1,J=function(){return""+I++},K=function(a,b){j.Defaults.Container?y.CurrentLibrary.appendElement(a,j.Defaults.Container):b?y.CurrentLibrary.appendElement(a,b):jsPlumbAdapter.appendToRoot(a)},L=function(a){return a._nodes?a._nodes:a},M=function(a,b,c,d){if(!jsPlumbAdapter.headless&&!E){var e=bb(a),f=j.dragManager.getElementsForDraggable(e);null==c&&(c=h());var g=_({elId:e,offset:b,recalc:!1,timestamp:c});if(f)for(var i in f)_({elId:f[i].id,offset:{left:g.o.left+f[i].offset.left,top:g.o.top+f[i].offset.top},recalc:!1,timestamp:c});if(j.anchorManager.redraw(e,b,c,null,d),f)for(var k in f)j.anchorManager.redraw(f[k].id,b,c,f[k].offset,d,!0)}},N=function(b,c){var e,f,g=null;if(a.isArray(b)){g=[];for(var h=0,i=b.length;i>h;h++)e=d(b[h]),f=j.getAttribute(e,"id"),g.push(c(e,f))}else e=d(b),f=j.getAttribute(e,"id"),g=c(e,f);return g},O=function(a){return v[a]},P=function(d,e,f){if(!jsPlumbAdapter.headless){var g=null==e?!1:e,h=y.CurrentLibrary;if(g&&h.isDragSupported(d)&&!h.isAlreadyDraggable(d)){var i=f||j.Defaults.DragOptions||y.Defaults.DragOptions;i=y.extend({},i);var k=h.dragEvents.drag,l=h.dragEvents.stop,m=h.dragEvents.start;i[m]=a.wrap(i[m],function(){j.setHoverSuspended(!0),j.select({source:d}).addClass(j.elementDraggingClass+" "+j.sourceElementDraggingClass,!0),j.select({target:d}).addClass(j.elementDraggingClass+" "+j.targetElementDraggingClass,!0),j.setConnectionBeingDragged(!0)}),i[k]=a.wrap(i[k],function(){var a=h.getUIPosition(arguments,j.getZoom());M(d,a,null,!0),b(d,"jsPlumb_dragged")}),i[l]=a.wrap(i[l],function(){var a=h.getUIPosition(arguments,j.getZoom());M(d,a),c(d,"jsPlumb_dragged"),j.setHoverSuspended(!1),j.select({source:d}).removeClass(j.elementDraggingClass+" "+j.sourceElementDraggingClass,!0),j.select({target:d}).removeClass(j.elementDraggingClass+" "+j.targetElementDraggingClass,!0),j.setConnectionBeingDragged(!1),j.dragManager.dragEnded(d)});var n=bb(d);B[n]=!0;var o=B[n];i.disabled=null==o?!1:!o,h.initDraggable(d,i,!1,j),j.dragManager.register(d)}}},Q=function(b,c){var d=y.extend({},b);if(c&&y.extend(d,c),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=e(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=e(d.target)),b.uuids&&(d.sourceEndpoint=O(b.uuids[0]),d.targetEndpoint=O(b.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return a.log(j,"could not add connection; source endpoint is full"),void 0;if(d.targetEndpoint&&d.targetEndpoint.isFull())return a.log(j,"could not add connection; target endpoint is full"),void 0;if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var f=0,g=d.sourceEndpoint.connectorOverlays.length;g>f;f++)d.overlays.push(d.sourceEndpoint.connectorOverlays[f])}!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h,i,k,l;if(d.target&&!d.target.endpoint&&!d.targetEndpoint&&!d.newConnection&&(h=bb(d.target),i=tb[h],k=ub[h],i)){if(!Eb[h])return;i.isTarget=!0,l=null!=k?k:j.addEndpoint(d.target,i),vb[h]&&(ub[h]=l),d.targetEndpoint=l,l._doNotDeleteOnDetach=!1,l._deleteOnDetach=!0}if(d.source&&!d.source.endpoint&&!d.sourceEndpoint&&!d.newConnection&&(h=bb(d.source),i=yb[h],k=zb[h],i)){if(!Bb[h])return;l=null!=k?k:j.addEndpoint(d.source,i),Ab[h]&&(zb[h]=l),d.sourceEndpoint=l,l._doNotDeleteOnDetach=!1,l._deleteOnDetach=!0}return d},R=function(a){var b=j.Defaults.ConnectionType||j.getDefaultConnectionType(),c=j.Defaults.EndpointType||y.Endpoint,d=y.CurrentLibrary.getParent;a.parent=a.container?a.container:a.sourceEndpoint?a.sourceEndpoint.parent:a.source.constructor==c?a.source.parent:d(a.source),a._jsPlumb=j,a.newConnection=R,a.newEndpoint=V,a.endpointsByUUID=v,a.endpointsByElement=u,a.finaliseConnection=S;var e=new b(a);return e.id="con_"+J(),T("click","click",e),T("dblclick","dblclick",e),T("contextmenu","contextmenu",e),e.isDetachable()&&(e.endpoints[0].initDraggable(),e.endpoints[1].initDraggable()),e},S=function(a,b,c,d){if(b=b||{},a.suspendedEndpoint||t.push(a),(null==a.suspendedEndpoint||d)&&j.anchorManager.newConnection(a),M(a.source),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var e={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};j.fire("connection",e,c)}},T=function(a,b,c){c.bind(a,function(a,d){j.fire(b,c,d)})},U=function(a){if(a.container)return a.container;var b=y.CurrentLibrary.getTagName(a.source),c=y.CurrentLibrary.getParent(a.source);return b&&"td"===b.toLowerCase()?y.CurrentLibrary.getParent(c):c},V=function(a){var b=j.Defaults.EndpointType||y.Endpoint,c=y.extend({},a);c.parent=U(c),c._jsPlumb=j,c.newConnection=R,c.newEndpoint=V,c.endpointsByUUID=v,c.endpointsByElement=u,c.finaliseConnection=S,c.fireDetachEvent=cb,c.fireMoveEvent=db,c.floatingConnections=A,c.getParentFromParams=U,c.elementId=bb(c.source);var d=new b(c);return d.id="ep_"+J(),T("click","endpointClick",d),T("dblclick","endpointDblClick",d),T("contextmenu","contextmenu",d),jsPlumbAdapter.headless||j.dragManager.endpointAdded(c.source),d},W=function(a,b,c){var d=u[a];if(d&&d.length)for(var e=0,f=d.length;f>e;e++){for(var g=0,h=d[e].connections.length;h>g;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},X=function(a,b){return N(a,function(a,c){B[c]=b,y.CurrentLibrary.isDragSupported(a)&&y.CurrentLibrary.setDraggable(a,b)})},Y=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=p(a);W(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},Z=function(a){return N(a,function(a,b){var c=null==B[b]?!1:B[b];return c=!c,B[b]=c,y.CurrentLibrary.setDraggable(a,c),c})},$=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),W(a,function(a){var b=a.isVisible();
a.setVisible(!b)},c)},_=function(a){var b,c=a.timestamp,e=a.recalc,h=a.offset,i=a.elId;return E&&!c&&(c=F),!e&&c&&c===z[i]?{o:a.offset||x[i],s:D[i]}:(e||!h?(b=d(i),null!=b&&(D[i]=g(b),x[i]=f(b,j),z[i]=c)):(x[i]=h,null==D[i]&&(b=d(i),null!=b&&(D[i]=g(b))),z[i]=c),x[i]&&!x[i].right&&(x[i].right=x[i].left+D[i][0],x[i].bottom=x[i].top+D[i][1],x[i].width=D[i][0],x[i].height=D[i][1],x[i].centerx=x[i].left+x[i].width/2,x[i].centery=x[i].top+x[i].height/2),{o:x[i],s:D[i]})},ab=function(a){var b=x[a];return b?{o:b,s:D[a]}:_({elId:a})},bb=function(a,b,c){if(jsPlumbUtil.isString(a))return a;if(null==a)return null;var d=jsPlumbAdapter.getAttribute(a,"id");return d&&"undefined"!==d||(2==arguments.length&&void 0!==arguments[1]?d=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(d="jsPlumb_"+k+"_"+J()),c||jsPlumbAdapter.setAttribute(a,"id",d)),d};this.setConnectionBeingDragged=function(a){C=a},this.isConnectionBeingDragged=function(){return C},this.connectorClass="_jsPlumb_connector",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={canvas:{},svg:{},vml:{}},this.Endpoints={canvas:{},svg:{},vml:{}},this.Overlays={canvas:{},svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.CANVAS="canvas",this.VML="vml",this.addEndpoint=function(b,c,d){d=d||{};var f=y.extend({},d);y.extend(f,c),f.endpoint=f.endpoint||j.Defaults.Endpoint||y.Defaults.Endpoint,f.paintStyle=f.paintStyle||j.Defaults.EndpointStyle||y.Defaults.EndpointStyle,b=L(b);for(var g=[],h=a.isArray(b)||null!=b.length&&!a.isString(b)?b:[b],i=0,k=h.length;k>i;i++){var l=e(h[i]),m=bb(l);f.source=l,_({elId:m,timestamp:F});var n=V(f);f.parentAnchor&&(n.parentAnchor=f.parentAnchor),a.addToList(u,m,n);var o=x[m],p=D[m],q=n.anchor.compute({xy:[o.left,o.top],wh:p,element:n,timestamp:F}),r={anchorLoc:q,timestamp:F};E&&(r.recalc=!1),E||n.paint(r),g.push(n),n._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(b,c,d){for(var e=[],f=0,g=c.length;g>f;f++){var h=j.addEndpoint(b,c[f],d);a.isArray(h)?Array.prototype.push.apply(e,h):e.push(h)}return e},this.animate=function(b,c,e){e=e||{};var f=d(b),g=bb(b),h=y.CurrentLibrary.dragEvents.step,i=y.CurrentLibrary.dragEvents.complete;e[h]=a.wrap(e[h],function(){j.repaint(g)}),e[i]=a.wrap(e[i],function(){j.repaint(g)}),y.CurrentLibrary.animate(f,c,e)},this.checkCondition=function(b,c){var d=j.getListener(b),e=!0;if(d&&d.length>0)try{for(var f=0,g=d.length;g>f;f++)e=e&&d[f](c)}catch(h){a.log(j,"cannot check condition ["+b+"]"+h)}return e},this.checkASyncCondition=function(b,c,d,e){var f=j.getListener(b);if(f&&f.length>0)try{f[0](c,d,e)}catch(g){a.log(j,"cannot asynchronously check condition ["+b+"]"+g)}},this.connect=function(a,b){var c,d=Q(a,b);return d&&(c=R(d),S(c,d)),c},this.deleteEndpoint=function(a,b){var c=j.setSuspendDrawing(!0),d="string"==typeof a?v[a]:a;return d&&j.deleteObject({endpoint:d}),c||j.setSuspendDrawing(!1,b),j},this.deleteEveryEndpoint=function(){var a=j.setSuspendDrawing(!0);for(var b in u){var c=u[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)j.deleteEndpoint(c[d],!0)}return u={},v={},j.anchorManager.reset(),j.dragManager.reset(),a||j.setSuspendDrawing(!1),j};var cb=function(a,b,c){var d=j.Defaults.ConnectionType||j.getDefaultConnectionType(),e=a.constructor==d,f=e?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&j.fire("connectionDetached",f,c),j.anchorManager.connectionDetached(f)},db=function(a,b){j.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(v[a._jsPlumb.uuid]=null),j.anchorManager.deleteEndpoint(a);for(var b in u){var c=u[b];if(c){for(var d=[],e=0,f=c.length;f>e;e++)c[e]!=a&&d.push(c[e]);u[b]=d}u[b].length<1&&delete u[b]}},this.detach=function(){if(0!==arguments.length){var a=j.Defaults.ConnectionType||j.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length?b?arguments[1]||{}:arguments[0]:arguments[0],d=c.fireEvent!==!1,f=c.forceDetach,g=b?arguments[0]:c.connection;if(g)(f||jsPlumbUtil.functionChain(!0,!1,[[g.endpoints[0],"isDetachAllowed",[g]],[g.endpoints[1],"isDetachAllowed",[g]],[g,"isDetachAllowed",[g]],[j,"checkCondition",["beforeDetach",g]]]))&&g.endpoints[0].detach(g,!1,!0,d);else{var h=y.extend({},c);if(h.uuids)O(h.uuids[0]).detachFrom(O(h.uuids[1]),d);else if(h.sourceEndpoint&&h.targetEndpoint)h.sourceEndpoint.detachFrom(h.targetEndpoint);else{var i=bb(e(h.source)),k=bb(e(h.target));W(i,function(a){(a.sourceId==i&&a.targetId==k||a.targetId==i&&a.sourceId==k)&&j.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=e(a);var c=bb(a),d=u[c];if(d&&d.length)for(var f=0,g=d.length;g>f;f++)d[f].detachAll(b.fireEvent!==!1);return j},this.detachEveryConnection=function(a){return a=a||{},j.doWhileSuspended(function(){for(var b in u){var c=u[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)c[d].detachAll(a.fireEvent!==!1)}t.splice(0)}),j},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},c=a.fireEvent!==!1,d=a.deleteAttachedObjects!==!1,e=function(a){if(null!=a&&null==b.connections[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.connections[a.id]=a,b.connectionCount++,d))for(var c=0;c<a.endpoints.length;c++)a.endpoints[c]._deleteOnDetach&&f(a.endpoints[c])},f=function(a){if(null!=a&&null==b.endpoints[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.endpoints[a.id]=a,b.endpointCount++,d))for(var c=0;c<a.connections.length;c++){var f=a.connections[c];e(f)}};a.connection?e(a.connection):f(a.endpoint);for(var g in b.connections){var h=b.connections[g];h.endpoints[0].detachFromConnection(h),h.endpoints[1].detachFromConnection(h),jsPlumbUtil.removeWithFunction(t,function(a){return h.id==a.id}),cb(h,c,a.originalEvent),h.cleanup(),h.destroy()}for(var i in b.endpoints){var k=b.endpoints[i];j.unregisterEndpoint(k),k.cleanup(),k.destroy()}return b},this.draggable=function(a,b){var c,d,f;if("object"==typeof a&&a.length)for(c=0,d=a.length;d>c;c++)f=e(a[c]),f&&P(f,!0,b);else if(a._nodes)for(c=0,d=a._nodes.length;d>c;c++)f=e(a._nodes[c]),f&&P(f,!0,b);else f=e(a),f&&P(f,!0,b);return j},this.extend=function(a,b){return y.CurrentLibrary.extend(a,b)};var eb=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++)a[e][b].apply(a[e],c);return d(a)},fb=function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},gb=function(a,b,c){return function(){return eb(a,b,arguments,c)}},hb=function(a,b){return function(){return fb(a,b,arguments)}},ib=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(a=d(a),b)c=a;else for(var e=0,f=a.length;f>e;e++)c.push(p(a[e]).id);return c},jb=function(a,b,c){return"*"===a?!0:a.length>0?-1!=jsPlumbUtil.indexOf(a,b):!c};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var c=a.scope||j.getDefaultScope(),d=ib(c,!0),e=ib(a.source),f=ib(a.target),g=!b&&d.length>1?{}:[],h=function(a,c){if(!b&&d.length>1){var e=g[a];null==e&&(e=g[a]=[]),e.push(c)}else g.push(c)},i=0,k=t.length;k>i;i++){var l=t[i];jb(d,l.scope)&&jb(e,l.sourceId)&&jb(f,l.targetId)&&h(l.scope,l)}return g};var kb=function(a,b){return function(c){for(var d=0,e=a.length;e>d;d++)c(a[d]);return b(a)}},lb=function(a){return function(b){return a[b]}},mb=function(a,b){var c,d,e={length:a.length,each:kb(a,b),get:lb(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;d>c;c++)e[f[c]]=gb(a,f[c],b);for(c=0,d=g.length;d>c;c++)e[g[c]]=hb(a,g[c]);return e},nb=function(a){var b=mb(a,nb);return y.CurrentLibrary.extend(b,{setDetachable:gb(a,"setDetachable",nb),setReattach:gb(a,"setReattach",nb),setConnector:gb(a,"setConnector",nb),detach:function(){for(var b=0,c=a.length;c>b;b++)j.detach(a[b])},isDetachable:hb(a,"isDetachable"),isReattach:hb(a,"isReattach")})},ob=function(a){var b=mb(a,ob);return y.CurrentLibrary.extend(b,{setEnabled:gb(a,"setEnabled",ob),setAnchor:gb(a,"setAnchor",ob),isEnabled:hb(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;c>b;b++)a[b].detachAll()},remove:function(){for(var b=0,c=a.length;c>b;b++)j.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",nb(a.connections||j.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":ib(a.element),d=b?"*":ib(a.source),e=b?"*":ib(a.target),f=ib(a.scope,!0),g=[];for(var h in u){var i=jb(c,h,!0),j=jb(d,h,!0),k="*"!=d,l=jb(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=u[h].length;o>n;n++){var p=u[h][n];if(jb(f,p.scope,!0)){var q=k&&d.length>0&&!p.isSource,r=m&&e.length>0&&!p.isTarget;if(q||r)continue a;g.push(p)}}}return ob(g)},this.getAllConnections=function(){return t},this.getDefaultScope=function(){return G},this.getEndpoint=O,this.getEndpoints=function(a){return u[p(a).id]},this.getDefaultEndpointType=function(){return y.Endpoint},this.getDefaultConnectionType=function(){return y.Connection},this.getId=bb,this.getOffset=function(a){return x[a],_({elId:a})},this.getSelector=function(){return y.CurrentLibrary.getSelector.apply(null,arguments)},this.getSize=function(a){var b=D[a];return b||_({elId:a}),D[a]},this.appendElement=K;var pb=!1;this.isHoverSuspended=function(){return pb},this.setHoverSuspended=function(a){pb=a};var qb=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isCanvasAvailable=qb("canvas"),this.isSVGAvailable=qb("svg"),this.isVMLAvailable=qb("vml"),this.hide=function(a,b){return Y(a,"none",b),j},this.idstamp=J,this.connectorsInitialized=!1;var rb=[],sb=["canvas","svg","vml"];this.registerConnectorType=function(a,b){rb.push([a,b])},this.init=function(){var a=function(a,b,c){y.Connectors[a][b]=function(){c.apply(this,arguments),y.ConnectorRenderers[a].apply(this,arguments)},jsPlumbUtil.extend(y.Connectors[a][b],[c,y.ConnectorRenderers[a]])};if(!y.connectorsInitialized){for(var b=0;b<rb.length;b++)for(var c=0;c<sb.length;c++)a(sb[c],rb[b][1],rb[b][0]);y.connectorsInitialized=!0}s||(j.anchorManager=new y.AnchorManager({jsPlumbInstance:j}),j.setRenderMode(j.Defaults.RenderMode),s=!0,j.fire("ready",j))}.bind(this),this.log=r,this.jsPlumbUIComponent=o,this.makeAnchor=function(){var b,c=function(a,b){if(y.Anchors[a])return new y.Anchors[a](b);if(!j.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],e=arguments[1],f=arguments[2],g=null;if(d.compute&&d.getOrientation)return d;if("string"==typeof d)g=c(arguments[0],{elementId:e,jsPlumbInstance:j});else if(a.isArray(d))if(a.isArray(d[0])||a.isString(d[0]))2==d.length&&a.isObject(d[1])?a.isString(d[0])?(b=y.extend({elementId:e,jsPlumbInstance:j},d[1]),g=c(d[0],b)):(b=y.extend({elementId:e,jsPlumbInstance:j,anchors:d[0]},d[1]),g=new y.DynamicAnchor(b)):g=new y.DynamicAnchor({anchors:d,selector:null,elementId:e,jsPlumbInstance:f});else{var h={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:e,jsPlumbInstance:f,cssClass:7==d.length?d[6]:null};g=new y.Anchor(h),g.clone=function(){return new y.Anchor(h)}}return g.id||(g.id="anchor_"+J()),g},this.makeAnchors=function(b,c,d){for(var e=[],f=0,g=b.length;g>f;f++)"string"==typeof b[f]?e.push(y.Anchors[b[f]]({elementId:c,jsPlumbInstance:d})):a.isArray(b[f])&&e.push(j.makeAnchor(b[f],c,d));return e},this.makeDynamicAnchor=function(a,b){return new y.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:j})};var tb={},ub={},vb={},wb={},xb=function(a,b){a.paintStyle=a.paintStyle||j.Defaults.EndpointStyles[b]||j.Defaults.EndpointStyle||y.Defaults.EndpointStyles[b]||y.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||j.Defaults.EndpointHoverStyles[b]||j.Defaults.EndpointHoverStyle||y.Defaults.EndpointHoverStyles[b]||y.Defaults.EndpointHoverStyle,a.anchor=a.anchor||j.Defaults.Anchors[b]||j.Defaults.Anchor||y.Defaults.Anchors[b]||y.Defaults.Anchor,a.endpoint=a.endpoint||j.Defaults.Endpoints[b]||j.Defaults.Endpoint||y.Defaults.Endpoints[b]||y.Defaults.Endpoint},yb={},zb={},Ab={},Bb={},Cb={},Db={},Eb={},Fb=function(a,b,c){for(var d=a.target||a.srcElement,e=!1,f=j.getSelector(b,c),g=0;g<f.length;g++)if(f[g]==d){e=!0;break}return e};this.makeTarget=function(b,c,e){var h=y.extend({_jsPlumb:j},e);y.extend(h,c),xb(h,1);var i=y.CurrentLibrary,k=h.scope||j.Defaults.Scope,l=!(h.deleteEndpointsOnDetach===!1),m=h.maxConnections||-1,n=h.onMaxConnections,q=function(b){var c=p(b),e=c.id,q=new o(h),r=y.extend({},h.dropOptions||{});tb[e]=h,vb[e]=h.uniqueEndpoint,wb[e]=m,Eb[e]=!0;var s=function(){j.currentlyDragging=!1;var a=y.CurrentLibrary.getDropEvent(arguments),b=j.select({target:e}).length,k=d(i.getDragObject(arguments)),m=j.getAttribute(k,"dragId"),o=j.getAttribute(k,"originalScope"),p=A[m],r=p.endpoints[0].isFloating()?0:1,s=p.endpoints[0];if(h.endpoint?y.extend({},h.endpoint):{},!Eb[e]||wb[e]>0&&b>=wb[e])return n&&n({element:c.el,connection:p},a),!1;if(s.anchor.locked=!1,o&&i.setDragScope(k,o),null==p.suspendedEndpoint&&!p.pending)return!1;var t=q.isDropAllowed(0===r?e:p.sourceId,0===r?p.targetId:e,p.scope,p,null);if(p.suspendedEndpoint&&(p[r?"targetId":"sourceId"]=p.suspendedEndpoint.elementId,p[r?"target":"source"]=p.suspendedEndpoint.element,p.endpoints[r]=p.suspendedEndpoint),t){var u=i.getElementObject(c.el),v=ub[e];if((null==v||null==v._jsPlumb)&&(v=j.addEndpoint(u,h)),h.uniqueEndpoint&&(ub[e]=v),v._doNotDeleteOnDetach=!1,v._deleteOnDetach=!0,null!=v.anchor.positionFinder){var w=i.getUIPosition(arguments,j.getZoom()),x=f(u,j),z=g(u),B=v.anchor.positionFinder(w,x,z,v.anchor.constructorParams);v.anchor.x=B[0],v.anchor.y=B[1]}p[r?"target":"source"]=v.element,p[r?"targetId":"sourceId"]=v.elementId,p.endpoints[r].detachFromConnection(p),p.endpoints[r]._deleteOnDetach&&(p.endpoints[r].deleteAfterDragStop=!0),v.addConnection(p),p.endpoints[r]=v,p.deleteEndpointsOnDetach=l,1==r?j.anchorManager.updateOtherEndpoint(p.sourceId,p.suspendedElementId,p.targetId,p):j.anchorManager.sourceChanged(p.suspendedEndpoint.elementId,p.sourceId,p),S(p,null,a),p.pending=!1}else p.suspendedEndpoint&&(p.isReattach()?(p.setHover(!1),p.floatingAnchorIndex=null,p.suspendedEndpoint.addConnection(p),j.repaint(s.elementId)):s.detach(p,!1,!0,!0,a))},t=i.dragEvents.drop;r.scope=r.scope||k,r[t]=a.wrap(r[t],s),i.initDroppable(d(c.el),r,!0)};b=L(b);for(var r=b.length&&b.constructor!=String?b:[b],s=0,t=r.length;t>s;s++)q(r[s]);return j},this.unmakeTarget=function(a,b){var c=p(a);return y.CurrentLibrary.destroyDroppable(c.el),b||(delete tb[c.id],delete vb[c.id],delete wb[c.id],delete Eb[c.id]),j},this.makeSource=function(b,c,h){var i=y.extend({},h);y.extend(i,c),xb(i,0);var k=y.CurrentLibrary,l=i.maxConnections||-1,m=i.onMaxConnections,n=function(b){var c=b.id,h=d(b.el),n=function(){return null==i.parent?null:"parent"===i.parent?b.el.parentNode:e(i.parent)},o=null!=i.parent?j.getId(n()):c;yb[o]=i,Ab[o]=i.uniqueEndpoint,Bb[o]=!0;var p=k.dragEvents.stop,q=k.dragEvents.drag,r=y.extend({},i.dragOptions||{}),s=r.drag,t=r.stop,u=null,v=!1;Db[o]=l,r.scope=r.scope||i.scope,r[q]=a.wrap(r[q],function(){s&&s.apply(this,arguments),v=!1}),r[p]=a.wrap(r[p],function(){if(t&&t.apply(this,arguments),j.currentlyDragging=!1,null!=u._jsPlumb){k.unbind(u.canvas,"mousedown");var a=i.anchor||j.Defaults.Anchor,b=u.anchor,d=u.connections[0],e=j.makeAnchor(a,c,j),h=u.element;if(null!=e.positionFinder){var l=f(h,j),m=g(h),o={left:l.left+b.x*m[0],top:l.top+b.y*m[1]},p=e.positionFinder(o,l,m,e.constructorParams);e.x=p[0],e.y=p[1]}if(u.setAnchor(e,!0),i.parent){var q=n();if(q){var r=i.container||j.Defaults.Container||y.Defaults.Container;u.setElement(q,r)}}u.repaint(),j.repaint(u.elementId),j.repaint(d.targetId)}});var w=function(a){if(Bb[o]){if(i.filter){var b=k.getOriginalEvent(a),d=jsPlumbUtil.isString(i.filter)?Fb(b,h,i.filter):i.filter(b,h);if(d===!1)return}var e=j.select({source:o}).length;if(Db[o]>=0&&e>=Db[o])return m&&m({element:h,maxConnections:l},a),!1;var f=_({elId:c}).o,g=j.getZoom(),p=((a.pageX||a.page.x)/g-f.left)/f.width,q=((a.pageY||a.page.y)/g-f.top)/f.height,s=p,t=q;if(i.parent){var w=n(),x=bb(w);f=_({elId:x}).o,s=((a.pageX||a.page.x)-f.left)/f.width,t=((a.pageY||a.page.y)-f.top)/f.height}var z={};if(y.extend(z,i),z.isSource=!0,z.anchor=[p,q,0,0],z.parentAnchor=[s,t,0,0],z.dragOptions=r,i.parent){var A=z.container||j.Defaults.Container||y.Defaults.Container;z.container=A?A:y.CurrentLibrary.getParent(n())}u=j.addEndpoint(c,z),v=!0,u.endpointWillMoveAfterConnection=null!=i.parent,u.endpointWillMoveTo=i.parent?n():null,u._doNotDeleteOnDetach=!1,u._deleteOnDetach=!0;var B=function(){v&&(v=!1,j.deleteEndpoint(u))};j.registerListener(u.canvas,"mouseup",B),j.registerListener(h,"mouseup",B),k.trigger(u.canvas,"mousedown",a)}};j.registerListener(h,"mousedown",w),Cb[c]=w,i.filter&&jsPlumbUtil.isString(i.filter)&&k.setDragFilter(h,i.filter)};b=L(b);for(var o=b.length&&b.constructor!=String?b:[b],q=0,r=o.length;r>q;q++)n(p(o[q]));return j},this.unmakeSource=function(a,b){var c=p(a),d=Cb[c.id];return d&&j.unregisterListener(c.el,"mousedown",d),b||(delete yb[c.id],delete Ab[c.id],delete Bb[c.id],delete Cb[c.id],delete Db[c.id]),j},this.unmakeEverySource=function(){for(var a in Bb)j.unmakeSource(a,!0);yb={},Ab={},Bb={},Cb={}},this.unmakeEveryTarget=function(){for(var a in Eb)j.unmakeTarget(a,!0);return tb={},vb={},wb={},Eb={},j};var Gb=function(b,c,d,e){var f="source"==b?Bb:Eb;if(c=L(c),a.isString(c))f[c]=e?!f[c]:d;else if(c.length)for(var g=0,h=c.length;h>g;g++){var i=p(c[g]);f[i.id]=e?!f[i.id]:d}return j};this.toggleSourceEnabled=function(a){return Gb("source",a,null,!0),j.isSourceEnabled(a)},this.setSourceEnabled=function(a,b){return Gb("source",a,b)},this.isSource=function(a){return null!=Bb[p(a).id]},this.isSourceEnabled=function(a){return Bb[p(a).id]===!0},this.toggleTargetEnabled=function(a){return Gb("target",a,null,!0),j.isTargetEnabled(a)},this.isTarget=function(a){return null!=Eb[p(a).id]},this.isTargetEnabled=function(a){return Eb[p(a).id]===!0},this.setTargetEnabled=function(a,b){return Gb("target",a,b)},this.ready=function(a){j.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a&&a.length)for(var d=0,e=a.length;e>d;d++)M(a[d],b,c);else M(a,b,c);return j},this.repaintEverything=function(a){var b=h();for(var c in u)M(c,null,b,a);return j},this.removeAllEndpoints=function(a,b){var c=function(a){var d,e,f=p(a),g=u[f.id];if(g)for(d=0,e=g.length;e>d;d++)j.deleteEndpoint(g[d]);if(delete u[f.id],b&&f.el&&3!=f.el.nodeType&&8!=f.el.nodeType)for(d=0,e=f.el.childNodes.length;e>d;d++)c(f.el.childNodes[d])};return c(a),j},this.remove=function(a,b){var c=p(a);j.doWhileSuspended(function(){j.removeAllEndpoints(c.id,!0),j.dragManager.elementRemoved(c.id),delete A[c.id],j.anchorManager.clearFor(c.id),j.anchorManager.removeFloatingConnection(c.id)},b===!1),c.el&&y.CurrentLibrary.removeElement(c.el)};var Hb={},Ib=function(){for(var a in Hb)for(var b=0,c=Hb[a].length;c>b;b++){var d=Hb[a][b];y.CurrentLibrary.unbind(d.el,d.event,d.listener)}Hb={}};this.registerListener=function(a,b,c){y.CurrentLibrary.bind(a,b,c),jsPlumbUtil.addToList(Hb,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,c){y.CurrentLibrary.unbind(a,b,c),jsPlumbUtil.removeWithFunction(Hb,function(a){return a.type==b&&a.listener==c})},this.reset=function(){j.deleteEveryEndpoint(),j.unbind(),tb={},ub={},vb={},wb={},yb={},zb={},Ab={},Db={},t.splice(0),Ib(),j.anchorManager.reset(),jsPlumbAdapter.headless||j.dragManager.reset()},this.setDefaultScope=function(a){return G=a,j},this.setDraggable=X,this.setId=function(a,b,c){var d;jsPlumbUtil.isString(a)?d=a:(a=e(a),d=j.getId(a));var f=j.getConnections({source:d,scope:"*"},!0),g=j.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=e(b):(a=e(d),jsPlumbAdapter.setAttribute(a,"id",b)),u[b]=u[d]||[];for(var h=0,i=u[b].length;i>h;h++)u[b][h].setElementId(b),u[b][h].setReferenceElement(a);delete u[d],j.anchorManager.changeId(d,b),jsPlumbAdapter.headless||j.dragManager.changeId(d,b);var k=function(c,d,e){for(var f=0,g=c.length;g>f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};k(f,0,"source"),k(g,1,"target"),j.repaint(b)},this.setDebugLog=function(a){r=a},this.setSuspendDrawing=function(a,b){var c=E;return E=a,F=a?(new Date).getTime():null,b&&j.repaintEverything(),c},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return F},this.doWhileSuspended=function(b,c){var d=j.isSuspendDrawing();d||j.setSuspendDrawing(!0);try{b()}catch(e){a.log("Function run while suspended failed",e)}d||j.setSuspendDrawing(!1,!c)},this.updateOffset=_,this.getOffset=function(a){return x[a]},this.getSize=function(a){return D[a]},this.getCachedData=ab,this.timestamp=h,this.setRenderMode=function(a){H=jsPlumbAdapter.setRenderMode(a);var b,c;if(H==y.CANVAS){var d=function(a){y.CurrentLibrary.bind(document,a,function(d){if(!j.currentlyDragging&&H==y.CANVAS){for(b=0,c=t.length;c>b;b++){var e=t[b].getConnector()[a](d);if(e)return}for(var f in u){var g=u[f];for(b=0,c=g.length;c>b;b++)if(g[b].endpoint[a]&&g[b].endpoint[a](d))return}}})};d("click"),d("dblclick"),d("mousemove"),d("mousedown"),d("mouseup"),d("contextmenu")}return H},this.getRenderMode=function(){return H},this.show=function(a,b){return Y(a,"block",b),j},this.getTestHarness=function(){return{endpointsByElement:u,endpointCount:function(a){var b=u[a];return b?b.length:0},connectionCount:function(a){a=a||G;var b=j.getConnections({scope:a});return b?b.length:0},getId:bb,makeAnchor:self.makeAnchor,makeDynamicAnchor:self.makeDynamicAnchor}},this.toggleVisible=$,this.toggleDraggable=Z,this.addListener=this.bind,this.adjustForParentOffsetAndScroll=function(a,b){var c=null,d=a;if("svg"===b.tagName.toLowerCase()&&b.parentNode?c=b.parentNode:b.offsetParent&&(c=b.offsetParent),null!=c){var e="body"===c.tagName.toLowerCase()?{left:0,top:0}:f(c,j),g="body"===c.tagName.toLowerCase()?{left:0,top:0}:{left:c.scrollLeft,top:c.scrollTop};d[0]=a[0]-e.left+g.left,d[1]=a[1]-e.top+g.top}return d},jsPlumbAdapter.headless||(j.dragManager=jsPlumbAdapter.getDragManager(j),j.recalculateOffsets=j.dragManager.updateOffsets)};jsPlumbUtil.extend(x,jsPlumbUtil.EventGenerator,{setAttribute:function(a,b,c){jsPlumbAdapter.setAttribute(a,b,c)},getAttribute:function(a,b){return jsPlumbAdapter.getAttribute(y.CurrentLibrary.getDOMElement(a),b)},registerConnectionType:function(a,b){this._connectionTypes[a]=y.extend({},b)},registerConnectionTypes:function(a){for(var b in a)this._connectionTypes[b]=y.extend({},a[b])},registerEndpointType:function(a,b){this._endpointTypes[a]=y.extend({},b)},registerEndpointTypes:function(a){for(var b in a)this._endpointTypes[b]=y.extend({},a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=y.CurrentLibrary,d=c.getElementObject(a),e=c.getDOMElement(d),f=this.getId(e),g=c.getElementObject(b),h=c.getDOMElement(g),i=this.getId(h);e.parentNode.removeChild(e),h.appendChild(e),this.dragManager.setParent(d,f,g,i)}});var y=new x;"undefined"!=typeof window&&(window.jsPlumb=y),y.getInstance=function(a){var b=new x(a);return b.init(),b},"function"==typeof define&&(define("jsplumb",[],function(){return y}),define("jsplumbinstance",[],function(){return y.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=y)}(),function(){var a=function(a,b){var c=!1;return{drag:function(){if(c)return c=!1,!0;var d=jsPlumb.CurrentLibrary.getUIPosition(arguments,b.getZoom());a.element&&(jsPlumb.CurrentLibrary.setOffset(a.element,d),b.repaint(a.element,d))},stopDrag:function(){c=!0}}},b=function(a,b,c){var d=document.createElement("div");d.style.position="absolute",jsPlumb.CurrentLibrary.getElementObject(d),jsPlumb.CurrentLibrary.appendElement(d,b);var e=c.getId(d);c.updateOffset({elId:e}),a.id=e,a.element=d},c=function(a,b,c,d,e,f,g){var h=new jsPlumb.FloatingAnchor({reference:b,referenceCanvas:d,jsPlumbInstance:f});return g({paintStyle:a,endpoint:c,anchor:h,source:e,scope:"__floating"})},d=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],e=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]},f=function(a,b){return jsPlumbUtil.findWithFunction(b.connections,function(b){return b.id==a.id})};jsPlumb.Endpoint=function(g){var h=g._jsPlumb,i=jsPlumb.CurrentLibrary,j=(jsPlumbAdapter.getAttribute,i.getElementObject),k=i.getDOMElement,l=jsPlumbUtil,m=g.newConnection,n=g.newEndpoint,o=g.finaliseConnection,p=(g.fireDetachEvent,g.fireMoveEvent),q=g.floatingConnections;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],this.parent=g.parent,OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:g.connectorStyle,connectorHoverStyle:g.connectorHoverStyle,connectorClass:g.connectorClass,connectorHoverClass:g.connectorHoverClass,connectorOverlays:g.connectorOverlays,connector:g.connector,connectorTooltip:g.connectorTooltip}},this._jsPlumb.enabled=!(g.enabled===!1),this._jsPlumb.visible=!0,this.element=k(g.source),this._jsPlumb.uuid=g.uuid,this._jsPlumb.floatingEndpoint=null;var r=null;this._jsPlumb.uuid&&(g.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=g.elementId,this._jsPlumb.connectionCost=g.connectionCost,this._jsPlumb.connectionsDirected=g.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var s=function(){i.removeClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.removeClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this._jsPlumb.currentAnchorClass=this.anchor.getCssClass(),this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),i.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass)}.bind(this);this.setAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(a,this.elementId,h),s(),this.anchor.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),s()}.bind(this)),b||this._jsPlumb.instance.repaint(this.elementId),this};var t=g.anchor?g.anchor:g.anchors?g.anchors:h.Defaults.Anchor||"Top";this.setAnchor(t,!0);var u=function(a){this.connections.length>0?this.connections[0].setHover(a,!1):this.setHover(a)}.bind(this);g._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(a){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy());var b=function(a,b){var c=h.getRenderMode();if(jsPlumb.Endpoints[c][a])return new jsPlumb.Endpoints[c][a](b);if(!h.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},c={_jsPlumb:this._jsPlumb.instance,cssClass:g.cssClass,parent:g.parent,container:g.container,tooltip:g.tooltip,connectorTooltip:g.connectorTooltip,endpoint:this};l.isString(a)?this.endpoint=b(a,c):l.isArray(a)?(c=l.merge(a[1],c),this.endpoint=b(a[0],c)):this.endpoint=a.clone(),jsPlumb.extend({},c),this.endpoint.clone=function(){return l.isString(a)?b(a,c):l.isArray(a)?(c=l.merge(a[1],c),b(a[0],c)):void 0}.bind(this),this.type=this.endpoint.type,this.bindListeners(this.endpoint,this,u)},this.setEndpoint(g.endpoint||h.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot"),this.setPaintStyle(g.paintStyle||g.style||h.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(g.hoverPaintStyle||h.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),l.copyValues(d,g,this),this.isSource=g.isSource||!1,this.isTarget=g.isTarget||!1,this._jsPlumb.maxConnections=g.maxConnections||h.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),i.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.connections=g.connections||[],this.connectorPointerEvents=g["connector-pointer-events"],this.scope=g.scope||h.getDefaultScope(),this.timestamp=null,this.reattachConnections=g.reattach||h.Defaults.ReattachConnections,this.connectionsDetachable=h.Defaults.ConnectionsDetachable,(g.connectionsDetachable===!1||g.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=g.dragAllowedWhenFull||!0,g.onMaxConnections&&this.bind("maxConnections",g.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)},this.detachFromConnection=function(a,b){b=null==b?f(a,this):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass))},this.detach=function(a,b,c,d,e,g,i){var j=null==i?f(a,this):i,k=!1;return d=d!==!1,j>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a))&&(h.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e}),k=!0),k},this.detachAll=function(a,b){for(;this.connections.length>0;)this.detach(this.connections[0],!1,!0,a!==!1,b,this,0);return this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&&d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(a){var b=this._jsPlumb.instance.getId(a),c=this.elementId;return l.removeWithFunction(g.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=k(a),this.elementId=h.getId(this.element),h.anchorManager.rehomeEndpoint(this,c,this.element),h.dragManager.endpointAdded(this.element),l.addToList(g.endpointsByElement,b,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),b=this.anchor.getOrientation(this),c=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[a[0],a[1]]
},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b},getCssClass:function(){return c}};return n({anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:g.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope})},this.isFloating=function(){return null!=this.anchor&&this.anchor.isFloating},this.connectorSelector=function(){var a=this.connections[0];return this.isTarget&&a?a:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=h.updateOffset({elId:this.elementId,timestamp:b}),f=a.offset?a.offset.o:d.o;if(null!=f){var g=a.anchorPoint,i=a.connectorPaintStyle;if(null==g){var j=a.dimensions||d.s,k={xy:[f.left,f.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=e(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=h.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}g=this.anchor.compute(k)}this.endpoint.compute(g,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,i||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r=0;r<this._jsPlumb.overlays.length;r++){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.repaint=this.paint;var v=!1;this.initDraggable=function(){if(!v&&i.isDragSupported(this.element)){var d={id:null,element:null},e=null,f=!1,k=null,o=a(d,h),p=function(){e=this.connectorSelector();var a=!0;if(this.isEnabled()||(a=!1),null!=e||this.isSource||(a=!1),this.isSource&&this.isFull()&&!this.dragAllowedWhenFull&&(a=!1),null==e||e.isDetachable()||(a=!1),a===!1)return i.stopDrag&&i.stopDrag(),o.stopDrag(),!1;for(var p=0;p<this.connections.length;p++)this.connections[p].setHover(!1);this.addClass("endpointDrag"),h.setConnectionBeingDragged(!0),e&&!this.isFull()&&this.isSource&&(e=null),h.updateOffset({elId:this.elementId}),r=this.makeInPlaceCopy(),r.referenceEndpoint=this,r.paint(),b(d,this.parent,h);var s=j(r.canvas),t=jsPlumb.CurrentLibrary.getOffset(s,h),u=h.adjustForParentOffsetAndScroll([t.left,t.top],r.canvas),v=j(this.canvas);if(i.setOffset(d.element,{left:u[0],top:u[1]}),this.parentAnchor&&(this.anchor=h.makeAnchor(this.parentAnchor,this.elementId,h)),h.setAttribute(this.canvas,"dragId",d.id),h.setAttribute(this.canvas,"elId",this.elementId),this._jsPlumb.floatingEndpoint=c(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,d.element,h,n),this.canvas.style.visibility="hidden",null==e)this.anchor.locked=!0,this.setHover(!1,!1),e=m({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:d.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:g.connectorStyle,hoverPaintStyle:g.connectorHoverStyle,connector:g.connector,overlays:g.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),e.pending=!0,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass),h.fire("connectionDrag",e);else{f=!0,e.setHover(!1),w(s,!1,!0);var x=e.endpoints[0].id==this.id?0:1;e.floatingAnchorIndex=x,this.detachFromConnection(e);var y=jsPlumb.CurrentLibrary.getDragScope(v);h.setAttribute(this.canvas,"originalScope",y);var z=i.getDropScope(v);i.setDragScope(v,z),h.fire("connectionDrag",e),0===x?(k=[e.source,e.sourceId,v,y],e.source=d.element,e.sourceId=d.id):(k=[e.target,e.targetId,v,y],e.target=d.element,e.targetId=d.id),e.endpoints[0===x?1:0].anchor.locked=!0,e.suspendedEndpoint=e.endpoints[x],e.suspendedElement=e.endpoints[x].getElement(),e.suspendedElementId=e.endpoints[x].elementId,e.suspendedElementType=0===x?"source":"target",e.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=e.suspendedEndpoint,e.endpoints[x]=this._jsPlumb.floatingEndpoint,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass)}q[d.id]=e,h.anchorManager.addFloatingConnection(d.id,e),l.addToList(g.endpointsByElement,d.id,this._jsPlumb.floatingEndpoint),h.currentlyDragging=!0}.bind(this),s=g.dragOptions||{},t=jsPlumb.extend({},i.defaultDragOptions),u=i.dragEvents.start,x=i.dragEvents.stop,y=i.dragEvents.drag;s=jsPlumb.extend(t,s),s.scope=s.scope||this.scope,s[u]=l.wrap(s[u],p,!1),s[y]=l.wrap(s[y],o.drag),s[x]=l.wrap(s[x],function(){if(h.setConnectionBeingDragged(!1),null!=e.endpoints){var a=i.getDropEvent(arguments),b=null==e.floatingAnchorIndex?1:e.floatingAnchorIndex;e.endpoints[0===b?1:0].anchor.locked=!1,e.removeClass(h.draggingClass),e.endpoints[b]==this._jsPlumb.floatingEndpoint&&f&&e.suspendedEndpoint&&(0===b?(e.source=k[0],e.sourceId=k[1]):(e.target=k[0],e.targetId=k[1]),i.setDragScope(k[2],k[3]),e.endpoints[b]=e.suspendedEndpoint,(e.isReattach()||e._forceReattach||e._forceDetach||!e.endpoints[0===b?1:0].detach(e,!1,!1,!0,a))&&(e.setHover(!1),e.floatingAnchorIndex=null,e._forceDetach=null,e._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(e),e.suspendedEndpoint.addConnection(e),h.repaint(k[1])))}h.remove(d.element,!1),h.remove(r.canvas,!1),this.deleteAfterDragStop?h.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),h.fire("connectionDragStop",e,a),h.currentlyDragging=!1,e=null}.bind(this));var z=j(this.canvas);i.initDraggable(z,s,!0,h),v=!0}},(this.isSource||this.isTarget)&&this.initDraggable();var w=function(a,b,c,d){if((this.isTarget||b)&&i.isDropSupported(this.element)){var e=g.dropOptions||h.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;e=jsPlumb.extend({},e),e.scope=e.scope||this.scope;var f=i.dragEvents.drop,k=i.dragEvents.over,m=i.dragEvents.out,n=function(){this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass);var a=i.getDropEvent(arguments),b=j(i.getDragObject(arguments)),c=h.getAttribute(b,"dragId"),e=(h.getAttribute(b,"elId"),h.getAttribute(b,"originalScope")),f=q[c],g=f.suspendedEndpoint&&(f.suspendedEndpoint.id==this.id||this.referenceEndpoint&&f.suspendedEndpoint.id==this.referenceEndpoint.id);if(g)return f._forceReattach=!0,void 0;if(null!=f){var k=null==f.floatingAnchorIndex?1:f.floatingAnchorIndex;e&&jsPlumb.CurrentLibrary.setDragScope(b,e);var l=null!=d?d.isEnabled():!0;if(this.isFull()&&this.fire("maxConnections",{endpoint:this,connection:f,maxConnections:this._jsPlumb.maxConnections},a),!this.isFull()&&(0!==k||this.isSource)&&(1!=k||this.isTarget)&&l){var m=!0;f.suspendedEndpoint&&f.suspendedEndpoint.id!=this.id&&(0===k?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.isDetachAllowed(f)&&f.endpoints[k].isDetachAllowed(f)&&f.suspendedEndpoint.isDetachAllowed(f)&&h.checkCondition("beforeDetach",f)||(m=!1)),0===k?(f.source=this.element,f.sourceId=this.elementId):(f.target=this.element,f.targetId=this.elementId);var n=function(){f.floatingAnchorIndex=null},r=function(){f.pending=!1,f.endpoints[k].detachFromConnection(f),f.suspendedEndpoint&&f.suspendedEndpoint.detachFromConnection(f),f.endpoints[k]=this,this.addConnection(f);var b=this.getParameters();for(var c in b)f.setParameter(c,b[c]);if(f.suspendedEndpoint){var d=(f.suspendedEndpoint.getElement(),f.suspendedEndpoint.elementId);p({index:k,originalSourceId:0===k?d:f.sourceId,newSourceId:0===k?this.elementId:f.sourceId,originalTargetId:1==k?d:f.targetId,newTargetId:1==k?this.elementId:f.targetId,originalSourceEndpoint:0===k?f.suspendedEndpoint:f.endpoints[0],newSourceEndpoint:0===k?this:f.endpoints[0],originalTargetEndpoint:1==k?f.suspendedEndpoint:f.endpoints[1],newTargetEndpoint:1==k?this:f.endpoints[1],connection:f},a)}else b.draggable&&jsPlumb.CurrentLibrary.initDraggable(this.element,dragOptions,!0,h);1==k?h.anchorManager.updateOtherEndpoint(f.sourceId,f.suspendedElementId,f.targetId,f):h.anchorManager.sourceChanged(f.suspendedEndpoint.elementId,f.sourceId,f),o(f,null,a),n()}.bind(this),s=function(){f.suspendedEndpoint&&(f.endpoints[k]=f.suspendedEndpoint,f.setHover(!1),f._forceDetach=!0,0===k?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.suspendedEndpoint.addConnection(f),f.endpoints[0].repaint(),f.repaint(),h.repaint(f.sourceId),f._forceDetach=!1),n()};m=m&&this.isDropAllowed(f.sourceId,f.targetId,f.scope,f,this),m?r():s()}h.currentlyDragging=!1}}.bind(this);e[f]=l.wrap(e[f],n),e[k]=l.wrap(e[k],function(){var a=i.getDragObject(arguments),b=h.getAttribute(a,"dragId"),c=q[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;if(e){var f=h.checkCondition("checkDropAllowed",{sourceEndpoint:c.endpoints[d],targetEndpoint:this,connection:c});this[(f?"add":"remove")+"Class"](h.endpointDropAllowedClass),this[(f?"remove":"add")+"Class"](h.endpointDropForbiddenClass),c.endpoints[d].anchor.over(this.anchor,this)}}}.bind(this)),e[m]=l.wrap(e[m],function(){var a=i.getDragObject(arguments),b=h.getAttribute(a,"dragId"),c=q[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;e&&(this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass),c.endpoints[d].anchor.out())}}.bind(this)),i.initDroppable(a,e,!0,c)}}.bind(this);return w(j(this.canvas),!0,!(g._transient||this.anchor.isFloating),this),g.type&&this.addType(g.type,g.data,h.isSuspendDrawing()),this},jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a){null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),jsPlumbUtil.copyValues(d,a,this),a.anchor&&(this.anchor=this._jsPlumb.instance.makeAnchor(a.anchor))},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){jsPlumb.CurrentLibrary.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null;var a=jsPlumb.CurrentLibrary.getElementObject(this.canvas);jsPlumb.CurrentLibrary.destroyDraggable(a),jsPlumb.CurrentLibrary.destroyDroppable(a)},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=jsPlumb.CurrentLibrary.getDOMElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}})}(),function(){var a=function(a,b,c,d){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[b][c])throw{msg:"jsPlumb: unknown connector type '"+c+"'"};return new jsPlumb.Connectors[b][c](d)},b=function(a,b,c){return a?c.makeAnchor(a,b,c):null},c=function(a,c,d,e,f,g,h,i,j,k){var l;if(e)d.endpoints[f]=e,e.addConnection(d);else{g.endpoints||(g.endpoints=[null,null]);var m=g.endpoints[f]||g.endpoint||a.Defaults.Endpoints[f]||jsPlumb.Defaults.Endpoints[f]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var n=g.endpointStyles[f]||g.endpointStyle||a.Defaults.EndpointStyles[f]||jsPlumb.Defaults.EndpointStyles[f]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==n.fillStyle&&null!=j&&(n.fillStyle=j.strokeStyle),null==n.outlineColor&&null!=j&&(n.outlineColor=j.outlineColor),null==n.outlineWidth&&null!=j&&(n.outlineWidth=j.outlineWidth);var o=g.endpointHoverStyles[f]||g.endpointHoverStyle||a.Defaults.EndpointHoverStyles[f]||jsPlumb.Defaults.EndpointHoverStyles[f]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=k&&(null==o&&(o={}),null==o.fillStyle&&(o.fillStyle=k.strokeStyle));var p=g.anchors?g.anchors[f]:g.anchor?g.anchor:b(a.Defaults.Anchors[f],i,a)||b(jsPlumb.Defaults.Anchors[f],i,a)||b(a.Defaults.Anchor,i,a)||b(jsPlumb.Defaults.Anchor,i,a),q=g.uuids?g.uuids[f]:null;l=c({paintStyle:n,hoverPaintStyle:o,endpoint:m,connections:[d],uuid:q,anchor:p,source:h,scope:g.scope,container:g.container,reattach:g.reattach||a.Defaults.ReattachConnections,detachable:g.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[f]=l,g.drawEndpoints===!1&&l.setVisible(!1,!0,!0)}return l};jsPlumb.Connection=function(a){var b=(a.newConnection,a.newEndpoint),d=jsPlumb.CurrentLibrary,e=(d.getAttribute,d.getElementObject,d.getDOMElement),f=jsPlumbUtil;d.getOffset,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.parent=a.parent,this.previousConnection=a.previousConnection,this.source=e(a.source),this.target=e(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var g=this._jsPlumb.instance;this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={parent:a.parent,cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams},this._jsPlumb.lastPaintedAt=null,this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}};var h=c(g,b,this,a.sourceEndpoint,0,a,this.source,this.sourceId,a.paintStyle,a.hoverPaintStyle);h&&f.addToList(a.endpointsByElement,this.sourceId,h);var i=c(g,b,this,a.targetEndpoint,1,a,this.target,this.targetId,a.paintStyle,a.hoverPaintStyle);i&&f.addToList(a.endpointsByElement,this.targetId,i),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0)),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||g.Defaults.Connector||jsPlumb.Defaults.Connector,!0),a.path&&this.connector.setPath(a.path),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||g.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||g.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle();var j=g.getSuspendedAt();if(g.updateOffset({elId:this.sourceId,timestamp:j}),g.updateOffset({elId:this.targetId,timestamp:j}),!g.isSuspendDrawing()){var k=g.getCachedData(this.sourceId),l=k.o,m=k.s,n=g.getCachedData(this.targetId),o=n.o,p=n.s,q=j||g.timestamp(),r=this.endpoints[0].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[o.left,o.top],twh:p,tElement:this.endpoints[1],timestamp:q});this.endpoints[0].paint({anchorLoc:r,timestamp:q}),r=this.endpoints[1].anchor.compute({xy:[o.left,o.top],wh:p,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[0],timestamp:q}),this.endpoints[1].paint({anchorLoc:r,timestamp:q})}this._jsPlumb.detachable=g.Defaults.ConnectionsDetachable,a.detachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[0].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[1].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this._jsPlumb.reattach=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||g.Defaults.ReattachConnections,this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var s=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(s,this.endpoints[0].getParameters()),jsPlumb.extend(s,this.getParameters()),this.setParameters(s);var t=[a.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[a-zA-Z]/.test(t)&&this.addType(t,a.data,!0)},jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(a,b){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),this.setConnector(a.connector,b)},getTypeDescriptor:function(){return"connection"},getAttachedElements:function(){return this.endpoints},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(),this.connector.destroy()),this.connector=null},isDetachable:function(){return this._jsPlumb.detachable===!0},setDetachable:function(a){this._jsPlumb.detachable=a===!0},isReattach:function(){return this._jsPlumb.reattach===!0},setReattach:function(a){this._jsPlumb.reattach=a===!0},setHover:function(a){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(a),jsPlumb.CurrentLibrary[a?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),jsPlumb.CurrentLibrary[a?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getCost:function(){return this._jsPlumb.cost},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},moveParent:function(a){var b=jsPlumb.CurrentLibrary;b.getParent(this.connector.canvas),this.connector.bgCanvas&&(b.removeElement(this.connector.bgCanvas),b.appendElement(this.connector.bgCanvas,a)),b.removeElement(this.connector.canvas),b.appendElement(this.connector.canvas,a);for(var c=0;c<this._jsPlumb.overlays.length;c++)this._jsPlumb.overlays[c].isAppendedAtTopLevel&&(b.removeElement(this._jsPlumb.overlays[c].canvas),b.appendElement(this._jsPlumb.overlays[c].canvas,a),this._jsPlumb.overlays[c].reattachListeners&&this._jsPlumb.overlays[c].reattachListeners(this.connector));this.connector.reattachListeners&&this.connector.reattachListeners()},getConnector:function(){return this.connector},setConnector:function(b,c){var d=jsPlumbUtil;null!=this.connector&&(this.connector.cleanup(),this.connector.destroy());var e={_jsPlumb:this._jsPlumb.instance,parent:this._jsPlumb.params.parent,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},f=this._jsPlumb.instance.getRenderMode();d.isString(b)?this.connector=a(this._jsPlumb.instance,f,b,e):d.isArray(b)&&(this.connector=1==b.length?a(this._jsPlumb.instance,f,b[0],e):a(this._jsPlumb.instance,f,b[0],d.merge(b[1],e))),this.bindListeners(this.connector,this,function(a){this.setHover(a,!1)}.bind(this)),this.canvas=this.connector.canvas,this._jsPlumb.editable&&null!=jsPlumb.ConnectorEditors&&jsPlumb.ConnectorEditors[this.connector.type]&&this.connector.isEditable()?new jsPlumb.ConnectorEditors[this.connector.type]({connector:this.connector,connection:this,params:this._jsPlumb.params.editorParams||{}}):this._jsPlumb.editable=!1,c||this.repaint()},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=(a.elId,a.ui),c=a.recalc,d=a.timestamp,e=!1,f=e?this.sourceId:this.targetId,g=e?this.targetId:this.sourceId,h=e?0:1,i=e?1:0;if(null==d||d!=this._jsPlumb.lastPaintedAt){var j=this._jsPlumb.instance.updateOffset({elId:g,offset:b,recalc:c,timestamp:d}).o,k=this._jsPlumb.instance.updateOffset({elId:f,timestamp:d}).o,l=this.endpoints[i],m=this.endpoints[h];a.clearEdits&&(this._jsPlumb.overlayPositions=null,l.anchor.clearUserDefinedLocation(),m.anchor.clearUserDefinedLocation(),this.connector.setEdited(!1));var n=l.anchor.getCurrentLocation({xy:[j.left,j.top],wh:[j.width,j.height],element:l,timestamp:d}),o=m.anchor.getCurrentLocation({xy:[k.left,k.top],wh:[k.width,k.height],element:m,timestamp:d});this.connector.resetBounds(),this.connector.compute({sourcePos:n,targetPos:o,sourceEndpoint:this.endpoints[i],targetEndpoint:this.endpoints[h],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:j,targetInfo:k,clearEdits:a.clearEdits===!0});for(var p={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},q=0;q<this._jsPlumb.overlays.length;q++){var r=this._jsPlumb.overlays[q];r.isVisible()&&(this._jsPlumb.overlayPlacements[q]=r.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(r)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[q].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[q].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[q].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[q].maxY))}var s=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,t=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),u={xmin:Math.min(this.connector.bounds.minX-(s+t),p.minX),ymin:Math.min(this.connector.bounds.minY-(s+t),p.minY),xmax:Math.max(this.connector.bounds.maxX+(s+t),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(s+t),p.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,u);for(var v=0;v<this._jsPlumb.overlays.length;v++){var w=this._jsPlumb.overlays[v];w.isVisible()&&w.paint(this._jsPlumb.overlayPlacements[v],u)}}this._jsPlumb.lastPaintedAt=d}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp,clearEdits:a.clearEdits})}})}(),function(){jsPlumb.AnchorManager=function(a){var b={},c={},d={},e={},f={},g={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},h={},i=this,j={},k=a.jsPlumbInstance,l=jsPlumb.CurrentLibrary,m={},n=function(a,b,c,d,e,f){if(a===b)return{orientation:g.IDENTITY,a:["top","top"]};var h=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),i=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),j=c.left<=d.left&&c.right>=d.left||c.left<=d.right&&c.right>=d.right||c.left<=d.left&&c.right>=d.right||d.left<=c.left&&d.right>=c.right,k=c.top<=d.top&&c.bottom>=d.top||c.top<=d.bottom&&c.bottom>=d.bottom||c.top<=d.top&&c.bottom>=d.bottom||d.top<=c.top&&d.bottom>=c.bottom,l=function(a){return[e.isContinuous?e.verifyEdge(a[0]):a[0],f.isContinuous?f.verifyEdge(a[1]):a[1]]},m={orientation:g.DIAGONAL,theta:h,theta2:i};return j||k?j?(m.orientation=g.HORIZONTAL,m.a=c.top<d.top?["bottom","top"]:["top","bottom"]):(m.orientation=g.VERTICAL,m.a=c.left<d.left?["right","left"]:["left","right"]):d.left>c.left&&d.top>c.top?m.a=["right","top"]:d.left>c.left&&c.top>d.top?m.a=["top","left"]:d.left<c.left&&d.top<c.top?m.a=["top","right"]:d.left<c.left&&d.top>c.top&&(m.a=["left","top"]),m.a=l(m.a),m},o=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},p=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],d===!1?-1:1}},q=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},r={top:function(a,b){return a[0]>b[0]?1:-1},right:p(!0),bottom:p(!0),left:q},s=function(a,b){return a.sort(b)},t=function(a,b){var c=k.getCachedData(a),e=c.s,g=c.o,h=function(b,c,e,g,h,i,j){if(g.length>0)for(var l=s(g,r[b]),m="right"===b||"top"===b,n=o(b,c,e,l,h,i,m),p=function(a,b){var c=k.adjustForParentOffsetAndScroll([b[0],b[1]],a.canvas);d[a.id]=[c[0],c[1],b[2],b[3]],f[a.id]=j},q=0;q<n.length;q++){var t=n[q][4],u=t.endpoints[0].elementId===a,v=t.endpoints[1].elementId===a;u?p(t.endpoints[0],n[q]):v&&p(t.endpoints[1],n[q])}};h("bottom",e,[g.left,g.top],b.bottom,!0,1,[0,1]),h("top",e,[g.left,g.top],b.top,!0,0,[0,-1]),h("left",e,[g.left,g.top],b.left,!1,0,[-1,0]),h("right",e,[g.left,g.top],b.right,!1,1,[1,0])};this.reset=function(){b={},h={},j={}},this.addFloatingConnection=function(a,b){m[a]=b},this.removeFloatingConnection=function(a){delete m[a]},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,e=!0,f=function(a,f,g,i,j){b==c&&g.isContinuous&&(l.removeElement(d[1].canvas),e=!1),jsPlumbUtil.addToList(h,i,[j,f,g.constructor==jsPlumb.DynamicAnchor])};f(0,d[0],d[0].anchor,c,a),e&&f(1,d[1],d[1].anchor,b,a)};var u=function(a){!function(a,b){if(a){var c=function(a){return a[4]==b};jsPlumbUtil.removeWithFunction(a.top,c),jsPlumbUtil.removeWithFunction(a.left,c),jsPlumbUtil.removeWithFunction(a.bottom,c),jsPlumbUtil.removeWithFunction(a.right,c)}}(j[a.elementId],a.id)};this.connectionDetached=function(a){var b=a.connection||a,c=a.sourceId,d=a.targetId,e=b.endpoints,f=function(a,b,c,d,e){null!=c&&c.constructor==jsPlumb.FloatingAnchor||jsPlumbUtil.removeWithFunction(h[d],function(a){return a[0].id==e.id})};f(1,e[1],e[1].anchor,c,b),f(0,e[0],e[0].anchor,d,b),u(b.endpoints[0]),u(b.endpoints[1]),i.redraw(b.sourceId),i.redraw(b.targetId)},this.add=function(a,c){jsPlumbUtil.addToList(b,c,a)},this.changeId=function(a,c){h[c]=h[a],b[c]=b[a],delete h[a],delete b[a]},this.getConnectionsFor=function(a){return h[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){jsPlumbUtil.removeWithFunction(b[a.elementId],function(b){return b.id==a.id}),u(a)},this.clearFor=function(a){delete b[a],b[a]=[]};var v=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=-1,o=-1,p=e.endpoints[h],q=p.id,r=[1,0][h],s=[[c,d],e,f,g,q],t=b[j],u=p._continuousAnchorEdge?b[p._continuousAnchorEdge]:null;if(u){var v=jsPlumbUtil.findWithFunction(u,function(a){return a[4]==q});if(-1!=v){u.splice(v,1);for(var w=0;w<u.length;w++)jsPlumbUtil.addWithFunction(l,u[w][1],function(a){return a.id==u[w][1].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[h],function(a){return a.id==u[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[r],function(a){return a.id==u[w][1].endpoints[r].id})}}for(w=0;w<t.length;w++)1==a.idx&&t[w][3]===g&&-1==o&&(o=w),jsPlumbUtil.addWithFunction(l,t[w][1],function(a){return a.id==t[w][1].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[h],function(a){return a.id==t[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[r],function(a){return a.id==t[w][1].endpoints[r].id});if(-1!=n)t[n]=s;else{var x=i?-1!=o?o:0:t.length;t.splice(x,0,s)}p._continuousAnchorEdge=j};this.updateOtherEndpoint=function(a,b,c,d){var e=jsPlumbUtil.findWithFunction(h[a],function(a){return a[0].id===d.id}),f=jsPlumbUtil.findWithFunction(h[b],function(a){return a[0].id===d.id});-1!=e&&(h[a][e][0]=d,h[a][e][1]=d.endpoints[1],h[a][e][2]=d.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor),f>-1&&(h[b].splice(f,1),jsPlumbUtil.addToList(h,c,[d,d.endpoints[0],d.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]))},this.sourceChanged=function(a,b,c){jsPlumbUtil.removeWithFunction(h[a],function(a){return a[0].id===c.id});var d=jsPlumbUtil.findWithFunction(h[c.targetId],function(a){return a[0].id===c.id});d>-1&&(h[c.targetId][d][0]=c,h[c.targetId][d][1]=c.endpoints[0],h[c.targetId][d][2]=c.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor),jsPlumbUtil.addToList(h,b,[c,c.endpoints[1],c.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])},this.rehomeEndpoint=function(a,c,d){var e=b[c]||[],f=k.getId(d);if(f!==c){var g=jsPlumbUtil.indexOf(e,a);if(g>-1){var h=e.splice(g,1)[0];i.add(h,f)}}for(var j=0;j<a.connections.length;j++)a.connections[j].sourceId==c?(a.connections[j].sourceId=a.elementId,a.connections[j].source=a.element,i.sourceChanged(c,a.elementId,a.connections[j])):a.connections[j].targetId==c&&(a.connections[j].targetId=a.elementId,a.connections[j].target=a.element,i.updateOtherEndpoint(a.connections[j].sourceId,c,a.elementId,a.connections[j]))},this.redraw=function(a,c,d,e,f,g){if(!k.isSuspendDrawing()){var i=b[a]||[],l=h[a]||[],o=[],p=[],q=[];d=d||k.timestamp(),e=e||{left:0,top:0},c&&(c={left:c.left+e.left,top:c.top+e.top});for(var r=k.updateOffset({elId:a,offset:c,recalc:!1,timestamp:d}),s={},u=0;u<l.length;u++){var w=l[u][0],x=w.sourceId,y=w.targetId,z=w.endpoints[0].anchor.isContinuous,A=w.endpoints[1].anchor.isContinuous;if(z||A){var B=x+"_"+y,C=s[B],D=w.sourceId==a?1:0;z&&!j[x]&&(j[x]={top:[],right:[],bottom:[],left:[]}),A&&!j[y]&&(j[y]={top:[],right:[],bottom:[],left:[]}),a!=y&&k.updateOffset({elId:y,timestamp:d}),a!=x&&k.updateOffset({elId:x,timestamp:d});var E=k.getCachedData(y),F=k.getCachedData(x);y==x&&(z||A)?v(j[x],-Math.PI/2,0,w,!1,y,0,!1,"top",x,o,p):(C||(C=n(x,y,F.o,E.o,w.endpoints[0].anchor,w.endpoints[1].anchor),s[B]=C),z&&v(j[x],C.theta,0,w,!1,y,0,!1,C.a[0],x,o,p),A&&v(j[y],C.theta2,-1,w,!0,x,1,!0,C.a[1],y,o,p)),z&&jsPlumbUtil.addWithFunction(q,x,function(a){return a===x}),A&&jsPlumbUtil.addWithFunction(q,y,function(a){return a===y}),jsPlumbUtil.addWithFunction(o,w,function(a){return a.id==w.id}),(z&&0===D||A&&1===D)&&jsPlumbUtil.addWithFunction(p,w.endpoints[D],function(a){return a.id==w.endpoints[D].id})}}for(u=0;u<i.length;u++)0===i[u].connections.length&&i[u].anchor.isContinuous&&(j[a]||(j[a]={top:[],right:[],bottom:[],left:[]}),v(j[a],-Math.PI/2,0,{endpoints:[i[u],i[u]],paint:function(){}},!1,a,0,!1,"top",a,o,p),jsPlumbUtil.addWithFunction(q,a,function(b){return b===a
}));for(u=0;u<q.length;u++)t(q[u],j[q[u]]);for(u=0;u<i.length;u++)i[u].paint({timestamp:d,offset:r,dimensions:r.s,recalc:g!==!0});for(u=0;u<p.length;u++){var G=k.getCachedData(p[u].elementId);p[u].paint({timestamp:d,offset:G,dimensions:G.s})}for(u=0;u<l.length;u++){var H=l[u][1];if(H.anchor.constructor==jsPlumb.DynamicAnchor){H.paint({elementWithPrecedence:a,timestamp:d}),jsPlumbUtil.addWithFunction(o,l[u][0],function(a){return a.id==l[u][0].id});for(var I=0;I<H.connections.length;I++)H.connections[I]!==l[u][0]&&jsPlumbUtil.addWithFunction(o,H.connections[I],function(a){return a.id==H.connections[I].id})}else H.anchor.constructor==jsPlumb.Anchor&&jsPlumbUtil.addWithFunction(o,l[u][0],function(a){return a.id==l[u][0].id})}var J=m[a];for(J&&J.paint({timestamp:d,recalc:!1,elId:a}),u=0;u<o.length;u++){var K=d;o[u].paint({elId:a,timestamp:K,recalc:!1,clearEdits:f})}}};var w=function(a){jsPlumbUtil.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||["top","right","bottom","left"],c=!(a.clockwise===!1),g={},h={top:"bottom",right:"left",left:"right",bottom:"top"},i={top:"right",right:"bottom",left:"top",bottom:"left"},j={top:"left",right:"top",left:"bottom",bottom:"right"},k=c?i:j,l=c?j:i,m=a.cssClass||"",n=0;n<b.length;n++)g[b[n]]=!0;this.verifyEdge=function(a){return g[a]?a:g[h[a]]?h[a]:g[k[a]]?k[a]:g[l[a]]?l[a]:a},this.compute=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getOrientation=function(a){return f[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete e[a.elementId]},this.setUserDefinedLocation=function(b){e[a.elementId]=b},this.getCssClass=function(){return m},this.setCssClass=function(a){m=a}};k.continuousAnchorFactory={get:function(a){var b=c[a.elementId];return b||(b=new w(a),c[a.elementId]=b),b},clear:function(a){delete c[a]}}},jsPlumb.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],jsPlumbUtil.EventGenerator.apply(this);var b=a.jsPlumbInstance;this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,this.compute=function(a){var c=a.xy,d=a.wh,e=a.element,f=a.timestamp;return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),f&&f===self.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:(this.lastReturnValue=[c[0]+this.x*d[0]+this.offsets[0],c[1]+this.y*d[1]+this.offsets[1]],this.lastReturnValue=b.adjustForParentOffsetAndScroll(this.lastReturnValue,e.canvas)),this.timestamp=f,this.lastReturnValue)},this.getCurrentLocation=function(a){return null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),jsPlumb.FloatingAnchor=function(a){jsPlumb.Anchor.apply(this,arguments);var b=a.reference,c=jsPlumb.CurrentLibrary,d=a.jsPlumbInstance,e=a.referenceCanvas,f=c.getSize(c.getElementObject(e)),g=0,h=0,i=null,j=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=a.element,e=[b[0]+f[0]/2,b[1]+f[1]/2];return e=d.adjustForParentOffsetAndScroll(e,c.canvas),j=e,e},this.getOrientation=function(a){if(i)return i;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*g,-1*Math.abs(c[1])*h]},this.over=function(a,b){i=a.getOrientation(b)},this.out=function(){i=null},this.getCurrentLocation=function(a){return null==j?this.compute(a):j}},jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var a=function(a,b,c){return a.constructor==jsPlumb.Anchor?a:b.makeAnchor(a,c,b)};jsPlumb.DynamicAnchor=function(b){jsPlumb.Anchor.apply(this,arguments),this.isSelective=!0,this.isDynamic=!0,this.anchors=[],this.elementId=b.elementId,this.jsPlumbInstance=b.jsPlumbInstance;for(var c=0;c<b.anchors.length;c++)this.anchors[c]=a(b.anchors[c],this.jsPlumbInstance,this.elementId);this.addAnchor=function(b){this.anchors.push(a(b,this.jsPlumbInstance,this.elementId))},this.getAnchors=function(){return this.anchors},this.locked=!1;var d=this.anchors.length>0?this.anchors[0]:null,e=(this.anchors.length>0?0:-1,d),f=this,g=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},h=b.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,h=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=g(e[k],f,h,a,b);j>l&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,g=a.timestamp,i=a.txy,j=a.twh;a.clearUserDefinedLocation&&(userDefinedLocation=null),this.timestamp=g;var k=f.getUserDefinedLocation();return null!=k?k:this.locked||null==i||null==j?d.compute(a):(a.timestamp=null,d=h(b,c,i,j,this.anchors),this.x=d.x,this.y=d.y,d!=e&&this.fire("anchorChanged",d),e=d,d.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=d?d.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=d?d.getOrientation(a):[0,0]},this.over=function(a,b){null!=d&&d.over(a,b)},this.out=function(){null!=d&&d.out()},this.getCssClass=function(){return d&&d.getCssClass()||""}},jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(a,b,c,d,e,f){jsPlumb.Anchors[e]=function(g){var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}};b(.5,0,0,-1,"TopCenter"),b(.5,1,0,1,"BottomCenter"),b(0,.5,-1,0,"LeftMiddle"),b(1,.5,1,0,"RightMiddle"),b(.5,0,0,-1,"Top"),b(.5,1,0,1,"Bottom"),b(0,.5,-1,0,"Left"),b(1,.5,1,0,"Right"),b(.5,.5,0,0,"Center"),b(1,0,0,-1,"TopRight"),b(1,1,0,1,"BottomRight"),b(0,0,0,-1,"TopLeft"),b(0,1,0,1,"BottomLeft"),jsPlumb.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},jsPlumb.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var c=function(a,b){jsPlumb.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};jsPlumb.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},c("ContinuousLeft",["left"]),c("ContinuousTop",["top"]),c("ContinuousBottom",["bottom"]),c("ContinuousRight",["right"]),b(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},jsPlumb.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b>f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}(),function(){jsPlumb.DOMElementComponent=jsPlumbUtil.extend(jsPlumb.jsPlumbUIComponent,function(){this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(){}}),jsPlumb.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var b,c,d,e,f,g,h,i=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(){b=Math.sqrt(Math.pow(f-e,2)+Math.pow(h-g,2)),c=jsPlumbGeom.gradient({x:e,y:g},{x:f,y:h}),d=-1/c});this.type="Straight",this.getLength=function(){return b},this.getGradient=function(){return c},this.getCoordinates=function(){return{x1:e,y1:g,x2:f,y2:h}},this.setCoordinates=function(a){e=a.x1,g=a.y1,f=a.x2,h=a.y2,i()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(e,f),minY:Math.min(g,h),maxX:Math.max(e,f),maxY:Math.max(g,h)}},this.pointOnPath=function(a,c){if(0!==a||c){if(1!=a||c){var d=c?a>0?a:b+a:a*b;return jsPlumbGeom.pointOnLine({x:e,y:g},{x:f,y:h},d)}return{x:f,y:h}}return{x:e,y:g}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(a,b,c){var d=this.pointOnPath(a,c),i=0>=b?{x:e,y:g}:{x:f,y:h};return 0>=b&&Math.abs(b)>1&&(b*=-1),jsPlumbGeom.pointOnLine(d,i,b)};var j=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},k=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,i){var l={d:1/0,x:null,y:null,l:null,x1:e,x2:f,y1:g,y2:h};if(0===c)l.y=g,l.x=j(e,f,a)?a:k(e,f,a);else if(1/0==c||c==-1/0)l.x=e,l.y=j(g,h,i)?i:k(g,h,i);else{var m=g-c*e,n=i-d*a,o=(n-m)/(c-d),p=c*o+m;l.x=j(e,f,o)?o:k(e,f,o),l.y=j(g,h,p)?p:k(g,h,p)}var q=jsPlumbGeom.lineLength([l.x,l.y],[e,g]);return l.d=jsPlumbGeom.lineLength([a,i],[l.x,l.y]),l.l=q/b,l}},Arc:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(b,c){return jsPlumbGeom.theta([a.cx,a.cy],[b,c])}),c=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+d:a.startAngle,e=Math.abs(c-a.endAngle);return c-e*b}var f=a.endAngle<a.startAngle?a.endAngle+d:a.endAngle,g=Math.abs(f-a.startAngle);return a.startAngle+g*b},d=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=b(a.x1,a.y1),this.endAngle=b(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=d),this.startAngle<0&&(this.startAngle+=d),this.segment=jsPlumbGeom.quadrant([this.x1,this.y1],[this.x2,this.y2]);var e=this.endAngle<this.startAngle?this.endAngle+d:this.endAngle;this.sweep=Math.abs(e-this.startAngle),this.anticlockwise&&(this.sweep=d-this.sweep);var f=2*Math.PI*this.radius,g=this.sweep/d,h=f*g;this.getLength=function(){return h},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var i=1e-10,j=function(a){var b=Math.floor(a),c=Math.ceil(a);return i>a-b?b:i>c-a?c:a};this.pointOnPath=function(b,d){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};d&&(b/=h);var e=c(this,b),f=a.cx+a.r*Math.cos(e),g=a.cy+a.r*Math.sin(e);return{x:j(f),y:j(g),theta:e}},this.gradientAtPoint=function(b,c){var d=this.pointOnPath(b,c),e=jsPlumbGeom.normal([a.cx,a.cy],[d.x,d.y]);return this.anticlockwise||1/0!=e&&e!=-1/0||(e*=-1),e},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),g=2*(c/f)*Math.PI,h=this.anticlockwise?-1:1,i=e.theta+h*g,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),[{x:a.x1,y:a.y1},{x:a.cp1x,y:a.cp1y},{x:a.cp2x,y:a.cp2y},{x:a.x2,y:a.y2}]),c={minX:Math.min(a.x1,a.x2,a.cp1x,a.cp2x),minY:Math.min(a.y1,a.y2,a.cp1y,a.cp2y),maxX:Math.max(a.x1,a.x2,a.cp1x,a.cp2x),maxY:Math.max(a.y1,a.y2,a.cp1y,a.cp2y)};this.type="Bezier";var d=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,c){return a=d(b,a,c),jsBezier.pointOnCurve(b,a)},this.gradientAtPoint=function(a,c){return a=d(b,a,c),jsBezier.gradientAtPoint(b,a)},this.pointAlongPathFrom=function(a,c,e){return a=d(b,a,e),jsBezier.pointAlongCurveFrom(b,a,c)},this.getLength=function(){return jsBezier.getLength(b)},this.getBounds=function(){return c}}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(b){a.apply(this,arguments);var c=[],d=0,e=[],f=[],g=b.stub||0,h=jsPlumbUtil.isArray(g)?g[0]:g,i=jsPlumbUtil.isArray(g)?g[1]:g,j=b.gap||0,k=jsPlumbUtil.isArray(j)?j[0]:j,l=jsPlumbUtil.isArray(j)?j[1]:j,m=null,n=!1,o=null;this.isEditable=function(){return!1},this.setEdited=function(a){n=a},this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(a,b){for(var d={d:1/0,s:null,x:null,y:null,l:null},e=0;e<c.length;e++){var f=c[e].findClosestPointOnPath(a,b);f.d<d.d&&(d.d=f.d,d.l=f.l,d.x=f.x,d.y=f.y,d.s=c[e],d.x1=f.x1,d.x2=f.x2,d.y1=f.y1,d.y2=f.y2,d.index=e)}return d};var p=function(){for(var a=0,b=0;b<c.length;b++){var g=c[b].getLength();f[b]=g/d,e[b]=[a,a+=g/d]}},q=function(a,b){b&&(a=a>0?a/d:(d+a)/d);for(var g=e.length-1,h=1,i=0;i<e.length;i++)if(e[i][1]>=a){g=i,h=1==a?1:0===a?0:(a-e[i][0])/f[i];break}return{segment:c[g],proportion:h,index:g}},r=function(a,b,e){if(e.x1!=e.x2||e.y1!=e.y2){var f=new jsPlumb.Segments[b](e);c.push(f),d+=f.getLength(),a.updateBounds(f)}},s=function(){d=0,c.splice(0,c.length),e.splice(0,e.length),f.splice(0,f.length)};this.setSegments=function(a){m=[],d=0;for(var b=0;b<a.length;b++)m.push(a[b]),d+=a[b].getLength()};var t=function(a){this.lineWidth=a.lineWidth;var b=jsPlumbGeom.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],d=a.targetPos[1]<a.sourcePos[1],e=a.lineWidth||1,f=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),g=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),j=c?a.targetPos[0]:a.sourcePos[0],m=d?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===f[0]&&0===f[1]||0===g[0]&&0===g[1]){var p=n>o?0:1,q=[1,0][p];f=[],g=[],f[p]=a.sourcePos[p]>a.targetPos[p]?-1:1,g[p]=a.sourcePos[p]>a.targetPos[p]?1:-1,f[q]=0,g[q]=0}var r=c?n+k*f[0]:k*f[0],s=d?o+k*f[1]:k*f[1],t=c?l*g[0]:n+l*g[0],u=d?l*g[1]:o+l*g[1],v=f[0]*g[0]+f[1]*g[1],w={sx:r,sy:s,tx:t,ty:u,lw:e,xSpan:Math.abs(t-r),ySpan:Math.abs(u-s),mx:(r+t)/2,my:(s+u)/2,so:f,to:g,x:j,y:m,w:n,h:o,segment:b,startStubX:r+f[0]*h,startStubY:s+f[1]*h,endStubX:t+g[0]*i,endStubY:u+g[1]*i,isXGreaterThanStubTimes2:Math.abs(r-t)>h+i,isYGreaterThanStubTimes2:Math.abs(s-u)>h+i,opposite:-1==v,perpendicular:0===v,orthogonal:1==v,sourceAxis:0===f[0]?"y":"x",points:[j,m,n,o,r,s,t,u]};return w.anchorOrientation=w.opposite?"opposite":w.orthogonal?"orthogonal":"perpendicular",w};return this.getSegments=function(){return c},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)},this.pointOnPath=function(a,b){var c=q(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,b)||[0,0]},this.gradientAtPoint=function(a){var b=q(a,absolute);return b.segment&&b.segment.gradientAtPoint(b.proportion,absolute)||0},this.pointAlongPathFrom=function(a,b,c){var d=q(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){n||(o=t.call(this,a)),s(),this._compute(o,a),this.x=o.points[0],this.y=o.points[1],this.w=o.points[2],this.h=o.points[3],this.segment=o.segment,p()},{addSegment:r,prepareCompute:t,sourceStub:h,targetStub:i,maxStub:Math.max(h,i),sourceGap:k,targetGap:l,maxGap:Math.max(k,l)}},jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,a);var b=jsPlumb.Connectors.Straight=function(){this.type="Straight";var a=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(b,"Straight");var c=function(a){a=a||{};var b=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),c=(a.stub||50,a.curviness||150),d=10;this.type="Bezier",this.getCurviness=function(){return c},this._findControlPoint=function(a,b,e,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(e[0]<b[0]?a[0]+d:a[0]-d):k.push(a[0]+c*i[0]),0===i[1]?k.push(e[1]<b[1]?a[1]+d:a[1]-d):k.push(a[1]+c*h[1])):(0===h[0]?k.push(b[0]<e[0]?a[0]+d:a[0]-d):k.push(a[0]-c*h[0]),0===h[1]?k.push(b[1]<e[1]?a[1]+d:a[1]-d):k.push(a[1]+c*i[1])),k},this._compute=function(a,c){var d=c.sourcePos,e=c.targetPos,f=Math.abs(d[0]-e[0]),g=Math.abs(d[1]-e[1]),h=d[0]<e[0]?f:0,i=d[1]<e[1]?g:0,j=d[0]<e[0]?0:f,k=d[1]<e[1]?0:g,l=this._findControlPoint([h,i],d,e,c.sourceEndpoint,c.targetEndpoint),m=this._findControlPoint([j,k],e,d,c.targetEndpoint,c.sourceEndpoint);b.addSegment(this,"Bezier",{x1:h,y1:i,x2:j,y2:k,cp1x:l[0],cp1y:l[1],cp2x:m[0],cp2y:m[1]})}};jsPlumbUtil.extend(c,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(c,"Bezier"),jsPlumb.Endpoints.AbstractEndpoint=function(b){a.apply(this,arguments);var c=this.compute=function(){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a};return{compute:c,cssClass:b.cssClass}},jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,a),jsPlumb.Endpoints.Dot=function(a){this.type="Dot",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c){this.radius=c.radius||this.radius;var d=a[0]-this.radius,e=a[1]-this.radius,f=2*this.radius,g=2*this.radius;if(c.strokeStyle){var h=c.lineWidth||1;d-=h,e-=h,f+=2*h,g+=2*h}return[d,e,f,g,this.radius]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint),jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c){var d=c.width||this.width,e=c.height||this.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var d=function(){jsPlumb.DOMElementComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(d,jsPlumb.DOMElementComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),jsPlumb.Endpoints.Image=function(a){this.type="Image",d.apply(this,arguments),jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var b=a.onload,c=a.src||a.url,e=a.parent,f=a.cssClass?" "+a.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=a.width,this._jsPlumb.heightToUse=a.height,this._jsPlumb.endpoint=a.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&&b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,c){var d=a.constructor==String?a:a.src;b=c,this._jsPlumb.img.src=d,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(c,b),this._compute=function(a){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=document.createElement("img"),this.canvas.style.margin=0,this.canvas.style.padding=0,this.canvas.style.outline=0,this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.instance.endpointClass+f,this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas,e),this.attachListeners(this.canvas,this),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,b=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;jsPlumbUtil.sizeElement(this.canvas,a,b,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(a,b){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(a,b):window.setTimeout(function(){this.paint(a,b)}.bind(this),200))}},jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[d,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=!0,jsPlumbUtil.removeElement(this.canvas),this.canvas=null}}),jsPlumb.Endpoints.Blank=function(a){jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",d.apply(this,arguments),this._compute=function(a){return[a[0],a[1],10,0]},this.canvas=document.createElement("div"),this.canvas.style.display="block",this.canvas.style.width="1px",this.canvas.style.height="1px",this.canvas.style.background="transparent",this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.endpointClass,jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,d],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c){var d=c.width||self.width,e=c.height||self.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}};var e=jsPlumb.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation};e.prototype={cleanup:function(){this.component=null,this.canvas=null,this.endpointLoc=null},setVisible:function(a){this.visible=a},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc}},jsPlumb.Overlays.Arrow=function(a){this.type="Arrow",e.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var b=jsPlumbUtil,c=jsPlumbGeom;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var d=(a.direction||1)<0?-1:1,f=a.paintStyle||{lineWidth:1},g=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(a,e){var h,i,j,k,l;if(a.pointAlongPathFrom){if(b.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-d*this.length/2,!1),j=c.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=c.pointOnLine(h,i,this.length),-1==d){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=c.pointOnLine(j,i,this.length),-1==d){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,d*this.length/2),i=a.pointOnPath(this.loc),j=c.pointOnLine(h,i,this.length);k=c.perpendicularLineTo(h,j,this.width),l=c.pointOnLine(h,j,g*this.length);var q={hxy:h,tail:k,cxy:l},r=f.strokeStyle||e.strokeStyle,s=f.fillStyle||e.strokeStyle,t=f.lineWidth||e.lineWidth,u={component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)};return u}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,e),jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow),jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"},jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var f=function(a){return null==a._jsPlumb.cachedDimensions&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},g=function(a){jsPlumb.DOMElementComponent.apply(this,arguments),e.apply(this,arguments);var b=jsPlumb.CurrentLibrary;this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this.getElement=function(){if(null==this._jsPlumb.div){var c=this._jsPlumb.div=b.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));c.style.position="absolute";var d=a._jsPlumb.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:"");c.className=d,this._jsPlumb.instance.appendElement(c,this._jsPlumb.component.parent),this._jsPlumb.instance.getId(c),this.attachListeners(c,this),this.canvas=c}return this._jsPlumb.div},this.draw=function(a,b,c){var d=f(this);if(null!=d&&2==d.length){var e={x:0,y:0};if(c)e={x:c[0],y:c[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),e=a.pointOnPath(g,h)}else{var i=this.loc.constructor==Array?this.loc:this.endpointLoc;e={x:i[0]*a.w,y:i[1]*a.h}}var j=e.x-d[0]/2,k=e.y-d[1]/2;return{component:a,d:{minx:j,miny:k,td:d,cxy:e},minX:j,maxX:j+d[0],minY:k,maxY:k+d[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};jsPlumbUtil.extend(g,[jsPlumb.DOMElementComponent,e],{getDimensions:function(){return jsPlumb.CurrentLibrary.getSize(jsPlumb.CurrentLibrary.getElementObject(this.getElement()))},setVisible:function(a){this._jsPlumb.div.style.display=a?"block":"none"},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){null!=this._jsPlumb.div&&jsPlumb.CurrentLibrary.removeElement(this._jsPlumb.div)},computeMaxSize:function(){var a=f(this);return Math.max(a[0],a[1])},reattachListeners:function(a){this._jsPlumb.div&&this.reattachListenersForElement(this._jsPlumb.div,this,a)},paint:function(a){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this.attachListeners(this._jsPlumb.div,a.component),this._jsPlumb.initialised=!0),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),jsPlumb.Overlays.Custom=function(){this.type="Custom",g.apply(this,arguments)},jsPlumbUtil.extend(jsPlumb.Overlays.Custom,g),jsPlumb.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",e.apply(this,arguments),jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b){var c=b.pointAlongPathFrom(a.loc,a.length/2),d=b.pointOnPath(a.loc),e=jsPlumbGeom.pointOnLine(c,d,a.length),f=jsPlumbGeom.perpendicularLineTo(c,e,40),g=jsPlumbGeom.perpendicularLineTo(e,c,20);return{connector:b,head:c,tail:e,headLine:g,tailLine:f,minX:Math.min(c.x,e.x,g[0].x,g[1].x),minY:Math.min(c.y,e.y,g[0].y,g[1].y),maxX:Math.max(c.x,e.x,g[0].x,g[1].x),maxY:Math.max(c.y,e.y,g[0].y,g[1].y)}}},jsPlumb.Overlays.Label=function(a){this.labelStyle=a.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var b=jsPlumb.extend({create:function(){return document.createElement("div")}},a);if(jsPlumb.Overlays.Custom.call(this,b),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var c=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",c.style.font=this.labelStyle.font,c.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(c.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var d=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";c.style.border=this.labelStyle.borderWidth+"px solid "+d}this.labelStyle.padding&&(c.style.padding=this.labelStyle.padding)}},jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),g.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))}})}(),function(){var a=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var b,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=null==a.midpoint?.5:a.midpoint,e=[],f=(a.grid,a.alwaysRespectStubs),g=null,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=function(a){return 0>a?-1:0===a?0:1},l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,d){for(var e,f,g=0;g<b.length-1;g++){if(e=e||n(b[g]),f=n(b[g+1]),j>0&&e[4]!=f[4]){var h=Math.min(j,m(e),m(f));e[2]-=e[5]*h,e[3]-=e[6]*h,f[0]+=f[5]*h,f[1]+=f[6]*h;var i=e[6]==f[5]&&1==f[5]||e[6]==f[5]&&0===f[5]&&e[5]!=f[6]||e[6]==f[5]&&-1==f[5],k=f[1]>e[3]?1:-1,l=f[0]>e[2]?1:-1,o=k==l,p=o&&i||!o&&!i?f[0]:e[2],q=o&&i||!o&&!i?e[3]:f[1];c.addSegment(a,"Straight",{x1:e[0],y1:e[1],x2:e[2],y2:e[3]}),c.addSegment(a,"Arc",{r:h,x1:e[2],y1:e[3],x2:f[0],y2:f[1],cx:p,cy:q,ac:i})
}else{var r=e[2]==e[0]?0:e[2]>e[0]?d.lw/2:-(d.lw/2),s=e[3]==e[1]?0:e[3]>e[1]?d.lw/2:-(d.lw/2);c.addSegment(a,"Straight",{x1:e[0]-r,y1:e[1]-s,x2:e[2]+r,y2:e[3]+s})}e=f}c.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(a){g=a},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return g||e},this._compute=function(a,j){if(j.clearEdits&&(g=null),null!=g)return o(this,g,a),void 0;e=[],h=null,i=null,b=null;var k=a.startStubX+(a.endStubX-a.startStubX)*d,m=a.startStubY+(a.endStubY-a.startStubY)*d,n={x:[0,1],y:[1,0]},p=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},q={perpendicular:p,orthogonal:p,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1==c.so[d]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1==c.so[d]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!f&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},r={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[k,c.startStubY],[k,c.endStubY]],y:[[c.startStubX,m],[c.endStubX,m]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,m],[c.endStubX,m],[c.endStubX,c.endStubY]],y:[[k,c.startStubY],[k,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},l=n[b][0],o=n[b][1],p=c.so[l]+1,q=c.to[o]+1,r=-1==c.to[o]&&j[b][1]<j[b][0]||1==c.to[o]&&j[b][1]>j[b][0],s=e[b][p][0],t=e[b][p][1],u=d[b][p][q];return c.segment==u[3]||c.segment==u[2]&&r?f[b]:c.segment==u[2]&&s>t?g[b]:c.segment==u[2]&&t>=s||c.segment==u[1]&&!r?i[b]:c.segment==u[0]||c.segment==u[1]&&r?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(b,d,e,f){var g=a,h={x:"y",y:"x"}[b],i={x:"height",y:"width"}[b],l=g["is"+b.toUpperCase()+"GreaterThanStubTimes2"];if(j.sourceEndpoint.elementId==j.targetEndpoint.elementId){var n=e+(1-j.sourceEndpoint.anchor[h])*j.sourceInfo[i]+c.maxStub;return{x:[[d,n],[f,n]],y:[[n,d],[n,f]]}[b]}return!l||1==g.so[t]&&d>f||-1==g.so[t]&&f>d?{x:[[d,m],[f,m]],y:[[k,d],[k,f]]}[b]:1==g.so[t]&&f>d||-1==g.so[t]&&d>f?{x:[[k,g.sy],[k,g.ty]],y:[[g.sx,m],[g.tx,m]]}[b]:void 0}},s=q[a.anchorOrientation](a.sourceAxis),t="x"==a.sourceAxis?0:1,u="x"==a.sourceAxis?1:0,v=s[t],w=s[u],x=s[t+2],y=s[u+2];l(e,s[0],s[1],a);var z=r[a.anchorOrientation](a.sourceAxis,v,w,x,y);if(z)for(var A=0;A<z.length;A++)l(e,z[A][0],z[A][1],a);l(e,s[2],s[3],a),l(e,a.tx,a.ty,a),o(this,e,a)},this.getPath=function(){for(var a=null,b=null,c=[],d=g||e,f=0;f<d.length;f++){var h=d[f],i=h[4],j="v"==i?3:2;null!=a&&b===i?a[j]=h[j]:(h[0]!=h[2]||h[1]!=h[3])&&(c.push({start:[h[0],h[1]],end:[h[2],h[3]]}),a=h,b=h[4])}return c},this.setPath=function(a){g=[];for(var b=0;b<a.length;b++){var c=a[b].start[0],d=a[b].start[1],e=a[b].end[0],f=a[b].end[1],h=c==e?"v":"h",i=k(e-c),j=k(f-d);g.push([c,d,e,f,h,i,j])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Flowchart")}(),function(){var a=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0},c=function(c){c=c||{},this.type="StateMachine";var d=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=c.curviness||10,f=c.margin||5,g=c.proximityLimit||80,h=c.orientation&&"clockwise"===c.orientation,i=c.loopbackRadius||25,j=c.showLoopback!==!1;this._compute=function(c,k){var l=Math.abs(k.sourcePos[0]-k.targetPos[0]),m=Math.abs(k.sourcePos[1]-k.targetPos[1]);if(Math.min(k.sourcePos[0],k.targetPos[0]),Math.min(k.sourcePos[1],k.targetPos[1]),j&&k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var n=k.sourcePos[0],o=(k.sourcePos[0],k.sourcePos[1]-f),p=(k.sourcePos[1]-f,n),q=o-i,r=2*i,s=2*i,t=p-i,u=q-i;c.points[0]=t,c.points[1]=u,c.points[2]=r,c.points[3]=s,d.addSegment(this,"Arc",{loopback:!0,x1:n-t+4,y1:o-u,startAngle:0,endAngle:2*Math.PI,r:i,ac:!h,x2:n-t-4,y2:o-u,cx:p-t,cy:q-u})}else{var v=k.sourcePos[0]<k.targetPos[0]?0:l,w=k.sourcePos[1]<k.targetPos[1]?0:m,x=k.sourcePos[0]<k.targetPos[0]?l:0,y=k.sourcePos[1]<k.targetPos[1]?m:0;0===k.sourcePos[2]&&(v-=f),1===k.sourcePos[2]&&(v+=f),0===k.sourcePos[3]&&(w-=f),1===k.sourcePos[3]&&(w+=f),0===k.targetPos[2]&&(x-=f),1===k.targetPos[2]&&(x+=f),0===k.targetPos[3]&&(y-=f),1===k.targetPos[3]&&(y+=f);var z=(v+x)/2,A=(w+y)/2,B=-1*z/A,C=Math.atan(B),D=(1/0==B||B==-1/0?0:Math.abs(e/2*Math.sin(C)),1/0==B||B==-1/0?0:Math.abs(e/2*Math.cos(C)),a(v,w,x,y)),E=Math.sqrt(Math.pow(x-v,2)+Math.pow(y-w,2)),F=b(z,A,D,k.sourcePos,k.targetPos,e,e,E,g);d.addSegment(this,"Bezier",{x1:x,y1:y,x2:v,y2:w,cp1x:F[0],cp1y:F[1],cp2x:F[0],cp2y:F[1]})}}};jsPlumb.registerConnectorType(c,"StateMachine")}(),function(){var a=function(a){a=a||{};var b=this,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=(a.stub||50,a.curviness||150),e=10;this.type="Bezier",this.getCurviness=function(){return d},this._findControlPoint=function(a,b,c,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(c[0]<b[0]?a[0]+e:a[0]-e):k.push(a[0]+d*i[0]),0===i[1]?k.push(c[1]<b[1]?a[1]+e:a[1]-e):k.push(a[1]+d*h[1])):(0===h[0]?k.push(b[0]<c[0]?a[0]+e:a[0]-e):k.push(a[0]-d*h[0]),0===h[1]?k.push(b[1]<c[1]?a[1]+e:a[1]-e):k.push(a[1]+d*i[1])),k},this._compute=function(a,d){var e=d.sourcePos,f=d.targetPos,g=Math.abs(e[0]-f[0]),h=Math.abs(e[1]-f[1]),i=e[0]<f[0]?g:0,j=e[1]<f[1]?h:0,k=e[0]<f[0]?0:g,l=e[1]<f[1]?0:h,m=b._findControlPoint([i,j],e,f,d.sourceEndpoint,d.targetEndpoint),n=b._findControlPoint([k,l],f,e,d.targetEndpoint,d.sourceEndpoint);c.addSegment(this,"Bezier",{x1:i,y1:j,x2:k,y2:l,cp1x:m[0],cp1y:m[1],cp2x:n[0],cp2y:n[1]})}};jsPlumb.registerConnectorType(a,"Bezier")}(),function(){var a=null,b=function(a,b){return jsPlumb.CurrentLibrary.hasClass(c(a),b)},c=function(a){return jsPlumb.CurrentLibrary.getElementObject(a)},d=function(a){return jsPlumb.CurrentLibrary.getOffset(c(a))},e=function(a){return jsPlumb.CurrentLibrary.getPageXY(a)},f=function(a){return jsPlumb.CurrentLibrary.getClientXY(a)},g=window.CanvasMouseAdapter=function(){var g=this;this.overlayPlacements=[],jsPlumb.jsPlumbUIComponent.apply(this,arguments),jsPlumbUtil.EventGenerator.apply(this,arguments),this._over=function(a){var b=d(c(g.canvas)),f=e(a),h=f[0]-b.left,i=f[1]-b.top;if(h>0&&i>0&&h<g.canvas.width&&i<g.canvas.height){for(var j=0;j<g.overlayPlacements.length;j++){var k=g.overlayPlacements[j];if(k&&k[0]<=h&&k[1]>=h&&k[2]<=i&&k[3]>=i)return!0}var l=g.canvas.getContext("2d").getImageData(parseInt(h,10),parseInt(i,10),1,1);return 0!==l.data[0]||0!==l.data[1]||0!==l.data[2]||0!==l.data[3]}return!1};var h=!1,i=!1,j=null,k=!1,l=function(a,c){return null!==a&&b(a,c)};this.mousemove=function(b){var c=(e(b),f(b)),d=document.elementFromPoint(c[0],c[1]),i=l(d,"_jsPlumb_overlay"),j=null===a&&(l(d,"_jsPlumb_endpoint")||l(d,"_jsPlumb_connector"));return!h&&j&&g._over(b)?(h=!0,g.fire("mouseenter",g,b),!0):(!h||g._over(b)&&j||i||(h=!1,g.fire("mouseexit",g,b)),g.fire("mousemove",g,b),void 0)},this.click=function(a){h&&g._over(a)&&!k&&g.fire("click",g,a),k=!1},this.dblclick=function(a){h&&g._over(a)&&!k&&g.fire("dblclick",g,a),k=!1},this.mousedown=function(a){g._over(a)&&!i&&(i=!0,j=d(c(g.canvas)),g.fire("mousedown",g,a))},this.mouseup=function(a){i=!1,g.fire("mouseup",g,a)},this.contextmenu=function(a){h&&g._over(a)&&!k&&g.fire("contextmenu",g,a),k=!1}};jsPlumbUtil.extend(g,[jsPlumb.jsPlumbUIComponent,jsPlumbUtil.EventGenerator]);var h=function(a){var b=document.createElement("canvas");return a._jsPlumb.instance.appendElement(b,a.parent),b.style.position="absolute",a["class"]&&(b.className=a["class"]),a._jsPlumb.instance.getId(b,a.uuid),a.tooltip&&b.setAttribute("title",a.tooltip),b},i=window.CanvasComponent=function(){g.apply(this,arguments);var a=[];this.getDisplayElements=function(){return a},this.appendDisplayElement=function(b){a.push(b)}};jsPlumbUtil.extend(i,g,{setVisible:function(a){this.canvas.style.display=a?"block":"none"}});var j=[null,[1,-1],[1,1],[-1,1],[-1,-1]],k=function(a,b,c){if(b.gradient){for(var d=c(),e=0;e<b.gradient.stops.length;e++)d.addColorStop(b.gradient.stops[e][0],b.gradient.stops[e][1]);a.strokeStyle=d}},l=function(a,b,c,d,e){({Straight:function(a,b,c,d,e){var f=a.params;if(b.save(),k(b,c,function(){return b.createLinearGradient(f.x1,f.y1,f.x2,f.y2)}),b.beginPath(),b.translate(d,e),c.dashstyle&&2===c.dashstyle.split(" ").length){var g=c.dashstyle.split(" ");2!==g.length&&(g=[2,2]);for(var h=[g[0]*c.lineWidth,g[1]*c.lineWidth],i=(f.x2-f.x1)/(f.y2-f.y1),l=jsPlumbUtil.segment([f.x1,f.y1],[f.x2,f.y2]),m=j[l],n=Math.atan(i),o=Math.sqrt(Math.pow(f.x2-f.x1,2)+Math.pow(f.y2-f.y1,2)),p=Math.floor(o/(h[0]+h[1])),q=[f.x1,f.y1],r=0;p>r;r++){b.moveTo(q[0],q[1]);var s=q[0]+Math.abs(Math.sin(n)*h[0])*m[0],t=q[1]+Math.abs(Math.cos(n)*h[0])*m[1],u=q[0]+Math.abs(Math.sin(n)*(h[0]+h[1]))*m[0],v=q[1]+Math.abs(Math.cos(n)*(h[0]+h[1]))*m[1];b.lineTo(s,t),q=[u,v]}b.moveTo(q[0],q[1]),b.lineTo(f.x2,f.y2)}else b.moveTo(f.x1,f.y1),b.lineTo(f.x2,f.y2);b.stroke(),b.restore()},Bezier:function(a,b,c,d,e){var f=a.params;b.save(),k(b,c,function(){return b.createLinearGradient(f.x2+d,f.y2+e,f.x1+d,f.y1+e)}),b.beginPath(),b.translate(d,e),b.moveTo(f.x1,f.y1),b.bezierCurveTo(f.cp1x,f.cp1y,f.cp2x,f.cp2y,f.x2,f.y2),b.stroke(),b.restore()},Arc:function(a,b,c,d,e){var f=a.params;b.save(),b.beginPath(),b.translate(d,e),b.arc(f.cx,f.cy,f.r,a.startAngle,a.endAngle,f.ac),b.stroke(),b.restore()}})[a.type](a,b,c,d,e)},m=jsPlumb.ConnectorRenderers.canvas=function(a){i.apply(this,arguments);var b=function(a,b,c){this.ctx.save(),jsPlumb.extend(this.ctx,a);for(var d=this.getSegments(),e=0;e<d.length;e++)l(d[e],this.ctx,a,b,c);this.ctx.restore()}.bind(this),c=this._jsPlumb.instance.connectorClass+" "+(a.cssClass||"");this.canvas=h({"class":c,_jsPlumb:this._jsPlumb,parent:a.parent}),this.ctx=this.canvas.getContext("2d"),this.appendDisplayElement(this.canvas),this.paint=function(a,c,d){if(null!=a){var e=[this.x,this.y],f=[this.w,this.h],g=0,h=0;if(null!=d&&(d.xmin<0&&(e[0]+=d.xmin,g=-d.xmin),d.ymin<0&&(e[1]+=d.ymin,h=-d.ymin),f[0]=d.xmax+(d.xmin<0?-d.xmin:0),f[1]=d.ymax+(d.ymin<0?-d.ymin:0)),this.translateX=g,this.translateY=h,jsPlumbUtil.sizeElement(this.canvas,e[0],e[1],f[0],f[1]),null!=a.outlineColor){var i=a.outlineWidth||1,j=a.lineWidth+2*i,k={strokeStyle:a.outlineColor,lineWidth:j};b(k,g,h)}b(a,g,h)}}};jsPlumbUtil.extend(m,i);var n=function(a){i.apply(this,arguments);var b=this._jsPlumb.instance.endpointClass+" "+(a.cssClass||""),c={"class":b,_jsPlumb:this._jsPlumb,parent:a.parent,tooltip:self.tooltip};this.canvas=h(c),this.ctx=this.canvas.getContext("2d"),this.appendDisplayElement(this.canvas),this.paint=function(a){if(jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null!=a.outlineColor){var b=a.outlineWidth||1,c=a.lineWidth+2*b;({strokeStyle:a.outlineColor,lineWidth:c})}this._paint.apply(this,arguments)}};jsPlumbUtil.extend(n,i),jsPlumb.Endpoints.canvas.Dot=function(a){jsPlumb.Endpoints.Dot.apply(this,arguments),n.apply(this,arguments);var b=this,c=function(a){try{return parseInt(a,10)}catch(b){if("%"==a.substring(a.length-1))return parseInt(a.substring(0,a-1),10)}},d=function(a){var d=b.defaultOffset,e=b.defaultInnerRadius;return a.offset&&(d=c(a.offset)),a.innerRadius&&(e=c(a.innerRadius)),[d,e]};this._paint=function(c){if(null!=c){var e=b.canvas.getContext("2d"),f=a.endpoint.anchor.getOrientation(a.endpoint);if(jsPlumb.extend(e,c),c.gradient){for(var g=d(c.gradient),h=1==f[1]?-1*g[0]:g[0],i=1==f[0]?-1*g[0]:g[0],j=e.createRadialGradient(b.radius,b.radius,b.radius,b.radius+i,b.radius+h,g[1]),k=0;k<c.gradient.stops.length;k++)j.addColorStop(c.gradient.stops[k][0],c.gradient.stops[k][1]);e.fillStyle=j}e.beginPath(),e.arc(b.radius,b.radius,b.radius,0,2*Math.PI,!0),e.closePath(),(c.fillStyle||c.gradient)&&e.fill(),c.strokeStyle&&e.stroke()}}},jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Dot,[jsPlumb.Endpoints.Dot,n]),jsPlumb.Endpoints.canvas.Rectangle=function(a){var b=this;jsPlumb.Endpoints.Rectangle.apply(this,arguments),n.apply(this,arguments),this._paint=function(c){var d=b.canvas.getContext("2d"),e=a.endpoint.anchor.getOrientation(a.endpoint);if(jsPlumb.extend(d,c),c.gradient){for(var f=1==e[1]?b.h:0===e[1]?b.h/2:0,g=-1==e[1]?b.h:0===e[1]?b.h/2:0,h=1==e[0]?b.w:0===e[0]?b.w/2:0,i=-1==e[0]?b.w:0===e[0]?b.w/2:0,j=d.createLinearGradient(h,f,i,g),k=0;k<c.gradient.stops.length;k++)j.addColorStop(c.gradient.stops[k][0],c.gradient.stops[k][1]);d.fillStyle=j}d.beginPath(),d.rect(0,0,b.w,b.h),d.closePath(),(c.fillStyle||c.gradient)&&d.fill(),c.strokeStyle&&d.stroke()}},jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Rectangle,[jsPlumb.Endpoints.Rectangle,n]),jsPlumb.Endpoints.canvas.Triangle=function(a){var b=this;jsPlumb.Endpoints.Triangle.apply(this,arguments),n.apply(this,arguments),this._paint=function(c){var d=b.canvas.getContext("2d"),e=0,f=0,g=0,h=a.endpoint.anchor.getOrientation(a.endpoint);1==h[0]&&(e=b.width,f=b.height,g=180),-1==h[1]&&(e=b.width,g=90),1==h[1]&&(f=b.height,g=-90),d.fillStyle=c.fillStyle,d.translate(e,f),d.rotate(g*Math.PI/180),d.beginPath(),d.moveTo(0,0),d.lineTo(b.width/2,b.height/2),d.lineTo(0,b.height),d.closePath(),(c.fillStyle||c.gradient)&&d.fill(),c.strokeStyle&&d.stroke()}},jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Triangle,[jsPlumb.Endpoints.Triangle,n]),jsPlumb.Endpoints.canvas.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.canvas.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.canvas.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.canvas.Custom=jsPlumb.Overlays.Custom;var o=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments)};jsPlumbUtil.extend(o,jsPlumb.jsPlumbUIComponent,{setVisible:function(a){this.visible=a,this.component.repaint()}});var p=function(a,b){a.apply(this,b),o.apply(this,b),this.paint=function(a){var b=a.component.ctx,c=a.d;c&&(b.save(),b.lineWidth=a.lineWidth,b.beginPath(),b.translate(a.component.translateX,a.component.translateY),b.moveTo(c.hxy.x,c.hxy.y),b.lineTo(c.tail[0].x,c.tail[0].y),b.lineTo(c.cxy.x,c.cxy.y),b.lineTo(c.tail[1].x,c.tail[1].y),b.lineTo(c.hxy.x,c.hxy.y),b.closePath(),a.strokeStyle&&(b.strokeStyle=a.strokeStyle,b.stroke()),a.fillStyle&&(b.fillStyle=a.fillStyle,b.fill()),b.restore())}};jsPlumb.Overlays.canvas.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.canvas.Arrow,[jsPlumb.Overlays.Arrow,o]),jsPlumb.Overlays.canvas.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.canvas.PlainArrow,[jsPlumb.Overlays.PlainArrow,o]),jsPlumb.Overlays.canvas.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.canvas.Diamond,[jsPlumb.Overlays.Diamond,o])}(),function(){var a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="fill",g="stop",h="stroke",i="stroke-width",j="style",k="none",l="jsplumb_gradient_",m="lineWidth",n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},o=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},p=function(a,b){var c=document.createElementNS(n.svg,a);return b=b||{},b.version="1.1",b.xmlns=n.xhtml,o(c,b),c},q=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},r=function(a){for(var b=0;b<a.childNodes.length;b++)(a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&&a.removeChild(a.childNodes[b])},s=function(a,b,c,i,k){var m=l+k._jsPlumb.instance.idstamp();r(a);var n;n=c.gradient.offset?p(e,{id:m}):p(d,{id:m,gradientUnits:"userSpaceOnUse"}),a.appendChild(n);for(var o=0;o<c.gradient.stops.length;o++){var q=1==k.segment||2==k.segment?o:c.gradient.stops.length-1-o,s=jsPlumbUtil.convertStyle(c.gradient.stops[q][1],!0),t=p(g,{offset:Math.floor(100*c.gradient.stops[o][0])+"%","stop-color":s});n.appendChild(t)}var u=c.strokeStyle?h:f;b.setAttribute(j,u+":url("+document.location.toString()+"#"+m+")")},t=function(d,e,g,l,n){if(g.gradient?s(d,e,g,l,n):(r(d),e.setAttribute(j,"")),e.setAttribute(f,g.fillStyle?jsPlumbUtil.convertStyle(g.fillStyle,!0):k),e.setAttribute(h,g.strokeStyle?jsPlumbUtil.convertStyle(g.strokeStyle,!0):k),g.lineWidth&&e.setAttribute(i,g.lineWidth),g[c]&&g[m]&&!g[b]){var o=-1==g[c].indexOf(",")?" ":",",p=g[c].split(o),q="";p.forEach(function(a){q+=Math.floor(a*g.lineWidth)+o}),e.setAttribute(b,q)}else g[b]&&e.setAttribute(b,g[b]);for(var t in a)g[t]&&e.setAttribute(a[t],g[t])},u=function(a,b,c){for(var d=c.split(" "),e=a.className,f=e.baseVal.split(" "),g=0;g<d.length;g++)if(b)-1==f.indexOf(d[g])&&f.push(d[g]);else{var h=f.indexOf(d[g]);-1!=h&&f.splice(h,1)}a.className.baseVal=f.join(" ")},v=function(a,b){u(a,!0,b)},w=function(a,b){u(a,!1,b)},x=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};jsPlumbUtil.svg={addClass:v,removeClass:w,node:p,attr:o,pos:q};var y=function(a){var b=a.pointerEventsSpec||"all",c={};jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null;var d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":b,position:"absolute"};this.svg=p("svg",e),a.useDivWrapper?(this.canvas=document.createElement("div"),this.canvas.style.position="absolute",jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=d):(o(this.svg,{"class":d}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var f=[this.canvas];return this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(b,d,e){if(null!=b){var f,g=[this.x,this.y],h=[this.w,this.h];null!=e&&(e.xmin<0&&(g[0]+=e.xmin),e.ymin<0&&(g[1]+=e.ymin),h[0]=e.xmax+(e.xmin<0?-e.xmin:0),h[1]=e.ymax+(e.ymin<0?-e.ymin:0)),a.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,g[0],g[1],h[0],h[1]),g[0]=0,g[1]=0,f=q([0,0])):f=q([g[0],g[1]]),c.paint.apply(this,arguments),o(this.svg,{style:f,width:h[0],height:h[1]})}},{renderer:c}};jsPlumbUtil.extend(y,jsPlumb.jsPlumbUIComponent,{cleanup:function(){jsPlumbUtil.removeElement(this.canvas),this.svg=null,this.canvas=null,this.path=null},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}}),jsPlumb.ConnectorRenderers.svg=function(a){var b=this,c=y.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(c,d,e){var f=b.getSegments(),g="",h=[0,0];e.xmin<0&&(h[0]=-e.xmin),e.ymin<0&&(h[1]=-e.ymin);for(var i=0;i<f.length;i++)g+=jsPlumb.Segments.svg.SegmentRenderer.getPath(f[i]),g+=" ";var j={d:g,transform:"translate("+h[0]+","+h[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},k=null,l=[b.x,b.y,b.w,b.h];if(c.outlineColor){var m=c.outlineWidth||1,n=c.lineWidth+2*m;k=jsPlumb.CurrentLibrary.extend({},c),k.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),k.lineWidth=n,null==b.bgPath?(b.bgPath=p("path",j),x(b.svg,b.bgPath,0),b.attachListeners(b.bgPath,b)):o(b.bgPath,j),t(b.svg,b.bgPath,k,l,b)}null==b.path?(b.path=p("path",j),x(b.svg,b.path,c.outlineColor?1:0),b.attachListeners(b.path,b)):o(b.path,j),t(b.svg,b.path,c,l,b)},this.reattachListeners=function(){this.bgPath&&this.reattachListenersForElement(this.bgPath,this),this.path&&this.reattachListenersForElement(this.path,this)}},jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,y),jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var z=window.SvgEndpoint=function(a){var b=y.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);b.renderer.paint=function(a){var b=jsPlumb.extend({},a);b.outlineColor&&(b.strokeWidth=b.outlineWidth,b.strokeStyle=jsPlumbUtil.convertStyle(b.outlineColor,!0)),null==this.node?(this.node=this.makeNode(b),this.svg.appendChild(this.node),this.attachListeners(this.node,this)):null!=this.updateNode&&this.updateNode(this.node),t(this.svg,this.node,b,[this.x,this.y,this.w,this.h],this),q(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(z,y,{reattachListeners:function(){this.node&&this.reattachListenersForElement(this.node,this)}}),jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),z.apply(this,arguments),this.makeNode=function(){return p("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){o(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,z]),jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),z.apply(this,arguments),this.makeNode=function(){return p("rect",{width:this.w,height:this.h})},this.updateNode=function(a){o(a,{width:this.w,height:this.h})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,z]),jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var A=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(a,d){if(a.component.svg&&d){null==this.path&&(this.path=p("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.attachListeners(this.path,a.component),this.attachListeners(this.path,this));var e=b&&1==b.length?b[0].cssClass||"":"",f=[0,0];d.xmin<0&&(f[0]=-d.xmin),d.ymin<0&&(f[1]=-d.ymin),o(this.path,{d:c(a.d),"class":e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var c=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.reattachListeners=function(){this.path&&this.reattachListenersForElement(this.path,this)}};jsPlumbUtil.extend(A,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){null!=this.path&&jsPlumb.CurrentLibrary.removeElement(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),jsPlumb.Overlays.svg.Arrow=function(){A.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,A]),jsPlumb.Overlays.svg.PlainArrow=function(){A.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,A]),jsPlumb.Overlays.svg.Diamond=function(){A.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,A]),jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g){null==c&&(c=p("path"),f.connector.svg.appendChild(c),d.attachListeners(c,f.connector),d.attachListeners(c,d),a=p("path"),f.connector.svg.appendChild(a),d.attachListeners(a,f.connector),d.attachListeners(a,d),b=p("path"),f.connector.svg.appendChild(b),d.attachListeners(b,f.connector),d.attachListeners(b,d));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),o(c,{d:e(f.head,f.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),o(a,{d:e(f.tailLine[0],f.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),o(b,{d:e(f.headLine[0],f.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var e=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)}(),function(){var a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){var c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;";b=document.createStyleSheet();for(var e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement("jsplumb:"+a);return f?e.appendElement(h,d):jsPlumb.CurrentLibrary.appendElement(h,d),h.className=(c["class"]?c["class"]+" ":"")+"jsplumb_vml",i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked="true";var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"}else e.stroked="false";if(b.fillStyle){e.filled="true";var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,"fill",c)}else e.filled="false";if(b.dashstyle)null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(var j=-1==b["stroke-dasharray"].indexOf(",")?" ":",",l=b["stroke-dasharray"].split(j),m="",n=0;n<l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance),a.opacityNodes.fill=h("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}};jsPlumbUtil.extend(m,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&jsPlumbUtil.removeElement(this.bgCanvas),jsPlumbUtil.removeElement(this.canvas)}});var n=jsPlumb.ConnectorRenderers.vml=function(b){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var c=this._jsPlumb.instance.connectorClass+(b.cssClass?" "+b.cssClass:"");this.paint=function(d){if(null!==d){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var e=this.getSegments(),j={path:""},k=[this.x,this.y,this.w,this.h],m=0;m<e.length;m++)j.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(e[m]),j.path+=" ";if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n,p={strokeStyle:jsPlumbUtil.convertStyle(d.outlineColor),lineWidth:o};for(var q in a)p[q]=d[q];null==this.bgCanvas?(j["class"]=c,j.coordsize=k[2]*f+","+k[3]*f,this.bgCanvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),i(this.bgCanvas,k),this.appendDisplayElement(this.bgCanvas,!0),this.attachListeners(this.bgCanvas,this),this.initOpacityNodes(this.bgCanvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.bgCanvas,k),g(this.bgCanvas,j)),l(this.bgCanvas,p,this)}null==this.canvas?(j["class"]=c,j.coordsize=k[2]*f+","+k[3]*f,this.canvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.attachListeners(this.canvas,this),this.initOpacityNodes(this.canvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.canvas,k),g(this.canvas,j)),l(this.canvas,d,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(n,m,{reattachListeners:function(){this.canvas&&this.reattachListenersForElement(this.canvas,this)},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}});var o=window.VmlEndpoint=function(a){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(a.cssClass?" "+a.cssClass:""),a._jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(a,b){var c={},d=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(c["class"]=this._jsPlumb.clazz,d=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],c,b,this.canvas,this._jsPlumb.instance),this.attachListeners(d,this),this.appendDisplayElement(d,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(d,["fill"])):(i(d,[0,0,this.w,this.h]),g(d,c)),l(d,a,this)}};jsPlumbUtil.extend(o,m,{reattachListeners:function(){this._jsPlumb.vml&&this.reattachListenersForElement(this._jsPlumb.vml,this)}}),jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(a){return{Straight:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" l"+j(b.x2)+","+j(b.y2)+" e"},Bezier:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" c"+j(b.cp1x)+","+j(b.cp1y)+","+j(b.cp2x)+","+j(b.cp2y)+","+j(b.x2)+","+j(b.y2)+" e"},Arc:function(a){var b=a.params,c=Math.min(b.x1,b.x2),d=(Math.max(b.x1,b.x2),Math.min(b.y1,b.y2)),e=(Math.max(b.y1,b.y2),a.anticlockwise?1:0),f=a.anticlockwise?"at ":"wa ",g=function(){if(b.loopback)return"0,0,"+j(2*b.r)+","+j(2*b.r);var f=[null,[function(){return[c,d]},function(){return[c-b.r,d-b.r]}],[function(){return[c-b.r,d]},function(){return[c,d-b.r]}],[function(){return[c-b.r,d-b.r]},function(){return[c,d]}],[function(){return[c,d-b.r]},function(){return[c-b.r,d]}]][a.segment][e]();return j(f[0])+","+j(f[1])+","+j(f[0]+2*b.r)+","+j(f[1]+2*b.r)};return f+" "+g()+","+j(b.x1)+","+j(b.y1)+","+j(b.x2)+","+j(b.y2)+" e"}}[a.type](a)}}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("oval",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o),jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("rect",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o),jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;
var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;c.canvas=null,c.isAppendedAtTopLevel=!0;var d=function(a){return"m "+j(a.hxy.x)+","+j(a.hxy.y)+" l "+j(a.tail[0].x)+","+j(a.tail[0].y)+" "+j(a.cxy.x)+","+j(a.cxy.y)+" "+j(a.tail[1].x)+","+j(a.tail[1].y)+" x e"};this.paint=function(a,e){if(a.component.canvas&&e){var j={},k=a.d,l=a.component;a.strokeStyle&&(j.stroked="true",j.strokecolor=jsPlumbUtil.convertStyle(a.strokeStyle,!0)),a.lineWidth&&(j.strokeweight=a.lineWidth+"px"),a.fillStyle&&(j.filled="true",j.fillcolor=a.fillStyle);var m=Math.min(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),n=Math.min(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),o=Math.max(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),p=Math.max(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),q=Math.abs(o-m),r=Math.abs(p-n),s=[m,n,q,r];if(j.path=d(k),j.coordsize=l.w*f+","+l.h*f,s[0]=l.x,s[1]=l.y,s[2]=l.w,s[3]=l.h,null==c.canvas){var t=l._jsPlumb.overlayClass||"",u=b&&1==b.length?b[0].cssClass||"":"";j["class"]=u+" "+t,c.canvas=h("shape",s,j,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,l),c.attachListeners(c.canvas,c)}else i(c.canvas,s),g(c.canvas,j)}},this.reattachListeners=function(){c.canvas&&c.reattachListenersForElement(c.canvas,c)},this.cleanup=function(){null!=c.canvas&&jsPlumb.CurrentLibrary.removeElement(c.canvas)}};jsPlumbUtil.extend(p,[m,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(a){this.canvas.style.display=a?"block":"none"}}),jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,p]),jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,p]),jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,p])}(),function(a){var b=function(b){return"string"==typeof b?a("#"+b):a(b)};jsPlumb.CurrentLibrary={addClass:function(a,c){a=b(a);try{a[0].className.constructor==SVGAnimatedString&&jsPlumbUtil.svg.addClass(a[0],c)}catch(d){}try{a.addClass(c)}catch(d){}},animate:function(a,b,c){a.animate(b,c)},appendElement:function(a,c){b(c).append(a)},ajax:function(b){b=b||{},b.type=b.type||"get",a.ajax(b)},bind:function(a,c,d){a=b(a),a.bind(c,d)},destroyDraggable:function(b){a(b).data("draggable")&&a(b).draggable("destroy")},destroyDroppable:function(b){a(b).data("droppable")&&a(b).droppable("destroy")},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},extend:function(b,c){return a.extend(b,c)},getClientXY:function(a){return[a.clientX,a.clientY]},getDragObject:function(a){return a[1].draggable||a[1].helper},getDragScope:function(b){return a(b).draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(b){return a(b).droppable("option","scope")},getDOMElement:function(a){return null==a?null:"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:b,getOffset:function(a){return a.offset()},getOriginalEvent:function(a){return a.originalEvent},getPageXY:function(a){return[a.pageX,a.pageY]},getParent:function(a){return b(a).parent()},getScrollLeft:function(a){return a.scrollLeft()},getScrollTop:function(a){return a.scrollTop()},getSelector:function(c,d){return 2==arguments.length?b(c).find(d):a(c)},getSize:function(b){return b=a(b),[b.outerWidth(),b.outerHeight()]},getTagName:function(a){var c=b(a);return c.length>0?c[0].tagName:null},getUIPosition:function(a,b){if(b=b||1,1==a.length)ret={left:a[0].pageX,top:a[0].pageY};else{var c=a[1],d=c.offset;ret=d||c.absolutePosition,c.position.left/=b,c.position.top/=b}return{left:ret.left/b,top:ret.top/b}},hasClass:function(a,b){return a.hasClass(b)},initDraggable:function(b,c,d,e){c=c||{},b=a(b),c.start=jsPlumbUtil.wrap(c.start,function(){a("body").addClass(e.dragSelectClass)},!1),c.stop=jsPlumbUtil.wrap(c.stop,function(){a("body").removeClass(e.dragSelectClass)}),c.doNotRemoveHelper||(c.helper=null),d&&(c.scope=c.scope||jsPlumb.Defaults.Scope),b.draggable(c)},initDroppable:function(b,c){c.scope=c.scope||jsPlumb.Defaults.Scope,a(b).droppable(c)},isAlreadyDraggable:function(b){return a(b).hasClass("ui-draggable")},isDragSupported:function(b){return a(b).draggable},isDropSupported:function(b){return a(b).droppable},removeClass:function(a,c){a=b(a);try{if(a[0].className.constructor==SVGAnimatedString)return jsPlumbUtil.svg.removeClass(a[0],c),void 0}catch(d){}a.removeClass(c)},removeElement:function(a){b(a).remove()},setDragFilter:function(a,b){jsPlumb.CurrentLibrary.isAlreadyDraggable(a)&&a.draggable("option","cancel",b)},setDraggable:function(a,b){a.draggable("option","disabled",!b)},setDragScope:function(a,b){a.draggable("option","scope",b)},setOffset:function(a,c){b(a).offset(c)},trigger:function(a,c,d){var e=jQuery._data(b(a)[0],"handle");e(d)},unbind:function(a,c,d){a=b(a),a.unbind(c,d)}},a(document).ready(jsPlumb.init)}(jQuery);
!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=134)}([function(t){t.exports=JSON.parse('{"INIT":"Init","TERM":"Term Centric","INSTANCE":"Instance / Relation","RELATION":"Relation Edit","VIEW_TERM":"View Term","VIEW_INSTANCE":"View Instance"}')},function(t,e,i){var n=i(89);function r(t,e,i,n,r){var o=s.apply(this,arguments);return t.addEventListener(i,o,r),{destroy:function(){t.removeEventListener(i,o,r)}}}function s(t,e,i,r){return function(i){i.delegateTarget=n(i.target,e),i.delegateTarget&&r.call(t,i)}}t.exports=function(t,e,i,n,s){return"function"==typeof t.addEventListener?r.apply(null,arguments):"function"==typeof i?r.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return r(t,e,i,n,s)})))}},function(t,e,i){var n,r,s;
/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */r="undefined"!=typeof window?window:this,s=function(i,r){var s=[],o=i.document,a=s.slice,l=s.concat,c=s.push,u=s.indexOf,h={},d=h.toString,p=h.hasOwnProperty,f={},m=function(t,e){return new m.fn.init(t,e)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,_=/-([\da-z])/gi,y=function(t,e){return e.toUpperCase()};function b(t){var e=!!t&&"length"in t&&t.length,i=m.type(t);return"function"!==i&&!m.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}m.fn=m.prototype={jquery:"2.2.4",constructor:m,selector:"",length:0,toArray:function(){return a.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:a.call(this)},pushStack:function(t){var e=m.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return m.each(this,t)},map:function(t){return this.pushStack(m.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},m.extend=m.fn.extend=function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||m.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],o!==(n=t[e])&&(c&&n&&(m.isPlainObject(n)||(r=m.isArray(n)))?(r?(r=!1,s=i&&m.isArray(i)?i:[]):s=i&&m.isPlainObject(i)?i:{},o[e]=m.extend(c,s,n)):void 0!==n&&(o[e]=n));return o},m.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===m.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!m.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==m.type(t)||t.nodeType||m.isWindow(t))return!1;if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||p.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=m.trim(t))&&(1===t.indexOf("use strict")?((e=o.createElement("script")).text=t,o.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(v,"ms-").replace(_,y)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,n=0;if(b(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(g,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(b(Object(t))?m.merge(i,"string"==typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:u.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,s=t.length,o=!i;r<s;r++)!e(t[r],r)!==o&&n.push(t[r]);return n},map:function(t,e,i){var n,r,s=0,o=[];if(b(t))for(n=t.length;s<n;s++)null!=(r=e(t[s],s,i))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,i))&&o.push(r);return l.apply([],o)},guid:1,proxy:function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),m.isFunction(t))return n=a.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||m.guid++,r},now:Date.now,support:f}),"function"==typeof Symbol&&(m.fn[Symbol.iterator]=s[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var x=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){var e,i,n,r,s,o,a,l,c,u,h,d,p,f,m,g,v,_,y,b="sizzle"+1*new Date,x=t.document,w=0,E=0,k=rt(),S=rt(),P=rt(),C=function(t,e){return t===e&&(h=!0),0},D={}.hasOwnProperty,T=[],A=T.pop,O=T.push,N=T.push,j=T.slice,I=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",H="\\["+L+"*("+R+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+L+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",$=new RegExp(L+"+","g"),z=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),B=new RegExp("^"+L+"*,"+L+"*"),W=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),q=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(F),U=new RegExp("^"+R+"$"),K={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),et=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},it=function(){d()};try{N.apply(T=j.call(x.childNodes),x.childNodes),T[x.childNodes.length].nodeType}catch(t){N={apply:T.length?function(t,e){O.apply(t,j.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function nt(t,e,n,r){var s,a,c,u,h,f,v,_,w=e&&e.ownerDocument,E=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==E&&9!==E&&11!==E)return n;if(!r&&((e?e.ownerDocument||e:x)!==p&&d(e),e=e||p,m)){if(11!==E&&(f=X.exec(t)))if(s=f[1]){if(9===E){if(!(c=e.getElementById(s)))return n;if(c.id===s)return n.push(c),n}else if(w&&(c=w.getElementById(s))&&y(e,c)&&c.id===s)return n.push(c),n}else{if(f[2])return N.apply(n,e.getElementsByTagName(t)),n;if((s=f[3])&&i.getElementsByClassName&&e.getElementsByClassName)return N.apply(n,e.getElementsByClassName(s)),n}if(i.qsa&&!P[t+" "]&&(!g||!g.test(t))){if(1!==E)w=e,_=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(Z,"\\$&"):e.setAttribute("id",u=b),a=(v=o(t)).length,h=U.test(u)?"#"+u:"[id='"+u+"']";a--;)v[a]=h+" "+ft(v[a]);_=v.join(","),w=Y.test(t)&&dt(e.parentNode)||e}if(_)try{return N.apply(n,w.querySelectorAll(_)),n}catch(t){}finally{u===b&&e.removeAttribute("id")}}}return l(t.replace(z,"$1"),e,n,r)}function rt(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function st(t){return t[b]=!0,t}function ot(t){var e=p.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function at(t,e){for(var i=t.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=e}function lt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ct(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ut(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ht(t){return st((function(e){return e=+e,st((function(i,n){for(var r,s=t([],i.length,e),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))}))}))}function dt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=nt.support={},s=nt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=nt.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:x;return o!==p&&9===o.nodeType&&o.documentElement?(f=(p=o).documentElement,m=!s(p),(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),i.attributes=ot((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ot((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=G.test(p.getElementsByClassName),i.getById=ot((function(t){return f.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),i.getById?(n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i=e.getElementById(t);return i?[i]:[]}},n.filter.ID=function(t){var e=t.replace(tt,et);return function(t){return t.getAttribute("id")===e}}):(delete n.find.ID,n.filter.ID=function(t){var e=t.replace(tt,et);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(i.qsa=G.test(p.querySelectorAll))&&(ot((function(t){f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+L+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+L+"*(?:value|"+M+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")})),ot((function(t){var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+L+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=G.test(_=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ot((function(t){i.disconnectedMatch=_.call(t,"div"),_.call(t,"[s!='']:x"),v.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=G.test(f.compareDocumentPosition),y=e||G.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===p||t.ownerDocument===x&&y(x,t)?-1:e===p||e.ownerDocument===x&&y(x,e)?1:u?I(u,t)-I(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(!r||!s)return t===p?-1:e===p?1:r?-1:s?1:u?I(u,t)-I(u,e):0;if(r===s)return lt(t,e);for(i=t;i=i.parentNode;)o.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?lt(o[n],a[n]):o[n]===x?-1:a[n]===x?1:0},p):p},nt.matches=function(t,e){return nt(t,null,null,e)},nt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&d(t),e=e.replace(q,"='$1']"),i.matchesSelector&&m&&!P[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var n=_.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return nt(e,p,null,[t]).length>0},nt.contains=function(t,e){return(t.ownerDocument||t)!==p&&d(t),y(t,e)},nt.attr=function(t,e){(t.ownerDocument||t)!==p&&d(t);var r=n.attrHandle[e.toLowerCase()],s=r&&D.call(n.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==s?s:i.attributes||!m?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},nt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},nt.uniqueSort=function(t){var e,n=[],r=0,s=0;if(h=!i.detectDuplicates,u=!i.sortStable&&t.slice(0),t.sort(C),h){for(;e=t[s++];)e===t[s]&&(r=n.push(s));for(;r--;)t.splice(n[r],1)}return u=null,t},r=nt.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},(n=nt.selectors={cacheLength:50,createPseudo:st,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(tt,et),t[3]=(t[3]||t[4]||t[5]||"").replace(tt,et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||nt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&nt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&V.test(i)&&(e=o(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(tt,et).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+L+")"+t+"("+L+"|$)"))&&k(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=nt.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace($," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,u,h,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!l&&!a,y=!1;if(g){if(s){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&_){for(y=(p=(c=(u=(h=(d=g)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(y=p=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[w,p,y];break}}else if(_&&(y=p=(c=(u=(h=(d=e)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===y)for(;(d=++p&&d&&d[m]||(y=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(_&&((u=(h=d[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[w,y]),d!==e)););return(y-=r)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||nt.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,i){for(var n,s=r(t,e),o=s.length;o--;)t[n=I(t,s[o])]=!(i[n]=s[o])})):function(t){return r(t,0,i)}):r}},pseudos:{not:st((function(t){var e=[],i=[],n=a(t.replace(z,"$1"));return n[b]?st((function(t,e,i,r){for(var s,o=n(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,n(e,null,s,i),e[0]=null,!i.pop()}})),has:st((function(t){return function(e){return nt(t,e).length>0}})),contains:st((function(t){return t=t.replace(tt,et),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}})),lang:st((function(t){return U.test(t||"")||nt.error("unsupported lang: "+t),t=t.replace(tt,et).toLowerCase(),function(e){var i;do{if(i=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ht((function(){return[0]})),last:ht((function(t,e){return[e-1]})),eq:ht((function(t,e,i){return[i<0?i+e:i]})),even:ht((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:ht((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:ht((function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t})),gt:ht((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ct(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ut(e);function pt(){}function ft(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function mt(t,e,i){var n=e.dir,r=i&&"parentNode"===n,s=E++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,s)}:function(e,i,o){var a,l,c,u=[w,s];if(o){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if((a=(l=(c=e[b]||(e[b]={}))[e.uniqueID]||(c[e.uniqueID]={}))[n])&&a[0]===w&&a[1]===s)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,o))return!0}}}function gt(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function vt(t,e,i,n,r){for(var s,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(i&&!i(s,n,r)||(o.push(s),c&&e.push(a)));return o}function _t(t,e,i,n,r,s){return n&&!n[b]&&(n=_t(n)),r&&!r[b]&&(r=_t(r,s)),st((function(s,o,a,l){var c,u,h,d=[],p=[],f=o.length,m=s||function(t,e,i){for(var n=0,r=e.length;n<r;n++)nt(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!s&&e?m:vt(m,d,t,a,l),v=i?r||(s?t:f||n)?[]:o:g;if(i&&i(g,v,a,l),n)for(c=vt(v,p),n(c,[],a,l),u=c.length;u--;)(h=c[u])&&(v[p[u]]=!(g[p[u]]=h));if(s){if(r||t){if(r){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(g[u]=h);r(null,v=[],c,l)}for(u=v.length;u--;)(h=v[u])&&(c=r?I(s,h):d[u])>-1&&(s[c]=!(o[c]=h))}}else v=vt(v===o?v.splice(f,v.length):v),r?r(null,o,v,l):N.apply(o,v)}))}function yt(t){for(var e,i,r,s=t.length,o=n.relative[t[0].type],a=o||n.relative[" "],l=o?1:0,u=mt((function(t){return t===e}),a,!0),h=mt((function(t){return I(e,t)>-1}),a,!0),d=[function(t,i,n){var r=!o&&(n||i!==c)||((e=i).nodeType?u(t,i,n):h(t,i,n));return e=null,r}];l<s;l++)if(i=n.relative[t[l].type])d=[mt(gt(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(r=++l;r<s&&!n.relative[t[r].type];r++);return _t(l>1&&gt(d),l>1&&ft(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(z,"$1"),i,l<r&&yt(t.slice(l,r)),r<s&&yt(t=t.slice(r)),r<s&&ft(t))}d.push(i)}return gt(d)}return pt.prototype=n.filters=n.pseudos,n.setFilters=new pt,o=nt.tokenize=function(t,e){var i,r,s,o,a,l,c,u=S[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=n.preFilter;a;){for(o in i&&!(r=B.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=W.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(z," ")}),a=a.slice(i.length)),n.filter)!(r=K[o].exec(a))||c[o]&&!(r=c[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?nt.error(t):S(t,l).slice(0)},a=nt.compile=function(t,e){var i,r=[],s=[],a=P[t+" "];if(!a){for(e||(e=o(t)),i=e.length;i--;)(a=yt(e[i]))[b]?r.push(a):s.push(a);(a=P(t,function(t,e){var i=e.length>0,r=t.length>0,s=function(s,o,a,l,u){var h,f,g,v=0,_="0",y=s&&[],b=[],x=c,E=s||r&&n.find.TAG("*",u),k=w+=null==x?1:Math.random()||.1,S=E.length;for(u&&(c=o===p||o||u);_!==S&&null!=(h=E[_]);_++){if(r&&h){for(f=0,o||h.ownerDocument===p||(d(h),a=!m);g=t[f++];)if(g(h,o||p,a)){l.push(h);break}u&&(w=k)}i&&((h=!g&&h)&&v--,s&&y.push(h))}if(v+=_,i&&_!==v){for(f=0;g=e[f++];)g(y,b,o,a);if(s){if(v>0)for(;_--;)y[_]||b[_]||(b[_]=A.call(l));b=vt(b)}N.apply(l,b),u&&!s&&b.length>0&&v+e.length>1&&nt.uniqueSort(l)}return u&&(w=k,c=x),y};return i?st(s):s}(s,r))).selector=t}return a},l=nt.select=function(t,e,r,s){var l,c,u,h,d,p="function"==typeof t&&t,f=!s&&o(t=p.selector||t);if(r=r||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&i.getById&&9===e.nodeType&&m&&n.relative[c[1].type]){if(!(e=(n.find.ID(u.matches[0].replace(tt,et),e)||[])[0]))return r;p&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=K.needsContext.test(t)?0:c.length;l--&&(u=c[l],!n.relative[h=u.type]);)if((d=n.find[h])&&(s=d(u.matches[0].replace(tt,et),Y.test(c[0].type)&&dt(e.parentNode)||e))){if(c.splice(l,1),!(t=s.length&&ft(c)))return N.apply(r,s),r;break}}return(p||a(t,f))(s,e,!m,r,!e||Y.test(t)&&dt(e.parentNode)||e),r},i.sortStable=b.split("").sort(C).join("")===b,i.detectDuplicates=!!h,d(),i.sortDetached=ot((function(t){return 1&t.compareDocumentPosition(p.createElement("div"))})),ot((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||at("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ot((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||at("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ot((function(t){return null==t.getAttribute("disabled")}))||at(M,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),nt}(i);m.find=x,m.expr=x.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=x.uniqueSort,m.text=x.getText,m.isXMLDoc=x.isXML,m.contains=x.contains;var w=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&m(t).is(i))break;n.push(t)}return n},E=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},k=m.expr.match.needsContext,S=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,P=/^.[^:#\[\.,]*$/;function C(t,e,i){if(m.isFunction(e))return m.grep(t,(function(t,n){return!!e.call(t,n,t)!==i}));if(e.nodeType)return m.grep(t,(function(t){return t===e!==i}));if("string"==typeof e){if(P.test(e))return m.filter(e,t,i);e=m.filter(e,t)}return m.grep(t,(function(t){return u.call(e,t)>-1!==i}))}m.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?m.find.matchesSelector(n,t)?[n]:[]:m.find.matches(t,m.grep(e,(function(t){return 1===t.nodeType})))},m.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(m(t).filter((function(){for(e=0;e<i;e++)if(m.contains(r[e],this))return!0})));for(e=0;e<i;e++)m.find(t,r[e],n);return(n=this.pushStack(i>1?m.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(C(this,t||[],!1))},not:function(t){return this.pushStack(C(this,t||[],!0))},is:function(t){return!!C(this,"string"==typeof t&&k.test(t)?m(t):t||[],!1).length}});var D,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||D,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:T.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof m?e[0]:e,m.merge(this,m.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:o,!0)),S.test(n[1])&&m.isPlainObject(e))for(n in e)m.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=o.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=o,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):m.isFunction(t)?void 0!==i.ready?i.ready(t):t(m):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),m.makeArray(t,this))}).prototype=m.fn,D=m(o);var A=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}m.fn.extend({has:function(t){var e=m(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(m.contains(this,e[t]))return!0}))},closest:function(t,e){for(var i,n=0,r=this.length,s=[],o=k.test(t)||"string"!=typeof t?m(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&m.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?m.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?u.call(m(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),m.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return w(t,"parentNode")},parentsUntil:function(t,e,i){return w(t,"parentNode",i)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return w(t,"nextSibling")},prevAll:function(t){return w(t,"previousSibling")},nextUntil:function(t,e,i){return w(t,"nextSibling",i)},prevUntil:function(t,e,i){return w(t,"previousSibling",i)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return t.contentDocument||m.merge([],t.childNodes)}},(function(t,e){m.fn[t]=function(i,n){var r=m.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=m.filter(n,r)),this.length>1&&(O[t]||m.uniqueSort(r),A.test(t)&&r.reverse()),this.pushStack(r)}}));var j,I=/\S+/g;function M(){o.removeEventListener("DOMContentLoaded",M),i.removeEventListener("load",M),m.ready()}m.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return m.each(t.match(I)||[],(function(t,i){e[i]=!0})),e}(t):m.extend({},t);var e,i,n,r,s=[],o=[],a=-1,l=function(){for(r=t.once,n=e=!0;o.length;a=-1)for(i=o.shift();++a<s.length;)!1===s[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=s.length,i=!1);t.memory||(i=!1),e=!1,r&&(s=i?[]:"")},c={add:function(){return s&&(i&&!e&&(a=s.length-1,o.push(i)),function e(i){m.each(i,(function(i,n){m.isFunction(n)?t.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==m.type(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return m.each(arguments,(function(t,e){for(var i;(i=m.inArray(e,s,i))>-1;)s.splice(i,1),i<=a&&a--})),this},has:function(t){return t?m.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=o=[],i||(s=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],o.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},m.extend({Deferred:function(t){var e=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return m.Deferred((function(i){m.each(e,(function(e,s){var o=m.isFunction(t[e])&&t[e];r[s[1]]((function(){var t=o&&o.apply(this,arguments);t&&m.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[s[0]+"With"](this===n?i.promise():this,o?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?m.extend(t,n):n}},r={};return n.pipe=n.then,m.each(e,(function(t,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add((function(){i=a}),e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith})),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,s=a.call(arguments),o=s.length,l=1!==o||t&&m.isFunction(t.promise)?o:0,c=1===l?t:m.Deferred(),u=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?a.call(arguments):r,n===e?c.notifyWith(i,n):--l||c.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);r<o;r++)s[r]&&m.isFunction(s[r].promise)?s[r].promise().progress(u(r,i,e)).done(u(r,n,s)).fail(c.reject):--l;return l||c.resolveWith(n,s),c.promise()}}),m.fn.ready=function(t){return m.ready.promise().done(t),this},m.extend({isReady:!1,readyWait:1,holdReady:function(t){t?m.readyWait++:m.ready(!0)},ready:function(t){(!0===t?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==t&&--m.readyWait>0||(j.resolveWith(o,[m]),m.fn.triggerHandler&&(m(o).triggerHandler("ready"),m(o).off("ready"))))}}),m.ready.promise=function(t){return j||(j=m.Deferred(),"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?i.setTimeout(m.ready):(o.addEventListener("DOMContentLoaded",M),i.addEventListener("load",M))),j.promise(t)},m.ready.promise();var L=function(t,e,i,n,r,s,o){var a=0,l=t.length,c=null==i;if("object"===m.type(i))for(a in r=!0,i)L(t,e,a,i[a],!0,s,o);else if(void 0!==n&&(r=!0,m.isFunction(n)||(o=!0),c&&(o?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(m(t),i)})),e))for(;a<l;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):l?e(t[0],i):s},R=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function H(){this.expando=m.expando+H.uid++}H.uid=1,H.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!R(t))return{};var e=t[this.expando];return e||(e={},R(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[e]=i;else for(n in e)r[n]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?void 0!==(n=this.get(t,e))?n:this.get(t,m.camelCase(e)):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,s=t[this.expando];if(void 0!==s){if(void 0===e)this.register(t);else{m.isArray(e)?n=e.concat(e.map(m.camelCase)):(r=m.camelCase(e),n=e in s?[e,r]:(n=r)in s?[n]:n.match(I)||[]),i=n.length;for(;i--;)delete s[n[i]]}(void 0===e||m.isEmptyObject(s))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!m.isEmptyObject(e)}};var F=new H,$=new H,z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/[A-Z]/g;function W(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(B,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:z.test(i)?m.parseJSON(i):i)}catch(t){}$.set(t,e,i)}else i=void 0;return i}m.extend({hasData:function(t){return $.hasData(t)||F.hasData(t)},data:function(t,e,i){return $.access(t,e,i)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,i){return F.access(t,e,i)},_removeData:function(t,e){F.remove(t,e)}}),m.fn.extend({data:function(t,e){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=$.get(s),1===s.nodeType&&!F.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=m.camelCase(n.slice(5)),W(s,n,r[n]));F.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){$.set(this,t)})):L(this,(function(e){var i,n;if(s&&void 0===e)return void 0!==(i=$.get(s,t)||$.get(s,t.replace(B,"-$&").toLowerCase()))?i:(n=m.camelCase(t),void 0!==(i=$.get(s,n))||void 0!==(i=W(s,n,void 0))?i:void 0);n=m.camelCase(t),this.each((function(){var i=$.get(this,n);$.set(this,n,e),t.indexOf("-")>-1&&void 0!==i&&$.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){$.remove(this,t)}))}}),m.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=F.get(t,e),i&&(!n||m.isArray(i)?n=F.access(t,e,m.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=m.queue(t,e),n=i.length,r=i.shift(),s=m._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,(function(){m.dequeue(t,e)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return F.get(t,i)||F.access(t,i,{empty:m.Callbacks("once memory").add((function(){F.remove(t,[e+"queue",i])}))})}}),m.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?m.queue(this[0],t):void 0===e?this:this.each((function(){var i=m.queue(this,t,e);m._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&m.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){m.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=m.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=F.get(s[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],K=function(t,e){return t=e||t,"none"===m.css(t,"display")||!m.contains(t.ownerDocument,t)};function J(t,e,i,n){var r,s=1,o=20,a=n?function(){return n.cur()}:function(){return m.css(t,e,"")},l=a(),c=i&&i[3]||(m.cssNumber[e]?"":"px"),u=(m.cssNumber[e]||"px"!==c&&+l)&&V.exec(m.css(t,e));if(u&&u[3]!==c){c=c||u[3],i=i||[],u=+l||1;do{u/=s=s||".5",m.style(t,e,u+c)}while(s!==(s=a()/l)&&1!==s&&--o)}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=r)),r}var Q=/^(?:checkbox|radio)$/i,G=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,Y={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Z(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&m.nodeName(t,e)?m.merge([t],i):i}function tt(t,e){for(var i=0,n=t.length;i<n;i++)F.set(t[i],"globalEval",!e||F.get(e[i],"globalEval"))}Y.optgroup=Y.option,Y.tbody=Y.tfoot=Y.colgroup=Y.caption=Y.thead,Y.th=Y.td;var et,it,nt=/<|&#?\w+;/;function rt(t,e,i,n,r){for(var s,o,a,l,c,u,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===m.type(s))m.merge(d,s.nodeType?[s]:s);else if(nt.test(s)){for(o=o||h.appendChild(e.createElement("div")),a=(G.exec(s)||["",""])[1].toLowerCase(),l=Y[a]||Y._default,o.innerHTML=l[1]+m.htmlPrefilter(s)+l[2],u=l[0];u--;)o=o.lastChild;m.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(e.createTextNode(s));for(h.textContent="",p=0;s=d[p++];)if(n&&m.inArray(s,n)>-1)r&&r.push(s);else if(c=m.contains(s.ownerDocument,s),o=Z(h.appendChild(s),"script"),c&&tt(o),i)for(u=0;s=o[u++];)X.test(s.type||"")&&i.push(s);return h}et=o.createDocumentFragment().appendChild(o.createElement("div")),(it=o.createElement("input")).setAttribute("type","radio"),it.setAttribute("checked","checked"),it.setAttribute("name","t"),et.appendChild(it),f.checkClone=et.cloneNode(!0).cloneNode(!0).lastChild.checked,et.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!et.cloneNode(!0).lastChild.defaultValue;var st=/^key/,ot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,at=/^([^.]*)(?:\.(.+)|)/;function lt(){return!0}function ct(){return!1}function ut(){try{return o.activeElement}catch(t){}}function ht(t,e,i,n,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)ht(t,a,i,n,e[a],s);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=ct;else if(!r)return t;return 1===s&&(o=r,(r=function(t){return m().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=m.guid++)),t.each((function(){m.event.add(this,e,r,n,i)}))}m.event={global:{},add:function(t,e,i,n,r){var s,o,a,l,c,u,h,d,p,f,g,v=F.get(t);if(v)for(i.handler&&(i=(s=i).handler,r=s.selector),i.guid||(i.guid=m.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(e){return void 0!==m&&m.event.triggered!==e.type?m.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(I)||[""]).length;c--;)p=g=(a=at.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=m.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=m.event.special[p]||{},u=m.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&m.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,f,o)||t.addEventListener&&t.addEventListener(p,o)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),m.event.global[p]=!0)},remove:function(t,e,i,n,r){var s,o,a,l,c,u,h,d,p,f,g,v=F.hasData(t)&&F.get(t);if(v&&(l=v.events)){for(c=(e=(e||"").match(I)||[""]).length;c--;)if(p=g=(a=at.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=m.event.special[p]||{},d=l[p=(n?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,v.handle)||m.removeEvent(t,p,v.handle),delete l[p])}else for(p in l)m.event.remove(t,p+e[c],i,n,!0);m.isEmptyObject(l)&&F.remove(t,"handle events")}},dispatch:function(t){t=m.event.fix(t);var e,i,n,r,s,o=[],l=a.call(arguments),c=(F.get(this,"events")||{})[t.type]||[],u=m.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(o=m.event.handlers.call(this,t,c),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(s.namespace)||(t.handleObj=s,t.data=s.data,void 0!==(n=((m.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,s,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(n=[],i=0;i<a;i++)void 0===n[r=(s=e[i]).selector+" "]&&(n[r]=s.needsContext?m(r,this).index(l)>-1:m.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||o).documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[m.expando])return t;var e,i,n,r=t.type,s=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=ot.test(r)?this.mouseHooks:st.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,t=new m.Event(s),e=n.length;e--;)t[i=n[e]]=s[i];return t.target||(t.target=o),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ut()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ut()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(t){return m.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},m.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},m.Event=function(t,e){if(!(this instanceof m.Event))return new m.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?lt:ct):this.type=t,e&&m.extend(this,e),this.timeStamp=t&&t.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:ct,isPropagationStopped:ct,isImmediatePropagationStopped:ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=lt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=lt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=lt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){m.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===n||m.contains(n,r))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}})),m.fn.extend({on:function(t,e,i,n){return ht(this,t,e,i,n)},one:function(t,e,i,n){return ht(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,m(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=ct),this.each((function(){m.event.remove(this,t,i,e)}))}});var dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,pt=/<script|<style|<link/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,mt=/^true\/(.*)/,gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function vt(t,e){return m.nodeName(t,"table")&&m.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _t(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function yt(t){var e=mt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function bt(t,e){var i,n,r,s,o,a,l,c;if(1===e.nodeType){if(F.hasData(t)&&(s=F.access(t),o=F.set(e,s),c=s.events))for(r in delete o.handle,o.events={},c)for(i=0,n=c[r].length;i<n;i++)m.event.add(e,r,c[r][i]);$.hasData(t)&&(a=$.access(t),l=m.extend({},a),$.set(e,l))}}function xt(t,e,i,n){e=l.apply([],e);var r,s,o,a,c,u,h=0,d=t.length,p=d-1,g=e[0],v=m.isFunction(g);if(v||d>1&&"string"==typeof g&&!f.checkClone&&ft.test(g))return t.each((function(r){var s=t.eq(r);v&&(e[0]=g.call(this,r,s.html())),xt(s,e,i,n)}));if(d&&(s=(r=rt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=s),s||n)){for(a=(o=m.map(Z(r,"script"),_t)).length;h<d;h++)c=r,h!==p&&(c=m.clone(c,!0,!0),a&&m.merge(o,Z(c,"script"))),i.call(t[h],c,h);if(a)for(u=o[o.length-1].ownerDocument,m.map(o,yt),h=0;h<a;h++)c=o[h],X.test(c.type||"")&&!F.access(c,"globalEval")&&m.contains(u,c)&&(c.src?m._evalUrl&&m._evalUrl(c.src):m.globalEval(c.textContent.replace(gt,"")))}return t}function wt(t,e,i){for(var n,r=e?m.filter(e,t):t,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||m.cleanData(Z(n)),n.parentNode&&(i&&m.contains(n.ownerDocument,n)&&tt(Z(n,"script")),n.parentNode.removeChild(n));return t}m.extend({htmlPrefilter:function(t){return t.replace(dt,"<$1></$2>")},clone:function(t,e,i){var n,r,s,o,a,l,c,u=t.cloneNode(!0),h=m.contains(t.ownerDocument,t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||m.isXMLDoc(t)))for(o=Z(u),n=0,r=(s=Z(t)).length;n<r;n++)a=s[n],l=o[n],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&Q.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(e)if(i)for(s=s||Z(t),o=o||Z(u),n=0,r=s.length;n<r;n++)bt(s[n],o[n]);else bt(t,u);return(o=Z(u,"script")).length>0&&tt(o,!h&&Z(t,"script")),u},cleanData:function(t){for(var e,i,n,r=m.event.special,s=0;void 0!==(i=t[s]);s++)if(R(i)){if(e=i[F.expando]){if(e.events)for(n in e.events)r[n]?m.event.remove(i,n):m.removeEvent(i,n,e.handle);i[F.expando]=void 0}i[$.expando]&&(i[$.expando]=void 0)}}}),m.fn.extend({domManip:xt,detach:function(t){return wt(this,t,!0)},remove:function(t){return wt(this,t)},text:function(t){return L(this,(function(t){return void 0===t?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return xt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||vt(this,t).appendChild(t)}))},prepend:function(){return xt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=vt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return xt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return xt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(m.cleanData(Z(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return m.clone(this,t,e)}))},html:function(t){return L(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!pt.test(t)&&!Y[(G.exec(t)||["",""])[1].toLowerCase()]){t=m.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(m.cleanData(Z(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return xt(this,arguments,(function(e){var i=this.parentNode;m.inArray(this,t)<0&&(m.cleanData(Z(this)),i&&i.replaceChild(e,this))}),t)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){m.fn[t]=function(t){for(var i,n=[],r=m(t),s=r.length-1,o=0;o<=s;o++)i=o===s?this:this.clone(!0),m(r[o])[e](i),c.apply(n,i.get());return this.pushStack(n)}}));var Et,kt={HTML:"block",BODY:"block"};function St(t,e){var i=m(e.createElement(t)).appendTo(e.body),n=m.css(i[0],"display");return i.detach(),n}function Pt(t){var e=o,i=kt[t];return i||("none"!==(i=St(t,e))&&i||((e=(Et=(Et||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),i=St(t,e),Et.detach()),kt[t]=i),i}var Ct=/^margin/,Dt=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),Tt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},At=function(t,e,i,n){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in r=i.apply(t,n||[]),e)t.style[s]=o[s];return r},Ot=o.documentElement;function Nt(t,e,i){var n,r,s,o,a=t.style;return""!==(o=(i=i||Tt(t))?i.getPropertyValue(e)||i[e]:void 0)&&void 0!==o||m.contains(t.ownerDocument,t)||(o=m.style(t,e)),i&&!f.pixelMarginRight()&&Dt.test(o)&&Ct.test(e)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s),void 0!==o?o+"":o}function jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){var t,e,n,r,s=o.createElement("div"),a=o.createElement("div");function l(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ot.appendChild(s);var o=i.getComputedStyle(a);t="1%"!==o.top,r="2px"===o.marginLeft,e="4px"===o.width,a.style.marginRight="50%",n="4px"===o.marginRight,Ot.removeChild(s)}a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),m.extend(f,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==e&&l(),e},pixelMarginRight:function(){return null==e&&l(),n},reliableMarginLeft:function(){return null==e&&l(),r},reliableMarginRight:function(){var t,e=a.appendChild(o.createElement("div"));return e.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",a.style.width="1px",Ot.appendChild(s),t=!parseFloat(i.getComputedStyle(e).marginRight),Ot.removeChild(s),a.removeChild(e),t}}))}();var It=/^(none|table(?!-c[ea]).+)/,Mt={position:"absolute",visibility:"hidden",display:"block"},Lt={letterSpacing:"0",fontWeight:"400"},Rt=["Webkit","O","Moz","ms"],Ht=o.createElement("div").style;function Ft(t){if(t in Ht)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=Rt.length;i--;)if((t=Rt[i]+e)in Ht)return t}function $t(t,e,i){var n=V.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function zt(t,e,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;s<4;s+=2)"margin"===i&&(o+=m.css(t,i+U[s],!0,r)),n?("content"===i&&(o-=m.css(t,"padding"+U[s],!0,r)),"margin"!==i&&(o-=m.css(t,"border"+U[s]+"Width",!0,r))):(o+=m.css(t,"padding"+U[s],!0,r),"padding"!==i&&(o+=m.css(t,"border"+U[s]+"Width",!0,r)));return o}function Bt(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=Tt(t),o="border-box"===m.css(t,"boxSizing",!1,s);if(r<=0||null==r){if(((r=Nt(t,e,s))<0||null==r)&&(r=t.style[e]),Dt.test(r))return r;n=o&&(f.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+zt(t,e,i||(o?"border":"content"),n,s)+"px"}function Wt(t,e){for(var i,n,r,s=[],o=0,a=t.length;o<a;o++)(n=t[o]).style&&(s[o]=F.get(n,"olddisplay"),i=n.style.display,e?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&K(n)&&(s[o]=F.access(n,"olddisplay",Pt(n.nodeName)))):(r=K(n),"none"===i&&r||F.set(n,"olddisplay",r?i:m.css(n,"display"))));for(o=0;o<a;o++)(n=t[o]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[o]||"":"none"));return t}function qt(t,e,i,n,r){return new qt.prototype.init(t,e,i,n,r)}m.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Nt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=m.camelCase(e),l=t.style;if(e=m.cssProps[a]||(m.cssProps[a]=Ft(a)||a),o=m.cssHooks[e]||m.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(r=o.get(t,!1,n))?r:l[e];"string"==(s=typeof i)&&(r=V.exec(i))&&r[1]&&(i=J(t,e,r),s="number"),null!=i&&i==i&&("number"===s&&(i+=r&&r[3]||(m.cssNumber[a]?"":"px")),f.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l[e]=i))}},css:function(t,e,i,n){var r,s,o,a=m.camelCase(e);return e=m.cssProps[a]||(m.cssProps[a]=Ft(a)||a),(o=m.cssHooks[e]||m.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,i)),void 0===r&&(r=Nt(t,e,n)),"normal"===r&&e in Lt&&(r=Lt[e]),""===i||i?(s=parseFloat(r),!0===i||isFinite(s)?s||0:r):r}}),m.each(["height","width"],(function(t,e){m.cssHooks[e]={get:function(t,i,n){if(i)return It.test(m.css(t,"display"))&&0===t.offsetWidth?At(t,Mt,(function(){return Bt(t,e,n)})):Bt(t,e,n)},set:function(t,i,n){var r,s=n&&Tt(t),o=n&&zt(t,e,n,"border-box"===m.css(t,"boxSizing",!1,s),s);return o&&(r=V.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=m.css(t,e)),$t(0,i,o)}}})),m.cssHooks.marginLeft=jt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Nt(t,"marginLeft"))||t.getBoundingClientRect().left-At(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),m.cssHooks.marginRight=jt(f.reliableMarginRight,(function(t,e){if(e)return At(t,{display:"inline-block"},Nt,[t,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(t,e){m.cssHooks[t+e]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+U[n]+e]=s[n]||s[n-2]||s[0];return r}},Ct.test(t)||(m.cssHooks[t+e].set=$t)})),m.fn.extend({css:function(t,e){return L(this,(function(t,e,i){var n,r,s={},o=0;if(m.isArray(e)){for(n=Tt(t),r=e.length;o<r;o++)s[e[o]]=m.css(t,e[o],!1,n);return s}return void 0!==i?m.style(t,e,i):m.css(t,e)}),t,e,arguments.length>1)},show:function(){return Wt(this,!0)},hide:function(){return Wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){K(this)?m(this).show():m(this).hide()}))}}),m.Tween=qt,qt.prototype={constructor:qt,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||m.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(m.cssNumber[i]?"":"px")},cur:function(){var t=qt.propHooks[this.prop];return t&&t.get?t.get(this):qt.propHooks._default.get(this)},run:function(t){var e,i=qt.propHooks[this.prop];return this.options.duration?this.pos=e=m.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):qt.propHooks._default.set(this),this}},qt.prototype.init.prototype=qt.prototype,qt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=m.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){m.fx.step[t.prop]?m.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[m.cssProps[t.prop]]&&!m.cssHooks[t.prop]?t.elem[t.prop]=t.now:m.style(t.elem,t.prop,t.now+t.unit)}}},qt.propHooks.scrollTop=qt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},m.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},m.fx=qt.prototype.init,m.fx.step={};var Vt,Ut,Kt=/^(?:toggle|show|hide)$/,Jt=/queueHooks$/;function Qt(){return i.setTimeout((function(){Vt=void 0})),Vt=m.now()}function Gt(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=U[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function Xt(t,e,i){for(var n,r=(Yt.tweeners[e]||[]).concat(Yt.tweeners["*"]),s=0,o=r.length;s<o;s++)if(n=r[s].call(i,e,t))return n}function Yt(t,e,i){var n,r,s=0,o=Yt.prefilters.length,a=m.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=Vt||Qt(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(n);return a.notifyWith(t,[c,n,i]),n<1&&o?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:m.extend({},e),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},i),originalProperties:e,originalOptions:i,startTime:Vt||Qt(),duration:i.duration,tweens:[],createTween:function(e,i){var n=m.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var i,n,r,s,o;for(i in t)if(r=e[n=m.camelCase(i)],s=t[i],m.isArray(s)&&(r=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(o=m.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete t[n],s)i in t||(t[i]=s[i],e[i]=r);else e[n]=r}(u,c.opts.specialEasing);s<o;s++)if(n=Yt.prefilters[s].call(c,t,u,c.opts))return m.isFunction(n.stop)&&(m._queueHooks(c.elem,c.opts.queue).stop=m.proxy(n.stop,n)),n;return m.map(u,Xt,c),m.isFunction(c.opts.start)&&c.opts.start.call(t,c),m.fx.timer(m.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}m.Animation=m.extend(Yt,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return J(i.elem,t,V.exec(e),i),i}]},tweener:function(t,e){m.isFunction(t)?(e=t,t=["*"]):t=t.match(I);for(var i,n=0,r=t.length;n<r;n++)i=t[n],Yt.tweeners[i]=Yt.tweeners[i]||[],Yt.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,s,o,a,l,c,u=this,h={},d=t.style,p=t.nodeType&&K(t),f=F.get(t,"fxshow");for(n in i.queue||(null==(a=m._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always((function(){u.always((function(){a.unqueued--,m.queue(t,"fx").length||a.empty.fire()}))}))),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(c=m.css(t,"display"))?F.get(t,"olddisplay")||Pt(t.nodeName):c)&&"none"===m.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always((function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}))),e)if(r=e[n],Kt.exec(r)){if(delete e[n],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;p=!0}h[n]=f&&f[n]||m.style(t,n)}else c=void 0;if(m.isEmptyObject(h))"inline"===("none"===c?Pt(t.nodeName):c)&&(d.display=c);else for(n in f?"hidden"in f&&(p=f.hidden):f=F.access(t,"fxshow",{}),s&&(f.hidden=!p),p?m(t).show():u.done((function(){m(t).hide()})),u.done((function(){var e;for(e in F.remove(t,"fxshow"),h)m.style(t,e,h[e])})),h)o=Xt(p?f[n]:0,n,u),n in f||(f[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}],prefilter:function(t,e){e?Yt.prefilters.unshift(t):Yt.prefilters.push(t)}}),m.speed=function(t,e,i){var n=t&&"object"==typeof t?m.extend({},t):{complete:i||!i&&e||m.isFunction(t)&&t,duration:t,easing:i&&e||e&&!m.isFunction(e)&&e};return n.duration=m.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in m.fx.speeds?m.fx.speeds[n.duration]:m.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m.isFunction(n.old)&&n.old.call(this),n.queue&&m.dequeue(this,n.queue)},n},m.fn.extend({fadeTo:function(t,e,i,n){return this.filter(K).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=m.isEmptyObject(t),s=m.speed(e,i,n),o=function(){var e=Yt(this,m.extend({},t),s);(r||F.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=m.timers,o=F.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&Jt.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(i),e=!1,s.splice(r,1));!e&&i||m.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=F.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],s=m.timers,o=n?n.length:0;for(i.finish=!0,m.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),m.each(["toggle","show","hide"],(function(t,e){var i=m.fn[e];m.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(Gt(e,!0),t,n,r)}})),m.each({slideDown:Gt("show"),slideUp:Gt("hide"),slideToggle:Gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){m.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),m.timers=[],m.fx.tick=function(){var t,e=0,i=m.timers;for(Vt=m.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||m.fx.stop(),Vt=void 0},m.fx.timer=function(t){m.timers.push(t),t()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Ut||(Ut=i.setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){i.clearInterval(Ut),Ut=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(t,e){return t=m.fx&&m.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=o.createElement("input"),e=o.createElement("select"),i=e.appendChild(o.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=i.selected,e.disabled=!0,f.optDisabled=!i.disabled,(t=o.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var Zt,te=m.expr.attrHandle;m.fn.extend({attr:function(t,e){return L(this,m.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){m.removeAttr(this,t)}))}}),m.extend({attr:function(t,e,i){var n,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?m.prop(t,e,i):(1===s&&m.isXMLDoc(t)||(e=e.toLowerCase(),r=m.attrHooks[e]||(m.expr.match.bool.test(e)?Zt:void 0)),void 0!==i?null===i?void m.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=m.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&m.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,r=0,s=e&&e.match(I);if(s&&1===t.nodeType)for(;i=s[r++];)n=m.propFix[i]||i,m.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)}}),Zt={set:function(t,e,i){return!1===e?m.removeAttr(t,i):t.setAttribute(i,i),i}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=te[e]||m.find.attr;te[e]=function(t,e,n){var r,s;return n||(s=te[e],te[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,te[e]=s),r}}));var ee=/^(?:input|select|textarea|button)$/i,ie=/^(?:a|area)$/i;m.fn.extend({prop:function(t,e){return L(this,m.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[m.propFix[t]||t]}))}}),m.extend({prop:function(t,e,i){var n,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&m.isXMLDoc(t)||(e=m.propFix[e]||e,r=m.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=m.find.attr(t,"tabindex");return e?parseInt(e,10):ee.test(t.nodeName)||ie.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(m.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var ne=/[\t\r\n\f]/g;function re(t){return t.getAttribute&&t.getAttribute("class")||""}m.fn.extend({addClass:function(t){var e,i,n,r,s,o,a,l=0;if(m.isFunction(t))return this.each((function(e){m(this).addClass(t.call(this,e,re(this)))}));if("string"==typeof t&&t)for(e=t.match(I)||[];i=this[l++];)if(r=re(i),n=1===i.nodeType&&(" "+r+" ").replace(ne," ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r!==(a=m.trim(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,s,o,a,l=0;if(m.isFunction(t))return this.each((function(e){m(this).removeClass(t.call(this,e,re(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(I)||[];i=this[l++];)if(r=re(i),n=1===i.nodeType&&(" "+r+" ").replace(ne," ")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");r!==(a=m.trim(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):m.isFunction(t)?this.each((function(i){m(this).toggleClass(t.call(this,i,re(this),e),e)})):this.each((function(){var e,n,r,s;if("string"===i)for(n=0,r=m(this),s=t.match(I)||[];e=s[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=re(this))&&F.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":F.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+re(i)+" ").replace(ne," ").indexOf(e)>-1)return!0;return!1}});var se=/\r/g,oe=/[\x20\t\r\n\f]+/g;m.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=m.isFunction(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,m(this).val()):t)?r="":"number"==typeof r?r+="":m.isArray(r)&&(r=m.map(r,(function(t){return null==t?"":t+""}))),(e=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=m.valHooks[r.type]||m.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(se,""):null==i?"":i:void 0}}),m.extend({valHooks:{option:{get:function(t){var e=m.find.attr(t,"value");return null!=e?e:m.trim(m.text(t)).replace(oe," ")}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,s="select-one"===t.type||r<0,o=s?null:[],a=s?r+1:n.length,l=r<0?a:s?r:0;l<a;l++)if(((i=n[l]).selected||l===r)&&(f.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!m.nodeName(i.parentNode,"optgroup"))){if(e=m(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,s=m.makeArray(e),o=r.length;o--;)((n=r[o]).selected=m.inArray(m.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(t,e){if(m.isArray(e))return t.checked=m.inArray(m(t).val(),e)>-1}},f.checkOn||(m.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var ae=/^(?:focusinfocus|focusoutblur)$/;m.extend(m.event,{trigger:function(t,e,n,r){var s,a,l,c,u,h,d,f=[n||o],g=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(a=l=n=n||o,3!==n.nodeType&&8!==n.nodeType&&!ae.test(g+m.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[m.expando]?t:new m.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:m.makeArray(e,[t]),d=m.event.special[g]||{},r||!d.trigger||!1!==d.trigger.apply(n,e))){if(!r&&!d.noBubble&&!m.isWindow(n)){for(c=d.delegateType||g,ae.test(c+g)||(a=a.parentNode);a;a=a.parentNode)f.push(a),l=a;l===(n.ownerDocument||o)&&f.push(l.defaultView||l.parentWindow||i)}for(s=0;(a=f[s++])&&!t.isPropagationStopped();)t.type=s>1?c:d.bindType||g,(h=(F.get(a,"events")||{})[t.type]&&F.get(a,"handle"))&&h.apply(a,e),(h=u&&a[u])&&h.apply&&R(a)&&(t.result=h.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!R(n)||u&&m.isFunction(n[g])&&!m.isWindow(n)&&((l=n[u])&&(n[u]=null),m.event.triggered=g,n[g](),m.event.triggered=void 0,l&&(n[u]=l)),t.result}},simulate:function(t,e,i){var n=m.extend(new m.Event,i,{type:t,isSimulated:!0});m.event.trigger(n,null,e)}}),m.fn.extend({trigger:function(t,e){return this.each((function(){m.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return m.event.trigger(t,e,i,!0)}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){m.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}})),m.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),f.focusin="onfocusin"in i,f.focusin||m.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){m.event.simulate(e,t.target,m.event.fix(t))};m.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=F.access(n,e);r||n.addEventListener(t,i,!0),F.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=F.access(n,e)-1;r?F.access(n,e,r):(n.removeEventListener(t,i,!0),F.remove(n,e))}}}));var le=i.location,ce=m.now(),ue=/\?/;m.parseJSON=function(t){return JSON.parse(t+"")},m.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+t),e};var he=/#.*$/,de=/([?&])_=[^&]*/,pe=/^(.*?):[ \t]*([^\r\n]*)$/gm,fe=/^(?:GET|HEAD)$/,me=/^\/\//,ge={},ve={},_e="*/".concat("*"),ye=o.createElement("a");function be(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,s=e.toLowerCase().match(I)||[];if(m.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function xe(t,e,i,n){var r={},s=t===ve;function o(a){var l;return r[a]=!0,m.each(t[a]||[],(function(t,a){var c=a(e,i,n);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)})),l}return o(e.dataTypes[0])||!r["*"]&&o("*")}function we(t,e){var i,n,r=m.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&m.extend(!0,t,n),t}ye.href=le.href,m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:le.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(le.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?we(we(t,m.ajaxSettings),e):we(m.ajaxSettings,t)},ajaxPrefilter:be(ge),ajaxTransport:be(ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,a,l,c,u,h,d=m.ajaxSetup({},e),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?m(p):m.event,g=m.Deferred(),v=m.Callbacks("once memory"),_=d.statusCode||{},y={},b={},x=0,w="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!a)for(a={};e=pe.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return x||(t=b[i]=b[i]||t,y[t]=e),this},overrideMimeType:function(t){return x||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(x<2)for(e in t)_[e]=[_[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||w;return n&&n.abort(e),k(0,e),this}};if(g.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,d.url=((t||d.url||le.href)+"").replace(he,"").replace(me,le.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=m.trim(d.dataType||"*").toLowerCase().match(I)||[""],null==d.crossDomain){c=o.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=ye.protocol+"//"+ye.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=m.param(d.data,d.traditional)),xe(ge,d,e,E),2===x)return E;for(h in(u=m.event&&d.global)&&0==m.active++&&m.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!fe.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(ue.test(r)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=de.test(r)?r.replace(de,"$1_="+ce++):r+(ue.test(r)?"&":"?")+"_="+ce++)),d.ifModified&&(m.lastModified[r]&&E.setRequestHeader("If-Modified-Since",m.lastModified[r]),m.etag[r]&&E.setRequestHeader("If-None-Match",m.etag[r])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+_e+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,E,d)||2===x))return E.abort();for(h in w="abort",{success:1,error:1,complete:1})E[h](d[h]);if(n=xe(ve,d,e,E)){if(E.readyState=1,u&&f.trigger("ajaxSend",[E,d]),2===x)return E;d.async&&d.timeout>0&&(l=i.setTimeout((function(){E.abort("timeout")}),d.timeout));try{x=1,n.send(y,k)}catch(t){if(!(x<2))throw t;k(-1,t)}}else k(-1,"No Transport");function k(t,e,o,a){var c,h,y,b,w,k=e;2!==x&&(x=2,l&&i.clearTimeout(l),n=void 0,s=a||"",E.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(b=function(t,e,i){for(var n,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}(d,E,o)),b=function(t,e,i,n){var r,s,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(r in c)if((a=r.split(" "))[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[r]:!0!==c[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(d,b,E,c),c?(d.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(m.lastModified[r]=w),(w=E.getResponseHeader("etag"))&&(m.etag[r]=w)),204===t||"HEAD"===d.type?k="nocontent":304===t?k="notmodified":(k=b.state,h=b.data,c=!(y=b.error))):(y=k,!t&&k||(k="error",t<0&&(t=0))),E.status=t,E.statusText=(e||k)+"",c?g.resolveWith(p,[h,k,E]):g.rejectWith(p,[E,k,y]),E.statusCode(_),_=void 0,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[E,d,c?h:y]),v.fireWith(p,[E,k]),u&&(f.trigger("ajaxComplete",[E,d]),--m.active||m.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,i){return m.get(t,e,i,"json")},getScript:function(t,e){return m.get(t,void 0,e,"script")}}),m.each(["get","post"],(function(t,e){m[e]=function(t,i,n,r){return m.isFunction(i)&&(r=r||n,n=i,i=void 0),m.ajax(m.extend({url:t,type:e,dataType:r,data:i,success:n},m.isPlainObject(t)&&t))}})),m._evalUrl=function(t){return m.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(t){var e;return m.isFunction(t)?this.each((function(e){m(this).wrapAll(t.call(this,e))})):(this[0]&&(e=m(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this)},wrapInner:function(t){return m.isFunction(t)?this.each((function(e){m(this).wrapInner(t.call(this,e))})):this.each((function(){var e=m(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m.isFunction(t);return this.each((function(i){m(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(t){return!m.expr.filters.visible(t)},m.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ee=/%20/g,ke=/\[\]$/,Se=/\r?\n/g,Pe=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function De(t,e,i,n){var r;if(m.isArray(e))m.each(e,(function(e,r){i||ke.test(t)?n(t,r):De(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)}));else if(i||"object"!==m.type(e))n(t,e);else for(r in e)De(t+"["+r+"]",e[r],i,n)}m.param=function(t,e){var i,n=[],r=function(t,e){e=m.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(t)||t.jquery&&!m.isPlainObject(t))m.each(t,(function(){r(this.name,this.value)}));else for(i in t)De(i,t[i],e,r);return n.join("&").replace(Ee,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=m.prop(this,"elements");return t?m.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!m(this).is(":disabled")&&Ce.test(this.nodeName)&&!Pe.test(t)&&(this.checked||!Q.test(t))})).map((function(t,e){var i=m(this).val();return null==i?null:m.isArray(i)?m.map(i,(function(t){return{name:e.name,value:t.replace(Se,"\r\n")}})):{name:e.name,value:i.replace(Se,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Te={0:200,1223:204},Ae=m.ajaxSettings.xhr();f.cors=!!Ae&&"withCredentials"in Ae,f.ajax=Ae=!!Ae,m.ajaxTransport((function(t){var e,n;if(f.cors||Ae&&!t.crossDomain)return{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Te[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return m.globalEval(t),t}}}),m.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),m.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain)return{send:function(n,r){e=m("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),o.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Oe=[],Ne=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Oe.pop()||m.expando+"_"+ce++;return this[t]=!0,t}}),m.ajaxPrefilter("json jsonp",(function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(Ne.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ne.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=m.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ne,"$1"+r):!1!==t.jsonp&&(t.url+=(ue.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||m.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?m(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,Oe.push(r)),o&&m.isFunction(s)&&s(o[0]),o=s=void 0})),"script"})),m.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||o;var n=S.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=rt([t],e,r),r&&r.length&&m(r).remove(),m.merge([],n.childNodes))};var je=m.fn.load;function Ie(t){return m.isWindow(t)?t:9===t.nodeType&&t.defaultView}m.fn.load=function(t,e,i){if("string"!=typeof t&&je)return je.apply(this,arguments);var n,r,s,o=this,a=t.indexOf(" ");return a>-1&&(n=m.trim(t.slice(a)),t=t.slice(0,a)),m.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&m.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(n?m("<div>").append(m.parseHTML(t)).find(n):t)})).always(i&&function(t,e){o.each((function(){i.apply(this,s||[t.responseText,e,t])}))}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){m.fn[e]=function(t){return this.on(e,t)}})),m.expr.filters.animated=function(t){return m.grep(m.timers,(function(e){return t===e.elem})).length},m.offset={setOffset:function(t,e,i){var n,r,s,o,a,l,c=m.css(t,"position"),u=m(t),h={};"static"===c&&(t.style.position="relative"),a=u.offset(),s=m.css(t,"top"),l=m.css(t,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(n=u.position()).top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),m.isFunction(e)&&(e=e.call(t,i,m.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},m.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){m.offset.setOffset(this,t,e)}));var e,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;return s?(e=s.documentElement,m.contains(e,n)?(r=n.getBoundingClientRect(),i=Ie(s),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===m.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),m.nodeName(t[0],"html")||(n=t.offset()),n.top+=m.css(t[0],"borderTopWidth",!0),n.left+=m.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-m.css(i,"marginTop",!0),left:e.left-n.left-m.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===m.css(t,"position");)t=t.offsetParent;return t||Ot}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;m.fn[t]=function(n){return L(this,(function(t,n,r){var s=Ie(t);if(void 0===r)return s?s[e]:t[n];s?s.scrollTo(i?s.pageXOffset:r,i?r:s.pageYOffset):t[n]=r}),t,n,arguments.length)}})),m.each(["top","left"],(function(t,e){m.cssHooks[e]=jt(f.pixelPosition,(function(t,i){if(i)return i=Nt(t,e),Dt.test(i)?m(t).position()[e]+"px":i}))})),m.each({Height:"height",Width:"width"},(function(t,e){m.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){m.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===r?"margin":"border");return L(this,(function(e,i,n){var r;return m.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?m.css(e,i,o):m.style(e,i,n,o)}),e,s?n:void 0,s,null)}}))})),m.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),m.fn.andSelf=m.fn.addBack,void 0===(n=function(){return m}.apply(e,[]))||(t.exports=n);var Me=i.jQuery,Le=i.$;return m.noConflict=function(t){return i.$===m&&(i.$=Le),t&&i.jQuery===m&&(i.jQuery=Me),m},r||(i.jQuery=i.$=m),m},"object"==typeof t.exports?t.exports=r.document?s(r,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return s(t)}:s(r)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(i(68)),s=n(i(35)),o=i(82),a=i(86),l=n(i(87)),c=n(i(36)),u=n(i(34)),h=r.default.create;function d(){var t=h();return t.compile=function(e,i){return a.compile(e,i,t)},t.precompile=function(e,i){return a.precompile(e,i,t)},t.AST=s.default,t.Compiler=a.Compiler,t.JavaScriptCompiler=l.default,t.Parser=o.parser,t.parse=o.parse,t.parseWithoutProcessing=o.parseWithoutProcessing,t}var p=d();p.create=d,u.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e,i){var n;!function(i){"use strict";var r=13,s=27,o=112,a=123,l=37,c=39,u=9,h={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"]):not(:disabled):not(.ajs-reset)'].join(":not(:disabled):not(.ajs-reset),"),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},d=[];function p(t,e){t.className+=" "+e}function f(t,e){for(var i=t.className.split(" "),n=e.split(" "),r=0;r<n.length;r+=1){var s=i.indexOf(n[r]);s>-1&&i.splice(s,1)}t.className=i.join(" ")}function m(){return"rtl"===i.getComputedStyle(document.body).direction}function g(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function v(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function _(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function y(t){if(null===t)return t;var e;if(Array.isArray(t)){e=[];for(var i=0;i<t.length;i+=1)e.push(y(t[i]));return e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return(e=new RegExp(t.source)).global=t.global,e.ignoreCase=t.ignoreCase,e.multiline=t.multiline,e.lastIndex=t.lastIndex,e;if("object"==typeof t){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=y(t[n]));return e}return t}function b(t,e){if(t.elements){var i=t.elements.root;i.parentNode.removeChild(i),delete t.elements,t.settings=y(t.__settings),t.__init=e,delete t.__internal}}var x=!1;try{var w=Object.defineProperty({},"passive",{get:function(){x=!0}});i.addEventListener("test",w,w),i.removeEventListener("test",w,w)}catch(t){}var E=function(t,e,i,n,r){t.addEventListener(e,i,x?{capture:n,passive:r}:!0===n)},k=function(t,e,i,n,r){t.removeEventListener(e,i,x?{capture:n,passive:r}:!0===n)},S=function(){var t,e,i=!1,n={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==document.documentElement.style[t]){e=n[t],i=!0;break}return{type:e,supported:i}}();function P(t,e){return function(){if(arguments.length>0){for(var i=[],n=0;n<arguments.length;n+=1)i.push(arguments[n]);return i.push(t),e.apply(t,i)}return e.apply(t,[null,t])}}function C(t,e){return{index:t,button:e,cancel:!1}}function D(t,e){if("function"==typeof e.get(t))return e.get(t).call(e)}var T=function(){var t,e,n=[],r=!1,x=i.navigator.userAgent.indexOf("Safari")>-1&&i.navigator.userAgent.indexOf("Chrome")<0,w='<div class="ajs-dimmer"></div>',T='<div class="ajs-modal" tabindex="0"></div>',A='<div class="ajs-dialog" tabindex="0"></div>',N='<button class="ajs-reset"></button>',j='<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',I='<div class="ajs-header"></div>',M='<div class="ajs-body"></div>',L='<div class="ajs-content"></div>',R='<div class="ajs-footer"></div>',H={primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},F='<button class="ajs-button"></button>',$='<div class="ajs-handle"></div>',z="ajs-in",B="ajs-out",W="alertify",q="ajs-basic",V="ajs-capture",U="ajs-closable",K="ajs-fixed",J="ajs-frameless",Q="ajs-hidden",G="ajs-maximized",X="ajs-maximizable",Y="ajs-modeless",Z="ajs-movable",tt="ajs-no-selection",et="ajs-no-overflow",it="ajs-no-padding",nt="ajs-pinnable",rt="ajs-",st="ajs-resizable",ot="ajs-shake",at="ajs-unpinned",lt="ajs-no-transition";function ct(t){if(!t.__internal){var e;O.defaults.hooks.preinit(t),delete t.__init,t.__settings||(t.__settings=y(t.settings)),"function"==typeof t.setup?((e=t.setup()).options=e.options||{},e.focus=e.focus||{}):e={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof t.hooks&&(t.hooks={});var i=[];if(Array.isArray(e.buttons))for(var r=0;r<e.buttons.length;r+=1){var s=e.buttons[r],o={};for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a]);i.push(o)}var l=t.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:i,focus:e.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};c.root=document.createElement("div"),c.root.style.display="none",c.root.className=W+" "+Q+" ",c.root.innerHTML=w+T,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=A,c.dialog=c.modal.firstChild,c.dialog.innerHTML=N+j+I+M+R+$+N,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=L,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=H.auxiliary+H.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=F,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<t.__internal.buttons.length;u+=1){var h=t.__internal.buttons[u];for(var d in n.indexOf(h.key)<0&&n.push(h.key),h.element=c.buttonTemplate.cloneNode(),h.element.innerHTML=h.text,"string"==typeof h.className&&""!==h.className&&p(h.element,h.className),h.attrs)"className"!==d&&h.attrs.hasOwnProperty(d)&&h.element.setAttribute(d,h.attrs[d]);"auxiliary"===h.scope?c.buttons.auxiliary.appendChild(h.element):c.buttons.primary.appendChild(h.element)}for(var f in t.elements=c,l.resetHandler=P(t,Rt),l.beginMoveHandler=P(t,Yt),l.beginResizeHandler=P(t,ae),l.bringToFrontHandler=P(t,mt),l.modalClickHandler=P(t,Tt),l.buttonsClickHandler=P(t,jt),l.commandsClickHandler=P(t,yt),l.transitionInHandler=P(t,$t),l.transitionOutHandler=P(t,zt),l.options)void 0!==e.options[f]?t.set(f,e.options[f]):O.defaults.hasOwnProperty(f)?t.set(f,O.defaults[f]):"title"===f&&t.set(f,O.defaults.glossary[f]);"function"==typeof t.build&&t.build(),O.defaults.hooks.postinit(t)}document.body.appendChild(t.elements.root)}function ut(){i.scrollTo(t,e)}function ht(){for(var t=0,e=0;e<d.length;e+=1){var i=d[e];(i.isModal()||i.isMaximized())&&(t+=1)}0===t&&document.body.className.indexOf(et)>=0?(f(document.body,et),ft(!1)):t>0&&document.body.className.indexOf(et)<0&&(ft(!0),p(document.body,et))}var dt="",pt=0;function ft(t){O.defaults.preventBodyShift&&(t&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(pt=e,dt=i.getComputedStyle(document.body).top,p(document.body,K),document.body.style.top=-e+"px"):t||(e=pt,document.body.style.top=dt,f(document.body,K),ut()))}function mt(t,e){for(var i=d.indexOf(e)+1;i<d.length;i+=1)if(d[i].isModal())return;return document.body.lastChild!==e.elements.root&&(document.body.appendChild(e.elements.root),d.splice(d.indexOf(e),1),d.push(e),Lt(e)),!1}function gt(t,e,i,n){switch(e){case"title":t.setHeader(n);break;case"modal":!function(t){t.get("modal")?(f(t.elements.root,Y),t.isOpen()&&(pe(t),Pt(t),ht())):(p(t.elements.root,Y),t.isOpen()&&(de(t),Pt(t),ht()))}(t);break;case"basic":!function(t){t.get("basic")?p(t.elements.root,q):f(t.elements.root,q)}(t);break;case"frameless":!function(t){t.get("frameless")?p(t.elements.root,J):f(t.elements.root,J)}(t);break;case"pinned":!function(t){t.get("pinned")?(f(t.elements.root,at),t.isOpen()&&St(t)):(p(t.elements.root,at),t.isOpen()&&!t.isModal()&&kt(t))}(t);break;case"closable":!function(t){t.get("closable")?(p(t.elements.root,U),function(t){E(t.elements.modal,"click",t.__internal.modalClickHandler)}(t)):(f(t.elements.root,U),function(t){k(t.elements.modal,"click",t.__internal.modalClickHandler)}(t))}(t);break;case"maximizable":!function(t){t.get("maximizable")?p(t.elements.root,X):f(t.elements.root,X)}(t);break;case"pinnable":!function(t){t.get("pinnable")?p(t.elements.root,nt):f(t.elements.root,nt)}(t);break;case"movable":!function(t){t.get("movable")?(p(t.elements.root,Z),t.isOpen()&&fe(t)):(ee(t),f(t.elements.root,Z),t.isOpen()&&me(t))}(t);break;case"resizable":!function(t){t.get("resizable")?(p(t.elements.root,st),t.isOpen()&&ge(t)):(ue(t),f(t.elements.root,st),t.isOpen()&&ve(t))}(t);break;case"padding":n?f(t.elements.root,it):t.elements.root.className.indexOf(it)<0&&p(t.elements.root,it);break;case"overflow":n?f(t.elements.root,et):t.elements.root.className.indexOf(et)<0&&p(t.elements.root,et);break;case"transition":!function(t,e,i){"string"==typeof i&&f(t.elements.root,rt+i),p(t.elements.root,rt+e),t.elements.root.offsetWidth}(t,n,i);break;case"transitionOff":!function(t){t.get("transitionOff")?p(t.elements.root,lt):f(t.elements.root,lt)}(t)}"function"==typeof t.hooks.onupdate&&t.hooks.onupdate.call(t,e,i,n)}function vt(t,e,i,n,r){var s,o={op:void 0,items:[]};if(void 0===r&&"string"==typeof n)o.op="get",e.hasOwnProperty(n)?(o.found=!0,o.value=e[n]):(o.found=!1,o.value=void 0);else if(o.op="set","object"==typeof n){var a=n;for(var l in a)e.hasOwnProperty(l)?(e[l]!==a[l]&&(s=e[l],e[l]=a[l],i.call(t,l,s,a[l])),o.items.push({key:l,value:a[l],found:!0})):o.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof n)throw new Error("args must be a string or object");e.hasOwnProperty(n)?(e[n]!==r&&(s=e[n],e[n]=r,i.call(t,n,s,r)),o.items.push({key:n,value:r,found:!0})):o.items.push({key:n,value:r,found:!1})}return o}function _t(t){var e;Nt(t,(function(i){return e=!0!==t.get("invokeOnCloseOff")&&!0===i.invokeOnClose})),!e&&t.isOpen()&&t.close()}function yt(t,e){switch(t.srcElement||t.target){case e.elements.commands.pin:e.isPinned()?xt(e):bt(e);break;case e.elements.commands.maximize:e.isMaximized()?Et(e):wt(e);break;case e.elements.commands.close:_t(e)}return!1}function bt(t){t.set("pinned",!0)}function xt(t){t.set("pinned",!1)}function wt(t){D("onmaximize",t),p(t.elements.root,G),t.isOpen()&&ht(),D("onmaximized",t)}function Et(t){D("onrestore",t),f(t.elements.root,G),t.isOpen()&&ht(),D("onrestored",t)}function kt(t){var e=v();t.elements.modal.style.marginTop=g()+"px",t.elements.modal.style.marginLeft=e+"px",t.elements.modal.style.marginRight=-e+"px"}function St(t){var e=parseInt(t.elements.modal.style.marginTop,10),i=parseInt(t.elements.modal.style.marginLeft,10);if(t.elements.modal.style.marginTop="",t.elements.modal.style.marginLeft="",t.elements.modal.style.marginRight="",t.isOpen()){var n=0,r=0;""!==t.elements.dialog.style.top&&(n=parseInt(t.elements.dialog.style.top,10)),t.elements.dialog.style.top=n+(e-g())+"px",""!==t.elements.dialog.style.left&&(r=parseInt(t.elements.dialog.style.left,10)),t.elements.dialog.style.left=r+(i-v())+"px"}}function Pt(t){t.get("modal")||t.get("pinned")?St(t):kt(t)}var Ct=!1,Dt=0;function Tt(t,e){if(t.timeStamp-Dt>200&&(Dt=t.timeStamp)&&!Ct){var i=t.srcElement||t.target;!0===e.get("closableByDimmer")&&i===e.elements.modal&&_t(e)}Ct=!1}var At=0,Ot=!1;function Nt(t,e){if(Date.now()-At>200&&(At=Date.now()))for(var i=0;i<t.__internal.buttons.length;i+=1){var n=t.__internal.buttons[i];if(!n.element.disabled&&e(n)){var r=C(i,n);"function"==typeof t.callback&&t.callback.apply(t,[r]),!1===r.cancel&&t.close();break}}}function jt(t,e){var i=t.srcElement||t.target;Nt(e,(function(t){return t.element===i&&(Ot=!0)}))}function It(t){if(!Ot){var e=d[d.length-1],i=t.keyCode;return 0===e.__internal.buttons.length&&i===s&&!0===e.get("closable")?(_t(e),!1):n.indexOf(i)>-1?(Nt(e,(function(t){return t.key===i})),!1):void 0}Ot=!1}function Mt(t){var e=d[d.length-1],i=t.keyCode;if(i===l||i===c){for(var r=e.__internal.buttons,s=0;s<r.length;s+=1)if(document.activeElement===r[s].element)switch(i){case l:return void r[(s||r.length)-1].element.focus();case c:return void r[(s+1)%r.length].element.focus()}}else if(i<a+1&&i>o-1&&n.indexOf(i)>-1)return t.preventDefault(),t.stopPropagation(),Nt(e,(function(t){return t.key===i})),!1}function Lt(t,e){if(e)e.focus();else{var i=t.__internal.focus,n=i.element;switch(typeof i.element){case"number":t.__internal.buttons.length>i.element&&(n=!0===t.get("basic")?t.elements.reset[0]:t.__internal.buttons[i.element].element);break;case"string":n=t.elements.body.querySelector(i.element);break;case"function":n=i.element.call(t)}(!0===t.get("defaultFocusOff")||null==n&&0===t.__internal.buttons.length)&&(n=t.elements.reset[0]),n&&n.focus&&(n.focus(),i.select&&n.select&&n.select())}}function Rt(t,e){if(!e)for(var i=d.length-1;i>-1;i-=1)if(d[i].isModal()){e=d[i];break}if(e&&e.isModal()){var n,r=e.elements.reset[0],s=e.elements.reset[1],o=t.relatedTarget,a=e.elements.root.contains(o),l=t.srcElement||t.target;if(l===r&&!a||l===s&&o===r)return;l===s||l===document.body?n=r:l===r&&o===s?n=Ht(e):l===r&&a&&(n=Ht(e,!0)),Lt(e,n)}}function Ht(t,e){var i=[].slice.call(t.elements.dialog.querySelectorAll(h.tabbable));e&&i.reverse();for(var n=0;n<i.length;n+=1){var r=i[n];if(r.offsetParent||r.offsetWidth||r.offsetHeight||r.getClientRects().length)return r}}function Ft(t){var e=d[d.length-1];e&&t.shiftKey&&t.keyCode===u&&e.elements.reset[1].focus()}function $t(t,e){clearTimeout(e.__internal.timerIn),Lt(e),Ot=!1,D("onfocus",e),k(e.elements.dialog,S.type,e.__internal.transitionInHandler),f(e.elements.root,z)}function zt(t,e){clearTimeout(e.__internal.timerOut),k(e.elements.dialog,S.type,e.__internal.transitionOutHandler),ee(e),ue(e),e.isMaximized()&&!e.get("startMaximized")&&Et(e),"function"==typeof e.__internal.destroy&&e.__internal.destroy.apply(e)}var Bt=null,Wt=0,qt=0,Vt="pageX",Ut="pageY",Kt=null,Jt=!1,Qt=null;function Gt(t,e){var i=t[Vt]-Wt,n=t[Ut]-qt;Jt&&(n-=document.body.scrollTop),e.style.left=i+"px",e.style.top=n+"px"}function Xt(t,e){var i=t[Vt]-Wt,n=t[Ut]-qt;Jt&&(n-=document.body.scrollTop),e.style.left=Math.min(Kt.maxLeft,Math.max(Kt.minLeft,i))+"px",e.style.top=Jt?Math.min(Kt.maxTop,Math.max(Kt.minTop,n))+"px":Math.max(Kt.minTop,n)+"px"}function Yt(t,e){if(null===ie&&!e.isMaximized()&&e.get("movable")){var i,n=0,r=0;if("touchstart"===t.type?(t.preventDefault(),i=t.targetTouches[0],Vt="clientX",Ut="clientY"):0===t.button&&(i=t),i){var s=e.elements.dialog;if(p(s,V),s.style.left&&(n=parseInt(s.style.left,10)),s.style.top&&(r=parseInt(s.style.top,10)),Wt=i[Vt]-n,qt=i[Ut]-r,e.isModal()?qt+=e.elements.modal.scrollTop:e.isPinned()&&(qt-=document.body.scrollTop),e.get("moveBounded")){var o=s,a=-n,l=-r;do{a+=o.offsetLeft,l+=o.offsetTop}while(o=o.offsetParent);Kt={maxLeft:a,minLeft:-a,maxTop:document.documentElement.clientHeight-s.clientHeight-l,minTop:-l},Qt=Xt}else Kt=null,Qt=Gt;return D("onmove",e),Jt=!e.isModal()&&e.isPinned(),Bt=e,Qt(i,s),p(document.body,tt),!1}}}function Zt(t){var e;Bt&&("touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&Qt(e,Bt.elements.dialog))}function te(){if(Bt){var t=Bt;Bt=Kt=null,f(document.body,tt),f(t.elements.dialog,V),D("onmoved",t)}}function ee(t){Bt=null;var e=t.elements.dialog;e.style.left=e.style.top=""}var ie=null,ne=Number.Nan,re=0,se=0,oe=0;function ae(t,e){var i;if(!e.isMaximized()&&("touchstart"===t.type?(t.preventDefault(),i=t.targetTouches[0]):0===t.button&&(i=t),i)){D("onresize",e),ie=e,oe=e.elements.resizeHandle.offsetHeight/2;var n=e.elements.dialog;return p(n,V),ne=parseInt(n.style.left,10),n.style.height=n.offsetHeight+"px",n.style.minHeight=e.elements.header.offsetHeight+e.elements.footer.offsetHeight+"px",n.style.width=(re=n.offsetWidth)+"px","none"!==n.style.maxWidth&&(n.style.minWidth=(se=n.offsetWidth)+"px"),n.style.maxWidth="none",p(document.body,tt),!1}}function le(t){var e;ie&&("touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&function(t,e,i){var n,r,s=e,o=0,a=0;do{o+=s.offsetLeft,a+=s.offsetTop}while(s=s.offsetParent);!0===i?(n=t.pageX,r=t.pageY):(n=t.clientX,r=t.clientY);var l=m();if(l&&(n=document.body.offsetWidth-n,isNaN(ne)||(o=document.body.offsetWidth-o-e.offsetWidth)),e.style.height=r-a+oe+"px",e.style.width=n-o+oe+"px",!isNaN(ne)){var c=.5*Math.abs(e.offsetWidth-re);l&&(c*=-1),e.offsetWidth>re?e.style.left=ne+c+"px":e.offsetWidth>=se&&(e.style.left=ne-c+"px")}}(e,ie.elements.dialog,!ie.get("modal")&&!ie.get("pinned")))}function ce(){if(ie){var t=ie;ie=null,f(document.body,tt),f(t.elements.dialog,V),Ct=!0,D("onresized",t)}}function ue(t){ie=null;var e=t.elements.dialog;"none"===e.style.maxWidth&&(e.style.maxWidth=e.style.minWidth=e.style.width=e.style.height=e.style.minHeight=e.style.left="",ne=Number.Nan,re=se=oe=0)}function he(){for(var t=0;t<d.length;t+=1){var e=d[t];e.get("autoReset")&&(ee(e),ue(e))}}function de(t){E(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function pe(t){k(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function fe(t){E(t.elements.header,"mousedown",t.__internal.beginMoveHandler),E(t.elements.header,"touchstart",t.__internal.beginMoveHandler,!1,!1)}function me(t){k(t.elements.header,"mousedown",t.__internal.beginMoveHandler),k(t.elements.header,"touchstart",t.__internal.beginMoveHandler,!1,!1)}function ge(t){E(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),E(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler,!1,!1)}function ve(t){k(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),k(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler,!1,!1)}return{__init:ct,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(Y)<0},isMaximized:function(){return this.elements.root.className.indexOf(G)>-1},isPinned:function(){return this.elements.root.className.indexOf(at)<0},maximize:function(){return this.isMaximized()||wt(this),this},restore:function(){return this.isMaximized()&&Et(this),this},pin:function(){return this.isPinned()||bt(this),this},unpin:function(){return this.isPinned()&&xt(this),this},bringToFront:function(){return mt(0,this),this},moveTo:function(t,e){if(!isNaN(t)&&!isNaN(e)){D("onmove",this);var i=this.elements.dialog,n=i,r=0,s=0;i.style.left&&(r-=parseInt(i.style.left,10)),i.style.top&&(s-=parseInt(i.style.top,10));do{r+=n.offsetLeft,s+=n.offsetTop}while(n=n.offsetParent);var o=t-r,a=e-s;m()&&(o*=-1),i.style.left=o+"px",i.style.top=a+"px",D("onmoved",this)}return this},resizeTo:function(t,e){var i=parseFloat(t),n=parseFloat(e),r=/(\d*\.\d+|\d+)%/;if(!isNaN(i)&&!isNaN(n)&&!0===this.get("resizable")){D("onresize",this),(""+t).match(r)&&(i=i/100*document.documentElement.clientWidth),(""+e).match(r)&&(n=n/100*document.documentElement.clientHeight);var s=this.elements.dialog;"none"!==s.style.maxWidth&&(s.style.minWidth=(se=s.offsetWidth)+"px"),s.style.maxWidth="none",s.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",s.style.width=i+"px",s.style.height=n+"px",D("onresized",this)}return this},setting:function(t,e){var i=this,n=vt(this,this.__internal.options,(function(t,e,n){gt(i,t,e,n)}),t,e);if("get"===n.op)return n.found?n.value:void 0!==this.settings?vt(this,this.settings,this.settingUpdated||function(){},t,e).value:void 0;if("set"===n.op){if(n.items.length>0)for(var r=this.settingUpdated||function(){},s=0;s<n.items.length;s+=1){var o=n.items[s];o.found||void 0===this.settings||vt(this,this.settings,r,o.key,o.value)}return this}},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},setHeader:function(t){return"string"==typeof t?(_(this.elements.header),this.elements.header.innerHTML=t):t instanceof i.HTMLElement&&this.elements.header.firstChild!==t&&(_(this.elements.header),this.elements.header.appendChild(t)),this},setContent:function(t){return"string"==typeof t?(_(this.elements.content),this.elements.content.innerHTML=t):t instanceof i.HTMLElement&&this.elements.content.firstChild!==t&&(_(this.elements.content),this.elements.content.appendChild(t)),this},showModal:function(t){return this.show(!0,t)},show:function(n,s){if(ct(this),this.__internal.isOpen){ee(this),ue(this),p(this.elements.dialog,ot);var o=this;setTimeout((function(){f(o.elements.dialog,ot)}),200)}else{if(this.__internal.isOpen=!0,d.push(this),O.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",r="0"),"function"==typeof this.prepare&&this.prepare(),l=this,1===d.length&&(E(i,"resize",he),E(document.body,"keyup",It),E(document.body,"keydown",Mt),E(document.body,"focus",Rt),E(document.documentElement,"mousemove",Zt),E(document.documentElement,"touchmove",Zt,!1,!1),E(document.documentElement,"mouseup",te),E(document.documentElement,"touchend",te),E(document.documentElement,"mousemove",le),E(document.documentElement,"touchmove",le,!1,!1),E(document.documentElement,"mouseup",ce),E(document.documentElement,"touchend",ce)),E(l.elements.commands.container,"click",l.__internal.commandsClickHandler),E(l.elements.footer,"click",l.__internal.buttonsClickHandler),E(l.elements.reset[0],"focusin",l.__internal.resetHandler),E(l.elements.reset[0],"keydown",Ft),E(l.elements.reset[1],"focusin",l.__internal.resetHandler),Ot=!0,E(l.elements.dialog,S.type,l.__internal.transitionInHandler),l.get("modal")||de(l),l.get("resizable")&&ge(l),l.get("movable")&&fe(l),void 0!==n&&this.set("modal",n),t=v(),e=g(),ht(),"string"==typeof s&&""!==s&&(this.__internal.className=s,p(this.elements.root,s)),this.get("startMaximized")?this.maximize():this.isMaximized()&&Et(this),Pt(this),this.elements.root.removeAttribute("style"),f(this.elements.root,B),p(this.elements.root,z),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,S.supported?1e3:100),x){var a=this.elements.root;a.style.display="none",setTimeout((function(){a.style.display="block"}),0)}this.elements.root.offsetWidth,f(this.elements.root,Q),ut(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),D("onshow",this)}var l;return this},close:function(){var t;return this.__internal.isOpen&&!1!==D("onclosing",this)&&(t=this,1===d.length&&(k(i,"resize",he),k(document.body,"keyup",It),k(document.body,"keydown",Mt),k(document.body,"focus",Rt),k(document.documentElement,"mousemove",Zt),k(document.documentElement,"mouseup",te),k(document.documentElement,"mousemove",le),k(document.documentElement,"mouseup",ce)),k(t.elements.commands.container,"click",t.__internal.commandsClickHandler),k(t.elements.footer,"click",t.__internal.buttonsClickHandler),k(t.elements.reset[0],"focusin",t.__internal.resetHandler),k(t.elements.reset[0],"keydown",Ft),k(t.elements.reset[1],"focusin",t.__internal.resetHandler),E(t.elements.dialog,S.type,t.__internal.transitionOutHandler),t.get("modal")||pe(t),t.get("movable")&&me(t),t.get("resizable")&&ve(t),f(this.elements.root,z),p(this.elements.root,B),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,S.supported?1e3:100),p(this.elements.root,Q),this.elements.modal.offsetWidth,O.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&f(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),D("onclose",this),d.splice(d.indexOf(this),1),this.__internal.isOpen=!1,ht()),d.length||"0"!==r||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return O.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){b(this,ct)},this.close()):this.__internal.destroy||b(this,ct)),this}}}(),A=function(){var t,e=[],n=h.notifier.classes,r=n.base;function s(e){e.__internal||(e.__internal={position:O.defaults.notifier.position,delay:O.defaults.notifier.delay},t=document.createElement("DIV"),("transitionOff"in h.notifier?h.notifier.transitionOff:h.transitionOff)&&(r=n.base+" ajs-no-transition"),a(e));t.parentNode!==document.body&&document.body.appendChild(t)}function o(t){t.__internal.pushed=!0,e.push(t)}function a(e){switch(t.className=r,e.__internal.position){case"top-right":p(t,n.top+" "+n.right);break;case"top-left":p(t,n.top+" "+n.left);break;case"top-center":p(t,n.top+" "+n.center);break;case"bottom-left":p(t,n.bottom+" "+n.left);break;case"bottom-center":p(t,n.bottom+" "+n.center);break;default:case"bottom-right":p(t,n.bottom+" "+n.right)}}function l(r,s){function a(t,e){e.__internal.closeButton&&"true"!==t.target.getAttribute("data-close")||e.dismiss(!0)}function l(e,i){k(i.element,S.type,l),t.removeChild(i.element)}function c(t){clearTimeout(t.__internal.timer),clearTimeout(t.__internal.transitionTimeout)}return function(t){return t.__internal||(t.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},t.__internal.clickHandler=P(t,a),t.__internal.transitionEndHandler=P(t,l)),t}({element:r,push:function(e,i){if(!this.__internal.pushed){var r,s;switch(o(this),c(this),arguments.length){case 0:s=this.__internal.delay;break;case 1:"number"==typeof e?s=e:(r=e,s=this.__internal.delay);break;case 2:r=e,s=i}return this.__internal.closeButton=O.defaults.notifier.closeButton,void 0!==r&&this.setContent(r),A.__internal.position.indexOf("top")<0?t.appendChild(this.element):t.insertBefore(this.element,t.firstChild),this.element.offsetWidth,p(this.element,n.visible),E(this.element,"click",this.__internal.clickHandler),this.delay(s)}return this},ondismiss:function(){},callback:s,dismiss:function(i){var r;return this.__internal.pushed&&(c(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(k(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===t&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,S.supported?1e3:100),f(this.element,n.visible),"function"==typeof this.callback&&this.callback.call(this,i)),r=this,e.splice(e.indexOf(r),1),r.__internal.pushed=!1)),this},delay:function(t){if(c(this),this.__internal.delay=void 0===t||isNaN(+t)?A.__internal.delay:+t,this.__internal.delay>0){var e=this;this.__internal.timer=setTimeout((function(){e.dismiss()}),1e3*this.__internal.delay)}return this},setContent:function(t){if("string"==typeof t?(_(this.element),this.element.innerHTML=t):t instanceof i.HTMLElement&&this.element.firstChild!==t&&(_(this.element),this.element.appendChild(t)),this.__internal.closeButton){var e=document.createElement("span");p(e,n.close),e.setAttribute("data-close",!0),this.element.appendChild(e)}return this},dismissOthers:function(){return A.dismissAll(this),this}})}return{setting:function(t,e){if(s(this),void 0===e)return this.__internal[t];switch(t){case"position":this.__internal.position=e,a(this);break;case"delay":this.__internal.delay=e}return this},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},create:function(t,e){s(this);var i=document.createElement("div");return i.className=n.message+("string"==typeof t&&""!==t?" "+n.prefix+t:""),l(i,e)},dismissAll:function(t){for(var i=e.slice(0),n=0;n<i.length;n+=1){var r=i[n];void 0!==t&&t===r||r.dismiss()}}}}();var O=new function(){var t={};function e(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function i(e){var i=t[e].dialog;return i&&"function"==typeof i.__init&&i.__init(i),i}return{defaults:h,dialog:function(n,r,s,o){if("function"!=typeof r)return i(n);if(this.hasOwnProperty(n))throw new Error("alertify.dialog: name already exists");var a=function(i,n,r,s){var o={dialog:null,factory:n};return void 0!==s&&(o.factory=function(){return e(new t[s].factory,new n)}),r||(o.dialog=e(new o.factory,T)),t[i]=o}(n,r,s,o);this[n]=s?function(){if(0===arguments.length)return a.dialog;var t=e(new a.factory,T);return t&&"function"==typeof t.__init&&t.__init(t),t.main.apply(t,arguments),t.show.apply(t)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var t=a.dialog;return t.main.apply(a.dialog,arguments),t.show.apply(a.dialog)}},closeAll:function(t){for(var e=d.slice(0),i=0;i<e.length;i+=1){var n=e[i];void 0!==t&&t===n||n.close()}},setting:function(t,e,n){if("notifier"===t)return A.setting(e,n);var r=i(t);return r?r.setting(e,n):void 0},set:function(t,e,i){return this.setting(t,e,i)},get:function(t,e){return this.setting(t,e)},notify:function(t,e,i,n){return A.create(e,n).push(t,i)},message:function(t,e,i){return A.create(null,i).push(t,e)},success:function(t,e,i){return A.create("success",i).push(t,e)},error:function(t,e,i){return A.create("error",i).push(t,e)},warning:function(t,e,i){return A.create("warning",i).push(t,e)},dismissAll:function(){A.dismissAll()}}};O.dialog("alert",(function(){return{main:function(t,e,i){var n,r,s;switch(arguments.length){case 1:r=t;break;case 2:"function"==typeof e?(r=t,s=e):(n=t,r=e);break;case 3:n=t,r=e,s=i}return this.set("title",n),this.set("message",r),this.set("onok",s),this},setup:function(){return{buttons:[{text:O.defaults.glossary.ok,key:s,invokeOnClose:!0,className:O.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(t,e,i){switch(t){case"message":this.setMessage(i);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i)}},callback:function(t){if("function"==typeof this.get("onok")){var e=this.get("onok").call(this,t);void 0!==e&&(t.cancel=!e)}}}})),O.dialog("confirm",(function(){var t={timer:null,index:null,text:null,duration:null,task:function(i,n){if(n.isOpen()){if(n.__internal.buttons[t.index].element.innerHTML=t.text+" (&#8207;"+t.duration+"&#8207;) ",t.duration-=1,-1===t.duration){e(n);var r=n.__internal.buttons[t.index],s=C(t.index,r);"function"==typeof n.callback&&n.callback.apply(n,[s]),!1!==s.close&&n.close()}}else e(n)}};function e(e){null!==t.timer&&(clearInterval(t.timer),t.timer=null,e.__internal.buttons[t.index].element.innerHTML=t.text)}function i(i,n,r){e(i),t.duration=r,t.index=n,t.text=i.__internal.buttons[n].element.innerHTML,t.timer=setInterval(P(i,t.task),1e3),t.task(null,i)}return{main:function(t,e,i,n){var r,s,o,a;switch(arguments.length){case 1:s=t;break;case 2:s=t,o=e;break;case 3:s=t,o=e,a=i;break;case 4:r=t,s=e,o=i,a=n}return this.set("title",r),this.set("message",s),this.set("onok",o),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:O.defaults.glossary.ok,key:r,className:O.defaults.theme.ok},{text:O.defaults.glossary.cancel,key:s,invokeOnClose:!0,className:O.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(t,e,i){switch(t){case"message":this.setMessage(i);break;case"labels":"ok"in i&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=i.ok,this.__internal.buttons[0].element.innerHTML=i.ok),"cancel"in i&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=i.cancel,this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===i?0:1}},callback:function(t){var i;switch(e(this),t.index){case 0:"function"==typeof this.get("onok")&&void 0!==(i=this.get("onok").call(this,t))&&(t.cancel=!i);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(i=this.get("oncancel").call(this,t))&&(t.cancel=!i)}},autoOk:function(t){return i(this,0,t),this},autoCancel:function(t){return i(this,1,t),this}}})),O.dialog("prompt",(function(){var t=document.createElement("INPUT"),e=document.createElement("P");return{main:function(t,e,i,n,r){var s,o,a,l,c;switch(arguments.length){case 1:o=t;break;case 2:o=t,a=e;break;case 3:o=t,a=e,l=i;break;case 4:o=t,a=e,l=i,c=n;break;case 5:s=t,o=e,a=i,l=n,c=r}return this.set("title",s),this.set("message",o),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:O.defaults.glossary.ok,key:r,className:O.defaults.theme.ok},{text:O.defaults.glossary.cancel,key:s,invokeOnClose:!0,className:O.defaults.theme.cancel}],focus:{element:t,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){t.className=O.defaults.theme.input,t.setAttribute("type","text"),t.value=this.get("value"),this.elements.content.appendChild(e),this.elements.content.appendChild(t)},prepare:function(){},setMessage:function(t){"string"==typeof t?(_(e),e.innerHTML=t):t instanceof i.HTMLElement&&e.firstChild!==t&&(_(e),e.appendChild(t))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(e,i,n){switch(e){case"message":this.setMessage(n);break;case"value":t.value=n;break;case"type":switch(n){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":t.type=n;break;default:t.type="text"}break;case"labels":n.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n.ok),n.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(e){var i;switch(e.index){case 0:this.settings.value=t.value,"function"==typeof this.get("onok")&&void 0!==(i=this.get("onok").call(this,e,this.settings.value))&&(e.cancel=!i);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(i=this.get("oncancel").call(this,e))&&(e.cancel=!i),e.cancel||(t.value=this.settings.value)}}}})),"object"==typeof t.exports?t.exports=O:void 0===(n=function(){return O}.apply(e,[]))||(t.exports=n)}("undefined"!=typeof window?window:this)},function(t,e,i){var n,r,s;r=[i(2)],void 0===(s="function"==typeof(n=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){"use strict";e.__esModule=!0,e.extend=a,e.indexOf=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}if(!s.test(t))return t;return t.replace(r,o)},e.isEmpty=function(t){return!t&&0!==t||!(!u(t)||0!==t.length)},e.createFrame=function(t){var e=a({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,s=/[&<>"'`=]/;function o(t){return n[t]}function a(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}var l=Object.prototype.toString;e.toString=l;var c=function(t){return"function"==typeof t};c(/x/)&&(e.isFunction=c=function(t){return"function"==typeof t&&"[object Function]"===l.call(t)}),e.isFunction=c;var u=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===l.call(t)};e.isArray=u},function(t,e,i){"use strict";e.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(t,e){var i=e&&e.loc,s=void 0,o=void 0,a=void 0,l=void 0;i&&(s=i.start.line,o=i.end.line,a=i.start.column,l=i.end.column,t+=" - "+s+":"+a);for(var c=Error.prototype.constructor.call(this,t),u=0;u<n.length;u++)this[n[u]]=c[n[u]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{i&&(this.lineNumber=s,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=a,this.endColumn=l))}catch(t){}}r.prototype=new Error,e.default=r,t.exports=e.default},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){var e,i=0,n=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var n,r,s;for(s=0;null!=(r=i[s]);s++)try{(n=t._data(r,"events"))&&n.remove&&t(r).triggerHandler("remove")}catch(t){}e(i)}),t.widget=function(e,i,n){var r,s,o,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},r=t[l][e],s=t[l][e]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},t.extend(s,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(n,(function(e,n){t.isFunction(n)?a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function r(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}():a[e]=n})),s.prototype=t.widget.extend(o,{widgetEventPrefix:r&&o.widgetEventPrefix||e},a,{constructor:s,namespace:l,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)})),delete r._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var i,r,s=n.call(arguments,1),o=0,a=s.length;o<a;o++)for(i in s[o])r=s[o][i],s[o].hasOwnProperty(i)&&void 0!==r&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName||e;t.fn[e]=function(s){var o="string"==typeof s,a=n.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each((function(){var i,n=t.data(this,r);return"instance"===s?(l=n,!1):n?t.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+s+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")})):l=void 0:(a.length&&(s=t.widget.extend.apply(null,[s].concat(a))),this.each((function(){var e=t.data(this,r);e?(e.option(s||{}),e._init&&e._init()):t.data(this,r,new i(s,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,r,s,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},n=e.split("."),e=n.shift(),n.length){for(r=o[e]=t.widget.extend({},this.options[e]),s=0;s<n.length-1;s++)r[n[s]]=r[n[s]]||{},r=r[n[s]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,r;for(i in e)r=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&r&&r.length&&(n=t(r.get()),this._removeClass(r,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function r(r,s){var o,a;for(a=0;a<r.length;a++)o=n.classesElementLookup[r[a]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),n.classesElementLookup[r[a]]=o,i.push(r[a]),s&&e.classes[r[a]]&&i.push(e.classes[r[a]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,r){-1!==t.inArray(e.target,r)&&(i.classesElementLookup[n]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof t||null===t,s={extra:r?e:i,keys:r?t:e,element:r?this.element:t,add:n};return s.element.toggleClass(this._classes(s),n),this},_on:function(e,i,n){var r,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,(function(n,o){function a(){if(e||!0!==s.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?r.on(c,u,a):i.on(c,a)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var r,s,o=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,n),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,r,s){var o;"string"==typeof r&&(r={effect:r});var a=r?!0===r||"number"==typeof r?i:r.effect||i:e;"number"==typeof(r=r||{})&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),o&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,s):n.queue((function(i){t(this)[e](),s&&s.call(n[0]),i()}))}})),t.widget})?n.apply(e,r):n)||(t.exports=s)},function(t){t.exports=JSON.parse('{"cssClass":"textae-editor__relation__label","id":"label"}')},function(t,e,i){!function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0},o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},u=function(){function t(e){n(this,t),this.selfOptions=e||{},this.pipes={}}return r(t,[{key:"options",value:function(t){return t&&(this.selfOptions=t),this.selfOptions}},{key:"pipe",value:function(t,e){var i=e;if("string"==typeof t){if(void 0===i)return this.pipes[t];this.pipes[t]=i}if(t&&t.name){if(i=t,i.processor===this)return i;this.pipes[i.name]=i}return i.processor=this,i}},{key:"process",value:function(t,e){var i=t;i.options=this.options();for(var n=e||t.pipe||"default",r=void 0,s=void 0;n;)void 0!==i.nextAfterChildren&&(i.next=i.nextAfterChildren,i.nextAfterChildren=null),"string"==typeof n&&(n=this.pipe(n)),n.process(i),s=i,r=n,n=null,i&&i.next&&(i=i.next,n=s.nextPipe||i.pipe||r);return i.hasResult?i.result:void 0}}]),t}(),h=function(){function t(e){n(this,t),this.name=e,this.filters=[]}return r(t,[{key:"process",value:function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,n=this.filters.length,r=t,s=0;s<n;s++){var o=this.filters[s];if(e&&this.log("filter: "+o.filterName),o(r),"object"===(void 0===r?"undefined":i(r))&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}},{key:"log",value:function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)}},{key:"append",value:function(){var t;return(t=this.filters).push.apply(t,arguments),this}},{key:"prepend",value:function(){var t;return(t=this.filters).unshift.apply(t,arguments),this}},{key:"indexOf",value:function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++)if(this.filters[e].filterName===t)return e;throw new Error("filter not found: "+t)}},{key:"list",value:function(){return this.filters.map((function(t){return t.filterName}))}},{key:"after",value:function(t){var e=this.indexOf(t),i=Array.prototype.slice.call(arguments,1);if(!i.length)throw new Error("a filter is required");return i.unshift(e+1,0),Array.prototype.splice.apply(this.filters,i),this}},{key:"before",value:function(t){var e=this.indexOf(t),i=Array.prototype.slice.call(arguments,1);if(!i.length)throw new Error("a filter is required");return i.unshift(e,0),Array.prototype.splice.apply(this.filters,i),this}},{key:"replace",value:function(t){var e=this.indexOf(t),i=Array.prototype.slice.call(arguments,1);if(!i.length)throw new Error("a filter is required");return i.unshift(e,1),Array.prototype.splice.apply(this.filters,i),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return this.filters.splice(e,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(t){if(!1!==t){if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var i=new Error(e.name+" failed");throw i.noResult=!0,i}},this}}else this.resultCheck=null}}]),t}(),d=function(){function t(){n(this,t)}return r(t,[{key:"setResult",value:function(t){return this.result=t,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(t,e){return"string"==typeof t||t instanceof h?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this}},{key:"push",value:function(t,e){return t.parent=this,void 0!==e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this}}]),t}(),p="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array};function f(t){if("object"!==(void 0===t?"undefined":i(t)))return t;if(null===t)return null;if(p(t))return t.map(f);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e=/^\/(.*)\/([gimyu]*)$/.exec(t.toString()),new RegExp(e[1],e[2]);var e,n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=f(t[r]));return n}var m=function(t){function e(t,i){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.left=t,r.right=i,r.pipe="diff",r}return o(e,t),r(e,[{key:"setResult",value:function(t){if(this.options.cloneDiffValues&&"object"===(void 0===t?"undefined":i(t))){var e="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:f;"object"===i(t[0])&&(t[0]=e(t[0])),"object"===i(t[1])&&(t[1]=e(t[1]))}return d.prototype.setResult.apply(this,arguments)}}]),e}(d),g=function(t){function e(t,i){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.left=t,r.delta=i,r.pipe="patch",r}return o(e,t),e}(d),v=function(t){function e(t){n(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.delta=t,i.pipe="reverse",i}return o(e,t),e}(d),_="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},y=function(t){if(t.left!==t.right)if(void 0!==t.left)if(void 0!==t.right){if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");t.leftType=null===t.left?"null":i(t.left),t.rightType=null===t.right?"null":i(t.right),t.leftType===t.rightType&&"boolean"!==t.leftType&&"number"!==t.leftType?("object"===t.leftType&&(t.leftIsArray=_(t.left)),"object"===t.rightType&&(t.rightIsArray=_(t.right)),t.leftIsArray===t.rightIsArray?t.left instanceof RegExp&&(t.right instanceof RegExp?t.setResult([t.left.toString(),t.right.toString()]).exit():t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()}else t.setResult([t.left,0,0]).exit();else{if("function"==typeof t.right)throw new Error("functions are not supported");t.setResult([t.right]).exit()}else t.setResult(void 0).exit()};y.filterName="trivial";var b=function(t){if(void 0!==t.delta){if(t.nested=!_(t.delta),!t.nested)if(1!==t.delta.length)if(2!==t.delta.length)3===t.delta.length&&0===t.delta[2]&&t.setResult(void 0).exit();else{if(t.left instanceof RegExp){var e=/^\/(.*)\/([gimyu]+)$/.exec(t.delta[1]);if(e)return void t.setResult(new RegExp(e[1],e[2])).exit()}t.setResult(t.delta[1]).exit()}else t.setResult(t.delta[0]).exit()}else t.setResult(t.left).exit()};b.filterName="trivial";var x=function(t){void 0!==t.delta?(t.nested=!_(t.delta),t.nested||(1!==t.delta.length?2!==t.delta.length?3===t.delta.length&&0===t.delta[2]&&t.setResult([t.delta[0]]).exit():t.setResult([t.delta[1],t.delta[0]]).exit():t.setResult([t.delta[0],0,0]).exit())):t.setResult(t.delta).exit()};function w(t){if(t&&t.children){for(var e=t.children.length,i=void 0,n=t.result,r=0;r<e;r++)void 0!==(i=t.children[r]).result&&((n=n||{})[i.childName]=i.result);n&&t.leftIsArray&&(n._t="a"),t.setResult(n).exit()}}function E(t){if(!t.leftIsArray&&"object"===t.leftType){var e=void 0,i=void 0,n=t.options.propertyFilter;for(e in t.left)Object.prototype.hasOwnProperty.call(t.left,e)&&(n&&!n(e,t)||(i=new m(t.left[e],t.right[e]),t.push(i,e)));for(e in t.right)Object.prototype.hasOwnProperty.call(t.right,e)&&(n&&!n(e,t)||void 0===t.left[e]&&(i=new m(void 0,t.right[e]),t.push(i,e)));t.children&&0!==t.children.length?t.exit():t.setResult(void 0).exit()}}x.filterName="trivial",w.filterName="collectChildren",E.filterName="objects";var k=function(t){if(t.nested&&!t.delta._t){var e=void 0,i=void 0;for(e in t.delta)i=new g(t.left[e],t.delta[e]),t.push(i,e);t.exit()}};k.filterName="objects";var S=function(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,i=void 0,n=0;n<e;n++)i=t.children[n],Object.prototype.hasOwnProperty.call(t.left,i.childName)&&void 0===i.result?delete t.left[i.childName]:t.left[i.childName]!==i.result&&(t.left[i.childName]=i.result);t.setResult(t.left).exit()}};S.filterName="collectChildren";var P=function(t){if(t.nested&&!t.delta._t){var e=void 0,i=void 0;for(e in t.delta)i=new v(t.delta[e]),t.push(i,e);t.exit()}};function C(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,i=void 0,n={},r=0;r<e;r++)n[(i=t.children[r]).childName]!==i.result&&(n[i.childName]=i.result);t.setResult(n).exit()}}P.filterName="objects",C.filterName="collectChildren";var D=function(t,e,i,n){return t[i]===e[n]},T=function(t,e,i,n){var r=n||{},s=function(t,e,i,n){for(var r=e.length,s=i.length,o={sequence:[],indices1:[],indices2:[]};0!==r&&0!==s;)t.match(e,i,r-1,s-1,n)?(o.sequence.unshift(e[r-1]),o.indices1.unshift(r-1),o.indices2.unshift(s-1),--r,--s):t[r][s-1]>t[r-1][s]?--s:--r;return o}(function(t,e,i,n){var r=t.length,s=e.length,o=void 0,a=void 0,l=[r+1];for(o=0;o<r+1;o++)for(l[o]=[s+1],a=0;a<s+1;a++)l[o][a]=0;for(l.match=i,o=1;o<r+1;o++)for(a=1;a<s+1;a++)i(t,e,o-1,a-1,n)?l[o][a]=l[o-1][a-1]+1:l[o][a]=Math.max(l[o-1][a],l[o][a-1]);return l}(t,e,i||D,r),t,e,r);return"string"==typeof t&&"string"==typeof e&&(s.sequence=s.sequence.join("")),s},A="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},O="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1};function N(t,e,n,r,s){var o=t[n],a=e[r];if(o===a)return!0;if("object"!==(void 0===o?"undefined":i(o))||"object"!==(void 0===a?"undefined":i(a)))return!1;var l=s.objectHash;if(!l)return s.matchByPosition&&n===r;var c=void 0,u=void 0;return"number"==typeof n?(s.hashCache1=s.hashCache1||[],void 0===(c=s.hashCache1[n])&&(s.hashCache1[n]=c=l(o,n))):c=l(o),void 0!==c&&("number"==typeof r?(s.hashCache2=s.hashCache2||[],void 0===(u=s.hashCache2[r])&&(s.hashCache2[r]=u=l(a,r))):u=l(a),void 0!==u&&c===u)}var j=function(t){if(t.leftIsArray){var e={objectHash:t.options&&t.options.objectHash,matchByPosition:t.options&&t.options.matchByPosition},i=0,n=0,r=void 0,s=void 0,o=void 0,a=t.left,l=t.right,c=a.length,u=l.length,h=void 0;for(c>0&&u>0&&!e.objectHash&&"boolean"!=typeof e.matchByPosition&&(e.matchByPosition=!function(t,e,i,n){for(var r=0;r<i;r++)for(var s=t[r],o=0;o<n;o++){var a=e[o];if(r!==o&&s===a)return!0}}(a,l,c,u));i<c&&i<u&&N(a,l,i,i,e);)r=i,h=new m(t.left[r],t.right[r]),t.push(h,r),i++;for(;n+i<c&&n+i<u&&N(a,l,c-1-n,u-1-n,e);)s=c-1-n,o=u-1-n,h=new m(t.left[s],t.right[o]),t.push(h,o),n++;var d=void 0;if(i+n!==c)if(i+n!==u){delete e.hashCache1,delete e.hashCache2;var p=a.slice(i,c-n),f=l.slice(i,u-n),g=T(p,f,N,e),v=[];for(d=d||{_t:"a"},r=i;r<c-n;r++)O(g.indices1,r-i)<0&&(d["_"+r]=[a[r],0,0],v.push(r));var _=!0;t.options&&t.options.arrays&&!1===t.options.arrays.detectMove&&(_=!1);var y=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(y=!0);var b=v.length;for(r=i;r<u-n;r++){var x=O(g.indices2,r-i);if(x<0){var w=!1;if(_&&b>0)for(var E=0;E<b;E++)if(N(p,f,(s=v[E])-i,r-i,e)){d["_"+s].splice(1,2,r,3),y||(d["_"+s][0]=""),o=r,h=new m(t.left[s],t.right[o]),t.push(h,o),v.splice(E,1),w=!0;break}w||(d[r]=[l[r]])}else s=g.indices1[x]+i,o=g.indices2[x]+i,h=new m(t.left[s],t.right[o]),t.push(h,o)}t.setResult(d).exit()}else{for(d=d||{_t:"a"},r=i;r<c-n;r++)d["_"+r]=[a[r],0,0];t.setResult(d).exit()}else{if(c===u)return void t.setResult(void 0).exit();for(d=d||{_t:"a"},r=i;r<u-n;r++)d[r]=[l[r]];t.setResult(d).exit()}}};j.filterName="arrays";var I=function(t,e){return t-e},M=function(t){return function(e,i){return e[t]-i[t]}},L=function(t){if(t.nested&&"a"===t.delta._t){var e=void 0,i=void 0,n=t.delta,r=t.left,s=[],o=[],a=[];for(e in n)if("_t"!==e)if("_"===e[0]){if(0!==n[e][2]&&3!==n[e][2])throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+n[e][2]);s.push(parseInt(e.slice(1),10))}else 1===n[e].length?o.push({index:parseInt(e,10),value:n[e][0]}):a.push({index:parseInt(e,10),delta:n[e]});for(e=(s=s.sort(I)).length-1;e>=0;e--){var l=n["_"+(i=s[e])],c=r.splice(i,1)[0];3===l[2]&&o.push({index:l[1],value:c})}var u=(o=o.sort(M("index"))).length;for(e=0;e<u;e++){var h=o[e];r.splice(h.index,0,h.value)}var d=a.length,p=void 0;if(d>0)for(e=0;e<d;e++){var f=a[e];p=new g(t.left[f.index],f.delta),t.push(p,f.index)}t.children?t.exit():t.setResult(t.left).exit()}};L.filterName="arrays";var R=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,i=void 0,n=0;n<e;n++)i=t.children[n],t.left[i.childName]=i.result;t.setResult(t.left).exit()}};R.filterName="arraysCollectChildren";var H=function(t){if(t.nested){if("a"===t.delta._t){var e=void 0,i=void 0;for(e in t.delta)"_t"!==e&&(i=new v(t.delta[e]),t.push(i,e));t.exit()}}else 3===t.delta[2]&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),3]).exit())};H.filterName="arrays";var F=function(t,e,i){if("string"==typeof e&&"_"===e[0])return parseInt(e.substr(1),10);if(A(i)&&0===i[2])return"_"+e;var n=+e;for(var r in t){var s=t[r];if(A(s))if(3===s[2]){var o=parseInt(r.substr(1),10),a=s[1];if(a===+e)return o;o<=n&&a>n?n++:o>=n&&a<n&&n--}else 0===s[2]?parseInt(r.substr(1),10)<=n&&n++:1===s.length&&r<=n&&n--}return n};function $(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,i=void 0,n={_t:"a"},r=0;r<e;r++){var s=(i=t.children[r]).newName;void 0===s&&(s=F(t.delta,i.childName,i.result)),n[s]!==i.result&&(n[s]=i.result)}t.setResult(n).exit()}}$.filterName="arraysCollectChildren";var z=function(t){t.left instanceof Date?(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?t.setResult([t.left,t.right]):t.setResult(void 0):t.setResult([t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};z.filterName="dates";var B=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}e.prototype.diff_main=function(t,e,i,n){void 0===n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=n;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===i&&(i=!0);var s=i,o=this.diff_commonPrefix(t,e),a=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var c=this.diff_compute_(t,e,s,r);return a&&c.unshift([0,a]),l&&c.push([0,l]),this.diff_cleanupMerge(c),c},e.prototype.diff_compute_=function(t,e,i,n){var r;if(!t)return[[1,e]];if(!e)return[[-1,t]];var s=t.length>e.length?t:e,o=t.length>e.length?e:t,a=s.indexOf(o);if(-1!=a)return r=[[1,s.substring(0,a)],[0,o],[1,s.substring(a+o.length)]],t.length>e.length&&(r[0][0]=r[2][0]=-1),r;if(1==o.length)return[[-1,t],[1,e]];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],u=l[1],h=l[2],d=l[3],p=l[4],f=this.diff_main(c,h,i,n),m=this.diff_main(u,d,i,n);return f.concat([[0,p]],m)}return i&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,n):this.diff_bisect_(t,e,n)},e.prototype.diff_lineMode_=function(t,e,i){t=(u=this.diff_linesToChars_(t,e)).chars1,e=u.chars2;var n=u.lineArray,r=this.diff_main(t,e,!1,i);this.diff_charsToLines_(r,n),this.diff_cleanupSemantic(r),r.push([0,""]);for(var s=0,o=0,a=0,l="",c="";s<r.length;){switch(r[s][0]){case 1:a++,c+=r[s][1];break;case-1:o++,l+=r[s][1];break;case 0:if(o>=1&&a>=1){r.splice(s-o-a,o+a),s=s-o-a;for(var u,h=(u=this.diff_main(l,c,!1,i)).length-1;h>=0;h--)r.splice(s,0,u[h]);s+=u.length}a=0,o=0,l="",c=""}s++}return r.pop(),r},e.prototype.diff_bisect_=function(t,e,i){for(var n=t.length,r=e.length,s=Math.ceil((n+r)/2),o=s,a=2*s,l=new Array(a),c=new Array(a),u=0;u<a;u++)l[u]=-1,c[u]=-1;l[o+1]=0,c[o+1]=0;for(var h=n-r,d=h%2!=0,p=0,f=0,m=0,g=0,v=0;v<s&&!((new Date).getTime()>i);v++){for(var _=-v+p;_<=v-f;_+=2){for(var y=o+_,b=(S=_==-v||_!=v&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1)-_;S<n&&b<r&&t.charAt(S)==e.charAt(b);)S++,b++;if(l[y]=S,S>n)f+=2;else if(b>r)p+=2;else if(d&&(E=o+h-_)>=0&&E<a&&-1!=c[E]&&S>=(w=n-c[E]))return this.diff_bisectSplit_(t,e,S,b,i)}for(var x=-v+m;x<=v-g;x+=2){for(var w,E=o+x,k=(w=x==-v||x!=v&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-x;w<n&&k<r&&t.charAt(n-w-1)==e.charAt(r-k-1);)w++,k++;if(c[E]=w,w>n)g+=2;else if(k>r)m+=2;else if(!d){var S;if((y=o+h-x)>=0&&y<a&&-1!=l[y])if(b=o+(S=l[y])-y,S>=(w=n-w))return this.diff_bisectSplit_(t,e,S,b,i)}}}return[[-1,t],[1,e]]},e.prototype.diff_bisectSplit_=function(t,e,i,n,r){var s=t.substring(0,i),o=e.substring(0,n),a=t.substring(i),l=e.substring(n),c=this.diff_main(s,o,!1,r),u=this.diff_main(a,l,!1,r);return c.concat(u)},e.prototype.diff_linesToChars_=function(t,e){var i=[],n={};function r(t){for(var e="",r=0,s=-1,o=i.length;s<t.length-1;){-1==(s=t.indexOf("\n",r))&&(s=t.length-1);var a=t.substring(r,s+1);r=s+1,(n.hasOwnProperty?n.hasOwnProperty(a):void 0!==n[a])?e+=String.fromCharCode(n[a]):(e+=String.fromCharCode(o),n[a]=o,i[o++]=a)}return e}return i[0]="",{chars1:r(t),chars2:r(e),lineArray:i}},e.prototype.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i][1],r=[],s=0;s<n.length;s++)r[s]=e[n.charCodeAt(s)];t[i][1]=r.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(s,r)==e.substring(s,r)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return r},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return r},e.prototype.diff_commonOverlap_=function(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;i>n?t=t.substring(i-n):i<n&&(e=e.substring(0,i));var r=Math.min(i,n);if(t==e)return r;for(var s=0,o=1;;){var a=t.substring(r-o),l=e.indexOf(a);if(-1==l)return s;o+=l,0!=l&&t.substring(r-o)!=e.substring(0,o)||(s=o,o++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,n=t.length>e.length?e:t;if(i.length<4||2*n.length<i.length)return null;var r=this;function s(t,e,i){for(var n,s,o,a,l=t.substring(i,i+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(l,c+1));){var h=r.diff_commonPrefix(t.substring(i),e.substring(c)),d=r.diff_commonSuffix(t.substring(0,i),e.substring(0,c));u.length<d+h&&(u=e.substring(c-d,c)+e.substring(c,c+h),n=t.substring(0,i-d),s=t.substring(i+h),o=e.substring(0,c-d),a=e.substring(c+h))}return 2*u.length>=t.length?[n,s,o,a,u]:null}var o,a,l,c,u,h=s(i,n,Math.ceil(i.length/4)),d=s(i,n,Math.ceil(i.length/2));return h||d?(o=d?h&&h[4].length>d[4].length?h:d:h,t.length>e.length?(a=o[0],l=o[1],c=o[2],u=o[3]):(c=o[0],u=o[1],a=o[2],l=o[3]),[a,l,c,u,o[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var e=!1,i=[],n=0,r=null,s=0,o=0,a=0,l=0,c=0;s<t.length;)0==t[s][0]?(i[n++]=s,o=l,a=c,l=0,c=0,r=t[s][1]):(1==t[s][0]?l+=t[s][1].length:c+=t[s][1].length,r&&r.length<=Math.max(o,a)&&r.length<=Math.max(l,c)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,s=--n>0?i[n-1]:-1,o=0,a=0,l=0,c=0,r=null,e=!0)),s++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),s=1;s<t.length;){if(-1==t[s-1][0]&&1==t[s][0]){var u=t[s-1][1],h=t[s][1],d=this.diff_commonOverlap_(u,h),p=this.diff_commonOverlap_(h,u);d>=p?(d>=u.length/2||d>=h.length/2)&&(t.splice(s,0,[0,h.substring(0,d)]),t[s-1][1]=u.substring(0,u.length-d),t[s+1][1]=h.substring(d),s++):(p>=u.length/2||p>=h.length/2)&&(t.splice(s,0,[0,u.substring(0,p)]),t[s-1][0]=1,t[s-1][1]=h.substring(0,h.length-p),t[s+1][0]=-1,t[s+1][1]=u.substring(p),s++),s++}s++}},e.prototype.diff_cleanupSemanticLossless=function(t){function i(t,i){if(!t||!i)return 6;var n=t.charAt(t.length-1),r=i.charAt(0),s=n.match(e.nonAlphaNumericRegex_),o=r.match(e.nonAlphaNumericRegex_),a=s&&n.match(e.whitespaceRegex_),l=o&&r.match(e.whitespaceRegex_),c=a&&n.match(e.linebreakRegex_),u=l&&r.match(e.linebreakRegex_),h=c&&t.match(e.blanklineEndRegex_),d=u&&i.match(e.blanklineStartRegex_);return h||d?5:c||u?4:s&&!a&&l?3:a||l?2:s||o?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],s=t[n][1],o=t[n+1][1],a=this.diff_commonSuffix(r,s);if(a){var l=s.substring(s.length-a);r=r.substring(0,r.length-a),s=l+s.substring(0,s.length-a),o=l+o}for(var c=r,u=s,h=o,d=i(r,s)+i(s,o);s.charAt(0)===o.charAt(0);){r+=s.charAt(0),s=s.substring(1)+o.charAt(0),o=o.substring(1);var p=i(r,s)+i(s,o);p>=d&&(d=p,c=r,u=s,h=o)}t[n-1][1]!=c&&(c?t[n-1][1]=c:(t.splice(n-1,1),n--),t[n][1]=u,h?t[n+1][1]=h:(t.splice(n+1,1),n--))}n++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,i=[],n=0,r=null,s=0,o=!1,a=!1,l=!1,c=!1;s<t.length;)0==t[s][0]?(t[s][1].length<this.Diff_EditCost&&(l||c)?(i[n++]=s,o=l,a=c,r=t[s][1]):(n=0,r=null),l=c=!1):(-1==t[s][0]?c=!0:l=!0,r&&(o&&a&&l&&c||r.length<this.Diff_EditCost/2&&o+a+l+c==3)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,r=null,o&&a?(l=c=!0,n=0):(s=--n>0?i[n-1]:-1,l=c=!1),e=!0)),s++;e&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,i=0,n=0,r=0,s="",o="";i<t.length;)switch(t[i][0]){case 1:r++,o+=t[i][1],i++;break;case-1:n++,s+=t[i][1],i++;break;case 0:n+r>1?(0!==n&&0!==r&&(0!==(e=this.diff_commonPrefix(o,s))&&(i-n-r>0&&0==t[i-n-r-1][0]?t[i-n-r-1][1]+=o.substring(0,e):(t.splice(0,0,[0,o.substring(0,e)]),i++),o=o.substring(e),s=s.substring(e)),0!==(e=this.diff_commonSuffix(o,s))&&(t[i][1]=o.substring(o.length-e)+t[i][1],o=o.substring(0,o.length-e),s=s.substring(0,s.length-e))),0===n?t.splice(i-r,n+r,[1,o]):0===r?t.splice(i-n,n+r,[-1,s]):t.splice(i-n-r,n+r,[-1,s],[1,o]),i=i-n-r+(n?1:0)+(r?1:0)+1):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,r=0,n=0,s="",o=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),a=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),a=!0)),i++;a&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var i,n=0,r=0,s=0,o=0;for(i=0;i<t.length&&(1!==t[i][0]&&(n+=t[i][1].length),-1!==t[i][0]&&(r+=t[i][1].length),!(n>e));i++)s=n,o=r;return t.length!=i&&-1===t[i][0]?o:o+(e-s)},e.prototype.diff_prettyHtml=function(t){for(var e=[],i=/&/g,n=/</g,r=/>/g,s=/\n/g,o=0;o<t.length;o++){var a=t[o][0],l=t[o][1].replace(i,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(s,"&para;<br>");switch(a){case 1:e[o]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:e[o]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[o]="<span>"+l+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)-1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var s=t[r][0],o=t[r][1];switch(s){case 1:i+=o.length;break;case-1:n+=o.length;break;case 0:e+=Math.max(i,n),i=0,n=0}}return e+=Math.max(i,n)},e.prototype.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case 1:e[i]="+"+encodeURI(t[i][1]);break;case-1:e[i]="-"+t[i][1].length;break;case 0:e[i]="="+t[i][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,e){for(var i=[],n=0,r=0,s=e.split(/\t/g),o=0;o<s.length;o++){var a=s[o].substring(1);switch(s[o].charAt(0)){case"+":try{i[n++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var c=t.substring(r,r+=l);"="==s[o].charAt(0)?i[n++]=[0,c]:i[n++]=[-1,c];break;default:if(s[o])throw new Error("Invalid diff operation in diff_fromDelta: "+s[o])}}if(r!=t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return i},e.prototype.match_main=function(t,e,i){if(null==t||null==e||null==i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},e.prototype.match_bitap_=function(t,e,i){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var n=this.match_alphabet_(e),r=this;function s(t,n){var s=t/e.length,o=Math.abs(i-n);return r.Match_Distance?s+o/r.Match_Distance:o?1:s}var o=this.Match_Threshold,a=t.indexOf(e,i);-1!=a&&(o=Math.min(s(0,a),o),-1!=(a=t.lastIndexOf(e,i+e.length))&&(o=Math.min(s(0,a),o)));var l,c,u=1<<e.length-1;a=-1;for(var h,d=e.length+t.length,p=0;p<e.length;p++){for(l=0,c=d;l<c;)s(p,i+c)<=o?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var f=Math.max(1,i-c+1),m=Math.min(i+c,t.length)+e.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=f;v--){var _=n[t.charAt(v-1)];if(g[v]=0===p?(g[v+1]<<1|1)&_:(g[v+1]<<1|1)&_|(h[v+1]|h[v])<<1|1|h[v+1],g[v]&u){var y=s(p,v-1);if(y<=o){if(o=y,!((a=v-1)>i))break;f=Math.max(1,2*i-a)}}}if(s(p+1,i)>o)break;h=g}return a},e.prototype.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},e.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var i=e.substring(t.start2,t.start2+t.length1),n=0;e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,i=e.substring(t.start2-n,t.start2+t.length1+n);n+=this.Patch_Margin;var r=e.substring(t.start2-n,t.start2);r&&t.diffs.unshift([0,r]);var s=e.substring(t.start2+t.length1,t.start2+t.length1+n);s&&t.diffs.push([0,s]),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+s.length,t.length2+=r.length+s.length}},e.prototype.patch_make=function(t,i,n){var r,s;if("string"==typeof t&&"string"==typeof i&&void 0===n)r=t,(s=this.diff_main(r,i,!0)).length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(t&&"object"==typeof t&&void 0===i&&void 0===n)s=t,r=this.diff_text1(s);else if("string"==typeof t&&i&&"object"==typeof i&&void 0===n)r=t,s=i;else{if("string"!=typeof t||"string"!=typeof i||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=t,s=n}if(0===s.length)return[];for(var o=[],a=new e.patch_obj,l=0,c=0,u=0,h=r,d=r,p=0;p<s.length;p++){var f=s[p][0],m=s[p][1];switch(l||0===f||(a.start1=c,a.start2=u),f){case 1:a.diffs[l++]=s[p],a.length2+=m.length,d=d.substring(0,u)+m+d.substring(u);break;case-1:a.length1+=m.length,a.diffs[l++]=s[p],d=d.substring(0,u)+d.substring(u+m.length);break;case 0:m.length<=2*this.Patch_Margin&&l&&s.length!=p+1?(a.diffs[l++]=s[p],a.length1+=m.length,a.length2+=m.length):m.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(a,h),o.push(a),a=new e.patch_obj,l=0,h=d,c=u)}1!==f&&(c+=m.length),-1!==f&&(u+=m.length)}return l&&(this.patch_addContext_(a,h),o.push(a)),o},e.prototype.patch_deepCopy=function(t){for(var i=[],n=0;n<t.length;n++){var r=t[n],s=new e.patch_obj;s.diffs=[];for(var o=0;o<r.diffs.length;o++)s.diffs[o]=r.diffs[o].slice();s.start1=r.start1,s.start2=r.start2,s.length1=r.length1,s.length2=r.length2,i[n]=s}return i},e.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var n=0,r=[],s=0;s<t.length;s++){var o,a,l=t[s].start2+n,c=this.diff_text1(t[s].diffs),u=-1;if(c.length>this.Match_MaxBits?-1!=(o=this.match_main(e,c.substring(0,this.Match_MaxBits),l))&&(-1==(u=this.match_main(e,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits))||o>=u)&&(o=-1):o=this.match_main(e,c,l),-1==o)r[s]=!1,n-=t[s].length2-t[s].length1;else if(r[s]=!0,n=o-l,c==(a=-1==u?e.substring(o,o+c.length):e.substring(o,u+this.Match_MaxBits)))e=e.substring(0,o)+this.diff_text2(t[s].diffs)+e.substring(o+c.length);else{var h=this.diff_main(c,a,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(h)/c.length>this.Patch_DeleteThreshold)r[s]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d,p=0,f=0;f<t[s].diffs.length;f++){var m=t[s].diffs[f];0!==m[0]&&(d=this.diff_xIndex(h,p)),1===m[0]?e=e.substring(0,o+d)+m[1]+e.substring(o+d):-1===m[0]&&(e=e.substring(0,o+d)+e.substring(o+this.diff_xIndex(h,p+m[1].length))),-1!==m[0]&&(p+=m[1].length)}}}}return[e=e.substring(i.length,e.length-i.length),r]},e.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",n=1;n<=e;n++)i+=String.fromCharCode(n);for(n=0;n<t.length;n++)t[n].start1+=e,t[n].start2+=e;var r=t[0],s=r.diffs;if(0==s.length||0!=s[0][0])s.unshift([0,i]),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>s[0][1].length){var o=e-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],r.start1-=o,r.start2-=o,r.length1+=o,r.length2+=o}return 0==(s=(r=t[t.length-1]).diffs).length||0!=s[s.length-1][0]?(s.push([0,i]),r.length1+=e,r.length2+=e):e>s[s.length-1][1].length&&(o=e-s[s.length-1][1].length,s[s.length-1][1]+=i.substring(0,o),r.length1+=o,r.length2+=o),i},e.prototype.patch_splitMax=function(t){for(var i=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=i)){var r=t[n];t.splice(n--,1);for(var s=r.start1,o=r.start2,a="";0!==r.diffs.length;){var l=new e.patch_obj,c=!0;for(l.start1=s-a.length,l.start2=o-a.length,""!==a&&(l.length1=l.length2=a.length,l.diffs.push([0,a]));0!==r.diffs.length&&l.length1<i-this.Patch_Margin;){var u=r.diffs[0][0],h=r.diffs[0][1];1===u?(l.length2+=h.length,o+=h.length,l.diffs.push(r.diffs.shift()),c=!1):-1===u&&1==l.diffs.length&&0==l.diffs[0][0]&&h.length>2*i?(l.length1+=h.length,s+=h.length,c=!1,l.diffs.push([u,h]),r.diffs.shift()):(h=h.substring(0,i-l.length1-this.Patch_Margin),l.length1+=h.length,s+=h.length,0===u?(l.length2+=h.length,o+=h.length):c=!1,l.diffs.push([u,h]),h==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(h.length))}a=(a=this.diff_text2(l.diffs)).substring(a.length-this.Patch_Margin);var d=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==d&&(l.length1+=d.length,l.length2+=d.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=d:l.diffs.push([0,d])),c||t.splice(++n,0,l)}}},e.prototype.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},e.prototype.patch_fromText=function(t){var i=[];if(!t)return i;for(var n=t.split("\n"),r=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var o=n[r].match(s);if(!o)throw new Error("Invalid patch string: "+n[r]);var a=new e.patch_obj;for(i.push(a),a.start1=parseInt(o[1],10),""===o[2]?(a.start1--,a.length1=1):"0"==o[2]?a.length1=0:(a.start1--,a.length1=parseInt(o[2],10)),a.start2=parseInt(o[3],10),""===o[4]?(a.start2--,a.length2=1):"0"==o[4]?a.length2=0:(a.start2--,a.length2=parseInt(o[4],10)),r++;r<n.length;){var l=n[r].charAt(0);try{var c=decodeURI(n[r].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)a.diffs.push([-1,c]);else if("+"==l)a.diffs.push([1,c]);else if(" "==l)a.diffs.push([0,c]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}r++}}return i},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[i+1]=t+encodeURI(this.diffs[i][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=e,t.exports.diff_match_patch=e,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0})),W=null,q=function(t){if(!W){var e=void 0;if("undefined"!=typeof diff_match_patch)e="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(B)try{e=B&&new B}catch(t){e=null}if(!e){if(!t)return null;var i=new Error("text diff_match_patch library not found");throw i.diff_match_patch_not_found=!0,i}W={diff:function(t,i){return e.patch_toText(e.patch_make(t,i))},patch:function(t,i){for(var n=e.patch_apply(e.patch_fromText(i),t),r=0;r<n[1].length;r++)n[1][r]||(new Error("text patch failed").textPatchFailed=!0);return n[0]}}}return W},V=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||60;if(t.left.length<e||t.right.length<e)t.setResult([t.left,t.right]).exit();else{var i=q();if(i){var n=i.diff;t.setResult([n(t.left,t.right),0,2]).exit()}else t.setResult([t.left,t.right]).exit()}}};V.filterName="texts";var U=function(t){if(!t.nested&&2===t.delta[2]){var e=q(!0).patch;t.setResult(e(t.left,t.delta[0])).exit()}};U.filterName="texts";var K=function(t){var e,i=void 0,n=void 0,r=void 0,s=void 0,o=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(i=0,e=(n=t.split("\n")).length;i<e;i++){var l=(r=n[i]).slice(0,1);"@"===l?(o=a.exec(r),n[i]="@@ -"+o[3]+","+o[4]+" +"+o[1]+","+o[2]+" @@"):"+"===l?(n[i]="-"+n[i].slice(1),"+"===n[i-1].slice(0,1)&&(s=n[i],n[i]=n[i-1],n[i-1]=s)):"-"===l&&(n[i]="+"+n[i].slice(1))}return n.join("\n")},J=function(t){t.nested||2===t.delta[2]&&t.setResult([K(t.delta[0]),0,2]).exit()};J.filterName="texts";var Q=function(){function t(e){n(this,t),this.processor=new u(e),this.processor.pipe(new h("diff").append(w,y,z,V,E,j).shouldHaveResult()),this.processor.pipe(new h("patch").append(S,R,b,U,k,L).shouldHaveResult()),this.processor.pipe(new h("reverse").append(C,$,x,J,P,H).shouldHaveResult())}return r(t,[{key:"options",value:function(){var t;return(t=this.processor).options.apply(t,arguments)}},{key:"diff",value:function(t,e){return this.processor.process(new m(t,e))}},{key:"patch",value:function(t,e){return this.processor.process(new g(t,e))}},{key:"reverse",value:function(t){return this.processor.process(new v(t))}},{key:"unpatch",value:function(t,e){return this.patch(t,this.reverse(e))}},{key:"clone",value:function(t){return f(t)}}]),t}(),G="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},X="function"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e},Y=function(t){return"_t"===t?-1:"_"===t.substr(0,1)?parseInt(t.slice(1),10):parseInt(t,10)+.1},Z=function(t,e){return Y(t)-Y(e)},tt=function(){function t(){n(this,t)}return r(t,[{key:"format",value:function(t,e){var i={};return this.prepareContext(i),this.recurse(i,t,e),this.finalize(i)}},{key:"prepareContext",value:function(t){t.buffer=[],t.out=function(){var t;(t=this.buffer).push.apply(t,arguments)}}},{key:"typeFormattterNotFound",value:function(t,e){throw new Error("cannot format delta type: "+e)}},{key:"typeFormattterErrorFormatter",value:function(t,e){return e.toString()}},{key:"finalize",value:function(t){var e=t.buffer;if(G(e))return e.join("")}},{key:"recurse",value:function(t,e,i,n,r,s,o){var a=e&&s?s.value:i;if(void 0!==e||void 0!==n){var l=this.getDeltaType(e,s),c="node"===l?"a"===e._t?"array":"object":"";void 0!==n?this.nodeBegin(t,n,r,l,c,o):this.rootBegin(t,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(t,l)).call(this,t,e,a,n,r,s)}catch(i){this.typeFormattterErrorFormatter(t,i,e,a,n,r,s),"undefined"!=typeof console&&console.error&&console.error(i.stack)}void 0!==n?this.nodeEnd(t,n,r,l,c,o):this.rootEnd(t,l,c)}}},{key:"formatDeltaChildren",value:function(t,e,i){var n=this;this.forEachDeltaKey(e,i,(function(r,s,o,a){n.recurse(t,e[r],i?i[s]:void 0,r,s,o,a)}))}},{key:"forEachDeltaKey",value:function(t,e,i){var n,r=X(t),s="a"===t._t,o={},a=void 0;if(void 0!==e)for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(void 0!==t[a]||s&&void 0!==t["_"+a]||r.push(a));for(a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var l=t[a];G(l)&&3===l[2]&&(o[l[1].toString()]={key:a,value:e&&e[parseInt(a.substr(1))]},!1!==this.includeMoveDestinations&&void 0===e&&void 0===t[l[1]]&&r.push(l[1].toString()))}s?r.sort(Z):r.sort();for(var c=0,u=r.length;c<u;c++){var h=r[c];if(!s||"_t"!==h){var d=s?"number"==typeof h?h:parseInt("_"===(n=h).substr(0,1)?n.slice(1):n,10):h,p=c===u-1;i(h,d,o[d],p)}}}},{key:"getDeltaType",value:function(t,e){if(void 0===t)return void 0!==e?"movedestination":"unchanged";if(G(t)){if(1===t.length)return"added";if(2===t.length)return"modified";if(3===t.length&&0===t[2])return"deleted";if(3===t.length&&2===t[2])return"textdiff";if(3===t.length&&3===t[2])return"moved"}else if("object"===(void 0===t?"undefined":i(t)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(t){for(var e=[],i=t.split("\n@@ "),n=0,r=i.length;n<r;n++){var s=i[n],o={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(s).slice(1);o.location={line:a[0],chr:a[1]};for(var l=s.split("\n").slice(1),c=0,u=l.length;c<u;c++){var h=l[c];if(h.length){var d={type:"context"};"+"===h.substr(0,1)?d.type="added":"-"===h.substr(0,1)&&(d.type="deleted"),d.text=h.slice(1),o.pieces.push(d)}}e.push(o)}return e}}]),t}(),et=Object.freeze({default:tt}),it=function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),r(e,[{key:"typeFormattterErrorFormatter",value:function(t,e){t.out('<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatValue",value:function(t,e){t.out("<pre>"+nt(JSON.stringify(e,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var i=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var n=0,r=i.length;n<r;n++){var s=i[n];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+s.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+s.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var o=s.pieces,a=0,l=o.length;a<l;a++){var c=o[a];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+nt(decodeURI(c.text))+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,i){var n="jsondiffpatch-"+e+(i?" jsondiffpatch-child-node-type-"+i:"");t.out('<div class="jsondiffpatch-delta '+n+'">')}},{key:"rootEnd",value:function(t){t.out("</div>"+(t.hasArrows?'<script type="text/javascript">setTimeout('+rt.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(t,e,i,n,r){var s="jsondiffpatch-"+n+(r?" jsondiffpatch-child-node-type-"+r:"");t.out('<li class="'+s+'" data-key="'+i+'"><div class="jsondiffpatch-property-name">'+i+"</div>")}},{key:"nodeEnd",value:function(t){t.out("</li>")}},{key:"format_unchanged",value:function(t,e,i){void 0!==i&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,i),t.out("</div>"))}},{key:"format_movedestination",value:function(t,e,i){void 0!==i&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,i),t.out("</div>"))}},{key:"format_node",value:function(t,e,i){var n="a"===e._t?"array":"object";t.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+n+'">'),this.formatDeltaChildren(t,e,i),t.out("</ul>")}},{key:"format_added",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_modified",value:function(t,e){t.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(t,e[1]),t.out("</div>")}},{key:"format_deleted",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_moved",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-moved-destination">'+e[1]+"</div>"),t.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),t.hasArrows=!0}},{key:"format_textdiff",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(t,e[0]),t.out("</div>")}}]),e}(tt);function nt(t){for(var e=t,i=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],n=0;n<i.length;n++)e=e.replace(i[n][0],i[n][1]);return e}var rt=function(t){var e=t||document;!function(t,e,i){for(var n=t.querySelectorAll(e),r=0,s=n.length;r<s;r++)i(n[r])}(e,".jsondiffpatch-arrow",(function(t){var e=t.parentNode,i=t.children,n=t.style,r=e,s=i[0],o=s.children[1];s.style.display="none";var a,l,c,u=(a=r.querySelector(".jsondiffpatch-moved-destination"),l=a.textContent,c=a.innerText,l||c),h=r.parentNode,d=void 0;if(function(t,e){for(var i=t.children,n=0,r=i.length;n<r;n++)e(i[n],n)}(h,(function(t){t.getAttribute("data-key")===u&&(d=t)})),d)try{var p=d.offsetTop-r.offsetTop;s.setAttribute("height",Math.abs(p)+6),n.top=-8+(p>0?0:p)+"px";var f=p>0?"M30,0 Q-10,"+Math.round(p/2)+" 26,"+(p-4):"M30,"+-p+" Q-10,"+Math.round(-p/2)+" 26,4";o.setAttribute("d",f),s.style.display=""}catch(t){}}))},st=function(t,e,i){var n=e||document.body,r="jsondiffpatch-unchanged-",s={showing:r+"showing",hiding:r+"hiding",visible:r+"visible",hidden:r+"hidden"},o=n.classList;if(o){if(!i)return o.remove(s.showing),o.remove(s.hiding),o.remove(s.visible),o.remove(s.hidden),void(!1===t&&o.add(s.hidden));!1===t?(o.remove(s.showing),o.add(s.visible),setTimeout((function(){o.add(s.hiding)}),10)):(o.remove(s.hiding),o.add(s.showing),o.remove(s.hidden));var a=setInterval((function(){rt(n)}),100);setTimeout((function(){o.remove(s.showing),o.remove(s.hiding),!1===t?(o.add(s.hidden),o.remove(s.visible)):(o.add(s.visible),o.remove(s.hidden)),setTimeout((function(){o.remove(s.visible),clearInterval(a)}),i+400)}),i)}},ot=void 0,at=Object.freeze({showUnchanged:st,hideUnchanged:function(t,e){return st(!1,t,e)},default:it,format:function(t,e){return ot||(ot=new it),ot.format(t,e)}}),lt=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return o(e,t),r(e,[{key:"prepareContext",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},t.row=function(e,i){t.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),t.out(t.indentPad),t.out('</pre><pre style="display: inline-block">'),t.out(e),t.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),t.out(i),t.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.row("",'<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var i=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var n=0,r=i.length;n<r;n++){var s=i[n];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+s.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+s.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var o=s.pieces,a=0,l=o.length;a<l;a++){var c=o[a];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,i){t.out('<table class="jsondiffpatch-annotated-delta">'),"node"===e&&(t.row("{"),t.indent()),"array"===i&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(t,e){"node"===e&&(t.indent(-1),t.row("}")),t.out("</table>")}},{key:"nodeBegin",value:function(t,e,i,n,r){t.row("&quot;"+e+"&quot;: {"),"node"===n&&t.indent(),"array"===r&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(t,e,i,n,r,s){"node"===n&&t.indent(-1),t.row("}"+(s?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,i){this.formatDeltaChildren(t,e,i)}}]),e}(tt),ct=function(t){return'<pre style="display:inline-block">&quot;'+t+"&quot;</pre>"},ut={added:function(t,e,i,n){var r=" <pre>([newValue])</pre>";return void 0===n?"new value"+r:"number"==typeof n?"insert at index "+n+r:"add property "+ct(n)+r},modified:function(t,e,i,n){var r=" <pre>([previousValue, newValue])</pre>";return void 0===n?"modify value"+r:"number"==typeof n?"modify at index "+n+r:"modify property "+ct(n)+r},deleted:function(t,e,i,n){var r=" <pre>([previousValue, 0, 0])</pre>";return void 0===n?"delete value"+r:"number"==typeof n?"remove index "+n+r:"delete property "+ct(n)+r},moved:function(t,e,i,n){return'move from <span title="(position to remove at original state)">index '+n+'</span> to <span title="(position to insert at final state)">index '+t[1]+"</span>"},textdiff:function(t,e,i,n){return"text diff"+(void 0===n?"":"number"==typeof n?" at index "+n:" at property "+ct(n))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},ht=function(t,e){var i=this.getDeltaType(e),n=ut[i],r=n&&n.apply(n,Array.prototype.slice.call(arguments,1)),s=JSON.stringify(e,null,2);"textdiff"===i&&(s=s.split("\\n").join('\\n"+\n   "')),t.indent(),t.row(s,r),t.indent(-1)};lt.prototype.format_added=ht,lt.prototype.format_modified=ht,lt.prototype.format_deleted=ht,lt.prototype.format_moved=ht,lt.prototype.format_textdiff=ht;var dt=void 0,pt=Object.freeze({default:lt,format:function(t,e){return dt||(dt=new lt),dt.format(t,e)}}),ft="add",mt="remove",gt="replace",vt="move",_t=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!0,t}return o(e,t),r(e,[{key:"prepareContext",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.result=[],t.path=[],t.pushCurrentOp=function(t){var e=t.op,i=t.value,n={op:e,path:this.currentPath()};void 0!==i&&(n.value=i),this.result.push(n)},t.pushMoveOp=function(t){var e=this.currentPath();this.result.push({op:vt,from:e,path:this.toPath(t)})},t.currentPath=function(){return"/"+this.path.join("/")},t.toPath=function(t){var e=this.path.slice();return e[e.length-1]=t,"/"+e.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.out("[ERROR] "+e)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(t,e,i){t.path.push(i)}},{key:"nodeEnd",value:function(t){t.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,i){this.formatDeltaChildren(t,e,i)}},{key:"format_added",value:function(t,e){t.pushCurrentOp({op:ft,value:e[0]})}},{key:"format_modified",value:function(t,e){t.pushCurrentOp({op:gt,value:e[1]})}},{key:"format_deleted",value:function(t){t.pushCurrentOp({op:mt})}},{key:"format_moved",value:function(t,e){var i=e[1];t.pushMoveOp(i)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(t,e){var i={};return this.prepareContext(i),this.recurse(i,t,e),i.result}}]),e}(tt),yt=function(t){return t[t.length-1]},bt=function(t){return i=function(t,e){var i,n,r,s,o=t.path.split("/"),a=e.path.split("/");return o.length!==a.length?o.length-a.length:(i=yt(o),n=yt(a),r=parseInt(i,10),s=parseInt(n,10),isNaN(r)||isNaN(s)?0:s-r)},(e=t).sort(i),e;var e,i},xt=function(t,e){var i=Array(e.length+1).fill().map((function(){return[]}));return t.map((function(t){var i=e.map((function(e){return e(t)})).indexOf(!0);return i<0&&(i=e.length),{item:t,position:i}})).reduce((function(t,e){return t[e.position].push(e.item),t}),i)},wt=function(t){return"move"===t.op},Et=function(t){return"remove"===t.op},kt=void 0,St=function(t,e){return kt||(kt=new _t),function(t){var e=xt(t,[wt,Et]),i=l(e,3),n=i[0],r=i[1],s=i[2],o=bt(r);return[].concat(c(o),c(n),c(s))}(kt.format(t,e))},Pt=Object.freeze({default:_t,partitionOps:xt,format:St,log:function(t,e){console.log(St(t,e))}});function Ct(t){return e&&e[t]||function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e}}var Dt={added:Ct("green"),deleted:Ct("red"),movedestination:Ct("gray"),moved:Ct("yellow"),unchanged:Ct("gray"),error:Ct("white.bgRed"),textDiffLine:Ct("gray")},Tt=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return o(e,t),r(e,[{key:"prepareContext",value:function(t){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},t.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},t.out=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0,r=e.length;n<r;n++){var s=e[n].split("\n"),o=s.join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(o=this.color[0](o)),this.buffer.push(o)}},t.pushColor=function(t){this.color=this.color||[],this.color.unshift(t)},t.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.pushColor(Dt.error),t.out("[ERROR]"+e),t.popColor()}},{key:"formatValue",value:function(t,e){t.out(JSON.stringify(e,null,2))}},{key:"formatTextDiffString",value:function(t,e){var i=this.parseTextDiff(e);t.indent();for(var n=0,r=i.length;n<r;n++){var s=i[n];t.pushColor(Dt.textDiffLine),t.out(s.location.line+","+s.location.chr+" "),t.popColor();for(var o=s.pieces,a=0,l=o.length;a<l;a++){var c=o[a];t.pushColor(Dt[c.type]),t.out(c.text),t.popColor()}n<r-1&&t.outLine()}t.indent(-1)}},{key:"rootBegin",value:function(t,e,i){t.pushColor(Dt[e]),"node"===e&&(t.out("array"===i?"[":"{"),t.indent())}},{key:"rootEnd",value:function(t,e,i){"node"===e&&(t.indent(-1),t.out("array"===i?"]":"}")),t.popColor()}},{key:"nodeBegin",value:function(t,e,i,n,r){t.pushColor(Dt[n]),t.out(i+": "),"node"===n&&(t.out("array"===r?"[":"{"),t.indent())}},{key:"nodeEnd",value:function(t,e,i,n,r,s){"node"===n&&(t.indent(-1),t.out("array"===r?"]":"}"+(s?"":","))),s||t.outLine(),t.popColor()}},{key:"format_unchanged",value:function(t,e,i){void 0!==i&&this.formatValue(t,i)}},{key:"format_movedestination",value:function(t,e,i){void 0!==i&&this.formatValue(t,i)}},{key:"format_node",value:function(t,e,i){this.formatDeltaChildren(t,e,i)}},{key:"format_added",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_modified",value:function(t,e){t.pushColor(Dt.deleted),this.formatValue(t,e[0]),t.popColor(),t.out(" => "),t.pushColor(Dt.added),this.formatValue(t,e[1]),t.popColor()}},{key:"format_deleted",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_moved",value:function(t,e){t.out("==> "+e[1])}},{key:"format_textdiff",value:function(t,e){this.formatTextDiffString(t,e[0])}}]),e}(tt),At=void 0,Ot=function(t,e){return At||(At=new Tt),At.format(t,e)},Nt=Object.freeze({default:Tt,format:Ot,log:function(t,e){console.log(Ot(t,e))}}),jt=Object.freeze({base:et,html:at,annotated:pt,jsonpatch:Pt,console:Nt}),It=void 0;t.DiffPatcher=Q,t.formatters=jt,t.console=Nt,t.create=function(t){return new Q(t)},t.dateReviver=function(t,e){var i=void 0;return"string"==typeof e&&(i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5],+i[6],+(i[7]||0))):e},t.diff=function(){return It||(It=new Q),It.diff.apply(It,arguments)},t.patch=function(){return It||(It=new Q),It.patch.apply(It,arguments)},t.unpatch=function(){return It||(It=new Q),It.unpatch.apply(It,arguments)},t.reverse=function(){return It||(It=new Q),It.reverse.apply(It,arguments)},t.clone=function(){return It||(It=new Q),It.clone.apply(It,arguments)},Object.defineProperty(t,"__esModule",{value:!0})}(e,i(92))},function(t,e,i){"use strict";function n(t,e,i){var n=i?" !== ":" === ",r=i?" || ":" && ",s=i?"!":"",o=i?"":"!";switch(t){case"null":return e+n+"null";case"array":return s+"Array.isArray("+e+")";case"object":return"("+s+e+r+"typeof "+e+n+'"object"'+r+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+r+o+"("+e+" % 1)"+r+e+n+e+")";default:return"typeof "+e+n+'"'+t+'"'}}t.exports={copy:function(t,e){for(var i in e=e||{},t)e[i]=t[i];return e},checkDataType:n,checkDataTypes:function(t,e){switch(t.length){case 1:return n(t[0],e,!0);default:var i="",r=s(t);for(var o in r.array&&r.object&&(i=r.null?"(":"(!"+e+" || ",i+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer,r)i+=(i?" && ":"")+n(o,e,!0);return i}},coerceToTypes:function(t,e){if(Array.isArray(e)){for(var i=[],n=0;n<e.length;n++){var s=e[n];(r[s]||"array"===t&&"array"===s)&&(i[i.length]=s)}if(i.length)return i}else{if(r[e])return[e];if("array"===t&&"array"===e)return["array"]}},toHash:s,getProperty:l,escapeQuotes:c,equal:i(22),ucs2length:i(96),varOccurences:function(t,e){e+="[^0-9]";var i=t.match(new RegExp(e,"g"));return i?i.length:0},varReplace:function(t,e,i){return e+="([^0-9])",i=i.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),i+"$1")},cleanUpCode:function(t){return t.replace(u,"").replace(h,"").replace(d,"if (!($1))")},finalCleanUpCode:function(t,e){var i=t.match(p);i&&2==i.length&&(t=e?t.replace(m,"").replace(g,"return data;"):t.replace(f,"").replace("return errors === 0;","validate.errors = null; return true;"));return(i=t.match(v))&&3===i.length?t.replace(_,""):t},schemaHasRules:function(t,e){if("boolean"==typeof t)return!t;for(var i in t)if(e[i])return!0},schemaHasRulesExcept:function(t,e,i){if("boolean"==typeof t)return!t&&"not"!=i;for(var n in t)if(n!=i&&e[n])return!0},schemaUnknownRules:function(t,e){if("boolean"==typeof t)return;for(var i in t)if(!e[i])return i},toQuotedString:y,getPathExpr:function(t,e,i,n){return w(t,i?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(t,e,i){var n=y(i?"/"+E(e):l(e));return w(t,n)},getData:function(t,e,i){var n,r,s,o;if(""===t)return"rootData";if("/"==t[0]){if(!b.test(t))throw new Error("Invalid JSON-pointer: "+t);r=t,s="rootData"}else{if(!(o=t.match(x)))throw new Error("Invalid JSON-pointer: "+t);if(n=+o[1],"#"==(r=o[2])){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return i[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(s="data"+(e-n||""),!r)return s}for(var a=s,c=r.split("/"),u=0;u<c.length;u++){var h=c[u];h&&(s+=l(k(h)),a+=" && "+s)}return a},unescapeFragment:function(t){return k(decodeURIComponent(t))},unescapeJsonPointer:k,escapeFragment:function(t){return encodeURIComponent(E(t))},escapeJsonPointer:E};var r=s(["string","number","integer","boolean","null"]);function s(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return e}var o=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function l(t){return"number"==typeof t?"["+t+"]":o.test(t)?"."+t:"['"+c(t)+"']"}function c(t){return t.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,h=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,d=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var p=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,g=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,v=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,_=/if \(rootData === undefined\) rootData = data;/;function y(t){return"'"+c(t)+"'"}var b=/^\/(?:[^~]|~0|~1)*$/,x=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function w(t,e){return'""'==t?e:(t+" + "+e).replace(/' \+ '/g,"")}function E(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function k(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},function(t,e,i){t.exports=i(67)},function(t,e){t.exports=function(t){var e=[];return t=void 0===t?null:t,i.set=function(i){t=i,e.forEach((function(t){t(i)}))},i;function i(i){return i?(e.push(i),function(){e.splice(e.indexOf(i),1)}):t}}},function(t,e){function i(t,e,i){var n,r,s,o,a;function l(){var c=Date.now()-o;c<e&&c>=0?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(s,r),s=r=null))}null==e&&(e=100);var c=function(){s=this,r=arguments,o=Date.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(a=t.apply(s,r),s=r=null,clearTimeout(n),n=null)},c}i.debounce=i,t.exports=i},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?n.apply(e,r):n)||(t.exports=s)},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(61),i(5),i(8)],void 0===(s="function"==typeof(n=function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,s=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(r&&!s&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,i.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return function(){var e,i=Math.max,n=Math.abs,r=/left|center|right/,s=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function u(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function h(e,i){return parseInt(t.css(e,i),10)||0}function d(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var i,n,r=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),i=s.offsetWidth,r.css("overflow","scroll"),i===(n=s.offsetWidth)&&(n=r[0].clientWidth),r.remove(),e=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),r=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:r,offset:n||r?{left:0,top:0}:t(e).offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var l,p,f,m,g,v,_=t(e.of),y=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),w={};return v=d(_),_[0].preventDefault&&(e.at="left top"),p=v.width,f=v.height,m=v.offset,g=t.extend({},m),t.each(["my","at"],(function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=r.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=r.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",t=o.exec(n[0]),i=o.exec(n[1]),w[this]=[t?t[0]:0,i?i[0]:0],e[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?g.left+=p:"center"===e.at[0]&&(g.left+=p/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),l=u(w.at,p,f),g.left+=l[0],g.top+=l[1],this.each((function(){var r,s,o=t(this),a=o.outerWidth(),c=o.outerHeight(),d=h(this,"marginLeft"),v=h(this,"marginTop"),E=a+d+h(this,"marginRight")+b.width,k=c+v+h(this,"marginBottom")+b.height,S=t.extend({},g),P=u(w.my,o.outerWidth(),o.outerHeight());"right"===e.my[0]?S.left-=a:"center"===e.my[0]&&(S.left-=a/2),"bottom"===e.my[1]?S.top-=c:"center"===e.my[1]&&(S.top-=c/2),S.left+=P[0],S.top+=P[1],r={marginLeft:d,marginTop:v},t.each(["left","top"],(function(i,n){t.ui.position[x[i]]&&t.ui.position[x[i]][n](S,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:r,collisionWidth:E,collisionHeight:k,offset:[l[0]+P[0],l[1]+P[1]],my:e.my,at:e.at,within:y,elem:o})})),e.using&&(s=function(t){var r=m.left-S.left,s=r+p-a,l=m.top-S.top,u=l+f-c,h={target:{element:_,left:m.left,top:m.top,width:p,height:f},element:{element:o,left:S.left,top:S.top,width:a,height:c},horizontal:s<0?"left":r>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};p<a&&n(r+s)<p&&(h.horizontal="center"),f<c&&n(l+u)<f&&(h.vertical="middle"),i(n(r),n(s))>i(n(l),n(u))?h.important="horizontal":h.important="vertical",e.using.call(this,t,h)}),o.offset(t.extend(S,{using:s}))}))},t.ui.position={fit:{left:function(t,e){var n,r=e.within,s=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,c=a+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&c<=0?(n=t.left+l+e.collisionWidth-o-s,t.left+=l-n):t.left=c>0&&l<=0?s:l>c?s+o-e.collisionWidth:s:l>0?t.left+=l:c>0?t.left-=c:t.left=i(t.left-a,t.left)},top:function(t,e){var n,r=e.within,s=r.isWindow?r.scrollTop:r.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,c=a+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&c<=0?(n=t.top+l+e.collisionHeight-o-s,t.top+=l-n):t.top=c>0&&l<=0?s:l>c?s+o-e.collisionHeight:s:l>0?t.top+=l:c>0?t.top-=c:t.top=i(t.top-a,t.top)}},flip:{left:function(t,e){var i,r,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((i=t.left+d+p+f+e.collisionWidth-a-o)<0||i<n(u))&&(t.left+=d+p+f):h>0&&((r=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||n(r)<h)&&(t.left+=d+p+f)},top:function(t,e){var i,r,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((r=t.top+d+p+f+e.collisionHeight-a-o)<0||r<n(u))&&(t.top+=d+p+f):h>0&&((i=t.top-e.collisionPosition.marginTop+d+p+f-l)>0||n(i)<h)&&(t.top+=d+p+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.HandlebarsEnvironment=u;var r=i(6),s=n(i(7)),o=i(31),a=i(76),l=n(i(32)),c=i(33);e.VERSION="4.7.2";e.COMPILER_REVISION=8;e.LAST_COMPATIBLE_COMPILER_REVISION=7;e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};function u(t,e,i){this.helpers=t||{},this.partials=e||{},this.decorators=i||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(t,e){if("[object Object]"===r.toString.call(t)){if(e)throw new s.default("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if("[object Object]"===r.toString.call(t))r.extend(this.partials,t);else{if(void 0===e)throw new s.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if("[object Object]"===r.toString.call(t)){if(e)throw new s.default("Arg not supported with multiple decorators");r.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var h=l.default.log;e.log=h,e.createFrame=r.createFrame,e.logger=l.default},function(t,e,i){"use strict";var n=i(95),r=i(22),s=i(11),o=i(37),a=i(97);function l(t,e,i){var n=this._refs[i];if("string"==typeof n){if(!this._refs[n])return l.call(this,t,e,n);n=this._refs[n]}if((n=n||this._schemas[i])instanceof o)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var r,s,a,u=c.call(this,e,i);return u&&(r=u.schema,e=u.root,a=u.baseId),r instanceof o?s=r.validate||t.call(this,r.schema,e,void 0,a):void 0!==r&&(s=f(r,this._opts.inlineRefs)?r:t.call(this,r,e,void 0,a)),s}function c(t,e){var i=n.parse(e),r=g(i),s=m(this._getId(t.schema));if(0===Object.keys(t.schema).length||r!==s){var a=_(r),l=this._refs[a];if("string"==typeof l)return u.call(this,t,l,i);if(l instanceof o)l.validate||this._compile(l),t=l;else{if(!((l=this._schemas[a])instanceof o))return;if(l.validate||this._compile(l),a==_(e))return{schema:l,root:t,baseId:s};t=l}if(!t.schema)return;s=m(this._getId(t.schema))}return d.call(this,i,s,t.schema,t)}function u(t,e,i){var n=c.call(this,t,e);if(n){var r=n.schema,s=n.baseId;t=n.root;var o=this._getId(r);return o&&(s=y(s,o)),d.call(this,i,s,r,t)}}t.exports=l,l.normalizeId=_,l.fullPath=m,l.url=y,l.ids=function(t){var e=_(this._getId(t)),i={"":e},o={"":m(e,!1)},l={},c=this;return a(t,{allKeys:!0},(function(t,e,a,u,h,d,p){if(""!==e){var f=c._getId(t),m=i[u],g=o[u]+"/"+h;if(void 0!==p&&(g+="/"+("number"==typeof p?p:s.escapeFragment(p))),"string"==typeof f){f=m=_(m?n.resolve(m,f):f);var v=c._refs[f];if("string"==typeof v&&(v=c._refs[v]),v&&v.schema){if(!r(t,v.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=_(g))if("#"==f[0]){if(l[f]&&!r(t,l[f]))throw new Error('id "'+f+'" resolves to more than one schema');l[f]=t}else c._refs[f]=g}i[e]=m,o[e]=g}})),l},l.inlineRef=f,l.schema=c;var h=s.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(t,e,i,n){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var r=t.fragment.split("/"),o=1;o<r.length;o++){var a=r[o];if(a){if(void 0===(i=i[a=s.unescapeFragment(a)]))break;var l;if(!h[a]&&((l=this._getId(i))&&(e=y(e,l)),i.$ref)){var u=y(e,i.$ref),d=c.call(this,n,u);d&&(i=d.schema,n=d.root,e=d.baseId)}}}return void 0!==i&&i!==n.schema?{schema:i,root:n,baseId:e}:void 0}}var p=s.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(t,e){return!1!==e&&(void 0===e||!0===e?function t(e){var i;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(i=e[n])&&!t(i))return!1}else for(var r in e){if("$ref"==r)return!1;if("object"==typeof(i=e[r])&&!t(i))return!1}return!0}(t):e?function t(e){var i,n=0;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(i=e[r])&&(n+=t(i)),n==1/0)return 1/0}else for(var s in e){if("$ref"==s)return 1/0;if(p[s])n++;else if("object"==typeof(i=e[s])&&(n+=t(i)+1),n==1/0)return 1/0}return n}(t)<=e:void 0)}function m(t,e){return!1!==e&&(t=_(t)),g(n.parse(t))}function g(t){return n.serialize(t).split("#")[0]+"#"}var v=/#\/?$/;function _(t){return t?t.replace(v,""):""}function y(t,e){return e=_(e),n.resolve(t,e)}},function(t,e,i){"use strict";t.exports=function t(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var n,r,s;if(Array.isArray(e)){if((n=e.length)!=i.length)return!1;for(r=n;0!=r--;)if(!t(e[r],i[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((n=(s=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(i,s[r]))return!1;for(r=n;0!=r--;){var o=s[r];if(!t(e[o],i[o]))return!1}return!0}return e!=e&&i!=i}},function(t,e,i){"use strict";var n=i(21);function r(t,e,i){this.message=i||r.message(t,e),this.missingRef=n.url(t,e),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function s(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}t.exports={Validation:s((function(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0})),MissingRef:s(r)},r.message=function(t,e){return"can't resolve reference "+e+" from id "+t}},function(t,e,i){"use strict";var n,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(i,n){function r(){void 0!==s&&t.removeListener("error",s),i([].slice.call(arguments))}var s;"error"!==e&&(s=function(i){t.removeListener(e,r),n(i)},t.once("error",s)),t.once(e,r)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,i,n){var r,s,o,a;if(c(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),o=s[e]),void 0===o)o=s[e]=i,++t._eventsCount;else if("function"==typeof o?o=s[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),(r=u(t))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,a=l,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function f(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):g(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)s(l,this,e);else{var c=l.length,u=g(l,c);for(i=0;i<c;++i)s(u[i],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,n,r,s,o;if(c(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){o=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,s=Object.keys(i);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,i){var n,r,s;r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.escapeSelector=(e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(e,"\\$1")});var e})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(18),i(62),i(27),i(16),i(28),i(63),i(5),i(8)],void 0===(s="function"==typeof(n=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),r=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,r=this.options,s=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(n=(i=t(r.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=r.containment:this.containment=[0,0,t(s).width()-this.helperProportions.width-this.margins.left,(t(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var r=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,r))}))},stop:function(e,i,n){var r=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,(function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,r))}))},drag:function(e,i,n){t.each(n.sortables,(function(){var r=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,t.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&t.contains(s.element[0],this.element[0])&&(r=!1),r}))),r?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},e.target=s.currentItem[0],s._mouseCapture(e,!0),s._mouseStart(e,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",e),n.dropped=s.element,t.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(e),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",e,s._uiHash(s)),s._mouseStop(e,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var r=t("body"),s=n.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(e,i,n){var r=n.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var r=t(i.helper),s=n.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(e,i,n){var r=n.options;r._opacity&&t(i.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var r=n.options,s=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+o.offsetHeight-e.pageY<r.scrollSensitivity?o.scrollTop=s=o.scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+o.offsetWidth-e.pageX<r.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(a).scrollTop()<r.scrollSensitivity?s=t(a).scrollTop(t(a).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<r.scrollSensitivity&&(s=t(a).scrollTop(t(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(a).scrollLeft()<r.scrollSensitivity?s=t(a).scrollLeft(t(a).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<r.scrollSensitivity&&(s=t(a).scrollLeft(t(a).scrollLeft()+r.scrollSpeed)))),!1!==s&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var r=n.options;n.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,n){var r,s,o,a,l,c,u,h,d,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,_=i.offset.top,y=_+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)c=(l=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,h=(u=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,v<l-m||g>c+m||y<u-m||_>h+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(u-y)<=m,s=Math.abs(h-_)<=m,o=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=r||s||o||a,"outer"!==f.snapMode&&(r=Math.abs(u-_)<=m,s=Math.abs(h-y)<=m,o=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(r||s||o||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=r||s||o||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var r,s=n.options,o=t.makeArray(t(s.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));o.length&&(r=parseInt(t(o[0]).css("zIndex"),10)||0,t(o).each((function(e){t(this).css("zIndex",r+e)})),this.css("zIndex",r+o.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var r=t(i.helper),s=n.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(e,i,n){var r=n.options;r._zIndex&&t(i.helper).css("zIndex",r._zIndex)}}),t.ui.draggable})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.plugin={add:function(e,i,n){var r,s=t.ui[e].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(t,e,i,n){var r,s=t.plugins[e];if(s&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)t.options[s[r][0]]&&s[r][1].apply(t.element,i)}}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.focusable=function(e,i){var n,r,s,o,a,l=e.nodeName.toLowerCase();return"area"===l?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(s=t("img[usemap='#"+r+"']")).length>0&&s.is(":visible")):(/^(input|select|textarea|button|object)$/.test(l)?(o=!e.disabled)&&(a=t(e).closest("fieldset")[0])&&(o=!a.disabled):o="a"===l&&e.href||i,o&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(t(e)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.fn.extend({uniqueId:(e=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}});var e})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.registerDefaultHelpers=function(t){r.default(t),s.default(t),o.default(t),a.default(t),l.default(t),c.default(t),u.default(t)},e.moveHelperToHooks=function(t,e,i){t.helpers[e]&&(t.hooks[e]=t.helpers[e],i||delete t.helpers[e])};var r=n(i(69)),s=n(i(70)),o=n(i(71)),a=n(i(72)),l=n(i(73)),c=n(i(74)),u=n(i(75))},function(t,e,i){"use strict";e.__esModule=!0;var n=i(6),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(r.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=r.lookupLevel(t),"undefined"!=typeof console&&r.lookupLevel(r.level)<=t){var e=r.methodMap[t];console[e]||(e="log");for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];console[e].apply(console,n)}}};e.default=r,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.createProtoAccessControl=function(t){var e=Object.create(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var i=Object.create(null);return i.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(i,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,i){return o("function"==typeof t?e.methods:e.properties,i)},e.resetLoggedProperties=function(){Object.keys(s).forEach((function(t){delete s[t]}))};var n=i(78),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(32)),s=Object.create(null);function o(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==s[t]&&(s[t]=!0,r.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}},function(t,e,i){"use strict";(function(i){e.__esModule=!0,e.default=function(t){var e=void 0!==i?i:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(this,i(17))},function(t,e,i){"use strict";e.__esModule=!0;var n={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!n.helpers.scopedId(t)&&!t.depth}}};e.default=n,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(7),s=(n=r)&&n.__esModule?n:{default:n};function o(){this.parents=[]}function a(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function l(t){a.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function c(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}o.prototype={constructor:o,mutating:!1,acceptKey:function(t,e){var i=this.accept(t[e]);if(this.mutating){if(i&&!o.prototype[i.type])throw new s.default('Unexpected node type "'+i.type+'" found when accepting '+e+" on "+t.type);t[e]=i}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new s.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,i=t.length;e<i;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,i--)},accept:function(t){if(t){if(!this[t.type])throw new s.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:a,Decorator:a,BlockStatement:l,DecoratorBlock:l,PartialStatement:c,PartialBlockStatement:function(t){c.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:a,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=o,t.exports=e.default},function(t,e,i){"use strict";var n=i(11);t.exports=function(t){n.copy(t,this)}},function(t,e,i){"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var i,n="boolean"==typeof e.cycles&&e.cycles,r=e.cmp&&(i=e.cmp,function(t){return function(e,n){var r={key:e,value:t[e]},s={key:n,value:t[n]};return i(r,s)}}),s=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var i,o;if(Array.isArray(e)){for(o="[",i=0;i<e.length;i++)i&&(o+=","),o+=t(e[i])||"null";return o+"]"}if(null===e)return"null";if(-1!==s.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(e)-1,l=Object.keys(e).sort(r&&r(e));for(o="",i=0;i<l.length;i++){var c=l[i],u=t(e[c]);u&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u)}return s.splice(a,1),"{"+o+"}"}}(t)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n="",r=!0===t.schema.$async,s=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),o=t.self._getId(t.schema);if(t.opts.strictKeywords){var a=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(a){var l="unknown keyword: "+a;if("log"!==t.opts.strictKeywords)throw new Error(l);t.logger.warn(l)}}if(t.isTop&&(n+=" var validate = ",r&&(t.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(t.opts.sourceCode||t.opts.processCode)&&(n+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof t.schema||!s&&!t.schema.$ref){var c=t.level,u=t.dataLevel,h=t.schema["false schema"],d=t.schemaPath+t.util.getProperty("false schema"),p=t.errSchemaPath+"/false schema",f=!t.opts.allErrors,m="data"+(u||""),g="valid"+c;if(!1===t.schema){t.isTop?f=!0:n+=" var "+g+" = false; ",(X=X||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'boolean schema is false' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var v=n;n=X.pop(),!t.compositeRule&&f?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?n+=r?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return t.isTop&&(n+=" }; return validate; "),n}if(t.isTop){var _=t.isTop;c=t.level=0,u=t.dataLevel=0,m="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[void 0],void 0!==t.schema.default&&t.opts.useDefaults&&t.opts.strictDefaults){var y="default is ignored in the schema root";if("log"!==t.opts.strictDefaults)throw new Error(y);t.logger.warn(y)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{c=t.level,m="data"+((u=t.dataLevel)||"");if(o&&(t.baseId=t.resolve.url(t.baseId,o)),r&&!t.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}g="valid"+c,f=!t.opts.allErrors;var b="",x="",w=t.schema.type,E=Array.isArray(w);if(w&&t.opts.nullable&&!0===t.schema.nullable&&(E?-1==w.indexOf("null")&&(w=w.concat("null")):"null"!=w&&(w=[w,"null"],E=!0)),E&&1==w.length&&(w=w[0],E=!1),t.schema.$ref&&s){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(s=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(n+=" "+t.RULES.all.$comment.code(t,"$comment")),w){if(t.opts.coerceTypes)var k=t.util.coerceToTypes(t.opts.coerceTypes,w);var S=t.RULES.types[w];if(k||E||!0===S||S&&!Y(S)){d=t.schemaPath+".type",p=t.errSchemaPath+"/type",d=t.schemaPath+".type",p=t.errSchemaPath+"/type";var P=E?"checkDataTypes":"checkDataType";if(n+=" if ("+t.util[P](w,m,!0)+") { ",k){var C="dataType"+c,D="coerced"+c;n+=" var "+C+" = typeof "+m+"; ","array"==t.opts.coerceTypes&&(n+=" if ("+C+" == 'object' && Array.isArray("+m+")) "+C+" = 'array'; "),n+=" var "+D+" = undefined; ";var T="",A=k;if(A)for(var O,N=-1,j=A.length-1;N<j;)O=A[N+=1],N&&(n+=" if ("+D+" === undefined) { ",T+="}"),"array"==t.opts.coerceTypes&&"array"!=O&&(n+=" if ("+C+" == 'array' && "+m+".length == 1) { "+D+" = "+m+" = "+m+"[0]; "+C+" = typeof "+m+";  } "),"string"==O?n+=" if ("+C+" == 'number' || "+C+" == 'boolean') "+D+" = '' + "+m+"; else if ("+m+" === null) "+D+" = ''; ":"number"==O||"integer"==O?(n+=" if ("+C+" == 'boolean' || "+m+" === null || ("+C+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==O&&(n+=" && !("+m+" % 1)"),n+=")) "+D+" = +"+m+"; "):"boolean"==O?n+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+D+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+D+" = true; ":"null"==O?n+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+D+" = null; ":"array"==t.opts.coerceTypes&&"array"==O&&(n+=" if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+m+" == null) "+D+" = ["+m+"]; ");n+=" "+T+" if ("+D+" === undefined) {   ",(X=X||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";v=n;n=X.pop(),!t.compositeRule&&f?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var I=u?"data"+(u-1||""):"parentData";n+=" "+m+" = "+D+"; ",u||(n+="if ("+I+" !== undefined)"),n+=" "+I+"["+(u?t.dataPathArr[u]:"parentDataProperty")+"] = "+D+"; } "}else{(X=X||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";v=n;n=X.pop(),!t.compositeRule&&f?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(t.schema.$ref&&!s)n+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",f&&(n+=" } if (errors === ",n+=_?"0":"errs_"+c,n+=") { ",x+="}");else{var M=t.RULES;if(M)for(var L=-1,R=M.length-1;L<R;)if(Y(S=M[L+=1])){if(S.type&&(n+=" if ("+t.util.checkDataType(S.type,m)+") { "),t.opts.useDefaults)if("object"==S.type&&t.schema.properties){h=t.schema.properties;var H=Object.keys(h);if(H)for(var F,$=-1,z=H.length-1;$<z;){if(void 0!==(q=h[F=H[$+=1]]).default){var B=m+t.util.getProperty(F);if(t.compositeRule){if(t.opts.strictDefaults){y="default is ignored for: "+B;if("log"!==t.opts.strictDefaults)throw new Error(y);t.logger.warn(y)}}else n+=" if ("+B+" === undefined ","empty"==t.opts.useDefaults&&(n+=" || "+B+" === null || "+B+" === '' "),n+=" ) "+B+" = ","shared"==t.opts.useDefaults?n+=" "+t.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}else if("array"==S.type&&Array.isArray(t.schema.items)){var W=t.schema.items;if(W){N=-1;for(var q,V=W.length-1;N<V;)if(void 0!==(q=W[N+=1]).default){B=m+"["+N+"]";if(t.compositeRule){if(t.opts.strictDefaults){y="default is ignored for: "+B;if("log"!==t.opts.strictDefaults)throw new Error(y);t.logger.warn(y)}}else n+=" if ("+B+" === undefined ","empty"==t.opts.useDefaults&&(n+=" || "+B+" === null || "+B+" === '' "),n+=" ) "+B+" = ","shared"==t.opts.useDefaults?n+=" "+t.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}var U=S.rules;if(U)for(var K,J=-1,Q=U.length-1;J<Q;)if(Z(K=U[J+=1])){var G=K.code(t,K.keyword,S.type);G&&(n+=" "+G+" ",f&&(b+="}"))}if(f&&(n+=" "+b+" ",b=""),S.type&&(n+=" } ",w&&w===S.type&&!k)){n+=" else { ";var X;d=t.schemaPath+".type",p=t.errSchemaPath+"/type";(X=X||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",n+=E?""+w.join(","):""+w,n+="' } ",!1!==t.opts.messages&&(n+=" , message: 'should be ",n+=E?""+w.join(","):""+w,n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";v=n;n=X.pop(),!t.compositeRule&&f?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=_?"0":"errs_"+c,n+=") { ",x+="}")}}function Y(t){for(var e=t.rules,i=0;i<e.length;i++)if(Z(e[i]))return!0}function Z(e){return void 0!==t.schema[e.keyword]||e.implements&&function(e){for(var i=e.implements,n=0;n<i.length;n++)if(void 0!==t.schema[i[n]])return!0}(e)}return f&&(n+=" "+x+" "),_?(r?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+c+";",n=t.util.cleanUpCode(n),_&&(n=t.util.finalCleanUpCode(n,r)),n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d=t.opts.$data&&a&&a.$data;d?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a;var p="maximum"==e,f=p?"exclusiveMaximum":"exclusiveMinimum",m=t.schema[f],g=t.opts.$data&&m&&m.$data,v=p?"<":">",_=p?">":"<",y=void 0;if(g){var b=t.util.getData(m.$data,o,t.dataPathArr),x="exclusive"+s,w="exclType"+s,E="exclIsNumber"+s,k="' + "+(C="op"+s)+" + '";r+=" var schemaExcl"+s+" = "+b+"; ",r+=" var "+x+"; var "+w+" = typeof "+(b="schemaExcl"+s)+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var S;y=f;(S=S||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: '"+f+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var P=r;r=S.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" "+w+" == 'number' ? ( ("+x+" = "+n+" === undefined || "+b+" "+v+"= "+n+") ? "+h+" "+_+"= "+b+" : "+h+" "+_+" "+n+" ) : ( ("+x+" = "+b+" === true) ? "+h+" "+_+"= "+n+" : "+h+" "+_+" "+n+" ) || "+h+" !== "+h+") { var op"+s+" = "+x+" ? '"+v+"' : '"+v+"='; ",void 0===a&&(y=f,c=t.errSchemaPath+"/"+f,n=b,d=g)}else{k=v;if((E="number"==typeof m)&&d){var C="'"+k+"'";r+=" if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" ( "+n+" === undefined || "+m+" "+v+"= "+n+" ? "+h+" "+_+"= "+m+" : "+h+" "+_+" "+n+" ) || "+h+" !== "+h+") { "}else{E&&void 0===a?(x=!0,y=f,c=t.errSchemaPath+"/"+f,n=m,_+="="):(E&&(n=Math[p?"min":"max"](m,a)),m===(!E||n)?(x=!0,y=f,c=t.errSchemaPath+"/"+f,_+="="):(x=!1,k+="="));C="'"+k+"'";r+=" if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" "+h+" "+_+" "+n+" || "+h+" !== "+h+") { "}}y=y||e,(S=S||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { comparison: "+C+", limit: "+n+", exclusive: "+x+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be "+k+" ",r+=d?"' + "+n:n+"'"),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+l:""+a,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";P=r;return r=S.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d=t.opts.$data&&a&&a.$data;d?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a,r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" "+h+".length "+("maxItems"==e?">":"<")+" "+n+") { ";var p=e,f=f||[];f.push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have ",r+="maxItems"==e?"more":"fewer",r+=" than ",r+=d?"' + "+n+" + '":""+a,r+=" items' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+l:""+a,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var m=r;return r=f.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d=t.opts.$data&&a&&a.$data;d?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a;var p="maxLength"==e?">":"<";r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===t.opts.unicode?r+=" "+h+".length ":r+=" ucs2length("+h+") ",r+=" "+p+" "+n+") { ";var f=e,m=m||[];m.push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be ",r+="maxLength"==e?"longer":"shorter",r+=" than ",r+=d?"' + "+n+" + '":""+a,r+=" characters' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+l:""+a,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d=t.opts.$data&&a&&a.$data;d?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a,r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),r+=" Object.keys("+h+").length "+("maxProperties"==e?">":"<")+" "+n+") { ";var p=e,f=f||[];f.push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have ",r+="maxProperties"==e?"more":"fewer",r+=" than ",r+=d?"' + "+n+" + '":""+a,r+=" properties' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+l:""+a,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var m=r;return r=f.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(t,e){t.exports=function(t,e){var i,n,r,s,o=0;return function(){i=this,n=arguments;var t=new Date-o;return s||(t>=e?a():s=setTimeout(a,e-t)),r};function a(){s=0,o=+new Date,r=t.apply(i,n),i=null,n=null}}},function(t,e,i){"use strict";const n=(t,e,i)=>{const n=i<0?t.length+i:i,r=t.splice(e,1)[0];t.splice(n,0,r)},r=(t,e,i)=>(t=t.slice(),n(t,e,i),t);t.exports=r,t.exports.default=r,t.exports.mutate=n},function(t,e,i){var n=i(24).EventEmitter;function r(t){n.call(this),t=t||{},this.states=t.states||["default"],this.currentState=t.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var e=this;this.on("transition",(function(t){e.events.forEach((function(i){i.from===t.from&&i.to===t.to&&e.emit(i.event)}))}))}r.prototype=Object.create(n.prototype),r.prototype.setState=function(t){var e=this.currentState;if(!this._validate(e,t))return!1;this.history.push({state:e,args:this.currentArgs});var i=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=i,this.currentState=t,this._emit(e,t,i),!0},r.prototype.back=function(){if(!this.history.length)return!1;var t=this.history[this.history.length-1],e=this.currentState,i=t.state,n=t.args;return!!this._validate(e,i)&&(this.history.pop(),this.currentState=i,this.currentArgs=n,this._emit(e,i,n,!0),!0)},r.prototype.lock=function(){this.locked=!0},r.prototype.unlock=function(){this.locked=!1},r.prototype.config=function(t,e){e.to=e.to||{},e.from=e.from||{},this.configs[t]=e},r.prototype.register=function(t,e){this.events.push({event:t,from:e.from,to:e.to})},r.prototype._emit=function(t,e,i,n){var r={from:t,to:e,args:i,back:n};this.emit("transition",r),this.emit("leave:"+t,r),this.emit("enter:"+e,r)},r.prototype._validate=function(t,e){if(!(this.locked||t===e||this.states.indexOf(e)<0)){var i=this.configs[t];if(i)if(i.to.only){if(i.to.only.indexOf(e)<0)return}else if(i.to.exclude&&i.to.exclude.indexOf(e)>-1)return;var n=this.configs[e];if(n)if(n.from.only){if(n.from.only.indexOf(t)<0)return}else if(n.from.exclude&&n.from.exclude.indexOf(t)>-1)return;return!0}},t.exports=r},function(t){t.exports=JSON.parse('{"name":"textae","description":"text annotation editor","version":"6.1.24","author":"jdkim","bugs":{"url":"https://github.com/pubannotation/textae/issues"},"devDependencies":{"ajv":"^6.11.0","alertifyjs":"^1.13.1","array-move":"^2.2.2","clean-css-cli":"^4.3.0","concat":"^1.0.3","connect":"^3.7.0","cpx":"^1.5.0","debounce":"^1.2.0","delegate":"^3.2.0","dohtml":"^0.1.0","emitter-fsm":"0.0.2","eslint":"^6.8.0","eslint-config-prettier":"^6.9.0","eslint-plugin-prettier":"^3.1.2","handlebars":"^4.7.2","jquery":"^2.2.4","jquery-ui":"^1.12.1","jsondiffpatch":"^0.4.1","less":"^3.10.3","less-watch-compiler":"^1.14.5","mkdirp":"^1.0.4","npm-run-all":"^4.1.5","observ":"^0.2.0","open-cli":"^6.0.1","prettier":"^1.19.1","replace-in-file":"^6.1.0","rimraf":"^3.0.2","serve-favicon":"^2.5.0","serve-static":"^1.14.1","sticky-kit":"github:leafo/sticky-kit","throttleit":"^1.0.0","webpack":"^4.44.2","webpack-cli":"^3.3.12","yui":"^3.18.1"},"homepage":"https://github.com/pubannotation/textae","keywords":["DBCLS","annotation","javascript"],"license":"MIT","main":"src/development.html","repository":{"type":"git","url":"https://github.com/pubannotation/textae.git"},"scripts":{"dev:open":"open-cli \'http://localhost:8000/dev/development.html\'","dev:server":"node dev/development-sever.js","dev:watch-less":"less-watch-compiler src/lib/css src/lib/css textae.less","dev:watch":"webpack --config webpack.dev.js","dist":"npm-run-all dist:clean dist:build","dist:bundle":"webpack --config webpack.prod.js","dist:build":"npm-run-all -p dist:build:**","dist:build:copy":"npm-run-all dist:copy dist:replace:version","dist:build:css":"npm-run-all dist:less dist:concat:css dist:cleancss","dist:build:js":"npm-run-all dist:lint dist:bundle dist:concat:js","dist:clean":"rimraf dist/* src/lib/bundle.js","dist:cleancss":"cleancss -o dist/lib/css/$npm_package_name-$npm_package_version.min.css dist/lib/css/$npm_package_name-$npm_package_version.css","dist:concat:css":"mkdirp dist/lib/css & concat -o dist/lib/css/$npm_package_name-$npm_package_version.css src/lib/css/textae.css","dist:concat:js":"mkdirp dist/lib & concat -o dist/lib/$npm_package_name-$npm_package_version.min.js node_modules/jquery/dist/jquery.min.js src/lib/modules/jquery.jsPlumb-1.5.5-min.js src/lib/bundle.js","dist:copy":"npm-run-all -p dist:copy:**","dist:copy:app":"cpx src/app/editor.html dist","dist:copy:demo":"cpx \'src/demo/**\' dist/demo","dist:copy:fonts":"cpx \'src/lib/fonts/**\' dist/lib/fonts","dist:copy:images":"cpx \'src/lib/css/images/**.png\' dist/lib/css/images","dist:less":"lessc \'src/lib/css/textae.less\' \'src/lib/css/textae.css\'","dist:lint":"eslint src/lib","dist:replace:version":"replace-in-file /{{version}}/g $npm_package_version dist/editor.html,dist/demo/**/*.html --isRegex","watch":"npm-run-all -p dev:watch dev:watch-less dev:server dev:open"},"dependencies":{}}')},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return(r?"/":"")+(e=i(n(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var s=e.isAbsolute(t),o="/"===r(t,-1);return(t=i(n(t.split("/"),(function(t){return!!t})),!s).join("/"))||s||(t="."),t&&o&&(t+="/"),(s?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),s=n(i.split("/")),o=Math.min(r.length,s.length),a=o,l=0;l<o;l++)if(r[l]!==s[l]){a=l;break}var c=[];for(l=a;l<r.length;l++)c.push("..");return(c=c.concat(s.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,n=-1,r=!0,s=t.length-1;s>=1;--s)if(47===(e=t.charCodeAt(s))){if(!r){n=s;break}}else r=!1;return-1===n?i?"/":".":i&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var i=function(t){"string"!=typeof t&&(t+="");var e,i=0,n=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){i=e+1;break}}else-1===n&&(r=!1,n=e+1);return-1===n?"":t.slice(i,n)}(t);return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,i=0,n=-1,r=!0,s=0,o=t.length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===n&&(r=!1,n=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!r){i=o+1;break}}return-1===e||-1===n||0===s||1===s&&e===n-1&&e===i+1?"":t.slice(e,n)};var r="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(93))},function(t,e,i){"use strict";var n=i(94),r=i(21),s=i(98),o=i(37),a=i(38),l=i(99),c=i(100),u=i(121),h=i(11);t.exports=v,v.prototype.validate=function(t,e){var i;if("string"==typeof t){if(!(i=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);i=n.validate||this._compile(n)}var r=i(e);!0!==i.$async&&(this.errors=i.errors);return r},v.prototype.compile=function(t,e){var i=this._addSchema(t,void 0,e);return i.validate||this._compile(i)},v.prototype.addSchema=function(t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;s++)this.addSchema(t[s],void 0,i,n);return this}var o=this._getId(t);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return E(this,e=r.normalizeId(e||o)),this._schemas[e]=this._addSchema(t,i,n,!0),this},v.prototype.addMetaSchema=function(t,e,i){return this.addSchema(t,e,i,!0),this},v.prototype.validateSchema=function(t,e){var i=t.$schema;if(void 0!==i&&"string"!=typeof i)throw new Error("$schema must be a string");if(!(i=i||this._opts.defaultMeta||function(t){var e=t._opts.meta;return t._opts.defaultMeta="object"==typeof e?t._getId(e)||e:t.getSchema(f)?f:void 0,t._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(i,t);if(!n&&e){var r="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(r);this.logger.error(r)}return n},v.prototype.getSchema=function(t){var e=_(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(t,e){var i=r.schema.call(t,{schema:{}},e);if(i){var s=i.schema,a=i.root,l=i.baseId,c=n.call(t,s,a,void 0,l);return t._fragments[e]=new o({ref:e,fragment:!0,schema:s,root:a,baseId:l,validate:c}),c}}(this,t)}},v.prototype.removeSchema=function(t){if(t instanceof RegExp)return y(this,this._schemas,t),y(this,this._refs,t),this;switch(typeof t){case"undefined":return y(this,this._schemas),y(this,this._refs),this._cache.clear(),this;case"string":var e=_(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var i=this._opts.serialize,n=i?i(t):t;this._cache.del(n);var s=this._getId(t);s&&(s=r.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},v.prototype.addFormat=function(t,e){"string"==typeof e&&(e=new RegExp(e));return this._formats[t]=e,this},v.prototype.errorsText=function(t,e){if(!(t=t||this.errors))return"No errors";for(var i=void 0===(e=e||{}).separator?", ":e.separator,n=void 0===e.dataVar?"data":e.dataVar,r="",s=0;s<t.length;s++){var o=t[s];o&&(r+=n+o.dataPath+" "+o.message+i)}return r.slice(0,-i.length)},v.prototype._addSchema=function(t,e,i,n){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var s=this._opts.serialize,a=s?s(t):t,l=this._cache.get(a);if(l)return l;n=n||!1!==this._opts.addUsedSchema;var c=r.normalizeId(this._getId(t));c&&n&&E(this,c);var u,h=!1!==this._opts.validateSchema&&!e;h&&!(u=c&&c==r.normalizeId(t.$schema))&&this.validateSchema(t,!0);var d=r.ids.call(this,t),p=new o({id:c,schema:t,localRefs:d,cacheKey:a,meta:i});"#"!=c[0]&&n&&(this._refs[c]=p);this._cache.put(a,p),h&&u&&this.validateSchema(t,!0);return p},v.prototype._compile=function(t,e){if(t.compiling)return t.validate=s,s.schema=t.schema,s.errors=null,s.root=e||s,!0===t.schema.$async&&(s.$async=!0),s;var i,r;t.compiling=!0,t.meta&&(i=this._opts,this._opts=this._metaOpts);try{r=n.call(this,t.schema,e,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=i)}return t.validate=r,t.refs=r.refs,t.refVal=r.refVal,t.root=r.root,r;function s(){var e=t.validate,i=e.apply(this,arguments);return s.errors=e.errors,i}},v.prototype.compileAsync=i(122);var d=i(123);v.prototype.addKeyword=d.add,v.prototype.getKeyword=d.get,v.prototype.removeKeyword=d.remove,v.prototype.validateKeyword=d.validate;var p=i(23);v.ValidationError=p.Validation,v.MissingRefError=p.MissingRef,v.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function v(t){if(!(this instanceof v))return new v(t);t=this._opts=h.copy(t)||{},function(t){var e=t._opts.logger;if(!1===e)t.logger={log:k,warn:k,error:k};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new s,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(t){switch(t.schemaId){case"auto":return w;case"id":return b;default:return x}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=a),this._metaOpts=function(t){for(var e=h.copy(t._opts),i=0;i<m.length;i++)delete e[m[i]];return e}(this),t.formats&&function(t){for(var e in t._opts.formats){var i=t._opts.formats[e];t.addFormat(e,i)}}(this),function(t){var e;t._opts.$data&&(e=i(126),t.addMetaSchema(e,e.$id,!0));if(!1===t._opts.meta)return;var n=i(44);t._opts.$data&&(n=u(n,g));t.addMetaSchema(n,f,!0),t._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(t){var e=t._opts.schemas;if(!e)return;if(Array.isArray(e))t.addSchema(e);else for(var i in e)t.addSchema(e[i],i)}(this)}function _(t,e){return e=r.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function y(t,e,i){for(var n in e){var r=e[n];r.meta||i&&!i.test(n)||(t._cache.del(r.cacheKey),delete e[n])}}function b(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function x(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function w(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function E(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function k(){}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"JSON schema for texta configuration files","definitions":{"characters":{"type":"array","items":{"type":"string","minLength":1,"maxLength":1}},"color":{"pattern":"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"},"default":{"type":"boolean"},"denote":{"type":"object","required":["id"],"properties":{"id":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"},"default":{"$ref":"#/definitions/default"}}},"types":{"type":"array","items":{"$ref":"#/definitions/denote"}},"autocompletion_ws":{"type":"string","format":"uri-reference"}},"type":"object","properties":{"delimiter characters":{"$ref":"#/definitions/characters"},"non-edge characters":{"$ref":"#/definitions/characters"},"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"autosave":{"type":"boolean"},"autolineheight":{"type":"boolean"},"boundarydetection":{"type":"boolean"},"entity types":{"$ref":"#/definitions/types"},"relation types":{"$ref":"#/definitions/types"},"attribute types":{"type":"array","items":{"type":"object","required":["pred","value type"],"properties":{"pred":{"type":"string"},"value type":{"enum":["flag","selection","string","numeric"]}},"allOf":[{"if":{"properties":{"value type":{"const":"flag"}}},"then":{"properties":{"color":{"$ref":"#/definitions/color"},"label":{"type":"string"}}}},{"if":{"properties":{"value type":{"const":"selection"}}},"then":{"required":["values"],"properties":{"values":{"type":"array","items":{"$ref":"#/definitions/denote"}}}}},{"if":{"properties":{"value type":{"const":"string"}}},"then":{"required":["default"],"properties":{"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"default":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["pattern"],"properties":{"pattern":{"type":"string","format":"regex"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}},{"if":{"properties":{"value type":{"const":"numeric"}}},"then":{"required":["default","min","max","step"],"properties":{"default":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"values":{"type":"array","items":{"type":"object","required":["range"],"properties":{"range":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}}]}}}}')},function(t,e,i){"use strict";var n=i(127),r=i(129);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=y(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i(130);function y(t,e,i){if(t&&r.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,i),n}s.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var y=t=c.join(a);if(y=y.trim(),!i&&1===t.split("#").length){var b=l.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=o.exec(y);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,y=y.substr(x.length)}if(i||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===y.substr(0,2);!E||x&&g[x]||(y=y.substr(2),this.slashes=!0)}if(!g[x]&&(E||x&&!v[x])){for(var k,S,P=-1,C=0;C<d.length;C++){-1!==(D=y.indexOf(d[C]))&&(-1===P||D<P)&&(P=D)}-1!==(S=-1===P?y.lastIndexOf("@"):y.lastIndexOf("@",P))&&(k=y.slice(0,S),y=y.slice(S+1),this.auth=decodeURIComponent(k)),P=-1;for(C=0;C<h.length;C++){var D;-1!==(D=y.indexOf(h[C]))&&(-1===P||D<P)&&(P=D)}-1===P&&(P=y.length),this.host=y.slice(0,P),y=y.slice(P),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var A=this.hostname.split(/\./),O=(C=0,A.length);C<O;C++){var N=A[C];if(N&&!N.match(p)){for(var j="",I=0,M=N.length;I<M;I++)N.charCodeAt(I)>127?j+="x":j+=N[I];if(!j.match(p)){var L=A.slice(0,C),R=A.slice(C+1),H=N.match(f);H&&(L.push(H[1]),R.unshift(H[2])),R.length&&(y="/"+R.join(".")+y),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var F=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+F,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[w])for(C=0,O=u.length;C<O;C++){var z=u[C];if(-1!==y.indexOf(z)){var B=encodeURIComponent(z);B===z&&(B=escape(z)),y=y.split(z).join(B)}}var W=y.indexOf("#");-1!==W&&(this.hash=y.substr(W),y=y.slice(0,W));var q=y.indexOf("?");if(-1!==q?(this.search=y.substr(q),this.query=y.substr(q+1),e&&(this.query=_.parse(this.query)),y=y.slice(0,q)):e&&(this.search="",this.query={}),y&&(this.pathname=y),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var V=this.search||"";this.path=F+V}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(i[u]=t[u])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var p=h[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",_=i.search||"";i.path=m+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||y||i.host&&t.pathname,w=x,E=i.pathname&&i.pathname.split("/")||[],k=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(k&&(i.hostname="",i.port=null,i.host&&(""===E[0]?E[0]=i.host:E.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===E[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(k)i.hostname=i.host=E.shift(),(T=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=T.shift(),i.host=i.hostname=T.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!E.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=E.slice(-1)[0],P=(i.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,C=0,D=E.length;D>=0;D--)"."===(S=E[D])?E.splice(D,1):".."===S?(E.splice(D,1),C++):C&&(E.splice(D,1),C--);if(!x&&!w)for(;C--;C)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),P&&"/"!==E.join("/").substr(-1)&&E.push("");var T,A=""===E[0]||E[0]&&"/"===E[0].charAt(0);k&&(i.hostname=i.host=A?"":E.length?E.shift():"",(T=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=T.shift(),i.host=i.hostname=T.shift()));return(x=x||i.host&&E.length)&&!A&&E.unshift(""),E.length?i.pathname=E.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";(function(t){i(2),i(133);const n=t.jQuery.noConflict(!0);e.a=function(t){n(t).stick_in_parent()}}).call(this,i(17))},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(55),i(26),i(18),i(64),i(29),i(15),i(19),i(16),i(28),i(66),i(30),i(5),i(8)],void 0===(s="function"==typeof(n=function(t){return t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get(),s=Math.max.apply(null,r);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),r=i.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){r.trigger("focus")})),e.preventDefault()):(this._delay((function(){n.trigger("focus")})),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,(function(i,n){var r,s;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),r=n.click,s={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,t("<button></button>",n).button(s).appendTo(e.uiButtonSet).on("click",(function(){r.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function n(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,n(r))},drag:function(t,i){e._trigger("drag",t,n(i))},stop:function(r,s){var o=s.offset.left-e.document.scrollLeft(),a=s.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(a>=0?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",r,n(s))}})},_makeResizable:function(){var e=this,i=this.options,n=i.resizable,r=this.uiDialog.css("position"),s="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function o(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,n){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,o(n))},resize:function(t,i){e._trigger("resize",t,o(i))},stop:function(n,r){var s=e.uiDialog.offset(),a=s.left-e.document.scrollLeft(),l=s.top-e.document.scrollTop();i.height=e.uiDialog.height(),i.width=e.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",n,o(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,r={};t.each(e,(function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(r[t]=e)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,i){var n,r,s=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((n=s.is(":data(ui-draggable)"))&&!i&&s.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((r=s.is(":data(ui-resizable)"))&&!i&&s.resizable("destroy"),r&&"string"==typeof i&&s.resizable("option","handles",i),r||!1===i||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay((function(){e=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(56),i(57),i(15),i(8)],void 0===(s="function"==typeof(n=function(t){var e;return t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var n="iconPosition"!==e,r=n?this.options.iconPosition:i,s="top"===r||"bottom"===r;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(r),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(e=t.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(8)],void 0===(s="function"==typeof(n=function(t){var e=/ui-corner-([a-z]){2,6}/g;return t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,(function(n,r){var s,o={};if(r)return"controlgroupLabel"===n?((s=e.element.find(r)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(s.get()))):void(t.fn[n]&&(o=e["_"+n+"Options"]?e["_"+n+"Options"]("middle"):{classes:{}},e.element.find(r).each((function(){var r=t(this),s=r[n]("instance"),a=t.widget.extend({},o);if("button"!==n||!r.parent(".ui-spinner").length){s||(s=r[n]()[n]("instance")),s&&(a.classes=e._resolveClassesValues(a.classes,s)),r[n](a);var l=r[n]("widget");t.data(l[0],"ui-controlgroup-data",s||r[n]("instance")),i.push(l[0])}}))))})),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()}))},_updateCornerClass:function(t,e){var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(i,n){var r={};return t.each(i,(function(s){var o=n.options.classes[s]||"";o=t.trim(o.replace(e,"")),r[s]=(o+" "+i[s]).replace(/\s+/g," ")})),r},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,n){var r=e[n]().data("ui-controlgroup-data");if(r&&i["_"+r.widgetName+"Options"]){var s=i["_"+r.widgetName+"Options"](1===e.length?"only":n);s.classes=i._resolveClassesValues(s.classes,r),r.element[r.widgetName](s)}else i._updateCornerClass(e[n](),n)})),this._callChildMethod("refresh"))}})})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(25),i(58),i(60),i(8)],void 0===(s="function"==typeof(n=function(t){return t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,n=this,r=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){n.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(r.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(r.disabled=e),r},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.ui.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter((function(){return 0===t(this).form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(59),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var i=e.data("ui-form-reset-instances");t.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5),i(25)],void 0===(s="function"==typeof(n=function(t){return t.fn.labels=function(){var e,i,n,r,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),(n=this.attr("id"))&&(s=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(n)+"']",r=r.add(s.find(i).addBack(i))),this.pushStack(r))}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,n){return!!t.data(e,n[3])}})})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter((function(){var e=t(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==i&&s.length?s:t(this[0].ownerDocument||document)}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(18),i(65),i(27),i(5),i(8)],void 0===(s="function"==typeof(n=function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n,r=i&&"left"===i?"scrollLeft":"scrollTop";return e[r]>0||(e[r]=1,n=e[r]>0,e[r]=0,n)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())})).on("mouseleave",(function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,i,n,r,s,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)r="ui-resizable-"+(e=t.trim(n[i])),s=t("<div>"),this._addClass(s,"ui-resizable-handle "+r),s.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(s);this._renderAxis=function(e){var i,n,r,s;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(r,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")})),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,r=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var i,n,r,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),s.containment&&(i+=t(s.containment).scrollLeft()||0,n+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,r=this.originalMousePosition,s=this.axis,o=e.pageX-r.left||0,a=e.pageY-r.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,o,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,r,s,o,a,l,c=this.options;return this._helper&&(r=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,s=n?0:this.sizeDiff.width,o={width:this.helper.width()-s,height:this.helper.height()-r},a=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(t.extend(o,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,r,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return s&&(t.width=e.minWidth),o&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),s&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),o&&u&&(t.top=l-e.minHeight),r&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(r[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&t(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,r,s,o,a,l=t(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,d=h instanceof t?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(l.containerElement=t(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,n){i[t]=l._num(e.css("padding"+n))})),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,r=l.containerSize.height,s=l.containerSize.width,o=l._hasScroll(d,"left")?d.scrollWidth:s,a=l._hasScroll(d)?d.scrollHeight:r,l.parentData={element:d,left:n.left,top:n.top,width:o,height:a}))},resize:function(e){var i,n,r,s,o=t(this).resizable("instance"),a=o.options,l=o.containerOffset,c=o.position,u=o._aspectRatio||e.shiftKey,h={top:0,left:0},d=o.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-h.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=a.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?l.top:0),r=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),r&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-h.left:o.offset.left-l.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-h.top:o.offset.top-l.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,r=e.containerPosition,s=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,c=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(s.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(s.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var n=t(this).resizable("instance"),r=n.options,s=n.originalSize,o=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0};t(r.alsoResize).each((function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),r={},s=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,(function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(r[e]=i||null)})),e.css(r)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,r=i.size,s=i.originalSize,o=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,h=Math.round((r.width-s.width)/c)*c,d=Math.round((r.height-s.height)/u)*u,p=s.width+h,f=s.height+d,m=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>p,_=n.minHeight&&n.minHeight>f;n.grid=l,v&&(p+=c),_&&(f+=u),m&&(p-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=o.top-d):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=o.left-h):((f-u<=0||p-c<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-d):(f=u-e.height,i.size.height=f,i.position.top=o.top+s.height-f),p-c>0?(i.size.width=p,i.position.left=o.left-h):(p=c-e.width,i.size.width=p,i.position.left=o.left+s.width-p))}}),t.ui.resizable})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5)],void 0===(s="function"==typeof(n=function(t){return t.fn.extend({disableSelection:(e="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(e+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var e})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(5),i(29)],void 0===(s="function"==typeof(n=function(t){return t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),n=null!=i;return(!n||i>=0)&&t.ui.focusable(e,n)}})})?n.apply(e,r):n)||(t.exports=s)},function(t,e){var i={create:function(t){var e;if(t=t.trim(),/<.*>/g.test(t)){var i=document.createElement("div");i.innerHTML=t,e=i.firstChild}else e=document.createElement(t);if(!this.isValidNode(e))throw new Error("Element not valid");return e},isValidNode:function(t){return t&&"nodeType"in t},render:function(t,e){var i;if(e=null==(i=e)?[]:Array.isArray(i)?i:[i],!this.isValidNode(t))throw new Error("Require a valid HTML Element");return e.forEach((function(e){t.appendChild(e)})),t}};t.exports=i},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0;var s=r(i(20)),o=n(i(79)),a=n(i(7)),l=r(i(6)),c=r(i(80)),u=n(i(34));function h(){var t=new s.HandlebarsEnvironment;return l.extend(t,s),t.SafeString=o.default,t.Exception=a.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var d=h();d.create=h,u.default(d),d.default=d,e.default=d,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(6);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,i){var r=i.inverse,s=i.fn;if(!0===e)return s(this);if(!1===e||null==e)return r(this);if(n.isArray(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):r(this);if(i.data&&i.ids){var o=n.createFrame(i.data);o.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:o}}return s(e,i)}))},t.exports=e.default},function(t,e,i){"use strict";(function(n){e.__esModule=!0;var r,s=i(6),o=i(7),a=(r=o)&&r.__esModule?r:{default:r};e.default=function(t){t.registerHelper("each",(function(t,e){if(!e)throw new a.default("Must pass iterator to #each");var i,r=e.fn,o=e.inverse,l=0,c="",u=void 0,h=void 0;function d(e,i,n){u&&(u.key=e,u.index=i,u.first=0===i,u.last=!!n,h&&(u.contextPath=h+e)),c+=r(t[e],{data:u,blockParams:s.blockParams([t[e],e],[h+e,null])})}if(e.data&&e.ids&&(h=s.appendContextPath(e.data.contextPath,e.ids[0])+"."),s.isFunction(t)&&(t=t.call(this)),e.data&&(u=s.createFrame(e.data)),t&&"object"==typeof t)if(s.isArray(t))for(var p=t.length;l<p;l++)l in t&&d(l,l,l===t.length-1);else if(n.Symbol&&t[n.Symbol.iterator]){for(var f=[],m=t[n.Symbol.iterator](),g=m.next();!g.done;g=m.next())f.push(g.value);for(p=(t=f).length;l<p;l++)d(l,l,l===t.length-1)}else i=void 0,Object.keys(t).forEach((function(t){void 0!==i&&d(i,l-1),i=t,l++})),void 0!==i&&d(i,l-1,!0);return 0===l&&(c=o(this)),c}))},t.exports=e.default}).call(this,i(17))},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(7),s=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(6),s=i(7),o=(n=s)&&n.__esModule?n:{default:n};e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,i){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}))},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var r=1;null!=i.hash.level?r=i.hash.level:i.data&&null!=i.data.level&&(r=i.data.level),e[0]=r,t.log.apply(t,e)}))},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,i){return t?i.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(6),s=i(7),o=(n=s)&&n.__esModule?n:{default:n};e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");r.isFunction(t)&&(t=t.call(this));var i=e.fn;if(r.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&((n=r.createFrame(e.data)).contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),i(t,{data:n,blockParams:r.blockParams([t],[n&&n.contextPath])})}))},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.registerDefaultDecorators=function(t){s.default(t)};var n,r=i(77),s=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(6);e.default=function(t){t.registerDecorator("inline",(function(t,e,i,r){var s=t;return e.partials||(e.partials={},s=function(r,s){var o=i.partials;i.partials=n.extend({},o,e.partials);var a=t(r,s);return i.partials=o,a}),e.partials[r.args[0]]=r.fn,s}))},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.extend.apply(void 0,[Object.create(null)].concat(e))};var n=i(6)},function(t,e,i){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,i=a.COMPILER_REVISION;if(e>=a.LAST_COMPATIBLE_COMPILER_REVISION&&e<=a.COMPILER_REVISION)return;if(e<a.LAST_COMPATIBLE_COMPILER_REVISION){var n=a.REVISION_CHANGES[i],r=a.REVISION_CHANGES[e];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+r+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")},e.template=function(t,e){if(!e)throw new o.default("No environment passed to template");if(!t||!t.main)throw new o.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i=t.compiler&&7===t.compiler[0];var n={strict:function(t,e,i){if(!t||!(e in t))throw new o.default('"'+e+'" not defined in '+t,{loc:i});return t[e]},lookupProperty:function(t,e){var i=t[e];return null==i||Object.prototype.hasOwnProperty.call(t,e)||u.resultIsAllowed(i,n.protoAccessControl,e)?i:void 0},lookup:function(t,e){for(var i=t.length,r=0;r<i;r++){if(null!=(t[r]&&n.lookupProperty(t[r],e)))return t[r][e]}},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:r.escapeExpression,invokePartial:function(i,n,s){s.hash&&(n=r.extend({},n,s.hash),s.ids&&(s.ids[0]=!0)),i=e.VM.resolvePartial.call(this,i,n,s);var a=r.extend({},s,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=e.VM.invokePartial.call(this,i,n,a);if(null==l&&e.compile&&(s.partials[s.name]=e.compile(i,t.compilerOptions,e),l=s.partials[s.name](n,a)),null!=l){if(s.indent){for(var c=l.split("\n"),u=0,h=c.length;u<h&&(c[u]||u+1!==h);u++)c[u]=s.indent+c[u];l=c.join("\n")}return l}throw new o.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var i=t[e];return i.decorator=t[e+"_d"],i},programs:[],program:function(t,e,i,n,r){var s=this.programs[t],o=this.fn(t);return e||r||n||i?s=h(this,t,o,e,i,n,r):s||(s=this.programs[t]=h(this,t,o)),s},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=r.extend({},e,t)),i},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};function s(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=i.data;s._setup(i),!i.partial&&t.useData&&(r=p(e,r));var o=void 0,a=t.useBlockParams?[]:void 0;function l(e){return""+t.main(n,e,n.helpers,n.partials,r,a,o)}return t.useDepths&&(o=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(l=f(t.main,l,n,i.depths||[],r,a))(e,i)}return s.isTop=!0,s._setup=function(s){if(s.partial)n.protoAccessControl=s.protoAccessControl,n.helpers=s.helpers,n.partials=s.partials,n.decorators=s.decorators,n.hooks=s.hooks;else{var o=r.extend({},e.helpers,s.helpers);!function(t,e){Object.keys(t).forEach((function(i){var n=t[i];t[i]=function(t,e){var i=e.lookupProperty;return c.wrapHelper(t,(function(t){return r.extend({lookupProperty:i},t)}))}(n,e)}))}(o,n),n.helpers=o,t.usePartial&&(n.partials=n.mergeIfNeeded(s.partials,e.partials)),(t.usePartial||t.useDecorators)&&(n.decorators=r.extend({},e.decorators,s.decorators)),n.hooks={},n.protoAccessControl=u.createProtoAccessControl(s);var a=s.allowCallsToHelperMissing||i;l.moveHelperToHooks(n,"helperMissing",a),l.moveHelperToHooks(n,"blockHelperMissing",a)}},s._child=function(e,i,r,s){if(t.useBlockParams&&!r)throw new o.default("must pass block params");if(t.useDepths&&!s)throw new o.default("must pass parent depths");return h(n,e,t[e],i,0,r,s)},s},e.wrapProgram=h,e.resolvePartial=function(t,e,i){t?t.call||i.name||(i.name=t,t=i.partials[t]):t="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name];return t},e.invokePartial=function(t,e,i){var n=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var s=void 0;i.fn&&i.fn!==d&&function(){i.data=a.createFrame(i.data);var t=i.fn;s=i.data["partial-block"]=function(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.data=a.createFrame(i.data),i.data["partial-block"]=n,t(e,i)},t.partials&&(i.partials=r.extend({},i.partials,t.partials))}();void 0===t&&s&&(t=s);if(void 0===t)throw new o.default("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)},e.noop=d;var n,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),s=i(7),o=(n=s)&&n.__esModule?n:{default:n},a=i(20),l=i(31),c=i(81),u=i(33);function h(t,e,i,n,r,s,o){function a(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o;return!o||e==o[0]||e===t.nullContext&&null===o[0]||(a=[e].concat(o)),i(t,e,t.helpers,t.partials,r.data||n,s&&[r.blockParams].concat(s),a)}return(a=f(i,a,t,o,n,s)).program=e,a.depth=o?o.length:0,a.blockParams=r||0,a}function d(){return""}function p(t,e){return e&&"root"in e||((e=e?a.createFrame(e):{}).root=t),e}function f(t,e,i,n,s,o){if(t.decorator){var a={};e=t.decorator(e,a,i,n&&n[0],s,o,n),r.extend(e,a)}return e}},function(t,e,i){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){if("function"!=typeof t)return t;return function(){var i=arguments[arguments.length-1];return arguments[arguments.length-1]=e(i),t.apply(this,arguments)}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.parseWithoutProcessing=c,e.parse=function(t,e){var i=c(t,e);return new s.default(e).accept(i)};var r=n(i(83)),s=n(i(84)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(85)),a=i(6);e.parser=r.default;var l={};function c(t,e){return"Program"===t.type?t:(r.default.yy=l,l.locInfo=function(t){return new l.SourceLocation(e&&e.srcName,t)},r.default.parse(t))}a.extend(l,o)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,i,n,r,s,o){var a=s.length-1;switch(r){case 1:return s[a-1];case 2:this.$=n.prepareProgram(s[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=s[a];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(s[a]),strip:n.stripFlags(s[a],s[a]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[a],value:s[a],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 12:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 13:this.$=n.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 14:this.$=n.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 15:this.$={open:s[a-5],path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 16:case 17:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 18:this.$={strip:n.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 19:var l=n.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),c=n.prepareProgram([l],s[a-1].loc);c.chained=!0,this.$={strip:s[a-2].strip,program:c,chain:!0};break;case 20:this.$=s[a];break;case 21:this.$={path:s[a-1],strip:n.stripFlags(s[a-2],s[a])};break;case 22:case 23:this.$=n.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],n.stripFlags(s[a-4],s[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[a-3],params:s[a-2],hash:s[a-1],indent:"",strip:n.stripFlags(s[a-4],s[a]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(s[a-2],s[a-1],s[a],this._$);break;case 26:this.$={path:s[a-3],params:s[a-2],hash:s[a-1],strip:n.stripFlags(s[a-4],s[a])};break;case 27:case 28:this.$=s[a];break;case 29:this.$={type:"SubExpression",path:s[a-3],params:s[a-2],hash:s[a-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[a],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(s[a-2]),value:s[a],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(s[a-1]);break;case 33:case 34:this.$=s[a];break;case 35:this.$={type:"StringLiteral",value:s[a],original:s[a],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[a]),original:Number(s[a]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[a],original:"true"===s[a],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=s[a];break;case 42:this.$=n.preparePath(!0,s[a],this._$);break;case 43:this.$=n.preparePath(!1,s[a],this._$);break;case 44:s[a-2].push({part:n.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 45:this.$=[{part:n.id(s[a]),original:s[a]}];break;case 46:this.$=[];break;case 47:s[a-1].push(s[a]);break;case 48:this.$=[];break;case 49:s[a-1].push(s[a]);break;case 50:this.$=[];break;case 51:s[a-1].push(s[a]);break;case 58:this.$=[];break;case 59:s[a-1].push(s[a]);break;case 64:this.$=[];break;case 65:s[a-1].push(s[a]);break;case 70:this.$=[];break;case 71:s[a-1].push(s[a]);break;case 78:this.$=[];break;case 79:s[a-1].push(s[a]);break;case 82:this.$=[];break;case 83:s[a-1].push(s[a]);break;case 86:this.$=[];break;case 87:s[a-1].push(s[a]);break;case 90:this.$=[];break;case 91:s[a-1].push(s[a]);break;case 94:this.$=[];break;case 95:s[a-1].push(s[a]);break;case 98:this.$=[s[a]];break;case 99:s[a-1].push(s[a]);break;case 100:this.$=[s[a]];break;case 101:s[a-1].push(s[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,i=[0],n=[null],r=[],s=this.table,o="",a=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,f,m,g,v,_,y,b,x,w={};;){if(f=i[i.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==d&&(x=void 0,"number"!=typeof(x=e.lexer.lex()||1)&&(x=e.symbols_[x]||x),d=x),m=s[f]&&s[f][d]),void 0===m||!m.length||!m[0]){var E="";if(!c){for(v in b=[],s[f])this.terminals_[v]&&v>2&&b.push("'"+this.terminals_[v]+"'");E=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:b})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+d);switch(m[0]){case 1:i.push(d),n.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),d=null,p?(d=p,p=null):(l=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(_=this.productions_[m[1]][1],w.$=n[n.length-_],w._$={first_line:r[r.length-(_||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(_||1)].first_column,last_column:r[r.length-1].last_column},h&&(w._$.range=[r[r.length-(_||1)].range[0],r[r.length-1].range[1]]),void 0!==(g=this.performAction.call(w,o,l,a,this.yy,m[1],n,r)))return g;_&&(i=i.slice(0,-1*_*2),n=n.slice(0,-1*_),r=r.slice(0,-1*_)),i.push(this.productions_[m[1]][0]),n.push(w.$),r.push(w._$),y=s[i[i.length-2]][i[i.length-1]],i.push(y);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,i,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(!(i=this._input.match(this.rules[s[o]]))||e&&!(i[0].length>e[0].length)||(e=i,n=o,this.options.flex));o++);return e?((r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,i,n){function r(t,i){return e.yytext=e.yytext.substring(t,e.yyleng-i+t)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(r(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=r(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=r(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();function i(){this.yy={}}return t.lexer=e,i.prototype=t,t.Parser=i,new i}();e.default=n,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(36),s=(n=r)&&n.__esModule?n:{default:n};function o(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function a(t,e,i){void 0===e&&(e=t.length);var n=t[e-1],r=t[e-2];return n?"ContentStatement"===n.type?(r||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function l(t,e,i){void 0===e&&(e=-1);var n=t[e+1],r=t[e+2];return n?"ContentStatement"===n.type?(r||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function c(t,e,i){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var r=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==r}}function u(t,e,i){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var r=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==r,n.leftStripped}}o.prototype=new s.default,o.prototype.Program=function(t){var e=!this.options.ignoreStandalone,i=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,r=0,s=n.length;r<s;r++){var o=n[r],h=this.accept(o);if(h){var d=a(n,r,i),p=l(n,r,i),f=h.openStandalone&&d,m=h.closeStandalone&&p,g=h.inlineStandalone&&d&&p;h.close&&c(n,r,!0),h.open&&u(n,r,!0),e&&g&&(c(n,r),u(n,r)&&"PartialStatement"===o.type&&(o.indent=/([ \t]+$)/.exec(n[r-1].original)[1])),e&&f&&(c((o.program||o.inverse).body),u(n,r)),e&&m&&(c(n,r),u((o.inverse||o.program).body))}}return t},o.prototype.BlockStatement=o.prototype.DecoratorBlock=o.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,i=t.program&&t.inverse,n=i,r=i;if(i&&i.chained)for(n=i.body[0].program;r.chained;)r=r.body[r.body.length-1].program;var s={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:l(e.body),closeStandalone:a((n||e).body)};if(t.openStrip.close&&c(e.body,null,!0),i){var o=t.inverseStrip;o.open&&u(e.body,null,!0),o.close&&c(n.body,null,!0),t.closeStrip.open&&u(r.body,null,!0),!this.options.ignoreStandalone&&a(e.body)&&l(n.body)&&(u(e.body),c(n.body))}else t.closeStrip.open&&u(e.body,null,!0);return s},o.prototype.Decorator=o.prototype.MustacheStatement=function(t){return t.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=o,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,i){i=this.locInfo(i);for(var n=t?"@":"",r=[],o=0,a=0,l=e.length;a<l;a++){var c=e[a].part,u=e[a].original!==c;if(n+=(e[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)r.push(c);else{if(r.length>0)throw new s.default("Invalid path: "+n,{loc:i});".."===c&&o++}}return{type:"PathExpression",data:t,depth:o,parts:r,original:n,loc:i}},e.prepareMustache=function(t,e,i,n,r,s){var o=n.charAt(3)||n.charAt(2),a="{"!==o&&"&"!==o;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:i,escaped:a,strip:r,loc:this.locInfo(s)}},e.prepareRawBlock=function(t,e,i,n){o(t,i),n=this.locInfo(n);var r={type:"Program",body:e,strip:{},loc:n};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:r,openStrip:{},inverseStrip:{},closeStrip:{},loc:n}},e.prepareBlock=function(t,e,i,n,r,a){n&&n.path&&o(t,n);var l=/\*/.test(t.open);e.blockParams=t.blockParams;var c=void 0,u=void 0;if(i){if(l)throw new s.default("Unexpected inverse block on decorator",i);i.chain&&(i.program.body[0].closeStrip=n.strip),u=i.strip,c=i.program}r&&(r=c,c=e,e=r);return{type:l?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:c,openStrip:t.strip,inverseStrip:u,closeStrip:n&&n.strip,loc:this.locInfo(a)}},e.prepareProgram=function(t,e){if(!e&&t.length){var i=t[0].loc,n=t[t.length-1].loc;i&&n&&(e={source:i.source,start:{line:i.start.line,column:i.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,i,n){return o(t,i),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:i&&i.strip,loc:this.locInfo(n)}};var n,r=i(7),s=(n=r)&&n.__esModule?n:{default:n};function o(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var i={loc:t.path.loc};throw new s.default(t.path.original+" doesn't match "+e,i)}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Compiler=l,e.precompile=function(t,e,i){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0);e.compat&&(e.useDepths=!0);var n=i.parse(t,e),s=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(s,e)},e.compile=function(t,e,i){void 0===e&&(e={});if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=s.extend({},e))||(e.data=!0);e.compat&&(e.useDepths=!0);var n=void 0;function o(){var n=i.parse(t,e),r=(new i.Compiler).compile(n,e),s=(new i.JavaScriptCompiler).compile(r,e,void 0,!0);return i.template(s)}function a(t,e){return n||(n=o()),n.call(this,t,e)}return a._setup=function(t){return n||(n=o()),n._setup(t)},a._child=function(t,e,i,r){return n||(n=o()),n._child(t,e,i,r)},a};var r=n(i(7)),s=i(6),o=n(i(35)),a=[].slice;function l(){}function c(t,e){if(t===e)return!0;if(s.isArray(t)&&s.isArray(e)&&t.length===e.length){for(var i=0;i<t.length;i++)if(!c(t[i],e[i]))return!1;return!0}}function u(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}l.prototype={compiler:l,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;i<e;i++){var n=this.opcodes[i],r=t.opcodes[i];if(n.opcode!==r.opcode||!c(n.args,r.args))return!1}e=this.children.length;for(i=0;i<e;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=s.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),i=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[i]=e,this.useDepths=this.useDepths||e.useDepths,i},accept:function(t){if(!this[t.type])throw new r.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,i=e.length,n=0;n<i;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){u(t);var e=t.program,i=t.inverse;e=e&&this.compileProgram(e),i=i&&this.compileProgram(i);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,i):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,i),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),i=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",i.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var i=t.params;if(i.length>1)throw new r.default("Unsupported number of partial arguments: "+i.length,t);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,s="SubExpression"===t.name.type;s&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",s,n,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){u(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,i){var n=t.path,r=n.parts[0],s=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),s=t.path,a=s.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",n.length,a);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+a,t);s.strict=!0,s.falsy=!0,this.accept(s),this.opcode("invokeHelper",n.length,s.original,o.default.helpers.simpleId(s))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],i=o.default.helpers.scopedId(t),n=!t.depth&&!i&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,i):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,i=0,n=e.length;for(this.opcode("pushHash");i<n;i++)this.pushParam(e[i].value);for(;i--;)this.opcode("assignToHash",e[i].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=o.default.helpers.simpleId(t.path),i=e&&!!this.blockParamIndex(t.path.parts[0]),n=!i&&o.default.helpers.helperExpression(t),r=!i&&(n||e);if(r&&!n){var s=t.path.parts[0],a=this.options;a.knownHelpers[s]?n=!0:a.knownHelpersOnly&&(r=!1)}return n?"helper":r?"ambiguous":"simple"},pushParams:function(t){for(var e=0,i=t.length;e<i;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var i=void 0;if(!t.parts||o.default.helpers.scopedId(t)||t.depth||(i=this.blockParamIndex(t.parts[0])),i){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,i,n){var r=t.params;return this.pushParams(r),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),r},blockParamIndex:function(t){for(var e=0,i=this.options.blockParams.length;e<i;e++){var n=this.options.blockParams[e],r=n&&s.indexOf(n,t);if(n&&r>=0)return[e,r]}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(20),s=n(i(7)),o=i(6),a=n(i(88));function l(t){this.value=t}function c(){}c.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=r.COMPILER_REVISION;return[t,r.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,i){return o.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:i?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,i,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var r=t.opcodes,o=void 0,a=void 0,l=void 0,c=void 0;for(l=0,c=r.length;l<c;l++)o=r[l],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(n);if(this.isChild)return u;var h={compiler:this.compilerInfo(),main:u};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,p=d.programs,f=d.decorators;for(l=0,c=p.length;l<c;l++)p[l]&&(h[l]=p[l],f[l]&&(h[l+"_d"]=f[l],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName),this.decorators=new a.default(this.options.srcName)},createFunctionContext:function(t){var e=this,i="",n=this.stackVars.concat(this.registers.list);n.length>0&&(i+=", "+n.join(", "));var r=0;Object.keys(this.aliases).forEach((function(t){var n=e.aliases[t];n.children&&n.referenceCount>1&&(i+=", alias"+ ++r+"="+t,n.children[0]="alias"+r)})),this.lookupPropertyFunctionIsUsed&&(i+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var o=this.mergeSource(i);return t?(s.push(o),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",o,"}"])},mergeSource:function(t){var e=this.environment.isSimple,i=!this.forceBuffer,n=void 0,r=void 0,s=void 0,o=void 0;return this.source.each((function(t){t.appendToBuffer?(s?t.prepend("  + "):s=t,o=t):(s&&(r?s.prepend("buffer += "):n=!0,o.add(";"),s=o=void 0),r=!0,e||(i=!1))})),i?s?(s.prepend("return "),o.add(";")):r||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(t,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(e,"call",i))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var i=this.topStack();e.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,i,n){var r=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[r++])),this.resolvePath("context",t,r,e,i)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,i){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,i)},resolvePath:function(t,e,i,n,r){var s=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,i,n){var r=e.popStack(),s=0,o=i.length;t&&o--;for(;s<o;s++)r=e.nameLookup(r,i[s],n);return t?[e.aliasable("container.strict"),"(",r,", ",e.quotedString(i[s]),", ",JSON.stringify(e.source.currentLocation)," )"]:r}(this.options.strict&&r,this,e,t));else for(var o=e.length;i<o;i++)this.replaceStack((function(r){var o=s.nameLookup(r,e[i],t);return n?[" && ",o]:[" != null ? ",o," : ",r]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var i=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(i,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,i){var n=this.popStack(),r=this.setupHelper(t,e),s=[];i&&s.push(r.name),s.push(n),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(s,"||"),")"],a=this.source.functionCall(o,"call",r.callParams);this.push(a)},itemsSeparatedBy:function(t,e){var i=[];i.push(t[0]);for(var n=1;n<t.length;n++)i.push(e,t[n]);return i},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),r=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",i,")"];this.options.strict||(r[0]="(helper = ",r.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",r,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,i){var n=[],r=this.setupParams(e,1,n);t&&(e=this.popStack(),delete r.name),i&&(r.indent=JSON.stringify(i)),r.helpers="helpers",r.partials="partials",r.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),n.push(r),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),i=void 0,n=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var s=this.hash;i&&(s.contexts[t]=i),n&&(s.types[t]=n),r&&(s.ids[t]=r),s.values[t]=e},pushId:function(t,e,i){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:c,compileChildren:function(t,e){for(var i=t.children,n=void 0,r=void 0,s=0,o=i.length;s<o;s++){n=i[s],r=new this.compiler;var a=this.matchExistingProgram(n);if(null==a){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=r.compile(n,e,this.context,!this.precompile),this.context.decorators[l]=r.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=a.index,n.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;e<i;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],i=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"container.program("+i.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof l||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new l(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],i=void 0,n=void 0,r=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof l)e=["(",i=[o.value]],r=!0;else{n=!0;var a=this.incrStack();e=["((",this.push(a)," = ",o,")"],i=this.topStack()}var c=t.call(this,i);r||this.popStack(),n&&this.stackSlot--,this.push(e.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n instanceof l)this.compileStack.push(n);else{var r=this.incrStack();this.pushSource([r," = ",n,";"]),this.compileStack.push(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof l)return i.value;if(!e){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof l?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,i){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,i),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(t,e,i){var n={},r=[],s=[],o=[],a=!i,l=void 0;a&&(i=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(n.fn=u||"container.noop",n.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),i[h]=l,this.trackIds&&(o[h]=this.popStack()),this.stringParams&&(s[h]=this.popStack(),r[h]=this.popStack());return a&&(n.args=this.source.generateArray(i)),this.trackIds&&(n.ids=this.source.generateArray(o)),this.stringParams&&(n.types=this.source.generateArray(s),n.contexts=this.source.generateArray(r)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,i,n){var r=this.setupParams(t,e,i);return r.loc=JSON.stringify(this.source.currentLocation),r=this.objectLiteral(r),n?(this.useRegister("options"),i.push("options"),["options=",r]):i?(i.push(r),""):r}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=c.RESERVED_WORDS={},i=0,n=t.length;i<n;i++)e[t[i]]=!0}(),c.isValidJavaScriptVariableName=function(t){return!c.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=c,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(6),r=void 0;try{}catch(t){}function s(t,e,i){if(n.isArray(t)){for(var r=[],s=0,o=t.length;s<o;s++)r.push(e.wrap(t[s],i));return r}return"boolean"==typeof t||"number"==typeof t?t+"":t}function o(t){this.srcFile=t,this.source=[]}r||((r=function(t,e,i,n){this.src="",n&&this.add(n)}).prototype={add:function(t){n.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){n.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,i=this.source.length;e<i;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new r(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof r?t:(t=s(t,this,e),new r(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,i){return i=this.generateList(i),this.wrap([t,e?"."+e+"(":"(",i,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,i=[];Object.keys(t).forEach((function(n){var r=s(t[n],e);"undefined"!==r&&i.push([e.quotedString(n),":",r])}));var n=this.generateList(i);return n.prepend("{"),n.add("}"),n},generateList:function(t){for(var e=this.empty(),i=0,n=t.length;i<n;i++)i&&e.add(","),e.add(s(t[i],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=o,t.exports=e.default},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(91),i(15),i(19),i(16),i(5),i(8)],void 0===(s="function"==typeof(n=function(t){return t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,r=this.element[0].nodeName.toLowerCase(),s="textarea"===r,o="input"===r;this.isMultiLine=s||!o&&this._isContentEditable(this.element),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var s=t.ui.keyCode;switch(r.keyCode){case s.PAGE_UP:e=!0,this._move("previousPage",r);break;case s.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case s.UP:e=!0,this._keyEvent("previous",r);break;case s.DOWN:e=!0,this._keyEvent("next",r);break;case s.ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case s.TAB:this.menu.active&&this.menu.select(r);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var r=t.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(e,i){var n,r;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));r=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),(n=i.item.attr("aria-label")||r.value)&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(e,i){var n=i.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=r,this._delay((function(){this.previous=r,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,r){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||i||n)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy((function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,(function(t,i){n._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return n.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n,r,s;
/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[i(2),i(15),i(19),i(16),i(30),i(5),i(8)],void 0===(s="function"==typeof(n=function(t){return t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),n=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),n=t(e.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay((function(){!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,n,r,s,o=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=!1,n=this.previousFilter||"",s=!1,r=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),r===n?s=!0:r=n+r,i=this._filterMenuItems(r),(i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(e.keyCode),i=this._filterMenuItems(r)),i.length?(this.focus(e,i),this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}o&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,n,r,s=this,o=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);s._addClass(n,"ui-menu-icon","ui-icon "+o),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")})),r=(n=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,r;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,r,s,o,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=e.outerHeight(),r<0?this.activeMenu.scrollTop(s+r):r+a>o&&this.activeMenu.scrollTop(s+r-o+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n}),this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,r;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-n-r<0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,n,r;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-n+r>0})),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))}))}})})?n.apply(e,r):n)||(t.exports=s)},function(t,e){},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var t=a(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=i(21),r=i(11),s=i(23),o=i(38),a=i(39),l=r.ucs2length,c=i(22),u=s.Validation;function h(t,e,i){var n=p.call(this,t,e,i);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:i},{index:n,compiling:!1})}function d(t,e,i){var n=p.call(this,t,e,i);n>=0&&this._compilations.splice(n,1)}function p(t,e,i){for(var n=0;n<this._compilations.length;n++){var r=this._compilations[n];if(r.schema==t&&r.root==e&&r.baseId==i)return n}return-1}function f(t,e){return"var pattern"+t+" = new RegExp("+r.toQuotedString(e[t])+");"}function m(t){return"var default"+t+" = defaults["+t+"];"}function g(t,e){return void 0===e[t]?"":"var refVal"+t+" = refVal["+t+"];"}function v(t){return"var customRule"+t+" = customRules["+t+"];"}function _(t,e){if(!t.length)return"";for(var i="",n=0;n<t.length;n++)i+=e(n,t);return i}t.exports=function t(e,i,p,y){var b=this,x=this._opts,w=[void 0],E={},k=[],S={},P=[],C={},D=[];i=i||{schema:e,refVal:w,refs:E};var T=h.call(this,e,i,y),A=this._compilations[T.index];if(T.compiling)return A.callValidate=function t(){var e=A.validate,i=e.apply(this,arguments);return t.errors=e.errors,i};var O=this._formats,N=this.RULES;try{var j=M(e,i,p,y);A.validate=j;var I=A.callValidate;return I&&(I.schema=j.schema,I.errors=null,I.refs=j.refs,I.refVal=j.refVal,I.root=j.root,I.$async=j.$async,x.sourceCode&&(I.source=j.source)),j}finally{d.call(this,e,i,y)}function M(e,o,h,d){var p=!o||o&&o.schema==e;if(o.schema!=i.schema)return t.call(b,e,o,h,d);var y,S=!0===e.$async,C=a({isTop:!0,schema:e,isRoot:p,baseId:d,root:o,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:s.MissingRef,RULES:N,validate:a,util:r,resolve:n,resolveRef:L,usePattern:F,useDefault:$,useCustomRule:z,opts:x,formats:O,logger:b.logger,self:b});C=_(w,g)+_(k,f)+_(P,m)+_(D,v)+C,x.processCode&&(C=x.processCode(C));try{y=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(b,N,O,i,w,P,D,c,l,u),w[0]=y}catch(t){throw b.logger.error("Error compiling schema, function code:",C),t}return y.schema=e,y.errors=null,y.refs=E,y.refVal=w,y.root=p?y:o,S&&(y.$async=!0),!0===x.sourceCode&&(y.source={code:C,patterns:k,defaults:P}),y}function L(e,r,s){r=n.url(e,r);var o,a,l=E[r];if(void 0!==l)return H(o=w[l],a="refVal["+l+"]");if(!s&&i.refs){var c=i.refs[r];if(void 0!==c)return H(o=i.refVal[c],a=R(r,o))}a=R(r);var u=n.call(b,M,i,r);if(void 0===u){var h=p&&p[r];h&&(u=n.inlineRef(h,x.inlineRefs)?h:t.call(b,h,i,p,e))}if(void 0!==u)return function(t,e){var i=E[t];w[i]=e}(r,u),H(u,a);!function(t){delete E[t]}(r)}function R(t,e){var i=w.length;return w[i]=e,E[t]=i,"refVal"+i}function H(t,e){return"object"==typeof t||"boolean"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&!!t.$async}}function F(t){var e=S[t];return void 0===e&&(e=S[t]=k.length,k[e]=t),"pattern"+e}function $(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return r.toQuotedString(t);case"object":if(null===t)return"null";var e=o(t),i=C[e];return void 0===i&&(i=C[e]=P.length,P[i]=t),"default"+i}}function z(t,e,i,n){if(!1!==b._opts.validateSchema){var r=t.definition.dependencies;if(r&&!r.every((function(t){return Object.prototype.hasOwnProperty.call(i,t)})))throw new Error("parent schema must have all required keywords: "+r.join(","));var s=t.definition.validateSchema;if(s)if(!s(e)){var o="keyword schema is invalid: "+b.errorsText(s.errors);if("log"!=b._opts.validateSchema)throw new Error(o);b.logger.error(o)}}var a,l=t.definition.compile,c=t.definition.inline,u=t.definition.macro;if(l)a=l.call(b,e,i,n);else if(u)a=u.call(b,e,i,n),!1!==x.validateSchema&&b.validateSchema(a,!0);else if(c)a=c.call(b,n,t.keyword,e,i);else if(!(a=t.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var h=D.length;return D[h]=a,{code:"customRule"+h,validate:a}}}},function(t,e,i){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length>1){e[0]=e[0].slice(0,-1);for(var n=e.length-1,r=1;r<n;++r)e[r]=e[r].slice(1,-1);return e[n]=e[n].slice(1),e.join("")}return e[0]}function i(t){return"(?:"+t+")"}function n(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function r(t){return t.toUpperCase()}function s(t){var n=e("[0-9]","[A-Fa-f]"),r=i(i("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+i("%[89A-Fa-f]"+n+"%"+n+n)+"|"+i("%"+n+n)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=e("[\\:\\/\\?\\#\\[\\]\\@]",s),a=t?"[\\uE000-\\uF8FF]":"[]",l=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=i("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=i(i(r+"|"+e(l,s,"[\\:]"))+"*"),h=(i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("[1-9][0-9]")+"|[0-9]"),i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("0?[1-9][0-9]")+"|0?0?[0-9]")),d=i(h+"\\."+h+"\\."+h+"\\."+h),p=i(n+"{1,4}"),f=i(i(p+"\\:"+p)+"|"+d),m=i(i(p+"\\:")+"{6}"+f),g=i("\\:\\:"+i(p+"\\:")+"{5}"+f),v=i(i(p)+"?\\:\\:"+i(p+"\\:")+"{4}"+f),_=i(i(i(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+i(p+"\\:")+"{3}"+f),y=i(i(i(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+i(p+"\\:")+"{2}"+f),b=i(i(i(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+f),x=i(i(i(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+f),w=i(i(i(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),E=i(i(i(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),k=i([m,g,v,_,y,b,x,w,E].join("|")),S=i(i(l+"|"+r)+"+"),P=(i(k+"\\%25"+S),i(k+i("\\%25|\\%(?!"+n+"{2})")+S)),C=i("[vV]"+n+"+\\."+e(l,s,"[\\:]")+"+"),D=i("\\["+i(P+"|"+k+"|"+C)+"\\]"),T=i(i(r+"|"+e(l,s))+"*"),A=i(D+"|"+d+"(?!"+T+")|"+T),O=i("[0-9]*"),N=i(i(u+"@")+"?"+A+i("\\:"+O)+"?"),j=i(r+"|"+e(l,s,"[\\:\\@]")),I=i(j+"*"),M=i(j+"+"),L=i(i(r+"|"+e(l,s,"[\\@]"))+"+"),R=i(i("\\/"+I)+"*"),H=i("\\/"+i(M+R)+"?"),F=i(L+R),$=i(M+R),z="(?!"+j+")",B=(i(R+"|"+H+"|"+F+"|"+$+"|"+z),i(i(j+"|"+e("[\\/\\?]",a))+"*")),W=i(i(j+"|[\\/\\?]")+"*"),q=i(i("\\/\\/"+N+R)+"|"+H+"|"+$+"|"+z),V=i(c+"\\:"+q+i("\\?"+B)+"?"+i("\\#"+W)+"?"),U=i(i("\\/\\/"+N+R)+"|"+H+"|"+F+"|"+z),K=i(U+i("\\?"+B)+"?"+i("\\#"+W)+"?");return i(V+"|"+K),i(c+"\\:"+q+i("\\?"+B)+"?"),i(i("\\/\\/("+i("("+u+")@")+"?("+A+")"+i("\\:("+O+")")+"?)")+"?("+R+"|"+H+"|"+$+"|"+z+")"),i("\\?("+B+")"),i("\\#("+W+")"),i(i("\\/\\/("+i("("+u+")@")+"?("+A+")"+i("\\:("+O+")")+"?)")+"?("+R+"|"+H+"|"+F+"|"+z+")"),i("\\?("+B+")"),i("\\#("+W+")"),i(i("\\/\\/("+i("("+u+")@")+"?("+A+")"+i("\\:("+O+")")+"?)")+"?("+R+"|"+H+"|"+$+"|"+z+")"),i("\\?("+B+")"),i("\\#("+W+")"),i("("+u+")@"),i("\\:("+O+")"),{NOT_SCHEME:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",l,s),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",l,s),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",l,s),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",l,s),"g"),NOT_QUERY:new RegExp(e("[^\\%]",l,s,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",l,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",l,s),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",l,o),"g"),PCT_ENCODED:new RegExp(r,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+k+")"+i(i("\\%25|\\%(?!"+n+"{2})")+"("+S+")")+"?\\]?$")}}var o=s(!1),a=s(!0),l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=/^xn--/,h=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(t){throw new RangeError(p[t])}function v(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]);var r=function(t,e){for(var i=[],n=t.length;n--;)i[n]=e(t[n]);return i}((t=t.replace(d,".")).split("."),e).join(".");return n+r}function _(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),i--)}else e.push(r)}return e}var y=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},b=function(t,e,i){var n=0;for(t=i?f(t/700):t>>1,t+=f(t/e);t>455;n+=36)t=f(t/35);return f(n+36*t/(t+38))},x=function(t){var e,i=[],n=t.length,r=0,s=128,o=72,a=t.lastIndexOf("-");a<0&&(a=0);for(var l=0;l<a;++l)t.charCodeAt(l)>=128&&g("not-basic"),i.push(t.charCodeAt(l));for(var u=a>0?a+1:0;u<n;){for(var h=r,d=1,p=36;;p+=36){u>=n&&g("invalid-input");var m=(e=t.charCodeAt(u++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(m>=36||m>f((c-r)/d))&&g("overflow"),r+=m*d;var v=p<=o?1:p>=o+26?26:p-o;if(m<v)break;var _=36-v;d>f(c/_)&&g("overflow"),d*=_}var y=i.length+1;o=b(r-h,y,0==h),f(r/y)>c-s&&g("overflow"),s+=f(r/y),r%=y,i.splice(r++,0,s)}return String.fromCodePoint.apply(String,i)},w=function(t){var e=[],i=(t=_(t)).length,n=128,r=0,s=72,o=!0,a=!1,l=void 0;try{for(var u,h=t[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var d=u.value;d<128&&e.push(m(d))}}catch(t){a=!0,l=t}finally{try{!o&&h.return&&h.return()}finally{if(a)throw l}}var p=e.length,v=p;for(p&&e.push("-");v<i;){var x=c,w=!0,E=!1,k=void 0;try{for(var S,P=t[Symbol.iterator]();!(w=(S=P.next()).done);w=!0){var C=S.value;C>=n&&C<x&&(x=C)}}catch(t){E=!0,k=t}finally{try{!w&&P.return&&P.return()}finally{if(E)throw k}}var D=v+1;x-n>f((c-r)/D)&&g("overflow"),r+=(x-n)*D,n=x;var T=!0,A=!1,O=void 0;try{for(var N,j=t[Symbol.iterator]();!(T=(N=j.next()).done);T=!0){var I=N.value;if(I<n&&++r>c&&g("overflow"),I==n){for(var M=r,L=36;;L+=36){var R=L<=s?1:L>=s+26?26:L-s;if(M<R)break;var H=M-R,F=36-R;e.push(m(y(R+H%F,0))),M=f(H/F)}e.push(m(y(M,0))),s=b(r,D,v==p),r=0,++v}}}catch(t){A=!0,O=t}finally{try{!T&&j.return&&j.return()}finally{if(A)throw O}}++r,++n}return e.join("")},E=function(t){return v(t,(function(t){return h.test(t)?"xn--"+w(t):t}))},k=function(t){return v(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))},S={};function P(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function C(t){for(var e="",i=0,n=t.length;i<n;){var r=parseInt(t.substr(i+1,2),16);if(r<128)e+=String.fromCharCode(r),i+=3;else if(r>=194&&r<224){if(n-i>=6){var s=parseInt(t.substr(i+4,2),16);e+=String.fromCharCode((31&r)<<6|63&s)}else e+=t.substr(i,6);i+=6}else if(r>=224){if(n-i>=9){var o=parseInt(t.substr(i+4,2),16),a=parseInt(t.substr(i+7,2),16);e+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}else e+=t.substr(i,9);i+=9}else e+=t.substr(i,3),i+=3}return e}function D(t,e){function i(t){var i=C(t);return i.match(e.UNRESERVED)?i:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,i).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,i).replace(e.NOT_USERINFO,P).replace(e.PCT_ENCODED,r)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,i).toLowerCase().replace(e.NOT_HOST,P).replace(e.PCT_ENCODED,r)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,i).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,P).replace(e.PCT_ENCODED,r)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,i).replace(e.NOT_QUERY,P).replace(e.PCT_ENCODED,r)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,i).replace(e.NOT_FRAGMENT,P).replace(e.PCT_ENCODED,r)),t}function T(t){return t.replace(/^0*(.*)/,"$1")||"0"}function A(t,e){var i=t.match(e.IPV4ADDRESS)||[],n=l(i,2)[1];return n?n.split(".").map(T).join("."):t}function O(t,e){var i=t.match(e.IPV6ADDRESS)||[],n=l(i,3),r=n[1],s=n[2];if(r){for(var o=r.toLowerCase().split("::").reverse(),a=l(o,2),c=a[0],u=a[1],h=u?u.split(":").map(T):[],d=c.split(":").map(T),p=e.IPV4ADDRESS.test(d[d.length-1]),f=p?7:8,m=d.length-f,g=Array(f),v=0;v<f;++v)g[v]=h[v]||d[m+v]||"";p&&(g[f-1]=A(g[f-1],e));var _=g.reduce((function(t,e,i){if(!e||"0"===e){var n=t[t.length-1];n&&n.index+n.length===i?n.length++:t.push({index:i,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],y=void 0;if(_&&_.length>1){var b=g.slice(0,_.index),x=g.slice(_.index+_.length);y=b.join(":")+"::"+x.join(":")}else y=g.join(":");return s&&(y+="%"+s),y}return t}var N=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,j=void 0==="".match(/(){0}/)[1];function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},n=!1!==e.iri?a:o;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var r=t.match(N);if(r){j?(i.scheme=r[1],i.userinfo=r[3],i.host=r[4],i.port=parseInt(r[5],10),i.path=r[6]||"",i.query=r[7],i.fragment=r[8],isNaN(i.port)&&(i.port=r[5])):(i.scheme=r[1]||void 0,i.userinfo=-1!==t.indexOf("@")?r[3]:void 0,i.host=-1!==t.indexOf("//")?r[4]:void 0,i.port=parseInt(r[5],10),i.path=r[6]||"",i.query=-1!==t.indexOf("?")?r[7]:void 0,i.fragment=-1!==t.indexOf("#")?r[8]:void 0,isNaN(i.port)&&(i.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),i.host&&(i.host=O(A(i.host,n),n)),void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||i.path||void 0!==i.query?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==i.reference&&(i.error=i.error||"URI is not a "+e.reference+" reference.");var s=S[(e.scheme||i.scheme||"").toLowerCase()];if(e.unicodeSupport||s&&s.unicodeSupport)D(i,n);else{if(i.host&&(e.domainHost||s&&s.domainHost))try{i.host=E(i.host.replace(n.PCT_ENCODED,C).toLowerCase())}catch(t){i.error=i.error||"Host's domain name can not be converted to ASCII via punycode: "+t}D(i,o)}s&&s.parse&&s.parse(i,e)}else i.error=i.error||"URI can not be parsed.";return i}function M(t,e){var i=!1!==e.iri?a:o,n=[];return void 0!==t.userinfo&&(n.push(t.userinfo),n.push("@")),void 0!==t.host&&n.push(O(A(String(t.host),i),i).replace(i.IPV6ADDRESS,(function(t,e,i){return"["+e+(i?"%25"+i:"")+"]"}))),"number"==typeof t.port&&(n.push(":"),n.push(t.port.toString(10))),n.length?n.join(""):void 0}var L=/^\.\.?\//,R=/^\/\.(\/|$)/,H=/^\/\.\.(\/|$)/,F=/^\/?(?:.|\n)*?(?=\/|$)/;function $(t){for(var e=[];t.length;)if(t.match(L))t=t.replace(L,"");else if(t.match(R))t=t.replace(R,"/");else if(t.match(H))t=t.replace(H,"/"),e.pop();else if("."===t||".."===t)t="";else{var i=t.match(F);if(!i)throw new Error("Unexpected dot segment condition");var n=i[0];t=t.slice(n.length),e.push(n)}return e.join("")}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.iri?a:o,n=[],r=S[(e.scheme||t.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(t,e),t.host)if(i.IPV6ADDRESS.test(t.host));else if(e.domainHost||r&&r.domainHost)try{t.host=e.iri?k(t.host):E(t.host.replace(i.PCT_ENCODED,C).toLowerCase())}catch(i){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+i}D(t,i),"suffix"!==e.reference&&t.scheme&&(n.push(t.scheme),n.push(":"));var s=M(t,e);if(void 0!==s&&("suffix"!==e.reference&&n.push("//"),n.push(s),t.path&&"/"!==t.path.charAt(0)&&n.push("/")),void 0!==t.path){var l=t.path;e.absolutePath||r&&r.absolutePath||(l=$(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),n.push(l)}return void 0!==t.query&&(n.push("?"),n.push(t.query)),void 0!==t.fragment&&(n.push("#"),n.push(t.fragment)),n.join("")}function B(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],r={};return n||(t=I(z(t,i),i),e=I(z(e,i),i)),!(i=i||{}).tolerant&&e.scheme?(r.scheme=e.scheme,r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=$(e.path||""),r.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=$(e.path||""),r.query=e.query):(e.path?("/"===e.path.charAt(0)?r.path=$(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?r.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:r.path=e.path:r.path="/"+e.path,r.path=$(r.path)),r.query=e.query):(r.path=t.path,void 0!==e.query?r.query=e.query:r.query=t.query),r.userinfo=t.userinfo,r.host=t.host,r.port=t.port),r.scheme=t.scheme),r.fragment=e.fragment,r}function W(t,e){return t&&t.toString().replace(e&&e.iri?a.PCT_ENCODED:o.PCT_ENCODED,C)}var q={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){return t.port!==("https"!==String(t.scheme).toLowerCase()?80:443)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},V={scheme:"https",domainHost:q.domainHost,parse:q.parse,serialize:q.serialize},U={},K="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Q=i(i("%[EFef]"+J+"%"+J+J+"%"+J+J)+"|"+i("%[89A-Fa-f]"+J+"%"+J+J)+"|"+i("%"+J+J)),G=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(K,"g"),Y=new RegExp(Q,"g"),Z=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',G),"g"),tt=new RegExp(e("[^]",K,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),et=tt;function it(t){var e=C(t);return e.match(X)?e:t}var nt={scheme:"mailto",parse:function(t,e){var i=t,n=i.to=i.path?i.path.split(","):[];if(i.path=void 0,i.query){for(var r=!1,s={},o=i.query.split("&"),a=0,l=o.length;a<l;++a){var c=o[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,d=u.length;h<d;++h)n.push(u[h]);break;case"subject":i.subject=W(c[1],e);break;case"body":i.body=W(c[1],e);break;default:r=!0,s[W(c[0],e)]=W(c[1],e)}}r&&(i.headers=s)}i.query=void 0;for(var p=0,f=n.length;p<f;++p){var m=n[p].split("@");if(m[0]=W(m[0]),e.unicodeSupport)m[1]=W(m[1],e).toLowerCase();else try{m[1]=E(W(m[1],e).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}n[p]=m.join("@")}return i},serialize:function(t,e){var i,n=t,s=null!=(i=t.to)?i instanceof Array?i:"number"!=typeof i.length||i.split||i.setInterval||i.call?[i]:Array.prototype.slice.call(i):[];if(s){for(var o=0,a=s.length;o<a;++o){var l=String(s[o]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(Y,it).replace(Y,r).replace(Z,P),h=l.slice(c+1);try{h=e.iri?k(h):E(W(h,e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}s[o]=u+"@"+h}n.path=s.join(",")}var d=t.headers=t.headers||{};t.subject&&(d.subject=t.subject),t.body&&(d.body=t.body);var p=[];for(var f in d)d[f]!==U[f]&&p.push(f.replace(Y,it).replace(Y,r).replace(tt,P)+"="+d[f].replace(Y,it).replace(Y,r).replace(et,P));return p.length&&(n.query=p.join("&")),n}},rt=/^([^\:]+)\:(.*)/,st={scheme:"urn",parse:function(t,e){var i=t.path&&t.path.match(rt),n=t;if(i){var r=e.scheme||n.scheme||"urn",s=i[1].toLowerCase(),o=i[2],a=r+":"+(e.nid||s),l=S[a];n.nid=s,n.nss=o,n.path=void 0,l&&(n=l.parse(n,e))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(t,e){var i=e.scheme||t.scheme||"urn",n=t.nid,r=i+":"+(e.nid||n),s=S[r];s&&(t=s.serialize(t,e));var o=t,a=t.nss;return o.path=(n||e.nid)+":"+a,o}},ot=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,at={scheme:"urn:uuid",parse:function(t,e){var i=t;return i.uuid=i.nss,i.nss=void 0,e.tolerant||i.uuid&&i.uuid.match(ot)||(i.error=i.error||"UUID is not valid."),i},serialize:function(t,e){var i=t;return i.nss=(t.uuid||"").toLowerCase(),i}};S[q.scheme]=q,S[V.scheme]=V,S[nt.scheme]=nt,S[st.scheme]=st,S[at.scheme]=at,t.SCHEMES=S,t.pctEncChar=P,t.pctDecChars=C,t.parse=I,t.removeDotSegments=$,t.serialize=z,t.resolveComponents=B,t.resolve=function(t,e,i){var n=function(t,e){var i=t;if(e)for(var n in e)i[n]=e[n];return i}({scheme:"null"},i);return z(B(I(t,n),I(e,n),n,!0),n)},t.normalize=function(t,e){return"string"==typeof t?t=z(I(t,e),e):"object"===n(t)&&(t=I(z(t,e),e)),t},t.equal=function(t,e,i){return"string"==typeof t?t=z(I(t,i),i):"object"===n(t)&&(t=z(t,i)),"string"==typeof e?e=z(I(e,i),i):"object"===n(e)&&(e=z(e,i)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?a.ESCAPE:o.ESCAPE,P)},t.unescapeComponent=W,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,i){"use strict";t.exports=function(t){for(var e,i=0,n=t.length,r=0;r<n;)i++,(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<n&&56320==(64512&(e=t.charCodeAt(r)))&&r++;return i}},function(t,e,i){"use strict";var n=t.exports=function(t,e,i){"function"==typeof e&&(i=e,e={}),function t(e,i,r,s,o,a,l,c,u,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var d in i(s,o,a,l,c,u,h),s){var p=s[d];if(Array.isArray(p)){if(d in n.arrayKeywords)for(var f=0;f<p.length;f++)t(e,i,r,p[f],o+"/"+d+"/"+f,a,o,d,s,f)}else if(d in n.propsKeywords){if(p&&"object"==typeof p)for(var m in p)t(e,i,r,p[m],o+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,d,s,m)}else(d in n.keywords||e.allKeys&&!(d in n.skipKeywords))&&t(e,i,r,p,o+"/"+d,a,o,d,s)}r(s,o,a,l,c,u,h)}}(e,"function"==typeof(i=e.cb||i)?i:i.pre||function(){},i.post||function(){},t,"",t)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(t,e,i){"use strict";var n=t.exports=function(){this._cache={}};n.prototype.put=function(t,e){this._cache[t]=e},n.prototype.get=function(t){return this._cache[t]},n.prototype.del=function(t){delete this._cache[t]},n.prototype.clear=function(){this._cache={}}},function(t,e,i){"use strict";var n=i(11),r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(t){return t="full"==t?"full":"fast",n.copy(m[t])}function g(t){var e=t.match(r);if(!e)return!1;var i=+e[1],n=+e[2],o=+e[3];return n>=1&&n<=12&&o>=1&&o<=(2==n&&function(t){return t%4==0&&(t%100!=0||t%400==0)}(i)?29:s[n])}function v(t,e){var i=t.match(o);if(!i)return!1;var n=i[1],r=i[2],s=i[3],a=i[5];return(n<=23&&r<=59&&s<=59||23==n&&59==r&&60==s)&&(!e||a)}t.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":f},m.full={date:g,time:v,"date-time":function(t){var e=t.split(_);return 2==e.length&&g(e[0])&&v(e[1],!0)},uri:function(t){return y.test(t)&&l.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(t){return t.length<=255&&a.test(t)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var _=/t|\s/i;var y=/\/|:/;var b=/[^\\]\\Z/;function x(t){if(b.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}}},function(t,e,i){"use strict";var n=i(101),r=i(11).toHash;t.exports=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],e=["type","$comment"];return t.all=r(e),t.types=r(["number","integer","string","array","object","boolean","null"]),t.forEach((function(i){i.rules=i.rules.map((function(i){var r;if("object"==typeof i){var s=Object.keys(i)[0];r=i[s],i=s,r.forEach((function(i){e.push(i),t.all[i]=!0}))}return e.push(i),t.all[i]={keyword:i,code:n[i],implements:r}})),t.all.$comment={keyword:"$comment",code:n.$comment},i.type&&(t.types[i.type]=i)})),t.keywords=r(e.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}},function(t,e,i){"use strict";t.exports={$ref:i(102),allOf:i(103),anyOf:i(104),$comment:i(105),const:i(106),contains:i(107),dependencies:i(108),enum:i(109),format:i(110),if:i(111),items:i(112),maximum:i(40),minimum:i(40),maxItems:i(41),minItems:i(41),maxLength:i(42),minLength:i(42),maxProperties:i(43),minProperties:i(43),multipleOf:i(113),not:i(114),oneOf:i(115),pattern:i(116),properties:i(117),propertyNames:i(118),required:i(119),uniqueItems:i(120),validate:i(39)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r,s=" ",o=t.level,a=t.dataLevel,l=t.schema[e],c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(a||""),d="valid"+o;if("#"==l||"#/"==l)t.isRoot?(n=t.async,r="validate"):(n=!0===t.root.schema.$async,r="root.refVal[0]");else{var p=t.resolveRef(t.baseId,l,t.isRoot);if(void 0===p){var f=t.MissingRefError.message(t.baseId,l);if("fail"==t.opts.missingRefs){t.logger.error(f),(_=_||[]).push(s),s="",!1!==t.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { ref: '"+t.util.escapeQuotes(l)+"' } ",!1!==t.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(l)+"' "),t.opts.verbose&&(s+=" , schema: "+t.util.toQuotedString(l)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),s+=" } "):s+=" {} ";var m=s;s=_.pop(),!t.compositeRule&&u?t.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,l,f);t.logger.warn(f),u&&(s+=" if (true) { ")}}else if(p.inline){var g=t.util.copy(t);g.level++;var v="valid"+g.level;g.schema=p.schema,g.schemaPath="",g.errSchemaPath=l,s+=" "+t.validate(g).replace(/validate\.schema/g,p.code)+" ",u&&(s+=" if ("+v+") { ")}else n=!0===p.$async||t.async&&!1!==p.$async,r=p.code}if(r){var _;(_=_||[]).push(s),s="",t.opts.passContext?s+=" "+r+".call(this, ":s+=" "+r+"( ",s+=" "+h+", (dataPath || '')",'""'!=t.errorPath&&(s+=" + "+t.errorPath);var y=s+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?t.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(s=_.pop(),n){if(!t.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+d+"; "),s+=" try { await "+y+"; ",u&&(s+=" "+d+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+d+" = false; "),s+=" } ",u&&(s+=" if ("+d+") { ")}else s+=" if (!"+y+") { if (vErrors === null) vErrors = "+r+".errors; else vErrors = vErrors.concat("+r+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.schema[e],s=t.schemaPath+t.util.getProperty(e),o=t.errSchemaPath+"/"+e,a=!t.opts.allErrors,l=t.util.copy(t),c="";l.level++;var u="valid"+l.level,h=l.baseId,d=!0,p=r;if(p)for(var f,m=-1,g=p.length-1;m<g;)f=p[m+=1],(t.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:t.util.schemaHasRules(f,t.RULES.all))&&(d=!1,l.schema=f,l.schemaPath=s+"["+m+"]",l.errSchemaPath=o+"/"+m,n+="  "+t.validate(l)+" ",l.baseId=h,a&&(n+=" if ("+u+") { ",c+="}"));return a&&(n+=d?" if (true) { ":" "+c.slice(0,-1)+" "),n=t.util.cleanUpCode(n)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t),f="";p.level++;var m="valid"+p.level;if(o.every((function(e){return t.opts.strictKeywords?"object"==typeof e&&Object.keys(e).length>0:t.util.schemaHasRules(e,t.RULES.all)}))){var g=p.baseId;n+=" var "+d+" = errors; var "+h+" = false;  ";var v=t.compositeRule;t.compositeRule=p.compositeRule=!0;var _=o;if(_)for(var y,b=-1,x=_.length-1;b<x;)y=_[b+=1],p.schema=y,p.schemaPath=a+"["+b+"]",p.errSchemaPath=l+"/"+b,n+="  "+t.validate(p)+" ",p.baseId=g,n+=" "+h+" = "+h+" || "+m+"; if (!"+h+") { ",f+="}";t.compositeRule=p.compositeRule=v,n+=" "+f+" if (!"+h+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } "),n=t.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.schema[e],s=t.errSchemaPath+"/"+e,o=(t.opts.allErrors,t.util.toQuotedString(r));return!0===t.opts.$comment?n+=" console.log("+o+");":"function"==typeof t.opts.$comment&&(n+=" self._opts.$comment("+o+", "+t.util.toQuotedString(s)+", validate.root.schema);"),n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d=t.opts.$data&&o&&o.$data;d&&(n+=" var schema"+r+" = "+t.util.getData(o.$data,s,t.dataPathArr)+"; "),d||(n+=" var schema"+r+" = validate.schema"+a+";"),n+="var "+h+" = equal("+u+", schema"+r+"); if (!"+h+") {   ";var p=p||[];p.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { allowedValue: schema"+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be equal to constant' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var f=n;return n=p.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t);p.level++;var f="valid"+p.level,m="i"+r,g=p.dataLevel=t.dataLevel+1,v="data"+g,_=t.baseId,y=t.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:t.util.schemaHasRules(o,t.RULES.all);if(n+="var "+d+" = errors;var "+h+";",y){var b=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=a,p.errSchemaPath=l,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0);var x=u+"["+m+"]";p.dataPathArr[g]=m;var w=t.validate(p);p.baseId=_,t.util.varOccurences(w,v)<2?n+=" "+t.util.varReplace(w,v,x)+" ":n+=" var "+v+" = "+x+"; "+w+" ",n+=" if ("+f+") break; }  ",t.compositeRule=p.compositeRule=b,n+="  if (!"+f+") {"}else n+=" if ("+u+".length == 0) {";var E=E||[];E.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should contain a valid item' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var k=n;return n=E.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",y&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),t.opts.allErrors&&(n+=" } "),n=t.util.cleanUpCode(n)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="errs__"+r,d=t.util.copy(t),p="";d.level++;var f="valid"+d.level,m={},g={},v=t.opts.ownProperties;for(x in o){var _=o[x],y=Array.isArray(_)?g:m;y[x]=_}n+="var "+h+" = errors;";var b=t.errorPath;for(var x in n+="var missing"+r+";",g)if((y=g[x]).length){if(n+=" if ( "+u+t.util.getProperty(x)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(x)+"') "),c){n+=" && ( ";var w=y;if(w)for(var E=-1,k=w.length-1;E<k;){A=w[E+=1],E&&(n+=" || "),n+=" ( ( "+(I=u+(j=t.util.getProperty(A)))+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(A)+"') "),n+=") && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?A:j)+") ) "}n+=")) {  ";var S="missing"+r,P="' + "+S+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,S,!0):b+" + "+S);var C=C||[];C.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { property: '"+t.util.escapeQuotes(x)+"', missingProperty: '"+P+"', depsCount: "+y.length+", deps: '"+t.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==t.opts.messages&&(n+=" , message: 'should have ",1==y.length?n+="property "+t.util.escapeQuotes(y[0]):n+="properties "+t.util.escapeQuotes(y.join(", ")),n+=" when property "+t.util.escapeQuotes(x)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var D=n;n=C.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+D+"]); ":n+=" validate.errors = ["+D+"]; return false; ":n+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var T=y;if(T)for(var A,O=-1,N=T.length-1;O<N;){A=T[O+=1];var j=t.util.getProperty(A),I=(P=t.util.escapeQuotes(A),u+j);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,A,t.opts.jsonPointers)),n+=" if ( "+I+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(A)+"') "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { property: '"+t.util.escapeQuotes(x)+"', missingProperty: '"+P+"', depsCount: "+y.length+", deps: '"+t.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==t.opts.messages&&(n+=" , message: 'should have ",1==y.length?n+="property "+t.util.escapeQuotes(y[0]):n+="properties "+t.util.escapeQuotes(y.join(", ")),n+=" when property "+t.util.escapeQuotes(x)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(p+="}",n+=" else { ")}t.errorPath=b;var M=d.baseId;for(var x in m){_=m[x];(t.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:t.util.schemaHasRules(_,t.RULES.all))&&(n+=" "+f+" = true; if ( "+u+t.util.getProperty(x)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(x)+"') "),n+=") { ",d.schema=_,d.schemaPath=a+t.util.getProperty(x),d.errSchemaPath=l+"/"+t.util.escapeFragment(x),n+="  "+t.validate(d)+" ",d.baseId=M,n+=" }  ",c&&(n+=" if ("+f+") { ",p+="}"))}return c&&(n+="   "+p+" if ("+h+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d=t.opts.$data&&o&&o.$data;d&&(n+=" var schema"+r+" = "+t.util.getData(o.$data,s,t.dataPathArr)+"; ");var p="i"+r,f="schema"+r;d||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+h+";",d&&(n+=" if (schema"+r+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+r+")) "+h+" = false; else {"),n+=h+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+h+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+h+") {   ";var m=m||[];m.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { allowedValues: schema"+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||"");if(!1===t.opts.format)return c&&(n+=" if (true) { "),n;var h,d=t.opts.$data&&o&&o.$data;d?(n+=" var schema"+r+" = "+t.util.getData(o.$data,s,t.dataPathArr)+"; ",h="schema"+r):h=o;var p=t.opts.unknownFormats,f=Array.isArray(p);if(d){n+=" var "+(m="format"+r)+" = formats["+h+"]; var "+(g="isObject"+r)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(v="formatType"+r)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",t.async&&(n+=" var async"+r+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",d&&(n+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+h+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),n+=") || "),n+=" ("+m+" && "+v+" == '"+i+"' && !(typeof "+m+" == 'function' ? ",t.async?n+=" (async"+r+" ? await "+m+"("+u+") : "+m+"("+u+")) ":n+=" "+m+"("+u+") ",n+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=t.formats[o])){if("ignore"==p)return t.logger.warn('unknown format "'+o+'" ignored in schema at path "'+t.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(f&&p.indexOf(o)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+o+'" is used in schema at path "'+t.errSchemaPath+'"')}var g,v=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var _=!0===m.async;m=m.validate}if(v!=i)return c&&(n+=" if (true) { "),n;if(_){if(!t.async)throw new Error("async format in sync schema");n+=" if (!(await "+(y="formats"+t.util.getProperty(o)+".validate")+"("+u+"))) { "}else{n+=" if (! ";var y="formats"+t.util.getProperty(o);g&&(y+=".validate"),n+="function"==typeof m?" "+y+"("+u+") ":" "+y+".test("+u+") ",n+=") { "}}var b=b||[];b.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { format:  ",n+=d?""+h:""+t.util.toQuotedString(o),n+="  } ",!1!==t.opts.messages&&(n+=" , message: 'should match format \"",n+=d?"' + "+h+" + '":""+t.util.escapeQuotes(o),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+t.util.toQuotedString(o),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var x=n;return n=b.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+x+"]); ":n+=" validate.errors = ["+x+"]; return false; ":n+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t);p.level++;var f="valid"+p.level,m=t.schema.then,g=t.schema.else,v=void 0!==m&&(t.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:t.util.schemaHasRules(m,t.RULES.all)),_=void 0!==g&&(t.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:t.util.schemaHasRules(g,t.RULES.all)),y=p.baseId;if(v||_){var b;p.createErrors=!1,p.schema=o,p.schemaPath=a,p.errSchemaPath=l,n+=" var "+d+" = errors; var "+h+" = true;  ";var x=t.compositeRule;t.compositeRule=p.compositeRule=!0,n+="  "+t.validate(p)+" ",p.baseId=y,p.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",t.compositeRule=p.compositeRule=x,v?(n+=" if ("+f+") {  ",p.schema=t.schema.then,p.schemaPath=t.schemaPath+".then",p.errSchemaPath=t.errSchemaPath+"/then",n+="  "+t.validate(p)+" ",p.baseId=y,n+=" "+h+" = "+f+"; ",v&&_?n+=" var "+(b="ifClause"+r)+" = 'then'; ":b="'then'",n+=" } ",_&&(n+=" else { ")):n+=" if (!"+f+") { ",_&&(p.schema=t.schema.else,p.schemaPath=t.schemaPath+".else",p.errSchemaPath=t.errSchemaPath+"/else",n+="  "+t.validate(p)+" ",p.baseId=y,n+=" "+h+" = "+f+"; ",v&&_?n+=" var "+(b="ifClause"+r)+" = 'else'; ":b="'else'",n+=" } "),n+=" if (!"+h+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { failingKeyword: "+b+" } ",!1!==t.opts.messages&&(n+=" , message: 'should match \"' + "+b+" + '\" schema' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { "),n=t.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t),f="";p.level++;var m="valid"+p.level,g="i"+r,v=p.dataLevel=t.dataLevel+1,_="data"+v,y=t.baseId;if(n+="var "+d+" = errors;var "+h+";",Array.isArray(o)){var b=t.schema.additionalItems;if(!1===b){n+=" "+h+" = "+u+".length <= "+o.length+"; ";var x=l;l=t.errSchemaPath+"/additionalItems",n+="  if (!"+h+") {   ";var w=w||[];w.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+o.length+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have more than "+o.length+" items' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var E=n;n=w.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l=x,c&&(f+="}",n+=" else { ")}var k=o;if(k)for(var S,P=-1,C=k.length-1;P<C;)if(S=k[P+=1],t.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0:t.util.schemaHasRules(S,t.RULES.all)){n+=" "+m+" = true; if ("+u+".length > "+P+") { ";var D=u+"["+P+"]";p.schema=S,p.schemaPath=a+"["+P+"]",p.errSchemaPath=l+"/"+P,p.errorPath=t.util.getPathExpr(t.errorPath,P,t.opts.jsonPointers,!0),p.dataPathArr[v]=P;var T=t.validate(p);p.baseId=y,t.util.varOccurences(T,_)<2?n+=" "+t.util.varReplace(T,_,D)+" ":n+=" var "+_+" = "+D+"; "+T+" ",n+=" }  ",c&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof b&&(t.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:t.util.schemaHasRules(b,t.RULES.all))){p.schema=b,p.schemaPath=t.schemaPath+".additionalItems",p.errSchemaPath=t.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+u+".length > "+o.length+") {  for (var "+g+" = "+o.length+"; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers,!0);D=u+"["+g+"]";p.dataPathArr[v]=g;T=t.validate(p);p.baseId=y,t.util.varOccurences(T,_)<2?n+=" "+t.util.varReplace(T,_,D)+" ":n+=" var "+_+" = "+D+"; "+T+" ",c&&(n+=" if (!"+m+") break; "),n+=" } }  ",c&&(n+=" if ("+m+") { ",f+="}")}}else if(t.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:t.util.schemaHasRules(o,t.RULES.all)){p.schema=o,p.schemaPath=a,p.errSchemaPath=l,n+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers,!0);D=u+"["+g+"]";p.dataPathArr[v]=g;T=t.validate(p);p.baseId=y,t.util.varOccurences(T,_)<2?n+=" "+t.util.varReplace(T,_,D)+" ":n+=" var "+_+" = "+D+"; "+T+" ",c&&(n+=" if (!"+m+") break; "),n+=" }"}return c&&(n+=" "+f+" if ("+d+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d=t.opts.$data&&a&&a.$data;d?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a,r+="var division"+s+";if (",d&&(r+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),r+=" (division"+s+" = "+h+" / "+n+", ",t.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+t.opts.multipleOfPrecision+" ":r+=" division"+s+" !== parseInt(division"+s+") ",r+=" ) ",d&&(r+="  )  "),r+=" ) {   ";var p=p||[];p.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be multiple of ",r+=d?"' + "+n:n+"'"),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+l:""+a,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var f=r;return r=p.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+f+"]); ":r+=" validate.errors = ["+f+"]; return false; ":r+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="errs__"+r,d=t.util.copy(t);d.level++;var p="valid"+d.level;if(t.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:t.util.schemaHasRules(o,t.RULES.all)){d.schema=o,d.schemaPath=a,d.errSchemaPath=l,n+=" var "+h+" = errors;  ";var f,m=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+t.validate(d)+" ",d.createErrors=!0,f&&(d.opts.allErrors=f),t.compositeRule=d.compositeRule=m,n+=" if ("+p+") {   ";var g=g||[];g.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d="errs__"+r,p=t.util.copy(t),f="";p.level++;var m="valid"+p.level,g=p.baseId,v="prevValid"+r,_="passingSchemas"+r;n+="var "+d+" = errors , "+v+" = false , "+h+" = false , "+_+" = null; ";var y=t.compositeRule;t.compositeRule=p.compositeRule=!0;var b=o;if(b)for(var x,w=-1,E=b.length-1;w<E;)x=b[w+=1],(t.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0:t.util.schemaHasRules(x,t.RULES.all))?(p.schema=x,p.schemaPath=a+"["+w+"]",p.errSchemaPath=l+"/"+w,n+="  "+t.validate(p)+" ",p.baseId=g):n+=" var "+m+" = true; ",w&&(n+=" if ("+m+" && "+v+") { "+h+" = false; "+_+" = ["+_+", "+w+"]; } else { ",f+="}"),n+=" if ("+m+") { "+h+" = "+v+" = true; "+_+" = "+w+"; }";return t.compositeRule=p.compositeRule=y,n+=f+"if (!"+h+") {   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { passingSchemas: "+_+" } ",!1!==t.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",t.opts.allErrors&&(n+=" } "),n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d=t.opts.$data&&a&&a.$data;d?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a,r+="if ( ",d&&(r+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),r+=" !"+(d?"(new RegExp("+n+"))":t.usePattern(a))+".test("+h+") ) {   ";var p=p||[];p.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { pattern:  ",r+=d?""+n:""+t.util.toQuotedString(a),r+="  } ",!1!==t.opts.messages&&(r+=" , message: 'should match pattern \"",r+=d?"' + "+n+" + '":""+t.util.escapeQuotes(a),r+="\"' "),t.opts.verbose&&(r+=" , schema:  ",r+=d?"validate.schema"+l:""+t.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var f=r;return r=p.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+f+"]); ":r+=" validate.errors = ["+f+"]; return false; ":r+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="errs__"+r,d=t.util.copy(t),p="";d.level++;var f="valid"+d.level,m="key"+r,g="idx"+r,v=d.dataLevel=t.dataLevel+1,_="data"+v,y="dataProperties"+r,b=Object.keys(o||{}),x=t.schema.patternProperties||{},w=Object.keys(x),E=t.schema.additionalProperties,k=b.length||w.length,S=!1===E,P="object"==typeof E&&Object.keys(E).length,C=t.opts.removeAdditional,D=S||P||C,T=t.opts.ownProperties,A=t.baseId,O=t.schema.required;if(O&&(!t.opts.$data||!O.$data)&&O.length<t.opts.loopRequired)var N=t.util.toHash(O);if(n+="var "+h+" = errors;var "+f+" = true;",T&&(n+=" var "+y+" = undefined;"),D){if(n+=T?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+m+" = "+y+"["+g+"]; ":" for (var "+m+" in "+u+") { ",k){if(n+=" var isAdditional"+r+" = !(false ",b.length)if(b.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+m+") ";else{var j=b;if(j)for(var I=-1,M=j.length-1;I<M;)J=j[I+=1],n+=" || "+m+" == "+t.util.toQuotedString(J)+" "}if(w.length){var L=w;if(L)for(var R=-1,H=L.length-1;R<H;)rt=L[R+=1],n+=" || "+t.usePattern(rt)+".test("+m+") "}n+=" ); if (isAdditional"+r+") { "}if("all"==C)n+=" delete "+u+"["+m+"]; ";else{var F=t.errorPath,$="' + "+m+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers)),S)if(C)n+=" delete "+u+"["+m+"]; ";else{n+=" "+f+" = false; ";var z=l;l=t.errSchemaPath+"/additionalProperties",(et=et||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { additionalProperty: '"+$+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var B=n;n=et.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,c&&(n+=" break; ")}else if(P)if("failing"==C){n+=" var "+h+" = errors;  ";var W=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.schema=E,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers);var q=u+"["+m+"]";d.dataPathArr[v]=m;var V=t.validate(d);d.baseId=A,t.util.varOccurences(V,_)<2?n+=" "+t.util.varReplace(V,_,q)+" ":n+=" var "+_+" = "+q+"; "+V+" ",n+=" if (!"+f+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",t.compositeRule=d.compositeRule=W}else{d.schema=E,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers);q=u+"["+m+"]";d.dataPathArr[v]=m;V=t.validate(d);d.baseId=A,t.util.varOccurences(V,_)<2?n+=" "+t.util.varReplace(V,_,q)+" ":n+=" var "+_+" = "+q+"; "+V+" ",c&&(n+=" if (!"+f+") break; ")}t.errorPath=F}k&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+f+") { ",p+="}")}var U=t.opts.useDefaults&&!t.compositeRule;if(b.length){var K=b;if(K)for(var J,Q=-1,G=K.length-1;Q<G;){var X=o[J=K[Q+=1]];if(t.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:t.util.schemaHasRules(X,t.RULES.all)){var Y=t.util.getProperty(J),Z=(q=u+Y,U&&void 0!==X.default);d.schema=X,d.schemaPath=a+Y,d.errSchemaPath=l+"/"+t.util.escapeFragment(J),d.errorPath=t.util.getPath(t.errorPath,J,t.opts.jsonPointers),d.dataPathArr[v]=t.util.toQuotedString(J);V=t.validate(d);if(d.baseId=A,t.util.varOccurences(V,_)<2){V=t.util.varReplace(V,_,q);var tt=q}else{tt=_;n+=" var "+_+" = "+q+"; "}if(Z)n+=" "+V+" ";else{if(N&&N[J]){n+=" if ( "+tt+" === undefined ",T&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(J)+"') "),n+=") { "+f+" = false; ";F=t.errorPath,z=l;var et,it=t.util.escapeQuotes(J);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(F,J,t.opts.jsonPointers)),l=t.errSchemaPath+"/required",(et=et||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+it+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+it+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";B=n;n=et.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,t.errorPath=F,n+=" } else { "}else c?(n+=" if ( "+tt+" === undefined ",T&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(J)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+tt+" !== undefined ",T&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(J)+"') "),n+=" ) { ");n+=" "+V+" } "}}c&&(n+=" if ("+f+") { ",p+="}")}}if(w.length){var nt=w;if(nt)for(var rt,st=-1,ot=nt.length-1;st<ot;){X=x[rt=nt[st+=1]];if(t.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:t.util.schemaHasRules(X,t.RULES.all)){d.schema=X,d.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(rt),d.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(rt),n+=T?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+m+" = "+y+"["+g+"]; ":" for (var "+m+" in "+u+") { ",n+=" if ("+t.usePattern(rt)+".test("+m+")) { ",d.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers);q=u+"["+m+"]";d.dataPathArr[v]=m;V=t.validate(d);d.baseId=A,t.util.varOccurences(V,_)<2?n+=" "+t.util.varReplace(V,_,q)+" ":n+=" var "+_+" = "+q+"; "+V+" ",c&&(n+=" if (!"+f+") break; "),n+=" } ",c&&(n+=" else "+f+" = true; "),n+=" }  ",c&&(n+=" if ("+f+") { ",p+="}")}}}return c&&(n+=" "+p+" if ("+h+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="errs__"+r,d=t.util.copy(t);d.level++;var p="valid"+d.level;if(n+="var "+h+" = errors;",t.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:t.util.schemaHasRules(o,t.RULES.all)){d.schema=o,d.schemaPath=a,d.errSchemaPath=l;var f="key"+r,m="idx"+r,g="i"+r,v="' + "+f+" + '",_="data"+(d.dataLevel=t.dataLevel+1),y="dataProperties"+r,b=t.opts.ownProperties,x=t.baseId;b&&(n+=" var "+y+" = undefined; "),n+=b?" "+y+" = "+y+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+y+".length; "+m+"++) { var "+f+" = "+y+"["+m+"]; ":" for (var "+f+" in "+u+") { ",n+=" var startErrs"+r+" = errors; ";var w=f,E=t.compositeRule;t.compositeRule=d.compositeRule=!0;var k=t.validate(d);d.baseId=x,t.util.varOccurences(k,_)<2?n+=" "+t.util.varReplace(k,_,w)+" ":n+=" var "+_+" = "+w+"; "+k+" ",t.compositeRule=d.compositeRule=E,n+=" if (!"+p+") { for (var "+g+"=startErrs"+r+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==t.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { propertyName: '"+v+"' } ",!1!==t.opts.messages&&(n+=" , message: 'property name \\'"+v+"\\' is invalid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+h+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n=" ",r=t.level,s=t.dataLevel,o=t.schema[e],a=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,u="data"+(s||""),h="valid"+r,d=t.opts.$data&&o&&o.$data;d&&(n+=" var schema"+r+" = "+t.util.getData(o.$data,s,t.dataPathArr)+"; ");var p="schema"+r;if(!d)if(o.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var f=[],m=o;if(m)for(var g,v=-1,_=m.length-1;v<_;){g=m[v+=1];var y=t.schema.properties[g];y&&(t.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:t.util.schemaHasRules(y,t.RULES.all))||(f[f.length]=g)}}else f=o;if(d||f.length){var b=t.errorPath,x=d||f.length>=t.opts.loopRequired,w=t.opts.ownProperties;if(c)if(n+=" var missing"+r+"; ",x){d||(n+=" var "+p+" = validate.schema"+a+"; ");var E="' + "+(T="schema"+r+"["+(P="i"+r)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,T,t.opts.jsonPointers)),n+=" var "+h+" = true; ",d&&(n+=" if (schema"+r+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+r+")) "+h+" = false; else {"),n+=" for (var "+P+" = 0; "+P+" < "+p+".length; "+P+"++) { "+h+" = "+u+"["+p+"["+P+"]] !== undefined ",w&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+P+"]) "),n+="; if (!"+h+") break; } ",d&&(n+="  }  "),n+="  if (!"+h+") {   ",(D=D||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var k=n;n=D.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var S=f;if(S)for(var P=-1,C=S.length-1;P<C;){O=S[P+=1],P&&(n+=" || "),n+=" ( ( "+(M=u+(I=t.util.getProperty(O)))+" === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(O)+"') "),n+=") && (missing"+r+" = "+t.util.toQuotedString(t.opts.jsonPointers?O:I)+") ) "}n+=") {  ";var D;E="' + "+(T="missing"+r)+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,T,!0):b+" + "+T),(D=D||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";k=n;n=D.pop(),!t.compositeRule&&c?t.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(x){d||(n+=" var "+p+" = validate.schema"+a+"; ");var T;E="' + "+(T="schema"+r+"["+(P="i"+r)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,T,t.opts.jsonPointers)),d&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+P+" = 0; "+P+" < "+p+".length; "+P+"++) { if ("+u+"["+p+"["+P+"]] === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+P+"]) "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var A=f;if(A)for(var O,N=-1,j=A.length-1;N<j;){O=A[N+=1];var I=t.util.getProperty(O),M=(E=t.util.escapeQuotes(O),u+I);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,O,t.opts.jsonPointers)),n+=" if ( "+M+" === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+t.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==t.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==t.opts.messages&&(n+=" , message: '",t.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=b}else c&&(n+=" if (true) {");return n}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=" ",s=t.level,o=t.dataLevel,a=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,u=!t.opts.allErrors,h="data"+(o||""),d="valid"+s,p=t.opts.$data&&a&&a.$data;if(p?(r+=" var schema"+s+" = "+t.util.getData(a.$data,o,t.dataPathArr)+"; ",n="schema"+s):n=a,(a||p)&&!1!==t.opts.uniqueItems){p&&(r+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),r+=" var i = "+h+".length , "+d+" = true , j; if (i > 1) { ";var f=t.schema.items&&t.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+d+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var g="checkDataType"+(m?"s":"");r+=" if ("+t.util[g](f,"item",!0)+") continue; ",m&&(r+=" if (typeof item == 'string') item = '\"' + item; "),r+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",p&&(r+="  }  "),r+=" if (!"+d+") {   ";var v=v||[];v.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(r+=" , schema:  ",r+=p?"validate.schema"+l:""+a,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var _=r;r=v.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r}},function(t,e,i){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(t,e){for(var i=0;i<e.length;i++){t=JSON.parse(JSON.stringify(t));var r,s=e[i].split("/"),o=t;for(r=1;r<s.length;r++)o=o[s[r]];for(r=0;r<n.length;r++){var a=n[r],l=o[a];l&&(o[a]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return t}},function(t,e,i){"use strict";var n=i(23).MissingRef;t.exports=function t(e,i,r){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(r=i,i=void 0);var o=a(e).then((function(){var t=s._addSchema(e,void 0,i);return t.validate||function t(e){try{return s._compile(e)}catch(t){if(t instanceof n)return r(t);throw t}function r(n){var r=n.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+n.missingRef+" cannot be resolved");var o=s._loadingSchemas[r];return o||(o=s._loadingSchemas[r]=s._opts.loadSchema(r)).then(l,l),o.then((function(t){if(!c(r))return a(t).then((function(){c(r)||s.addSchema(t,r,void 0,i)}))})).then((function(){return t(e)}));function l(){delete s._loadingSchemas[r]}function c(t){return s._refs[t]||s._schemas[t]}}}(t)}));r&&o.then((function(t){r(null,t)}),r);return o;function a(e){var i=e.$schema;return i&&!s.getSchema(i)?t.call(s,{$ref:i},!0):Promise.resolve()}}},function(t,e,i){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,r=i(124),s=i(125);t.exports={add:function(t,e){var i=this.RULES;if(i.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!n.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var o=0;o<s.length;o++)l(t,s[o],e);else l(t,s,e);var a=e.metaSchema;a&&(e.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(a,!0))}function l(t,e,n){for(var s,o=0;o<i.length;o++){var a=i[o];if(a.type==e){s=a;break}}s||(s={type:e,rules:[]},i.push(s));var l={keyword:t,definition:n,custom:!0,code:r,implements:n.implements};s.rules.push(l),i.custom[t]=l}return i.keywords[t]=i.all[t]=!0,this},get:function(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1},remove:function(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var i=0;i<e.length;i++)for(var n=e[i].rules,r=0;r<n.length;r++)if(n[r].keyword==t){n.splice(r,1);break}return this},validate:function t(e,i){t.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(s,!0);if(n(e))return!0;if(t.errors=n.errors,i)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r,s=" ",o=t.level,a=t.dataLevel,l=t.schema[e],c=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,d="data"+(a||""),p="valid"+o,f="errs__"+o,m=t.opts.$data&&l&&l.$data;m?(s+=" var schema"+o+" = "+t.util.getData(l.$data,a,t.dataPathArr)+"; ",r="schema"+o):r=l;var g,v,_,y,b,x="definition"+o,w=this.definition,E="";if(m&&w.$data){b="keywordValidate"+o;var k=w.validateSchema;s+=" var "+x+" = RULES.custom['"+e+"'].definition; var "+b+" = "+x+".validate;"}else{if(!(y=t.useCustomRule(this,l,t.schema,t)))return;r="validate.schema"+c,b=y.code,g=w.compile,v=w.inline,_=w.macro}var S=b+".errors",P="i"+o,C="ruleErr"+o,D=w.async;if(D&&!t.async)throw new Error("async keyword in sync schema");if(v||_||(s+=S+" = null;"),s+="var "+f+" = errors;var "+p+";",m&&w.$data&&(E+="}",s+=" if ("+r+" === undefined) { "+p+" = true; } else { ",k&&(E+="}",s+=" "+p+" = "+x+".validateSchema("+r+"); if ("+p+") { ")),v)w.statements?s+=" "+y.validate+" ":s+=" "+p+" = "+y.validate+"; ";else if(_){var T=t.util.copy(t);E="";T.level++;var A="valid"+T.level;T.schema=y.validate,T.schemaPath="";var O=t.compositeRule;t.compositeRule=T.compositeRule=!0;var N=t.validate(T).replace(/validate\.schema/g,b);t.compositeRule=T.compositeRule=O,s+=" "+N}else{(L=L||[]).push(s),s="",s+="  "+b+".call( ",t.opts.passContext?s+="this":s+="self",g||!1===w.schema?s+=" , "+d+" ":s+=" , "+r+" , "+d+" , validate.schema"+t.schemaPath+" ",s+=" , (dataPath || '')",'""'!=t.errorPath&&(s+=" + "+t.errorPath);var j=a?"data"+(a-1||""):"parentData",I=a?t.dataPathArr[a]:"parentDataProperty",M=s+=" , "+j+" , "+I+" , rootData )  ";s=L.pop(),!1===w.errors?(s+=" "+p+" = ",D&&(s+="await "),s+=M+"; "):s+=D?" var "+(S="customErrors"+o)+" = null; try { "+p+" = await "+M+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+S+" = e.errors; else throw e; } ":" "+S+" = null; "+p+" = "+M+"; "}if(w.modifying&&(s+=" if ("+j+") "+d+" = "+j+"["+I+"];"),s+=""+E,w.valid)h&&(s+=" if (true) { ");else{var L;s+=" if ( ",void 0===w.valid?(s+=" !",s+=_?""+A:""+p):s+=" "+!w.valid+" ",s+=") { ",n=this.keyword,(L=L||[]).push(s),s="",(L=L||[]).push(s),s="",!1!==t.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var R=s;s=L.pop(),!t.compositeRule&&h?t.async?s+=" throw new ValidationError(["+R+"]); ":s+=" validate.errors = ["+R+"]; return false; ":s+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var H=s;s=L.pop(),v?w.errors?"full"!=w.errors&&(s+="  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+C+" = vErrors["+P+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',t.opts.verbose&&(s+=" "+C+".schema = "+r+"; "+C+".data = "+d+"; "),s+=" } "):!1===w.errors?s+=" "+H+" ":(s+=" if ("+f+" == errors) { "+H+" } else {  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+C+" = vErrors["+P+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',t.opts.verbose&&(s+=" "+C+".schema = "+r+"; "+C+".data = "+d+"; "),s+=" } } "):_?(s+="   var err =   ",!1!==t.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(t.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===w.errors?s+=" "+H+" ":(s+=" if (Array.isArray("+S+")) { if (vErrors === null) vErrors = "+S+"; else vErrors = vErrors.concat("+S+"); errors = vErrors.length;  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+C+" = vErrors["+P+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+t.errorPath+";  "+C+'.schemaPath = "'+u+'";  ',t.opts.verbose&&(s+=" "+C+".schema = "+r+"; "+C+".data = "+d+"; "),s+=" } } else { "+H+" } "),s+=" } ",h&&(s+=" else { ")}return s}},function(t,e,i){"use strict";var n=i(44);t.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(s){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n&&n;o.global!==o&&o.window!==o&&o.self;var a,l=2147483647,c=/^xn--/,u=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw new RangeError(d[t])}function g(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function v(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+g((t=t.replace(h,".")).split("."),e).join(".")}function _(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function y(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,i){var n=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;n+=36)t=p(t/35);return p(n+36*t/(t+38))}function w(t){var e,i,n,r,s,o,a,c,u,h,d,f=[],g=t.length,v=0,_=128,b=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&m("not-basic"),f.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(s=v,o=1,a=36;r>=g&&m("invalid-input"),((c=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>p((l-v)/o))&&m("overflow"),v+=c*o,!(c<(u=a<=b?1:a>=b+26?26:a-b));a+=36)o>p(l/(h=36-u))&&m("overflow"),o*=h;b=x(v-s,e=f.length+1,0==s),p(v/e)>l-_&&m("overflow"),_+=p(v/e),v%=e,f.splice(v++,0,_)}return y(f)}function E(t){var e,i,n,r,s,o,a,c,u,h,d,g,v,y,w,E=[];for(g=(t=_(t)).length,e=128,i=0,s=72,o=0;o<g;++o)(d=t[o])<128&&E.push(f(d));for(n=r=E.length,r&&E.push("-");n<g;){for(a=l,o=0;o<g;++o)(d=t[o])>=e&&d<a&&(a=d);for(a-e>p((l-i)/(v=n+1))&&m("overflow"),i+=(a-e)*v,e=a,o=0;o<g;++o)if((d=t[o])<e&&++i>l&&m("overflow"),d==e){for(c=i,u=36;!(c<(h=u<=s?1:u>=s+26?26:u-s));u+=36)w=c-h,y=36-h,E.push(f(b(h+w%y,0))),c=p(w/y);E.push(f(b(c,0))),s=x(i,v,n==r),i=0,++n}++i,++e}return E.join("")}a={version:"1.4.1",ucs2:{decode:_,encode:y},decode:w,encode:E,toASCII:function(t){return v(t,(function(t){return u.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(128)(t),i(17))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(131),e.encode=e.stringify=i(132)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var l=1e3;s&&"number"==typeof s.maxKeys&&(l=s.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,d,p,f,m=t[u].replace(a,"%20"),g=m.indexOf(i);g>=0?(h=m.substr(0,g),d=m.substr(g+1)):(h=m,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),n(o,p)?r(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),(function(o){var a=encodeURIComponent(n(o))+i;return r(t[o])?s(t[o],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[o]))})).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e){
/**
@license Sticky-kit v1.1.3 | MIT | Leaf Corcoran 2015 | http://leafo.net
 */
(function(){var t,e;t=window.jQuery,e=t(window),t.fn.stick_in_parent=function(i){var n,r,s,o,a,l,c,u,h,d,p,f,m;for(null==i&&(i={}),m=i.sticky_class,l=i.inner_scrolling,f=i.recalc_every,p=i.parent,h=i.offset_top,u=i.spacer,s=i.bottoming,null==h&&(h=0),null==p&&(p=void 0),null==l&&(l=!0),null==m&&(m="is_stuck"),n=t(document),null==s&&(s=!0),d=function(t){var e,i;return window.getComputedStyle?(t[0],e=window.getComputedStyle(t[0]),i=parseFloat(e.getPropertyValue("width"))+parseFloat(e.getPropertyValue("margin-left"))+parseFloat(e.getPropertyValue("margin-right")),"border-box"!==e.getPropertyValue("box-sizing")&&(i+=parseFloat(e.getPropertyValue("border-left-width"))+parseFloat(e.getPropertyValue("border-right-width"))+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))),i):t.outerWidth(!0)},o=function(i,r,o,a,c,g,v,_){var y,b,x,w,E,k,S,P,C,D,T,A;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),E=n.height(),S=i.parent(),null!=p&&(S=S.closest(p)),!S.length)throw"failed to find stick parent";if(x=!1,y=!1,(T=null!=u?u&&i.closest(u):t("<div />"))&&T.css("position",i.css("position")),(P=function(){var t,e,s;if(!_)return E=n.height(),t=parseInt(S.css("border-top-width"),10),e=parseInt(S.css("padding-top"),10),r=parseInt(S.css("padding-bottom"),10),o=S.offset().top+t+e,a=S.height(),x&&(x=!1,y=!1,null==u&&(i.insertAfter(T),T.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(m),s=!0),c=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-h,g=i.outerHeight(!0),v=i.css("float"),T&&T.css({width:d(i),height:g,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:v}),s?A():void 0})(),g!==a)return w=void 0,k=h,D=f,A=function(){var t,d,p,b,C,A;if(!_)return p=!1,null!=D&&(D-=1)<=0&&(D=f,P(),p=!0),p||n.height()===E||(P(),p=!0),b=e.scrollTop(),null!=w&&(d=b-w),w=b,x?(s&&(C=b+g+k>a+o,y&&!C&&(y=!1,i.css({position:"fixed",bottom:"",top:k}).trigger("sticky_kit:unbottom"))),b<c&&(x=!1,k=h,null==u&&("left"!==v&&"right"!==v||i.insertAfter(T),T.detach()),t={position:"",width:"",top:""},i.css(t).removeClass(m).trigger("sticky_kit:unstick")),l&&(A=e.height(),g+h>A&&(y||(k-=d,k=Math.max(A-g,k),k=Math.min(h,k),x&&i.css({top:k+"px"}))))):b>c&&(x=!0,(t={position:"fixed",top:k}).width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(t).addClass(m),null==u&&(i.after(T),"left"!==v&&"right"!==v||T.append(i)),i.trigger("sticky_kit:stick")),x&&s&&(null==C&&(C=b+g+k>a+o),!y&&C)?(y=!0,"static"===S.css("position")&&S.css({position:"relative"}),i.css({position:"absolute",bottom:r,top:"auto"}).trigger("sticky_kit:bottom")):void 0},C=function(){return P(),A()},b=function(){if(_=!0,e.off("touchmove",A),e.off("scroll",A),e.off("resize",C),t(document.body).off("sticky_kit:recalc",C),i.off("sticky_kit:detach",b),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),S.position("position",""),x)return null==u&&("left"!==v&&"right"!==v||i.insertAfter(T),T.remove()),i.removeClass(m)},e.on("touchmove",A),e.on("scroll",A),e.on("resize",C),t(document.body).on("sticky_kit:recalc",C),i.on("sticky_kit:detach",b),setTimeout(A,0)}},a=0,c=this.length;a<c;a++)r=this[a],o(t(r));return this}}).call(this)},function(t,e,i){"use strict";i.r(e);var n=i(2),r=i.n(n),s=(i(54),function(t,e){const i=document.createElement("div");return i.title=t,i.innerHTML=e,i}),o=class{constructor(t,e,i,n){this._el=new s(t,e),this._$dialog=r()(this._el),this._$dialog.on("dialogclose",()=>{requestAnimationFrame(()=>this._$dialog.dialog("destroy"))}),i&&(n=n||{},Object.assign(n,{buttons:[{text:i.label,class:i.class,click:()=>{i.handler&&i.handler(this),this._$dialog.dialog("close")}}]})),this._option=n}get el(){return this._el}open(){this._$dialog.dialog(Object.assign({dialogClass:"textae-editor--dialog",height:"auto",modal:!0,resizable:!1,width:550},this._option))}close(){this._$dialog.dialog("close")}},a=class extends o{constructor(){super("Help (Keyboard short-cuts)",'<div class="textae-tool__key-help"></div>',null,{height:313,width:523})}};const l=new a;var c=i(45),u=i.n(c);const h=new Map;const d="textae-editor-veil";var p={show:function(){const t=document.querySelector("."+d);if(t)t.style.display="block";else{const t=document.createElement("div");t.className=d,document.body.appendChild(t)}},hide:function(){const t=document.querySelector("."+d);t&&(t.style.display="none")}};const f={attributes:!0,attributeFilter:["class"]};function m(t){t.forEach(t=>{return(e=t.target).classList.contains("textae-editor--wait")?h.set(e):h.delete(e),void(h.size>0?p.show():p.hide());var e})}var g=i(12),v=i.n(g);const _=new a;const y={read:!0,write:!0,help:!0};var b=i(3),x=i.n(b);const w=[[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"},{type:"write-auto",title:"Upload Automatically",push:!0}],[{type:"view",title:"View Mode",push:!0},{type:"term",title:"Term Edit Mode",push:!0},{type:"relation",title:"Relation Edit Mode",push:!0}],[{type:"simple",title:"Simple View",push:!0},{type:"line-height",title:"Adjust LineHeight"},{type:"line-height-auto",title:"Auto Adjust LineHeight",push:!0}],[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}],[{type:"replicate",title:"Replicate span annotation [R]",enableWhenSelecting:{span:t=>Boolean(t.span.single)}},{type:"replicate-auto",title:"Auto replicate",push:!0},{type:"boundary-detection",title:"Boundary Detection [B]",push:!0}],[{type:"entity",title:"New entity [E]",enableWhenSelecting:{span:t=>t.span.some}},{type:"pallet",title:"Show label list editor [Q]"},{type:"change-label",title:"Change label [W]",enableWhenSelecting:{entity:t=>t.entity.some,relation:t=>t.relation.some}}],[{type:"delete",title:"Delete [D]",enableWhenSelecting:{span:t=>t.some,entity:t=>t.some,relation:t=>t.some}},{type:"copy",title:"Copy [C]",enableWhenSelecting:{span:t=>t.span.some,entity:t=>t.entity.some}},{type:"cut",title:"Cut [X]",enableWhenSelecting:{span:t=>t.span.some,entity:t=>t.entity.some}},{type:"paste",title:"Paste [V]",enableWhenSelecting:{span:(t,e)=>e.hasCopyingItem&&t.span.some||e.hasCuttingItem&&Boolean(t.span.single)}}],[{type:"setting",title:"Setting"}],[{type:"help",title:"Help [H]"}]];var E=new class{get mapForControl(){return{buttonGroup:w.map(t=>({list:t.map(t=>({type:t.type,title:t.title}))}))}}get _buttons(){return w.flat()}_getEnabelButtonsWhenSelecting(t){return this._buttons.filter(e=>e.enableWhenSelecting&&e.enableWhenSelecting[t]).map(e=>({name:e.type,predicate:e.enableWhenSelecting[t]}))}get spanButtons(){return this._getEnabelButtonsWhenSelecting("span")}get entityButtons(){return this._getEnabelButtonsWhenSelecting("entity")}get relationButtons(){return this._getEnabelButtonsWhenSelecting("relation")}get pushButtons(){return this._buttons.filter(t=>t.push).map(t=>t.type)}},k=class{constructor(t,e){const i=v.a.create(function(t){return x.a.compile(t)(E.mapForControl)}(t));this._el=i,function(t,e){const i=t=>{if(t.currentTarget.classList.contains("textae-control__icon--disabled"))return;const i=t.currentTarget.dataset.buttonType;e.api.handleButtonClick(i)};for(const e of t.querySelectorAll(".textae-control__icon"))"help"===e.dataset.buttonType?e.addEventListener("click",()=>_.open()):e.addEventListener("click",i)}(this._el,e)}get el(){return this._el}updateAllButtonEnableState(t){!function(t,e){!function(t,e){for(const i of t.querySelectorAll(".textae-control__icon")){!0===e[i.dataset.buttonType]?i.classList.remove("textae-control__icon--disabled"):i.classList.add("textae-control__icon--disabled")}}(t,Object.assign({},e,y))}(this._el,t)}updateButtonPushState(t,e){!function(t,e,i){const n=t.querySelector(`.textae-control__${e}-button`);i?n.classList.add("textae-control__icon--pushed"):n.classList.remove("textae-control__icon--pushed")}(this._el,t,e)}};var S=class extends k{constructor(t){super('\n<div class="textae-control textae-control-bar">\n  <span class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </span>\n  {{#buttonGroup}}\n  <span class="textae-control__separator"></span>\n    {{#list}}\n  <span class="textae-control__icon textae-control__{{type}}-button" title="{{title}}" data-button-type="{{type}}"></span>\n    {{/list}}\n  {{/buttonGroup}}\n</div>\n',t)}transitWriteButtonImage(t){!function(t,e){const i=t.querySelector(".textae-control__write-button");!0===e?i.classList.add("textae-control__write-button--transit"):i.classList.remove("textae-control__write-button--transit")}(super.el,t)}};var P=class extends k{constructor(t){super('\n<div class="textae-control textae-context-menu">\n  <p class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </p>\n  {{#buttonGroup}}\n  <p class="textae-control__separator"></p>\n    {{#list}}\n  <p class="textae-control__icon textae-control__{{type}}-button" data-button-type="{{type}}">{{title}}</p>\n    {{/list}}\n  {{/buttonGroup}}\n</div>\n',t)}show(t,e){super.el.setAttribute("style",`top: ${t}px; left: ${e}px`),super.el.classList.remove("textae-context-menu--hide"),super.el.classList.add("textae-context-menu--show")}hide(){this._isOpen&&(super.el.classList.remove("textae-context-menu--show"),super.el.classList.add("textae-context-menu--hide"))}get _isOpen(){return super.el.classList.contains("textae-context-menu--show")}};function C(t,e){(t=t.add(".ui-dialog, .ui-widget-overlay"))[e+"Class"]("textae-editor--wait")}var D=class{constructor(t){this._editor=t}startWait(){C(this._editor,"add")}endWait(){C(this._editor,"remove")}};function T(t){return!t||""===t}var A=function(t,e,i){const n=function(t){const e=t.status,i=t.getResponseHeader("WWW-Authenticate"),n=t.getResponseHeader("Location");return 401===e&&i&&"ServerPage"===i&&n?n:null}(t);if(n){const t=(r=n,window.open(r,"_blank","width=600, height=500")),e=setInterval(()=>{t.closed&&(clearInterval(e),i())},1e3)}else e();var r},O=function(t,e,i,n,s,o){const a={type:t,url:e,contentType:"application/json",data:i,crossDomain:!0,xhrFields:{withCredentials:!0}},l=()=>{r.a.ajax(a).done(n).fail(s).always(o)};r.a.ajax(a).done(n).fail(t=>A(t,s,l)).always(o)},N=function(t,e,i,n,r,s){T(t)||(i(),console.log("POST data",e),O("post",t,e,n,r,s))};var j=i(4),I=i.n(j),M=function(t,e,i){i.startWait(),function(t,e,i){if(T(t))return;const n={type:"GET",url:t,cache:!1,xhrFields:{withCredentials:!0},timeout:3e4};r.a.ajax(n).done(e).fail(i)}(t,n=>{e(t,n),i.endWait()},()=>{i.endWait(),I.a.error("Could not load the file from the location you specified.: "+t)})};var L=class{constructor(t,e){this._emitter=t,this._name=e,this._container=new Map}_toModel(t){return t}_toModels(t){return t.map(t=>this._toModel(t))}addSource(t){for(const e of this._toModels(t))this._addToContainer(e)}add(t,e){const i=this._addToContainer(t);var n;return(n=e)&&"[object Function]"==={}.toString.call(n)&&e(i),this._emit(`textae.annotationData.${this._name}.add`,i),i}get(t){return this._container.get(t)}get all(){return Array.from(this._container.values())}findByType(t){return this.all.filter(e=>e.typeName===t)}get some(){return this._container.size}changeType(t,e){const i=this._container.get(t);return i.typeName=e,this._emit(`textae.annotationData.${this._name}.change`,i),i}remove(t){const e=this._container.get(t);return e&&(this._container.delete(t),this._emit(`textae.annotationData.${this._name}.remove`,e)),e}clear(){this._container.clear()}_addToContainer(t){return this._container.set(t.id,t),t}_emit(t,e){this._emitter.emit(t,e)}};var R=function(t,e){return t.begin-e.begin||e.end-t.end},H=function(t){t.sort(R).forEach((t,e,i)=>{t.severTies();const n=0!==e?i[e-1]:null;if(n){const e=function t(e,i){return function(t,e){return!!e&&(e.begin<=t.begin&&t.end<=e.end)}(e,i)?i:i.parent?t(e,i.parent):null}(t,n);e&&t.beChildOf(e)}})},F={makeSpanDomId:(t,e)=>`${t.editorId}__S${e.begin}_${e.end}`,makeEntityDomId:(t,e)=>`${t.editorId}__E${e.replace(/[:.]/g,"")}`},$=class{constructor(t,e,i){this._editor=t,this._span=e,this._spanContainer=i,this.severTies()}get id(){return F.makeSpanDomId(this._editor,this._span)}get begin(){return this._span.begin}get end(){return this._span.end}get types(){return[]}get entities(){return[]}get bigBrother(){return function(t,e){const i=t.parent?t.parent.children:e,n=i.indexOf(t);return 0===n?null:i[n-1]}(this,this._spanContainer.topLevel)}get parent(){return this._parent}get children(){return this._children}severTies(){this._parent=null,this._children=[]}beChildOf(t){t.children.push(this),this._parent=t}traverse(t,e){t(this);for(const i of this._children)i.traverse(t,e);e&&e(this)}},z=class extends ${constructor(t,e,i,n){super(t,e,n),this._entityContainer=i}get entities(){return this._entityContainer.getAllOfSpan(this)}passesAllEntitiesTo(t){for(const e of this.entities)e.span=t.id}get styles(){return this._spanContainer._typeSets.has(this.id)?this._spanContainer._typeSets.get(this.id).styles:new Set}},B=class extends ${constructor(t,e,i,n){super(t,e,i),this.styles=new Set([n])}get styleOnly(){return!0}appendStyles(t){this.styles=new Set([...this.styles,...t])}},W=function(t,e){return t.filter(t=>function(t,e){const i=e.begin<t.begin&&t.begin<e.end&&e.end<t.end,n=t.begin<e.begin&&e.begin<t.end&&t.end<e.end;return i||n}(e,t)).length>0},q=class extends L{constructor(t,e,i){super(e,"span"),this._editor=t,this._entityContainer=i,this._typeSets=new Map}_toModel(t){return t.style?new B(this._editor,t.span,this,t.style):new z(this._editor,t.span,this._entityContainer,this)}_addToContainer(t){return t instanceof z&&this._container.set(t.id,t),t instanceof B&&(this._typeSets.has(t.id)?this._typeSets.get(t.id).appendStyles(t.styles):this._typeSets.set(t.id,t)),t}add(t){return console.assert(t,"span is necessary."),super.add(new z(this._editor,t,this._entityContainer,this),()=>{H(this.all)})}addSource(t){super.addSource(t),H(this.all)}has(t){const e=F.makeSpanDomId(this._editor,t);return this._container.has(e)}get(t){return this._container.has(t)?super.get(t):this._typeSets.get(t)}range(t,e){let i=super.get(t),n=super.get(e);if(R(i,n)>0){const t=i;i=n,n=t}return super.all.filter(t=>i.begin<=t.begin&&t.end<=n.end).map(t=>t.id)}get topLevel(){return this.all.filter(t=>null===t.parent).sort(R)}_merageStyle(t){return t}remove(t){const e=super.remove(t);return H(this.all),e}clear(){super.clear(),this._typeSets=new Map}move(t,e){const i=super.remove(t),n=super.add(new z(this._editor,e,this._entityContainer,this),t=>{H(this.all),i.passesAllEntitiesTo(t)});return super._emit("textae.annotationData.span.move"),[{begin:i.begin,end:i.end},n.id]}isBoundaryCrossingWithOtherSpans(t){return W(this.all,t)}get all(){const t=[...this._typeSets.values()].filter(t=>!this._container.has(t.id));return super.all.concat(t)}get allSpansWithGrid(){return super.all}},V=function(t){return t.slice(1)},U=function(t,e){return t.filter(t=>function(t,e){return new RegExp(`^${t}\\d+$`).test(e)}(e,t)).map(V)},K=function(t,e){return t+function(t){return(0===t.length?0:Math.max(...t))+1}(U(e,t))},J=class extends L{constructor(t,e,i){super(t,e),this._prefix=i}_toModels(t){const e=super._toModels(t);return e.sort((t,e)=>t.id?e.id?t.id<e.id?-1:t.id>e.id?1:0:-1:1),e}_addToContainer(t){return super._addToContainer(function(t,e,i){if(!t.id){const n=Array.from(e.keys()),r=K(i,n);t.id=r}return t}(t,this._container,this._prefix))}},Q=class extends J{constructor(t,e){super(t,"attribute","A"),this._entityContainer=e}_toModel(t){return new class{constructor({id:t,subj:e,pred:i,obj:n},r){this.id=t,this.subj=e,this.pred=i,this.obj=n,this._entityContainer=r}get entity(){return this._entityContainer.get(this.subj)}}(t,this._entityContainer)}add(t){return super.add(this._toModel(t))}change(t,e,i){const n=this.get(t);return e&&(n.pred=e),i&&(n.obj=i),super._emit("textae.annotationData.attribute.change",n),n}remove(t){const e=super.remove(t);return console.assert(e,`There are no attribute ${t} to delete!`),super._emit("textae.annotationData.attribute.remove",e),e}getSameAttributes(t,e){return this.all.filter(i=>i.pred===t&&i.obj===e)}};class G{constructor({id:t,pred:e,subj:i,obj:n}){this._id=t,this.typeName=e,this._subj=i,this._obj=n}get id(){return this._id}set id(t){this._id=t}get typeName(){return this._typeName}set typeName(t){this._typeName=String(t)}get subj(){return this._subj}get obj(){return this._obj}}var X=class extends J{constructor(t){super(t,"relation","R")}_toModel(t){return new G(t)}add(t){return t instanceof G?super.add(t):super.add(this._toModel(t))}},Y=function(t){return t.trim().startsWith("http")},Z=function(t,e){const i=t.all.filter(t=>"_base"!==t.prefix).filter(t=>0===e.indexOf(t.prefix+":"));return 1===i.length?i[0]:null},tt=function(t){return/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([/]?[^\s?]*[/]{1})*(?:\/?([^\s\n?[\]{}#]*(?:(?=\.)){1}|[^\s\n?[\]{}.#]*)?([.]{1}[^\s?#]*)?)?(?:\?{1}([^\s\n#[\]]*))?([#][^\s\n]*)?\)?/gi.exec(t)},et=function(t,e,i){if(i)return i;if(Y(e))return function(t){if(Y(t)){const e=tt(t);if(e)return e[9]?e[9].slice(1):e[6]?e[6]+(e[7]||""):e[5]&&e[5].length>1?e[5].split("/").filter(t=>""!==t).pop():e[3]}return t}(e);const n=Z(t,e);return n?e.replace(n.prefix+":",""):e},it=function(t,e,i){if(Y(e))return e;if(i)return i;if(t.some){const i=Z(t,e);if(i)return`${i.uri}${e.replace(i.prefix+":","")}`;const n=t.all.find(t=>"_base"===t.prefix);if(n)return`${n.uri}${e}`}return null},nt=class{constructor(t,e=[]){this._typeName=t,this._attributes=e}get typeName(){return this._typeName}get attributes(){return this._attributes}toDomInfo(t,e){return{label:this._label(t,e),href:this._href(t,e),color:e.getColor(this.typeName),attributes:this._attributesForDomInfo(t,e)}}_label(t,e){return et(t,this.typeName,e.getLabel(this.typeName))}_href(t,e){return it(t,this.typeName,e.getUri(this.typeName))}_attributesForDomInfo(t,e){return this.attributes.map(i=>({pred:i.pred,obj:i.obj,title:`pred: ${i.pred}, value: ${i.obj}`,label:et(t,"string"==typeof i.obj?i.obj:"",e.getAttributeLabel(i)),href:it(t,"string"==typeof i.obj?i.obj:""),color:e.getAttributeColor(i)}))}},rt=class{constructor(t,e,i,n,r,s,o=null){this._editor=t,this._span=r,this.typeName=s,this._id=o,this._attributeContainer=e,this._relationContaier=i,this._definedTypes=n}static mergedTypesOf(t){return function(t){const e=t[t.length-1].typeName,i=[];for(const{typeValues:e}of t)for(const t of e.attributes)i.some(e=>e.pred===t.pred)||i.push(t);return new nt(e,i)}(t)}static rejectSameType(t,e,i){return t.filter(t=>!t._isSameType(e,i))}static filterWithSamePredicateAttribute(t,e){return t.filter(t=>t._hasSpecificPredicateAttribute(e))}static filterWithoutSamePredicateAttribute(t,e){return t.filter(t=>!t._hasSpecificPredicateAttribute(e))}get id(){return this._id}set id(t){this._id=t}get span(){return this._span}set span(t){this._span=t}get typeName(){return this._typeName}set typeName(t){this._typeName=String(t)}get entityDomId(){return F.makeEntityDomId(this._editor,this.id)}get typeValues(){return new nt(this._typeName,this.attributes)}get attributes(){return this._attributeContainer.all.filter(t=>t.subj===this._id)}getDifferentAttributes(t){return this.attributes.filter(e=>!t.some(t=>e.pred===t.pred&&e.obj===t.obj))}get relations(){return this._relationContaier.all.filter(t=>t.obj===this.id||t.subj===this.id).map(t=>t.id)}toDomInfo(t,e){return Object.assign({id:this.entityDomId,entityId:F.makeEntityDomId(this._editor,this.id),entityTitle:this.id},this.typeValues.toDomInfo(t,e))}_isSameType(t,e){return this.typeName===t&&this._hasSameAttributes(e)}_hasSameAttributes(t){return t.length==this.attributes.length&&t.filter(t=>this.attributes.some(e=>t.pred===e.pred&&t.obj===String(e.obj))).length==this.attributes.length}_hasSpecificPredicateAttribute(t){return this.attributes.some(e=>e.pred===t)}},st=class extends J{constructor(t,e,i){super(e,"entity","T"),this._editor=t,this._parentContainer=i}get _attributeContainer(){return this._parentContainer.attribute}get _relationContainer(){return this._parentContainer.relation}_toModel(t){return new rt(this._editor,this._attributeContainer,this._relationContainer,this.definedTypes,F.makeSpanDomId(this._editor,t.span),t.obj,t.id)}add(t){if(!t.span)throw new Error("entity has no span! "+JSON.stringify(t));return t instanceof rt?super.add(t):super.add(new rt(this._editor,this._attributeContainer,this._relationContainer,this.definedTypes,t.span,t.typeName))}moveEntities(t,e){for(const i of e)i.span=t;this._emit("textae.annotationData.entity.move",e)}getAllOfSpan(t){return this.all.filter(e=>t.id===e.span)}},ot=function(t){return t.span.end-t.span.begin>0},at=function(t,e){return 0<=t&&t<=e.length},lt=class{constructor(t,e){this._nodes=t||[],this._predicate=e}get validNodes(){return this._nodes.filter((t,e)=>this._validate(t,e))}get invalidNodes(){return this._nodes.filter((t,e)=>!this._validate(t,e))}get invalid(){return this._nodes.some((t,e)=>!this._validate(t,e))}_validate(t){return this._predicate(t)}},ct=function(t,e){const i=new lt(e,ot),n=new lt(i.validNodes,e=>function(t,e){return at(e.begin,t)&&at(e.end,t)}(t,e.span));return{accept:n.validNodes,reject:{hasLength:i.invalidNodes,inText:n.invalidNodes},hasError:i.invalid||n.invalid}},ut=class extends lt{constructor(t){super(t)}_validate(t,e){const i=this._nodes.slice(0,e);return n=t,!W(i.map(t=>t.span),n.span);var n}},ht=function(t,e){return t.sourceProperty=e,t},dt=function(t,e,i){return 1===t.filter(t=>t.id===e[i]).length},pt=class extends lt{constructor(t,e){super(e,e=>dt(t,e,"subj"))}},ft=class extends lt{constructor(t){super(t)}_validate(t,e){return!this._nodes.slice(0,e).some(e=>e.subj===t.subj&&e.pred===t.pred)}},mt=function(t,e){const i=ct(t,e.typesettings),n=ct(t,e.denotations),r=function(t,e){const i=t.map(t=>ht(t,"typesettings")).concat(e.map(t=>ht(t,"denotations"))),n=new ut(i);return{acceptedTypesettings:n.validNodes.filter(t=>"typesettings"===t.sourceProperty),acceptedDenotations:n.validNodes.filter(t=>"denotations"===t.sourceProperty),reject:{isNotCrossing:n.invalidNodes},hasError:n.invalid}}(i.accept,n.accept),s=function(t,e){const i=new pt(t,e),n=new ft(i.validNodes);return{accept:n.validNodes,reject:{subj:i.invalidNodes,duplicatedAttributes:n.invalidNodes},hasError:i.invalid||n.invalid}}(r.acceptedDenotations,e.attributes),o=function(t,e){const i=new lt(e,e=>dt(t,e,"obj")),n=new pt(t,i.validNodes);return{accept:n.validNodes,reject:{obj:i.invalidNodes,subj:n.invalidNodes},hasError:i.invalid||n.invalid}}(r.acceptedDenotations,e.relations);return{accept:{denotation:r.acceptedDenotations,attribute:s.accept,relation:o.accept,typeSet:r.acceptedTypesettings},reject:{denotationHasLength:n.reject.hasLength,denotationInText:n.reject.inText,referencedItems:(a=s.reject.subj,l=o.reject.obj,c=o.reject.subj,a.map(t=>(t.sourceProperty="attributes",t.alertSubj=!0,t)).concat(l.map(t=>(t.sourceProperty="relations",t.alertObj=!0,t))).concat(c.map(t=>(t.sourceProperty="relations",t.alertSubj=!0,t)))),duplicatedAttributes:s.reject.duplicatedAttributes,typeSetHasLength:i.reject.hasLength,typeSetInText:i.reject.inText,isNotCrossing:r.reject.isNotCrossing,hasError:n.hasError||s.hasError||o.hasError||i.hasError||r.hasError}};var a,l,c},gt=function(t,e,i){i&&(i=i.map(e));for(const e of t)e.addSource(i)},vt=function(t,e){return t.id?e+t.id:null},_t=function(t){return Object.assign({},t,{begin:parseInt(t.begin),end:parseInt(t.end)})},yt=function(t,e,i,n,r,s,o){const a=mt(r,s);return gt([t,e],t=>function(t,e){return t=t||"",Object.assign({},e,{id:vt(e,t),span:_t(e.span)})}(o,t),a.accept.denotation),gt([i],t=>function(t,e){return t=t||"",Object.assign({},e,{id:vt(e,t),subj:t+e.subj,obj:e.obj})}(o,t),a.accept.attribute),gt([n],t=>function(t,e){return t=t||"",Object.assign({},e,{id:vt(e,t),subj:t+e.subj,obj:t+e.obj})}(o,t),a.accept.relation),gt([t],t=>Object.assign({},t,{span:_t(t.span)}),a.accept.typeSet),a.reject},bt=function(t,e){const[i,n]=function(t,e,i,n,r,s){if(!s.tracks)return[!1,[]];const o=s.tracks;delete s.tracks;return[!0,o.map((s,o)=>{const a=o+1,l=yt(t,e,i,n,r,s,`track${a}_`);return l.name=`Track ${a} annotations.`,l})]}(t.span,t.entity,t.attribute,t.relation,e.text,e),r=yt(t.span,t.entity,t.attribute,t.relation,e.text,e);var s,o;r.name="Root annotations.",s=t.namespace,o=e.namespaces||[],gt([s],t=>Object.assign({},t),o);const a=[r].concat(n);return{multitrack:i,hasError:a.some(t=>t.hasError),rejects:a}},xt=function(t){return t.attribute.all.map(t=>({id:t.id,subj:t.subj,pred:t.pred,obj:t.obj}))},wt=function(t){return t.relation.all.map(t=>({id:t.id,pred:t.typeName,subj:t.subj,obj:t.obj}))},Et=function(t,e){t.emit(`textae.selection.${e}.change`)},kt=function(t,e,i,n){n.forEach?n.forEach(n=>{t.add(n),e.emit(`textae.selection.${i}.select`,n),Et(e,i)}):(t.add(n),e.emit(`textae.selection.${i}.select`,n),Et(e,i))},St=function(t){return 1===t.size?t.values().next().value:null},Pt=function(t,e,i,n){t.delete(n),e.emit(`textae.selection.${i}.deselect`,n),Et(e,i)},Ct=class{constructor(t,e,i){this._emitter=t,this._kindName=e,this._selected=new Set,this._annotationData=i}add(t){kt(this._selected,this._emitter,this._kindName,t)}has(t){return this._selected.has(t)}get all(){return Array.from(this._selected.values()).map(t=>this._annotationData[this._kindName].get(t))}get size(){return this._selected.size}get some(){return this.size>0}get singleId(){return St(this._selected)}get single(){const t=St(this._selected);return t?this._annotationData[this._kindName].get(t):null}toggle(t){!function(t,e,i,n){t.has(n)?Pt(t,e,i,n):kt(t,e,i,n)}(this._selected,this._emitter,this._kindName,t)}remove(t){Pt(this._selected,this._emitter,this._kindName,t)}clear(){var t,e,i;t=this._selected,e=this._emitter,i=this._kindName,0!==t.size&&(t.forEach(n=>Pt(t,e,i,n)),Et(e,i))}};function Dt(t){return t.id}const Tt=["span","entity","relation"];var At=class{constructor(){this.reset()}reset(){this._lastEdit=-1,this._lastSave=-1}save(){this._lastSave=this._lastEdit}set lastEdit(t){this._lastEdit=t}get hasAnythingToSave(){return this._lastEdit!==this._lastSave}},Ot=i(13),Nt=i.n(Ot),jt=function(t){const e=t.getAttribute("save_to");return e?decodeURIComponent(e):""},It=function(t,e){const i=new Map,n=t.innerText;t.innerHTML="",n&&i.set("inlineAnnotation",n);const r=function(t){return t?decodeURIComponent(t):""}(e);r&&i.set("url",r);if(jt(t)&&i.set("save_to",jt(t)),!n&&!r){const t='{"text": "Currently, the document is empty. Use the `import` button or press the key `i` to open a document with annotation."}';i.set("inlineAnnotation",t)}return i},Mt=function(t,e){t.has(e)&&t.set(e,decodeURIComponent(t.get(e)))},Lt=function(t,e,i){e.getAttribute(i)&&t.set(i,e.getAttribute(i))};const Rt={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n",""],"non-edge characters":[" ","\n"]};var Ht=function(t){return t.map(t=>t.execute())},Ft=function(t){Ht(function(t){return(t=Object.create(t)).reverse(),t.map(t=>t.revert())}(t))},$t=function(t,e){e?console.log("[command.invoke]",t,e):console.log("[command.invoke]",t)},zt=class{get isEmpty(){return!1}},Bt=class extends zt{get kind(){return new Set(["annotation_command"])}};class Wt extends Bt{constructor(t,e,i,n,r,s){super(),this.editor=t,this.annotationData=e,this.selectionModel=i,this.modelType=n,this.isSelectable=r,this.newModel=s}execute(){return this.newModel=this.annotationData[this.modelType].add(this.newModel),this.isSelectable&&this.selectionModel.add(this.modelType,this.newModel.id),$t(`create a new ${this.modelType}: ${this.newModel.id}`),this.newModel}revert(){return new qt(this.editor,this.annotationData,this.selectionModel,this.modelType,this.newModel.id)}}class qt extends Bt{constructor(t,e,i,n,r){super(),this.editor=t,this.annotationData=e,this.selectionModel=i,this.modelType=n,this.id=r}execute(){this.oloModel=this.annotationData[this.modelType].remove(this.id),this.oloModel?$t(`remove a ${this.modelType}: `,this.oloModel):$t(`already removed ${this.modelType}: `,this.id)}revert(){return this.oloModel?new Wt(this.editor,this.annotationData,this.selectionModel,this.modelType,!1,this.oloModel):{execute:()=>{}}}}var Vt=class extends zt{get kind(){return new Set(["configuration_command"])}},Ut=class extends Vt{constructor(t,e,i,n=null){super(),this._typeContainer=t,this._attrDef=e,this._index=i,this._indexThatAddDefaultTo=n}execute(){if("selection"===this._attrDef["value type"]&&this._attrDef.values[this._index].default){let t=null;this._attrDef.values.forEach((e,i)=>{null===t&&i!=this._index&&(t=i)}),this._attrDef.values[t].default=!0}this._deletedValue=this._attrDef.values.splice(this._index,1)[0],"selection"===this._attrDef["value type"]&&null!==this._indexThatAddDefaultTo&&(this._attrDef.values[this._indexThatAddDefaultTo].default=!0),this._typeContainer.updateAttribute(this._attrDef.pred,this._attrDef),$t(`remove a value from an attrribute:${this._attrDef.pred}, index:${this._index}, updated values: \n ${this._attrDef.values.map(t=>JSON.stringify(t)).join("\n ")}`)}revert(){return new Kt(this._typeContainer,this._attrDef,this._deletedValue,this._index)}},Kt=class extends Vt{constructor(t,e,i,n=null){super(),this._typeContainer=t,"selection"===e["value type"]&&i.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=e.values.findIndex(t=>t.default)),delete e.values[this._indexThatRemoveDefaultFrom].default),e.values.splice(n||e.values.length,0,i),this._attrDef=e,this._value=i,this._index=n}execute(){this._updatedAttrDef=this._typeContainer.updateAttribute(this._attrDef.pred,this._attrDef).JSON,$t(`add a new value to attrribute:${this._attrDef.pred}, value: ${JSON.stringify(this._value)}, index: ${this._index}, updated values: \n ${this._attrDef.values.map(t=>JSON.stringify(t)).join("\n ")}`)}revert(){return new Ut(this._typeContainer,this._updatedAttrDef,this._updatedAttrDef.values.length-1,this._indexThatRemoveDefaultFrom)}},Jt=class extends zt{execute(){console.assert(this._subCommands,"_subCommands is necessary!"),this.isEmpty?this.revert=()=>({execute(){}}):(Ht(this._subCommands),this.revert=()=>({_subCommands:this._subCommands,_logMessage:this._logMessage,execute(){Ft(this._subCommands),$t("revert: "+this._logMessage)}}),$t(this._logMessage))}get kind(){return this._subCommands.reduce((t,e)=>new Set([...t,...e.kind]),new Set)}get isEmpty(){return!this._subCommands||0===this._subCommands.length}},Qt=function(t,e,i){return new Gt(e,t,i)};class Gt extends Vt{constructor(t,e,i){super(),this._typeContainer=t,this._attrDef=e,this._changedProperties=i}execute(){const t=this._attrDef.pred,[e,i]=function(t,e){const i=Object.assign({},t.JSON),n=new Map;for(const[r,s]of e.entries())null===s&&void 0!==t[r]?(delete i[r],n.set(r,t[r])):null!==s&&(i[r]=s,n.set(r,void 0===t[r]?null:t[r]));return[i,n]}(this._attrDef,this._changedProperties);this._revertAttrDef=this._typeContainer.updateAttribute(t,e),this._revertChangedProperties=i,$t(`change old pred:${t} to new attridute definition:${JSON.stringify(e)}`)}revert(){return new Gt(this._typeContainer,this._revertAttrDef,this._revertChangedProperties)}}class Xt extends Bt{constructor(t,e,i,n){super(),this.annotationData=t,this.attribute=e,this.oldPred=e.pred,this.oldObj=e.obj,this.newPred=i,this.newObj=n}execute(){this.newModel=this.annotationData.attribute.change(this.attribute.id,this.newPred,this.newObj)}revert(){return new Xt(this.annotationData,this.newModel,this.oldPred,this.oldObj)}}var Yt=class extends Jt{constructor(t,e,i,n){super();const r=[Qt(i,e,n)];let s=[];n.has("pred")&&(s=function(t,e,i){return t.attribute.all.filter(t=>t.pred===e).map(e=>new Xt(t,e,i,e.obj))}(t,i.pred,n.get("pred"))),this._subCommands=r.concat(s),this._logMessage=`set ${[...n.entries()].map(([t,e])=>`${t}:${e}`)} to attribute definition ${i.pred}`}},Zt=class extends Jt{constructor(t,e,i,n,r,s=null){super();const o=e.entity.all.filter(t=>t.attributes.find(t=>t.pred===n.pred)),a=[];for(const e of o){const i=e.attributes.find(t=>t.pred==n.pred&&t.obj!==r);i&&a.push(new Xt(t,i,null,r))}const l=[];s&&"string"===n.valueType&&!n.JSON.values.some(t=>t.pattern===r)&&l.push(new Kt(i,n.JSON,{pattern:r,label:s})),this._subCommands=a.concat(l),this._logMessage=`update obj ${r} to attributes: ${a.map(({attribute:t})=>`{id: ${t.id}, subj: ${t.subj}, pred: ${t.pred}, obj: ${t.obj}}`).join(",")}`}},te=class extends Vt{constructor(t,e,i,n){super(),this.editor=t,this.typeContainer=e,this.removeType=i,this.revertDefaultTypeId=n}execute(){const t=this.removeType.id,e=this.typeContainer.get(t);this.typeContainer.delete(t),this.revertDefaultTypeId&&(this.typeContainer.defaultType=this.revertDefaultTypeId),e&&(this.removeType=e),$t(`remove a type:${JSON.stringify(this.removeType)}, default is ${this.typeContainer.defaultType}`)}revert(){return new ee(this.editor,this.typeContainer,this.removeType)}},ee=class extends Vt{constructor(t,e,i){super(),this.editor=t,this.typeContainer=e,this.newType=i}execute(){this.typeContainer.addDefinedType(this.newType),this.newType.default&&(this.revertDefaultTypeId=this.typeContainer.defaultType,this.typeContainer.defaultType=this.newType.id),$t(`create a new type:${JSON.stringify(this.newType)}, default is ${this.typeContainer.defaultType}`)}revert(){return new te(this.editor,this.typeContainer,this.newType,this.revertDefaultTypeId)}};class ie extends Vt{constructor(t,e,i,n,r,s,o){super(),this.editor=t,this.annotationData=e,this.typeContainer=i,this.modelType=n,this.id=r,this.changedProperties=s,this.newDefaultTypeId=o}execute(){const t=this.typeContainer.get(this.id),[e,i]=function(t,e){const i=Object.assign({},e),n=new Map;for(const[r,s]of t.entries())null===s&&void 0!==e[r]?(delete i[r],n.set(r,e[r])):null!==s&&(i[r]=s,n.set(r,void 0===e[r]?null:e[r]));return[i,n]}(this.changedProperties,t);this.typeContainer.set(this.id,e),this._updateDefaultType(e),this.revertId=e.id,this.revertChangedProperties=i,$t(`change old type:${JSON.stringify(t)} to new type:${JSON.stringify(e)}, default is ${this.typeContainer.defaultType}`)}_updateDefaultType(t){t.default?(this.revertDefaultTypeId=this.typeContainer.defaultType,this.typeContainer.defaultType=t.id):this.newDefaultTypeId&&(this.typeContainer.defaultType=this.newDefaultTypeId)}revert(){return new ie(this.editor,this.annotationData,this.typeContainer,this.modelType,this.revertId,this.revertChangedProperties,this.revertDefaultTypeId)}}class ne extends Bt{constructor(t,e,i,n,r){super(),this.editor=t,this.annotationData=e,this.modelType=i,this.id=n,this.newType=r}execute(){this.oldType=this.annotationData[this.modelType].get(this.id).typeName;const t=this.annotationData[this.modelType].changeType(this.id,this.newType);$t(`change type of a ${this.modelType}. oldtype:${this.oldType} ${this.modelType}:`,t)}revert(){return new ne(this.editor,this.annotationData,this.modelType,this.id,this.oldType)}}var re=class extends Jt{constructor(t,e,i,n,r){super();const s=rt.rejectSameType(i.entity.all,n,r),o=s.map(i=>new ne(t,e,"entity",i.id,n)),a=function(t,e,i,n,r){const s=[];for(const o of t){for(const t of o.attributes){const o=e.find(e=>t.pred===e.pred);o?String(t.obj)!==o.obj&&s.push(new Xt(i,t,o.pred,o.obj)):s.push(new qt(n,i,r,"attribute",t.id))}for(const t of e)o.attributes.some(e=>t.pred===e.pred)||s.push(new Wt(n,i,r,"attribute",!1,{subj:o.id,pred:t.pred,obj:t.obj}))}return s}(s,r,e,t,i);this._subCommands=o.concat(a),this._logMessage=`set type ${n} and ${JSON.stringify(r)} to entities ${s}`}},se=class extends Jt{constructor(t,e,i,n,r,s,o){super();const a=[];if(n){const i=o.get(r);i.id?i.label!==n&&a.push(new ie(t,e,o,"entity",r,new Map([["label",n]]))):a.push(new ee(t,o,{id:r,label:n}))}const l=new re(t,e,i,r,s);l.isEmpty||a.push(l),this._subCommands=a,this._logMessage=`change entity value: ${r} attribute: ${JSON.stringify(s)}  label: ${n} `}},oe=class extends Jt{constructor(t,e,i,n){super();const r=i.relation.all.filter(t=>t.typeName!==n).map(t=>t.id);this._subCommands=r.map(i=>new ne(t,e,"relation",i,n)),this._logMessage=`set type ${n} to relations ${r}`}},ae=class extends Jt{constructor(t,e,i,n,r,s){super();const o=[];if(n){const i=s.get(r);i.id?i.label!==n&&o.push(new ie(t,e,s,"relation",r,new Map([["label",n]]))):o.push(new ee(t,s,{id:r,label:n}))}const a=new oe(t,e,i,r);a.isEmpty||o.push(a),this._subCommands=o,this._logMessage=`change relation value: ${r} label: ${n} `}},le=function(t,e,i,n,r,s){return t.has(e)?new ie(i,n,t,r,e,s,null):new ee(i,t,Object.assign(Object.fromEntries(s),{id:e}))},ce=class extends Jt{constructor(t,e,i,n,r,s){super();const o=[le(i,r,t,e,n,s)];let a=[];(s.has("id")||s.has("label")||s.has("color"))&&(a=function(t,e,i,n,r){return t[e].all.filter(t=>t.typeName===i).map(s=>new ne(n,t,e,s.id,r.get("id")||i))}(e,n,r,t,s)),this._subCommands=o.concat(a),this._logMessage=`set ${[...s.entries()].map(([t,e])=>`${t}:${e}`)} to type definition ${r}`}},ue=class extends Jt{constructor(t,e,i,n){super();const r=i.entity.all.filter(t=>t.typeName!==n).map(t=>t.id);this._subCommands=r.map(i=>new ne(t,e,"entity",i,n)),this._logMessage=`set type ${n} to entities ${r}`}},he=class extends Jt{constructor(t,e,i,n){super();const r=t.attribute.getSameAttributes(e,i).map(e=>new Xt(t,e,null,n));this._subCommands=r,this._logMessage=`update obj ${n} to attributes: ${r.map(({attribute:t})=>`{id: ${t.id}, subj: ${t.subj}, pred: ${t.pred}, obj: ${t.obj}}`).join(",")}`}};class de extends Vt{constructor(t,e,i,n,r){super(),this._typeContainer=t,this._attrDef=e,this._index=i,this._value=n,this._indexThatRemoveDefaultFrom=r}execute(){if("selection"===this._attrDef["value type"]&&(!this._attrDef.values[this._index].default&&this._value.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=this._attrDef.values.findIndex(t=>t.default)),delete this._attrDef.values[this._indexThatRemoveDefaultFrom].default),this._attrDef.values[this._index].default&&!this._value.default))if(1===this._attrDef.values.length)this._value.default=!0;else{let t=null;this._attrDef.values.forEach((e,i)=>{null===t&&i!=this._index&&(t=i)}),delete this._value.default,this._attrDef.values[t].default=!0,this._indexThatRemoveDefaultFrom=t}this._valueBeforeChange=this._attrDef.values.splice(this._index,1,this._value)[0],this._typeContainer.updateAttribute(this._attrDef.pred,this._attrDef),$t(`change value of attrribute:${this._attrDef.pred}, oldValue: ${JSON.stringify(this._valueBeforeChange)}, newValue: ${JSON.stringify(this._value)}`)}revert(){return new de(this._typeContainer,this._attrDef,this._index,this._valueBeforeChange,this._indexThatRemoveDefaultFrom)}}var pe=class extends Jt{constructor(t,e,i,n,r,s){super(),this._subCommands=[new de(e,i,n,r,s)],"selection"===i["value type"]&&i.values[n].id!==r.id&&this._subCommands.push(new he(t,i.pred,i.values[n].id,r.id)),this._logMessage="change attribute definition."}},fe=class extends Vt{constructor(t,e){super(),this.typeContainer=t,this.removeAttrdef=e,this.index=t.getIndexOfAttribute(e.pred)}execute(){this.typeContainer.deleteAttribute(this.removeAttrdef.pred),$t(`remove an attrribute definition:${JSON.stringify(this.removeAttrdef)}, index:${this.index}`)}revert(){return new me(this.typeContainer,this.removeAttrdef.JSON,this.index)}},me=class extends Vt{constructor(t,e,i){super(),this.typeContainer=t,this.newAttrDef=e,this.index=i}execute(){"numeric"===this.newAttrDef["value type"]&&(this.newAttrDef.min=this.newAttrDef.min||0,this.newAttrDef.max=this.newAttrDef.max||0,this.newAttrDef.step=this.newAttrDef.step||0,this.newAttrDef.default=this.newAttrDef.default||0),"selection"!==this.newAttrDef["value type"]||this.newAttrDef.values||(this.newAttrDef.values=[{id:"default",default:!0}]),this.typeContainer.createAttribute(this.newAttrDef,this.index),$t(`create a new attrribute definition:${JSON.stringify(this.newAttrDef)}, index: ${this.index}`)}revert(){return new fe(this.typeContainer,this.newAttrDef)}},ge=function(t,e,i,n,r){return rt.filterWithoutSamePredicateAttribute(n.entity.all,e.pred).map(s=>new Wt(i,t,n,"attribute",!1,{id:null,subj:s.id,pred:e.pred,obj:r||e.default}))},ve=class extends Jt{constructor(t,e,i,n,r){super(),this._subCommands=ge(e,n,t,i,r),this._logMessage=`create attirbute ${n.pred}:${n.default} to entity ${i.entity.all.map(t=>t.id).join(", ")}`}},_e=class extends Jt{constructor(t,e,i,n){super();const r=i.span.all.map(t=>t.id);this._subCommands=r.map(r=>new Wt(t,e,i,"entity",!0,{span:r,typeName:n})),this._logMessage=`create a ${n} type entity to ${r}`}},ye=class extends Jt{constructor(t,e,i,n,r){super(),this._subCommands=n.map(({obj:n,pred:s})=>new Wt(t,e,i,"attribute",!1,{subj:r,obj:n,pred:s})),this._logMessage=`create attributes ${n.map(({obj:t,pred:e})=>`obj:${t} pred:${e}`)} for entity ${r}`}},be=class extends Bt{constructor(t,e,i,n,r,s){super(),this._editor=t,this._annotationData=e,this._selectionModel=i,this._spanId=n,this._typeName=r,this._attributes=s}execute(){const t=this._createEntityCommand(),e=this._createAttributesCommands(Ht([t]).pop().id);Ht([e]),this.revert=()=>({execute(){Ft([t].concat(e)),$t("revert create a type for span: "+this.id)}}),$t("create a type for span: "+this._spanId)}_createEntityCommand(){return new Wt(this._editor,this._annotationData,this._selectionModel,"entity",!0,{span:this._spanId,typeName:this._typeName})}_createAttributesCommands(t){return new ye(this._editor,this._annotationData,this._selectionModel,this._attributes,t)}},xe=class extends Jt{constructor(t,e,i,n,r){super();const s=F.makeSpanDomId(t,n);this._subCommands=[new Wt(t,e,i,"span",!0,n)].concat(r.map(n=>new be(t,e,i,s,n.typeName,n.attributes))),this._logMessage="create a span "+s}},we=function(t,e,i){const n=i?e=>function(t,e,i){const n=t.charAt(i.begin-1),r=t.charAt(i.end);return e(n)&&e(r)}(t.sourceDoc,i,e):t=>t;return function(t,e){const i=String.prototype.indexOf.bind(t,t.substring(e.begin,e.end)),n=e.end-e.begin,r=[];let s=0;for(let t=i(s);-1!==t;t=i(s))r.push({begin:t,end:t+n}),s=t+n;return r}(t.sourceDoc,e).filter(t=>t.begin!==e.begin).filter(n).filter(e=>!t.span.has(e)).filter(e=>!t.span.isBoundaryCrossingWithOtherSpans(e))},Ee=class extends Jt{constructor(t,e,i,n,r,s){super(),this._subCommands=we(e,n,s).map(n=>new xe(t,e,i,n,r)),this._logMessage="replicate a span "+F.makeSpanDomId(t,n)}};var ke=class extends Jt{constructor(t,e,i,n,r,s,o){super();const a=[new nt(r)];this._subCommands=[new xe(t,e,i,{begin:n.begin,end:n.end},a)],this._logMessage=`create a span ${n.begin}:${n.end} with type ${a[0].name}`,s&&n.end-n.begin<=100&&(this._subCommands.push(new Ee(t,e,i,{begin:n.begin,end:n.end},a,o)),this._logMessage=this._logMessage+" and replicate auto")}};class Se extends Vt{constructor(t,e,i){super(),this._typeContainer=t,this._oldIndex=e,this._newIndex=i}execute(){this._typeContainer.moveAttribute(this._oldIndex,this._newIndex),$t(`move the attrribute definition: from ${this._oldIndex} to ${this._newIndex}`)}revert(){return new Se(this._typeContainer,this._newIndex,this._oldIndex)}}class Pe extends Bt{constructor(t,e,i,n){console.assert(i!==F.makeSpanDomId(t,n),`Do not need move span:  ${i} ${n}`),super(),this.editor=t,this.annotationData=e,this.spanId=i,this.newSpan=n}execute(){const[t,e]=this.annotationData.span.move(this.spanId,this.newSpan);this.oldSpan=t,this.newId=e,$t(`move span: ${this.spanId} to {begin: ${this.newSpan.begin}, end: ${this.newSpan.end}}`)}revert(){return new Pe(this.editor,this.annotationData,this.newId,this.oldSpan)}}var Ce=class extends Jt{constructor(t,e,i,n){super();const r=i.span.all.map(t=>t.id);this._subCommands=r.map(r=>n.map(n=>new be(t,e,i,r,n.typeName,n.attributes))).flat(),this._logMessage=`paste types ${n} to ${r}`}},De=function(t,e,i,n){var r,s;return function(t,e,i,n){return t.map(t=>new qt(e,i,n,"attribute",t.id))}((r=i.entity.all,s=n,r.reduce((t,e)=>{const i=e.attributes.find(t=>t.pred===s.pred);return i&&t.push(i),t},[])),t,e,i)},Te=class extends Jt{constructor(t,e,i,n){super();const r=De(t,e,i,n);this._subCommands=r,this._logMessage=`remove attirbute ${n.pred} to entity ${i.entity.all.map(t=>t.id).join(", ")}`}},Ae=class extends Jt{constructor(t,e,i,n){super();const r=new qt(t,e,i,"entity",n);const s=e.entity.get(n).relations.map(n=>new qt(t,e,i,"relation",n)),o=e.entity.get(n).attributes.map(n=>new qt(t,e,i,"attribute",n.id));this._subCommands=s.concat(o).concat(r),this._logMessage="remove an entity "+n}},Oe=class extends Jt{constructor(t,e,i,n){super();const r=e.span.get(n).entities.map(({id:n})=>new Ae(t,e,i,n)),s=new qt(t,e,i,"span",n);this._subCommands=r.concat(s),this._logMessage="remove a span "+n}};function Ne(t,e){return t.filter(t=>t.span===e.id)}var je=function(t,e){return t.entities.every(t=>e.includes(t))},Ie=class extends Jt{constructor(t,e,i){super();const n=i.entity.all,r=function(t,e){return new Set(t.map(t=>e.span.get(t.span)))}(n,e);let s=[];for(const o of r.values())je(o,n)?s.push(new Oe(t,e,i,o.id)):s=s.concat(Ne(n,o).map(n=>new Ae(t,e,i,n.id)));this._subCommands=s,this._logMessage=`remove entities ${n.map(t=>t.id)} from spans ${[...r.values()].map(t=>t.id)}`}},Me=class extends Jt{constructor(t,e,i){super();const n=i.span.all.map(t=>t.id),r=i.relation.all.map(t=>t.id);this._subCommands=[].concat(r.map(n=>new qt(t,e,i,"relation",n)),i.entity.some?[new Ie(t,e,i)]:[],n.map(n=>new Oe(t,e,i,n))),this._logMessage="remove selected "+n.concat(i.entity.all.map(t=>t.id)).concat(r)}},Le=class extends Jt{constructor(t,e,i,n){super(),this._subCommands=ge(e,n,t,i);const r=De(t,e,i,n);this._subCommands=this._subCommands.concat(r),this._logMessage=`toggle flag attirbute ${n.pred} to entity ${i.entity.all.map(t=>t.id).join(", ")}`}},Re=class extends Jt{constructor(t,e){super(),this._subCommands=[];for(const[i,n]of e.entries())this._subCommands.push(new He(t,i,n));this._logMessage="revert: move entities "+Array.from(e.values()).flat().map(t=>t.id).join(", ")}},He=class extends Bt{constructor(t,e,i){super(),this._annotationData=t,this._span=e,this._entities=i}execute(){this._moveMap=this._entities.reduce((t,e)=>{const i=this._annotationData.span.get(e.span);return t.has(i)?t.get(i).push(e):t.set(i,[e]),t},new Map);const t="move entities: "+Array.from(this._moveMap.entries()).map(([t,e])=>`${e.map(t=>t.id).join(", ")} from ${e[0].span} to ${this._span.id}`).join(", ");this._annotationData.entity.moveEntities(this._span.id,this._entities),$t(t)}revert(){return new Re(this._annotationData,this._moveMap)}},Fe=class extends Jt{constructor(t,e,i,n){console.assert(i.span.single,"There must be one span to be pasted."),super();const r=[new He(e,i.span.single,n)];for(const s of n.map(t=>t.span).reduce((t,e)=>(t.add(e),t),new Set).values()){const o=e.span.get(s);je(o,n)&&r.push(new qt(t,e,i,"span",s))}this._subCommands=r,this._logMessage="paste cut entities"}},$e=i(46),ze=i.n($e),Be=function(t){return t.reduce((t,e)=>{const i=e.typeName;return t.has(i)?t.set(i,t.get(i)+1):t.set(i,1),t},new Map)},We=function(t,e,i,n){const r=Be(t),s=function(t,e){const i=[];for(const n of t)e.has(n)||i.push(n);return i.sort((t,e)=>t>e?1:t<e?-1:0),i}(e.ids(),r);return function(t){const e=Array.from(t.keys());return e.sort((e,i)=>{const n=t.get(i)-t.get(e);return 0!==n?n:e>i?1:e<i?-1:0}),e}(r).concat(s).map(t=>({id:t,label:e.has(t)&&e.get(t).label||void 0,defaultType:t===i,uri:tt(t)?t:void 0,color:e.has(t)&&e.get(t).color||n,useNumber:r.get(t)}))};class qe{constructor(t){this._map=t.reduce((t,e)=>t.set(e.id,e),new Map)}has(t){return this._map.has(t)}get(t){return Object.assign({},this._map.get(t))}set(t,e){t!==e.id&&this._map.delete(t),this._map.set(e.id,e)}delete(t){this._map.delete(t)}ids(){return this._map.keys()}getConfig(t){return function(t,e){return t.has(e)?t.get(e):function(t,e){const i=function(t,e){const i=[];for(const n of t)-1!==n.indexOf("*")&&0===e.indexOf(n.slice(0,-1))&&i.push(n);return i}(t.ids(),e);return 0===i.length?null:t.get(function(t){let e="";for(const i of t)i.length>e.length&&(e=i);return e}(i))}(t,e)}(this,t)}labelIncludes(t){return[...this._map.values()].filter(t=>t.label).filter(e=>e.label.includes(t))}clone(){return new Map(this._map)}}var Ve=class{constructor(t,e,i,n,r="#555555"){this._editor=t,this._name=e,this._definedTypes=null,this._getAllInstanceFunc=i,this._defaultColor=r,this._lockStateObservable=n,n(()=>this._editor.eventEmitter.emit(`textae.typeDefinition.${this._name}.type.lock`))}set definedTypes(t){this._definedTypes=new qe(t);const e=t.find(t=>!0===t.default);e?(delete e.default,this._defaultType=e.id):this._defaultType=null}has(t){return this._definedTypes.has(t)}get(t){return this._definedTypes.get(t)}set(t,e){this._definedTypes.set(t,e),this._editor.eventEmitter.emit(`textae.typeDefinition.${this._name}.type.change`,e.id)}addDefinedType(t){if(void 0===t.color){const e=this.getColor(t.id);e!==this._defaultColor&&(t.color=e)}if(void 0===t.label){const e=this.getLabel(t.id);e&&(t.label=e)}this.set(t.id,t)}get definedTypes(){return this._definedTypes}get config(){const t=this._definedTypes.clone();for(const{typeName:e}of this._getAllInstanceFunc())t.has(e)||t.set(e,{id:e});for(const[e,i]of t.entries()){const n=Object.assign({},i);i.id===this.defaultType?n.default=!0:delete n.default,t.set(e,n)}return[...t.values()]}get defaultType(){return this._defaultType?this._defaultType:function(t){const e=Be(t);if(0===e.size)return"something";const i=[...e.entries()].sort(),{mostCommonlyUsedType:n}=i.reduce(({max:t,mostCommonlyUsedType:e},[i,n])=>(n>t&&(t=n,e=i),{max:t,mostCommonlyUsedType:e}),{max:0,mostCommonlyUsedType:[i][0]});return n}(this._getAllInstanceFunc())}set defaultType(t){console.assert(t,"id is necessary!"),this._defaultType=t,this._editor.eventEmitter.emit(`textae.typeDefinition.${this._name}.type.default.change`)}get defaultColor(){return this._defaultColor}getColor(t){const e=this._definedTypes.getConfig(t);return e&&e.color||this._defaultColor}getLabel(t){const e=this._definedTypes.getConfig(t);return e&&e.label}getUri(t){return tt(t)?t:void 0}findByLabel(t){return this.definedTypes.labelIncludes(t).map(t=>({label:`${t.label}@${t.id}`,raw:t}))}get pallet(){return We(this._getAllInstanceFunc(),this._definedTypes,this.defaultType,this._defaultColor)}delete(t){this._definedTypes.delete(t),this._editor.eventEmitter.emit(`textae.typeDefinition.${this._name}.type.change`,t)}get isLock(){return this._lockStateObservable()}},Ue=class{constructor(t){this.pred=t.pred,this.valueType=t["value type"]}get JSON(){return{pred:this.pred}}get _valuesClone(){console.assert(this._values,"this._values is necessary to clone!");const t=[];for(const e of this._values)t.push(Object.assign({},e));return t}},Ke=class extends Ue{constructor(t){super(t),this.default=!0,this._label=t.label,this._color=t.color}getLabel(){return this._label?this._label:this.pred}getColor(){return this._color}get JSON(){return Object.assign(super.JSON,{"value type":"flag",default:this.default,label:this._label,color:this._color})}},Je=function(t,e){return t<=e},Qe=function(t,e){return t<e},Ge=function(t){if(t.startsWith("["))return e=>Je(new Number(t.replace("[","")),e);if(t.startsWith("("))return e=>Qe(new Number(t.replace("(","")),e);throw t+" is not valid interval notation"},Xe=function(t){if(t.endsWith("]"))return e=>Je(e,new Number(t.replace("]","")));if(t.endsWith(")"))return e=>Qe(e,new Number(t.replace(")","")));throw t+" is not valid interval notation"};class Ye{constructor(t){const[e,i]=t.split(",");if(i?(this._lowwerCond=Ge(e),this._upperCond=Xe(i)):((e.startsWith("[")||e.startsWith("("))&&(this._lowwerCond=Ge(e),this._upperCond=t=>!0),(e.endsWith("]")||e.endsWith(")"))&&(this._lowwerCond=t=>!0,this._upperCond=Xe(e))),!this._lowwerCond||!this._upperCond)throw t+" is not valid interval notation"}test(t){return this._lowwerCond(t)&&this._upperCond(t)}}var Ze=class extends Ue{constructor(t){super(t),this.default=t.default,this.min=t.min,this.max=t.max,this.step=t.step,this._values=t.values||[]}getLabel(t){const e=this._getDef(t);return e&&e.label?e.label:t}getColor(t){const e=this._getDef(t);return e&&e.color?e.color:null}_getDef(t){const e=this._values.filter(t=>"default"!==t.range).find(e=>new Ye(e.range).test(t));if(e)return e;const i=this._values.find(t=>"default"===t.range);return i||null}get JSON(){return Object.assign(super.JSON,{"value type":"numeric",default:this.default,min:this.min,max:this.max,step:this.step,values:super._valuesClone})}},ti=class extends Ue{constructor(t){super(t),this._values=t.values||[]}get default(){return this.values.find(t=>t.default).id}getLabel(t){const e=this._getDef(t);if(e&&e.label)return e.label}getColor(t){const e=this._getDef(t);return e&&e.color?e.color:null}get values(){return this._values}_getDef(t){return this.values.find(e=>e.id==t)}get JSON(){return Object.assign(super.JSON,{"value type":"selection",values:super._valuesClone})}},ei=class extends Ue{constructor(t){super(t),this.autocompletionWs=t.autocompletion_ws,this.default=t.default,this._values=t.values||[]}getLabel(t){const e=this._getDef(t);if(e&&e.label)return e.label}getColor(t){const e=this._getDef(t);return e&&e.color?e.color:null}_getDef(t){const e=this._values.filter(t=>"default"!==t.pattern).find(e=>new RegExp(e.pattern).test(t));if(e)return e;const i=this._values.find(t=>"default"===t.pattern);return i||null}get JSON(){return Object.assign(super.JSON,{"value type":"string",autocompletion_ws:this.autocompletionWs,default:this.default,values:super._valuesClone})}},ii=function(t){if(t instanceof Ue)throw new Error("Give me hash object instead of an AttributeDefinition instance");switch(t["value type"]){case"flag":return new Ke(t);case"numeric":return new Ze(t);case"selection":return new ti(t);case"string":return new ei(t);default:throw new Error(`${t["value type"]} of ${JSON.stringify(t)} is Uknown Attribute`)}},ni=class extends Ve{constructor(t,e,i,n){super(t,"entity",()=>e.all,n,"#77DDDD"),this._annotationDataEntity=e,this._annotationDataAttribute=i}set definedTypes(t){const[e,i]=t;super.definedTypes=e||[],this._annotationDataEntity.definedTypes=this.definedTypes,this._definedAttributes=new Map((i||[]).map(t=>[t.pred,ii(t)]))}createAttribute(t,e=null){null!==e&&this._definedAttributes.size!==e?this._definedAttributes=new Map(Array.from(this._definedAttributes.entries()).reduce((i,[n,r],s)=>(s===e&&i.push([t.pred,ii(t)]),i.push([n,r]),i),[])):this._definedAttributes.set(t.pred,ii(t)),this._editor.eventEmitter.emit("textae.typeDefinition.entity.attributeDefinition.create",t.pred)}findAttribute(t){return this._definedAttributes.get(t)}updateAttribute(t,e){return this._definedAttributes=new Map(Array.from(this._definedAttributes.entries()).map(([i,n])=>i===t?[e.pred,ii(e)]:[i,n])),this._editor.eventEmitter.emit("textae.typeDefinition.entity.attributeDefinition.change",e.pred),this.findAttribute(e.pred)}moveAttribute(t,e){this._definedAttributes=new Map(ze()(this.attributes,t,e).map(t=>[t.pred,t])),this._editor.eventEmitter.emit("textae.typeDefinition.entity.attributeDefinition.move")}deleteAttribute(t){this._definedAttributes.delete(t),this._editor.eventEmitter.emit("textae.typeDefinition.entity.attributeDefinition.delete")}get attributes(){return Array.from(this._definedAttributes.values())||[]}get definedTypes(){return this._definedTypes}get attributeConfig(){return this.attributes.map(t=>t.JSON)}hasAttributeInstance(t){return this._annotationDataAttribute.all.some(e=>e.pred===t)}hasSelectionAtributeValueInstance(t,e){return this._annotationDataAttribute.all.some(i=>i.pred===t&&i.obj==e)}getAttributeLabel(t){if(this._definedAttributes.has(t.pred))return this.findAttribute(t.pred).getLabel(t.obj)}getAttributeColor(t){if(this._definedAttributes.has(t.pred))return this.findAttribute(t.pred).getColor(t.obj)}getIndexOfAttribute(t){return Array.from(this._definedAttributes.values()).findIndex(e=>e.pred===t)}getAttributeAt(t){return Array.from(this._definedAttributes.values())[t-1]}},ri=function(t,e){const i=F.makeEntityDomId(t,e);return t[0].querySelector(`#${i} .textae-editor__entity__endpoint`)},si=function(t,e){return t.postionCache=t.postionCache||new class{constructor(t,e){this._editor=t,this._entityModel=e,this._spanCache=new Map,this._gridCache=new Map,this._entityCache=new Map,this._connectCache=new Map}cacheAllSpan(t){for(const e of t)this.getSpan(e.id)}getSpan(t){return this._spanCache.has(t)||this._spanCache.set(t,function(t,e){const i=t[0].querySelector("#"+e);if(!i)throw new Error("span is not renderd : "+e);const n=i.getBoundingClientRect(),r=i.offsetParent.offsetParent.getBoundingClientRect();return{top:n.top-r.top,left:n.left-r.left,width:i.offsetWidth,height:i.offsetHeight,center:i.offsetLeft+i.offsetWidth/2}}(this._editor,t)),this._spanCache.get(t)}removeAllSpan(){this._spanCache.clear()}setGrid(t,e){this._gridCache.set(t,e)}getGrid(t){return this._gridCache.get(t)}isGridPrepared(t){const e=this._entityModel.get(t).span;return this._gridCache.has(e)}removeGrid(t){this._gridCache.delete(t)}removeAllGrid(){this._gridCache.clear()}getEntity(t){if(!this._entityCache.has(t)){const e=ri(this._editor,t);if(!e)throw new Error("entity is not rendered : "+t);const i=this._entityModel.get(t).span,n=this._gridCache.get(i);return{top:n.top+e.offsetTop,center:n.left+e.offsetLeft+e.offsetWidth/2}}return this._entityCache.get(t)}removeAllEntity(){this._entityCache.clear()}setConnect(t,e){this._connectCache.set(t,e)}getConnect(t){return this._connectCache.get(t)}removeConnect(t){this._connectCache.delete(t)}removeAllConnect(){this._connectCache.clear()}}(t,e),t.postionCache},oi=function(t){return document.querySelector("#G"+t)};var ai=function(t,e,i,n){if(!e.span.get(n.id))return;const{top:r,left:s}=t.getSpan(n.id),o={top:r-i.getHeightIncludeDescendantGrids(n),left:s};(function(t,e){return!t||t.top!==e.top||t.left!==e.left})(t.getGrid(n.id),o)&&(function(t,e){const i=oi(t.id);i&&(i.style.top=e.top+"px",i.style.left=e.left+"px")}(n,o),t.setGrid(n.id,o),function(t){const e=oi(t.id);(function(t){if(t&&t.classList.contains("hidden"))return t;return null})(e)&&function(t){t.classList.remove("hidden")}(e)}(n))},li=function(t,e,i){return t.cacheAllSpan(e.span.allSpansWithGrid),e.span.allSpansWithGrid.map(n=>function(t,e,i,n){return new Promise((r,s)=>{requestAnimationFrame(()=>{try{ai(t,e,i,n),r()}catch(t){console.error(t,t.stack),s()}})})}(t,e,i,n))},ci=function(t){return t.closest(".textae-editor__entity")},ui=function(t){return ci(t).querySelector(".textae-editor__entity__type-values")};var hi=function(t){return document.querySelector("#"+t)};var di=class{constructor(t){this._editor=t}select(t){const e=ri(this._editor,t),i=ci(e),n=ui(e);var r;e.classList.add("ui-selected"),i.classList.add("ui-selected"),n.classList.add("ui-selected"),(r=e,ci(r).querySelector(".textae-editor__entity__type-label")).focus()}deselect(t){const e=ri(this._editor,t),i=ci(e),n=ui(e);e.classList.remove("ui-selected"),i.classList.remove("ui-selected"),n.classList.remove("ui-selected")}};var pi=function(t,e){const i=new class{select(t){const e=hi(t);e.classList.add("ui-selected"),e.focus()}deselect(t){const e=hi(t);e&&e.classList.remove("ui-selected")}},n=new di(t),r=new class{constructor(t,e){this._domPositionCache=si(t,e.entity)}select(t){var e,i,n;i=this._domPositionCache,n=t,(e=i.getConnect(n))&&e.select&&e.select()}deselect(t){var e,i,n;i=this._domPositionCache,n=t,(e=i.getConnect(n))&&e.deselect&&e.deselect()}}(t,e);t.eventEmitter.on("textae.selection.span.select",t=>i.select(t)).on("textae.selection.span.deselect",t=>i.deselect(t)).on("textae.selection.entity.select",t=>n.select(t)).on("textae.selection.entity.deselect",t=>n.deselect(t)).on("textae.selection.relation.select",t=>setTimeout(()=>r.select(t),150)).on("textae.selection.relation.deselect",t=>setTimeout(()=>r.deselect(t),150))};var fi=function(t,e){t.setAttribute("style",`padding-top: ${18*e.value}px;`)},mi=function(t,e,i,n){t(t=>{!function(t,e){for(const i of t[0].querySelectorAll(".textae-editor__entity"))fi(i,e)}(e,t),i.updateLineHeight(),n.update()})},gi=function(t){return t.find(".textae-editor__body__annotation-box")},vi=function(t,e){return function(t,e,i){console.assert(e,"element MUST exists.");const n=t.querySelectorAll("."+i),r=Array.from(n).indexOf(e);return n.length-r>1?n[r+1]:null}(t,document.querySelector("#"+e),"textae-editor__span")};const _i=x.a.compile('\n  <div id={{id}} class="textae-editor__grid hidden" style="width: {{spanWidth}}px">\n  </div>\n  ');var yi=function(t,e){return _i({id:"G"+t,spanWidth:e})},bi=function(t,e,i,n){const r=e.getSpan(n),s=function(t,e){const i=vi(t,e);return i?document.querySelector("#G"+i.id):null}(t,n);if(s){const t=yi(n,r.width);return s.insertAdjacentHTML("beforebegin",t),s.previousElementSibling}{const t=yi(n,r.width);return i.insertAdjacentHTML("beforeend",t),i.lastElementChild}};function xi(t){return document.querySelector("#G"+t)}const wi=x.a.compile('\n<div class="textae-editor__entity" id="{{entityId}}" title="{{entityTitle}}">\n  <div class="textae-editor__entity__endpoint-zone">\n    <div\n      id="jsPlumb_{{entityId}}"\n      class="textae-editor__entity__endpoint" \n      style="border-color: {{color}};"></div>\n  </div>\n  <div class="textae-editor__entity__type-values" style="background-color: {{color}}">\n    <div class="textae-editor__entity__type-label" tabindex="0">\n      {{#if href}}\n        <a target="_blank"/ href="{{href}}">{{label}}</a>\n      {{else}}\n        {{label}}\n      {{/if}}\n    </div>\n    {{#each attributes}}\n    <div class="textae-editor__entity__attribute" title="{{title}}" data-pred="{{pred}}" data-obj="{{obj}}" {{#if color}} style="background-color: {{color}}"{{/if}}>\n      <span class="textae-editor__entity__attribute-label">\n        {{#if href}}\n          <a target="_blank"/ href="{{href}}">{{label}}</a>\n        {{else}}\n          {{label}}\n        {{/if}}\n      </span>\n    </div>\n    {{/each}}\n  </div>\n</div>\n');var Ei=function(t,e,i){const n=t.toDomInfo(e,i);return wi(n)},ki=function(t,e,i,n){const r=function(t,e){return document.querySelector("#G"+e)||t.render(e)}(e,i.span);if(r.querySelector("#"+i.entityDomId))return;const s=Ei(i,n,t);r.insertAdjacentHTML("beforeend",s)},Si=function(t){return document.querySelector("#"+t.entityDomId)},Pi=function(t,e){const i=Si(t);i&&fi(i,e())},Ci=function(t,e){return{start:t.begin-e,end:t.end-e}},Di=function(t,e){const i=e.bigBrother;return i?function(t,e){let{start:i,end:n}=Ci(t,e.end),r=document.querySelector("#"+e.id).nextSibling;return r.length<i&&(i-=r.length,n-=r.length,r=r.nextSibling),{textNode:r,start:i,end:n}}(e,i):function(t,e){if(e.parent){const{start:t,end:i}=Ci(e,e.parent.begin);return{textNode:document.querySelector("#"+e.parent.id).firstChild,start:t,end:i}}{const{start:i,end:n}=Ci(e,0);return{textNode:t[0].querySelector(".textae-editor__body__text-box").firstChild,start:i,end:n}}}(t,e)},Ti=function(t,e){const{textNode:i,start:n,end:r}=Di(t,e);if(!i)throw new Error("The textNode on to create a span is not found. "+e.id);if(!function(t,e,i){return 0<=e&&i<=t.length}(i,n,r))throw new Error(`oh my god! I cannot render ${e.id}. "${i.textContent.slice(n,r)}" at ${n}~${r} of text(${i.textContent.length}) as "${i.textContent}".`);return function(t,e,i){const n=document.createRange();return n.setStart(t,e),n.setEnd(t,i),n}(i,n,r)},Ai=function(t,e){const i=Ti(t,e),n=function(t){const e=document.createElement("span");e.setAttribute("id",t.id),e.setAttribute("title",t.id),t.styleOnly||(e.setAttribute("tabindex",0),e.classList.add("textae-editor__span"));for(const i of t.styles.values())e.classList.add("textae-editor__style"),e.classList.add("textae-editor__style--"+i);return e}(e);i.surroundContents(n)},Oi=function(t){const e=document.querySelector("#"+t),i=e.parentNode;for(;e.firstChild;)i.insertBefore(e.firstChild,e);i.removeChild(e),i.normalize()};var Ni=function(t,e,i,n,r,s,o){const a=new class{constructor(t,e){this._editor=t,this._renderEntityFunc=e}render(t){!function(t,e,i){e.traverse(t=>{null!==document.querySelector("#"+t.id)&&Oi(t.id)}),e.traverse(e=>Ai(t,e),t=>{!function(t,e){for(const i of t.entities)e(i)}(t,i)})}(this._editor,t,this._renderEntityFunc)}remove(t){if(t.styles.size>0){const e=document.querySelector("#"+t.id);e.removeAttribute("tabindex"),e.classList.remove("textae-editor__span")}else Oi(t.id)}}(e,t=>s.render(t));e.eventEmitter.on("textae.annotationData.all.change",()=>{!function(t,e){t[0].querySelector(".textae-editor__body__text-box").innerHTML=e}(e,t.sourceDoc),function(t,e,i,n,r){gi(t).empty(),e.removeAllGrid(),function(t,e){for(const i of t.span.topLevel)e.render(i)}(i,n),function(t,e){e.reset();for(const i of t.relation.all)e.render(i)}(i,r)}(e,i,t,a,n),o.updateLineHeight()}).on("textae.annotationData.span.add",t=>{a.render(t)}).on("textae.annotationData.span.remove",t=>{a.remove(t),r.remove(t.id)}).on("textae.annotationData.entity.add",t=>{s.render(t)}).on("textae.annotationData.entity.change",t=>{s.change(t),r.updateWidth(t.span)}).on("textae.annotationData.entity.remove",t=>{s.remove(t)}).on("textae.annotationData.entity.move",t=>{for(const e of t)s.remove(e),s.render(e)}).on("textae.annotationData.relation.add",t=>{n.render(t)}).on("textae.annotationData.relation.change",t=>{n.change(t)}).on("textae.annotationData.relation.remove",t=>{n.remove(t)}).on("textae.annotationData.attribute.add",t=>{s.change(t.entity)}).on("textae.annotationData.attribute.change",t=>{s.change(t.entity)}).on("textae.annotationData.attribute.remove",t=>{s.change(t.entity)})},ji=function(t,e,i){const n=si(t,e.entity).getConnect(i);if(!n)throw new Error("no connect for id: "+i);return n};const Ii=.6,Mi=.05,Li=20;var Ri=function(t,e,i){const n=si(t,e.entity),r=function(t){return{sourceId:t.subj,targetId:t.obj}}(i),s=n.getEntity(r.sourceId),o=n.getEntity(r.targetId),a=s.center,l=o.center,c=s.top,u=o.top,h=Math.abs(a-l),d=Math.abs(c-u);let p=h*Ii+d*Mi+Li;return p/=2.4,p};var Hi={width:7,length:9,location:1,id:"normal-arrow"};var Fi={width:14,length:18,location:1,id:"hover-arrow"},$i=function(t,e){t===Hi.id?e.addOverlay(["Arrow",Hi]):t===Fi.id&&e.addOverlay(["Arrow",Fi])},zi=function(t,e){e.removeOverlay(t)},Bi=function(t){(function(t){return t.getOverlay(Fi.id)})(t)||(zi(Hi.id,t),$i(Fi.id,t))},Wi=function(t){(function(t){return t.getOverlay(Hi.id)})(t)||(zi(Fi.id,t),$i(Hi.id,t))},qi=class{constructor(t){console.assert(t,"jsPlumbConncetion is necessary."),this._jsPlumConnection=t}showBigArrow(){Bi(this._jsPlumConnection)}hideBigArrow(){Wi(this._jsPlumConnection)}resetArrows(){!function(t){for(const e of function(t){return t.getOverlays().filter(t=>"Arrow"===t.type).map(t=>t.id)}(t))t.removeOverlays(e),$i(e,t)}(this._jsPlumConnection)}};var Vi=function(t,e,i,n){return new Promise((r,s)=>{try{const s=e.relation.all.filter(t=>!t.removed).filter(t=>void 0===t.render);!function(t,e,i){i.map(i=>({connect:new ji(t,e,i.id),curviness:Ri(t,e,i)})).filter(t=>t.connect.setConnector&&t.connect.connector.getCurviness()!==t.curviness).forEach(t=>{t.connect.setConnector(["Bezier",{curviness:t.curviness}]),new qi(t.connect).resetArrows()})}(t,e,s),n.repaintEverything(),function(t,e,i){i.map(i=>new ji(t,e,i.id)).forEach(t=>t.select())}(t,e,i.relation.all.filter(t=>void 0===t.render)),r()}catch(t){s(t)}})},Ui=i(9),Ki=function(){return{bindClickAction(t){this.bind("click",t),this.getOverlay(Ui.id).bind("click",(e,i)=>t(e.component,i))}}},Ji=function(t){const e=t.getOverlay(Ui.id);if(!e)throw new Error("no label overlay");return e},Qi=function(t){const e=t.slice(1);return`rgba(${parseInt(e.substr(0,2),16)}, ${parseInt(e.substr(2,2),16)}, ${parseInt(e.substr(4,2),16)}, 1)`},Gi=function(t,e,i){const n=t.relation.get(i).typeName,r=e.relation.getColor(n);return{strokeStyle:Qi(r)}},Xi=function(t,e){return t.connector.canvas.classList.contains(e)},Yi=function(t,e,i,n){Xi(t,"ui-selected")||(!function(t){t.addClass("hover")}(t),function(t){new Ji(t).addClass("hover")}(t),t.setPaintStyle(Gi(e,i,n)),new qi(t).showBigArrow())},Zi=function(t){new Ji(t).removeClass("hover")},tn=function(t){t.removeClass("hover")},en=function(t,e,i,n,r){t.dead||(t.setPaintStyle(Gi(i,n,r)),function(t,e){e.addClass("ui-selected"),t.focus()}(e,t),function(t){new Ji(t).addClass("ui-selected")}(t),tn(t),Zi(t),new qi(t).showBigArrow())},nn=function(t,e,i,n){t.dead||(!function(t){t.removeClass("ui-selected")}(t),function(t){new Ji(t).removeClass("ui-selected")}(t),t.setPaintStyle(Gi(e,i,n)),new qi(t).hideBigArrow())},rn=function(t,e,i,n){const r=new class{constructor(t,e,i,n){this.editor=t,this.annotationData=e,this.typeDefinition=i,this.connect=n}pointup(){Yi(this.connect,this.annotationData,this.typeDefinition,this.connect.relationId)}pointdown(){var t,e,i,n;t=this.connect,e=this.annotationData,i=this.typeDefinition,n=this.connect.relationId,Xi(t,"ui-selected")||(tn(t),Zi(t),t.setPaintStyle(Gi(e,i,n)),new qi(t).hideBigArrow())}select(){en(this.connect,this.editor,this.annotationData,this.typeDefinition,this.connect.relationId)}deselect(){nn(this.connect,this.annotationData,this.typeDefinition,this.connect.relationId)}}(t,e,i,n);return Object.assign(n,{pointup(){r.pointup()},pointdown(){r.pointdown()},select(){r.select()},deselect(){r.deselect()}})},sn=function(t,e,i,n,r){return function(t,e){Object.assign(t,{relationId:e})}(n,r),rn(t,e,i,n),function(t){on(t,t=>t.pointup(),t=>t.pointdown())}(n),function(t){on(new Ji(t),t=>t.component.pointup(),t=>t.component.pointdown())}(n),n};function on(t,e,i){t.bind("mouseenter",e).bind("mouseexit",i)}var an=function(t,e,i){return`[${t.id}] ${function(t,e,i){const n=et(t,i,e.getLabel(i)),r=it(t,i,e.getUri(i));return r?`<a target="_blank"/ href="${r}">${n}</a>`:n}(e.namespace,i.relation,t.typeName)}`},ln=function(t,e,i,n,s){delete s.render;const o=function(t,e,i,n,s){return t.connect({source:r()(ri(e,i.subj)),target:r()(ri(e,i.obj)),anchors:["TopCenter","TopCenter"],connector:["Bezier",{curviness:Ri(e,n,i)}],paintStyle:Gi(n,s,i.id),parameters:{id:i.id},cssClass:"textae-editor__relation",overlays:[["Arrow",Hi],["Label",Object.assign({},Ui,{label:an(i,n,s),cssClass:""+Ui.cssClass})]]})}(t,e,s,i,n);sn(e,i,n,o,s.id),Object.assign(o,new Ki),e.trigger("textae.editor.jsPlumbConnection.add",o),function(t,e,i){const n=t.relationId;si(e,i.entity).setConnect(n,t)}(o,e,i)},cn=function(t,e,i,n,r){return new Promise((s,o)=>{setTimeout(()=>{try{if(!function(t,e,i){if(!e.relation.get(i))return!1;const n=si(t,e.entity),r=e.relation.get(i);return n.isGridPrepared(r.subj)&&n.isGridPrepared(r.obj)}(t,e,i.relationId))return;i.render&&ln(n,t,e,r,i),s(i)}catch(t){o(t)}},0)})},un=function(t,e,i,n){const r=new ji(t,e,n.id),s=Gi(e,i,n.id);r instanceof jsPlumb.Connection&&(r.setPaintStyle(s),new Ji(r).setLabel(an(n,e,i)))},hn=i(14),dn=i.n(hn),pn=i(1),fn=i.n(pn),mn=function(t){return t.querySelector(".textae-editor__body__text-box")},gn=function(t){const e=parseInt(t,10);return isNaN(e)?0:e},vn=function(t){const e=mn(t),i=window.getComputedStyle(e);e.style.height="auto",e.style.height=e.offsetHeight-gn(i.paddingTop)+20+"px"};function _n(t,e,i){const n=0===t.children.length?0:function(t,e,i){return Math.max.apply(null,t.children.map(t=>_n(t,e,i)))}(t,e,i);return function(t,e){const i=t.entities;return i.length*function(t){return 18*t.value+18+function(t){return t.showInstance?12:0}(t)}(e)+function(t){return t.map(t=>18*t.attributes.length).reduce((t,e)=>t+e,0)}(i)}(t,e)+n}class yn{constructor(t,e){this._annotationData=t,this._typeGap=e}get currentMaxHeight(){return t=this._annotationData,e=this._typeGap,Math.max(...t.span.allSpansWithGrid.map(i=>_n(i,e(),t)))+23+30;var t,e}getHeightIncludeDescendantGrids(t){return _n(t,this._typeGap(),this._annotationData)}}var bn=class{constructor(t,e,i){this._modelType=t,this.typeContainer=e,this.commander=i}addType(t){return console.assert(t.id,"id is necessary!"),this.commander.factory.createTypeDefinitionCommand(this._modelType,t)}changeType(t,e){return this.commander.factory.changeTypeDefinitionCommand(this._modelType,t,e)}jsPlumbConnectionClicked(...t){const e=t[0].getOverlay(Ui.id).canvas.querySelector("a");if(e){const t=e.getAttribute("href");window.open(t,"_blank")}}removeType(t,e){const i={id:t,label:e||""};if(void 0===t)throw new Error("You must set the type id to remove.");return this.commander.factory.removeTypeDefinitionCommand(this._modelType,i)}changeLabelHandler(){}manipulateAttribute(){}},xn=class extends o{constructor(t,e,i,n,r,s){super(t,e,{label:"OK",class:s},i),this.promise=new Promise(t=>{const e=()=>{const e=r();e&&t(e),super.close()};this._option.buttons[0].click=e,fn()(super.el,n,"keyup",t=>{13===t.keyCode&&e()})})}};const wn=x.a.compile('\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--predicate" value="type" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Value:<span>{{label}}</span></label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--value" value="{{value}}">\n  </div>\n</div>');var En=function(t,e,i,n){if(!t)return void n(e);const r=new XMLHttpRequest,s=new URL(t,location);s.searchParams.append("term",i),r.open("GET",s.href,!0),r.onload=function(){if(this.status>=200&&this.status<400){const t=JSON.parse(this.response).filter(t=>0===e.filter(e=>t.id===e.raw.id).length).map(t=>({label:`${t.label}@${t.id}`,raw:t}));n(e.concat(t))}},r.send()},kn=(i(90),function(){r.a.ui.autocomplete.prototype._renderItem=function(t,e){const[i,n]=e.label.split("@");return r()("<li>").append(r()(`<div>${i} <i class="fa fa-globe"></i>${n}</div>`)).appendTo(t)},r.a.ui.autocomplete.prototype._resizeMenu=function(){}});kn();var Sn=function(t,e,i,n){r()(t).autocomplete({source:(t,r)=>{e&&(e.innerText=""),En(i,n(t.term),t.term,r)},minLength:3,select:(i,n)=>function(t,e,i){return t.value=i.item.raw.id,e&&(e.innerText=i.item.raw.label),!1}(t,e,n)})},Pn=class extends xn{constructor(t,e,i){var n;super("Please enter new values",(n={value:t,label:e.getLabel(t)},wn(n)),{height:250},".textae-editor__edit-value-and-pred-dialog--value",()=>{const t=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),e=super.el.querySelector("span");return{value:t.value,label:e.innerText}});const r=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),s=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--label span");Sn(r,s,i,t=>e.findByLabel(t))}},Cn=class extends bn{constructor(t,e,i,n){super("relation",t.relation,e),this._annotationData=i,this._selectionModel=n}changeTypeOfSelectedElement(t){return this.commander.factory.changeTypeOfSelectedRelationsCommand(t)}changeLabelHandler(t){if(this._selectionModel.relation.some){const e=this._getSelectedType(),i=new Pn(e,this.typeContainer,t);i.promise.then(({value:t,label:e})=>{const i=this.commander.factory.changeRelationLabelCommand(e,t,this.typeContainer);t&&this.commander.invoke(i)}),i.open()}}jsPlumbConnectionClicked(t,e){const i=t.getParameter("id");e.ctrlKey||e.metaKey?this._selectionModel.relation.toggle(i):this._selectionModel.relation.singleId!==i&&(this._selectionModel.relation.clear(),this._selectionModel.relation.add(i))}_getSelectedType(){const t=this._selectionModel.relation.single;return t?t.typeName:""}get selectedIds(){return this._selectionModel.relation.all.map(t=>t.id)}selectAll(t){this._selectionModel.relation.clear();for(const{id:e}of this._annotationData.relation.findByType(t))this._selectionModel.relation.add(e)}},Dn=function(t){return fn()(t[0],".textae-editor","click",e=>{(e.target.classList.contains("textae-editor")||e.target.classList.contains("textae-editor__body__text-box"))&&t.eventEmitter.emit("textae.editor.body.click")})},Tn=function(t,e,i,n,r){t.entity.some?function(t,e,i,n,r){const s=t.entity.all[0].id,o=r.title;s===o?t.entity.remove(s):(function(t,e,i,n){t.invoke(t.factory.createRelationCommand({subj:e,obj:i,pred:n.relation.defaultType}))}(e,s,o,i),function(t,e,i,n){t.ctrlKey||t.metaKey?e.remove(n):t.shiftKey?(e.remove(i),e.add(n)):(e.remove(i),e.remove(n))}(n,t.entity,s,o))}(t,i,n,r,e):(t.clear(),t.entity.add(e.title))};x.a.registerPartial("attributePartialTemplate",'\n<div class="textae-editor__edit-type-dialog__attribute">\n<div class="textae-editor__edit-type-dialog__attribute__predicate">\n  <label>Predicate:</label><br>\n  <input class="textae-editor__edit-type-dialog__attribute__predicate__value" value="{{this.pred}}" disabled="disabled">\n</div>\n<div class="textae-editor__edit-type-dialog__attribute__value">\n  <label>Value:</label><br>\n  <input class="textae-editor__edit-type-dialog__attribute__value__value" value="{{this.obj}}" disabled="disabled">\n</div>\n<div class="textae-editor__edit-type-dialog__attribute__edit">\n  <button type="button" class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__edit__value" data-predicate="{{this.pred}}"{{#if this.editDisabled}} disabled="disabled"{{/if}}>edit</button>\n</div>\n<div class="textae-editor__edit-type-dialog__attribute__remove">\n  <button type="button" class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__remove__value">remove</button>\n</div>\n</div>');const An=x.a.compile('\n<div class="textae-editor__edit-type-dialog__container">\n  <div class="textae-editor__edit-type-dialog__type">\n    <div class="textae-editor__edit-type-dialog__type__predicate">\n      <label>Predicate:</label><br>\n      <span class="textae-editor__edit-type-dialog__type__predicate__value">type</span>\n    </div>\n    <div class="textae-editor__edit-type-dialog__type__value ui-front">\n      <label>Value:</label><br>\n      <input class="textae-editor__edit-type-dialog__type__value__value" value="{{value}}">\n    </div>\n    <div class="textae-editor__edit-type-dialog__type__label">\n      <label>Label:</label><br>\n      <span class="textae-editor__edit-type-dialog__type__label__value">{{label}}</span>\n    </div>\n  </div>\n  <div class="textae-editor__edit-type-dialog__attributes">\n    {{#each attributes}}\n    {{> attributePartialTemplate}}\n    {{/each}}\n  </div>\n</div>');x.a.compile("\n{{> attributePartialTemplate}}\n");var On=function(t,e,i){!function(t){fn()(t,".textae-editor__edit-type-dialog__attribute__remove__value","click",t=>{const e=t.target.closest(".textae-editor__edit-type-dialog__attribute");e.parentElement.removeChild(e)})}(i)},Nn=class extends xn{constructor(t,e,i,n){var r;super("Please edit type and attributes",(r={value:n.typeName,label:e.getLabel(n.typeName),attributes:n.attributes.map(t=>({pred:t.pred,obj:t.obj,editDisabled:!0===t.obj}))},An(r)),{minHeight:300,width:800},".textae-editor__edit-type-dialog__type__value__value",()=>function(t){const e=t.querySelector(".textae-editor__edit-type-dialog__type__value__value").value,i=t.querySelector(".textae-editor__edit-type-dialog__type__label__value").innerHTML,n=[];for(const e of t.querySelectorAll(".textae-editor__edit-type-dialog__attribute"))n.push({pred:e.querySelector(".textae-editor__edit-type-dialog__attribute__predicate__value").value,obj:e.querySelector(".textae-editor__edit-type-dialog__attribute__value__value").value});return{typeName:e,label:i,attributes:n}}(super.el),"textae-editor__edit-type-dialog__ok-button"),On(0,0,super.el),fn()(super.el,".textae-editor__edit-type-dialog__attribute__edit__value","click",i=>{super.close();const n=i.target.dataset.predicate,r=e.findAttribute(n);t.eventEmitter.emit("textae.entityPallet.attribute.object.edit",r)});const s=super.el.querySelector(".textae-editor__edit-type-dialog__type__value__value"),o=super.el.querySelector(".textae-editor__edit-type-dialog__type__label__value");Sn(s,o,i,t=>e.findByLabel(t))}},jn=class extends bn{constructor(t,e,i,n,r,s,o){super("entity",e.entity,i),this._editor=t,this._annotationData=n,this._selectionModel=r,this._typeDefinition=e,this._editAttribute=s,this._deleteAttribute=o}jsPlumbConnectionClicked(t,e){e.originalEvent.preventDefault()}changeTypeOfSelectedElement(t){return this.commander.factory.changeTypeOfSelectedEntitiesCommand(t)}changeLabelHandler(t){if(this._selectionModel.entity.some){const e=({typeName:t,label:e,attributes:i})=>{const n=this.commander.factory.changeEntityTypeCommand(e,t,i,this.typeContainer);t&&this.commander.invoke(n)},i=new Nn(this._editor,this.typeContainer,t,rt.mergedTypesOf(this._selectionModel.entity.all));i.promise.then(e),i.open()}}manipulateAttribute(t,e){e?this._deleteAttribute.handle(this._typeDefinition,t):this._editAttribute.handle(this._typeDefinition,t)}get selectedIds(){return this._selectionModel.entity.all.map(t=>t.id)}selectAll(t){this._selectionModel.entity.clear();for(const{id:e}of this._annotationData.entity.findByType(t))this._selectionModel.entity.add(e)}},In=function(){window.getSelection().removeAllRanges()},Mn=function(t){return t.classList.contains("textae-editor__body__text-box")},Ln=function(t){return t.classList.contains("textae-editor__span")},Rn=function(t){return t.classList.contains("textae-editor__style")},Hn=function(t,e){return function(t,e){const i=e.parentElement;if(Mn(i))return 0;if(Ln(i)||Rn(i))return t.get(i.id).begin;throw new Error(`Can not get position of a node : ${e} ${e.data}`)}(t,e)+function(t){let e=0;for(const i of t.parentElement.childNodes){if(i==t)break;"#text"===i.nodeName?e+=i.nodeValue.length:e+=i.textContent.length}return e}(e)},Fn=class{constructor(t,e){this._annotationData=t,this._selection=e.selection}get anchor(){return Hn(this._annotationData.span,this._selection.anchorNode)+this._selection.anchorOffset}get focus(){return Hn(this._annotationData.span,this._selection.focusNode)+this._selection.focusOffset}get begin(){return this.anchor<this.focus?this.anchor:this.focus}get end(){return this.anchor<this.focus?this.focus:this.anchor}get selectedString(){return this._annotationData.sourceDoc.substring(this.begin,this.end)}},$n=function(t,e,i,n,r){for(;r(t(i,n));)n+=e;return n};const zn=function(t,e){return t.charAt(e)};var Bn=function(t,e,i){return $n(zn,1,t,e,i)},Wn=function(t,e,i){return $n(zn,-1,t,e,i)},qn=class{backFromBegin(t,e,i){}forwardFromEnd(t,e,i){}forwardFromBegin(t,e,i){}backFromEnd(t,e,i){}},Vn=function(t,e){return[t.charAt(e),t.charAt(e-1)]},Un=function(t,e){return[t.charAt(e),t.charAt(e+1)]};var Kn=function(t,e,i){return""!==i[0]&&!t(i[1])&&!e(i[1])||e(i[0])},Jn=class extends qn{backFromBegin(t,e,i){return function(t,e,i){return $n(Vn,-1,t,e,t=>t[1]&&!i(t[0])&&!i(t[1]))}(t,Bn(t,e,t=>i.isBlankCharacter(t)),t=>i.isDelimiter(t))}forwardFromEnd(t,e,i){return function(t,e,i){return $n(Un,1,t,e,t=>t[1]&&!i(t[0])&&!i(t[1]))}(t,Wn(t,e,t=>i.isBlankCharacter(t)),t=>i.isDelimiter(t))}forwardFromBegin(t,e,i){return function(t,e,i){return $n(Vn,1,t,e,i)}(t,e,t=>Kn(t=>i.isBlankCharacter(t),t=>i.isDelimiter(t),t))}backFromEnd(t,e,i){return function(t,e,i){return $n(Un,-1,t,e,i)}(t,e,t=>Kn(t=>i.isBlankCharacter(t),t=>i.isDelimiter(t),t))}},Qn=class extends qn{backFromBegin(t,e,i){return Bn(t,e,t=>i.isBlankCharacter(t))}forwardFromEnd(t,e,i){return Wn(t,e,t=>i.isBlankCharacter(t))}forwardFromBegin(t,e,i){return Bn(t,e,t=>i.isBlankCharacter(t))}backFromEnd(t,e,i){return Wn(t,e,t=>i.isBlankCharacter(t))}},Gn=function(t,e,i,n,r,s,o){const a=function(t,e,i,n){const r=new Fn(t,i);return{begin:e.backFromBegin(t.sourceDoc,r.begin,n),end:e.forwardFromEnd(t.sourceDoc,r.end-1,n)+1}}(t,i,s,o);if(t.span.isBoundaryCrossingWithOtherSpans(a))return;if(t.span.has(a))return;const l=function(t,e,i,n,r){return t.factory.createSpanAndAutoReplicateCommand({begin:e.begin,end:e.end},i,n?t=>r.isDelimiter(t):null)}(e,a,r,n,o);e.invoke(l)},Xn=function(t,e,i){return function(t,e){const i=t.span.single;return!!i&&(i.begin<e&&e<i.end)}(e,new Fn(t,i).focus)},Yn=function(t){In(),setTimeout(()=>alert(t),10)};var Zn=function(t,e,i,n,r,s){const o=function(t,e,i,n,r){const s=new Fn(t,n);return function(t,e,i,n,r,s){const o=t.span.get(i);return n<r?o.end===r?{begin:o.end,end:o.end}:{begin:e.forwardFromBegin(t.sourceDoc,r,s),end:o.end}:o.begin===r?{begin:o.begin,end:o.begin}:{begin:o.begin,end:e.backFromEnd(t.sourceDoc,r-1,s)+1}}(t,e,i,s.anchor,s.focus,r)}(t,i,n,r,s);if(t.span.isBoundaryCrossingWithOtherSpans(o))return Yn("A span cannot be shrinked to make a boundary crossing."),!1;const a=t.span.has(o);return o.begin<o.end&&!a?(e.invoke(e.factory.moveSpanCommand(n,o)),!1):(e.invoke(e.factory.removeSpanCommand(n)),!0)},tr=function(t,e,i,n,r,s,o,a){const l=vi(t[0],r);Zn(e,i,n,r,s,o)&&l&&a.selectSingleSpanById(l.id)},er=function(t,e,i,n,r,s,o){const a=function(t,e,i,n){return Xn(t,e,i)?e.span.singleId:(r=i.selection).anchorNode.parentNode===r.focusNode.parentNode.parentNode?i.selection.focusNode.parentNode.id:n||null;var r}(e,i,s);a&&(i.clear(),tr(t,e,n,r,a,s,o,i))},ir=function(t,e,i,n,r,s,o){const a=function(t,e,i){return Xn(t,e,i)?e.span.singleId:i.selection.focusNode.parentElement.id}(e,i,s);a&&(i.clear(),tr(t,e,n,r,a,s,o,i))},nr=class{constructor(){this.selection=function(){const t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset,range:t.getRangeAt(0)}}()}isAnchorNodeIn(t){return this.selection.anchorNode.parentNode===t}get isParentOfAnchorNodeAndFocusedNodeSame(){return this.selection.anchorNode.parentElement===this.selection.focusNode.parentElement}get isAnchorNodeParentIsDescendantOfFocusNodeParent(){return this.parentOfAnchorNode.closest("#"+this.parentOfFocusNode.id)}get isFocusNodeParentIsDescendantOfAnchorNodeParent(){return this.parentOfFocusNode.closest("#"+this.parentOfAnchorNode.id)}get isFocusNodeParentIsDescendantOfAnchorNodeParentOfParent(){return this.parentOfFocusNode.closest("#"+this.parentOfAnchorNode.parentElement.id)}get isFocusNodeParentSelected(){return this.parentOfFocusNode.classList.contains("ui-selected")}get parentOfAnchorNode(){return this.selection.anchorNode.parentElement}get parentOfFocusNode(){return this.selection.focusNode.parentElement}get ancestorSpanOfAnchorNode(){return this.selection.anchorNode.parentElement.closest(".textae-editor__span")}get isAnchorNodeInTextBox(){return Mn(this.selection.anchorNode.parentNode)}get isAnchorNodeInSpan(){return Ln(this.selection.anchorNode.parentNode)}get isAnchorNodeInStyleSpan(){return Rn(this.selection.anchorNode.parentNode)}get isAnchorNodeInStyleSpanAndTheStyleSpanIsDescendantOfSpan(){return Rn(this.selection.anchorNode.parentNode)&&this.selection.anchorNode.parentElement.closest(".textae-editor__span")}get isAnchorOneDownUnderFocus(){return this.selection.anchorNode.parentNode.parentNode===this.selection.focusNode.parentNode}get isFocusNodeInTextBox(){return Mn(this.selection.focusNode.parentNode)}get isFocusNodeInSpan(){return Ln(this.selection.focusNode.parentNode)}get isFocusNodeInStyleSpan(){return Rn(this.selection.focusNode.parentNode)}},rr=function(t,e){return function(t,e){const i=document.querySelector("#"+t.span.singleId);return e.isAnchorNodeIn(i)}(t,e)?t.span.singleId:e.isAnchorOneDownUnderFocus?e.selection.anchorNode.parentNode.id:null};var sr=function(t,e,i,n,r,s,o){t.clear();const a=function(t,e,i,n,r){const s=new Fn(t,n);return function(t,e,i,n,r,s){const o=t.span.get(i);return n>r?{begin:e.backFromBegin(t.sourceDoc,r,s),end:o.end}:{begin:o.begin,end:e.forwardFromEnd(t.sourceDoc,r-1,s)+1}}(t,e,i,s.anchor,s.focus,r)}(e,n,r,s,o);e.span.isBoundaryCrossingWithOtherSpans(a)?Yn("A span cannot be expanded to make a boundary crossing."):e.span.has(a)||i.invoke(i.factory.moveSpanCommand(r,a))},or=function(t,e,i){const n=new Fn(t,i);return e.removeBlankChractors(n.selectedString).length>0},ar=function(t,e,i){t?e.entity.toggle(i.title):(e.clear(),e.entity.add(i.title))};const lr=x.a.compile('\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--predicate" value="{{pred}}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--value" type="number" min="{{min}}" max="{{max}}" step="{{step}}" value="{{value}}">\n  </div>\n</div>');var cr=class extends xn{constructor(t,e){var i;super("Please edit number",(i={pred:e.pred,value:e.obj,min:t.min,max:t.max,step:t.step},lr(i)),{},".textae-editor__edit-value-and-pred-dialog--value",()=>{const t=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value");return{newObj:parseFloat(t.value)}})}},ur=function(t,e,i){const n=new cr(t,e);n.promise.then(({newObj:e})=>{const n=i.factory.changeAttributesOfSelectedEntitiesWithSamePred("entity",t,e);i.invoke(n)}),n.open()};const hr=x.a.compile('\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--predicate" value="{{pred}}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><span></span><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--value" value="{{value}}">\n  </div>\n</div>');var dr=class extends xn{constructor(t,e){var i;super("Please edit string",(i={pred:t.pred,value:t.obj},hr(i)),{height:250},".textae-editor__edit-value-and-pred-dialog--value",()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value,newLabel:super.el.querySelector("span").innerText})),Sn(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector("span"),e.autocompletionWs,()=>[])}},pr=function(t,e,i){const n=new dr(t,i);n.promise.then(({newObj:t,newLabel:n})=>{e.invoke(function(t,e,i,n){return t?e.factory.changeAttributesOfSelectedEntitiesWithSamePred("entity",i,t,n):e.factory.removeAttributesOfSelectedEntitiesByPredCommand(i)}(t,e,i,n))}),n.open()},fr=function(t,e,i,n,r){t.hide();const s=n.entity.getAttributeAt(r);if(s)switch(s.valueType){case"flag":!function(t,e){const i=e.factory.toggleFlagAttributeToSelectedEntitiesCommand(t);e.invoke(i)}(s,e);break;case"numeric":!function(t,e,i){const n=t.entity.findSelectedWithSamePredicateAttribute(e);if(n){const t=n.attributes.find(t=>t.pred===e.pred);ur(e,t,i)}else{const t=i.factory.createAttributeToSelectedEntitiesCommand(e);i.invoke(t)}}(i,s,e);break;case"selection":!function(t,e,i,n){if(t.entity.findSelectedWithSamePredicateAttribute(e))n.show(),n.showAttribute(e.pred);else{const t=i.factory.createAttributeToSelectedEntitiesCommand(e);i.invoke(t)}}(i,s,e,t);break;case"string":!function(t,e,i){const n=t.entity.findSelectedWithSamePredicateAttribute(e);if(n){const t=n.attributes.find(t=>t.pred===e.pred);pr(t,i,e)}else{const t=i.factory.createAttributeToSelectedEntitiesCommand(e);i.invoke(t)}}(i,s,e);break;default:throw s.valueType+" is unknown attribute"}else I.a.warning(`Attribute No.${r} is not defined`)};const mr=x.a.compile('\n<div class="textae-editor__edit-type-definition-dialog__container">\n  <div class="textae-editor__edit-type-definition-dialog__input-box">\n  <label>Id:</label><br>\n  <input class="textae-editor__edit-type-definition-dialog--id" value={{id}}>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__input-box">\n  <label>Label:<span></span></label><br>\n  <input value="{{label}}">\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__color-picker">\n  <label>Color:<input class="textae-editor__edit-type-definition-dialog__color-picker__input" type="color" value="{{color}}"></label>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__set-default">\n  <label>Default type:<input class="textae-editor__edit-type-definition-dialog__set-default__input" type="checkbox" {{#if isDefault}}checked="checked" disabled="disabled"{{/if}}></label>\n  </div>\n</div>');var gr=function(t,e,i){return t.value=i.item.raw.id,e.value=i.item.raw.label,!1};kn();var vr=class extends xn{constructor(t,e,i,n,s){super(t,function(t){return mr(t)}(e),{height:250},".textae-editor__edit-type-definition-dialog--id",()=>{const t=super.el.querySelectorAll("input");return s(t[0].value,t[1].value,t[2].value,t[3].checked)}),function(t,e,i){const n=t.querySelectorAll("input");r()(n[0]).autocomplete({source:(t,n)=>En(e,i(t.term),t.term,n),minLength:3,select:(t,e)=>gr(n[0],n[1],e)}),r()(n[1]).autocomplete({source:(t,n)=>En(e,i(t.term),t.term,n),minLength:3,select:(t,e)=>gr(n[0],n[1],e)})}(super.el,n,t=>i.findByLabel(t))}},_r=class extends vr{constructor(t,e){super("Please create a new type",{id:null,label:"",color:t.defaultColor,isDefault:!1},t,e,(t,e,i,n)=>{if(""===t)return;const r={id:t,color:i};return""!==e&&(r.label=e),n&&(r.default=n),{newType:r}})}},yr=class extends vr{constructor(t,e,i,n,r){const s=t.getLabel(e)||"",o={id:e,label:s,color:i,isDefault:n};super("Please edit the type",o,t,r,(t,i,n,r)=>{const s=function(t,e){const i=new Map;return t.id!==e.id&&i.set("id",e.id),t.label!==e.label&&i.set("label",""===e.label?null:e.label),t.color!==e.color&&i.set("color",""===e.color?null:e.color),t.isDefault!==e.isDefault&&i.set("default",!!e.isDefault||null),i}(o,{id:t,label:i,color:n,isDefault:r});return{id:e,changedProperties:s}})}},br=function(t,e,i,n,r,s){e.eventEmitter.on(`textae.${r}Pallet.add-button.click`,()=>{const t=new _r(s.typeContainer,i.autocompletionWs);t.promise.then(({newType:t})=>s.commander.invoke(s.addType(t))),t.open()}).on(`textae.${r}Pallet.read-button.click`,()=>e.api.handlePalletClick("textae.pallet.button.read.click")).on(`textae.${r}Pallet.write-button.click`,()=>e.api.handlePalletClick("textae.pallet.button.write.click")).on(`textae.${r}Pallet.item.label.click`,t=>n.invoke(s.changeTypeOfSelectedElement(t))).on(`textae.${r}Pallet.item.select-all-button.click`,t=>s.selectAll(t)).on(`textae.${r}Pallet.item.edit-button.click`,(t,e,n)=>{const r=new yr(s.typeContainer,t,e,n,i.autocompletionWs);r.promise.then(({id:t,changedProperties:e})=>{e.size&&s.commander.invoke(s.changeType(t,e))}),r.open()}).on(`textae.${r}Pallet.item.remove-button.click`,(t,e)=>n.invoke(s.removeType(t,e))).on("textae.editor.unselect",()=>t.hide()).on("textae.history.change",()=>t.updateDisplay()).on("textae.configuration.save",()=>t.updateDisplay()).on(`textae.typeDefinition.${r}.type.lock`,()=>t.updateDisplay()).on(`textae.typeDefinition.${r}.type.change`,()=>t.updateDisplay()).on(`textae.typeDefinition.${r}.type.default.change`,()=>t.updateDisplay()),e[0].appendChild(t.el)},xr=i(10);i(26);var wr=function(t,e){t.innerHTML=`<div class="textae-editor__type-pallet__content">${e}</div>`,function(t){if(t.style.width="auto",window.innerWidth-2<=t.offsetWidth){const e=window.innerWidth-4;t.style.width=e+"px"}}(t),function(t){if(window.innerHeight-2<=t.offsetHeight){const e=window.innerHeight-2;t.style.height=e+"px"}}(t)};const Er={};document.querySelector("html").addEventListener("mousemove",t=>{Er.top=t.clientY,Er.left=t.clientX});var kr=class{constructor(t,e){this._el=e,function(t,e){r()(t).draggable({containment:e})}(e,t),fn()(e,'[type="button"]',"click",()=>t.focus()),this.hide()}updateDisplay(){this.visibly&&wr(this._el,this._content)}get el(){return this._el}show(){const t=Er;this._el.style.display="block",wr(this._el,this._content),function(t,e){t.offsetWidth+e.left>window.innerWidth&&(e.left=window.innerWidth-t.offsetWidth-2),t.offsetHeight+e.top>window.innerHeight&&(e.top=window.innerHeight-t.offsetHeight-1),t.style.top=e.top+"px",t.style.left=e.left+"px"}(this._el,t)}hide(){this._el.style.display="none"}get visibly(){return"none"!==this._el.style.display}},Sr=function(t){const e=`<div class="textae-editor__type-pallet textae-editor__type-pallet--${t}"></div>`;return v.a.create(e)},Pr=function(t){return!t.classList.contains("textae-editor__type-pallet__table-button--disabled")},Cr=function(t,e,i){fn()(t,".textae-editor__type-pallet__add-button","click",()=>e.emit(`textae.${i}Pallet.add-button.click`)),fn()(t,".textae-editor__type-pallet__read-button","click",()=>e.emit(`textae.${i}Pallet.read-button.click`)),fn()(t,".textae-editor__type-pallet__write-button","click",()=>e.emit(`textae.${i}Pallet.write-button.click`)),fn()(t,".textae-editor__type-pallet__label","click",t=>e.emit(`textae.${i}Pallet.item.label.click`,t.delegateTarget.dataset.id)),fn()(t,".textae-editor__type-pallet__select-all","click",t=>{Pr(t.target)&&e.emit(`textae.${i}Pallet.item.select-all-button.click`,t.delegateTarget.dataset.id)}),fn()(t,".textae-editor__type-pallet__edit-type","click",t=>{e.emit(`textae.${i}Pallet.item.edit-button.click`,t.target.dataset.id,t.target.dataset.color.toLowerCase(),"true"===t.target.dataset.isDefault)}),fn()(t,".textae-editor__type-pallet__remove","click",t=>{Pr(t.target)&&e.emit(`textae.${i}Pallet.item.remove-button.click`,t.delegateTarget.dataset.id,t.delegateTarget.dataset.label)})},Dr=function(t,e,i){!function(t){fn()(t,".textae-editor__type-pallet__attribute","dragstart",t=>{t.dataTransfer.setData("application/x-textae-attribute-tab-old-index",t.target.dataset.index),function(t){t.target.closest(".textae-editor__type-pallet__content").classList.add("textae-editor__type-pallet__content--dragging")}(t)}),fn()(t,".textae-editor__type-pallet__attribute","dragend",t=>{!function(t){t.target.closest(".textae-editor__type-pallet__content").classList.remove("textae-editor__type-pallet__content--dragging")}(t)})}(e),function(t,e){fn()(t,".textae-editor__type-pallet__drop-target","dragover",t=>{const e=t.target.closest(".textae-editor__type-pallet__content").querySelector(".textae-editor__type-pallet__attribute").offsetWidth;t.target.innerHTML=`<div style="width: ${e}px;"></div>`,t.preventDefault()}),fn()(t,".textae-editor__type-pallet__drop-target","dragleave",t=>{t.target.innerHTML=""}),fn()(t,".textae-editor__type-pallet__drop-target","drop",t=>{const i=parseInt(t.dataTransfer.getData("application/x-textae-attribute-tab-old-index")),n=parseInt(t.target.dataset.index);e.emit("textae.entityPallet.attribute.tab.drop",i,i<n?n-1:n)})}(e,i),fn()(e,".textae-editor__type-pallet__attribute","click",e=>{t.showAttribute(e.target.dataset.attribute)}),fn()(e,".textae-editor__type-pallet__create-predicate","click",()=>i.emit("textae.entityPallet.attribute.create-predicate-button.click")),fn()(e,".textae-editor__type-pallet__edit-predicate","click",()=>i.emit("textae.entityPallet.attribute.edit-predicate-button.click",t.attrDef)),fn()(e,".textae-editor__type-pallet__delete-predicate","click",()=>i.emit("textae.entityPallet.attribute.delete-predicate-button.click",t.attrDef)),fn()(e,".textae-editor__type-pallet__add-attribute-value-button","click",()=>i.emit("textae.entityPallet.attribute.add-value-button.click",t.attrDef)),fn()(e,".textae-editor__type-pallet__edit-value","click",e=>i.emit("textae.entityPallet.attribute.edit-value-button.click",t.attrDef,e.target.dataset.index)),fn()(e,".textae-editor__type-pallet__remove-value","click",e=>i.emit("textae.entityPallet.attribute.remove-value-button.click",t.attrDef,e.target.dataset.index)),fn()(e,".textae-editor__type-pallet__selection-attribute-label","click",e=>i.emit("textae.entityPallet.attribute.selection-attribute-label.click",t.attrDef,e.target.dataset.id)),fn()(e,".textae-editor__type-pallet__add-attribute","click",()=>i.emit("textae.entityPallet.attribute.add-button.click",t.attrDef)),fn()(e,".textae-editor__type-pallet__edit-object","click",()=>i.emit("textae.entityPallet.attribute.object.edit",t.attrDef)),fn()(e,".textae-editor__type-pallet__remove-attribute","click",()=>i.emit("textae.entityPallet.attribute.remove-button.click",t.attrDef))},Tr=function(t){return 1===t?"1 entity selected":t>1?t+" entities selected":""};x.a.registerPartial("header",'\n  <div style="display: flex;">\n    <p class="textae-editor__type-pallet__title">\n      <span>Entity configuration</span>\n      <span class="textae-editor__type-pallet__lock-icon" style="display: {{#if isLock}}inline-block{{else}}none{{/if}};">locked</span>\n      <br>\n      <span class="textae-editor__type-pallet__selected-entity-label">{{selectedEntityLabel}}</span>\n    </p>\n    <p class="textae-editor__type-pallet__attribute {{#unless selectedPred}}textae-editor__type-pallet__attribute--selected{{/unless}}" data-attribute="">\n      Type\n    </p>\n    {{#each attributes}}\n      {{#if droppable}}\n      <span class="textae-editor__type-pallet__drop-target" data-index="{{@index}}"></span>\n      {{/if}}\n      <p \n        class="textae-editor__type-pallet__attribute{{#if selectedPred}} textae-editor__type-pallet__attribute--selected{{/if}}"\n        data-attribute="{{pred}}"\n        data-index="{{@index}}"\n        {{#if selectedPred}}draggable="true"{{/if}}>\n        {{#if shortcutKey}}{{shortcutKey}}:{{/if}}{{pred}}\n      </p>\n    {{/each}}\n    {{#unless isLock}}\n    {{#if addAttribute}}\n      {{#unless lastAttributeSelected}}<span class="textae-editor__type-pallet__drop-target" data-index="-1"></span>{{/unless}}\n      <p class="textae-editor__type-pallet__attribute textae-editor__type-pallet__create-predicate">\n        <span class="textae-editor__type-pallet__create-predicate__button" title="Add new attribute"></span>\n      </p>\n    {{/if}}\n    {{/unless}}\n    <div class="textae-editor__type-pallet__buttons">\n      {{#unless isLock}}\n      {{#if addTypeButton}}\n        <span class="textae-editor__type-pallet__button textae-editor__type-pallet__add-button" title="Add new type"></span>\n      {{/if}}\n      {{#if addAttributeValueButton}}\n        <span class="textae-editor__type-pallet__button textae-editor__type-pallet__add-attribute-value-button" title="Add new value"></span>\n      {{/if}}\n      {{/unless}}\n      <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n      <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button {{#if hasDiff}}textae-editor__type-pallet__write-button--transit{{/if}}" title="Upload"></span>\n    </div>\n  </div>\n'),x.a.registerPartial("predicate",'\n  <div class="textae-editor__type-pallet__predicate">\n    {{> @partial-block }}\n    <div>\n    {{#if hasInstance}}\n      Attribute definitions with instances cannot be deleted.\n    {{else}}\n      <button type="button" class="textae-editor__type-pallet__delete-predicate">delete attribute</button>\n    {{/if}}\n    </div>\n  </div>\n  ');x.a.registerPartial("add-attribute-button",'\n  {{#unless @root.isEntityWithSamePredSelected}}\n  <button\n    type="button"\n    class="textae-editor__type-pallet__add-attribute"\n  >Add to selected entity</button>\n  {{/unless}}\n'),x.a.registerPartial("remove-attribute-button",'\n  {{#if @root.isEntityWithSamePredSelected}}\n  <button\n    type="button"\n    class="textae-editor__type-pallet__remove-attribute"\n  >Remove from selected entity</button>\n  {{/if}}\n');x.a.registerPartial("edit-object-button",'\n  {{#if @root.isEntityWithSamePredSelected}}\n  <button\n    type="button"\n    class="textae-editor__type-pallet__edit-object"\n  >Edit object of selected entity</button>\n  {{/if}}\n'),x.a.registerPartial("valueButton",'\n  {{#unless @root.isLock}}\n  <td class="textae-editor__type-pallet__table-attribute-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-value"\n      title="Edit this value." data-index="{{@index}}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove-value {{#if useNumber}}textae-editor__type-pallet__table-button--disabled{{/if}}"\n      title="{{#if useNumber}}To activate this button, remove all the annotations of this type.{{/if}}{{#unless useNumber}}Remove this value.{{/unless}}"\n      {{#if useNumber}}disabled="disabled"{{/if}}\n      data-index="{{@index}}">\n    </button>\n  </td>\n  {{/unless}}\n');const Ar=x.a.compile('\n{{>header}}\n<table>\n  <tbody>\n    <tr>\n      <th>id</th>\n      <th>label</th>\n      <th title="Number of annotations.">#</th>\n      <th></th>\n    </tr>\n    {{#if types}}\n    {{#each types}}\n    <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n      <td class="textae-editor__type-pallet__label" data-id="{{id}}">\n        <span title={{id}}>\n          {{id}}\n        </span>\n        {{#if uri}}\n          <a href="{{uri}}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>\n        {{/if}}\n        {{#if defaultType}}\n          <span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>\n        {{/if}}\n      </td>\n      <td class="textae-editor__type-pallet__short-label">\n        {{label}}\n      </td>\n      <td class="textae-editor__type-pallet__use-number">\n        {{#if useNumber}}{{useNumber}}{{/if}}\n        {{#unless useNumber}}0{{/unless}}\n      </td>\n      <td class="textae-editor__type-pallet__table-buttons">\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all {{#unless useNumber}}textae-editor__type-pallet__table-button--disabled{{/unless}}"\n          title="Select all the cases of this type."\n          data-id="{{id}}"\n          data-use-number="{{useNumber}}">\n        </button>\n        {{#unless ../isLock}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n          title="Edit this type." data-id="{{id}}"\n          data-color="{{color}}"\n          data-is-default="{{defaultType}}">\n        </button>\n        <button \n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove {{#if useNumber}}textae-editor__type-pallet__table-button--disabled{{/if}}"\n          title="{{#if useNumber}}To activate this button, remove all the annotations of this type.{{/if}}{{#unless useNumber}}Remove this type.{{/unless}}"\n          data-id="{{id}}"\n          data-label="{{label}}">\n        </button>\n        {{/unless}}\n      </td>\n    </tr>\n    {{/each}}\n    {{else}}\n    <tr class="textae-editor__type-pallet__row">\n      <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Entity definition.</td>\n    </tr>\n    {{/if}}\n  </tbody>\n</table>\n'),Or=x.a.compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        flag attribute: {{pred}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n          title="Edit this predicate.">\n        </button>\n        {{> add-attribute-button}}\n        {{> remove-attribute-button}}\n      </div>\n    {{/predicate}}\n  {{/ attrDef}}\n</div>\n'),Nr=x.a.compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        <div>\n          numeric attribute: {{pred}}\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n            title="Edit this predicate.">\n          </button>\n          {{> add-attribute-button}}\n          {{> edit-object-button}}\n          {{> remove-attribute-button}}\n        </div>\n        min: {{min}}\n        max: {{max}}\n        step: {{step}}\n        default: {{default}}\n      </div>\n    {{/predicate}}\n    <table>\n      <tbody>\n        <tr>\n          <th>range</th>\n          <th>label</th>\n          <th>color</th>\n          {{#unless @root.isLock}}\n          <th></th>\n          {{/unless}}\n        </tr>\n        {{#each values}}\n        <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            {{range}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{label}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{color}}\n          </td>\n          {{>valueButton}}\n        </tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/ attrDef}}\n</div>\n'),jr=x.a.compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        selection attribute: {{pred}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n          title="Edit this predicate.">\n        </button>\n        {{> add-attribute-button}}\n        {{> remove-attribute-button}}\n      </div>\n    {{/predicate}}\n    </div>\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n          {{#unless @root.isLock}}\n          <th></th>\n          {{/unless}}\n        </tr>\n        {{#each values}}\n        <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="{{id}}">\n            {{id}}\n            {{#if default}}\n              <span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>\n            {{/if}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{label}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{color}}\n          </td>\n          {{>valueButton}}\n        </tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/ attrDef}}\n</div>\n'),Ir=x.a.compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        <div>\n          string attribute: {{pred}}\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n            title="Edit this predicate.">\n          </button>\n          {{> add-attribute-button}}\n          {{> edit-object-button}}\n          {{> remove-attribute-button}}\n        </div>\n        default: {{default}}\n      </div>\n    {{/predicate}}\n    <table>\n      <tbody>\n        <tr>\n          <th>pattern</th>\n          <th>label</th>\n          <th>color</th>\n          {{#unless @root.isLock}}\n          <th></th>\n          {{/unless}}\n        </tr>\n        {{#each values}}\n        <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            {{pattern}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{label}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{color}}\n          </td>\n          {{>valueButton}}\n        </tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/ attrDef}}\n</div>\n');var Mr=function(t,e){for(const e of t.querySelectorAll(".textae-editor__type-pallet__attribute"))e.addEventListener("mousedown",t=>{t.stopPropagation()})},Lr=class extends kr{constructor(t,e,i,n){super(t,Sr("entity")),this._eventEmitter=t.eventEmitter,this._originalData=e,this._typeDefinition=i,this._typeContainer=i.entity,this._selectionModelEntity=n;Cr(this._el,t.eventEmitter,"entity"),Dr(this,this._el,t.eventEmitter),t.eventEmitter.on("textae.typeDefinition.entity.attributeDefinition.create",t=>{this.showAttribute(t)}).on("textae.typeDefinition.entity.attributeDefinition.change",t=>{this.showAttribute(t)}).on("textae.typeDefinition.entity.attributeDefinition.delete",()=>{this.showAttribute(null)}).on("textae.typeDefinition.entity.attributeDefinition.move",()=>{this.updateDisplay()}),t.eventEmitter.on("textae.annotationData.attribute.add",()=>this.updateDisplay()).on("textae.annotationData.attribute.remove",()=>this.updateDisplay()),t.eventEmitter.on("textae.selection.entity.change",()=>this.updateDisplay())}updateDisplay(){super.updateDisplay(),Mr(this._el)}show(){this._selectedPred=null,super.show(),Mr(this._el)}showAttribute(t){this._selectedPred=t,this.updateDisplay()}selectLeftTab(){this._selectedPred&&(0===this._selectedIndex?this.showAttribute():this.showAttribute(this._typeContainer.attributes[this._selectedIndex-1].pred))}selectRightTab(){if(this._selectedPred){if(this._selectedIndex===this._typeContainer.attributes.length-1)return;this.showAttribute(this._typeContainer.attributes[this._selectedIndex+1].pred)}else this.showAttribute(this._typeContainer.attributes[0].pred)}get _selectedIndex(){return this._typeContainer.attributes.findIndex(t=>t.pred===this._selectedPred)}get _content(){return function(t,e,i,n){const r=t.attributes.length<30,s=function(t,e){let i;return i=e?function(t,e){const i=[];let n;for(const r of t.attributes)i.push({pred:r.pred,selectedPred:e===r.pred,droppable:e!==r.pred&&!n}),n=e===r.pred;return i}(t,e):t.attributes,function(t){return t.map((t,e)=>(e<9&&(t.shortcutKey=e+1),t))}(i)}(t,i);if(i){const o=t.attributes.find(t=>t.pred===i),a={isLock:t.isLock,attributes:s,hasDiff:e,attrDef:Object.assign(o.JSON,{hasInstance:t.hasAttributeInstance(i)}),selectedPred:i,lastAttributeSelected:t.attributes.indexOf(o)===t.attributes.length-1,addAttribute:r,selectedEntityLabel:Tr(n.size),isEntityWithSamePredSelected:n.isSamePredAttrributeSelected(i)};switch(o.valueType){case"flag":return Or(a);case"numeric":return Nr(Object.assign(a,{addAttributeValueButton:!0}));case"selection":for(const e of a.attrDef.values)e.useNumber=t.hasSelectionAtributeValueInstance(i,e.id);return jr(Object.assign(a,{addAttributeValueButton:!0}));case"string":return Ir(Object.assign(a,{addAttributeValueButton:!0}));default:throw"attrDef.valueType is unknown attribute"}}return Ar({isLock:t.isLock,attributes:s,hasDiff:e,types:t.pallet,addAttribute:r,addTypeButton:!0,selectedEntityLabel:Tr(n.size)})}(this._typeContainer,Object(xr.diff)(this._originalData.configuration,Object.assign({},this._originalData.configuration,this._typeDefinition.config)),this._selectedPred,this._selectionModelEntity)}get attrDef(){return this._typeContainer.findAttribute(this._selectedPred)}};const Rr=x.a.compile('\n<p class="textae-editor__type-pallet__title">\n  <span>Relation configuration</span>\n  <span class="textae-editor__type-pallet__lock-icon" style="display: {{#if isLock}}inline-block{{else}}none{{/if}};">locked</span>\n</p>\n<div class="textae-editor__type-pallet__buttons">\n  {{#unless isLock}}\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__add-button" title="Add new type"></span>\n  {{/unless}}\n  <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n  <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button {{#if hasDiff}}textae-editor__type-pallet__write-button--transit{{/if}}" title="Upload"></span>\n</div>\n<table>\n  <tbody>\n    <tr>\n      <th>id</th>\n      <th>label</th>\n      <th title="Number of annotations.">#</th>\n      <th></th>\n    </tr>\n    {{#if types}}\n    {{#each types}}\n    <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n      <td class="textae-editor__type-pallet__label" data-id="{{id}}">\n        <span title={{id}}>\n          {{id}}\n        </span>\n        {{#if uri}}\n          <a href="{{uri}}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>\n        {{/if}}\n        {{#if defaultType}}\n          <span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>\n        {{/if}}\n      </td>\n      <td class="textae-editor__type-pallet__short-label">\n        {{label}}\n      </td>\n      <td class="textae-editor__type-pallet__use-number">\n        {{#if useNumber}}{{useNumber}}{{/if}}\n        {{#unless useNumber}}0{{/unless}}\n      </td>\n      <td class="textae-editor__type-pallet__table-buttons">\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all {{#unless useNumber}}textae-editor__type-pallet__table-button--disabled{{/unless}}"\n          title="Select all the cases of this type."\n          data-id="{{id}}"\n          data-use-number="{{useNumber}}">\n        </button>\n        {{#unless ../isLock}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n          title="Edit this type." data-id="{{id}}"\n          data-color="{{color}}"\n          data-is-default="{{defaultType}}">\n        </button>\n        <button \n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove {{#if useNumber}}textae-editor__type-pallet__table-button--disabled{{/if}}"\n          title="{{#if useNumber}}To activate this button, remove all the annotations of this type.{{/if}}{{#unless useNumber}}Remove this type.{{/unless}}"\n          data-id="{{id}}"\n          data-label="{{label}}">\n        </button>\n        {{/unless}}\n      </td>\n    </tr>\n    {{/each}}\n    {{else}}\n    <tr class="textae-editor__type-pallet__row">\n      <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Relation definition.</td>\n    </tr>\n    {{/if}}\n  </tbody>\n</table>\n');var Hr=class extends kr{constructor(t,e,i){super(t,Sr("relation")),this._originalData=e,this._typeDefinition=i,this._typeContainer=i.relation,Cr(this._el,t.eventEmitter,"relation")}get _content(){return t=this._typeContainer,e=Object(xr.diff)(this._originalData.configuration,Object.assign({},this._originalData.configuration,this._typeDefinition.config)),Rr({isLock:t.isLock,hasDiff:e,types:t.pallet});var t,e}};const Fr=x.a.compile('\n<div class="textae-editor__create-attribute-definition-dialog__container">\n  <div class="textae-editor__create-attribute-definition-dialog__row">\n    <label>Attribute type:</label>\n    <select class="textae-editor__create-attribute-definition-dialog__value-type">\n      <option value="flag"{{#if flagSelected}} selected{{/if}}>flag</option>\n      <option value="selection"{{#if selectionSelected}} selected{{/if}}>selection</option>\n      <option value="string"{{#if stringSelected}} selected{{/if}}>string</option>\n      <option value="numeric"{{#if numericSelected}} selected{{/if}}>numeric</option>\n    </select>\n  </div>\n  <div class="textae-editor__create-attribute-definition-dialog__row">\n    <div class="textae-editor__create-attribute-definition-dialog__pred">\n      <label>Predicate:</label><br>\n      <input value="{{pred}}">\n    </div>\n    {{#if showDefault}}\n      <div class="textae-editor__create-attribute-definition-dialog__default">\n        <label>Default:</label><br>\n        <input value="{{default}}">\n      </div>\n    {{/if}}\n  </div>\n  {{#if showNumeric}}\n    <div class="textae-editor__create-attribute-definition-dialog__row">\n      <div class="textae-editor__create-attribute-definition-dialog__min">\n        <label>Min:</label><br>\n        <input type="text" value="{{min}}">\n      </div>\n      <div class="textae-editor__create-attribute-definition-dialog__max">\n        <label>Max:</label><br>\n        <input type="text" value="{{max}}">\n      </div>\n      <div class="textae-editor__create-attribute-definition-dialog__step">\n        <label>Step:</label><br>\n        <input type="text" value="{{step}}">\n      </div>\n    </div>\n  {{/if}}\n</div>');function $r(t){return Fr(t)}var zr=function(t,e){return t.querySelector(e+" input")&&t.querySelector(e+" input").value},Br=class extends xn{constructor(){super("Please enter new attribute definition",$r({}),{},".textae-editor__create-attribute-definition-dialog__pred",()=>{const t=super.el.querySelector(".textae-editor__create-attribute-definition-dialog__value-type").value,e=zr(super.el,".textae-editor__create-attribute-definition-dialog__pred"),i=zr(super.el,".textae-editor__create-attribute-definition-dialog__default"),n=zr(super.el,".textae-editor__create-attribute-definition-dialog__min"),r=zr(super.el,".textae-editor__create-attribute-definition-dialog__max"),s=zr(super.el,".textae-editor__create-attribute-definition-dialog__step");return"numeric"===t?{"value type":t,pred:e,default:parseFloat(i),min:parseFloat(n),max:parseFloat(r),step:parseFloat(s)}:{"value type":t,pred:e,default:i,min:n,max:r,step:s}}),fn()(super.el,".textae-editor__create-attribute-definition-dialog__value-type","change",t=>{const e=t.target.value,i={pred:zr(super.el,".textae-editor__create-attribute-definition-dialog__pred"),default:zr(super.el,".textae-editor__create-attribute-definition-dialog__default"),min:zr(super.el,".textae-editor__create-attribute-definition-dialog__min"),max:zr(super.el,".textae-editor__create-attribute-definition-dialog__max"),step:zr(super.el,".textae-editor__create-attribute-definition-dialog__step"),showDefault:"numeric"===e||"string"===e,showNumeric:"numeric"===e};i[e+"Selected"]=!0;const n=$r(i);super.el.closest(".ui-dialog-content").innerHTML=n})}};const Wr=x.a.compile('\n<div class="textae-editor__edit-attribute-definition-dialog__container">\n  <div class="textae-editor__edit-attribute-definition-dialog__row">\n    <div class="textae-editor__edit-attribute-definition-dialog__pred">\n      <label>Predicate:</label><br>\n      <input value="{{pred}}">\n    </div>\n    {{#if showDefault}}\n      <div class="textae-editor__edit-attribute-definition-dialog__default">\n        <label>Default:</label><br>\n        <input value="{{default}}">\n      </div>\n    {{/if}}\n  </div>\n  {{#if showNumeric}}\n    <div class="textae-editor__edit-attribute-definition-dialog__row">\n      <div class="textae-editor__edit-attribute-definition-dialog__min">\n        <label>Min:</label><br>\n        <input type="text" value="{{min}}">\n      </div>\n      <div class="textae-editor__edit-attribute-definition-dialog__max">\n        <label>Max:</label><br>\n        <input type="text" value="{{max}}">\n      </div>\n      <div class="textae-editor__edit-attribute-definition-dialog__step">\n        <label>Step:</label><br>\n        <input type="text" value="{{step}}">\n      </div>\n    </div>\n  {{/if}}\n</div>');var qr=function(t,e){return!Number.isNaN(parseFloat(e))&&t!==parseFloat(e)},Vr=class extends xn{constructor(t){const e=t.JSON;var i;super("Please enter new values",(i={pred:e.pred,default:e.default,min:e.min,max:e.max,step:e.step,showDefault:"numeric"===t.valueType||"string"===t.valueType,showNumeric:"numeric"===t.valueType},Wr(i)),{},".textae-editor__edit-attribute-definition-dialog__pred",()=>{const i=zr(super.el,".textae-editor__edit-attribute-definition-dialog__pred"),n=zr(super.el,".textae-editor__edit-attribute-definition-dialog__default"),r=zr(super.el,".textae-editor__edit-attribute-definition-dialog__min"),s=zr(super.el,".textae-editor__edit-attribute-definition-dialog__max"),o=zr(super.el,".textae-editor__edit-attribute-definition-dialog__step"),a=new Map;return e.pred!==i&&a.set("pred",i),"string"===t.valueType&&e.default!==n&&a.set("default",n),"numeric"===t.valueType&&(qr(e.default,n)&&a.set("default",parseFloat(n)),qr(e.min,r)&&a.set("min",parseFloat(r)),qr(e.max,s)&&a.set("max",parseFloat(s)),qr(e.step,o)&&a.set("step",parseFloat(o))),a})}};const Ur=x.a.compile('\n<div class="textae-editor__add-value-to-attribute-dialog__container">\n  <div class="textae-editor__add-value-to-attribute-dialog__row">\n    <div class="textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern">\n      <label>{{labelForRangeOrIdOrPattern}}:</label><br>\n      <input value="{{rangeOrIdOrPattern}}">\n    </div>\n    {{#if showDefault}}\n    <div class="textae-editor__add-value-to-attribute-dialog__default">\n      <label>default:</label><br>\n      <input type="checkbox" {{#if default}}checked="checked"{{/if}}>\n    </div>\n    {{/if}}\n    <div class="textae-editor__add-value-to-attribute-dialog__label">\n      <label>label:</label><br>\n      <input value="{{label}}">\n    </div>\n    <div class="textae-editor__add-value-to-attribute-dialog__color">\n      <label>color:</label><br>\n      <input value="{{color}}">\n    </div>\n  </div>\n</div>');function Kr(t){return t.closest(".ui-dialog").querySelector(".textae-editor__add-value-to-attribute-dialog__ok-button")}var Jr=class extends xn{constructor(t,e={}){const i={label:e.label,color:e.color};switch(t){case"numeric":i.labelForRangeOrIdOrPattern="range",i.rangeOrIdOrPattern=e.range;break;case"selection":i.labelForRangeOrIdOrPattern="id",i.rangeOrIdOrPattern=e.id,i.showDefault=!0,i.default=e.default;break;case"string":i.labelForRangeOrIdOrPattern="pattern",i.rangeOrIdOrPattern=e.pattern;break;default:throw new Error(t+" is Uknown Attribute")}super("Please enter new values",Ur(i),{},".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern",()=>{const e=zr(super.el,".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern"),i=zr(super.el,".textae-editor__add-value-to-attribute-dialog__label"),n=zr(super.el,".textae-editor__add-value-to-attribute-dialog__color"),r={};switch(i&&(r.label=i),n&&(r.color=n),t){case"numeric":r.range=e;break;case"selection":r.id=e,r.default=super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__default input").checked;break;case"string":r.pattern=e}return r},"textae-editor__add-value-to-attribute-dialog__ok-button"),"numeric"===t&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",t=>{const e=t.target.value;try{new Ye(e),Kr(super.el).removeAttribute("disabled")}catch(t){Kr(super.el).setAttribute("disabled","disabled")}}),"string"===t&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",t=>{const e=t.target.value;try{new RegExp(e),Kr(super.el).removeAttribute("disabled")}catch(t){Kr(super.el).setAttribute("disabled","disabled")}}),super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__color").addEventListener("input",t=>{const e=t.target.value;!e||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?Kr(super.el).removeAttribute("disabled"):Kr(super.el).setAttribute("disabled","disabled")})}},Qr=function(t,e){e?t.addClass("textae-editor--editable"):t.removeClass("textae-editor--editable")},Gr=function(t,e){t.removeClass("textae-editor--term-mode").removeClass("textae-editor--instance-mode").removeClass("textae-editor--relation-mode").addClass(`textae-editor--${e}-mode`)};var Xr=i(47),Yr=i.n(Xr),Zr=i(0),ts=function(){const t=new Yr.a({states:[Zr.INIT,Zr.TERM,Zr.INSTANCE,Zr.RELATION,Zr.VIEW_TERM,Zr.VIEW_INSTANCE]});return t.config(Zr.INIT,{to:{exclude:[Zr.RELATION]}}),t.config(Zr.TERM,{from:{exclude:[Zr.VIEW_INSTANCE]},to:{exclude:[Zr.INIT,Zr.VIEW_INSTANCE]}}),t.config(Zr.INSTANCE,{from:{exclude:[Zr.VIEW_TERM]},to:{exclude:[Zr.INIT,Zr.VIEW_TERM]}}),t.config(Zr.RELATION,{from:{exclude:[Zr.INIT]},to:{exclude:[Zr.INIT,Zr.VIEW_TERM]}}),t.config(Zr.VIEW_TERM,{from:{exclude:[Zr.INSTANCE,Zr.RELATION]},to:{exclude:[Zr.INIT,Zr.INSTANCE]}}),t.config(Zr.VIEW_INSTANCE,{from:{exclude:[Zr.TERM]},to:{exclude:[Zr.INIT,Zr.TERM]}}),t};function es(t){return"enter:"+t}var is=function(t){return!t.relation.some},ns=function(t,e){switch(t.currentState){case Zr.RELATION:!function(t,e){is(e)?t.setState(Zr.TERM):t.setState(Zr.INSTANCE)}(t,e);break;case Zr.VIEW_INSTANCE:t.setState(Zr.INSTANCE);break;case Zr.VIEW_TERM:t.setState(Zr.TERM)}},rs=function(t,e,i){t.eventEmitter.on("textae.annotationData.all.change",(t,n)=>{"edit"!==i?function(t,e){is(e)?t.toViewTerm():t.toViewInstance()}(e,t):(function(t){t&&I.a.success("track annotations have been merged to root annotations.")}(n),function(t,e){is(e)?t.toTerm():t.toInstance()}(e,t))})};const ss=x.a.compile('\n  <div class="textae-editor__setting-dialog">\n      <div>\n          <label class="textae-editor__setting-dialog__label">Type Gap</label>\n          <input type="number" class="textae-editor__setting-dialog__type-gap type-gap" step="1" min="0" max="5" value="{{typeGap}}" {{#if typeGapDisabled}}disabled="disabled"{{/if}}>\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Line Height</label>\n          <input type="number" class="textae-editor__setting-dialog__line-height line-height" step="1" min="50" max="500" value="{{lineHeight}}">\n          px\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Lock Edit Config</label>\n          <input type="checkbox" class="textae-editor__setting-dialog__lock-config lock-config" {{#if typeDefinitionLocked}}checked="checked"{{/if}}>\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Reset Hidden Message Boxes</label>\n          <input type="button" class="textae-editor__setting-dialog__reset-hidden-message-boxes reset-hidden-message-boxes" value="Reset">\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Version</label>\n          {{version}}\n      </div>\n  </div>\n');var os=function(t){return dn()(t,300)};var as=function(t,e,i){fn()(t,".line-height","change",os(t=>{e.setLineHeight(t.target.value),function(){const t=new Event("resize");window.dispatchEvent(t)}()}))},ls=function(t,e,i,n,r){!function(t,e,i){fn()(t,".type-gap","change",os(n=>{e.typeGap=Number(n.target.value),t.querySelector(".line-height").value=i.getLineHeight()}))}(t,i,r),as(t,r),function(t,e){fn()(t,".lock-config","change",os(t=>{t.target.checked?e.lockEdit():e.unlockEdit()}))}(t,n),function(t,e){fn()(t,".reset-hidden-message-boxes","click",()=>e.eventEmitter.emit("textae.message-box.show"))}(t,e)},cs=i(48),us=class extends o{constructor(t,e,i,n){var r;super("Setting",(r={typeGapDisabled:!i.showInstance,typeGap:i.typeGap,lineHeight:n.getLineHeight(),typeDefinitionLocked:e.isLock(),version:cs.version},ss(r)),{label:"OK"}),ls(super.el,t,i,e,n),fn()(super.el,".textae-editor--dialog","keyup",t=>{13===t.keyCode&&super.close()})}};const hs=x.a.compile('<div>\n<div class="textae-editor__load-dialog__row">\n  <label class="textae-editor__load-dialog__label">URL</label>\n  <input type="text" value="{{url}}" class="textae-editor__load-dialog__file-name url">\n  <input type="button" class="url" {{#unless url}}disabled="disabled"{{/unless}} value="Open">\n</div>\n<div class="textae-editor__load-dialog__row">\n  <label class="textae-editor__load-dialog__label">Local</label>\n  <input class="textae-editor__load-dialog__file" type="file">\n  <input type="button" class="local" disabled="disabled" value="Open">\n</div>\n</div>');var ds="There is a change that has not been saved. If you procceed now, you will lose it.",ps=function(t,e){e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")},fs=class extends o{constructor(t,e,i,n,r){super(t,hs({url:e}),{label:"Cancel"}),fn()(super.el,'[type="text"].url',"input",t=>{ps(t.target.nextElementSibling,t.target.value)}),fn()(super.el,".textae-editor__load-dialog__file","change",t=>{ps(t.target.nextElementSibling,t.target.files.length>0)});const s=()=>!r||window.confirm(ds);fn()(super.el,'[type="button"].url',"click",t=>{s()&&i(t.target.previousElementSibling.value),super.close()}),fn()(super.el,'[type="button"].local',"click",t=>{const e=t.target.previousElementSibling;s()&&n(e),super.close()})}};const ms=x.a.compile('<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input type="text" value="{{url}}" class="textae-editor__save-dialog__server-file-name url">\n    <input type="button" class="url" {{#unless url}}disabled="disabled"{{/unless}} value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input type="text" value="{{filename}}" class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label"></label>\n    <a class="viewsource" href="#">Click to see the json source in a new window.</a>\n  </div>\n</div>\n');var gs=function(t){const e=new Blob([JSON.stringify(t)],{type:"application/json"});return URL.createObjectURL(e)},vs=class extends o{constructor(t,e,i,n,r){super("Save Annotations",ms({filename:i,url:e}),{label:"Cancel"}),function(t,e,i,n,r){fn()(e,'[type="text"].url',"input",t=>{ps(t.target.nextElementSibling,t.target.value)}),fn()(e,'[type="button"].url',"click",t=>{r(t.target.previousElementSibling.value),n()}),fn()(e,"a.download","click",e=>{const r=e.target,s=gs(i);r.setAttribute("href",s),r.setAttribute("download",r.previousElementSibling.value),t.eventEmitter.emit("textae.saveAnnotationDialog.download.click"),n()}),fn()(e,"a.viewsource","click",()=>{window.open(gs(i),"_blank"),t.eventEmitter.emit("textae.saveAnnotationDialog.viewsource.click"),n()})}(t,super.el,n,()=>super.close(),r)}};const _s=x.a.compile('<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input type="text" value="{{url}}" class="textae-editor__save-dialog__server-file-name url">\n    <input type="button" class="url" {{#unless url}}disabled="disabled"{{/unless}} value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input type="text" value="{{filename}}" class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row"><p class="textae-editor__save-dialog__diff-title">Configuration differences<span class="diff-info diff-info--add">added</span><span class="diff-info diff-info--remove">removed</span></p></div>\n  <div class="textae-editor__save-dialog__diff-viewer">{{{diff}}}</div>\n</div>');const ys=Object(xr.create)({objectHash:(t,e)=>t.id||"$$index:"+e});var bs=function(t,e){const i=ys.diff(t,e);return xr.formatters.html.format(i,t)},xs=class extends o{constructor(t,e,i,n,r,s){var o;super("Save Configurations",(o={filename:i,url:e,diff:bs(n,r)||"nothing."},_s(o)),{label:"Cancel"},{width:550}),this._$dialog.on("dialogopen",()=>xr.formatters.html.hideUnchanged()),function(t,e,i,n,r){fn()(e,'[type="text"].url',"input",t=>{ps(t.target.nextElementSibling,t.target.value)}),fn()(e,'[type="button"].url',"click",t=>{r(t.target.previousElementSibling.value),n()}),fn()(e,"a.download","click",e=>{const r=e.target,s=gs(i);r.setAttribute("href",s),r.setAttribute("download",r.previousElementSibling.value),t.eventEmitter.emit("textae.saveConfigurationDialog.download.click"),n()})}(t,super.el,r,()=>super.close(),s)}},ws=function(t){return new Promise(e=>{const i=new FileReader;i.onload=t=>e(t),i.readAsText(t)})},Es=function(t){if("string"!=typeof t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0},ks=i(49),Ss=i.n(ks),Ps=function(t,e){const i=t[0];ws(i).then(t=>{const n=t.target.result;if(r=i.name,".txt"!==Ss.a.extname(r)){var r;if(Es(n)){const t=JSON.parse(n);if(t.text)return void e.eventEmitter.emit("textae.annotation.load","local file",i.name,t)}e.eventEmitter.emit("textae.annotation.loadError","local file",i.name)}else e.eventEmitter.emit("textae.annotation.load","local file",i.name,{text:n})})},Cs=function(t,e,...i){t.has(e)&&t.get(e)(...i)},Ds=function(t,e,i){return new Map([["1",t=>e.event.manipulateAttribute(1,t)],["2",t=>e.event.manipulateAttribute(2,t)],["3",t=>e.event.manipulateAttribute(3,t)],["4",t=>e.event.manipulateAttribute(4,t)],["5",t=>e.event.manipulateAttribute(5,t)],["6",t=>e.event.manipulateAttribute(6,t)],["7",t=>e.event.manipulateAttribute(7,t)],["8",t=>e.event.manipulateAttribute(8,t)],["9",t=>e.event.manipulateAttribute(9,t)],["a",t.redo],["b",()=>e.event.toggleButton("boundary-detection")],["c",()=>e.event.copyEntities()],["d",()=>e.event.removeSelectedElements()],["e",()=>e.event.createEntity()],["f",()=>e.event.changeMode()],["i",()=>i.importAnnotation()],["m",()=>e.event.changeMode()],["q",()=>e.event.showPallet()],["r",()=>e.event.replicate()],["u",()=>i.uploadAnnotation()],["v",()=>e.event.pasteEntities()],["w",()=>e.event.changeLabel()],["x",()=>e.event.cutEntities()],["y",()=>t.redo()],["z",()=>t.undo()],["ArrowDown",()=>e.event.selectDown()],["ArrowLeft",t=>e.event.selectLeft(t)],["ArrowRight",t=>e.event.selectRight(t)],["ArrowUp",()=>e.event.selectUp()],["Backspace",()=>e.event.removeSelectedElements()],["Delete",()=>e.event.removeSelectedElements()],["Escape",()=>e.event.cancelSelect()]])},Ts=function(t,e,i,n,r){const s=new Map([["view",()=>e.event.toViewMode()],["term",()=>e.event.toTermMode()],["relation",()=>e.event.toRelationMode()],["simple",()=>e.event.toggleSimpleMode()],["read",()=>i.importAnnotation()],["write",()=>i.uploadAnnotation()],["undo",()=>t.undo()],["redo",()=>t.redo()],["replicate",()=>e.event.replicate()],["entity",()=>e.event.createEntity()],["change-label",()=>e.event.changeLabel()],["pallet",()=>e.event.showPallet()],["delete",()=>e.event.removeSelectedElements()],["copy",()=>e.event.copyEntities()],["cut",()=>e.event.cutEntities()],["paste",()=>e.event.pasteEntities()],["setting",()=>e.event.showSettingDialog()],["line-height",()=>n.updateLineHeight()]]);for(const t of r.pushButtonNames)s.has(t)||s.set(t,()=>e.event.toggleButton(t));return s},As=function(t){return new Map([["textae.pallet.button.read.click",()=>t.importConfiguration()],["textae.pallet.button.write.click",()=>t.uploadConfiguration()]])};var Os='\n<div class="textae-editor__footer">\n  <div class="textae-editor__footer__message"></div>\n</div>\n',Ns=function(t,e){return"on"===e?new class{constructor(t){this._container=t[0]}status(t){""!==t&&((function(t){const e=t.querySelector(".textae-editor__footer__message");return e||(t.insertAdjacentHTML("beforeend",Os.replace(/[\n\r]+/g,"")),t.querySelector(".textae-editor__footer__message"))}(this._container)).innerHTML=Y(t)?`Source: <a class="textae-editor__footer__message__link" href="${t}">${decodeURI(t)}</a>`:"Source: "+t)}}(t):{status(){}}};function js(t){return function(t){if(t.denotations)for(const e of t.denotations){if(e.span.begin!==parseInt(e.span.begin))return!0;if(e.span.end!==parseInt(e.span.end))return!0}}(t)&&I.a.warning("In the annotation file, some of the begin and end offsets of denotations were not integer values.\n      TextAE converted them to integer values.\n      However, to avoid a chance of unexpected rendering, please fix them.",15),!0}var Is=function(t){if(!0===t)return"flag";if("number"==typeof t)return"numeric";if("string"==typeof t)return"string";throw JSON.stringify(t)+" is an unexpected value for an Attribute."},Ms=function(t){const e=t.reduce((t,e)=>t.has(e)?t.set(e,t.get(e)+1):t.set(e,1),new Map),i=Math.max(...e.values());for(const[t,n]of e.entries())if(n===i)return t},Ls=function(t){const e=Math.max(...t.map(t=>{const[e,i]=String(t).split(".");return i?i.length:0}));return Number(Array.from(Array(e)).reduce((t,e)=>.1*t,1).toFixed(e))},Rs=function(t){return t.reduce((t,e)=>(t.has(e.pred)?t.get(e.pred).push(e.obj):t.set(e.pred,new class{constructor({pred:t,obj:e}){this._pred=t,this._objects=[e]}push(t){this._objects.push(t)}get definition(){switch(Is(this._objects[0])){case"flag":return this._prototype;case"numeric":return this._numericAttribute;case"string":return this._stringAttribute;default:throw new Error("prototype: "+JSON.stringify(this._prototype))}}get mostFrequentObject(){return Ms(this._objects)}get _prototype(){return{pred:this._pred,"value type":Is(this._objects[0])}}get _numericAttribute(){return Object.assign({min:Math.min(...this._objects),max:Math.max(...this._objects),step:Ls(this._objects),default:Ms(this._objects)},this._prototype)}get _stringAttribute(){return Object.assign({default:Ms(this._objects)},this._prototype)}}(e)),t),new Map)},Hs=function(t,e){return function(t,e){for(const i of e){const e=t.findIndex(t=>t.pred===i.pred);-1!==e?t[e]=Object.assign(i,t[e]):t.push(i)}return t}(t,function(t){return[...Rs(t).values()].map(t=>t.definition)}(e))},Fs=function(t){return t?JSON.parse(JSON.stringify(t)):{}},$s=function(t,e){return console.assert(t),(e=Fs(e))["attribute types"]=new class{constructor(t=[],e=[]){this._annotations=e,this._config=t}get configuration(){return function(t,e){t=Fs(t);const i=Rs(e);for(const e of function(t){return t.filter(t=>"selection"===t["value type"])}(t))if(e.values&&0!==e.values.length)if(e.values.find(t=>!0===t.default));else if(i.has(e.pred)){const t=i.get(e.pred);e.values.find(e=>e.id===t.mostFrequentObject).default=!0}else e.values[0].default=!0;else e.values=[{id:"default",default:!0}];return t}(Hs(this._config,this._annotations),this._annotations)}}(e["attribute types"],t.attributes).configuration,e},zs=i(50),Bs=i.n(zs),Ws=i(51);const qs=new Bs.a({verbose:!0}).compile(Ws);var Vs=function(t,e){const i=function(t,e){if(console.assert(e,"If you don't have a configuration, generate a configuration from the annotation."),t.attributes){const i=e["attribute types"],n=t.attributes.filter(t=>i.some(e=>e.pred===t.pred&&"selection"===e["value type"])).filter(t=>!i.some(e=>e.pred===t.pred&&e.values.some(e=>e.id===t.obj)));if(n.length)return console.warn("selection attribute values without definition",n),`selection attribute value definition for "${n.map(t=>t.obj).join(", ")}" in configuration is missing. `}}(t,e);if(!i)return e;I.a.error(i)},Us=function(t,e,i){if(console.assert(e,"config is necessary"),"object"!=typeof e)return void I.a.error(i);const n=$s(t,e),r=function(t){return console.assert(t,"config is required."),qs(t)?null:(console.warn(qs.errors),function(t){for(const e of t)if("required"===e.keyword)return`Invalid configuration: The attribute type whose predicate is '${e.data.pred}' misses a mandatory property, '${e.params.missingProperty}'.`}(qs.errors))}(n);if(!r)return Vs(t,n);I.a.error(r)},Ks=function(t,e,i){t.set(i),e.setTypeConfig(i)},Js=function(t,e,i,n,r,s,o){console.assert(e,"config is necessary");const a=Us(t,e,i);return!!a&&(function(t,e){!0===t.autosave?e.push("write-auto"):e.release("write-auto"),!0===t.autolineheight?e.push("line-height-auto"):e.release("line-height-auto"),!0===t.boundarydetection?e.push("boundary-detection"):e.release("boundary-detection")}(a,o),Ks(n,r,a),s.reset(t),!0)},Qs=function(t,e,i,n,r,s,o){if(js(n),n.config)Js(n,n.config,"configuration in anntotaion file is invalid.",t,e,i,o);else if(r)s.loadConfigulation(r,n);else{const r=$s(n),s=Vs(n,r);s&&(Ks(t,e,s),i.reset(n))}},Gs=function(t){if(t){const e=function(t){const e=new Map,i=t.split("?")[1];if(i){const t=i.split("&");for(let i=0;i<t.length;i++){const n=t[i].split("="),r=decodeURIComponent(n[0]),s=decodeURIComponent(n[1]);e.set(r,decodeURIComponent(s))}}return e}(t);if(e.has("config_lock"))return e.get("config_lock")}return null};class Xs{constructor(){this._map=new Map}get annotation(){return this._map.get("annotation")||{}}set annotation(t){this._map.set("annotation",t)}get configuration(){return this._map.get("configuration")||{}}set configuration(t){this._map.set("configuration",t)}}var Ys=function(t){return!t},Zs=function(t){return"relation"===t},to=function(t,e){return"relation"!==t&&e},eo=function(t){return new Set(function(t){return t.span.all.map(t=>t.entities).flat()}(t).concat(t.entity.all))},io=i(52),no=i.n(io),ro=function(t,e){switch(t){case"url":return no.a.resolve(location.href,e);case"local file":return e+"(local file)";default:throw`unknown source type: ${t}.`}},so=function(t,e,i,n,r,s,o,a,l,c){!function(t,e){t.eventEmitter.on("textae.typeDefinition.reset",()=>e.resetConfiguration())}(t,e),function(t,e){t.eventEmitter.on("textae.history.change",t=>{window.onbeforeunload=t.hasAnythingToSaveAnnotation?()=>e:null})}(t,ds),function(t,e,i,n,r,s,o,a,l){t.eventEmitter.on("textae.annotation.load",(c,u,h)=>{Qs(e,i,n,h,r.get("config"),a,l),s.status(ro(c,u)),o.annotation=h,h.config&&(o.configuration=h.config),t.eventEmitter.emit("textae.pallet.update")}).on("textae.annotation.loadError",(t,e)=>I.a.error(ro(t,e)+" is not a annotation file or its format is invalid.")).on("textae.configuration.load",(t,r,s,c=null)=>{const u=c||Object.assign(o.annotation,n.toJson());Js(u,s,ro(t,r)+" is not a configuration file or its format is invalid.",e,i,n,l)&&"url"===t&&(a.configurationUrl=r)}).on("textae.configuration.loadError",(t,e)=>I.a.error(ro(t,e)+" is not a configuration file or its format is invalid.")).on("textae.configuration.save",()=>{o.configuration=Object.assign(o.configuration,i.config)})}(t,n,r,i,s,o,a,l,c),function(t){const e=t[0];e.addEventListener("mousedown",t=>{t.shiftKey&&t.preventDefault()}),fn()(e,".textae-editor__entity","mousedown",t=>t.preventDefault())}(t),function(t){t[0].addEventListener("keyup",e=>{t.eventEmitter.emit("textae.editor.key.input"),t.api.handleKeyInput(e)})}(t)},oo=function(t,e,i,n,r,s){const o=function(t){const e=new Map;return Lt(e,t,"mode"),Lt(e,t,"control"),Lt(e,t,"status_bar"),Lt(e,t,"config"),Lt(e,t,"config_lock"),Lt(e,t,"autocompletion_ws"),Mt(e,"config"),Mt(e,"autocompletion_ws"),e.set("source",function(t){return t.getAttribute("source")||t.getAttribute("target")}(t)),e.set("annotation",It(t,e.get("source"))),e}(t[0]),a=new class{constructor(){this._delimiterCharacters=[],this._blankCharacters=[]}set(t){const e=Object.assign({},Rt,t);return this._delimiterCharacters=e["delimiter characters"],this._blankCharacters=e["non-edge characters"],t}isDelimiter(t){return this._delimiterCharacters.indexOf("ANY")>=0?1:this._delimiterCharacters.indexOf(t)>=0}isBlankCharacter(t){return this._blankCharacters.indexOf(t)>=0}removeBlankChractors(t){for(const e of this._blankCharacters)t=t.replace(e,"");return t}},l=new class{constructor(t,e){this._editor=t,this._lockStateObservable=new Nt.a(!1),this._entityContainer=new ni(t,e.entity,e.attribute,this._lockStateObservable),this._relationContainer=new Ve(t,"relation",()=>e.relation.all,this._lockStateObservable)}isLock(){return this._lockStateObservable()}lockEdit(){this._lockStateObservable.set(!0)}unlockEdit(){this._lockStateObservable.set(!1)}get entity(){return this._entityContainer}setTypeConfig(t){t?(this._entityContainer.definedTypes=[t["entity types"]||[],t["attribute types"]||[]],this._relationContainer.definedTypes=t["relation types"]||[],this.autocompletionWs=t.autocompletion_ws):(this._entityContainer.definedTypes=[],this._relationContainer.definedTypes=[],this.autocompletionWs=""),this._editor.eventEmitter.emit("textae.typeDefinition.reset")}get relation(){return this._relationContainer}get config(){const t={};return this._entityContainer.config.length&&(t["entity types"]=this._entityContainer.config),this._relationContainer.config.length&&(t["relation types"]=this._relationContainer.config),this._entityContainer.attributeConfig.length&&(t["attribute types"]=this._entityContainer.attributeConfig),t}}(t,n),c=new class{constructor(t,e,i,n,r){this._editor=t,this._annotationData=e,this._selectionModel=i,this._history=n,this._typeDefinition=r}invoke(t){t.isEmpty||(Ht([t]),this._history.push([t]))}undo(){if(this._history.hasAnythingToUndo){this._selectionModel.clear(),this._editor.focus();const t=this._history.prev();t.kinds.has("configuration_command")&&I.a.success("configuration has been undone"),Ft(t.commands)}}redo(){if(this._history.hasAnythingToRedo){this._selectionModel.clear();const t=this._history.next();t.kinds.has("configuration_command")&&I.a.success("configuration has been redo"),Ht(t.commands)}}get factory(){return new class{constructor(t,e,i,n){this._editor=t,this._annotationData=e,this._selectionModel=i,this._typeDefinition=n}addValueToAttributeDefinitionCommand(t,e,i){return new Kt(this._typeDefinition[t],e.JSON,i)}changeAttributeDefinitionCommand(t,e,i){return new Yt(this._annotationData,this._typeDefinition[t],e,i)}changeAttributesOfSelectedEntitiesWithSamePred(t,e,i,n){return new Zt(this._annotationData,this._selectionModel,this._typeDefinition[t],e,i,n)}changeEntityTypeCommand(t,e,i,n){return new se(this._editor,this._annotationData,this._selectionModel,t,e,i,n)}changeRelationLabelCommand(t,e,i){return new ae(this._editor,this._annotationData,this._selectionModel,t,e,i)}changeTypeDefinitionCommand(t,e,i){return new ce(this._editor,this._annotationData,this._typeDefinition[t],t,e,i)}changeTypeOfSelectedRelationsCommand(t,e){return new oe(this._editor,this._annotationData,this._selectionModel,t,e)}changeTypeOfSelectedEntitiesCommand(t){return new ue(this._editor,this._annotationData,this._selectionModel,t)}changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(t,e,i,n){return new pe(this._annotationData,this._typeDefinition[t],e,i,n)}createAttributeDefinitionCommand(t,e){return new me(this._typeDefinition[t],e)}createAttributeToSelectedEntitiesCommand(t,e=null){return new ve(this._editor,this._annotationData,this._selectionModel,t,e)}createDefaultTypeEntityToSelectedSpansCommand(t){return new _e(this._editor,this._annotationData,this._selectionModel,t)}createRelationCommand(t){return new Wt(this._editor,this._annotationData,this._selectionModel,"relation",!0,t)}createSpanAndAutoReplicateCommand(t,e,i){return new ke(this._editor,this._annotationData,this._selectionModel,t,this._typeDefinition.entity.defaultType,e,i)}createTypeDefinitionCommand(t,e){return new ee(this._editor,this._typeDefinition[t],e)}deleteAttributeDefinitionCommand(t,e){return new fe(this._typeDefinition[t],e)}moveAttributeDefintionComannd(t,e){return new Se(this._typeDefinition.entity,t,e)}moveEntitiesToSelectedSpansCommand(t){return new Fe(this._editor,this._annotationData,this._selectionModel,t)}moveSpanCommand(t,e){return new Pe(this._editor,this._annotationData,t,e)}pasteTypesToSelectedSpansCommand(t){return new Ce(this._editor,this._annotationData,this._selectionModel,t)}replicateSpanCommand(t,e,i){return new Ee(this._editor,this._annotationData,this._selectionModel,t,e,i)}removeAttributesOfSelectedEntitiesByPredCommand(t){return new Te(this._editor,this._annotationData,this._selectionModel,t)}removeSpanCommand(t){return new Oe(this._editor,this._annotationData,this._selectionModel,t)}removeSelectedComand(){return new Me(this._editor,this._annotationData,this._selectionModel)}removeTypeDefinitionCommand(t,e){return new te(this._editor,this._typeDefinition[t],e)}removeValueFromAttributeDefinitionCommand(t,e,i){return new Ut(this._typeDefinition[t],e.JSON,i)}toggleFlagAttributeToSelectedEntitiesCommand(t){return new Le(this._editor,this._annotationData,this._selectionModel,t)}}(this._editor,this._annotationData,this._selectionModel,this._typeDefinition)}}(t,n,r,i,l),u=new class{constructor(t,e,i){this._editor=t,this._commander=e,this._selectionModel=i,this._items=[],t.eventEmitter.on("textae.annotationData.entity.remove",t=>{this.hasCuttingItem&&(this._items=this._items.filter(e=>e!=t))})}get hasCopyingItem(){return this._items[0]instanceof nt}get hasCuttingItem(){return this._items[0]instanceof rt}copyEntities(){const t=[...eo(this._selectionModel)].reduce((t,e)=>t.add(e.typeValues),new Set);this._updateItems(t)}cutEntities(){const t=eo(this._selectionModel);this._cuttingItems.length&&this._cuttingItems.every(e=>t.has(e))&&[...t].every(t=>this._cuttingItems.includes(t))?this._updateItems(new Set):this._updateItems(t)}pasteEntities(){this.hasCopyingItem&&this._commander.invoke(this._pasteCommand),this._itemsWillBeCutAndPaste.length&&this._selectionModel.span.single&&(this._commander.invoke(this._pasteCommand),this._updateItems(new Set))}_updateItems(t){const e=this._cuttingItems.filter(e=>!t.has(e));this._items=[...t],this._editor.eventEmitter.emit("textae.clipBoard.change",this._cuttingItems,e)}get _itemsWillBeCutAndPaste(){return this._cuttingItems.filter(t=>t.span!==(this._selectionModel.span.single&&this._selectionModel.span.single.id))}get _cuttingItems(){return this.hasCuttingItem?this._items:[]}get _pasteCommand(){if(this.hasCopyingItem)return this._commander.factory.pasteTypesToSelectedSpansCommand(this._items);if(this._itemsWillBeCutAndPaste.length)return this._commander.factory.moveEntitiesToSelectedSpansCommand(this._itemsWillBeCutAndPaste);throw"There is no item to be copied or to be cut"}}(t,c,r),h=new class{constructor(t,e,i){this._enableState=new class{constructor(t,e,i){this._states={},this._editor=t,this._selectionModel=e,this._clipBoard=i,this.enabled("view",!0),this.enabled("term",!0),this.enabled("relation",!0),this.enabled("simple",!0),this.enabled("setting",!0),function(t,e){t.eventEmitter.on("textae.history.change",t=>{e.enabled("undo",t.hasAnythingToUndo),e.enabled("redo",t.hasAnythingToRedo)}).on("textae.selection.span.change",()=>e.updateBySpan()).on("textae.selection.relation.change",()=>e.updateByRelation()).on("textae.selection.entity.change",()=>e.updateByEntity()).on("textae.editMode.transition",(t,i)=>{e.enabled("simple",!Zs(t)),e.enabled("replicate-auto",to(t,i)),e.enabled("boundary-detection",to(t,i)),e.enabled("line-height",i),e.enabled("line-height-auto",i),e.enabled("pallet",!Ys(i))}).on("textae.clipBoard.change",()=>e.enabled("paste",e._enablePaste)).on("textae.annotationAutoSaver.enable",t=>e.enabled("write-auto",t))}(t,this)}propagate(){this._editor.eventEmitter.emit("textae.control.buttons.change",this._states)}enabled(t,e){this._states[t]=e,this.propagate()}updateBySpan(){this._updateButtons(E.spanButtons),this.propagate()}updateByEntity(){this._updateButtons(E.entityButtons),this.propagate()}updateByRelation(){this._updateButtons(E.relationButtons),this.propagate()}_updateButtons(t){for(const{name:e,predicate:i}of t){const t=i(this._selectionModel,this._clipBoard);this.enabled(e,t)}}get _enablePaste(){return E.spanButtons.find(({name:t})=>"copy"===t).predicate(this._selectionModel,this._clipBoard)}}(t,e,i),this._pushButtons=new class{constructor(t){this._buttonMap=E.pushButtons.reduce((e,i)=>(e.set(i,new class{constructor(t,e){this._editor=t,this.name=e,this.state=!1}value(t){return void 0===t?this.state:(this.state=t,this.propagate(),null)}toggle(){this.state=!this.state,this.propagate()}propagate(){this._editor.eventEmitter.emit("textae.control.button.push",{buttonName:this.name,state:this.state})}}(t,i)),e),new Map),t.eventEmitter.on("textae.editMode.transition",(t,e)=>function(t,e,i){t.getButton("view").value(Ys(i)),t.getButton("term").value(function(t,e){return t&&("term"===e||"instance"===e)}(i,e)),t.getButton("relation").value(Zs(e)),t.getButton("simple").value(function(t){return"term"===t}(e))}(this,t,e)),this._buttonMap.get("boundary-detection").value(!0)}propagate(){for(const t of this._buttonMap.values())t.propagate()}getButton(t){return this._buttonMap.get(t)}get names(){return this._buttonMap.keys()}}(t)}propagate(){this._enableState.propagate(),this._pushButtons.propagate()}get pushButtonNames(){return this._pushButtons.names}valueOf(t){return this._getPushButton(t).value()}push(t){this._getPushButton(t).value(!0)}release(t){this._getPushButton(t).value(!1)}toggle(t){return this._getPushButton(t).toggle()}_getPushButton(t){return this._pushButtons.getButton(t)}}(t,r,u),d=new Nt.a({value:-1,showInstance:!1}),p=new class{constructor(t,e,i,n,r){t[0].innerHTML=`\n    <div class="textae-editor__body">\n      <div class="textae-editor__body__text-box" id="${t.editorId}_text-box"></div>\n      <div class="textae-editor__body__annotation-box"></div>\n    </div>\n    `.replace(/[\n\r]+/g,""),function(t){t.eventEmitter.on("textae.clipBoard.change",(e,i)=>{for(const i of e){const e=ri(t,i.id);e&&(e.classList.add("ui-to-be-cut"),ui(e).classList.add("ui-to-be-cut"))}for(const e of i){const i=ri(t,e.id);i&&(i.classList.remove("ui-to-be-cut"),ui(i).classList.remove("ui-to-be-cut"))}})}(t),pi(t,e);const s=new yn(e,n),o=new class{constructor(t,e,i){this._editor=t,this._annotationData=e,this._gridHeight=i}get lineHeight(){return function(t){const e=mn(t),i=window.getComputedStyle(e);return gn(i.lineHeight)}(this._editor[0])}set lineHeight(t){!function(t,e){const i=mn(t);i.style.lineHeight=e+"px",i.style.paddingTop=e/2+"px"}(this._editor[0],t),vn(this._editor[0])}updateLineHeight(){this._annotationData.span.allSpansWithGrid.length?this.lineHeight=this._gridHeight.currentMaxHeight:this._resetLineHeight()}_resetLineHeight(){!function(t){const e=mn(t);e.style.lineHeight=null,e.style.paddingTop=null,e.style.height=null}(this._editor[0])}forceUpdate(){vn(this._editor[0])}}(t,e,s),a=new class{constructor(t,e,i,n,r,s){const o=si(t,e.entity),a=new class{constructor(t,e){this.editor=t,this.domPositionCache=e,this.container=gi(t)}render(t){return bi(this.editor[0],this.domPositionCache,this.container[0],t)}remove(t){const e=xi(t);e&&e.parentNode.removeChild(e),this.domPositionCache.removeGrid(t)}updateWidth(t){!function(t,e,i){e.removeAllSpan(),e.removeAllEntity();const n=e.getSpan(i);t.style.width=n.width+"px"}(xi(t),this.domPositionCache,t)}}(t,o),l=new class{constructor(t,e,i,n,r,s){this._editor=t,this._annotationData=e,this._typeContainer=n,this._gridRenderer=r,this._selectionModel=i,this._typeGap=s}render(t){ki(this._typeContainer,this._gridRenderer,t,this._annotationData.namespace),Pi(t,this._typeGap)}change(t){!function(t,e,i,n,r){const s=Si(r),o=Ei(r,i,n),a=v.a.create(o);if(s.innerHTML=a.innerHTML,e.entity.has(r.id)){new di(t).select(r.id)}}(this._editor,this._selectionModel,this._annotationData.namespace,this._typeContainer,t),Pi(t,this._typeGap)}remove(t){!function(t,e,i){!function(t,e){return 0===t.span.get(e).entities.length}(t,i.span)?Si(i).remove():e.remove(i.span)}(this._annotationData,this._gridRenderer,t)}updateEntityDom(t){for(const e of this._annotationData.entity.all)(e.typeName===t||t.lastIndexOf("*")===t.length-1&&e.typeName.indexOf(0===t.slice(0,-1)))&&this.change(e)}updateAttribute(t){for(const e of rt.filterWithSamePredicateAttribute(this._annotationData.entity.all,t))this.change(e)}updateEntityDomAll(){for(const t of this._annotationData.entity.all)this.change(t)}}(t,e,i,n.entity,a,r);this._relationRenderer=new class{constructor(t,e,i,n){var r;this._editor=t,this._annotationData=e,this._selectionModel=i,this._typeDefinition=n,this._domPositionCache=si(t,e.entity),this._jsPlumbInstance=(r=gi(t),jsPlumb.getInstance({ConnectionsDetachable:!1,Container:r,Endpoint:["Dot",{radius:1}]}))}arrangePositionAll(){var t;t=this._annotationData.relation.all,Promise.all(t.filter(t=>t.render).map(t=>t.render())).catch(t=>{console.error("error in renderLazyRelationAll",t)}),Vi(this._editor,this._annotationData,this._selectionModel,this._jsPlumbInstance)}reset(){this._jsPlumbInstance.reset(),this._domPositionCache.removeAllConnect()}render(t){!function(t,e,i,n,r){Object.assign(r,{relationId:r.id,render:()=>cn(e,i,r,t,n)})}(this._jsPlumbInstance,this._editor,this._annotationData,this._typeDefinition,t)}change(t){un(this._editor,this._annotationData,this._typeDefinition,t)}changeType(t){for(const e of this._annotationData.relation.all)(e.typeName===t||t.lastIndexOf("*")===t.length-1&&e.typeName.indexOf(0===t.slice(0,-1)))&&un(this._editor,this._annotationData,this._typeDefinition,e)}changeAll(){this._annotationData.relation.all.map(t=>{un(this._editor,this._annotationData,this._typeDefinition,t)})}remove(t){t.render||function(t,e,i,n,r){const s=new ji(t,e,r.id);i.detach(s),n.removeConnect(r.id),s.dead=!0,r.removed=!0}(this._editor,this._annotationData,this._jsPlumbInstance,this._domPositionCache,t)}}(t,e,i,n),Ni(e,t,o,this._relationRenderer,a,l,s),function(t,e,i){t.eventEmitter.on("textae.typeDefinition.entity.type.change",t=>e.updateEntityDom(t)).on("textae.typeDefinition.entity.attributeDefinition.change",t=>e.updateAttribute(t)).on("textae.typeDefinition.relation.type.change",t=>i.changeType(t)).on("textae.typeDefinition.reset",()=>{e.updateEntityDomAll(),i.changeAll()})}(t,l,this._relationRenderer),this._editor=t,this._annotationData=e,this._typeDefinition=n,this._typeGap=r}arrangeRelationPositionAllAsync(){return new Promise((t,e)=>{this._relationRenderer.arrangePositionAll(),t()})}}(t,e,i,r,n,o),l=new class{constructor(t,e,i,n){this._editor=t,this._gridLayout=new class{constructor(t,e,i){this._editor=t,this._annotationData=e,this._gridHeight=i,this._domPositionCache=si(t,e.entity)}arrangePosition(){this._domPositionCache.removeAllSpan(),this._domPositionCache.removeAllEntity(),this._domPositionCache.cacheAllSpan(this._annotationData.span.allSpansWithGrid);for(const t of this._annotationData.span.allSpansWithGrid)ai(this._domPositionCache,this._annotationData,this._gridHeight,t)}arrangePositionAsync(){return this._domPositionCache.removeAllSpan(),this._domPositionCache.removeAllEntity(),Promise.all(li(this._domPositionCache,this._annotationData,this._gridHeight))}}(t,e,n),this._renderer=i}update(){this._editor.eventEmitter.emit("textae.annotationPosition.position-update.start"),this._gridLayout.arrangePosition(),this._renderer.arrangeRelationPositionAllAsync().then(()=>this._editor.eventEmitter.emit("textae.annotationPosition.position-update.end"))}updateAsync(){this._editor.eventEmitter.emit("textae.annotationPosition.position-update.start"),this._gridLayout.arrangePositionAsync().then(()=>this._renderer.arrangeRelationPositionAllAsync()).then(this._editor.eventEmitter.emit("textae.annotationPosition.position-update.end")).catch(t=>console.error(t,t.stack))}}(t,e,a,s);mi(n,t,o,l),function(t,e,i){const n=new class{constructor(t,e){this._textBox=e,this._enable=!1,t.eventEmitter.on("textae.control.button.push",({buttonName:t,state:e})=>{"line-height-auto"===t&&(this._enable=e)})}updateLineHeight(){this._enable&&this._textBox.updateLineHeight()}}(t,i),r=dn()(()=>{n.updateLineHeight(),e.updateAsync()},100);t.eventEmitter.on("textae.annotationData.all.change",r).on("textae.annotationData.entity.add",r).on("textae.annotationData.entity.change",r).on("textae.annotationData.entity.remove",r).on("textae.annotationData.entity.move",r).on("textae.annotationData.relation.add",r).on("textae.annotationData.attribute.add",r).on("textae.annotationData.attribute.change",r).on("textae.annotationData.attribute.remove",r).on("textae.annotationData.span.move",()=>{e.update()})}(t,l,o),function(t,e){t.eventEmitter.on("textae.annotationPosition.position-update.start",()=>e.startWait()).on("textae.annotationPosition.position-update.end",()=>e.endWait())}(t,new D(t)),function(t,e){const i=t[0];fn()(i,".textae-editor__entity__endpoint","mouseover",t=>e.on(ci(t.target).title)),fn()(i,".textae-editor__entity__endpoint","mouseout",t=>e.off(ci(t.target).title))}(t,new class{constructor(t,e){this._editor=t,this._entityContainer=e}on(t){for(const e of this._getConnectsOf(t))e.pointup&&e.pointup()}off(t){for(const e of this._getConnectsOf(t))e.pointdown&&e.pointdown()}_getConnectsOf(t){return this._entityContainer.get(t).relations.map(t=>si(this._editor,this._entityContainer).getConnect(t))}}(t,e.entity)),this._editor=t,this._annotationData=e,this._typeGap=n,this._annotationPosition=l,this._textBox=o}updateDisplay(){this._textBox.forceUpdate(),this._annotationPosition.update()}updateLineHeight(){this._textBox.updateLineHeight(),this._annotationPosition.update()}getLineHeight(){return this._textBox.lineHeight}setLineHeight(t){this._textBox.lineHeight=t}}(t,n,r,d,l),f=new Xs,m=new class{constructor(t,e,i,n,r,s,o,a,l,c,u,h,d){const p=new class{constructor(t,e,i,n,r,s,o,a,l){this._editor=t,this._typeDefinition=a,this._autocompletionWs=l,this._selectionModel=i,this._entityPallet=new Lr(t,o,a,i.entity),this._elementEditor=new class{constructor(t,e,i,n,r,s,o,a){this._handler="default";const l=new class{constructor(t,e,i,n,r){this._commander=t,this._annotationData=i,this._selectionModel=n,this._pallet=r,e[0].appendChild(this._pallet.el),function(t,e,i){t.eventEmitter.on("textae.entityPallet.attribute.selection-attribute-label.click",(t,n)=>{if(e.entity.isSamePredAttrributeSelected(t.pred)){const e=i.factory.changeAttributesOfSelectedEntitiesWithSamePred("entity",t,n);i.invoke(e)}else{const e=i.factory.createAttributeToSelectedEntitiesCommand(t,n);i.invoke(e)}}).on("textae.selecionAttributePallet.remove-button.click",t=>{const e=i.factory.removeAttributesOfSelectedEntitiesByPredCommand(t);i.invoke(e)})}(e,n,t)}handle(t,e){fr(this._pallet,this._commander,this._selectionModel,t,e)}}(r,t,e,i,a),c=new class{constructor(t,e){this._commander=t,this._annotationData=e}handle(t,e){const i=t.entity.getAttributeAt(e),n=this._commander.factory.removeAttributesOfSelectedEntitiesByPredCommand(i);this._commander.invoke(n)}}(r,e);this._editEntity=new class{constructor(t,e,i,n,r,s,o,a,l){this._editor=t,this._entityHandler=new jn(t,s,n,e,i,a,l);!function(t,e,i){t.eventEmitter.on("textae.editor.editEntity.textBox.click",t=>e.textBoxClicked(t)).on("textae.editor.editEntity.span.mouseup",t=>e.spanClicked(t)).on("textae.editor.editEntity.style.mouseup",t=>e.styleSpanClicked(t)).on("textae.editor.editEntity.endpoint.click",t=>ar(t.ctrlKey||t.metaKey,i,ci(t.target))).on("textae.editor.editEntity.entity.click",()=>t.focus()).on("textae.editor.editEntity.typeValues.click",t=>{const e=ci(t.target);ar(t.ctrlKey||t.metaKey,i,e)})}(t,new class{constructor(t,e,i,n,r,s){this._editor=t,this._annotationData=e,this._selectionModel=i,this._commander=n,this._buttonController=r,this._spanConfig=s}textBoxClicked(t){"Range"===window.getSelection().type&&(this._selectEndOnText(),t.stopPropagation())}spanClicked(t){2===t.button&&In();const e=window.getSelection();"Caret"===e.type&&this._selectSpan(t,t.target.id),"Range"===e.type&&(this._selectEndOnSpan(),t.stopPropagation())}styleSpanClicked(t){2===t.button&&In();const e=window.getSelection();if("Caret"===e.type){const e=t.target.closest(".textae-editor__span");e&&this._selectSpan(t,e.id)}"Range"===e.type&&(this._selectEndOnStyleSpan(),t.stopPropagation())}_selectSpan(t,e){!function(t,e,i,n){const r=e.span.singleId;if(i.shiftKey&&r){e.clear();for(const i of t.span.range(r,n))e.selectSpanById(i)}else i.ctrlKey||i.metaKey?e.toggleSpanById(n):(e.clear(),e.selectSpanById(n))}(this._annotationData,this._selectionModel,t,e)}_selectEndOnText(){const t=new nr;if(t.isFocusNodeInTextBox&&(t.isAnchorNodeInTextBox||t.isAnchorNodeInSpan||t.isAnchorNodeInStyleSpan)&&this._hasCharacters(t)){if(t.isAnchorNodeInStyleSpanAndTheStyleSpanIsDescendantOfSpan){const e=t.ancestorSpanOfAnchorNode;return this._expandOnStyleSpan(t,e),void In()}if(t.isAnchorNodeInTextBox||t.isAnchorNodeInStyleSpan)return void this._create(t);if(t.isAnchorNodeInSpan)return this._expand(t),void In()}In()}_selectEndOnSpan(){const t=new nr;if(t.isFocusNodeInSpan&&(t.isAnchorNodeInTextBox||t.isAnchorNodeInSpan||t.isAnchorNodeInStyleSpan)&&or(this._annotationData,this._spanConfig,t)){if(t.isParentOfAnchorNodeAndFocusedNodeSame){const e=new Fn(this._annotationData,t),i=this._getAnchorNodeParentSpan(t);return void(e.anchor===i.begin||e.anchor===i.end?(this._shrinkPullByTheEar(t),In()):this._create(t))}if(t.isFocusNodeParentIsDescendantOfAnchorNodeParent)return this._shrinkCrossTheEar(t),void In();if(t.isAnchorNodeInSpan&&t.isAnchorNodeParentIsDescendantOfFocusNodeParent)return t.isFocusNodeParentSelected?this._shrinkCrossTheEar(t):this._expand(t),void In();t.isAnchorNodeInSpan&&t.isFocusNodeParentIsDescendantOfAnchorNodeParentOfParent&&(this._expand(t),In())}In()}_selectEndOnStyleSpan(){const t=new nr;if(t.isFocusNodeInStyleSpan&&(t.isAnchorNodeInTextBox||t.isAnchorNodeInSpan||t.isAnchorNodeInStyleSpan)&&or(this._annotationData,this._spanConfig,t)){if(t.isParentOfAnchorNodeAndFocusedNodeSame||t.isAnchorNodeInTextBox)return void this._create(t);if(t.isAnchorNodeParentIsDescendantOfFocusNodeParent)return this._expand(t),void In()}In()}_hasCharacters(t){return or(this._annotationData,this._spanConfig,t)}_getPosition(t){return new Fn(this._annotationData,t)}_getAnchorNodeParentSpan(t){return this._annotationData.span.get(t.parentOfAnchorNode.id)}_create(t){this._selectionModel.clear(),Gn(this._annotationData,this._commander,this._spanAdjuster,this._isDetectDelimiterEnable,this._isReplicateAuto,t,this._spanConfig)}_expand(t){const e=rr(this._selectionModel,t);e&&(sr(this._selectionModel,this._annotationData,this._commander,this._spanAdjuster,e,t,this._spanConfig),In())}_expandOnStyleSpan(t,e){const i=e.id;i&&sr(this._selectionModel,this._annotationData,this._commander,this._spanAdjuster,i,t,this._spanConfig)}_shrinkCrossTheEar(t){er(this._editor,this._annotationData,this._selectionModel,this._commander,this._spanAdjuster,t,this._spanConfig)}_shrinkPullByTheEar(t){ir(this._editor,this._annotationData,this._selectionModel,this._commander,this._spanAdjuster,t,this._spanConfig)}get _isDetectDelimiterEnable(){return this._buttonController.valueOf("boundary-detection")}get _isReplicateAuto(){return this._buttonController.valueOf("replicate-auto")}get _spanAdjuster(){return this._isDetectDelimiterEnable?new Jn:new Qn}}(t,e,i,n,r,o),i)}init(){return function(t){const e=[];for(const i of t[0].querySelectorAll(".textae-editor__body__text-box"))e.push(fn()(i,".textae-editor__body__text-box","click",e=>t.eventEmitter.emit("textae.editor.editEntity.textBox.click",e)));return e.push(Dn(t)),e.push(fn()(t[0],".textae-editor__entity","click",e=>t.eventEmitter.emit("textae.editor.editEntity.entity.click",e))),e.push(fn()(t[0],".textae-editor__entity__type-values","click",e=>t.eventEmitter.emit("textae.editor.editEntity.typeValues.click",e))),e.push(fn()(t[0],".textae-editor__entity__endpoint","click",e=>t.eventEmitter.emit("textae.editor.editEntity.endpoint.click",e))),e.push(fn()(t[0],".textae-editor__span","mouseup",e=>{e.target.classList.contains("textae-editor__span")&&t.eventEmitter.emit("textae.editor.editEntity.span.mouseup",e)})),e.push(fn()(t[0],".textae-editor__style","mouseup",e=>{e.target.classList.contains("textae-editor__style")&&t.eventEmitter.emit("textae.editor.editEntity.style.mouseup",e)})),e}(this._editor)}get entityHandler(){return this._entityHandler}}(t,e,i,r,s,o,n,l,c),this._editRelation=new class{constructor(t,e,i,n,r){this._editor=t,this._relationHandler=new Cn(r,n,e,i),function(t,e,i,n){t.eventEmitter.on("textae.editor.editRelation.endpoint.click",t=>{const r=ci(t.target);Tn(e,r,i,n,t)}).on("textae.editor.editRelation.entity.click",()=>t.focus()).on("textae.editor.editRelation.typeValues.click",t=>{const r=ci(t.target);Tn(e,r,i,n,t)})}(t,i,n,r)}init(){return function(t){const e=[];return e.push(Dn(t)),e.push(fn()(t[0],".textae-editor__entity","click",e=>t.eventEmitter.emit("textae.editor.editRelation.entity.click",e))),e.push(fn()(t[0],".textae-editor__entity__type-values","click",e=>t.eventEmitter.emit("textae.editor.editRelation.typeValues.click",e))),e.push(fn()(t[0],".textae-editor__entity__endpoint","click",e=>t.eventEmitter.emit("textae.editor.editRelation.endpoint.click",e))),e}(this._editor)}get relationHandler(){return this._relationHandler}}(t,e,i,r,o),this._editor=t,this._listeners=[]}_setHandlerType(t){this._handler=t}getHandlerType(){return this._handler}getHandler(){return function(t,e,i){switch(t){case"entity":return e.entityHandler;case"relation":return i.relationHandler;default:return new bn}}(this._handler,this._editEntity,this._editRelation)}get entityHandler(){return this._editEntity.entityHandler}get relationHandler(){return this._editRelation.relationHandler}noEdit(){this._unbindAllMouseEventhandler(),this._setHandlerType("default")}editEntity(){this._unbindAllMouseEventhandler(),this._listeners=this._editEntity.init(),this._setHandlerType("entity")}editRelation(){this._unbindAllMouseEventhandler(),this._listeners=this._editRelation.init(),this._setHandlerType("relation")}_unbindAllMouseEventhandler(){for(const t of this._listeners)t.destroy();this._listeners=[]}}(t,e,i,n,r,s,a,this._entityPallet),function(t,e,i,n){t.on("textae.entityPallet.attribute.create-predicate-button.click",()=>{const t=new Br;t.promise.then(t=>{t.pred&&e.invoke(e.factory.createAttributeDefinitionCommand("entity",t))}),t.open()}).on("textae.entityPallet.attribute.edit-predicate-button.click",t=>{const i=new Vr(t);i.promise.then(i=>{i.size&&""!==i.get("pred")&&e.invoke(e.factory.changeAttributeDefinitionCommand("entity",t,i))}),i.open()}).on("textae.entityPallet.attribute.delete-predicate-button.click",t=>e.invoke(e.factory.deleteAttributeDefinitionCommand("entity",t))).on("textae.entityPallet.attribute.add-value-button.click",t=>{const i=new Jr(t.valueType);i.promise.then(i=>{(i.range||i.id||i.pattern)&&e.invoke(e.factory.addValueToAttributeDefinitionCommand("entity",t,i))}),i.open()}).on("textae.entityPallet.attribute.edit-value-button.click",(t,i)=>{const n=t.JSON.values[i],r=new Jr(t.valueType,n);r.promise.then(r=>{if(r.range||r.id||r.pattern){if(!(Object.keys(r).reduce((t,e)=>t||r[e]!==n[e],!1)||Object.keys(n).reduce((t,e)=>t||r[e]!==n[e],!1)))return;e.invoke(e.factory.changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand("entity",t.JSON,i,r))}}),r.open()}).on("textae.entityPallet.attribute.remove-value-button.click",(t,i)=>e.invoke(e.factory.removeValueFromAttributeDefinitionCommand("entity",t,i))).on("textae.entityPallet.attribute.add-button.click",t=>e.invoke(e.factory.createAttributeToSelectedEntitiesCommand(t))).on("textae.entityPallet.attribute.object.edit",t=>{const r=i.findSelectedWithSamePredicateAttribute(t).attributes.find(e=>e.pred===t.pred);switch(t.valueType){case"numeric":ur(t,r,e);break;case"selection":n.show(),n.showAttribute(t.pred);break;case"string":pr(r,e,t);break;default:throw new Error("Invalid attribute valueType: "+t.valueType)}}).on("textae.entityPallet.attribute.remove-button.click",t=>e.invoke(e.factory.removeAttributesOfSelectedEntitiesByPredCommand(t))).on("textae.entityPallet.attribute.tab.drop",(t,i)=>{e.invoke(e.factory.moveAttributeDefintionComannd(t,i))})}(t.eventEmitter,r,i.entity,this._entityPallet),br(this._entityPallet,t,this,r,"entity",this._elementEditor.entityHandler),this._relationPallet=new Hr(t,o,a),br(this._relationPallet,t,this,r,"relation",this._elementEditor.relationHandler)}editRelation(){this._elementEditor.editRelation()}editEntity(){this._elementEditor.editEntity()}noEdit(){this._elementEditor.noEdit()}showPallet(){const t=this._getPallet();t&&t.show()}selectLeftAttributeTab(){this._entityPallet.visibly&&this._entityPallet.selectLeftTab()}selectRightAttributeTab(){this._entityPallet.visibly&&this._entityPallet.selectRightTab()}get isEntityPalletShown(){return this._entityPallet.visibly}changeLabel(){this._elementEditor.getHandler().changeLabelHandler(this.autocompletionWs)}manipulateAttribute(t,e){this._elementEditor.getHandler().manipulateAttribute(t,e)}cancelSelect(){const t=this._getPallet();t&&(t.visibly?t.hide():this._selectionModel.clear())}jsPlumbConnectionClicked(t,e){!function(t,e,i){t.getHandler().jsPlumbConnectionClicked&&!i.processedByTextae&&t.getHandler().jsPlumbConnectionClicked(e,i),i.processedByTextae=!0}(this._elementEditor,t,e)}getSelectedIdEditable(){return this._elementEditor.getHandler().selectedIds}_getPallet(){return"entity"==this._elementEditor.getHandlerType()?this._entityPallet:"relation"==this._elementEditor.getHandlerType()?this._relationPallet:void 0}get autocompletionWs(){return this._autocompletionWs||this._typeDefinition.autocompletionWs}}(t,e,i,r,n,o,c,u,h),f=new class{constructor(t){this._typeGap=t,this._isModeShowingInstance=!0,this._valueForModeShowingInstance=2}show(){this._isModeShowingInstance=!0,this._typeGap.set({value:this._valueForModeShowingInstance,showInstance:!0})}hide(){this._isModeShowingInstance=!1,this._typeGap.set({value:0,showInstance:!1})}get showInstance(){return this._isModeShowingInstance}get typeGap(){return this._isModeShowingInstance?this._valueForModeShowingInstance:0}set typeGap(t){this._valueForModeShowingInstance=t,this._typeGap.set({value:t,showInstance:!0})}}(a),m=new class{constructor(t,e,i,n){const r=new class{constructor(t,e,i){this._editor=t,this._typeEditor=e,this._viewMode=new class{constructor(t){this._editor=t}setTerm(){Gr(this._editor,"term")}setInstance(){Gr(this._editor,"instance")}setRelation(){Gr(this._editor,"relation")}}(t),this._displayInstance=i}toTerm(){this._displayInstance.hide(),this._editor.eventEmitter.emit("textae.editMode.transition","term",!0),this._typeEditor.editEntity(),this._viewMode.setTerm(),Qr(this._editor,!0)}toInstance(){this._displayInstance.show(),this._editor.eventEmitter.emit("textae.editMode.transition","instance",!0),this._typeEditor.editEntity(),this._viewMode.setInstance(),Qr(this._editor,!0)}toRelation(){this._displayInstance.show(),this._editor.eventEmitter.emit("textae.editMode.transition","relation",!0),this._typeEditor.editRelation(),this._viewMode.setRelation(),Qr(this._editor,!0)}toViewTerm(){this._displayInstance.hide(),this._editor.eventEmitter.emit("textae.editMode.transition","term",!1),this._typeEditor.noEdit(),this._viewMode.setTerm(),Qr(this._editor,!1)}toViewInstance(){this._displayInstance.show(),this._editor.eventEmitter.emit("textae.editMode.transition","instance",!1),this._typeEditor.noEdit(),this._viewMode.setInstance(),Qr(this._editor,!1)}}(t,i,n);this._stateMachine=function(t){const e=new ts;return e.on("transition",t=>{}).on(es(Zr.TERM),()=>t.toTerm()).on(es(Zr.INSTANCE),()=>t.toInstance()).on(es(Zr.RELATION),()=>t.toRelation()).on(es(Zr.VIEW_TERM),()=>t.toViewTerm()).on(es(Zr.VIEW_INSTANCE),()=>t.toViewInstance()),e}(r),this._annotationData=e}get isSimple(){return this._stateMachine.currentState===Zr.TERM}get isEditEntity(){return this._stateMachine.currentState===Zr.INSTANCE}toTerm(){this._stateMachine.setState(Zr.TERM)}toInstance(){this._stateMachine.setState(Zr.INSTANCE)}toViewTerm(){this._stateMachine.setState(Zr.VIEW_TERM)}toViewInstance(){this._stateMachine.setState(Zr.VIEW_INSTANCE)}pushView(){!function(t){switch(t.currentState){case Zr.TERM:t.setState(Zr.VIEW_TERM);break;case Zr.INSTANCE:case Zr.RELATION:t.setState(Zr.VIEW_INSTANCE)}}(this._stateMachine)}pushTerm(){ns(this._stateMachine,this._annotationData)}pushRelation(){this._stateMachine.setState(Zr.RELATION)}pushSimple(){!function(t){switch(t.currentState){case Zr.INSTANCE:t.setState(Zr.TERM);break;case Zr.VIEW_INSTANCE:t.setState(Zr.VIEW_TERM);break;default:throw new Error("Invalid state: "+t.currentState)}}(this._stateMachine)}upSimple(){!function(t){switch(t.currentState){case Zr.TERM:t.setState(Zr.INSTANCE);break;case Zr.VIEW_TERM:t.setState(Zr.VIEW_INSTANCE);break;default:throw new Error("Invalid state: "+t.currentState)}}(this._stateMachine)}toggleSimple(){switch(this._stateMachine.currentState){case Zr.TERM:this._stateMachine.setState(Zr.INSTANCE);break;case Zr.VIEW_TERM:this._stateMachine.setState(Zr.VIEW_INSTANCE);break;case Zr.INSTANCE:this._stateMachine.setState(Zr.TERM);break;case Zr.VIEW_INSTANCE:this._stateMachine.setState(Zr.VIEW_TERM);break;default:throw new Error("Invalid state: "+this._stateMachine.currentState)}}changeByShortcut(){!function(t){switch(t.currentState){case Zr.VIEW_INSTANCE:t.setState(Zr.INSTANCE);break;case Zr.VIEW_TERM:t.setState(Zr.TERM);break;case Zr.TERM:case Zr.INSTANCE:t.setState(Zr.RELATION);break;case Zr.RELATION:t.setState(Zr.VIEW_INSTANCE)}}(this._stateMachine)}}(t,e,p,f);t.eventEmitter.on("textae.editMode.transition",()=>p.cancelSelect()).on("textae.editor.body.click",()=>p.cancelSelect()),rs(t,m,d),this.event=new class{constructor(t,e,i,n,r,s,o,a,l,c,u,h){this._editor=t,this._commander=e,this._selectionModel=i,this._typeDefinition=n,this._displayInstance=r,this._annotationData=s,this._buttonController=o,this._spanConfig=a,this._clipBoard=l,this._view=c,this._typeEditor=u,this._editMode=h,this._horizontal=new class{constructor(t,e){this._editor=t,this._selectionModel=e}left(t){const e=this._searchLeft("textae-editor__span");if(e)return void this._selectionModel.selectSpan(e,t);const i=this._searchLeft("textae-editor__entity");i&&this._selectionModel.selectEntity(i,t)}right(t){const e=this._searchRight("textae-editor__span");if(e)return void this._selectionModel.selectSpan(e,t);const i=this._searchRight("textae-editor__entity");i&&this._selectionModel.selectEntity(i,t)}_searchLeft(t){const e=this._getAllElementsOf(t),i=[...e].findIndex(t=>t.classList.contains("ui-selected"));if(i>0)return e[i-1]}_searchRight(t){const e=this._getAllElementsOf(t),i=[...e].reverse().findIndex(t=>t.classList.contains("ui-selected"));if(e.length-i>0)return e[e.length-i]}_getAllElementsOf(t){return this._editor[0].querySelectorAll("."+t)}}(t,i),this._vertical=new class{constructor(t,e){this._editor=t,this._selectionModel=e}up(){if(this._selectionModel.span.singleId){const t=document.querySelector("#G"+this._selectionModel.span.singleId).querySelector(".textae-editor__entity");this._selectionModel.selectEntity(t)}}down(){this._selectedType&&this._selectionModel.selectSingleSpanById(this._spanIdOfSelectedType)}get _selectedType(){return this._editor[0].querySelector(".textae-editor__entity.ui-selected")}get _spanIdOfSelectedType(){return this._selectedType.closest(".textae-editor__grid").id.substring(1)}}(t,i)}copyEntities(){this._clipBoard.copyEntities()}cutEntities(){this._clipBoard.cutEntities()}removeSelectedElements(){const t=this._commander.factory.removeSelectedComand();this._horizontal.right(null),this._commander.invoke(t)}createEntity(){!function(t,e){const i=t.factory.createDefaultTypeEntityToSelectedSpansCommand(e.entity.defaultType);i.isEmpty||t.invoke(i)}(this._commander,this._typeDefinition)}showPallet(){this._typeEditor.showPallet()}replicate(){!function(t,e,i,n){const r=function(t,e){return t.valueOf("boundary-detection")?t=>e.isDelimiter(t):null}(e,i);n?t.invoke(t.factory.replicateSpanCommand(n,n.entities.map(t=>t.typeValues),r)):alert("You can replicate span annotation when there is only span selected.")}(this._commander,this._buttonController,this._spanConfig,this._selectionModel.span.single)}pasteEntities(){this._clipBoard.pasteEntities()}changeLabel(){this._typeEditor.changeLabel()}manipulateAttribute(t,e){this._typeEditor.manipulateAttribute(t,e)}cancelSelect(){this._typeEditor.cancelSelect(),this._editor.focus()}showSettingDialog(){new us(this._editor,this._typeDefinition,this._displayInstance,this._view).open()}select(){this._editor[0].classList.add("textae-editor--active")}unselect(){this._editor[0].classList.remove("textae-editor--active"),this._editor.eventEmitter.emit("textae.editor.unselect")}selectLeft(t){this._typeEditor.isEntityPalletShown?this._typeEditor.selectLeftAttributeTab():this._horizontal.left(t)}selectRight(t){this._typeEditor.isEntityPalletShown?this._typeEditor.selectRightAttributeTab():this._horizontal.right(t)}selectUp(){this._editMode.isEditEntity&&this._vertical.up()}selectDown(){this._editMode.isEditEntity&&this._vertical.down()}toggleSimpleMode(){this._editMode.toggleSimple()}toggleButton(t){this._buttonController.toggle(t)}changeMode(){this._editMode.changeByShortcut()}toViewMode(){this._editMode.pushView()}toTermMode(){this._editMode.pushTerm()}toRelationMode(){this._editMode.pushRelation()}}(t,n,i,u,f,e,o,r,s,l,p,m),t.on("textae.editor.jsPlumbConnection.add",(t,e)=>{e.bindClickAction((t,e)=>p.jsPlumbConnectionClicked(t,e))})}}(t,n,r,c,a,u,h,d,p,f,l,o.get("autocompletion_ws"),o.get("mode"));!function(t){new MutationObserver(e=>{e.forEach(e=>{e.removedNodes.length&&1===e.removedNodes[0].nodeType&&(e.removedNodes[0].classList.contains("textae-editor__span")||e.removedNodes[0].classList.contains("textae-editor__type"))&&"BODY"===document.activeElement.tagName&&t.focus()})}).observe(t[0].querySelector(".textae-editor__body"),{childList:!0,subtree:!0})}(t);const g=Ns(t,o.get("status_bar"));"visible"===o.get("control")&&t[0].classList.add("textae-editor--control-visible"),"hidden"===o.get("control")&&t[0].classList.add("textae-editor--control-hidden");const _=Gs(o.get("source"));null!==_&&o.set("config_lock",_),o.has("config_lock")&&"true"===o.get("config_lock")?l.lockEdit():l.unlockEdit(),f.annotation=function(t,e,i,n,r,s,o){const a=r.get("annotation"),l=r.get("config");if(a){if(a.has("inlineAnnotation")){const r=JSON.parse(a.get("inlineAnnotation"));return Qs(t,e,i,r,l,s,o),n.status("inline"),r}if(!a.has("url"))throw new Error("annotation text is empty.");s.loadAnnotation(a.get("url"))}else l&&s.loadConfigulation(l);return null}(a,l,n,g,o,e,h);const y=new class{constructor(t,e,i,n,r,s,o,a){this._editor=t,this._dataAccessObject=e,this._history=i,this._annotationData=n,this._typeDefinition=r,this._getOriginalAnnotation=s,this._getOriginalConfig=o,this._saveToParameter=a,this._filenameOfLastRead={annotation:"",configuration:""}}importAnnotation(){new fs("Load Annotations",this._dataAccessObject.annotationUrl,t=>this._dataAccessObject.loadAnnotation(t),({files:t})=>{Ps(t,this._editor),this._filenameOfLastRead.annotation=t[0].name},this._history.hasAnythingToSaveAnnotation).open()}uploadAnnotation(){new vs(this._editor,this._saveToParameter||this._dataAccessObject.annotationUrl,this._filenameOfLastRead.annotation,this._editedAnnotation,t=>this._dataAccessObject.saveAnnotation(t,this._editedAnnotation)).open()}saveAnnotation(){this._dataAccessObject.saveAnnotation(this._saveToParameter||this._dataAccessObject.annotationUrl,this._editedAnnotation)}importConfiguration(){new fs("Load Configurations",this._dataAccessObject.configurationUrl,t=>this._dataAccessObject.loadConfigulation(t),({files:t})=>{!function(t,e){const i=t[0];ws(i).then(t=>{Es(t.target.result)?e.eventEmitter.emit("textae.configuration.load","local file",i.name,JSON.parse(t.target.result)):e.eventEmitter.emit("textae.configuration.loadError","local file",i.name)})}(t,this._editor),this._filenameOfLastRead.configuration=t[0].name},this._history.hasAnythingToSaveConfiguration).open()}uploadConfiguration(){const t=Object.assign({},this._getOriginalConfig(),this._typeDefinition.config);new xs(this._editor,this._dataAccessObject.configurationUrl,this._filenameOfLastRead.configuration,this._getOriginalConfig(),t,e=>this._dataAccessObject.saveConfiguration(e,t)).open()}get _editedAnnotation(){return t=this._getOriginalAnnotation(),e=this._annotationData,i=this._typeDefinition.config,Object.assign(t,e.toJson(),{config:i});var t,e,i}}(t,e,i,n,l,()=>f.annotation,()=>f.configuration,o.get("annotation").get("save_to"));new class{constructor(t,e,i,n,r){this._buttonController=e;const s=dn()(()=>i.saveAnnotation(),5e3);r.bind(t=>{t&&e.valueOf("write-auto")&&s()}),t.eventEmitter.on("textae.annotation.load",()=>this._disabled()).on("textae.saveError",()=>this._disabled()).on("textae.annotation.setUrl",e=>t.eventEmitter.emit("textae.annotationAutoSaver.enable",Boolean(n||e))).on("textae.control.button.push",({buttonName:t,state:e})=>{"write-auto"===t&&!0===e&&r.hasChange&&i.saveAnnotation()})}_disabled(){this._buttonController.valueOf("write-auto")&&this._buttonController.toggle("write-auto")}}(t,h,y,o.get("annotation").get("save_to"),s),t.api=new class{constructor(t,e,i,n,r){this._keyApiMap=new Ds(t,e,i),this._iconApiMap=new Ts(t,e,i,r,n),this._palletApiMap=new As(i),this._view=r,this._buttonController=n,this._presenter=e,this._isSelected=!1}handleKeyInput(t){if(this._isSelected){const e=t.shiftKey&&48<=t.keyCode&&t.keyCode<=57?String.fromCharCode(t.keyCode):t.key;Cs(this._keyApiMap,e,t.shiftKey)}}handleButtonClick(t){Cs(this._iconApiMap,t,{})}handlePalletClick(t){Cs(this._palletApiMap,t)}redraw(){this._view.updateDisplay()}updateButtons(){this._buttonController.propagate()}select(){this._presenter.event.select(),this._isSelected=!0}unselect(){this._presenter.event.unselect(),this._isSelected=!1}}(c,m,y,h,p),so(t,i,n,a,l,o,g,f,e,h),t[0].tabIndex=-1,I.a.set("notifier","position","top-right")},ao=i(24);x.a.registerHelper("ifSecond",(function(t,e){return 1==t?e.fn(this):e.inverse(this)}));const lo=x.a.compile('\n{{#each this}}\n  {{#ifSecond @index}}\n  <div class="textae-editor__valiondate-dialog__content">\n      <h1>Track annatations will be merged to the root anntations.</h1>\n    </div>\n  {{/ifSecond}}\n  <div class="textae-editor__valiondate-dialog__content">\n    <h2>{{name}}</h2>\n    {{#if denotationHasLength}}\n      <table>\n        <caption>Wrong range.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#denotationHasLength}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/denotationHasLength}}\n        </tbody>\n      </table>\n    {{/if}}\n    {{#if denotationInText}}\n      <table>\n        <caption>Out of text.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#denotationInText}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/denotationInText}}\n        </tbody>\n      </table>\n    {{/if}}\n    {{#if isNotCrossing}}\n      <table>\n        <caption>Type settins or Spans with boundary-cross.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style/obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#isNotCrossing}}\n          <tr>\n            <td>{{id}}</td>\n            <td>{{sourceProperty}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{style}}{{obj}}</td>\n          </tr>\n          {{/isNotCrossing}}\n        </tbody>\n      </table>\n    {{/if}}\n    {{#if referencedItems}}\n      <table>\n        <caption>Referenced items do not exist.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#referencedItems}}\n          <tr>\n            <td>{{id}}</td>\n            <td>{{sourceProperty}}</td>\n            <td{{#if alertSubj}} class="alert"{{/if}}>{{subj}}</td>\n            <td>{{pred}}</td>\n            <td{{#if alertObj}} class="alert"{{/if}}>{{obj}}</td>\n          </tr>\n          {{/referencedItems}}\n        </tbody>\n      </table>\n    {{/if}}\n    {{#if duplicatedAttributes}}\n      <table>\n        <caption>Dupulicated attributes.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#duplicatedAttributes}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{subj}}</td>\n            <td>{{pred}}</td>\n            <td class="alert">{{obj}}</td>\n          </tr>\n          {{/duplicatedAttributes}}\n        </tbody>\n      </table>\n    {{/if}}\n  </div>\n{{/each}}\n');var co=function(t){return lo(t)},uo=class extends o{constructor(t){super("The following erroneous annotations ignored",co(t),null,{height:600,width:900})}},ho=function(){this.eventEmitter=new ao.EventEmitter;const t=new class{constructor(t){this.sourceDoc="",this.namespace=new L(t.eventEmitter,"namespace"),this.relation=new X(t.eventEmitter),this.entity=new st(t,t.eventEmitter,this),this.attribute=new Q(t.eventEmitter,this.entity),this.span=new q(t,t.eventEmitter,this.entity),this._editor=t}reset(t){var e;console.assert(t.text,"This is not a json file of anntations."),(e=this).span.clear(),e.entity.clear(),e.attribute.clear(),e.relation.clear(),e.namespace.clear(),this.sourceDoc=t.text,this.config=t.config;const{multitrack:i,hasError:n,rejects:r}=bt(this,t);this._editor.eventEmitter.emit("textae.annotationData.all.change",this,i,n,r)}toJson(){return{denotations:(t=this,t.entity.all.map(e=>{const i=t.span.get(e.span);return{id:e.id,span:{begin:i.begin,end:i.end},obj:e.typeName}})),attributes:xt(this),relations:wt(this)};var t}}(this),e=new class{constructor(t,e){this._annotationData=e,this._map=new Map(Tt.map(i=>[i,new Ct(t,i,e)])),this._map.forEach((t,e)=>{this[e]=t}),this.entity.isSamePredAttrributeSelected=t=>this.entity.all.some(e=>e.attributes.find(e=>e.pred===t)),this.entity.findSelectedWithSamePredicateAttribute=t=>this.entity.all.find(e=>e.attributes.find(e=>e.pred===t.pred));const i=new Map([["textae.annotationData.all.change",()=>this.clear()],["textae.annotationData.span.remove",t=>this.span.remove(Dt(t))],["textae.annotationData.entity.remove",t=>this.entity.remove(Dt(t))],["textae.annotationData.relation.remove",t=>this.relation.remove(Dt(t))]]);for(const e of i)t.on(e[0],e[1])}add(t,e){console.assert(this[t]),this[t].add(e)}get some(){return Array.from(this._map.values()).reduce((t,e)=>t||e.some,!1)}clear(){this._map.forEach(t=>t.clear())}selectSpan(t,e){t&&(e?this.span.add(t.id):this.selectSingleSpanById(t.id))}selectSingleSpanById(t){t&&(this.clear(),this.span.add(t))}selectSpanById(t){this.span.add(t)}toggleSpanById(t){this.span.toggle(t)}selectEntity(t,e){t&&(e||this.clear(),this.entity.add(t.title))}}(this.eventEmitter,t),i=new class{constructor(t){this._resetHistory(),this._eventEmitter=t}push(t){const e=new class{constructor(t){this.commands=t}get kinds(){return this.commands.reduce((t,e)=>new Set([...t,...e.kind]),new Set)}get hasCommands(){return this.commands&&this.commands.length>0}isExactly(t){const e=this.kinds;return e.has(t)&&1===e.size}}(t);this._histories.splice(this._pointer+1,this._histories.length-this._pointer,e),this._pointer++,e.kinds.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kinds.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger()}next(){this._pointer++;const t=this._histories[this._pointer];return t.kinds.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),t.kinds.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger(),t}prev(){const t=this._histories[this._pointer];return t.kinds.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._getPrevPrevCommandIndexOf("annotation_command")),t.kinds.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._getPrevPrevCommandIndexOf("configuration_command")),this._pointer--,this._trigger(),t}resetConfiguration(){this._removeConfigurationOperationsFromHistory(),this._pointerForConfiguration.reset(),this._trigger()}resetAllHistories(){this._resetHistory(),this._trigger()}annotatioSaved(){this._pointerForAnnotation.save(),this._trigger()}configurationSaved(){this._pointerForConfiguration.save(),this._trigger()}get hasAnythingToSaveAnnotation(){return this._pointerForAnnotation.hasAnythingToSave}get hasAnythingToSaveConfiguration(){return this._pointerForConfiguration.hasAnythingToSave}get hasAnythingToUndo(){return this._pointer>-1}get hasAnythingToRedo(){return this._pointer<this._histories.length-1}_getPrevPrevCommandIndexOf(t){const e=this._getPrevKindCommand(t);return void 0!==e?e:-1}_getPrevKindCommand(t){for(let e=this._pointer-1;e>=0;e--)if(this._histories[e].kinds.has(t))return e}_trigger(){this._eventEmitter.emit("textae.history.change",this)}_removeConfigurationOperationsFromHistory(){for(let t=0;t<this._histories.length;t++)this._histories[t].isExactly("configuration_command")&&(this._pointer--,this._histories.splice(t,1))}_resetHistory(){this._pointer=-1,this._histories=[],this._pointerForAnnotation=new At,this._pointerForConfiguration=new At}}(this.eventEmitter),n=new class{constructor(t){this._editor=t,this._urlOfLastRead={annotation:"",config:""},this._cursorChanger=new D(t),this._ajaxSender=new class{constructor(t,e,i){this.beforeSend=t,this.failHandler=e,this.finishHandler=i}post(t,e,i){N(t,e,this.beforeSend,i,this.failHandler,this.finishHandler)}patch(t,e,i){!function(t,e,i,n,r,s){if(T(t))return;i(),console.log("PATCH data",e),O("patch",t,e,n,()=>N(t,e,i,n,r,s),s)}(t,e,this.beforeSend,i,this.failHandler,this.finishHandler)}}(()=>this._cursorChanger.startWait(),()=>this._editor.eventEmitter.emit("textae.saveError"),()=>this._cursorChanger.endWait()),function(t,e){const i=t.eventEmitter;i.on("textae.saveAnnotationDialog.download.click",()=>i.emit("textae.annotation.save")).on("textae.saveAnnotationDialog.viewsource.click",()=>i.emit("textae.annotation.save")).on("textae.saveConfigurationDialog.download.click",()=>i.emit("textae.configuration.save"))}(t,this._ajaxSender)}get annotationUrl(){return this._urlOfLastRead.annotation}get configurationUrl(){return this._urlOfLastRead.config}set configurationUrl(t){this._urlOfLastRead.config=t}loadAnnotation(t){M(t,(e,i)=>{i&&i.text?(this._editor.eventEmitter.emit("textae.annotation.load","url",e,i,t),this._editor.eventEmitter.emit("textae.annotation.setUrl",t),this._urlOfLastRead.annotation=t):this._editor.eventEmitter.emit("textae.annotation.loadError","url",e)},this._cursorChanger)}loadConfigulation(t,e=null){M(t,(t,i)=>{this._editor.eventEmitter.emit("textae.configuration.load","url",t,i,e)},this._cursorChanger)}saveAnnotation(t,e){t&&function(t,e,i,n,r){e.post(i,n,()=>t.eventEmitter.emit(r))}(this._editor,this._ajaxSender,t,JSON.stringify(e),"textae.annotation.save")}saveConfiguration(t,e){t&&function(t,e,i,n,r){e.patch(i,n,()=>t.eventEmitter.emit(r))}(this._editor,this._ajaxSender,t,JSON.stringify(e),"textae.configuration.save")}}(this,ds),r=new class{constructor(t){this._observable=new Nt.a(!1);let e=!1;t.eventEmitter.on("textae.history.change",t=>{this._observable.set(e||t.hasAnythingToSaveAnnotation)}),t.eventEmitter.on("textae.annotation.save",()=>{this._observable.set(!1),e=!1}),t.eventEmitter.on("textae.annotationData.all.change",(t,i,n)=>{(i||n)&&(this._observable.set(!0),e=!0),this._observable.set(!1)})}bind(t){this._observable(t)}get hasChange(){return this._observable()}}(this);return r.bind(t=>this.eventEmitter.emit("textae.control.writeButton.transit",t)),function(t,e){t.eventEmitter.on("textae.annotation.save",()=>{e.annotatioSaved(),I.a.success("annotation saved")}).on("textae.configuration.save",()=>{e.configurationSaved(),I.a.success("configuration saved")}).on("textae.saveError",()=>{I.a.error("could not save")})}(this,i),function(t,e){t.eventEmitter.on("textae.annotationData.all.change",(t,i,n,r)=>{e.resetAllHistories(),n&&new uo(r).open()})}(this,i),this.api={start:s=>oo(s,n,i,t,e,r)},this},po=i(53),fo=function(t,e,i){!function(t,e){t[0].insertBefore(e.el,t[0].childNodes[0]),Object(po.a)(e.el),t.eventEmitter.on("textae.control.button.push",t=>e.updateButtonPushState(t.buttonName,t.state)).on("textae.control.buttons.change",t=>e.updateAllButtonEnableState(t)).on("textae.control.writeButton.transit",t=>e.transitWriteButtonImage(t))}(t,e),function(t,e){t[0].appendChild(e.el),t.eventEmitter.on("textae.control.button.push",t=>e.updateButtonPushState(t.buttonName,t.state)).on("textae.control.buttons.change",t=>e.updateAllButtonEnableState(t)).on("textae.editor.key.input",()=>e.hide()),window.addEventListener("click",t=>{3!==t.which&&e.hide()}),window.addEventListener("contextmenu",i=>{e.hide();const n=i.target.closest(".textae-editor");n===t[0]&&n.classList.contains("textae-editor--editable")&&(i.preventDefault(),e.show(i.pageY-t[0].offsetTop,i.pageX))})}(t,i),t.eventEmitter.on("textae.control.button.click",e=>t.api.handleButtonClick(e)),t.api.updateButtons()};const mo=new class{constructor(){var t;this._editors=new class{constructor(){this.editorList=[],this.selectedEditor=null}push(t){var e;Object.assign(t,{editorId:(e=this.editorList,"editor"+e.length)}),this.editorList.push(t),t[0].addEventListener("keyup",t=>function(t,e){t.selected&&"h"===e.key&&t.openHelpDialog()}(this,t))}get selected(){return this.selectedEditor}set selected(t){!function(t,e){for(const i of t)i!==e&&i.api.unselect();e.api.select()}(this.editorList,t),this.selectedEditor=t}unselect(t){this.selectedEditor===t&&(t.api.unselect(),this.selectedEditor=null)}redraw(){this.editorList.forEach(t=>t.api.redraw())}findByDom(t){return this.editorList.filter(e=>e[0]===t)[0]}openHelpDialog(){l.open()}},t=this._editors,window.addEventListener("resize",u()(()=>t.redraw(),500)),window.addEventListener("load",()=>{!function(t){document.body.addEventListener("focus",e=>{const i=t.findByDom(e.target.closest(".textae-editor"));!function(t,e){e&&(t.selected&&e[0]!==t.selected[0]&&t.unselect(t.selected),t.selected=e)}(t,i)},!0),document.body.addEventListener("click",e=>{null===e.target.closest(".textae-editor--dialog")&&null===e.target.closest(".ui-autocomplete")&&null===e.target.closest(".ui-widget-overlay")&&null===e.target.closest(".textae-editor__type-pallet__content")&&(t.findByDom(e.target.closest(".textae-editor"))||t.selected&&t.unselect(t.selected))})}(this._editors)})}registerEditor(t){var e;this._editors.push(t),e=t[0],new MutationObserver(m).observe(e,f)}};document.addEventListener("DOMContentLoaded",(function(){for(const t of document.querySelectorAll(".textae-editor")){const e=r()(t);ho.call(e),mo.registerEditor(e),e.api.start(e),fo(e,new S(e),new P(e))}}))}]);