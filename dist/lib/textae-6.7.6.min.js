(()=>{var e={6870:(e,t)=>{"use strict";function n(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:n(r,s),time:n(l,c),"date-time":n((function(e){const t=e.split(u);return 2===t.length&&r(t[0])&&l(t[1],!0)}),d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&p.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(f.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/},t.fastFormats={...t.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function r(e){const t=i.exec(e);if(!t)return!1;const n=+t[1],r=+t[2],s=+t[3];return r>=1&&r<=12&&s>=1&&s<=(2===r&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:o[r])}function s(e,t){if(e&&t)return e>t?1:e<t?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const n=a.exec(e);if(!n)return!1;const i=+n[1],o=+n[2],r=+n[3],s=n[5];return(i<=23&&o<=59&&r<=59||23===i&&59===o&&60===r)&&(!t||""!==s)}function c(e,t){if(!e||!t)return;const n=a.exec(e),i=a.exec(t);return n&&i?(e=n[1]+n[2]+n[3]+(n[4]||""))>(t=i[1]+i[2]+i[3]+(i[4]||""))?1:e<t?-1:0:void 0}const u=/t|\s/i;function d(e,t){if(!e||!t)return;const[n,i]=e.split(u),[o,r]=t.split(u),a=s(n,o);return void 0!==a?a||c(i,r):void 0}const h=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const f=/[^\\]\\Z/},5477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6870),o=n(7963),r=n(3487),s=new r.Name("fullFormats"),a=new r.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,i.fullFormats,s),e;const[n,r]="fast"===t.mode?[i.fastFormats,a]:[i.fullFormats,s];return c(e,t.formats||i.formatNames,n,r),t.keywords&&o.default(e),e};function c(e,t,n,i){var o,s;null!==(o=(s=e.opts.code).formats)&&void 0!==o||(s.formats=r._`require("ajv-formats/dist/formats").${i}`);for(const i of t)e.addFormat(i,n[i])}l.get=(e,t="full")=>{const n=("fast"===t?i.fastFormats:i.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n},t.default=l,e.exports=l,e.exports.default=l},7963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const i=n(2227),o=n(3487),r=o.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},a={message:({keyword:e,schemaCode:t})=>o.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>o._`{comparison: ${s[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:n,schemaCode:r,keyword:a,it:l}=e,{opts:c,self:u}=l;if(!c.validateFormats)return;const d=new i.default(l,u.RULES.all.format.definition,"format");function h(e){return o._`${e}.compare(${n}, ${r}) ${s[a].fail} 0`}d.$data?function(){const n=t.scopeValue("formats",{ref:u.formats,code:c.code.formats}),i=t.const("fmt",o._`${n}[${d.schemaCode}]`);e.fail$data(o.or(o._`typeof ${i} != "object"`,o._`${i} instanceof RegExp`,o._`typeof ${i}.compare != "function"`,h(i)))}():function(){const n=d.schema,i=u.formats[n];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error(`"${a}": format "${n}" does not define "compare" function`);const r=t.scopeValue("formats",{key:n,ref:i,code:c.code.formats?o._`${c.code.formats}${o.getProperty(n)}`:void 0});e.fail$data(h(r))}()},dependencies:["format"]};t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},1581:(e,t,n)=>{"use strict";n(2227).default;var i=n(3487);const o=n(7159),r=n(3924),s=n(278),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends o.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e)))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.ZP=c},7023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=i;class o extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function r(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)l(n,t[i]),n.push(e[++i]);return new o(n)}t._Code=o,t.nil=new o(""),t._=r;const s=new o("+");function a(e,...t){const n=[u(e[0])];let i=0;for(;i<t.length;)n.push(s),l(n,t[i]),n.push(s,u(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===s){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new o(n)}function l(e,t){var n;t instanceof o?e.push(...t._items):t instanceof i?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new o(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new o(`.${e}`):r`[${e}]`}},3487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const i=n(7023),o=n(8490);var r=n(7023);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=n(8490);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&"),ADD:new i._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?o.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,e,t)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof i.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=O(this.rhs,e,t),this}get names(){return D(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,n,i){super(e,n,i),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=O(this.code,e,t),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let i=n.length;for(;i--;){const o=n[i];o.optimizeNames(e,t)||(P(e,o.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>A(e,t.names)),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class _ extends g{}_.kind="else";class y extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new _(e):e}return t?!1===e?t instanceof y?t:t.nodes:this.nodes.length?this:new y(N(e),t instanceof y?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=O(this.condition,e,t),this}get names(){const e=super.names;return D(e,this.condition),this.else&&A(e,this.else.names),e}}y.kind="if";class b extends g{}b.kind="for";class x extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=O(this.iteration,e,t),this}get names(){return A(super.names,this.iteration.names)}}class w extends b{constructor(e,t,n,i){super(),this.varKind=e,this.name=t,this.from=n,this.to=i}render(e){const t=e.es5?o.varKinds.var:this.varKind,{name:n,from:i,to:r}=this;return`for(${t} ${n}=${i}; ${n}<${r}; ${n}++)`+super.render(e)}get names(){const e=D(super.names,this.from);return D(e,this.to)}}class k extends b{constructor(e,t,n,i){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=O(this.iterable,e,t),this}get names(){return A(super.names,this.iterable.names)}}class S extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}S.kind="func";class C extends m{render(e){return"return "+super.render(e)}}C.kind="return";class E extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,i;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&A(e,this.catch.names),this.finally&&A(e,this.finally.names),e}}class $ extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}$.kind="catch";class T extends g{render(e){return"finally"+super.render(e)}}T.kind="finally";function A(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function D(e,t){return t instanceof i._CodeOrName?A(e,t.names):e}function O(e,t,n){return e instanceof i.Name?r(e):(o=e)instanceof i._Code&&o._items.some((e=>e instanceof i.Name&&1===t[e.str]&&void 0!==n[e.str]))?new i._Code(e._items.reduce(((e,t)=>(t instanceof i.Name&&(t=r(t)),t instanceof i._Code?e.push(...t._items):e.push(t),e)),[])):e;var o;function r(e){const i=n[e.str];return void 0===i||1!==t[e.str]?e:(delete t[e.str],i)}}function P(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function N(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:i._`!${R(e)}`}t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new o.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,i){const o=this._scope.toName(t);return void 0!==n&&i&&(this._constants[o.str]=n),this._leafNode(new l(e,o,n)),o}const(e,t,n){return this._def(o.varKinds.const,e,t,n)}let(e,t,n){return this._def(o.varKinds.let,e,t,n)}var(e,t,n){return this._def(o.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,n){return this._leafNode(new u(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==i.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[n,o]of e)t.length>1&&t.push(","),t.push(n),(n!==o||this.opts.es5)&&(t.push(":"),i.addCodeArg(t,o));return t.push("}"),new i._Code(t)}if(e,t,n){if(this._blockNode(new y(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new y(e))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(y,_)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new x(e),t)}forRange(e,t,n,i,r=(this.opts.es5?o.varKinds.var:o.varKinds.let)){const s=this._scope.toName(e);return this._for(new w(r,s,t,n),(()=>i(s)))}forOf(e,t,n,r=o.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof i.Name?t:this.var("_arr",t);return this.forRange("_i",0,i._`${e}.length`,(t=>{this.var(s,i._`${e}[${t}]`),n(s)}))}return this._for(new k("of",r,s,t),(()=>n(s)))}forIn(e,t,n,r=(this.opts.es5?o.varKinds.var:o.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,i._`Object.keys(${t})`,n);const s=this._scope.toName(e);return this._for(new k("in",r,s,t),(()=>n(s)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new C;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new E;if(this._blockNode(i),this.code(e),t){const e=this.name("e");this._currNode=i.catch=new $(e),t(e)}return n&&(this._currNode=i.finally=new T,this.code(n)),this._endBlockNode($,T)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=i.nil,n,o){return this._blockNode(new S(e,t,n)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=N;const j=I(t.operators.AND);t.and=function(...e){return e.reduce(j)};const M=I(t.operators.OR);function I(e){return(t,n)=>t===i.nil?n:n===i.nil?t:i._`${R(t)} ${e} ${R(n)}`}function R(e){return e instanceof i.Name?e:i._`(${e})`}t.or=function(...e){return e.reduce(M)}},8490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const i=n(7023);class o extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var r;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(r=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof i.Name?e:this.name(e)}name(e){return new i.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=s;class a extends i.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=i._`.${new i.Name(t)}[${n}]`}}t.ValueScopeName=a;const l=i._`\n`;t.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:i.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(e),{prefix:o}=i,r=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[o];if(s){const e=s.get(r);if(e)return e}else s=this._values[o]=new Map;s.set(r,i);const a=this._scope[o]||(this._scope[o]=[]),l=a.length;return a[l]=t.ref,i.setValue(t,{property:o,itemIndex:l}),i}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return i._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,n,s={},a){let l=i.nil;for(const c in e){const u=e[c];if(!u)continue;const d=s[c]=s[c]||new Map;u.forEach((e=>{if(d.has(e))return;d.set(e,r.Started);let s=n(e);if(s){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=i._`${l}${n} ${e} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(e)))throw new o(e);l=i._`${l}${s}${this.opts._n}`}d.set(e,r.Completed)}))}return l}}},2227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=void 0;const i=n(453),o=n(6776),r=n(4181),s=n(3487),a=n(2141),l=n(4069);t.default=class{constructor(e,t,n){if(function({schema:e,opts:t,self:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const r=i.dependencies;if(null==r?void 0:r.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${r.join(",")}`);if(i.validateSchema){if(!i.validateSchema(e[o])){const e="keyword value is invalid: "+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}}(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=o.schemaRefOrVal(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",d(this.$data,e));else if(this.schemaCode=this.schemaValue,!function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))}(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",a.default.errors))}result(e,t,n){this.gen.if(s.not(e)),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.result(e,void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(s._`${t} !== undefined && (${s.or(this.invalid$data(),e)})`)}error(e){(e?r.reportExtraError:r.reportError)(this,this.def.error)}$dataError(){r.reportError(this,this.def.$dataError||r.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');r.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=s.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=s.nil,t=s.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:o,def:r}=this;n.if(s.or(s._`${i} === undefined`,t)),e!==s.nil&&n.assign(e,!0),(o.length||r.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==s.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:o,it:r}=this;return s.or(function(){if(n.length){if(!(t instanceof s.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return s._`${i.checkDataTypes(e,t,r.opts.strict,i.DataType.Wrong)}`}return s.nil}(),function(){if(o.validateSchema){const n=e.scopeValue("validate$data",{ref:o.validateSchema});return s._`!${n}(${t})`}return s.nil}())}subschema(e,t){return l.applySubschema(this.it,e,t)}mergeEvaluated(e,t){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=o.mergeEvaluated.props(i,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=o.mergeEvaluated.items(i,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(t,(()=>this.mergeEvaluated(e,s.Name))),!0}};const c=/^\/(?:[^~]|~0|~1)*$/,u=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function d(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let r,l;if(""===e)return a.default.rootData;if("/"===e[0]){if(!c.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);r=e,l=a.default.rootData}else{const o=u.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const s=+o[1];if(r=o[2],"#"===r){if(s>=t)throw new Error(p("property/index",s));return i[t-s]}if(s>t)throw new Error(p("data",s));if(l=n[t-s],!r)return l}let d=l;const h=r.split("/");for(const e of h)e&&(l=s._`${l}${s.getProperty(o.unescapeJsonPointer(e))}`,d=s._`${d} && ${l}`);return d;function p(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=d},8727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=void 0;const i=n(2531);class o extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.ValidationError=o;class r extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=i.resolveUrl(e,t),this.missingSchema=i.normalizeId(i.getFullPath(this.missingRef))}}t.MissingRefError=r,e.exports={ValidationError:o,MissingRefError:r}},4181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const i=n(3487),o=n(2141);function r(e,t){const n=e.const("err",t);e.if(i._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,i._`[${n}]`)),i._`${o.default.vErrors}.push(${n})`),e.code(i._`${o.default.errors}++`)}function s(e,t){const{gen:n,validateName:o,schemaEnv:r}=e;r.$async?n.throw(i._`new ${e.ValidationError}(${t})`):(n.assign(i._`${o}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>i.str`should pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?i.str`"${e}" keyword must be ${t} ($data)`:i.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,o){const{it:a}=e,{gen:c,compositeRule:u,allErrors:d}=a,h=l(e,n);(null!=o?o:u||d)?r(c,h):s(a,i._`[${h}]`)},t.reportExtraError=function(e,n=t.keywordError){const{it:i}=e,{gen:a,compositeRule:c,allErrors:u}=i;r(a,l(e,n)),c||u||s(i,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(i._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(i._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:r,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,o.default.errors,(s=>{e.const(l,i._`${o.default.vErrors}[${s}]`),e.if(i._`${l}.dataPath === undefined`,(()=>e.assign(i._`${l}.dataPath`,i.strConcat(o.default.dataPath,a.errorPath)))),e.assign(i._`${l}.schemaPath`,i.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(i._`${l}.schema`,n),e.assign(i._`${l}.data`,r))}))};const a={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema"),instancePath:new i.Name("instancePath")};function l(e,t){const{createErrors:n,opts:o}=e.it;return!1===n?i._`{}`:(o.jtd&&!o.ajvErrors?c:u)(e,t)}function c(e,{message:t}){const{gen:n,keyword:r,it:s}=e,{errorPath:l,errSchemaPath:c,opts:u}=s,d=[[a.instancePath,i.strConcat(o.default.dataPath,l)],[a.schemaPath,i.str`${c}/${r}`]];return u.messages&&d.push([a.message,"function"==typeof t?t(e):t]),n.object(...d)}function u(e,t){const{gen:n,keyword:r,data:s,schemaValue:l,it:c}=e,{topSchemaRef:u,schemaPath:d,errorPath:h,errSchemaPath:p,propertyName:f,opts:m}=c,{params:g,message:v}=t,_=[[a.keyword,r],[o.default.dataPath,i.strConcat(o.default.dataPath,h)],[a.schemaPath,i.str`${p}/${r}`],[a.params,"function"==typeof g?g(e):g||i._`{}`]];return f&&_.push([a.propertyName,f]),m.messages&&_.push([a.message,"function"==typeof v?v(e):v]),m.verbose&&_.push([a.schema,l],[a.parentSchema,i._`${u}${d}`],[o.default.data,s]),n.object(..._)}},5173:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const i=n(3487),o=n(8727),r=n(2141),s=n(2531),a=n(6776),l=n(4815),c=n(540);class u{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:s.normalizeId(null==n?void 0:n.$id),this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function d(e){const t=p.call(this,e);if(t)return t;const n=s.getFullPath(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,d=new i.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let h;e.$async&&(h=d.scopeValue("Error",{ref:o.ValidationError,code:i._`require("ajv/dist/compile/error_classes").ValidationError`}));const f=d.scopeName("validate");e.validateName=f;const m={gen:d,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:d.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:i.stringify(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:i.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:i._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),l.validateFunctionCode(m),d.optimize(this.opts.code.optimize);const t=d.toString();g=`${d.scopeRefs(r.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${r.default.self}`,`${r.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:f,validateCode:t,scopeValues:d._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof i.Name?void 0:e,items:t instanceof i.Name?void 0:t,dynamicProps:e instanceof i.Name,dynamicItems:t instanceof i.Name},n.source&&(n.source.evaluated=i.stringify(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return s.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function p(e){for(const i of this._compilations)if(n=e,(t=i).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return i;var t,n}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||m.call(this,e,t)}function m(e,t){const n=c.parse(t),i=s._getFullPath(n);let o=s.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&i===o)return v.call(this,n,e);const r=s.normalizeId(i),a=this.refs[r]||this.schemas[r];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return v.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||d.call(this,a),r===s.normalizeId(t)){const{schema:t}=a;return t.$id&&(o=s.resolveUrl(o,t.$id)),new u({schema:t,root:e,baseId:o})}return v.call(this,n,a)}}t.SchemaEnv=u,t.compileSchema=d,t.resolveRef=function(e,t,n){var i;n=s.resolveUrl(t,n);const o=e.refs[n];if(o)return o;let r=f.call(this,e,n);if(void 0===r){const o=null===(i=e.localRefs)||void 0===i?void 0:i[n];o&&(r=new u({schema:o,root:e,baseId:t}))}return void 0!==r?e.refs[n]=h.call(this,r):void 0},t.getCompilingSchema=p,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(e,{baseId:t,schema:n,root:i}){var o;if("/"!==(null===(o=e.fragment)||void 0===o?void 0:o[0]))return;for(const i of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;if(void 0===(n=n[a.unescapeFragment(i)]))return;!g.has(i)&&"object"==typeof n&&n.$id&&(t=s.resolveUrl(t,n.$id))}let r;if("boolean"!=typeof n&&n.$ref&&!a.schemaHasRulesButRef(n,this.RULES)){const e=s.resolveUrl(t,n.$ref);r=m.call(this,i,e)}return r=r||new u({schema:n,root:i,baseId:t}),r.schema!==r.root.schema?r:void 0}},2141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={data:new i.Name("data"),valCxt:new i.Name("valCxt"),dataPath:new i.Name("dataPath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};t.default=o},2531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const i=n(6776),o=n(4063),r=n(9461),s=n(540),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&u(e)<=t)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(l.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function u(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&i.eachItem(e[n],(e=>t+=u(e))),t===1/0))return 1/0}return t}function d(e="",t){!1!==t&&(e=f(e));return h(s.parse(e))}function h(e){return s.serialize(e).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=h;const p=/#\/?$/;function f(e){return e?e.replace(p,""):""}t.normalizeId=f,t.resolveUrl=function(e,t){return t=f(t),s.resolve(e,t)};const m=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const t=f(e.$id),n={"":t},i=d(t,!1),a={},l=new Set;return r(e,{allKeys:!0},((e,t,o,r)=>{if(void 0===r)return;const d=i+t;let h=n[r];function p(t){if(t=f(h?s.resolve(h,t):t),l.has(t))throw u(t);l.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?c(e,n.schema,t):t!==f(d)&&("#"===t[0]?(c(e,a[t],t),a[t]=e):this.refs[t]=d),t}function g(e){if("string"==typeof e){if(!m.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e.$id&&(h=p.call(this,e.$id)),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),n[t]=h})),a;function c(e,t,n){if(void 0!==t&&!o(e,t))throw u(n)}function u(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},3141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},4069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applySubschema=t.Type=void 0;const i=n(4815),o=n(6776),r=n(3487);var s;!function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(s=t.Type||(t.Type={})),t.applySubschema=function(e,t,n){const a=function(e,{keyword:t,schemaProp:n,schema:i,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===n?{schema:i,schemaPath:r._`${e.schemaPath}${r.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[n],schemaPath:r._`${e.schemaPath}${r.getProperty(t)}${r.getProperty(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${o.escapeFragment(n)}`}}if(void 0!==i){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}(e,t);!function(e,t,{dataProp:n,dataPropType:i,data:a,dataTypes:l,propertyName:c}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(void 0!==n){const{errorPath:a,dataPathArr:l,opts:c}=t;d(u.let("data",r._`${t.data}${r.getProperty(n)}`,!0)),e.errorPath=r.str`${a}${function(e,t,n){if(e instanceof r.Name){const i=t===s.Num;return n?i?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:i?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?r.getProperty(e).toString():"/"+o.escapeJsonPointer(e)}(n,i,c.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...l,e.parentDataProperty]}if(void 0!==a){d(a instanceof r.Name?a:u.let("data",a,!0)),void 0!==c&&(e.propertyName=c)}l&&(e.dataTypes=l);function d(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}}(a,e,t),function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:o,allErrors:r}){void 0!==i&&(e.compositeRule=i);void 0!==o&&(e.createErrors=o);void 0!==r&&(e.allErrors=r);e.jtdDiscriminator=t,e.jtdMetadata=n}(a,t);const l={...e,...a,items:void 0,props:void 0};return i.subschemaCode(l,n),l}},4776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.length;let n,i=0,o=0;for(;o<t;)i++,n=e.charCodeAt(o++),n>=55296&&n<=56319&&o<t&&(n=e.charCodeAt(o),56320==(64512&n)&&o++);return i}},6776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.func=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const i=n(3487),o=n(4815);function r(e,t=e.schema){const{opts:n,self:i}=e;if(!n.strict)return;if("boolean"==typeof t)return;const r=i.RULES.keywords;for(const n in t)r[n]||o.checkStrictMode(e,`unknown keyword: "${n}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:o}){return(r,s,a,l)=>{const c=void 0===a?s:a instanceof i.Name?(s instanceof i.Name?e(r,s,a):t(r,s,a),a):s instanceof i.Name?(t(r,a,s),s):n(s,a);return l!==i.Name||c instanceof i.Name?c:o(r,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",i._`{}`);return void 0!==t&&d(e,n,t),n}function d(e,t,n){Object.keys(n).forEach((n=>e.assign(i._`${t}${i.getProperty(n)}`,!0)))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(r(e,t),!s(t,e.self.RULES.all))},t.checkUnknownRules=r,t.schemaHasRules=s,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,o,r){if(!r){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${e}${t}${i.getProperty(o)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>{e.if(i._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.code(i._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,i._`${n} || {}`),d(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,i._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>e.assign(n,!0===t||i._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=d,t.func=function(e,t){return e.scopeValue("func",{ref:t,code:t.code})}},8876:(e,t)=>{"use strict";function n(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},i){const o=t.RULES.types[i];return o&&!0!==o&&n(e,o)},t.shouldUseGroup=n,t.shouldUseRule=i},5667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const i=n(4181),o=n(3487),r=n(2141),s={message:"boolean schema is false"};function a(e,t){const{gen:n,data:o}=e,r={gen:n,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};i.reportError(r,s,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:i}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(r.default.data):(t.assign(o._`${i}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:i}=e;!1===i?(n.var(t,!1),a(e)):n.var(t,!0)}},453:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const i=n(3141),o=n(8876),r=n(4181),s=n(3487),a=n(6776);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(i.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:i,opts:r}=e,a=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,r.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&o.schemaHasRulesForType(e,t[0]));if(c){const o=h(t,i,r.strict,l.Wrong);n.if(o,(()=>{a.length?function(e,t,n){const{gen:i,data:o,opts:r}=e,a=i.let("dataType",s._`typeof ${o}`),l=i.let("coerced",s._`undefined`);"array"===r.coerceTypes&&i.if(s._`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,(()=>i.assign(o,s._`${o}[0]`).assign(a,s._`typeof ${o}`).if(h(t,o,r.strict),(()=>i.assign(l,o)))));i.if(s._`${l} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===r.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void i.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${o}`).elseIf(s._`${o} === null`).assign(l,s._`""`);case"number":return void i.elseIf(s._`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(l,s._`+${o}`);case"integer":return void i.elseIf(s._`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,s._`+${o}`);case"boolean":return void i.elseIf(s._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf(s._`${o} === "true" || ${o} === 1`).assign(l,!0);case"null":return i.elseIf(s._`${o} === "" || ${o} === 0 || ${o} === false`),void i.assign(l,null);case"array":i.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(l,s._`[${o}]`)}}i.else(),f(e),i.endIf(),i.if(s._`${l} !== undefined`,(()=>{i.assign(o,l),function({gen:e,parentData:t,parentDataProperty:n},i){e.if(s._`${t} !== undefined`,(()=>e.assign(s._`${t}[${n}]`,i)))}(e,l)}))}(e,t,a):f(e)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function d(e,t,n,i=l.Correct){const o=i===l.Correct?s.operators.EQ:s.operators.NEQ;let r;switch(e){case"null":return s._`${t} ${o} null`;case"array":r=s._`Array.isArray(${t})`;break;case"object":r=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":r=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":r=a();break;default:return s._`typeof ${t} ${o} ${e}`}return i===l.Correct?r:s.not(r);function a(e=s.nil){return s.and(s._`typeof ${t} == "number"`,e,n?s._`isFinite(${t})`:s.nil)}}function h(e,t,n,i){if(1===e.length)return d(e[0],t,n,i);let o;const r=a.toHash(e);if(r.array&&r.object){const e=s._`typeof ${t} != "object"`;o=r.null?e:s._`!${t} || ${e}`,delete r.null,delete r.array,delete r.object}else o=s.nil;r.number&&delete r.integer;for(const e in r)o=s.and(o,d(e,t,n,i));return o}t.checkDataType=d,t.checkDataTypes=h;const p={message:({schema:e})=>s.str`should be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:n,schema:i}=e,o=a.schemaRefOrVal(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:o,schemaValue:o,parentSchema:i,params:{},it:e}}(e);r.reportError(t,p)}t.reportTypeError=f},313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const i=n(3487),o=n(4815);function r(e,t,n){const{gen:r,compositeRule:s,data:a,opts:l}=e;if(void 0===n)return;const c=i._`${a}${i.getProperty(t)}`;if(s)return void o.checkStrictMode(e,`default is ignored for: ${c}`);let u=i._`${c} === undefined`;"empty"===l.useDefaults&&(u=i._`${u} || ${c} === null || ${c} === ""`),r.if(u,i._`${c} = ${i.stringify(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:i}=e.schema;if("object"===t&&n)for(const t in n)r(e,t,n[t].default);else"array"===t&&Array.isArray(i)&&i.forEach(((t,n)=>r(e,n,t.default)))}},4815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.schemaCxtHasRules=t.subschemaCode=t.validateFunctionCode=void 0;const i=n(5667),o=n(453),r=n(7449),s=n(3487),a=n(2141),l=n(2531),c=n(6776);function u({gen:e,validateName:t,schema:n,schemaEnv:i,opts:o},r){o.code.es5?e.func(t,s._`${a.default.data}, ${a.default.valCxt}`,i.$async,(()=>{e.code(s._`"use strict"; ${d(n,o)}`),function(e,t){e.if(a.default.valCxt,(()=>{e.var(a.default.dataPath,s._`${a.default.valCxt}.${a.default.dataPath}`),e.var(a.default.parentData,s._`${a.default.valCxt}.${a.default.parentData}`),e.var(a.default.parentDataProperty,s._`${a.default.valCxt}.${a.default.parentDataProperty}`),e.var(a.default.rootData,s._`${a.default.valCxt}.${a.default.rootData}`),t.dynamicRef&&e.var(a.default.dynamicAnchors,s._`${a.default.valCxt}.${a.default.dynamicAnchors}`)}),(()=>{e.var(a.default.dataPath,s._`""`),e.var(a.default.parentData,s._`undefined`),e.var(a.default.parentDataProperty,s._`undefined`),e.var(a.default.rootData,a.default.data),t.dynamicRef&&e.var(a.default.dynamicAnchors,s._`{}`)}))}(e,o),e.code(r)})):e.func(t,s._`${a.default.data}, ${function(e){return s._`{${a.default.dataPath}="", ${a.default.parentData}, ${a.default.parentDataProperty}, ${a.default.rootData}=${a.default.data}${e.dynamicRef?s._`, ${a.default.dynamicAnchors}={}`:s.nil}}={}`}(o)}`,i.$async,(()=>e.code(d(n,o)).code(r)))}function d(e,t){return"object"==typeof e&&e.$id&&(t.code.source||t.code.process)?s._`/*# sourceURL=${e.$id} */`:s.nil}function h({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function p(e){return"boolean"!=typeof e.schema}function f(e){c.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:n,opts:i,self:o}=e;t.$ref&&i.ignoreKeywordsWithRef&&c.schemaHasRulesButRef(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function m(e,t){if(e.opts.jtd)return r.schemaKeywords(e,[],!1,t);const n=o.getSchemaTypes(e.schema),i=o.coerceAndCheckDataType(e,n);r.schemaKeywords(e,n,!i,t)}function g({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:o}){const r=n.$comment;if(!0===o.$comment)e.code(s._`${a.default.self}.logger.log(${r})`);else if("function"==typeof o.$comment){const n=s.str`${i}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code(s._`${a.default.self}.opts.$comment(${r}, ${n}, ${o}.schema)`)}}function v(e,t,n=e.opts.strict){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.validateFunctionCode=function(e){p(e)&&(f(e),h(e))?function(e){const{schema:t,opts:n,gen:i}=e;u(e,(()=>{n.$comment&&t.$comment&&g(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strict&&v(e,"default is ignored in the schema root")}(e),i.let(a.default.vErrors,null),i.let(a.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",s._`${n}.evaluated`),t.if(s._`${e.evaluated}.dynamicProps`,(()=>t.assign(s._`${e.evaluated}.props`,s._`undefined`))),t.if(s._`${e.evaluated}.dynamicItems`,(()=>t.assign(s._`${e.evaluated}.items`,s._`undefined`)))}(e),m(e),function(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:o,opts:r}=e;n.$async?t.if(s._`${a.default.errors} === 0`,(()=>t.return(a.default.data)),(()=>t.throw(s._`new ${o}(${a.default.vErrors})`))):(t.assign(s._`${i}.errors`,a.default.vErrors),r.unevaluated&&function({gen:e,evaluated:t,props:n,items:i}){n instanceof s.Name&&e.assign(s._`${t}.props`,n);i instanceof s.Name&&e.assign(s._`${t}.items`,i)}(e),t.return(s._`${a.default.errors} === 0`))}(e)}))}(e):u(e,(()=>i.topBoolOrEmptySchema(e)))},t.subschemaCode=function(e,t){p(e)&&(f(e),h(e))?function(e,t){const{schema:n,gen:i,opts:o}=e;o.$comment&&n.$comment&&g(e);(function(e){e.schema.$id&&(e.baseId=l.resolveUrl(e.baseId,e.schema.$id))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const r=i.const("_errs",a.default.errors);m(e,r),i.var(t,s._`${r} === ${a.default.errors}`)}(e,t):i.boolOrEmptySchema(e,t)},t.schemaCxtHasRules=h,t.checkStrictMode=v},7449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schemaKeywords=void 0;const i=n(8876),o=n(453),r=n(313),s=n(5005),a=n(6776),l=n(4815),c=n(3487),u=n(2141);function d(e,t){const{gen:n,schema:o,opts:{useDefaults:a}}=e;a&&r.assignDefaults(e,t.type),n.block((()=>{for(const n of t.rules)i.shouldUseRule(o,n)&&s.keywordCode(e,n.keyword,n.definition,t.type)}))}function h(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function p(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function f(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,l.checkStrictMode(e,t,e.opts.strictTypes)}t.schemaKeywords=function(e,t,n,r){const{gen:l,schema:m,data:g,allErrors:v,opts:_,self:y}=e,{RULES:b}=y;function x(s){i.shouldUseGroup(m,s)&&(s.type?(l.if(o.checkDataType(s.type,g,_.strict)),d(e,s),1===t.length&&t[0]===s.type&&n&&(l.else(),o.reportTypeError(e)),l.endIf()):d(e,s),v||l.if(c._`${u.default.errors} === ${r||0}`))}!m.$ref||!_.ignoreKeywordsWithRef&&a.schemaHasRulesButRef(m,b)?(_.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{p(e.dataTypes,t)||f(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>p(t,e)))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&f(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const o in n){const r=n[o];if("object"==typeof r&&i.shouldUseRule(e.schema,r)){const{type:n}=r.definition;n.length&&!n.some((e=>h(t,e)))&&f(e,`missing type "${n.join(",")}" for keyword "${o}"`)}}}(e,e.dataTypes)}(e,t),l.block((()=>{for(const e of b.rules)x(e);x(b.post)}))):l.block((()=>s.keywordCode(e,"$ref",b.all.$ref.definition)))}},5005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keywordCode=void 0;const i=n(2227),o=n(4181),r=n(412),s=n(3487),a=n(2141);function l(e,t){var n;const{gen:i,keyword:l,schema:d,parentSchema:h,$data:p,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!p&&t.compile?t.compile.call(f.self,d,h,f):t.validate,g=u(i,l,m),v=i.let("valid");function _(n=(t.async?s._`await `:s.nil)){const o=f.opts.passContext?a.default.this:a.default.self,l=!("compile"in t&&!p||!1===t.schema);i.assign(v,s._`${n}${r.callValidateCode(e,g,o,l)}`,t.modifying)}function y(e){var n;i.if(s.not(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,(function(){if(!1===t.errors)_(),t.modifying&&c(e),y((()=>e.error()));else{const n=t.async?function(){const e=i.let("ruleErrs",null);return i.try((()=>_(s._`await `)),(t=>i.assign(v,!1).if(s._`${t} instanceof ${f.ValidationError}`,(()=>i.assign(e,s._`${t}.errors`)),(()=>i.throw(t))))),e}():function(){const e=s._`${g}.errors`;return i.assign(e,null),_(s.nil),e}();t.modifying&&c(e),y((()=>function(e,t){const{gen:n}=e;n.if(s._`Array.isArray(${t})`,(()=>{n.assign(a.default.vErrors,s._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`).assign(a.default.errors,s._`${a.default.vErrors}.length`),o.extendErrors(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)}function c(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,(()=>t.assign(n,s._`${i.parentData}[${i.parentDataProperty}]`)))}function u(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:s.stringify(n)})}t.keywordCode=function(e,t,n,o){const r=new i.default(e,n,t);"code"in n?n.code(r,o):r.$data&&n.validate?l(r,n):"macro"in n?function(e,t){const{gen:n,keyword:i,schema:o,parentSchema:r,it:a}=e,l=t.macro.call(a.self,o,r,a),c=u(n,i,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const d=n.name("valid");e.subschema({schema:l,schemaPath:s.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,(()=>e.error(!0)))}(r,n):(n.compile||n.validate)&&l(r,n)}},7159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const i=n(2227);t.KeywordCxt=i.default;var o=n(3487);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return o.CodeGen}});const r=n(8727),s=n(3141),a=n(5173),l=n(3487),c=n(2531),u=n(453),d=n(6776),h=n(2228),p=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function v(e){var t,n,i,o,r,s,a,l,c,u,d,h;const p=null===(t=e.strict)||void 0===t||t,f=!!p&&"log",m=null===(n=e.code)||void 0===n?void 0:n.optimize,g=!0===m||void 0===m?1:m||0;return{strict:p,strictTypes:null!==(i=e.strictTypes)&&void 0!==i?i:f,strictTuples:null!==(o=e.strictTuples)&&void 0!==o?o:f,code:e.code?{...e.code,optimize:g}:{optimize:g},loopRequired:null!==(r=e.loopRequired)&&void 0!==r?r:1/0,loopEnum:null!==(s=e.loopEnum)&&void 0!==s?s:1/0,meta:null===(a=e.meta)||void 0===a||a,messages:null===(l=e.messages)||void 0===l||l,inlineRefs:null===(c=e.inlineRefs)||void 0===c||c,addUsedSchema:null===(u=e.addUsedSchema)||void 0===u||u,validateSchema:null===(d=e.validateSchema)||void 0===d||d,validateFormats:null===(h=e.validateFormats)||void 0===h||h}}class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...v(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:f,es5:t,lines:n}),this.logger=function(e){if(!1===e)return C;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const i=e.validateFormats;e.validateFormats=!1,this.RULES=s.getRules(),y.call(this,m,e,"NOT SUPPORTED"),y.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=S.call(this),e.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&k.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t}=this.opts;t&&e&&this.addMetaSchema(h,h.$id,!1)}defaultMeta(){const{meta:e}=this.opts;return this.opts.defaultMeta="object"==typeof e?e.$id||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const i=n(t);return"$async"in n||(this.errors=n.errors),i}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,e,t);async function i(e,t){await o.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||s.call(this,n)}async function o(e){e&&!this.getSchema(e)&&await i.call(this,{$ref:e},!0)}async function s(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof r.MissingRefError))throw t;return a.call(this,t),await l.call(this,t.missingSchema),s.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await o.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,i);return this}let o;if("object"==typeof e&&(o=e.$id,void 0!==o&&"string"!=typeof o))throw new Error("schema id must be string");return t=c.normalizeId(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,i,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,e);if(!i&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return i}getSchema(e){let t;for(;"string"==typeof(t=b.call(this,e));)e=t;if(void 0===t){const n=new a.SchemaEnv({schema:{}});if(t=a.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=b.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e.$id;return n&&(n=c.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if($.call(this,n,t),!t)return d.eachItem(n,(e=>T.call(this,e))),this;D.call(this,t);const i={...t,type:u.getJSONTypes(t.type),schemaType:u.getJSONTypes(t.schemaType)};return d.eachItem(n,0===i.type.length?e=>T.call(this,e,i):e=>i.type.forEach((t=>T.call(this,e,i,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.dataPath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const i of t){const t=i.split("/").slice(1);let o=e;for(const e of t)o=o[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:i}=t.definition,r=o[e];i&&r&&(o[e]=P(r))}}return e}_removeAllSchemas(e,t){for(const n in e){const i=e[n];t&&!t.test(n)||("string"==typeof i?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,t,n=this.opts.validateSchema,i=this.opts.addUsedSchema){if("object"!=typeof e){if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let o=this._cache.get(e);if(void 0!==o)return o;const r=c.getSchemaRefs.call(this,e);o=new a.SchemaEnv({schema:e,meta:t,localRefs:r}),this._cache.set(o.schema,o);const s=o.baseId;return i&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=o),n&&this.validateSchema(e,!0),o}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}function y(e,t,n,i="error"){for(const o in e){const r=o;r in t&&this.logger[i](`${n}: option ${o}. ${e[r]}`)}}function b(e){return e=c.normalizeId(e),this.schemas[e]||this.refs[e]}function x(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function w(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function S(){const e={...this.opts};for(const t of p)delete e[t];return e}t.default=_,_.ValidationError=r.ValidationError,_.MissingRefError=r.MissingRefError;const C={log(){},warn(){},error(){}};const E=/^[a-z_$][a-z0-9_$:-]*$/i;function $(e,t){const{RULES:n}=this;if(d.eachItem(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!E.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function T(e,t,n){var i;const o=null==t?void 0:t.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:r}=this;let s=o?r.post:r.rules.find((({type:e})=>e===n));if(s||(s={type:n,rules:[]},r.rules.push(s)),r.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:u.getJSONTypes(t.type),schemaType:u.getJSONTypes(t.schemaType)}};t.before?A.call(this,s,a,t.before):s.rules.push(a),r.all[e]=a,null===(i=t.implements)||void 0===i||i.forEach((e=>this.addKeyword(e)))}function A(e,t,n){const i=e.rules.findIndex((e=>e.keyword===n));i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function D(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=P(t)),e.validateSchema=this.compile(t,!0))}const O={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function P(e){return{anyOf:[e,O]}}},2228:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},278:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},4783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4069),r=n(6776),s=n(4815),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`should NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e,{items:u}=a;if(!Array.isArray(u))return void s.checkStrictMode(c,'"additionalItems" is ignored when "items" is not an array of schemas');c.items=!0;const d=t.const("len",i._`${l}.length`);if(!1===n)e.setParams({len:u.length}),e.pass(i._`${d} <= ${u.length}`);else if("object"==typeof n&&!r.alwaysValidSchema(c,n)){const n=t.var("valid",i._`${d} <= ${u.length}`);t.if(i.not(n),(()=>function(n){t.forRange("i",u.length,d,(r=>{e.subschema({keyword:"additionalItems",dataProp:r,dataPropType:o.Type.Num},n),c.allErrors||t.if(i.not(n),(()=>t.break()))}))}(n))),e.ok(n)}}};t.default=a},9351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),r=n(2141),s=n(4069),a=n(6776),l={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:e})=>o._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:l,data:c,errsCount:u,it:d}=e;if(!u)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,"all"!==p.removeAdditional&&a.alwaysValidSchema(d,n))return;const f=i.allSchemaProperties(l.properties),m=i.allSchemaProperties(l.patternProperties);function g(e){t.code(o._`delete ${c}[${e}]`)}function v(i){if("all"===p.removeAdditional||p.removeAdditional&&!1===n)g(i);else{if(!1===n)return e.setParams({additionalProperty:i}),e.error(),void(h||t.break());if("object"==typeof n&&!a.alwaysValidSchema(d,n)){const n=t.name("valid");"failing"===p.removeAdditional?(_(i,n,!1),t.if(o.not(n),(()=>{e.reset(),g(i)}))):(_(i,n),h||t.if(o.not(n),(()=>t.break())))}}}function _(t,n,i){const o={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===i&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,n)}t.forIn("key",c,(e=>{f.length||m.length?t.if(function(e){let n;if(f.length>8){const o=a.schemaRefOrVal(d,l.properties,"properties");n=i.isOwnProperty(t,o,e)}else n=f.length?o.or(...f.map((t=>o._`${e} === ${t}`))):o.nil;return m.length&&(n=o.or(n,...m.map((n=>o._`${i.usePattern(t,n)}.test(${e})`)))),o.not(n)}(e),(()=>v(e))):v(e)})),e.ok(o._`${u} === ${r.default.errors}`)}};t.default=l},1125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),o={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const r=t.name("valid");n.forEach(((t,n)=>{if(i.alwaysValidSchema(o,t))return;const s=e.subschema({keyword:"allOf",schemaProp:n},r);e.ok(r),e.mergeEvaluated(s)}))}};t.default=o},19:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(412).validateUnion,error:{message:"should match some schema in anyOf"}};t.default=i},9864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4069),r=n(6776),s=n(4815),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?i.str`should contain at least ${e} valid item(s)`:i.str`should contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?i._`{minContains: ${e}}`:i._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;let u,d;const{minContains:h,maxContains:p}=a;c.opts.next?(u=void 0===h?1:h,d=p):u=1;const f=t.const("len",i._`${l}.length`);if(e.setParams({min:u,max:d}),void 0===d&&0===u)return void s.checkStrictMode(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==d&&u>d)return s.checkStrictMode(c,'"minContains" > "maxContains" is always invalid'),void e.fail();if(r.alwaysValidSchema(c,n)){let t=i._`${f} >= ${u}`;return void 0!==d&&(t=i._`${t} && ${f} <= ${d}`),void e.pass(t)}c.items=!0;const m=t.name("valid");if(void 0===d&&1===u)g(m,(()=>t.if(m,(()=>t.break()))));else{t.let(m,!1);const e=t.name("_valid"),n=t.let("count",0);g(e,(()=>t.if(e,(()=>function(e){t.code(i._`${e}++`),void 0===d?t.if(i._`${e} >= ${u}`,(()=>t.assign(m,!0).break())):(t.if(i._`${e} > ${d}`,(()=>t.assign(m,!1).break())),1===u?t.assign(m,!0):t.if(i._`${e} >= ${u}`,(()=>t.assign(m,!0))))}(n)))))}function g(n,i){t.forRange("i",0,f,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:o.Type.Num,compositeRule:!0},n),i()}))}e.result(m,(()=>e.reset()))}};t.default=a},7772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const i=n(3487),o=n(6776),r=n(412);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const o=1===t?"property":"properties";return i.str`should have ${o} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:o}})=>i._`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${n}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const i in e){if("__proto__"===i)continue;(Array.isArray(e[i])?t:n)[i]=e[i]}return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:o,it:s}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=r.propertyInData(n,o,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?n.if(u,(()=>{for(const t of c)r.checkReportMissingProp(e,t)})):(n.if(i._`${u} && (${r.checkMissingProp(e,c,a)})`),r.reportMissingProp(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:i,keyword:s,it:a}=e,l=n.name("valid");for(const c in t)o.alwaysValidSchema(a,t[c])||(n.if(r.propertyInData(n,i,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=s},9434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),r=n(4815),s={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>i.str`should match "${e.ifClause}" schema`,params:({params:e})=>i._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&r.checkStrictMode(o,'"if" without "then" and "else" is ignored');const s=a(o,"then"),l=a(o,"else");if(!s&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),s&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,d("then",n),d("else",n))}else s?t.if(u,d("then")):t.if(i.not(u),d("else"));function d(n,o){return()=>{const r=e.subschema({keyword:n},u);t.assign(c,u),e.mergeValidEvaluated(r,c),o?t.assign(o,i._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}};function a(e,t){const n=e.schema[t];return void 0!==n&&!o.alwaysValidSchema(e,n)}t.default=s},8200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4783),o=n(4665),r=n(9864),s=n(7772),a=n(3708),l=n(9351),c=n(6239),u=n(2296),d=n(5697),h=n(19),p=n(4200),f=n(1125),m=n(9434),g=n(6552),v=[d.default,h.default,p.default,f.default,m.default,g.default,i.default,o.default,r.default,a.default,l.default,s.default,c.default,u.default];t.default=v},4665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),r=n(4815),s=n(412),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{gen:t,schema:n,it:a}=e;if(Array.isArray(n))a.opts.unevaluated&&n.length&&!0!==a.items&&(a.items=o.mergeEvaluated.items(t,n.length,a.items)),function(n){const{parentSchema:s,data:l}=e;if(a.opts.strictTuples&&!function(e,t){return e===t.minItems&&(e===t.maxItems||!1===t.additionalItems)}(n.length,s)){const e=`"items" is ${n.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;r.checkStrictMode(a,e,a.opts.strictTuples)}const c=t.name("valid"),u=t.const("len",i._`${l}.length`);n.forEach(((n,r)=>{o.alwaysValidSchema(a,n)||(t.if(i._`${u} > ${r}`,(()=>e.subschema({keyword:"items",schemaProp:r,dataProp:r},c))),e.ok(c))}))}(n);else{if(a.items=!0,o.alwaysValidSchema(a,n))return;e.ok(s.validateArray(e))}}};t.default=a},5697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),o={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:o}=e;if(i.alwaysValidSchema(o,n))return void e.fail();const r=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},r),e.result(r,(()=>e.error()),(()=>e.reset()))},error:{message:"should NOT be valid"}};t.default=o},4200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:e})=>i._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=n,a=t.let("valid",!1),l=t.let("passing",null),c=t.name("_valid");e.setParams({passing:l}),t.block((function(){s.forEach(((n,s)=>{let u;o.alwaysValidSchema(r,n)?t.var(c,!0):u=e.subschema({keyword:"oneOf",schemaProp:s,compositeRule:!0},c),s>0&&t.if(i._`${c} && ${a}`).assign(a,!1).assign(l,i._`[${l}, ${s}]`).else(),t.if(c,(()=>{t.assign(a,!0),t.assign(l,s),u&&e.mergeEvaluated(u,i.Name)}))}))})),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}};t.default=r},2296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),r=n(4069),s=n(4815),a=n(6776),l={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:l,parentSchema:c,it:u}=e,{opts:d}=u,h=i.schemaProperties(u,n);if(0===h.length)return;const p=d.strict&&!d.allowMatchingProperties&&c.properties,f=t.name("valid");!0===u.props||u.props instanceof o.Name||(u.props=a.evaluatedPropsToName(t,u.props));const{props:m}=u;function g(e){for(const t in p)new RegExp(e).test(t)&&s.checkStrictMode(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){t.forIn("key",l,(s=>{t.if(o._`${i.usePattern(t,n)}.test(${s})`,(()=>{e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:s,dataPropType:r.Type.Str},f),u.opts.unevaluated&&!0!==m?t.assign(o._`${m}[${s}]`,!0):u.allErrors||t.if(o.not(f),(()=>t.break()))}))}))}!function(){for(const e of h)p&&g(e),u.allErrors?v(e):(t.var(f,!0),v(e),t.if(f))}()}};t.default=l},6239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2227),o=n(412),r=n(6776),s=n(9351),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new i.default(c,s.default,"additionalProperties"));const u=o.allSchemaProperties(n);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=r.mergeEvaluated.props(t,r.toHash(u),c.props));const d=u.filter((e=>!r.alwaysValidSchema(c,n[e])));if(0===d.length)return;const h=t.name("valid");for(const n of d)p(n)?f(n):(t.if(o.propertyInData(t,l,n,c.opts.ownProperties)),f(n),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(h);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},3708:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:e})=>i.str`property name '${e.propertyName}' is invalid`,params:({params:e})=>i._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:r,it:s}=e;if(o.alwaysValidSchema(s,n))return;const a=t.name("valid");t.forIn("key",r,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if(i.not(a),(()=>{e.error(!0),s.allErrors||t.break()}))})),e.ok(a)}};t.default=r},6552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4815),o={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&i.checkStrictMode(n,`"${e}" without "if" is ignored`)}};t.default=o},412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const i=n(3487),o=n(6776),r=n(4069),s=n(2141);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:i._`Object.prototype.hasOwnProperty`})}function l(e,t,n){return i._`${a(e)}.call(${t}, ${n})`}function c(e,t,n,o){const r=i._`${t}${i.getProperty(n)} === undefined`;return o?i.or(r,i.not(l(e,t,n))):r}function u(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:o,it:r}=e;n.if(c(n,o,t,r.opts.ownProperties),(()=>{e.setParams({missingProperty:i._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},o,r){return i.or(...o.map((o=>i.and(c(e,t,o,n.ownProperties),i._`${r} = ${o}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,n,o){const r=i._`${t}${i.getProperty(n)} !== undefined`;return o?i._`${r} && ${l(e,t,n)}`:r},t.noPropertyInData=c,t.allSchemaProperties=u,t.schemaProperties=function(e,t){return u(t).filter((n=>!o.alwaysValidSchema(e,t[n])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:o,schemaPath:r,errorPath:a},it:l},c,u,d){const h=d?i._`${e}, ${t}, ${o}${r}`:t,p=[[s.default.dataPath,i.strConcat(s.default.dataPath,a)],[s.default.parentData,l.parentData],[s.default.parentDataProperty,l.parentDataProperty],[s.default.rootData,s.default.rootData]];l.opts.dynamicRef&&p.push([s.default.dynamicAnchors,s.default.dynamicAnchors]);const f=i._`${h}, ${n.object(...p)}`;return u!==i.nil?i._`${c}.call(${u}, ${f})`:i._`${c}(${f})`},t.usePattern=function(e,t){return e.scopeValue("pattern",{key:t,ref:new RegExp(t,"u"),code:i._`new RegExp(${t}, "u")`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(s){const l=t.const("len",i._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:o,dataProp:n,dataPropType:r.Type.Num},a),t.if(i.not(a),s)}))}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:r,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>o.alwaysValidSchema(s,e)))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,o)=>{const s=e.subschema({keyword:r,schemaProp:o,compositeRule:!0},l);t.assign(a,i._`${a} || ${l}`);e.mergeValidEvaluated(s,l)||t.if(i.not(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},8386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},5684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8386),o=n(8280),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,o.default];t.default=r},8280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const i=n(8727),o=n(412),r=n(3487),s=n(2141),a=n(5173),l=n(6776),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:o}=e,{baseId:s,schemaEnv:l,validateName:c,opts:h,self:p}=o;if("#"===n||"#/"===n)return function(){if(l===l.root)return d(e,c,l,l.$async);const n=t.scopeValue("root",{ref:l.root});return d(e,r._`${n}.validate`,l.root,l.root.$async)}();const f=a.resolveRef.call(p,l.root,s,n);if(void 0===f)throw new i.MissingRefError(s,n);return f instanceof a.SchemaEnv?function(t){const n=u(e,t);d(e,n,t,t.$async)}(f):function(i){const o=t.scopeValue("schema",!0===h.code.source?{ref:i,code:r.stringify(i)}:{ref:i}),s=t.name("valid"),a=e.subschema({schema:i,dataTypes:[],schemaPath:r.nil,topSchemaRef:o,errSchemaPath:n},s);e.mergeEvaluated(a),e.ok(s)}(f)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):r._`${n.scopeValue("wrapper",{ref:t})}.validate`}function d(e,t,n,i){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:d,opts:h}=c,p=h.passContext?s.default.this:r.nil;function f(e){const t=r._`${e}.errors`;a.assign(s.default.vErrors,r._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,r._`${s.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const i=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(i&&!i.dynamicProps)void 0!==i.props&&(c.props=l.mergeEvaluated.props(a,i.props,c.props));else{const t=a.var("props",r._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,r.Name)}if(!0!==c.items)if(i&&!i.dynamicItems)void 0!==i.items&&(c.items=l.mergeEvaluated.items(a,i.items,c.items));else{const t=a.var("items",r._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,r.Name)}}i?function(){if(!d.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(r._`await ${o.callValidateCode(e,t,p)}`),m(t),u||a.assign(n,!0)}),(e=>{a.if(r._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),f(e),u||a.assign(n,!1)})),e.ok(n)}():e.result(o.callValidateCode(e,t,p),(()=>m(t)),(()=>f(t)))}t.getValidate=u,t.callRef=d,t.default=c},3924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5684),o=n(2649),r=n(8200),s=n(9502),a=n(6167),l=[i.default,o.default,r.default,s.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},9651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`should match format "${e}"`,params:({schemaCode:e})=>i._`{format: ${e}}`},code(e,t){const{gen:n,data:o,$data:r,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:h}=l;c.validateFormats&&(r?function(){const r=n.scopeValue("formats",{ref:h.formats,code:c.code.formats}),s=n.const("fDef",i._`${r}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(i._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,(()=>n.assign(l,i._`${s}.type || "string"`).assign(u,i._`${s}.validate`)),(()=>n.assign(l,i._`"string"`).assign(u,s))),e.fail$data(i.or(!1===c.strict?i.nil:i._`${a} && !${u}`,function(){const e=d.$async?i._`(${s}.async ? await ${u}(${o}) : ${u}(${o}))`:i._`${u}(${o})`,n=i._`(typeof ${u} == "function" ? ${e} : ${u}.test(${o}))`;return i._`${u} && ${u} !== true && ${l} === ${t} && !${n}`}()))}():function(){const r=h.formats[s];if(!r)return void function(){if(!1===c.strict)return void h.logger.warn(e());throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${u}"`}}();if(!0===r)return;const[a,l,p]=function(e){const t=n.scopeValue("formats",{key:s,ref:e,code:c.code.formats?i._`${c.code.formats}${i.getProperty(s)}`:void 0});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,i._`${t}.validate`];return["string",e,t]}(r);a===t&&e.pass(function(){if("object"==typeof r&&!(r instanceof RegExp)&&r.async){if(!d.$async)throw new Error("async format in sync schema");return i._`await ${p}(${o})`}return"function"==typeof l?i._`${p}(${o})`:i._`${p}.test(${o})`}())}())}};t.default=o},9502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=[n(9651).default];t.default=i},6167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},4693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4063),r={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:e})=>i._`{allowedValue: ${e}}`},code(e){const t=e.gen.scopeValue("func",{ref:o,code:i._`require("ajv/dist/compile/equal")`});e.fail$data(i._`!${t}(${e.data}, ${e.schemaCode})`)}};t.default=r},966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4063),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:e})=>i._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:r,schema:s,schemaCode:a,it:l}=e;if(!r&&0===s.length)throw new Error("enum must have non-empty array");const c=s.length>=l.opts.loopEnum,u=e.gen.scopeValue("func",{ref:o,code:i._`require("ajv/dist/compile/equal")`});let d;if(c||r)d=t.let("valid"),e.block$data(d,(function(){t.assign(d,!1),t.forOf("v",a,(e=>t.if(i._`${u}(${n}, ${e})`,(()=>t.assign(d,!0).break()))))}));else{if(!Array.isArray(s))throw new Error("ajv implementation error");const e=t.const("vSchema",a);d=i.or(...s.map(((t,o)=>function(e,t){const o=s[t];return o&&"object"==typeof o?i._`${u}(${n}, ${e}[${t}])`:i._`${n} === ${o}`}(e,o))))}e.pass(d)}};t.default=r},2649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3983),o=n(430),r=n(3229),s=n(4336),a=n(498),l=n(3301),c=n(1687),u=n(2958),d=n(4693),h=n(966),p=[i.default,o.default,r.default,s.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,h.default];t.default=p},1687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:o}=e,r="maxItems"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`${n}.length ${r} ${o}`)}};t.default=o},3229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4776),r={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r,it:s}=e,a="maxLength"===t?i.operators.GT:i.operators.LT;let l;if(!1===s.opts.unicode)l=i._`${n}.length`;else{const t=e.gen.scopeValue("func",{ref:o.default,code:i._`require("ajv/dist/compile/ucs2length").default`});l=i._`${t}(${n})`}e.fail$data(i._`${l} ${a} ${r}`)}};t.default=r},3983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=i.operators,r={maximum:{okStr:"<=",ok:o.LTE,fail:o.GT},minimum:{okStr:">=",ok:o.GTE,fail:o.LT},exclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},exclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},s={message:({keyword:e,schemaCode:t})=>i.str`should be ${r[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${r[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:n,schemaCode:o}=e;e.fail$data(i._`${n} ${r[t].fail} ${o} || isNaN(${n})`)}};t.default=a},498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:o}=e,r="maxProperties"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`Object.keys(${n}).length ${r} ${o}`)}};t.default=o},430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>i.str`should be multiple of ${e}`,params:({schemaCode:e})=>i._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:o,it:r}=e,s=r.opts.multipleOfPrecision,a=t.let("res"),l=s?i._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:i._`${a} !== parseInt(${a})`;e.fail$data(i._`(${o} === 0 || (${a} = ${n}/${o}, ${l}))`)}};t.default=o},4336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>o.str`should match pattern "${e}"`,params:({schemaCode:e})=>o._`{pattern: ${e}}`},code(e){const{gen:t,data:n,$data:r,schema:s,schemaCode:a}=e,l=r?o._`(new RegExp(${a}, "u"))`:i.usePattern(t,s);e.fail$data(o._`!${l}.test(${n})`)}};t.default=r},3301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),r=n(4815),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>o.str`should have required property '${e}'`,params:({params:{missingProperty:e}})=>o._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:s,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===n.length)return;const d=n.length>=u.loopRequired;if(c.allErrors?function(){if(d||l)e.block$data(o.nil,h);else for(const t of n)i.checkReportMissingProp(e,t)}():function(){const r=t.let("missing");if(d||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,r){e.setParams({missingProperty:n}),t.forOf(n,s,(()=>{t.assign(r,i.propertyInData(t,a,n,u.ownProperties)),t.if(o.not(r),(()=>{e.error(),t.break()}))}),o.nil)}(r,n))),e.ok(n)}else t.if(i.checkMissingProp(e,n,r)),i.reportMissingProp(e,r),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:i}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!i.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;r.checkStrictMode(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",s,(n=>{e.setParams({missingProperty:n}),t.if(i.noPropertyInData(t,a,n,u.ownProperties),(()=>e.error()))}))}}};t.default=s},2958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(453),o=n(3487),r=n(4063),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>o.str`should NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>o._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:s,schema:a,parentSchema:l,schemaCode:c,it:u}=e;if(!s&&!a)return;const d=t.let("valid"),h=l.items?i.getSchemaTypes(l.items):[];function p(r,s){const a=t.name("item"),l=i.checkDataTypes(h,a,u.opts.strict,i.DataType.Wrong),c=t.const("indices",o._`{}`);t.for(o._`;${r}--;`,(()=>{t.let(a,o._`${n}[${r}]`),t.if(l,o._`continue`),h.length>1&&t.if(o._`typeof ${a} == "string"`,o._`${a} += "_"`),t.if(o._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(s,o._`${c}[${a}]`),e.error(),t.assign(d,!1).break()})).code(o._`${c}[${a}] = ${r}`)}))}function f(i,s){const a=e.gen.scopeValue("func",{ref:r,code:o._`require("ajv/dist/compile/equal")`}),l=t.name("outer");t.label(l).for(o._`;${i}--;`,(()=>t.for(o._`${s} = ${i}; ${s}--;`,(()=>t.if(o._`${a}(${n}[${i}], ${n}[${s}])`,(()=>{e.error(),t.assign(d,!1).break(l)}))))))}e.block$data(d,(function(){const i=t.let("i",o._`${n}.length`),r=t.let("j");e.setParams({i,j:r}),t.assign(d,!0),t.if(o._`${i} > 1`,(()=>(h.length>0&&!h.some((e=>"object"===e||"array"===e))?p:f)(i,r)))}),o._`${c} === false`),e.ok(d)}};t.default=s},8307:function(e,t){var n;!function(i){"use strict";var o=":not(:disabled):not(.ajs-reset)",r=13,s=27,a=112,l=123,c=37,u=39,d=9,h={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+o].join(o+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},p=[];function f(e,t){e.className+=" "+t}function m(e,t){for(var n=e.className.split(" "),i=t.split(" "),o=0;o<i.length;o+=1){var r=n.indexOf(i[o]);r>-1&&n.splice(r,1)}e.className=n.join(" ")}function g(){return"rtl"===i.getComputedStyle(document.body).direction}function v(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function _(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function y(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function b(e){if(null===e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n+=1)t.push(b(e[n]));return t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return(t=new RegExp(e.source)).global=e.global,t.ignoreCase=e.ignoreCase,t.multiline=e.multiline,t.lastIndex=e.lastIndex,t;if("object"==typeof e){for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=b(e[i]));return t}return e}function x(e,t){if(e.elements){var n=e.elements.root;n.parentNode.removeChild(n),delete e.elements,e.settings=b(e.__settings),e.__init=t,delete e.__internal}}var w=!1;try{var k=Object.defineProperty({},"passive",{get:function(){w=!0}});i.addEventListener("test",k,k),i.removeEventListener("test",k,k)}catch(e){}var S=function(e,t,n,i,o){e.addEventListener(t,n,w?{capture:i,passive:o}:!0===i)},C=function(e,t,n,i,o){e.removeEventListener(t,n,w?{capture:i,passive:o}:!0===i)},E=function(){var e,t,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==document.documentElement.style[e]){t=i[e],n=!0;break}return{type:t,supported:n}}();function $(e,t){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(e),t.apply(e,n)}return t.apply(e,[null,e])}}function T(e,t){return{index:e,button:t,cancel:!1}}function A(e,t){if("function"==typeof t.get(e))return t.get(e).call(t)}var D=function(){var e,t,n=[],o=!1,r=i.navigator.userAgent.indexOf("Safari")>-1&&i.navigator.userAgent.indexOf("Chrome")<0,w='<div class="ajs-dimmer"></div>',k='<div class="ajs-modal" tabindex="0"></div>',D='<div class="ajs-dialog" tabindex="0"></div>',O='<button class="ajs-reset"></button>',N='<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',j='<div class="ajs-header"></div>',M='<div class="ajs-body"></div>',I='<div class="ajs-content"></div>',R='<div class="ajs-footer"></div>',L={primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},F='<button class="ajs-button"></button>',z='<div class="ajs-handle"></div>',B="ajs-in",H="ajs-out",W="alertify",U="ajs-basic",q="ajs-capture",V="ajs-closable",G="ajs-fixed",K="ajs-frameless",J="ajs-hidden",Y="ajs-maximized",X="ajs-maximizable",Q="ajs-modeless",Z="ajs-movable",ee="ajs-no-selection",te="ajs-no-overflow",ne="ajs-no-padding",ie="ajs-pinnable",oe="ajs-",re="ajs-resizable",se="ajs-shake",ae="ajs-unpinned",le="ajs-no-transition";function ce(e){if(!e.__internal){var t;P.defaults.hooks.preinit(e),delete e.__init,e.__settings||(e.__settings=b(e.settings)),"function"==typeof e.setup?((t=e.setup()).options=t.options||{},t.focus=t.focus||{}):t={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof e.hooks&&(e.hooks={});var i=[];if(Array.isArray(t.buttons))for(var o=0;o<t.buttons.length;o+=1){var r=t.buttons[o],s={};for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);i.push(s)}var l=e.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:i,focus:t.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};c.root=document.createElement("div"),c.root.style.display="none",c.root.className=W+" "+J+" ",c.root.innerHTML=w+k,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=D,c.dialog=c.modal.firstChild,c.dialog.innerHTML=O+N+j+M+R+z+O,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=I,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=L.auxiliary+L.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=F,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<e.__internal.buttons.length;u+=1){var d=e.__internal.buttons[u];for(var h in n.indexOf(d.key)<0&&n.push(d.key),d.element=c.buttonTemplate.cloneNode(),d.element.innerHTML=d.text,"string"==typeof d.className&&""!==d.className&&f(d.element,d.className),d.attrs)"className"!==h&&d.attrs.hasOwnProperty(h)&&d.element.setAttribute(h,d.attrs[h]);"auxiliary"===d.scope?c.buttons.auxiliary.appendChild(d.element):c.buttons.primary.appendChild(d.element)}for(var p in e.elements=c,l.resetHandler=$(e,Re),l.beginMoveHandler=$(e,Qe),l.beginResizeHandler=$(e,at),l.bringToFrontHandler=$(e,me),l.modalClickHandler=$(e,Ae),l.buttonsClickHandler=$(e,Ne),l.commandsClickHandler=$(e,ye),l.transitionInHandler=$(e,ze),l.transitionOutHandler=$(e,Be),l.options)void 0!==t.options[p]?e.set(p,t.options[p]):P.defaults.hasOwnProperty(p)?e.set(p,P.defaults[p]):"title"===p&&e.set(p,P.defaults.glossary[p]);"function"==typeof e.build&&e.build(),P.defaults.hooks.postinit(e)}document.body.appendChild(e.elements.root)}function ue(){i.scrollTo(e,t)}function de(){for(var e=0,t=0;t<p.length;t+=1){var n=p[t];(n.isModal()||n.isMaximized())&&(e+=1)}0===e&&document.body.className.indexOf(te)>=0?(m(document.body,te),fe(!1)):e>0&&document.body.className.indexOf(te)<0&&(fe(!0),f(document.body,te))}var he="",pe=0;function fe(e){P.defaults.preventBodyShift&&(e&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(pe=t,he=i.getComputedStyle(document.body).top,f(document.body,G),document.body.style.top=-t+"px"):e||(t=pe,document.body.style.top=he,m(document.body,G),ue()))}function me(e,t){for(var n=p.indexOf(t)+1;n<p.length;n+=1)if(p[n].isModal())return;return document.body.lastChild!==t.elements.root&&(document.body.appendChild(t.elements.root),p.splice(p.indexOf(t),1),p.push(t),Ie(t)),!1}function ge(e,t,n,i){switch(t){case"title":e.setHeader(i);break;case"modal":!function(e){e.get("modal")?(m(e.elements.root,Q),e.isOpen()&&(pt(e),Ee(e),de())):(f(e.elements.root,Q),e.isOpen()&&(ht(e),Ee(e),de()))}(e);break;case"basic":!function(e){e.get("basic")?f(e.elements.root,U):m(e.elements.root,U)}(e);break;case"frameless":!function(e){e.get("frameless")?f(e.elements.root,K):m(e.elements.root,K)}(e);break;case"pinned":!function(e){e.get("pinned")?(m(e.elements.root,ae),e.isOpen()&&Ce(e)):(f(e.elements.root,ae),e.isOpen()&&!e.isModal()&&Se(e))}(e);break;case"closable":!function(e){e.get("closable")?(f(e.elements.root,V),function(e){S(e.elements.modal,"click",e.__internal.modalClickHandler)}(e)):(m(e.elements.root,V),function(e){C(e.elements.modal,"click",e.__internal.modalClickHandler)}(e))}(e);break;case"maximizable":!function(e){e.get("maximizable")?f(e.elements.root,X):m(e.elements.root,X)}(e);break;case"pinnable":!function(e){e.get("pinnable")?f(e.elements.root,ie):m(e.elements.root,ie)}(e);break;case"movable":!function(e){e.get("movable")?(f(e.elements.root,Z),e.isOpen()&&ft(e)):(tt(e),m(e.elements.root,Z),e.isOpen()&&mt(e))}(e);break;case"resizable":!function(e){e.get("resizable")?(f(e.elements.root,re),e.isOpen()&&gt(e)):(ut(e),m(e.elements.root,re),e.isOpen()&&vt(e))}(e);break;case"padding":i?m(e.elements.root,ne):e.elements.root.className.indexOf(ne)<0&&f(e.elements.root,ne);break;case"overflow":i?m(e.elements.root,te):e.elements.root.className.indexOf(te)<0&&f(e.elements.root,te);break;case"transition":!function(e,t,n){"string"==typeof n&&m(e.elements.root,oe+n),f(e.elements.root,oe+t),e.elements.root.offsetWidth}(e,i,n);break;case"transitionOff":!function(e){e.get("transitionOff")?f(e.elements.root,le):m(e.elements.root,le)}(e)}"function"==typeof e.hooks.onupdate&&e.hooks.onupdate.call(e,t,n,i)}function ve(e,t,n,i,o){var r,s={op:void 0,items:[]};if(void 0===o&&"string"==typeof i)s.op="get",t.hasOwnProperty(i)?(s.found=!0,s.value=t[i]):(s.found=!1,s.value=void 0);else if(s.op="set","object"==typeof i){var a=i;for(var l in a)t.hasOwnProperty(l)?(t[l]!==a[l]&&(r=t[l],t[l]=a[l],n.call(e,l,r,a[l])),s.items.push({key:l,value:a[l],found:!0})):s.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof i)throw new Error("args must be a string or object");t.hasOwnProperty(i)?(t[i]!==o&&(r=t[i],t[i]=o,n.call(e,i,r,o)),s.items.push({key:i,value:o,found:!0})):s.items.push({key:i,value:o,found:!1})}return s}function _e(e){var t;Pe(e,(function(n){return t=!0!==e.get("invokeOnCloseOff")&&!0===n.invokeOnClose})),!t&&e.isOpen()&&e.close()}function ye(e,t){switch(e.srcElement||e.target){case t.elements.commands.pin:t.isPinned()?xe(t):be(t);break;case t.elements.commands.maximize:t.isMaximized()?ke(t):we(t);break;case t.elements.commands.close:_e(t)}return!1}function be(e){e.set("pinned",!0)}function xe(e){e.set("pinned",!1)}function we(e){A("onmaximize",e),f(e.elements.root,Y),e.isOpen()&&de(),A("onmaximized",e)}function ke(e){A("onrestore",e),m(e.elements.root,Y),e.isOpen()&&de(),A("onrestored",e)}function Se(e){var t=_();e.elements.modal.style.marginTop=v()+"px",e.elements.modal.style.marginLeft=t+"px",e.elements.modal.style.marginRight=-t+"px"}function Ce(e){var t=parseInt(e.elements.modal.style.marginTop,10),n=parseInt(e.elements.modal.style.marginLeft,10);if(e.elements.modal.style.marginTop="",e.elements.modal.style.marginLeft="",e.elements.modal.style.marginRight="",e.isOpen()){var i=0,o=0;""!==e.elements.dialog.style.top&&(i=parseInt(e.elements.dialog.style.top,10)),e.elements.dialog.style.top=i+(t-v())+"px",""!==e.elements.dialog.style.left&&(o=parseInt(e.elements.dialog.style.left,10)),e.elements.dialog.style.left=o+(n-_())+"px"}}function Ee(e){e.get("modal")||e.get("pinned")?Ce(e):Se(e)}var $e=!1,Te=0;function Ae(e,t){if(e.timeStamp-Te>200&&(Te=e.timeStamp)&&!$e){var n=e.srcElement||e.target;!0===t.get("closableByDimmer")&&n===t.elements.modal&&_e(t)}$e=!1}var De=0,Oe=!1;function Pe(e,t){if(Date.now()-De>200&&(De=Date.now()))for(var n=0;n<e.__internal.buttons.length;n+=1){var i=e.__internal.buttons[n];if(!i.element.disabled&&t(i)){var o=T(n,i);"function"==typeof e.callback&&e.callback.apply(e,[o]),!1===o.cancel&&e.close();break}}}function Ne(e,t){var n=e.srcElement||e.target;Pe(t,(function(e){return e.element===n&&(Oe=!0)}))}function je(e){if(!Oe){var t=p[p.length-1],i=e.keyCode;return 0===t.__internal.buttons.length&&i===s&&!0===t.get("closable")?(_e(t),!1):n.indexOf(i)>-1?(Pe(t,(function(e){return e.key===i})),!1):void 0}Oe=!1}function Me(e){var t=p[p.length-1],i=e.keyCode;if(i===c||i===u){for(var o=t.__internal.buttons,r=0;r<o.length;r+=1)if(document.activeElement===o[r].element)switch(i){case c:return void o[(r||o.length)-1].element.focus();case u:return void o[(r+1)%o.length].element.focus()}}else if(i<l+1&&i>a-1&&n.indexOf(i)>-1)return e.preventDefault(),e.stopPropagation(),Pe(t,(function(e){return e.key===i})),!1}function Ie(e,t){if(t)t.focus();else{var n=e.__internal.focus,i=n.element;switch(typeof n.element){case"number":e.__internal.buttons.length>n.element&&(i=!0===e.get("basic")?e.elements.reset[0]:e.__internal.buttons[n.element].element);break;case"string":i=e.elements.body.querySelector(n.element);break;case"function":i=n.element.call(e)}(!0===e.get("defaultFocusOff")||null==i&&0===e.__internal.buttons.length)&&(i=e.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}function Re(e,t){if(!t)for(var n=p.length-1;n>-1;n-=1)if(p[n].isModal()){t=p[n];break}if(t&&t.isModal()){var i,o=t.elements.reset[0],r=t.elements.reset[1],s=e.relatedTarget,a=t.elements.root.contains(s),l=e.srcElement||e.target;if(l===o&&!a||l===r&&s===o)return;l===r||l===document.body?i=o:l===o&&s===r?i=Le(t):l===o&&a&&(i=Le(t,!0)),Ie(t,i)}}function Le(e,t){var n=[].slice.call(e.elements.dialog.querySelectorAll(h.tabbable));t&&n.reverse();for(var i=0;i<n.length;i+=1){var o=n[i];if(o.offsetParent||o.offsetWidth||o.offsetHeight||o.getClientRects().length)return o}}function Fe(e){var t=p[p.length-1];t&&e.shiftKey&&e.keyCode===d&&t.elements.reset[1].focus()}function ze(e,t){clearTimeout(t.__internal.timerIn),Ie(t),Oe=!1,A("onfocus",t),C(t.elements.dialog,E.type,t.__internal.transitionInHandler),m(t.elements.root,B)}function Be(e,t){clearTimeout(t.__internal.timerOut),C(t.elements.dialog,E.type,t.__internal.transitionOutHandler),tt(t),ut(t),t.isMaximized()&&!t.get("startMaximized")&&ke(t),"function"==typeof t.__internal.destroy&&t.__internal.destroy.apply(t)}var He=null,We=0,Ue=0,qe="pageX",Ve="pageY",Ge=null,Ke=!1,Je=null;function Ye(e,t){var n=e[qe]-We,i=e[Ve]-Ue;Ke&&(i-=document.body.scrollTop),t.style.left=n+"px",t.style.top=i+"px"}function Xe(e,t){var n=e[qe]-We,i=e[Ve]-Ue;Ke&&(i-=document.body.scrollTop),t.style.left=Math.min(Ge.maxLeft,Math.max(Ge.minLeft,n))+"px",t.style.top=Ke?Math.min(Ge.maxTop,Math.max(Ge.minTop,i))+"px":Math.max(Ge.minTop,i)+"px"}function Qe(e,t){if(null===nt&&!t.isMaximized()&&t.get("movable")){var n,i=0,o=0;if("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0],qe="clientX",Ve="clientY"):0===e.button&&(n=e),n){var r=t.elements.dialog;if(f(r,q),r.style.left&&(i=parseInt(r.style.left,10)),r.style.top&&(o=parseInt(r.style.top,10)),We=n[qe]-i,Ue=n[Ve]-o,t.isModal()?Ue+=t.elements.modal.scrollTop:t.isPinned()&&(Ue-=document.body.scrollTop),t.get("moveBounded")){var s=r,a=-i,l=-o;do{a+=s.offsetLeft,l+=s.offsetTop}while(s=s.offsetParent);Ge={maxLeft:a,minLeft:-a,maxTop:document.documentElement.clientHeight-r.clientHeight-l,minTop:-l},Je=Xe}else Ge=null,Je=Ye;return A("onmove",t),Ke=!t.isModal()&&t.isPinned(),He=t,Je(n,r),f(document.body,ee),!1}}}function Ze(e){var t;He&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&Je(t,He.elements.dialog))}function et(){if(He){var e=He;He=Ge=null,m(document.body,ee),m(e.elements.dialog,q),A("onmoved",e)}}function tt(e){He=null;var t=e.elements.dialog;t.style.left=t.style.top=""}var nt=null,it=Number.Nan,ot=0,rt=0,st=0;function at(e,t){var n;if(!t.isMaximized()&&("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0]):0===e.button&&(n=e),n)){A("onresize",t),nt=t,st=t.elements.resizeHandle.offsetHeight/2;var i=t.elements.dialog;return f(i,q),it=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=t.elements.header.offsetHeight+t.elements.footer.offsetHeight+"px",i.style.width=(ot=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(rt=i.offsetWidth)+"px"),i.style.maxWidth="none",f(document.body,ee),!1}}function lt(e){var t;nt&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&function(e,t,n){var i,o,r=t,s=0,a=0;do{s+=r.offsetLeft,a+=r.offsetTop}while(r=r.offsetParent);!0===n?(i=e.pageX,o=e.pageY):(i=e.clientX,o=e.clientY);var l=g();if(l&&(i=document.body.offsetWidth-i,isNaN(it)||(s=document.body.offsetWidth-s-t.offsetWidth)),t.style.height=o-a+st+"px",t.style.width=i-s+st+"px",!isNaN(it)){var c=.5*Math.abs(t.offsetWidth-ot);l&&(c*=-1),t.offsetWidth>ot?t.style.left=it+c+"px":t.offsetWidth>=rt&&(t.style.left=it-c+"px")}}(t,nt.elements.dialog,!nt.get("modal")&&!nt.get("pinned")))}function ct(){if(nt){var e=nt;nt=null,m(document.body,ee),m(e.elements.dialog,q),$e=!0,A("onresized",e)}}function ut(e){nt=null;var t=e.elements.dialog;"none"===t.style.maxWidth&&(t.style.maxWidth=t.style.minWidth=t.style.width=t.style.height=t.style.minHeight=t.style.left="",it=Number.Nan,ot=rt=st=0)}function dt(){for(var e=0;e<p.length;e+=1){var t=p[e];t.get("autoReset")&&(tt(t),ut(t))}}function ht(e){S(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function pt(e){C(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function ft(e){S(e.elements.header,"mousedown",e.__internal.beginMoveHandler),S(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function mt(e){C(e.elements.header,"mousedown",e.__internal.beginMoveHandler),C(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function gt(e){S(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),S(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}function vt(e){C(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),C(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}return{__init:ce,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(Q)<0},isMaximized:function(){return this.elements.root.className.indexOf(Y)>-1},isPinned:function(){return this.elements.root.className.indexOf(ae)<0},maximize:function(){return this.isMaximized()||we(this),this},restore:function(){return this.isMaximized()&&ke(this),this},pin:function(){return this.isPinned()||be(this),this},unpin:function(){return this.isPinned()&&xe(this),this},bringToFront:function(){return me(0,this),this},moveTo:function(e,t){if(!isNaN(e)&&!isNaN(t)){A("onmove",this);var n=this.elements.dialog,i=n,o=0,r=0;n.style.left&&(o-=parseInt(n.style.left,10)),n.style.top&&(r-=parseInt(n.style.top,10));do{o+=i.offsetLeft,r+=i.offsetTop}while(i=i.offsetParent);var s=e-o,a=t-r;g()&&(s*=-1),n.style.left=s+"px",n.style.top=a+"px",A("onmoved",this)}return this},resizeTo:function(e,t){var n=parseFloat(e),i=parseFloat(t),o=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){A("onresize",this),(""+e).match(o)&&(n=n/100*document.documentElement.clientWidth),(""+t).match(o)&&(i=i/100*document.documentElement.clientHeight);var r=this.elements.dialog;"none"!==r.style.maxWidth&&(r.style.minWidth=(rt=r.offsetWidth)+"px"),r.style.maxWidth="none",r.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",r.style.width=n+"px",r.style.height=i+"px",A("onresized",this)}return this},setting:function(e,t){var n=this,i=ve(this,this.__internal.options,(function(e,t,i){ge(n,e,t,i)}),e,t);if("get"===i.op)return i.found?i.value:void 0!==this.settings?ve(this,this.settings,this.settingUpdated||function(){},e,t).value:void 0;if("set"===i.op){if(i.items.length>0)for(var o=this.settingUpdated||function(){},r=0;r<i.items.length;r+=1){var s=i.items[r];s.found||void 0===this.settings||ve(this,this.settings,o,s.key,s.value)}return this}},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},setHeader:function(e){return"string"==typeof e?(y(this.elements.header),this.elements.header.innerHTML=e):e instanceof i.HTMLElement&&this.elements.header.firstChild!==e&&(y(this.elements.header),this.elements.header.appendChild(e)),this},setContent:function(e){return"string"==typeof e?(y(this.elements.content),this.elements.content.innerHTML=e):e instanceof i.HTMLElement&&this.elements.content.firstChild!==e&&(y(this.elements.content),this.elements.content.appendChild(e)),this},showModal:function(e){return this.show(!0,e)},show:function(n,s){if(ce(this),this.__internal.isOpen){tt(this),ut(this),f(this.elements.dialog,se);var a=this;setTimeout((function(){m(a.elements.dialog,se)}),200)}else{if(this.__internal.isOpen=!0,p.push(this),P.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",o="0"),"function"==typeof this.prepare&&this.prepare(),c=this,1===p.length&&(S(i,"resize",dt),S(document.body,"keyup",je),S(document.body,"keydown",Me),S(document.body,"focus",Re),S(document.documentElement,"mousemove",Ze),S(document.documentElement,"touchmove",Ze,!1,!1),S(document.documentElement,"mouseup",et),S(document.documentElement,"touchend",et),S(document.documentElement,"mousemove",lt),S(document.documentElement,"touchmove",lt,!1,!1),S(document.documentElement,"mouseup",ct),S(document.documentElement,"touchend",ct)),S(c.elements.commands.container,"click",c.__internal.commandsClickHandler),S(c.elements.footer,"click",c.__internal.buttonsClickHandler),S(c.elements.reset[0],"focusin",c.__internal.resetHandler),S(c.elements.reset[0],"keydown",Fe),S(c.elements.reset[1],"focusin",c.__internal.resetHandler),Oe=!0,S(c.elements.dialog,E.type,c.__internal.transitionInHandler),c.get("modal")||ht(c),c.get("resizable")&&gt(c),c.get("movable")&&ft(c),void 0!==n&&this.set("modal",n),e=_(),t=v(),de(),"string"==typeof s&&""!==s&&(this.__internal.className=s,f(this.elements.root,s)),this.get("startMaximized")?this.maximize():this.isMaximized()&&ke(this),Ee(this),this.elements.root.removeAttribute("style"),m(this.elements.root,H),f(this.elements.root,B),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,E.supported?1e3:100),r){var l=this.elements.root;l.style.display="none",setTimeout((function(){l.style.display="block"}),0)}this.elements.root.offsetWidth,m(this.elements.root,J),ue(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),A("onshow",this)}var c;return this},close:function(){var e;return this.__internal.isOpen&&!1!==A("onclosing",this)&&(e=this,1===p.length&&(C(i,"resize",dt),C(document.body,"keyup",je),C(document.body,"keydown",Me),C(document.body,"focus",Re),C(document.documentElement,"mousemove",Ze),C(document.documentElement,"mouseup",et),C(document.documentElement,"mousemove",lt),C(document.documentElement,"mouseup",ct)),C(e.elements.commands.container,"click",e.__internal.commandsClickHandler),C(e.elements.footer,"click",e.__internal.buttonsClickHandler),C(e.elements.reset[0],"focusin",e.__internal.resetHandler),C(e.elements.reset[0],"keydown",Fe),C(e.elements.reset[1],"focusin",e.__internal.resetHandler),S(e.elements.dialog,E.type,e.__internal.transitionOutHandler),e.get("modal")||pt(e),e.get("movable")&&mt(e),e.get("resizable")&&vt(e),m(this.elements.root,B),f(this.elements.root,H),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,E.supported?1e3:100),f(this.elements.root,J),this.elements.modal.offsetWidth,P.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&m(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),A("onclose",this),p.splice(p.indexOf(this),1),this.__internal.isOpen=!1,de()),p.length||"0"!==o||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return P.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){x(this,ce)},this.close()):this.__internal.destroy||x(this,ce)),this}}}(),O=function(){var e,t=[],n=h.notifier.classes,o=n.base;function r(t){t.__internal||(t.__internal={position:P.defaults.notifier.position,delay:P.defaults.notifier.delay},e=document.createElement("DIV"),("transitionOff"in h.notifier?h.notifier.transitionOff:h.transitionOff)&&(o=n.base+" ajs-no-transition"),a(t));e.parentNode!==document.body&&document.body.appendChild(e)}function s(e){e.__internal.pushed=!0,t.push(e)}function a(t){switch(e.className=o,t.__internal.position){case"top-right":f(e,n.top+" "+n.right);break;case"top-left":f(e,n.top+" "+n.left);break;case"top-center":f(e,n.top+" "+n.center);break;case"bottom-left":f(e,n.bottom+" "+n.left);break;case"bottom-center":f(e,n.bottom+" "+n.center);break;default:case"bottom-right":f(e,n.bottom+" "+n.right)}}function l(o,r){function a(e,t){t.__internal.closeButton&&"true"!==e.target.getAttribute("data-close")||t.dismiss(!0)}function l(t,n){C(n.element,E.type,l),e.removeChild(n.element)}function c(e){clearTimeout(e.__internal.timer),clearTimeout(e.__internal.transitionTimeout)}return(u={element:o,push:function(t,i){if(!this.__internal.pushed){var o,r;switch(s(this),c(this),arguments.length){case 0:r=this.__internal.delay;break;case 1:"number"==typeof t?r=t:(o=t,r=this.__internal.delay);break;case 2:o=t,r=i}return this.__internal.closeButton=P.defaults.notifier.closeButton,void 0!==o&&this.setContent(o),O.__internal.position.indexOf("top")<0?e.appendChild(this.element):e.insertBefore(this.element,e.firstChild),this.element.offsetWidth,f(this.element,n.visible),S(this.element,"click",this.__internal.clickHandler),this.delay(r)}return this},ondismiss:function(){},callback:r,dismiss:function(i){var o;return this.__internal.pushed&&(c(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(C(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===e&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,E.supported?1e3:100),m(this.element,n.visible),"function"==typeof this.callback&&this.callback.call(this,i)),o=this,t.splice(t.indexOf(o),1),o.__internal.pushed=!1)),this},delay:function(e){if(c(this),this.__internal.delay=void 0===e||isNaN(+e)?O.__internal.delay:+e,this.__internal.delay>0){var t=this;this.__internal.timer=setTimeout((function(){t.dismiss()}),1e3*this.__internal.delay)}return this},setContent:function(e){if("string"==typeof e?(y(this.element),this.element.innerHTML=e):e instanceof i.HTMLElement&&this.element.firstChild!==e&&(y(this.element),this.element.appendChild(e)),this.__internal.closeButton){var t=document.createElement("span");f(t,n.close),t.setAttribute("data-close",!0),this.element.appendChild(t)}return this},dismissOthers:function(){return O.dismissAll(this),this}}).__internal||(u.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},u.__internal.clickHandler=$(u,a),u.__internal.transitionEndHandler=$(u,l)),u;var u}return{setting:function(e,t){if(r(this),void 0===t)return this.__internal[e];switch(e){case"position":this.__internal.position=t,a(this);break;case"delay":this.__internal.delay=t}return this},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},create:function(e,t){r(this);var i=document.createElement("div");return i.className=n.message+("string"==typeof e&&""!==e?" "+n.prefix+e:""),l(i,t)},dismissAll:function(e){for(var n=t.slice(0),i=0;i<n.length;i+=1){var o=n[i];void 0!==e&&e===o||o.dismiss()}}}}();var P=new function(){var e={};function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(t){var n=e[t].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}return{defaults:h,dialog:function(i,o,r,s){if("function"!=typeof o)return n(i);if(this.hasOwnProperty(i))throw new Error("alertify.dialog: name already exists");var a=function(n,i,o,r){var s={dialog:null,factory:i};return void 0!==r&&(s.factory=function(){return t(new e[r].factory,new i)}),o||(s.dialog=t(new s.factory,D)),e[n]=s}(i,o,r,s);this[i]=r?function(){if(0===arguments.length)return a.dialog;var e=t(new a.factory,D);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var e=a.dialog;return e.main.apply(a.dialog,arguments),e.show.apply(a.dialog)}},closeAll:function(e){for(var t=p.slice(0),n=0;n<t.length;n+=1){var i=t[n];void 0!==e&&e===i||i.close()}},setting:function(e,t,i){if("notifier"===e)return O.setting(t,i);var o=n(e);return o?o.setting(t,i):void 0},set:function(e,t,n){return this.setting(e,t,n)},get:function(e,t){return this.setting(e,t)},notify:function(e,t,n,i){return O.create(t,i).push(e,n)},message:function(e,t,n){return O.create(null,n).push(e,t)},success:function(e,t,n){return O.create("success",n).push(e,t)},error:function(e,t,n){return O.create("error",n).push(e,t)},warning:function(e,t,n){return O.create("warning",n).push(e,t)},dismissAll:function(){O.dismissAll()}}};P.dialog("alert",(function(){return{main:function(e,t,n){var i,o,r;switch(arguments.length){case 1:o=e;break;case 2:"function"==typeof t?(o=e,r=t):(i=e,o=t);break;case 3:i=e,o=t,r=n}return this.set("title",i),this.set("message",o),this.set("onok",r),this},setup:function(){return{buttons:[{text:P.defaults.glossary.ok,key:s,invokeOnClose:!0,className:P.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(e){if("function"==typeof this.get("onok")){var t=this.get("onok").call(this,e);void 0!==t&&(e.cancel=!t)}}}})),P.dialog("confirm",(function(){var e={timer:null,index:null,text:null,duration:null,task:function(n,i){if(i.isOpen()){if(i.__internal.buttons[e.index].element.innerHTML=e.text+" (&#8207;"+e.duration+"&#8207;) ",e.duration-=1,-1===e.duration){t(i);var o=i.__internal.buttons[e.index],r=T(e.index,o);"function"==typeof i.callback&&i.callback.apply(i,[r]),!1!==r.close&&i.close()}}else t(i)}};function t(t){null!==e.timer&&(clearInterval(e.timer),e.timer=null,t.__internal.buttons[e.index].element.innerHTML=e.text)}function n(n,i,o){t(n),e.duration=o,e.index=i,e.text=n.__internal.buttons[i].element.innerHTML,e.timer=setInterval($(n,e.task),1e3),e.task(null,n)}return{main:function(e,t,n,i){var o,r,s,a;switch(arguments.length){case 1:r=e;break;case 2:r=e,s=t;break;case 3:r=e,s=t,a=n;break;case 4:o=e,r=t,s=n,a=i}return this.set("title",o),this.set("message",r),this.set("onok",s),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:P.defaults.glossary.ok,key:r,className:P.defaults.theme.ok},{text:P.defaults.glossary.cancel,key:s,invokeOnClose:!0,className:P.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){var n;switch(t(this),e.index){case 0:"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,e))&&(e.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,e))&&(e.cancel=!n)}},autoOk:function(e){return n(this,0,e),this},autoCancel:function(e){return n(this,1,e),this}}})),P.dialog("prompt",(function(){var e=document.createElement("INPUT"),t=document.createElement("P");return{main:function(e,t,n,i,o){var r,s,a,l,c;switch(arguments.length){case 1:s=e;break;case 2:s=e,a=t;break;case 3:s=e,a=t,l=n;break;case 4:s=e,a=t,l=n,c=i;break;case 5:r=e,s=t,a=n,l=i,c=o}return this.set("title",r),this.set("message",s),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:P.defaults.glossary.ok,key:r,className:P.defaults.theme.ok},{text:P.defaults.glossary.cancel,key:s,invokeOnClose:!0,className:P.defaults.theme.cancel}],focus:{element:e,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){e.className=P.defaults.theme.input,e.setAttribute("type","text"),e.value=this.get("value"),this.elements.content.appendChild(t),this.elements.content.appendChild(e)},prepare:function(){},setMessage:function(e){"string"==typeof e?(y(t),t.innerHTML=e):e instanceof i.HTMLElement&&t.firstChild!==e&&(y(t),t.appendChild(e))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(t,n,i){switch(t){case"message":this.setMessage(i);break;case"value":e.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":e.type=i;break;default:e.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(t){var n;switch(t.index){case 0:this.settings.value=e.value,"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,t,this.settings.value))&&(t.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,t))&&(t.cancel=!n),t.cancel||(e.value=this.settings.value)}}}})),"object"==typeof e.exports?e.exports=P:void 0===(n=function(){return P}.apply(t,[]))||(e.exports=n)}("undefined"!=typeof window?window:this)},454:e=>{"use strict";const t=(e,t,n)=>{const i=t<0?e.length+t:t;if(i>=0&&i<e.length){const i=n<0?e.length+n:n,[o]=e.splice(t,1);e.splice(i,0,o)}};e.exports=(e,n,i)=>(e=[...e],t(e,n,i),e),e.exports.mutate=t},296:e=>{function t(e,t,n){var i,o,r,s,a;function l(){var c=Date.now()-s;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(r,o),r=o=null))}null==t&&(t=100);var c=function(){r=this,o=arguments,s=Date.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(r,o),r=o=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=e.apply(r,o),r=o=null,clearTimeout(i),i=null)},c}t.debounce=t,e.exports=t},2828:e=>{if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},9438:(e,t,n)=>{var i=n(2828);function o(e,t,n,i,o){var s=r.apply(this,arguments);return e.addEventListener(n,s,o),{destroy:function(){e.removeEventListener(n,s,o)}}}function r(e,t,n,o){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&o.call(e,n)}}e.exports=function(e,t,n,i,r){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,n,i,r)})))}},1182:(e,t,n)=>{e.exports=n(9269)},9269:e=>{var t={create:function(e){var t;if(e=e.trim(),/<.*>/g.test(e)){var n=document.createElement("div");n.innerHTML=e,t=n.firstChild}else t=document.createElement(e);if(!this.isValidNode(t))throw new Error("Element not valid");return t},isValidNode:function(e){return e&&"nodeType"in e},render:function(e,t){var n;if(t=null==(n=t)?[]:Array.isArray(n)?n:[n],!this.isValidNode(e))throw new Error("Require a valid HTML Element");return t.forEach((function(t){e.appendChild(t)})),e}};e.exports=t},2025:e=>{var t;self,t=function(){return function(){var e={3099:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},6077:function(e,t,n){var i=n(111);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},1223:function(e,t,n){var i=n(5112),o=n(30),r=n(3070),s=i("unscopables"),a=Array.prototype;null==a[s]&&r.f(a,s,{configurable:!0,value:o(null)}),e.exports=function(e){a[s][e]=!0}},1530:function(e,t,n){"use strict";var i=n(8710).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},5787:function(e){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},9670:function(e,t,n){var i=n(111);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},4019:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var i,o=n(4019),r=n(9781),s=n(7854),a=n(111),l=n(6656),c=n(648),u=n(8880),d=n(1320),h=n(3070).f,p=n(9518),f=n(7674),m=n(5112),g=n(9711),v=s.Int8Array,_=v&&v.prototype,y=s.Uint8ClampedArray,b=y&&y.prototype,x=v&&p(v),w=_&&p(_),k=Object.prototype,S=k.isPrototypeOf,C=m("toStringTag"),E=g("TYPED_ARRAY_TAG"),$=o&&!!f&&"Opera"!==c(s.opera),T=!1,A={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},O=function(e){if(!a(e))return!1;var t=c(e);return l(A,t)||l(D,t)};for(i in A)s[i]||($=!1);if((!$||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},$))for(i in A)s[i]&&f(s[i],x);if((!$||!w||w===k)&&(w=x.prototype,$))for(i in A)s[i]&&f(s[i].prototype,w);if($&&p(b)!==w&&f(b,w),r&&!l(w,C))for(i in T=!0,h(w,C,{get:function(){return a(this)?this[E]:void 0}}),A)s[i]&&u(s[i],E,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:$,TYPED_ARRAY_TAG:T&&E,aTypedArray:function(e){if(O(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(S.call(x,e))return e}else for(var t in A)if(l(A,i)){var n=s[t];if(n&&(e===n||S.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(r){if(n)for(var i in A){var o=s[i];o&&l(o.prototype,e)&&delete o.prototype[e]}w[e]&&!n||d(w,e,n?t:$&&_[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var i,o;if(r){if(f){if(n)for(i in A)(o=s[i])&&l(o,e)&&delete o[e];if(x[e]&&!n)return;try{return d(x,e,n?t:$&&v[e]||t)}catch(e){}}for(i in A)!(o=s[i])||o[e]&&!n||d(o,e,t)}},isView:function(e){if(!a(e))return!1;var t=c(e);return"DataView"===t||l(A,t)||l(D,t)},isTypedArray:O,TypedArray:x,TypedArrayPrototype:w}},3331:function(e,t,n){"use strict";var i=n(7854),o=n(9781),r=n(4019),s=n(8880),a=n(2248),l=n(7293),c=n(5787),u=n(9958),d=n(7466),h=n(7067),p=n(1179),f=n(9518),m=n(7674),g=n(8006).f,v=n(3070).f,_=n(1285),y=n(8003),b=n(9909),x=b.get,w=b.set,k="ArrayBuffer",S="DataView",C="Wrong index",E=i.ArrayBuffer,$=E,T=i.DataView,A=T&&T.prototype,D=Object.prototype,O=i.RangeError,P=p.pack,N=p.unpack,j=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},I=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},R=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},L=function(e){return P(e,23,4)},F=function(e){return P(e,52,8)},z=function(e,t){v(e.prototype,t,{get:function(){return x(this)[t]}})},B=function(e,t,n,i){var o=h(n),r=x(e);if(o+t>r.byteLength)throw O(C);var s=x(r.buffer).bytes,a=o+r.byteOffset,l=s.slice(a,a+t);return i?l:l.reverse()},H=function(e,t,n,i,o,r){var s=h(n),a=x(e);if(s+t>a.byteLength)throw O(C);for(var l=x(a.buffer).bytes,c=s+a.byteOffset,u=i(+o),d=0;d<t;d++)l[c+d]=u[r?d:t-d-1]};if(r){if(!l((function(){E(1)}))||!l((function(){new E(-1)}))||l((function(){return new E,new E(1.5),new E(NaN),E.name!=k}))){for(var W,U=($=function(e){return c(this,$),new E(h(e))}).prototype=E.prototype,q=g(E),V=0;q.length>V;)(W=q[V++])in $||s($,W,E[W]);U.constructor=$}m&&f(A)!==D&&m(A,D);var G=new T(new $(2)),K=A.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||a(A,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else $=function(e){c(this,$,k);var t=h(e);w(this,{bytes:_.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},T=function(e,t,n){c(this,T,S),c(e,$,S);var i=x(e).byteLength,r=u(t);if(r<0||r>i)throw O("Wrong offset");if(r+(n=void 0===n?i-r:d(n))>i)throw O("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:r}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=r)},o&&(z($,"byteLength"),z(T,"buffer"),z(T,"byteLength"),z(T,"byteOffset")),a(T.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return R(B(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return R(B(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return N(B(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return N(B(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){H(this,1,e,j,t)},setUint8:function(e,t){H(this,1,e,j,t)},setInt16:function(e,t){H(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){H(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){H(this,4,e,I,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){H(this,4,e,I,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){H(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){H(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});y($,k),y(T,S),e.exports={ArrayBuffer:$,DataView:T}},1048:function(e,t,n){"use strict";var i=n(7908),o=n(1400),r=n(7466),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),a=r(n.length),l=o(e,a),c=o(t,a),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?a:o(u,a))-c,a-l),h=1;for(c<l&&l<c+d&&(h=-1,c+=d-1,l+=d-1);d-- >0;)c in n?n[l]=n[c]:delete n[l],l+=h,c+=h;return n}},1285:function(e,t,n){"use strict";var i=n(7908),o=n(1400),r=n(7466);e.exports=function(e){for(var t=i(this),n=r(t.length),s=arguments.length,a=o(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,c=void 0===l?n:o(l,n);c>a;)t[a++]=e;return t}},8533:function(e,t,n){"use strict";var i=n(2092).forEach,o=n(9341)("forEach");e.exports=o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},8457:function(e,t,n){"use strict";var i=n(9974),o=n(7908),r=n(3411),s=n(7659),a=n(7466),l=n(6135),c=n(1246);e.exports=function(e){var t,n,u,d,h,p,f=o(e),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,_=void 0!==v,y=c(f),b=0;if(_&&(v=i(v,g>2?arguments[2]:void 0,2)),null==y||m==Array&&s(y))for(n=new m(t=a(f.length));t>b;b++)p=_?v(f[b],b):f[b],l(n,b,p);else for(h=(d=y.call(f)).next,n=new m;!(u=h.call(d)).done;b++)p=_?r(d,v,[u.value,b],!0):u.value,l(n,b,p);return n.length=b,n}},1318:function(e,t,n){var i=n(5656),o=n(7466),r=n(1400),s=function(e){return function(t,n,s){var a,l=i(t),c=o(l.length),u=r(s,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:function(e,t,n){var i=n(9974),o=n(8361),r=n(7908),s=n(7466),a=n(5417),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,m,g,v){for(var _,y,b=r(f),x=o(b),w=i(m,g,3),k=s(x.length),S=0,C=v||a,E=t?C(f,k):n||h?C(f,0):void 0;k>S;S++)if((p||S in x)&&(y=w(_=x[S],S,b),e))if(t)E[S]=y;else if(y)switch(e){case 3:return!0;case 5:return _;case 6:return S;case 2:l.call(E,_)}else switch(e){case 4:return!1;case 7:l.call(E,_)}return d?-1:c||u?u:E}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},6583:function(e,t,n){"use strict";var i=n(5656),o=n(9958),r=n(7466),s=n(9341),a=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),d=c||!u;e.exports=d?function(e){if(c)return l.apply(this,arguments)||0;var t=i(this),n=r(t.length),s=n-1;for(arguments.length>1&&(s=a(s,o(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:l},1194:function(e,t,n){var i=n(7293),o=n(5112),r=n(7392),s=o("species");e.exports=function(e){return r>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var i=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},3671:function(e,t,n){var i=n(3099),o=n(7908),r=n(8361),s=n(7466),a=function(e){return function(t,n,a,l){i(n);var c=o(t),u=r(c),d=s(c.length),h=e?d-1:0,p=e?-1:1;if(a<2)for(;;){if(h in u){l=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in u&&(l=n(l,u[h],h,c));return l}};e.exports={left:a(!1),right:a(!0)}},5417:function(e,t,n){var i=n(111),o=n(3157),r=n(5112)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[r])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},3411:function(e,t,n){var i=n(9670),o=n(9212);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){throw o(e),t}}},7072:function(e,t,n){var i=n(5112)("iterator"),o=!1;try{var r=0,s={next:function(){return{done:!!r++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},4326:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},648:function(e,t,n){var i=n(1694),o=n(4326),r=n(5112)("toStringTag"),s="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:s?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},9920:function(e,t,n){var i=n(6656),o=n(3887),r=n(1236),s=n(3070);e.exports=function(e,t){for(var n=o(t),a=s.f,l=r.f,c=0;c<n.length;c++){var u=n[c];i(e,u)||a(e,u,l(t,u))}}},8544:function(e,t,n){var i=n(7293);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:function(e,t,n){"use strict";var i=n(3383).IteratorPrototype,o=n(30),r=n(9114),s=n(8003),a=n(7497),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=o(i,{next:r(1,n)}),s(e,c,!1,!0),a[c]=l,e}},8880:function(e,t,n){var i=n(9781),o=n(3070),r=n(9114);e.exports=i?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var i=n(7593),o=n(3070),r=n(9114);e.exports=function(e,t,n){var s=i(t);s in e?o.f(e,s,r(0,n)):e[s]=n}},654:function(e,t,n){"use strict";var i=n(2109),o=n(4994),r=n(9518),s=n(7674),a=n(8003),l=n(8880),c=n(1320),u=n(5112),d=n(1913),h=n(7497),p=n(3383),f=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=u("iterator"),v="keys",_="values",y="entries",b=function(){return this};e.exports=function(e,t,n,u,p,x,w){o(n,t,u);var k,S,C,E=function(e){if(e===p&&O)return O;if(!m&&e in A)return A[e];switch(e){case v:case _:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},$=t+" Iterator",T=!1,A=e.prototype,D=A[g]||A["@@iterator"]||p&&A[p],O=!m&&D||E(p),P="Array"==t&&A.entries||D;if(P&&(k=r(P.call(new e)),f!==Object.prototype&&k.next&&(d||r(k)===f||(s?s(k,f):"function"!=typeof k[g]&&l(k,g,b)),a(k,$,!0,!0),d&&(h[$]=b))),p==_&&D&&D.name!==_&&(T=!0,O=function(){return D.call(this)}),d&&!w||A[g]===O||l(A,g,O),h[t]=O,p)if(S={values:E(_),keys:x?O:E(v),entries:E(y)},w)for(C in S)(m||T||!(C in A))&&c(A,C,S[C]);else i({target:t,proto:!0,forced:m||T},S);return S}},9781:function(e,t,n){var i=n(7293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var i=n(7854),o=n(111),r=i.document,s=o(r)&&o(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(e,t,n){var i=n(5005);e.exports=i("navigator","userAgent")||""},7392:function(e,t,n){var i,o,r=n(7854),s=n(8113),a=r.process,l=a&&a.versions,c=l&&l.v8;c?o=(i=c.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(o=i[1]),e.exports=o&&+o},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var i=n(7854),o=n(1236).f,r=n(8880),s=n(1320),a=n(3505),l=n(9920),c=n(4705);e.exports=function(e,t){var n,u,d,h,p,f=e.target,m=e.global,g=e.stat;if(n=m?i:g?i[f]||a(f,{}):(i[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=o(n,u))&&p.value:n[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&r(h,"sham",!0),s(n,u,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:function(e,t,n){"use strict";n(4916);var i=n(1320),o=n(7293),r=n(5112),s=n(2261),a=n(8880),l=r("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=r("replace"),h=!!/./[d]&&""===/./[d]("a","$0"),p=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var f=r(e),m=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=m&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!m||!g||"replace"===e&&(!c||!u||h)||"split"===e&&!p){var v=/./[f],_=n(f,""[e],(function(e,t,n,i,o){return t.exec===s?m&&!o?{done:!0,value:v.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),y=_[0],b=_[1];i(String.prototype,e,y),i(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}d&&a(RegExp.prototype[f],"sham",!0)}},9974:function(e,t,n){var i=n(3099);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},5005:function(e,t,n){var i=n(857),o=n(7854),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},1246:function(e,t,n){var i=n(648),o=n(7497),r=n(5112)("iterator");e.exports=function(e){if(null!=e)return e[r]||e["@@iterator"]||o[i(e)]}},8554:function(e,t,n){var i=n(9670),o=n(1246);e.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},647:function(e,t,n){var i=n(7908),o=Math.floor,r="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,a=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,c,u){var d=n+e.length,h=l.length,p=a;return void 0!==c&&(c=i(c),p=s),r.call(u,p,(function(i,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":s=c[r.slice(1,-1)];break;default:var a=+r;if(0===a)return i;if(a>h){var u=o(a/10);return 0===u?i:u<=h?void 0===l[u-1]?r.charAt(1):l[u-1]+r.charAt(1):i}s=l[a-1]}return void 0===s?"":s}))}},7854:function(e,t,n){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},3501:function(e){e.exports={}},490:function(e,t,n){var i=n(5005);e.exports=i("document","documentElement")},4664:function(e,t,n){var i=n(9781),o=n(7293),r=n(317);e.exports=!i&&!o((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},1179:function(e){var t=Math.abs,n=Math.pow,i=Math.floor,o=Math.log,r=Math.LN2;e.exports={pack:function(e,s,a){var l,c,u,d=new Array(a),h=8*a-s-1,p=(1<<h)-1,f=p>>1,m=23===s?n(2,-24)-n(2,-77):0,g=e<0||0===e&&1/e<0?1:0,v=0;for((e=t(e))!=e||e===1/0?(c=e!=e?1:0,l=p):(l=i(o(e)/r),e*(u=n(2,-l))<1&&(l--,u*=2),(e+=l+f>=1?m/u:m*n(2,1-f))*u>=2&&(l++,u/=2),l+f>=p?(c=0,l=p):l+f>=1?(c=(e*u-1)*n(2,s),l+=f):(c=e*n(2,f-1)*n(2,s),l=0));s>=8;d[v++]=255&c,c/=256,s-=8);for(l=l<<s|c,h+=s;h>0;d[v++]=255&l,l/=256,h-=8);return d[--v]|=128*g,d},unpack:function(e,t){var i,o=e.length,r=8*o-t-1,s=(1<<r)-1,a=s>>1,l=r-7,c=o-1,u=e[c--],d=127&u;for(u>>=7;l>0;d=256*d+e[c],c--,l-=8);for(i=d&(1<<-l)-1,d>>=-l,l+=t;l>0;i=256*i+e[c],c--,l-=8);if(0===d)d=1-a;else{if(d===s)return i?NaN:u?-1/0:1/0;i+=n(2,t),d-=a}return(u?-1:1)*i*n(2,d-t)}}},8361:function(e,t,n){var i=n(7293),o=n(4326),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?r.call(e,""):Object(e)}:Object},9587:function(e,t,n){var i=n(111),o=n(7674);e.exports=function(e,t,n){var r,s;return o&&"function"==typeof(r=t.constructor)&&r!==n&&i(s=r.prototype)&&s!==n.prototype&&o(e,s),e}},2788:function(e,t,n){var i=n(5465),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},9909:function(e,t,n){var i,o,r,s=n(8536),a=n(7854),l=n(111),c=n(8880),u=n(6656),d=n(5465),h=n(6200),p=n(3501),f=a.WeakMap;if(s){var m=d.state||(d.state=new f),g=m.get,v=m.has,_=m.set;i=function(e,t){return t.facade=e,_.call(m,e,t),t},o=function(e){return g.call(m,e)||{}},r=function(e){return v.call(m,e)}}else{var y=h("state");p[y]=!0,i=function(e,t){return t.facade=e,c(e,y,t),t},o=function(e){return u(e,y)?e[y]:{}},r=function(e){return u(e,y)}}e.exports={set:i,get:o,has:r,enforce:function(e){return r(e)?o(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var i=n(5112),o=n(7497),r=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[r]===e)}},3157:function(e,t,n){var i=n(4326);e.exports=Array.isArray||function(e){return"Array"==i(e)}},4705:function(e,t,n){var i=n(7293),o=/#|\.prototype\./,r=function(e,t){var n=a[s(e)];return n==c||n!=l&&("function"==typeof t?i(t):!!t)},s=r.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";e.exports=r},111:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:function(e){e.exports=!1},7850:function(e,t,n){var i=n(111),o=n(4326),r=n(5112)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==o(e))}},9212:function(e,t,n){var i=n(9670);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},3383:function(e,t,n){"use strict";var i,o,r,s=n(7293),a=n(9518),l=n(8880),c=n(6656),u=n(5112),d=n(1913),h=u("iterator"),p=!1;[].keys&&("next"in(r=[].keys())?(o=a(a(r)))!==Object.prototype&&(i=o):p=!0);var f=null==i||s((function(){var e={};return i[h].call(e)!==e}));f&&(i={}),d&&!f||c(i,h)||l(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},7497:function(e){e.exports={}},133:function(e,t,n){var i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},590:function(e,t,n){var i=n(7293),o=n(5112),r=n(1913),s=o("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),r&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},8536:function(e,t,n){var i=n(7854),o=n(2788),r=i.WeakMap;e.exports="function"==typeof r&&/native code/.test(o(r))},1574:function(e,t,n){"use strict";var i=n(9781),o=n(7293),r=n(1956),s=n(5181),a=n(5296),l=n(7908),c=n(8361),u=Object.assign,d=Object.defineProperty;e.exports=!u||o((function(){if(i&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||r(u({},t)).join("")!=o}))?function(e,t){for(var n=l(e),o=arguments.length,u=1,d=s.f,h=a.f;o>u;)for(var p,f=c(arguments[u++]),m=d?r(f).concat(d(f)):r(f),g=m.length,v=0;g>v;)p=m[v++],i&&!h.call(f,p)||(n[p]=f[p]);return n}:u},30:function(e,t,n){var i,o=n(9670),r=n(6048),s=n(748),a=n(3501),l=n(490),c=n(317),u=n(6200),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=i?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete f.prototype[s[n]];return f()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=o(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:r(n,t)}},6048:function(e,t,n){var i=n(9781),o=n(3070),r=n(9670),s=n(1956);e.exports=i?Object.defineProperties:function(e,t){r(e);for(var n,i=s(t),a=i.length,l=0;a>l;)o.f(e,n=i[l++],t[n]);return e}},3070:function(e,t,n){var i=n(9781),o=n(4664),r=n(9670),s=n(7593),a=Object.defineProperty;t.f=i?a:function(e,t,n){if(r(e),t=s(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var i=n(9781),o=n(5296),r=n(9114),s=n(5656),a=n(7593),l=n(6656),c=n(4664),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=s(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return r(!o.f.call(e,t),e[t])}},8006:function(e,t,n){var i=n(6324),o=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var i=n(6656),o=n(7908),r=n(6200),s=n(8544),a=r("IE_PROTO"),l=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=o(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},6324:function(e,t,n){var i=n(6656),o=n(5656),r=n(1318).indexOf,s=n(3501);e.exports=function(e,t){var n,a=o(e),l=0,c=[];for(n in a)!i(s,n)&&i(a,n)&&c.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~r(c,n)||c.push(n));return c}},1956:function(e,t,n){var i=n(6324),o=n(748);e.exports=Object.keys||function(e){return i(e,o)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var i=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e.call(n,r):n.__proto__=r,n}}():void 0)},288:function(e,t,n){"use strict";var i=n(1694),o=n(648);e.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},3887:function(e,t,n){var i=n(5005),o=n(8006),r=n(5181),s=n(9670);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=r.f;return n?t.concat(n(e)):t}},857:function(e,t,n){var i=n(7854);e.exports=i},2248:function(e,t,n){var i=n(1320);e.exports=function(e,t,n){for(var o in t)i(e,o,t[o],n);return e}},1320:function(e,t,n){var i=n(7854),o=n(8880),r=n(6656),s=n(3505),a=n(2788),l=n(9909),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var l,c=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||r(n,"name")||o(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==i?(c?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=n:o(e,t,n)):h?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},7651:function(e,t,n){var i=n(4326),o=n(2261);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},2261:function(e,t,n){"use strict";var i,o,r=n(7066),s=n(2999),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,u=(i=/a/,o=/b*/g,a.call(i,"a"),a.call(o,"a"),0!==i.lastIndex||0!==o.lastIndex),d=s.UNSUPPORTED_Y||s.BROKEN_CARET,h=void 0!==/()??/.exec("")[1];(u||h||d)&&(c=function(e){var t,n,i,o,s=this,c=d&&s.sticky,p=r.call(s),f=s.source,m=0,g=e;return c&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),n=new RegExp("^(?:"+f+")",p)),h&&(n=new RegExp("^"+f+"$(?!\\s)",p)),u&&(t=s.lastIndex),i=a.call(c?n:s,g),c?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:u&&i&&(s.lastIndex=s.global?i.index+i[0].length:t),h&&i&&i.length>1&&l.call(i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i}),e.exports=c},7066:function(e,t,n){"use strict";var i=n(9670);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,n){"use strict";var i=n(7293);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},4488:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:function(e,t,n){var i=n(7854),o=n(8880);e.exports=function(e,t){try{o(i,e,t)}catch(n){i[e]=t}return t}},6340:function(e,t,n){"use strict";var i=n(5005),o=n(3070),r=n(5112),s=n(9781),a=r("species");e.exports=function(e){var t=i(e),n=o.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var i=n(3070).f,o=n(6656),r=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},6200:function(e,t,n){var i=n(2309),o=n(9711),r=i("keys");e.exports=function(e){return r[e]||(r[e]=o(e))}},5465:function(e,t,n){var i=n(7854),o=n(3505),r="__core-js_shared__",s=i[r]||o(r,{});e.exports=s},2309:function(e,t,n){var i=n(1913),o=n(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:i?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(e,t,n){var i=n(9670),o=n(3099),r=n(5112)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[r])?t:o(n)}},8710:function(e,t,n){var i=n(9958),o=n(4488),r=function(e){return function(t,n){var r,s,a=String(o(t)),l=i(n),c=a.length;return l<0||l>=c?e?"":void 0:(r=a.charCodeAt(l))<55296||r>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):r:e?a.slice(l,l+2):s-56320+(r-55296<<10)+65536}};e.exports={codeAt:r(!1),charAt:r(!0)}},3197:function(e){"use strict";var t=2147483647,n=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",r=Math.floor,s=String.fromCharCode,a=function(e){return e+22+75*(e<26)},l=function(e,t,n){var i=0;for(e=n?r(e/700):e>>1,e+=r(e/t);e>455;i+=36)e=r(e/35);return r(i+36*e/(e+38))},c=function(e){var n,i,c=[],u=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<i){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&o)<<10)+(1023&r)+65536):(t.push(o),n--)}else t.push(o)}return t}(e)).length,d=128,h=0,p=72;for(n=0;n<e.length;n++)(i=e[n])<128&&c.push(s(i));var f=c.length,m=f;for(f&&c.push("-");m<u;){var g=t;for(n=0;n<e.length;n++)(i=e[n])>=d&&i<g&&(g=i);var v=m+1;if(g-d>r((t-h)/v))throw RangeError(o);for(h+=(g-d)*v,d=g,n=0;n<e.length;n++){if((i=e[n])<d&&++h>t)throw RangeError(o);if(i==d){for(var _=h,y=36;;y+=36){var b=y<=p?1:y>=p+26?26:y-p;if(_<b)break;var x=_-b,w=36-b;c.push(s(a(b+x%w))),_=r(x/w)}c.push(s(a(_))),p=l(h,v,m==f),h=0,++m}}++h,++d}return c.join("")};e.exports=function(e){var t,o,r=[],s=e.toLowerCase().replace(i,".").split(".");for(t=0;t<s.length;t++)o=s[t],r.push(n.test(o)?"xn--"+c(o):o);return r.join(".")}},6091:function(e,t,n){var i=n(7293),o=n(1361);e.exports=function(e){return i((function(){return!!o[e]()||""!=""[e]()||o[e].name!==e}))}},3111:function(e,t,n){var i=n(4488),o="["+n(1361)+"]",r=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),a=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(r,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:a(1),end:a(2),trim:a(3)}},1400:function(e,t,n){var i=n(9958),o=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):r(n,t)}},7067:function(e,t,n){var i=n(9958),o=n(7466);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=o(t);if(t!==n)throw RangeError("Wrong length or index");return n}},5656:function(e,t,n){var i=n(8361),o=n(4488);e.exports=function(e){return i(o(e))}},9958:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},7466:function(e,t,n){var i=n(9958),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},7908:function(e,t,n){var i=n(4488);e.exports=function(e){return Object(i(e))}},4590:function(e,t,n){var i=n(3002);e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},3002:function(e,t,n){var i=n(9958);e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},7593:function(e,t,n){var i=n(111);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},1694:function(e,t,n){var i={};i[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(i)},9843:function(e,t,n){"use strict";var i=n(2109),o=n(7854),r=n(9781),s=n(3832),a=n(260),l=n(3331),c=n(5787),u=n(9114),d=n(8880),h=n(7466),p=n(7067),f=n(4590),m=n(7593),g=n(6656),v=n(648),_=n(111),y=n(30),b=n(7674),x=n(8006).f,w=n(7321),k=n(2092).forEach,S=n(6340),C=n(3070),E=n(1236),$=n(9909),T=n(9587),A=$.get,D=$.set,O=C.f,P=E.f,N=Math.round,j=o.RangeError,M=l.ArrayBuffer,I=l.DataView,R=a.NATIVE_ARRAY_BUFFER_VIEWS,L=a.TYPED_ARRAY_TAG,F=a.TypedArray,z=a.TypedArrayPrototype,B=a.aTypedArrayConstructor,H=a.isTypedArray,W="BYTES_PER_ELEMENT",U="Wrong length",q=function(e,t){for(var n=0,i=t.length,o=new(B(e))(i);i>n;)o[n]=t[n++];return o},V=function(e,t){O(e,t,{get:function(){return A(this)[t]}})},G=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},K=function(e,t){return H(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},J=function(e,t){return K(e,t=m(t,!0))?u(2,e[t]):P(e,t)},Y=function(e,t,n){return!(K(e,t=m(t,!0))&&_(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?O(e,t,n):(e[t]=n.value,e)};r?(R||(E.f=J,C.f=Y,V(z,"buffer"),V(z,"byteOffset"),V(z,"byteLength"),V(z,"length")),i({target:"Object",stat:!0,forced:!R},{getOwnPropertyDescriptor:J,defineProperty:Y}),e.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,a=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,m=o[a],g=m,v=g&&g.prototype,C={},E=function(e,t){O(e,t,{get:function(){return function(e,t){var n=A(e);return n.view[l](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=A(e);n&&(i=(i=N(i))<0?0:i>255?255:255&i),o.view[u](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};R?s&&(g=t((function(e,t,n,i){return c(e,g,a),T(_(t)?G(t)?void 0!==i?new m(t,f(n,r),i):void 0!==n?new m(t,f(n,r)):new m(t):H(t)?q(g,t):w.call(g,t):new m(p(t)),e,g)})),b&&b(g,F),k(x(m),(function(e){e in g||d(g,e,m[e])})),g.prototype=v):(g=t((function(e,t,n,i){c(e,g,a);var o,s,l,u=0,d=0;if(_(t)){if(!G(t))return H(t)?q(g,t):w.call(g,t);o=t,d=f(n,r);var m=t.byteLength;if(void 0===i){if(m%r)throw j(U);if((s=m-d)<0)throw j(U)}else if((s=h(i)*r)+d>m)throw j(U);l=s/r}else l=p(t),o=new M(s=l*r);for(D(e,{buffer:o,byteOffset:d,byteLength:s,length:l,view:new I(o)});u<l;)E(e,u++)})),b&&b(g,F),v=g.prototype=y(z)),v.constructor!==g&&d(v,"constructor",g),L&&d(v,L,a),C[a]=g,i({global:!0,forced:g!=m,sham:!R},C),W in g||d(g,W,r),W in v||d(v,W,r),S(a)}):e.exports=function(){}},3832:function(e,t,n){var i=n(7854),o=n(7293),r=n(7072),s=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=i.ArrayBuffer,l=i.Int8Array;e.exports=!s||!o((function(){l(1)}))||!o((function(){new l(-1)}))||!r((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||o((function(){return 1!==new l(new a(2),1,void 0).length}))},3074:function(e,t,n){var i=n(260).aTypedArrayConstructor,o=n(6707);e.exports=function(e,t){for(var n=o(e,e.constructor),r=0,s=t.length,a=new(i(n))(s);s>r;)a[r]=t[r++];return a}},7321:function(e,t,n){var i=n(7908),o=n(7466),r=n(1246),s=n(7659),a=n(9974),l=n(260).aTypedArrayConstructor;e.exports=function(e){var t,n,c,u,d,h,p=i(e),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=r(p);if(null!=v&&!s(v))for(h=(d=v.call(p)).next,p=[];!(u=h.call(d)).done;)p.push(u.value);for(g&&f>2&&(m=a(m,arguments[2],2)),n=o(p.length),c=new(l(this))(n),t=0;n>t;t++)c[t]=g?m(p[t],t):p[t];return c}},9711:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},3307:function(e,t,n){var i=n(133);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(e,t,n){var i=n(7854),o=n(2309),r=n(6656),s=n(9711),a=n(133),l=n(3307),c=o("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||s;e.exports=function(e){return r(c,e)||(a&&r(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},1361:function(e){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},8264:function(e,t,n){"use strict";var i=n(2109),o=n(7854),r=n(3331),s=n(6340),a="ArrayBuffer",l=r.ArrayBuffer;i({global:!0,forced:o.ArrayBuffer!==l},{ArrayBuffer:l}),s(a)},2222:function(e,t,n){"use strict";var i=n(2109),o=n(7293),r=n(3157),s=n(111),a=n(7908),l=n(7466),c=n(6135),u=n(5417),d=n(1194),h=n(5112),p=n(7392),f=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),_=d("concat"),y=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)};i({target:"Array",proto:!0,forced:!v||!_},{concat:function(e){var t,n,i,o,r,s=a(this),d=u(s,0),h=0;for(t=-1,i=arguments.length;t<i;t++)if(y(r=-1===t?s:arguments[t])){if(h+(o=l(r.length))>m)throw TypeError(g);for(n=0;n<o;n++,h++)n in r&&c(d,h,r[n])}else{if(h>=m)throw TypeError(g);c(d,h++,r)}return d.length=h,d}})},7327:function(e,t,n){"use strict";var i=n(2109),o=n(2092).filter;i({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},2772:function(e,t,n){"use strict";var i=n(2109),o=n(1318).indexOf,r=n(9341),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,l=r("indexOf");i({target:"Array",proto:!0,forced:a||!l},{indexOf:function(e){return a?s.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},6992:function(e,t,n){"use strict";var i=n(5656),o=n(1223),r=n(7497),s=n(9909),a=n(654),l="Array Iterator",c=s.set,u=s.getterFor(l);e.exports=a(Array,"Array",(function(e,t){c(this,{type:l,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},1249:function(e,t,n){"use strict";var i=n(2109),o=n(2092).map;i({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},7042:function(e,t,n){"use strict";var i=n(2109),o=n(111),r=n(3157),s=n(1400),a=n(7466),l=n(5656),c=n(6135),u=n(5112),d=n(1194)("slice"),h=u("species"),p=[].slice,f=Math.max;i({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,i,u,d=l(this),m=a(d.length),g=s(e,m),v=s(void 0===t?m:t,m);if(r(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!r(n.prototype)?o(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return p.call(d,g,v);for(i=new(void 0===n?Array:n)(f(v-g,0)),u=0;g<v;g++,u++)g in d&&c(i,u,d[g]);return i.length=u,i}})},561:function(e,t,n){"use strict";var i=n(2109),o=n(1400),r=n(9958),s=n(7466),a=n(7908),l=n(5417),c=n(6135),u=n(1194)("splice"),d=Math.max,h=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var n,i,u,m,g,v,_=a(this),y=s(_.length),b=o(e,y),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=y-b):(n=x-2,i=h(d(r(t),0),y-b)),y+n-i>p)throw TypeError(f);for(u=l(_,i),m=0;m<i;m++)(g=b+m)in _&&c(u,m,_[g]);if(u.length=i,n<i){for(m=b;m<y-i;m++)v=m+n,(g=m+i)in _?_[v]=_[g]:delete _[v];for(m=y;m>y-i+n;m--)delete _[m-1]}else if(n>i)for(m=y-i;m>b;m--)v=m+n-1,(g=m+i-1)in _?_[v]=_[g]:delete _[v];for(m=0;m<n;m++)_[m+b]=arguments[m+2];return _.length=y-i+n,u}})},8309:function(e,t,n){var i=n(9781),o=n(3070).f,r=Function.prototype,s=r.toString,a=/^\s*function ([^ (]*)/,l="name";i&&!(l in r)&&o(r,l,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(e){return""}}})},489:function(e,t,n){var i=n(2109),o=n(7293),r=n(7908),s=n(9518),a=n(8544);i({target:"Object",stat:!0,forced:o((function(){s(1)})),sham:!a},{getPrototypeOf:function(e){return s(r(e))}})},1539:function(e,t,n){var i=n(1694),o=n(1320),r=n(288);i||o(Object.prototype,"toString",r,{unsafe:!0})},4916:function(e,t,n){"use strict";var i=n(2109),o=n(2261);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},9714:function(e,t,n){"use strict";var i=n(1320),o=n(9670),r=n(7293),s=n(7066),a="toString",l=RegExp.prototype,c=l.toString,u=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=a;(u||d)&&i(RegExp.prototype,a,(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in l)?s.call(e):n)}),{unsafe:!0})},8783:function(e,t,n){"use strict";var i=n(8710).charAt,o=n(9909),r=n(654),s="String Iterator",a=o.set,l=o.getterFor(s);r(String,"String",(function(e){a(this,{type:s,string:String(e),index:0})}),(function(){var e,t=l(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=i(n,o),t.index+=e.length,{value:e,done:!1})}))},4723:function(e,t,n){"use strict";var i=n(7007),o=n(9670),r=n(7466),s=n(4488),a=n(1530),l=n(7651);i("match",1,(function(e,t,n){return[function(t){var n=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var s=o(e),c=String(this);if(!s.global)return l(s,c);var u=s.unicode;s.lastIndex=0;for(var d,h=[],p=0;null!==(d=l(s,c));){var f=String(d[0]);h[p]=f,""===f&&(s.lastIndex=a(c,r(s.lastIndex),u)),p++}return 0===p?null:h}]}))},5306:function(e,t,n){"use strict";var i=n(7007),o=n(9670),r=n(7466),s=n(9958),a=n(4488),l=n(1530),c=n(647),u=n(7651),d=Math.max,h=Math.min;i("replace",2,(function(e,t,n,i){var p=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=i.REPLACE_KEEPS_$0,m=p?"$":"$0";return[function(n,i){var o=a(this),r=null==n?void 0:n[e];return void 0!==r?r.call(n,o,i):t.call(String(o),n,i)},function(e,i){if(!p&&f||"string"==typeof i&&-1===i.indexOf(m)){var a=n(t,e,this,i);if(a.done)return a.value}var g=o(e),v=String(this),_="function"==typeof i;_||(i=String(i));var y=g.global;if(y){var b=g.unicode;g.lastIndex=0}for(var x=[];;){var w=u(g,v);if(null===w)break;if(x.push(w),!y)break;""===String(w[0])&&(g.lastIndex=l(v,r(g.lastIndex),b))}for(var k,S="",C=0,E=0;E<x.length;E++){w=x[E];for(var $=String(w[0]),T=d(h(s(w.index),v.length),0),A=[],D=1;D<w.length;D++)A.push(void 0===(k=w[D])?k:String(k));var O=w.groups;if(_){var P=[$].concat(A,T,v);void 0!==O&&P.push(O);var N=String(i.apply(void 0,P))}else N=c($,v,T,A,O,i);T>=C&&(S+=v.slice(C,T)+N,C=T+$.length)}return S+v.slice(C)}]}))},3123:function(e,t,n){"use strict";var i=n(7007),o=n(7850),r=n(9670),s=n(4488),a=n(6707),l=n(1530),c=n(7466),u=n(7651),d=n(2261),h=n(7293),p=[].push,f=Math.min,m=4294967295,g=!h((function(){return!RegExp(m,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(s(this)),r=void 0===n?m:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!o(e))return t.call(i,e,r);for(var a,l,c,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,h+"g");(a=d.call(g,i))&&!((l=g.lastIndex)>f&&(u.push(i.slice(f,a.index)),a.length>1&&a.index<i.length&&p.apply(u,a.slice(1)),c=a[0].length,f=l,u.length>=r));)g.lastIndex===a.index&&g.lastIndex++;return f===i.length?!c&&g.test("")||u.push(""):u.push(i.slice(f)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=s(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,o,n):i.call(String(o),t,n)},function(e,o){var s=n(i,e,this,o,i!==t);if(s.done)return s.value;var d=r(e),h=String(this),p=a(d,RegExp),v=d.unicode,_=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),y=new p(g?d:"^(?:"+d.source+")",_),b=void 0===o?m:o>>>0;if(0===b)return[];if(0===h.length)return null===u(y,h)?[h]:[];for(var x=0,w=0,k=[];w<h.length;){y.lastIndex=g?w:0;var S,C=u(y,g?h:h.slice(w));if(null===C||(S=f(c(y.lastIndex+(g?0:w)),h.length))===x)w=l(h,w,v);else{if(k.push(h.slice(x,w)),k.length===b)return k;for(var E=1;E<=C.length-1;E++)if(k.push(C[E]),k.length===b)return k;w=x=S}}return k.push(h.slice(x)),k}]}),!g)},3210:function(e,t,n){"use strict";var i=n(2109),o=n(3111).trim;i({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return o(this)}})},2990:function(e,t,n){"use strict";var i=n(260),o=n(1048),r=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return o.call(r(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var i=n(260),o=n(2092).every,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("every",(function(e){return o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:function(e,t,n){"use strict";var i=n(260),o=n(1285),r=i.aTypedArray;(0,i.exportTypedArrayMethod)("fill",(function(e){return o.apply(r(this),arguments)}))},5035:function(e,t,n){"use strict";var i=n(260),o=n(2092).filter,r=n(3074),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("filter",(function(e){var t=o(s(this),e,arguments.length>1?arguments[1]:void 0);return r(this,t)}))},7174:function(e,t,n){"use strict";var i=n(260),o=n(2092).findIndex,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("findIndex",(function(e){return o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var i=n(260),o=n(2092).find,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("find",(function(e){return o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},2846:function(e,t,n){"use strict";var i=n(260),o=n(2092).forEach,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("forEach",(function(e){o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},4731:function(e,t,n){"use strict";var i=n(260),o=n(1318).includes,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("includes",(function(e){return o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var i=n(260),o=n(1318).indexOf,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("indexOf",(function(e){return o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},6319:function(e,t,n){"use strict";var i=n(7854),o=n(260),r=n(6992),s=n(5112)("iterator"),a=i.Uint8Array,l=r.values,c=r.keys,u=r.entries,d=o.aTypedArray,h=o.exportTypedArrayMethod,p=a&&a.prototype[s],f=!!p&&("values"==p.name||null==p.name),m=function(){return l.call(d(this))};h("entries",(function(){return u.call(d(this))})),h("keys",(function(){return c.call(d(this))})),h("values",m,!f),h(s,m,!f)},8867:function(e,t,n){"use strict";var i=n(260),o=i.aTypedArray,r=i.exportTypedArrayMethod,s=[].join;r("join",(function(e){return s.apply(o(this),arguments)}))},7789:function(e,t,n){"use strict";var i=n(260),o=n(6583),r=i.aTypedArray;(0,i.exportTypedArrayMethod)("lastIndexOf",(function(e){return o.apply(r(this),arguments)}))},3739:function(e,t,n){"use strict";var i=n(260),o=n(2092).map,r=n(6707),s=i.aTypedArray,a=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("map",(function(e){return o(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(r(e,e.constructor)))(t)}))}))},4483:function(e,t,n){"use strict";var i=n(260),o=n(3671).right,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduceRight",(function(e){return o(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},9368:function(e,t,n){"use strict";var i=n(260),o=n(3671).left,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduce",(function(e){return o(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2056:function(e,t,n){"use strict";var i=n(260),o=i.aTypedArray,r=i.exportTypedArrayMethod,s=Math.floor;r("reverse",(function(){for(var e,t=this,n=o(t).length,i=s(n/2),r=0;r<i;)e=t[r],t[r++]=t[--n],t[n]=e;return t}))},3462:function(e,t,n){"use strict";var i=n(260),o=n(7466),r=n(4590),s=n(7908),a=n(7293),l=i.aTypedArray;(0,i.exportTypedArrayMethod)("set",(function(e){l(this);var t=r(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=s(e),a=o(i.length),c=0;if(a+t>n)throw RangeError("Wrong length");for(;c<a;)this[t+c]=i[c++]}),a((function(){new Int8Array(1).set({})})))},678:function(e,t,n){"use strict";var i=n(260),o=n(6707),r=n(7293),s=i.aTypedArray,a=i.aTypedArrayConstructor,l=i.exportTypedArrayMethod,c=[].slice;l("slice",(function(e,t){for(var n=c.call(s(this),e,t),i=o(this,this.constructor),r=0,l=n.length,u=new(a(i))(l);l>r;)u[r]=n[r++];return u}),r((function(){new Int8Array(1).slice()})))},7462:function(e,t,n){"use strict";var i=n(260),o=n(2092).some,r=i.aTypedArray;(0,i.exportTypedArrayMethod)("some",(function(e){return o(r(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:function(e,t,n){"use strict";var i=n(260),o=i.aTypedArray,r=i.exportTypedArrayMethod,s=[].sort;r("sort",(function(e){return s.call(o(this),e)}))},5021:function(e,t,n){"use strict";var i=n(260),o=n(7466),r=n(1400),s=n(6707),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("subarray",(function(e,t){var n=a(this),i=n.length,l=r(e,i);return new(s(n,n.constructor))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,o((void 0===t?i:r(t,i))-l))}))},2974:function(e,t,n){"use strict";var i=n(7854),o=n(260),r=n(7293),s=i.Int8Array,a=o.aTypedArray,l=o.exportTypedArrayMethod,c=[].toLocaleString,u=[].slice,d=!!s&&r((function(){c.call(new s(1))}));l("toLocaleString",(function(){return c.apply(d?u.call(a(this)):a(this),arguments)}),r((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!r((function(){s.prototype.toLocaleString.call([1,2])})))},5016:function(e,t,n){"use strict";var i=n(260).exportTypedArrayMethod,o=n(7293),r=n(7854).Uint8Array,s=r&&r.prototype||{},a=[].toString,l=[].join;o((function(){a.call({})}))&&(a=function(){return l.call(this)});var c=s.toString!=a;i("toString",a,c)},2472:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},4747:function(e,t,n){var i=n(7854),o=n(8324),r=n(8533),s=n(8880);for(var a in o){var l=i[a],c=l&&l.prototype;if(c&&c.forEach!==r)try{s(c,"forEach",r)}catch(e){c.forEach=r}}},3948:function(e,t,n){var i=n(7854),o=n(8324),r=n(6992),s=n(8880),a=n(5112),l=a("iterator"),c=a("toStringTag"),u=r.values;for(var d in o){var h=i[d],p=h&&h.prototype;if(p){if(p[l]!==u)try{s(p,l,u)}catch(e){p[l]=u}if(p[c]||s(p,c,d),o[d])for(var f in r)if(p[f]!==r[f])try{s(p,f,r[f])}catch(e){p[f]=r[f]}}}},1637:function(e,t,n){"use strict";n(6992);var i=n(2109),o=n(5005),r=n(590),s=n(1320),a=n(2248),l=n(8003),c=n(4994),u=n(9909),d=n(5787),h=n(6656),p=n(9974),f=n(648),m=n(9670),g=n(111),v=n(30),_=n(9114),y=n(8554),b=n(1246),x=n(5112),w=o("fetch"),k=o("Headers"),S=x("iterator"),C="URLSearchParams",E="URLSearchParamsIterator",$=u.set,T=u.getterFor(C),A=u.getterFor(E),D=/\+/g,O=Array(4),P=function(e){return O[e-1]||(O[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},N=function(e){try{return decodeURIComponent(e)}catch(t){return e}},j=function(e){var t=e.replace(D," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(P(n--),N);return t}},M=/[!'()~]|%20/g,I={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},R=function(e){return I[e]},L=function(e){return encodeURIComponent(e).replace(M,R)},F=function(e,t){if(t)for(var n,i,o=t.split("&"),r=0;r<o.length;)(n=o[r++]).length&&(i=n.split("="),e.push({key:j(i.shift()),value:j(i.join("="))}))},z=function(e){this.entries.length=0,F(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},H=c((function(e,t){$(this,{type:E,iterator:y(T(e).entries),kind:t})}),"Iterator",(function(){var e=A(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),W=function(){d(this,W,C);var e,t,n,i,o,r,s,a,l,c=arguments.length>0?arguments[0]:void 0,u=this,p=[];if($(u,{type:C,entries:p,updateURL:function(){},updateSearchParams:z}),void 0!==c)if(g(c))if("function"==typeof(e=b(c)))for(n=(t=e.call(c)).next;!(i=n.call(t)).done;){if((s=(r=(o=y(m(i.value))).next).call(o)).done||(a=r.call(o)).done||!r.call(o).done)throw TypeError("Expected sequence with length 2");p.push({key:s.value+"",value:a.value+""})}else for(l in c)h(c,l)&&p.push({key:l,value:c[l]+""});else F(p,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},U=W.prototype;a(U,{append:function(e,t){B(arguments.length,2);var n=T(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);for(var t=T(this),n=t.entries,i=e+"",o=0;o<n.length;)n[o].key===i?n.splice(o,1):o++;t.updateURL()},get:function(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",i=[],o=0;o<t.length;o++)t[o].key===n&&i.push(t[o].value);return i},has:function(e){B(arguments.length,1);for(var t=T(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){B(arguments.length,1);for(var n,i=T(this),o=i.entries,r=!1,s=e+"",a=t+"",l=0;l<o.length;l++)(n=o[l]).key===s&&(r?o.splice(l--,1):(r=!0,n.value=a));r||o.push({key:s,value:a}),i.updateURL()},sort:function(){var e,t,n,i=T(this),o=i.entries,r=o.slice();for(o.length=0,n=0;n<r.length;n++){for(e=r[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}i.updateURL()},forEach:function(e){for(var t,n=T(this).entries,i=p(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)i((t=n[o++]).value,t.key,this)},keys:function(){return new H(this,"keys")},values:function(){return new H(this,"values")},entries:function(){return new H(this,"entries")}},{enumerable:!0}),s(U,S,U.entries),s(U,"toString",(function(){for(var e,t=T(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(L(e.key)+"="+L(e.value));return n.join("&")}),{enumerable:!0}),l(W,C),i({global:!0,forced:!r},{URLSearchParams:W}),r||"function"!=typeof w||"function"!=typeof k||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,o=[e];return arguments.length>1&&(g(t=arguments[1])&&(n=t.body,f(n)===C&&((i=t.headers?new k(t.headers):new k).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:_(0,String(n)),headers:_(0,i)}))),o.push(t)),w.apply(this,o)}}),e.exports={URLSearchParams:W,getState:T}},285:function(e,t,n){"use strict";n(8783);var i,o=n(2109),r=n(9781),s=n(590),a=n(7854),l=n(6048),c=n(1320),u=n(5787),d=n(6656),h=n(1574),p=n(8457),f=n(8710).codeAt,m=n(3197),g=n(8003),v=n(1637),_=n(9909),y=a.URL,b=v.URLSearchParams,x=v.getState,w=_.set,k=_.getterFor("URL"),S=Math.floor,C=Math.pow,E="Invalid scheme",$="Invalid host",T="Invalid port",A=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,O=/\d/,P=/^(0x|0X)/,N=/^[0-7]+$/,j=/^\d+$/,M=/^[\dA-Fa-f]+$/,I=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,R=/[\u0000\t\u000A\u000D #/:?@[\\]]/,L=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\t\u000A\u000D]/g,z=function(e,t){var n,i,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return $;if(!(n=H(t.slice(1,-1))))return $;e.host=n}else if(Y(e)){if(t=m(t),I.test(t))return $;if(null===(n=B(t)))return $;e.host=n}else{if(R.test(t))return $;for(n="",i=p(t),o=0;o<i.length;o++)n+=K(i[o],U);e.host=n}},B=function(e){var t,n,i,o,r,s,a,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(o=l[i]))return e;if(r=10,o.length>1&&"0"==o.charAt(0)&&(r=P.test(o)?16:8,o=o.slice(8==r?1:2)),""===o)s=0;else{if(!(10==r?j:8==r?N:M).test(o))return e;s=parseInt(o,r)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=C(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*C(256,3-i);return a},H=function(e){var t,n,i,o,r,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&M.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,c>6)return;for(i=0;h();){if(o=null,i>0){if(!("."==h()&&i<4))return;d++}if(!O.test(h()))return;for(;O.test(h());){if(r=parseInt(h(),10),null===o)o=r;else{if(0==o)return;o=10*o+r}if(o>255)return;d++}l[c]=256*l[c]+o,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(s=c-u,c=7;0!=c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!=c)return;return l},W=function(e){var t,n,i,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=S(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,o=0,r=0;r<8;r++)0!==e[r]?(o>n&&(t=i,n=o),i=null,o=0):(null===i&&(i=r),++o);return o>n&&(t=i,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),i===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},U={},q=h({},U,{" ":1,'"':1,"<":1,">":1,"`":1}),V=h({},q,{"#":1,"?":1,"{":1,"}":1}),G=h({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),K=function(e,t){var n=f(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},J={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Y=function(e){return d(J,e.scheme)},X=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Z=function(e,t){var n;return 2==e.length&&A.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ee=function(e){var t;return e.length>1&&Z(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},te=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Z(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},ie={},oe={},re={},se={},ae={},le={},ce={},ue={},de={},he={},pe={},fe={},me={},ge={},ve={},_e={},ye={},be={},xe={},we={},ke={},Se=function(e,t,n,o){var r,s,a,l,c,u=n||ie,h=0,f="",m=!1,g=!1,v=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(L,"")),t=t.replace(F,""),r=p(t);h<=r.length;){switch(s=r[h],u){case ie:if(!s||!A.test(s)){if(n)return E;u=re;continue}f+=s.toLowerCase(),u=oe;break;case oe:if(s&&(D.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(n)return E;f="",u=re,h=0;continue}if(n&&(Y(e)!=d(J,f)||"file"==f&&(X(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,n)return void(Y(e)&&J[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?u=ge:Y(e)&&o&&o.scheme==e.scheme?u=se:Y(e)?u=ue:"/"==r[h+1]?(u=ae,h++):(e.cannotBeABaseURL=!0,e.path.push(""),u=xe)}break;case re:if(!o||o.cannotBeABaseURL&&"#"!=s)return E;if(o.cannotBeABaseURL&&"#"==s){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,u=ke;break}u="file"==o.scheme?ge:le;continue;case se:if("/"!=s||"/"!=r[h+1]){u=le;continue}u=de,h++;break;case ae:if("/"==s){u=he;break}u=be;continue;case le:if(e.scheme=o.scheme,s==i)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==s||"\\"==s&&Y(e))u=ce;else if("?"==s)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",u=we;else{if("#"!=s){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),u=be;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",u=ke}break;case ce:if(!Y(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,u=be;continue}u=he}else u=de;break;case ue:if(u=de,"/"!=s||"/"!=f.charAt(h+1))continue;h++;break;case de:if("/"!=s&&"\\"!=s){u=he;continue}break;case he:if("@"==s){m&&(f="%40"+f),m=!0,a=p(f);for(var _=0;_<a.length;_++){var y=a[_];if(":"!=y||v){var b=K(y,G);v?e.password+=b:e.username+=b}else v=!0}f=""}else if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&Y(e)){if(m&&""==f)return"Invalid authority";h-=p(f).length+1,f="",u=pe}else f+=s;break;case pe:case fe:if(n&&"file"==e.scheme){u=_e;continue}if(":"!=s||g){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&Y(e)){if(Y(e)&&""==f)return $;if(n&&""==f&&(X(e)||null!==e.port))return;if(l=z(e,f))return l;if(f="",u=ye,n)return;continue}"["==s?g=!0:"]"==s&&(g=!1),f+=s}else{if(""==f)return $;if(l=z(e,f))return l;if(f="",u=me,n==fe)return}break;case me:if(!O.test(s)){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&Y(e)||n){if(""!=f){var x=parseInt(f,10);if(x>65535)return T;e.port=Y(e)&&x===J[e.scheme]?null:x,f=""}if(n)return;u=ye;continue}return T}f+=s;break;case ge:if(e.scheme="file","/"==s||"\\"==s)u=ve;else{if(!o||"file"!=o.scheme){u=be;continue}if(s==i)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==s)e.host=o.host,e.path=o.path.slice(),e.query="",u=we;else{if("#"!=s){ee(r.slice(h).join(""))||(e.host=o.host,e.path=o.path.slice(),te(e)),u=be;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",u=ke}}break;case ve:if("/"==s||"\\"==s){u=_e;break}o&&"file"==o.scheme&&!ee(r.slice(h).join(""))&&(Z(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),u=be;continue;case _e:if(s==i||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&Z(f))u=be;else if(""==f){if(e.host="",n)return;u=ye}else{if(l=z(e,f))return l;if("localhost"==e.host&&(e.host=""),n)return;f="",u=ye}continue}f+=s;break;case ye:if(Y(e)){if(u=be,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=i&&(u=be,"/"!=s))continue}else e.fragment="",u=ke;else e.query="",u=we;break;case be:if(s==i||"/"==s||"\\"==s&&Y(e)||!n&&("?"==s||"#"==s)){if(".."===(c=(c=f).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(te(e),"/"==s||"\\"==s&&Y(e)||e.path.push("")):ne(f)?"/"==s||"\\"==s&&Y(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Z(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(s==i||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",u=we):"#"==s&&(e.fragment="",u=ke)}else f+=K(s,V);break;case xe:"?"==s?(e.query="",u=we):"#"==s?(e.fragment="",u=ke):s!=i&&(e.path[0]+=K(s,U));break;case we:n||"#"!=s?s!=i&&("'"==s&&Y(e)?e.query+="%27":e.query+="#"==s?"%23":K(s,U)):(e.fragment="",u=ke);break;case ke:s!=i&&(e.fragment+=K(s,q))}h++}},Ce=function(e){var t,n,i=u(this,Ce,"URL"),o=arguments.length>1?arguments[1]:void 0,s=String(e),a=w(i,{type:"URL"});if(void 0!==o)if(o instanceof Ce)t=k(o);else if(n=Se(t={},String(o)))throw TypeError(n);if(n=Se(a,s,null,t))throw TypeError(n);var l=a.searchParams=new b,c=x(l);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(l)||null},r||(i.href=$e.call(i),i.origin=Te.call(i),i.protocol=Ae.call(i),i.username=De.call(i),i.password=Oe.call(i),i.host=Pe.call(i),i.hostname=Ne.call(i),i.port=je.call(i),i.pathname=Me.call(i),i.search=Ie.call(i),i.searchParams=Re.call(i),i.hash=Le.call(i))},Ee=Ce.prototype,$e=function(){var e=k(this),t=e.scheme,n=e.username,i=e.password,o=e.host,r=e.port,s=e.path,a=e.query,l=e.fragment,c=t+":";return null!==o?(c+="//",X(e)&&(c+=n+(i?":"+i:"")+"@"),c+=W(o),null!==r&&(c+=":"+r)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},Te=function(){var e=k(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Y(e)?t+"://"+W(e.host)+(null!==n?":"+n:""):"null"},Ae=function(){return k(this).scheme+":"},De=function(){return k(this).username},Oe=function(){return k(this).password},Pe=function(){var e=k(this),t=e.host,n=e.port;return null===t?"":null===n?W(t):W(t)+":"+n},Ne=function(){var e=k(this).host;return null===e?"":W(e)},je=function(){var e=k(this).port;return null===e?"":String(e)},Me=function(){var e=k(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ie=function(){var e=k(this).query;return e?"?"+e:""},Re=function(){return k(this).searchParams},Le=function(){var e=k(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(r&&l(Ee,{href:Fe($e,(function(e){var t=k(this),n=String(e),i=Se(t,n);if(i)throw TypeError(i);x(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Te),protocol:Fe(Ae,(function(e){var t=k(this);Se(t,String(e)+":",ie)})),username:Fe(De,(function(e){var t=k(this),n=p(String(e));if(!Q(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=K(n[i],G)}})),password:Fe(Oe,(function(e){var t=k(this),n=p(String(e));if(!Q(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=K(n[i],G)}})),host:Fe(Pe,(function(e){var t=k(this);t.cannotBeABaseURL||Se(t,String(e),pe)})),hostname:Fe(Ne,(function(e){var t=k(this);t.cannotBeABaseURL||Se(t,String(e),fe)})),port:Fe(je,(function(e){var t=k(this);Q(t)||(""==(e=String(e))?t.port=null:Se(t,e,me))})),pathname:Fe(Me,(function(e){var t=k(this);t.cannotBeABaseURL||(t.path=[],Se(t,e+"",ye))})),search:Fe(Ie,(function(e){var t=k(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Se(t,e,we)),x(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(Re),hash:Fe(Le,(function(e){var t=k(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Se(t,e,ke)):t.fragment=null}))}),c(Ee,"toJSON",(function(){return $e.call(this)}),{enumerable:!0}),c(Ee,"toString",(function(){return $e.call(this)}),{enumerable:!0}),y){var ze=y.createObjectURL,Be=y.revokeObjectURL;ze&&c(Ce,"createObjectURL",(function(e){return ze.apply(y,arguments)})),Be&&c(Ce,"revokeObjectURL",(function(e){return Be.apply(y,arguments)}))}g(Ce,"URL"),o({global:!0,forced:!s,sham:!r},{URL:Ce})}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(i),n.d(i,{Dropzone:function(){return b},default:function(){return C}}),n(2222),n(7327),n(2772),n(6992),n(1249),n(7042),n(561),n(8264),n(8309),n(489),n(1539),n(4916),n(9714),n(8783),n(4723),n(5306),n(3123),n(3210),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(4747),n(3948),n(285);var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,r;return n=t,(i=[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(t){this._callbacks=this._callbacks||{};for(var n=this._callbacks[t],i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];if(n){var s,a=e(n,!0);try{for(a.s();!(s=a.n()).done;){var l=s.value;l.apply(this,o)}}catch(e){a.e(e)}finally{a.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+t,{args:o})),this}},{key:"makeEvent",value:function(e,t){var n={bubbles:!0,cancelable:!0,detail:t};if("function"==typeof window.CustomEvent)return new CustomEvent(e,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++){var o=n[i];if(o===t){n.splice(i,1);break}}return this}}])&&o(n.prototype,i),r&&o(n,r),t}();function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e;this.element.className="".concat(this.element.className," dz-browser-not-supported");var t,n=s(this.element.getElementsByTagName("div"),!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )dz-message($| )/.test(i.className)){e=i,i.className="dz-message";break}}}catch(e){n.e(e)}finally{n.f()}e||(e=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var o=e.getElementsByTagName("span")[0];return o&&(null!=o.textContent?o.textContent=this.options.dictFallbackMessage:null!=o.innerText&&(o.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var o={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},r=e.width/e.height;null==t&&null==n?(t=o.srcWidth,n=o.srcHeight):null==t?t=n*r:null==n&&(n=t/r);var s=(t=Math.min(t,o.srcWidth))/(n=Math.min(n,o.srcHeight));if(o.srcWidth>t||o.srcHeight>n)if("crop"===i)r>s?(o.srcHeight=e.height,o.srcWidth=o.srcHeight*s):(o.srcWidth=e.width,o.srcHeight=o.srcWidth/s);else{if("contain"!==i)throw new Error("Unknown resizeMethod '".concat(i,"'"));r>s?n=t/r:t=n*r}return o.srcX=(e.width-o.srcWidth)/2,o.srcY=(e.height-o.srcHeight)/2,o.trgWidth=t,o.trgHeight=n,o},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){e.previewElement=b.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var n,i=s(e.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.textContent=e.name}}catch(e){i.e(e)}finally{i.f()}var r,a=s(e.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(a.s();!(r=a.n()).done;)(o=r.value).innerHTML=this.filesize(e.size)}catch(e){a.e(e)}finally{a.f()}this.options.addRemoveLinks&&(e._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));var l,c=function(n){return n.preventDefault(),n.stopPropagation(),e.status===b.UPLOADING?b.confirm(t.options.dictCancelUploadConfirmation,(function(){return t.removeFile(e)})):t.options.dictRemoveFileConfirmation?b.confirm(t.options.dictRemoveFileConfirmation,(function(){return t.removeFile(e)})):t.removeFile(e)},u=s(e.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(u.s();!(l=u.n()).done;)l.value.addEventListener("click",c)}catch(e){u.e(e)}finally{u.f()}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var n,i=s(e.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.alt=e.name,o.src=t}}catch(e){i.e(e)}finally{i.f()}return setTimeout((function(){return e.previewElement.classList.add("dz-image-preview")}),1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);var n,i=s(e.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(i.s();!(n=i.n()).done;)n.value.textContent=t}catch(e){i.e(e)}finally{i.f()}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement){var i,o=s(e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(o.s();!(i=o.n()).done;){var r=i.value;"PROGRESS"===r.nodeName?r.value=t:r.style.width="".concat(t,"%")}}catch(e){o.e(e)}finally{o.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,e);var t=g(n);function n(e,i){var o,r,s;if(h(this,n),(o=t.call(this)).element=e,o.version=n.version,o.clickableElements=[],o.listeners=[],o.files=[],"string"==typeof o.element&&(o.element=document.querySelector(o.element)),!o.element||null==o.element.nodeType)throw new Error("Invalid dropzone element.");if(o.element.dropzone)throw new Error("Dropzone already attached.");n.instances.push(_(o)),o.element.dropzone=_(o);var a=null!=(s=n.optionsForElement(o.element))?s:{};if(o.options=n.extend({},l,a,null!=i?i:{}),o.options.previewTemplate=o.options.previewTemplate.replace(/\n*/g,""),o.options.forceFallback||!n.isBrowserSupported())return v(o,o.options.fallback.call(_(o)));if(null==o.options.url&&(o.options.url=o.element.getAttribute("action")),!o.options.url)throw new Error("No URL provided.");if(o.options.acceptedFiles&&o.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(o.options.uploadMultiple&&o.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return o.options.acceptedMimeTypes&&(o.options.acceptedFiles=o.options.acceptedMimeTypes,delete o.options.acceptedMimeTypes),null!=o.options.renameFilename&&(o.options.renameFile=function(e){return o.options.renameFilename.call(_(o),e.name,e)}),"string"==typeof o.options.method&&(o.options.method=o.options.method.toUpperCase()),(r=o.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),!1!==o.options.previewsContainer&&(o.options.previewsContainer?o.previewsContainer=n.getElement(o.options.previewsContainer,"previewsContainer"):o.previewsContainer=o.element),o.options.clickable&&(!0===o.options.clickable?o.clickableElements=[o.element]:o.clickableElements=n.getElements(o.options.clickable,"clickable")),o.init(),o}return f(n,[{key:"getAcceptedFiles",value:function(){return this.files.filter((function(e){return e.accepted})).map((function(e){return e}))}},{key:"getRejectedFiles",value:function(){return this.files.filter((function(e){return!e.accepted})).map((function(e){return e}))}},{key:"getFilesWithStatus",value:function(e){return this.files.filter((function(t){return t.status===e})).map((function(e){return e}))}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(n.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(n.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(n.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter((function(e){return e.status===n.UPLOADING||e.status===n.QUEUED})).map((function(e){return e}))}},{key:"init",value:function(){var e=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function t(){e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.setAttribute("tabindex","-1"),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",n.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",(function(){var n=e.hiddenFileInput.files;if(n.length){var i,o=u(n,!0);try{for(o.s();!(i=o.n()).done;){var r=i.value;e.addFile(r)}}catch(e){o.e(e)}finally{o.f()}}e.emit("addedfiles",n),t()}))}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var t,i=u(this.events,!0);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.on(o,this.options[o])}}catch(e){i.e(e)}finally{i.f()}this.on("uploadprogress",(function(){return e.updateTotalUploadProgress()})),this.on("removedfile",(function(){return e.updateTotalUploadProgress()})),this.on("canceled",(function(t){return e.emit("complete",t)})),this.on("complete",(function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout((function(){return e.emit("queuecomplete")}),0)}));var r=function(e){if(function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return r(t),e.emit("dragenter",t)},dragover:function(t){var n;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",r(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return r(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach((function(t){return e.listeners.push({element:t,events:{click:function(i){return(t!==e.element||i.target===e.element||n.elementInside(i.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,n=0;if(this.getActiveFiles().length){var i,o=u(this.getActiveFiles(),!0);try{for(o.s();!(i=o.n()).done;){var r=i.value;t+=r.upload.bytesSent,n+=r.upload.total}}catch(e){o.e(e)}finally{o.f()}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t;if(e=this.getExistingFallback())return e;var i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+="<p>".concat(this.options.dictFallbackText,"</p>")),i+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var o=n.createElement(i);return"FORM"!==this.element.tagName?(t=n.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(o):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:o}},{key:"getExistingFallback",value:function(){for(var e=function(e){var t,n=u(e,!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )fallback($| )/.test(i.className))return i}}catch(e){n.e(e)}finally{n.f()}},t=0,n=["div","form"];t<n.length;t++){var i,o=n[t];if(i=e(this.element.getElementsByTagName(o)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map((function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.addEventListener(n,i,!1))}return t}()}))}},{key:"removeEventListeners",value:function(){return this.listeners.map((function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.removeEventListener(n,i,!1))}return t}()}))}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach((function(e){return e.classList.remove("dz-clickable")})),this.removeEventListeners(),this.disabled=!0,this.files.map((function(t){return e.cancelUpload(t)}))}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach((function(e){return e.classList.add("dz-clickable")})),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(e>0){for(var i=["tb","gb","mb","kb","b"],o=0;o<i.length;o++){var r=i[o];if(e>=Math.pow(this.options.filesizeBase,4-o)/10){t=e/Math.pow(this.options.filesizeBase,4-o),n=r;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=(t=null!=e?e.clipboardData:void 0,n=function(e){return e.items},null!=t?n(t):void 0)){var t,n;this.emit("paste",e);var i=e.clipboardData.items;return i.length?this._addFilesFromItems(i):void 0}}},{key:"handleFiles",value:function(e){var t,n=u(e,!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.addFile(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){var n,i=[],o=u(e,!0);try{for(o.s();!(n=o.n()).done;){var r,s=n.value;null!=s.webkitGetAsEntry&&(r=s.webkitGetAsEntry())?r.isFile?i.push(t.addFile(s.getAsFile())):r.isDirectory?i.push(t._addFilesFromDirectory(r,r.name)):i.push(void 0):null==s.getAsFile||null!=s.kind&&"file"!==s.kind?i.push(void 0):i.push(t.addFile(s.getAsFile()))}}catch(e){o.e(e)}finally{o.f()}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var n=this,i=e.createReader(),o=function(e){return t=console,n="log",i=function(t){return t.log(e)},null!=t&&"function"==typeof t[n]?i(t,n):void 0;var t,n,i};return function e(){return i.readEntries((function(i){if(i.length>0){var o,r=u(i,!0);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.isFile?s.file((function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(t,"/").concat(e.name),n.addFile(e)})):s.isDirectory&&n._addFilesFromDirectory(s,"".concat(t,"/").concat(s.name))}}catch(e){r.e(e)}finally{r.f()}e()}return null}),o)}()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;e.upload={uuid:n.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(function(n){n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}))}},{key:"enqueueFiles",value:function(e){var t,n=u(e,!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.enqueueFile(i)}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==n.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=n.QUEUED,this.options.autoProcessQueue)return setTimeout((function(){return t.processQueue()}),0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout((function(){return t._processThumbnailQueue()}),0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()}))}}},{key:"removeFile",value:function(e){if(e.status===n.UPLOADING&&this.cancelUpload(e),this.files=x(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t,i=u(this.files.slice(),!0);try{for(i.s();!(t=i.n()).done;){var o=t.value;(o.status!==n.UPLOADING||e)&&this.removeFile(o)}}catch(e){i.e(e)}finally{i.f()}return null}},{key:"resizeImage",value:function(e,t,i,o,r){var s=this;return this.createThumbnail(e,t,i,o,!0,(function(t,i){if(null==i)return r(e);var o=s.options.resizeMimeType;null==o&&(o=e.type);var a=i.toDataURL(o,s.options.resizeQuality);return"image/jpeg"!==o&&"image/jpg"!==o||(a=S.restore(e.dataURL,a)),r(n.dataURItoBlob(a))}))}},{key:"createThumbnail",value:function(e,t,n,i,o,r){var s=this,a=new FileReader;a.onload=function(){e.dataURL=a.result,"image/svg+xml"!==e.type?s.createThumbnailFromUrl(e,t,n,i,o,r):null!=r&&r(a.result)},a.readAsDataURL(e)}},{key:"displayExistingFile",value:function(e,t,n,i){var o=this,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",e),this.emit("complete",e),r){var s=function(t){o.emit("thumbnail",e,t),n&&n()};e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,s,i)}else this.emit("thumbnail",e,t),n&&n()}},{key:"createThumbnailFromUrl",value:function(e,t,n,i,o,r,s){var a=this,l=document.createElement("img");return s&&(l.crossOrigin=s),o="from-image"!=getComputedStyle(document.body).imageOrientation&&o,l.onload=function(){var s=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&o&&(s=function(e){return EXIF.getData(l,(function(){return e(EXIF.getTag(this,"Orientation"))}))}),s((function(o){e.width=l.width,e.height=l.height;var s=a.options.resize.call(a,e,t,n,i),c=document.createElement("canvas"),u=c.getContext("2d");switch(c.width=s.trgWidth,c.height=s.trgHeight,o>4&&(c.width=s.trgHeight,c.height=s.trgWidth),o){case 2:u.translate(c.width,0),u.scale(-1,1);break;case 3:u.translate(c.width,c.height),u.rotate(Math.PI);break;case 4:u.translate(0,c.height),u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI),u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI),u.translate(0,-c.width);break;case 7:u.rotate(.5*Math.PI),u.translate(c.height,-c.width),u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI),u.translate(-c.height,0)}k(u,l,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);var d=c.toDataURL("image/png");if(null!=r)return r(d,c)}))},null!=r&&(l.onerror=r),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(t>=e)){var i=this.getQueuedFiles();if(i.length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t,i=u(e,!0);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.processing=!0,o.status=n.UPLOADING,this.emit("processing",o)}}catch(e){i.e(e)}finally{i.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter((function(t){return t.xhr===e})).map((function(e){return e}))}},{key:"cancelUpload",value:function(e){if(e.status===n.UPLOADING){var t,i=this._getFilesWithXhr(e.xhr),o=u(i,!0);try{for(o.s();!(t=o.n()).done;)t.value.status=n.CANCELED}catch(e){o.e(e)}finally{o.f()}void 0!==e.xhr&&e.xhr.abort();var r,s=u(i,!0);try{for(s.s();!(r=s.n()).done;){var a=r.value;this.emit("canceled",a)}}catch(e){s.e(e)}finally{s.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else e.status!==n.ADDED&&e.status!==n.QUEUED||(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,(function(i){if(t.options.chunking){var o=i[0];e[0].upload.chunked=t.options.chunking&&(t.options.forceChunking||o.size>t.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(o.size/t.options.chunkSize)}if(e[0].upload.chunked){var r=e[0],s=i[0];r.upload.chunks=[];var a=function(){for(var i=0;void 0!==r.upload.chunks[i];)i++;if(!(i>=r.upload.totalChunkCount)){var o=i*t.options.chunkSize,a=Math.min(o+t.options.chunkSize,s.size),l={name:t._getParamName(0),data:s.webkitSlice?s.webkitSlice(o,a):s.slice(o,a),filename:r.upload.filename,chunkIndex:i};r.upload.chunks[i]={file:r,index:i,dataBlock:l,status:n.UPLOADING,progress:0,retries:0},t._uploadData(e,[l])}};if(r.upload.finishedChunkUpload=function(i){var o=!0;i.status=n.SUCCESS,i.dataBlock=null,i.xhr=null;for(var s=0;s<r.upload.totalChunkCount;s++){if(void 0===r.upload.chunks[s])return a();r.upload.chunks[s].status!==n.SUCCESS&&(o=!1)}o&&t.options.chunksUploaded(r,(function(){t._finished(e,"",null)}))},t.options.parallelChunkUploads)for(var l=0;l<r.upload.totalChunkCount;l++)a();else a()}else{for(var c=[],u=0;u<e.length;u++)c[u]={name:t._getParamName(u),data:i[u],filename:e[u].upload.filename};t._uploadData(e,c)}}))}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(e,t){var i,o=this,r=new XMLHttpRequest,s=u(e,!0);try{for(s.s();!(i=s.n()).done;)i.value.xhr=r}catch(e){s.e(e)}finally{s.f()}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=r);var a=this.resolveOption(this.options.method,e),l=this.resolveOption(this.options.url,e);r.open(a,l,!0),r.timeout=this.resolveOption(this.options.timeout,e),r.withCredentials=!!this.options.withCredentials,r.onload=function(t){o._finishedUploading(e,r,t)},r.ontimeout=function(){o._handleUploadError(e,r,"Request timedout after ".concat(o.options.timeout/1e3," seconds"))},r.onerror=function(){o._handleUploadError(e,r)},(null!=r.upload?r.upload:r).onprogress=function(t){return o._updateFilesUploadProgress(e,r,t)};var c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var d in this.options.headers&&n.extend(c,this.options.headers),c){var h=c[d];h&&r.setRequestHeader(d,h)}var p=new FormData;if(this.options.params){var f=this.options.params;for(var m in"function"==typeof f&&(f=f.call(this,e,r,e[0].upload.chunked?this._getChunk(e[0],r):null)),f){var g=f[m];if(Array.isArray(g))for(var v=0;v<g.length;v++)p.append(m,g[v]);else p.append(m,g)}}var _,y=u(e,!0);try{for(y.s();!(_=y.n()).done;){var b=_.value;this.emit("sending",b,r,p)}}catch(e){y.e(e)}finally{y.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",e,r,p),this._addFormElementData(p);for(var x=0;x<t.length;x++){var w=t[x];p.append(w.name,w.data,w.filename)}this.submitRequest(r,p,e)}},{key:"_transformFiles",value:function(e,t){for(var n=this,i=[],o=0,r=function(r){n.options.transformFile.call(n,e[r],(function(n){i[r]=n,++o===e.length&&t(i)}))},s=0;s<e.length;s++)r(s)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t,n=u(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=i.getAttribute("name"),r=i.getAttribute("type");if(r&&(r=r.toLowerCase()),null!=o)if("SELECT"===i.tagName&&i.hasAttribute("multiple")){var s,a=u(i.options,!0);try{for(a.s();!(s=a.n()).done;){var l=s.value;l.selected&&e.append(o,l.value)}}catch(e){a.e(e)}finally{a.f()}}else(!r||"checkbox"!==r&&"radio"!==r||i.checked)&&e.append(o,i.value)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var i;if(void 0!==n){if(i=100*n.loaded/n.total,e[0].upload.chunked){var o=e[0],r=this._getChunk(o,t);r.progress=i,r.total=n.total,r.bytesSent=n.loaded,o.upload.progress=0,o.upload.total=0,o.upload.bytesSent=0;for(var s=0;s<o.upload.totalChunkCount;s++)void 0!==o.upload.chunks[s]&&void 0!==o.upload.chunks[s].progress&&(o.upload.progress+=o.upload.chunks[s].progress,o.upload.total+=o.upload.chunks[s].total,o.upload.bytesSent+=o.upload.chunks[s].bytesSent);o.upload.progress=o.upload.progress/o.upload.totalChunkCount}else{var a,l=u(e,!0);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.upload.progress=i,c.upload.total=n.total,c.upload.bytesSent=n.loaded}}catch(e){l.e(e)}finally{l.f()}}var d,h=u(e,!0);try{for(h.s();!(d=h.n()).done;){var p=d.value;this.emit("uploadprogress",p,p.upload.progress,p.upload.bytesSent)}}catch(e){h.e(e)}finally{h.f()}}else{var f=!0;i=100;var m,g=u(e,!0);try{for(g.s();!(m=g.n()).done;){var v=m.value;100===v.upload.progress&&v.upload.bytesSent===v.upload.total||(f=!1),v.upload.progress=i,v.upload.bytesSent=v.upload.total}}catch(e){g.e(e)}finally{g.f()}if(f)return;var _,y=u(e,!0);try{for(y.s();!(_=y.n()).done;){var b=_.value;this.emit("uploadprogress",b,i,b.upload.bytesSent)}}catch(e){y.e(e)}finally{y.f()}}}},{key:"_finishedUploading",value:function(e,t,i){var o;if(e[0].status!==n.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(o=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{o=JSON.parse(o)}catch(e){i=e,o="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,o,i):this._handleUploadError(e,t,o)}}},{key:"_handleUploadError",value:function(e,t,i){if(e[0].status!==n.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var o=this._getChunk(e[0],t);if(o.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[o.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,i||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t,n){e.send(t)}},{key:"_finished",value:function(e,t,i){var o,r=u(e,!0);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.status=n.SUCCESS,this.emit("success",s,t,i),this.emit("complete",s)}}catch(e){r.e(e)}finally{r.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,i){var o,r=u(e,!0);try{for(r.s();!(o=r.n()).done;){var s=o.value;s.status=n.ERROR,this.emit("error",s,t,i),this.emit("complete",s)}}catch(e){r.e(e)}finally{r.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=r,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,r=n;o<r.length;o++){var s=r[o];for(var a in s){var l=s[a];e[a]=l}}return e}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}}]),n}(r);b.initClass(),b.version="5.8.1",b.options={},b.optionsForElement=function(e){return e.getAttribute("id")?b.options[w(e.getAttribute("id"))]:void 0},b.instances=[],b.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},b.autoDiscover=!0,b.discover=function(){var e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){var n,i=[],o=u(t,!0);try{for(o.s();!(n=o.n()).done;){var r=n.value;/(^| )dropzone($| )/.test(r.className)?i.push(e.push(r)):i.push(void 0)}}catch(e){o.e(e)}finally{o.f()}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t,n=[],i=u(e,!0);try{for(i.s();!(t=i.n()).done;){var o=t.value;!1!==b.optionsForElement(o)?n.push(new b(o)):n.push(void 0)}}catch(e){i.e(e)}finally{i.f()}return n}()},b.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],b.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==b.blacklistedBrowsers&&(b.blockedBrowsers=b.blacklistedBrowsers);var t,n=u(b.blockedBrowsers,!0);try{for(n.s();!(t=n.n()).done;)t.value.test(navigator.userAgent)&&(e=!1)}catch(e){n.e(e)}finally{n.f()}}else e=!1;else e=!1;return e},b.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i),r=0,s=t.length,a=0<=s;a?r<=s:r>=s;a?r++:r--)o[r]=t.charCodeAt(r);return new Blob([i],{type:n})};var x=function(e,t){return e.filter((function(e){return e!==t})).map((function(e){return e}))},w=function(e){return e.replace(/[\-_](\w)/g,(function(e){return e.charAt(1).toUpperCase()}))};b.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},b.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},b.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},b.getElements=function(e,t){var n,i;if(e instanceof Array){i=[];try{var o,r=u(e,!0);try{for(r.s();!(o=r.n()).done;)n=o.value,i.push(this.getElement(n,t))}catch(e){r.e(e)}finally{r.f()}}catch(e){i=null}}else if("string"==typeof e){i=[];var s,a=u(document.querySelectorAll(e),!0);try{for(a.s();!(s=a.n()).done;)n=s.value,i.push(n)}catch(e){a.e(e)}finally{a.f()}}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},b.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},b.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var n,i=e.type,o=i.replace(/\/.*$/,""),r=u(t,!0);try{for(r.s();!(n=r.n()).done;){var s=n.value;if("."===(s=s.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(s.toLowerCase(),e.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(o===s.replace(/\/.*$/,""))return!0}else if(i===s)return!0}}catch(e){r.e(e)}finally{r.f()}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each((function(){return new b(this,e)}))}),b.ADDED="added",b.QUEUED="queued",b.ACCEPTED=b.QUEUED,b.UPLOADING="uploading",b.PROCESSING=b.UPLOADING,b.CANCELED="canceled",b.ERROR="error",b.SUCCESS="success";var k=function(e,t,n,i,o,r,s,a,l,c){var u=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var o=i.getImageData(1,0,1,t).data,r=0,s=t,a=t;a>r;)0===o[4*(a-1)+3]?s=a:r=a,a=s+r>>1;var l=a/t;return 0===l?1:l}(t);return e.drawImage(t,n,i,o,r,s,a,l,c/u)},S=function(){function e(){h(this,e)}return f(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,o="",r=void 0,s=void 0,a=void 0,l="",c=0;r=(n=e[c++])>>2,s=(3&n)<<4|(i=e[c++])>>4,a=(15&i)<<2|(o=e[c++])>>6,l=63&o,isNaN(i)?a=l=64:isNaN(o)&&(l=64),t=t+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),n=i=o="",r=s=a=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),o=this.exifManipulation(t,i);return"data:image/jpeg;base64,".concat(this.encode64(o))}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),o=i.indexOf(255,3),r=i.slice(0,o),s=i.slice(o),a=r;return a=(a=a.concat(t)).concat(s)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,o=e.slice(t,i);n.push(o),t=i}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",o=void 0,r=void 0,s="",a=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(o=this.KEY_STR.indexOf(e.charAt(a++)))>>4,n=(15&o)<<4|(r=this.KEY_STR.indexOf(e.charAt(a++)))>>2,i=(3&r)<<6|(s=this.KEY_STR.indexOf(e.charAt(a++))),l.push(t),64!==r&&l.push(n),64!==s&&l.push(i),t=n=i="",o=r=s="",a<e.length;);return l}}]),e}();S.initClass(),b._autoDiscoverFunction=function(){if(b.autoDiscover)return b.discover()},function(e,t){var n=!1,i=!0,o=e.document,r=o.documentElement,s=o.addEventListener?"addEventListener":"attachEvent",a=o.addEventListener?"removeEventListener":"detachEvent",l=o.addEventListener?"":"on",c=function i(r){if("readystatechange"!==r.type||"complete"===o.readyState)return("load"===r.type?e:o)[a](l+r.type,i,!1),!n&&(n=!0)?t.call(e,r.type||r):void 0};if("complete"!==o.readyState){if(o.createEventObject&&r.doScroll){try{i=!e.frameElement}catch(e){}i&&function e(){try{r.doScroll("left")}catch(t){return void setTimeout(e,50)}return c("poll")}()}o[s](l+"DOMContentLoaded",c,!1),o[s](l+"readystatechange",c,!1),e[s](l+"load",c,!1)}}(window,b._autoDiscoverFunction),window.Dropzone=b;var C=b}(),i}()},e.exports=t()},4676:(e,t,n)=>{var i=n(7187).EventEmitter;function o(e){i.call(this),e=e||{},this.states=e.states||["default"],this.currentState=e.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var t=this;this.on("transition",(function(e){t.events.forEach((function(n){n.from===e.from&&n.to===e.to&&t.emit(n.event)}))}))}o.prototype=Object.create(i.prototype),o.prototype.setState=function(e){var t=this.currentState;if(!this._validate(t,e))return!1;this.history.push({state:t,args:this.currentArgs});var n=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=n,this.currentState=e,this._emit(t,e,n),!0},o.prototype.back=function(){if(!this.history.length)return!1;var e=this.history[this.history.length-1],t=this.currentState,n=e.state,i=e.args;return!!this._validate(t,n)&&(this.history.pop(),this.currentState=n,this.currentArgs=i,this._emit(t,n,i,!0),!0)},o.prototype.lock=function(){this.locked=!0},o.prototype.unlock=function(){this.locked=!1},o.prototype.config=function(e,t){t.to=t.to||{},t.from=t.from||{},this.configs[e]=t},o.prototype.register=function(e,t){this.events.push({event:e,from:t.from,to:t.to})},o.prototype._emit=function(e,t,n,i){var o={from:e,to:t,args:n,back:i};this.emit("transition",o),this.emit("leave:"+e,o),this.emit("enter:"+t,o)},o.prototype._validate=function(e,t){if(!(this.locked||e===t||this.states.indexOf(t)<0)){var n=this.configs[e];if(n)if(n.to.only){if(n.to.only.indexOf(t)<0)return}else if(n.to.exclude&&n.to.exclude.indexOf(t)>-1)return;var i=this.configs[t];if(i)if(i.from.only){if(i.from.only.indexOf(e)<0)return}else if(i.from.exclude&&i.from.exclude.indexOf(e)>-1)return;return!0}},e.exports=o},4576:(e,t,n)=>{"use strict";var i=n(8686);e.exports=function(e){for(var t=e[0],n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];for(var s=0;s<o.length;s++)t=t+i(o[s])+e[s+1];return t}},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,i){function o(){void 0!==r&&e.removeListener("error",r),n([].slice.call(arguments))}var r;"error"!==t&&(r=function(n){e.removeListener(t,o),i(n)},e.once("error",r)),e.once(t,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,r,s,c;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=u.bind(i);return o.listener=n,i.wrapFn=o,o}function h(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},r.prototype.addListener=function(e,t){return c(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return c(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,o,r,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4063:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,o,r;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,r[o]))return!1;for(o=i;0!=o--;){var s=r[o];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},6400:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])}})})?i.apply(t,o):i)||(e.exports=r)},2064:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t})?i.apply(t,o):i)||(e.exports=r)},5042:(e,t,n)=>{var i,o,r;o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t})?i.apply(t,o):i)||(e.exports=r)},5436:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}return e.ui.focusable=function(n,i){var o,r,s,a,l,c=n.nodeName.toLowerCase();return"area"===c?(r=(o=n.parentNode).name,!(!n.href||!r||"map"!==o.nodeName.toLowerCase())&&(s=e("img[usemap='#"+r+"']")).length>0&&s.is(":visible")):(/^(input|select|textarea|button|object)$/.test(c)?(a=!n.disabled)&&(l=e(n).closest("fieldset")[0])&&(a=!l.disabled):a="a"===c&&n.href||i,a&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable})?i.apply(t,o):i)||(e.exports=r)},7808:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5588),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var n=t.data("ui-form-reset-instances");e.each(n,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?i.apply(t,o):i)||(e.exports=r)},5588:(e,t,n)=>{var i,o,r;o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}})?i.apply(t,o):i)||(e.exports=r)},1870:(e,t,n)=>{var i,o,r;o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(t,o):i)||(e.exports=r)},7053:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(t,o):i)||(e.exports=r)},6575:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592),n(5042)],void 0===(r="function"==typeof(i=function(e){return e.fn.labels=function(){var t,n,i,o,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),(i=this.attr("id"))&&(r=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",o=o.add(r.find(n).addBack(n))),this.pushStack(o))}})?i.apply(t,o):i)||(e.exports=r)},1624:(e,t,n)=>{var i,o,r;o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.plugin={add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,r=e.plugins[t];if(r&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,n)}}})?i.apply(t,o):i)||(e.exports=r)},1822:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return function(){var t,n=Math.max,i=Math.abs,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function d(t,n){return parseInt(e.css(t,n),10)||0}function h(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),n=r.offsetWidth,o.css("overflow","scroll"),n===(i=r.offsetWidth)&&(i=o[0].clientWidth),o.remove(),t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:i||o?{left:0,top:0}:e(t).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,p,f,m,g,v,_=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),x=(t.collision||"flip").split(" "),w={};return v=h(_),_[0].preventDefault&&(t.at="left top"),p=v.width,f=v.height,m=v.offset,g=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=o.test(i[0])?i.concat(["center"]):r.test(i[0])?["center"].concat(i):["center","center"]),i[0]=o.test(i[0])?i[0]:"center",i[1]=r.test(i[1])?i[1]:"center",e=s.exec(i[0]),n=s.exec(i[1]),w[this]=[e?e[0]:0,n?n[0]:0],t[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=f:"center"===t.at[1]&&(g.top+=f/2),l=u(w.at,p,f),g.left+=l[0],g.top+=l[1],this.each((function(){var o,r,s=e(this),a=s.outerWidth(),c=s.outerHeight(),h=d(this,"marginLeft"),v=d(this,"marginTop"),k=a+h+d(this,"marginRight")+b.width,S=c+v+d(this,"marginBottom")+b.height,C=e.extend({},g),E=u(w.my,s.outerWidth(),s.outerHeight());"right"===t.my[0]?C.left-=a:"center"===t.my[0]&&(C.left-=a/2),"bottom"===t.my[1]?C.top-=c:"center"===t.my[1]&&(C.top-=c/2),C.left+=E[0],C.top+=E[1],o={marginLeft:h,marginTop:v},e.each(["left","top"],(function(n,i){e.ui.position[x[n]]&&e.ui.position[x[n]][i](C,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:k,collisionHeight:S,offset:[l[0]+E[0],l[1]+E[1]],my:t.my,at:t.at,within:y,elem:s})})),t.using&&(r=function(e){var o=m.left-C.left,r=o+p-a,l=m.top-C.top,u=l+f-c,d={target:{element:_,left:m.left,top:m.top,width:p,height:f},element:{element:s,left:C.left,top:C.top,width:a,height:c},horizontal:r<0?"left":o>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};p<a&&i(o+r)<p&&(d.horizontal="center"),f<c&&i(l+u)<f&&(d.vertical="middle"),n(i(o),i(r))>n(i(l),i(u))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),s.offset(e.extend(C,{using:r}))}))},e.ui.position={fit:{left:function(e,t){var i,o=t.within,r=o.isWindow?o.scrollLeft:o.offset.left,s=o.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,c=a+t.collisionWidth-s-r;t.collisionWidth>s?l>0&&c<=0?(i=e.left+l+t.collisionWidth-s-r,e.left+=l-i):e.left=c>0&&l<=0?r:l>c?r+s-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=n(e.left-a,e.left)},top:function(e,t){var i,o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,c=a+t.collisionHeight-s-r;t.collisionHeight>s?l>0&&c<=0?(i=e.top+l+t.collisionHeight-s-r,e.top+=l-i):e.top=c>0&&l<=0?r:l>c?r+s-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=n(e.top-a,e.top)}},flip:{left:function(e,t){var n,o,r=t.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((n=e.left+h+p+f+t.collisionWidth-a-s)<0||n<i(u))&&(e.left+=h+p+f):d>0&&((o=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||i(o)<d)&&(e.left+=h+p+f)},top:function(e,t){var n,o,r=t.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];u<0?((o=e.top+h+p+f+t.collisionHeight-a-s)<0||o<i(u))&&(e.top+=h+p+f):d>0&&((n=e.top-t.collisionPosition.marginTop+h+p+f-l)>0||i(n)<d)&&(e.top+=h+p+f)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})?i.apply(t,o):i)||(e.exports=r)},1440:(e,t,n)=>{var i,o,r;o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})?i.apply(t,o):i)||(e.exports=r)},192:(e,t,n)=>{var i,o,r;o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})?i.apply(t,o):i)||(e.exports=r)},464:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter((function(){var t=e(this);return(!i||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&r.length?r:e(this[0].ownerDocument||document)}})?i.apply(t,o):i)||(e.exports=r)},3614:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592),n(5436)],void 0===(r="function"==typeof(i=function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}})})?i.apply(t,o):i)||(e.exports=r)},9138:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++t)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}});var t})?i.apply(t,o):i)||(e.exports=r)},5592:(e,t,n)=>{var i,o,r;o=[n(9755)],void 0===(r="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?i.apply(t,o):i)||(e.exports=r)},6891:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(r="function"==typeof(i=function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{(i=e._data(o,"events"))&&i.remove&&e(o).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var o,r,s,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,(function(t,i){e.isFunction(i)?a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}():a[t]=i})),r.prototype=e.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},a,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,r,n._proto)})),delete o._childConstructors):n._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),s=0,a=r.length;s<a;s++)for(n in r[s])o=r[s][n],r[s].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=i.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each((function(){var n,i=e.data(this,o);return"instance"===r?(l=i,!1):i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,a))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):l=void 0:(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each((function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function o(o,r){var s,a;for(a=0;a<o.length;a++)s=i.classesElementLookup[o[a]]||e(),s=t.add?e(e.unique(s.get().concat(t.element.get()))):e(s.not(t.element).get()),i.classesElementLookup[o[a]]=s,n.push(o[a]),r&&t.classes[o[a]]&&n.push(t.classes[o[a]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(i,o){-1!==e.inArray(t.target,o)&&(n.classesElementLookup[i]=e(o.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,r={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,(function(i,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,a):n.on(c,a)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var o,r,s=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){var s;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?n:o.effect||n:t;"number"==typeof(o=o||{})&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&e.effects&&e.effects.effect[a]?i[t](o):a!==t&&i[a]?i[a](o.duration,o.easing,r):i.queue((function(n){e(this)[t](),r&&r.call(i[0]),n()}))}})),e.widget})?i.apply(t,o):i)||(e.exports=r)},2993:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(8851),n(7053),n(1822),n(1440),n(5592),n(6891)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(t,n){var i,o;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),(i=n.item.attr("aria-label")||o.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay((function(){this.previous=o,this.selectedItem=i}))),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete})?i.apply(t,o):i)||(e.exports=r)},9366:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(341),n(1193),n(7053),n(6891)],void 0===(r="function"==typeof(i=function(e){var t;return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,o=i?this.options.iconPosition:n,r="top"===o||"bottom"===o;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(o),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=(t=e.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button})?i.apply(t,o):i)||(e.exports=r)},1193:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5042),n(7808),n(6575),n(6891)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,i=this,o=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML})),this.originalLabel&&(o.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(o.disabled=t),o},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,n="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(n):e(n).filter((function(){return 0===e(this).form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio})?i.apply(t,o):i)||(e.exports=r)},341:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(6891)],void 0===(r="function"==typeof(i=function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,(function(i,o){var r,s={};if(o)return"controlgroupLabel"===i?((r=t.element.find(o)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(r.get()))):void(e.fn[i]&&(s=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}},t.element.find(o).each((function(){var o=e(this),r=o[i]("instance"),a=e.widget.extend({},s);if("button"!==i||!o.parent(".ui-spinner").length){r||(r=o[i]()[i]("instance")),r&&(a.classes=t._resolveClassesValues(a.classes,r)),o[i](a);var l=o[i]("widget");e.data(l[0],"ui-controlgroup-data",r||o[i]("instance")),n.push(l[0])}}))))})),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var n=e(this).data("ui-controlgroup-data");n&&n[t]&&n[t]()}))},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var o={};return e.each(n,(function(r){var s=i.options.classes[r]||"";s=e.trim(s.replace(t,"")),o[r]=(s+" "+n[r]).replace(/\s+/g," ")})),o},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,i){var o=t[i]().data("ui-controlgroup-data");if(o&&n["_"+o.widgetName+"Options"]){var r=n["_"+o.widgetName+"Options"](1===t.length?"only":i);r.classes=n._resolveClassesValues(r.classes,o),o.element[o.widgetName](r)}else n._updateCornerClass(t[i](),i)})),this._callChildMethod("refresh"))}})})?i.apply(t,o):i)||(e.exports=r)},2466:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(9366),n(7285),n(6177),n(1707),n(5436),n(7053),n(1822),n(1440),n(192),n(3614),n(9138),n(5592),n(6891)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,o=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){o.trigger("focus")})),t.preventDefault()):(this._delay((function(){i.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,(function(n,i){var o,r;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),o=i.click,r={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,e("<button></button>",i).button(r).appendTo(t.uiButtonSet).on("click",(function(){o.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,i(o))},drag:function(e,n){t._trigger("drag",e,i(n))},stop:function(o,r){var s=r.offset.left-t.document.scrollLeft(),a=r.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",o,i(r))}})},_makeResizable:function(){var t=this,n=this.options,i=n.resizable,o=this.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,i){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,s(i))},resize:function(e,n){t._trigger("resize",e,s(n))},stop:function(i,o){var r=t.uiDialog.offset(),a=r.left-t.document.scrollLeft(),l=r.top-t.document.scrollTop();n.height=t.uiDialog.height(),n.width=t.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",i,s(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,o={};e.each(t,(function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(o[e]=t)})),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,n){var i,o,r=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=r.is(":data(ui-draggable)"))&&!n&&r.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((o=r.is(":data(ui-resizable)"))&&!n&&r.resizable("destroy"),o&&"string"==typeof n&&r.resizable("option","handles",n),o||!1===n||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay((function(){t=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog})?i.apply(t,o):i)||(e.exports=r)},7285:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(6177),n(6400),n(1624),n(1440),n(192),n(464),n(5592),n(6891)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(t),!this.handle||(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",t)&&n._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),o=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,r=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(i=(n=e(o.containment))[0])&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=o.containment:this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each((function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,o))}))},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,(function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))}))},drag:function(t,n,i){e.each(i.sortables,(function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o}))),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",t),i.dropped=r.element,e.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(t),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,r=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})}))},drag:function(t,n,i){var o,r,s,a,l,c,u,d,h,p,f=i.options,m=f.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,_=n.offset.top,y=_+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)c=(l=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,d=(u=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,v<l-m||g>c+m||y<u-m||_>d+m||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(u-y)<=m,r=Math.abs(d-_)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(u-_)<=m,r=Math.abs(d-y)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(o||r||s||a||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=o||r||s||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,r=i.options,s=e.makeArray(e(r.stack)).sort((function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)}));s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each((function(t){e(this).css("zIndex",o+t)})),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}}),e.ui.draggable})?i.apply(t,o):i)||(e.exports=r)},8851:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(7053),n(1822),n(1440),n(9138),n(5592),n(6891)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var n,i,o,r,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,i=this.previousFilter||"",r=!1,o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),o===i?r=!0:o=i+o,n=this._filterMenuItems(o),(n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(o=String.fromCharCode(t.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(t,n),this.previousFilter=o,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,o,r=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);r._addClass(i,"ui-menu-icon","ui-icon "+s),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(t=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);r._isDivider(t)&&r._addClass(t,"ui-menu-divider","ui-widget-content")})),o=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,o;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,r,s,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-o<0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,o;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+o>0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))}))}})})?i.apply(t,o):i)||(e.exports=r)},6177:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(1870),n(5592),n(6891)],void 0===(r="function"==typeof(i=function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(t,o):i)||(e.exports=r)},1707:(e,t,n)=>{var i,o,r;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(6177),n(2064),n(1624),n(5592),n(6891)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0||(t[i]=1,o=t[i]>0,t[i]=0,o)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",(function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())})).on("mouseleave",(function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,o,r,s=this.options,a=this;if(this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)o="ui-resizable-"+(t=e.trim(i[n])),r=e("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(r);this._renderAxis=function(t){var n,i,o,r;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")})),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,i+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,r=this.axis,s=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,o,r,s,a,l,c=this.options,u=this;return this._helper&&(o=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,r=i?0:u.sizeDiff.width,s={width:u.helper.width()-r,height:u.helper.height()-o},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=a-t.minWidth),i&&c&&(e.left=a-t.maxWidth),s&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(o[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,r,s,a,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,h=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(l.containerElement=e(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each((function(e,i){n[e]=l._num(t.css("padding"+i))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:r,a=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:i.left,top:i.top,width:s,height:a}))},resize:function(t){var n,i,o,r,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),u&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-d.left:s.offset.left-l.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-d.top:s.offset.top-l.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,r=i.originalSize,s=i.originalPosition,a={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0};e(o.alsoResize).each((function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,(function(e,t){var n=(i[t]||0)+(a[t]||0);n&&n>=0&&(o[t]=n||null)})),t.css(o)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,r=n.originalSize,s=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-r.width)/c)*c,h=Math.round((o.height-r.height)/u)*u,p=r.width+d,f=r.height+h,m=i.maxWidth&&i.maxWidth<p,g=i.maxHeight&&i.maxHeight<f,v=i.minWidth&&i.minWidth>p,_=i.minHeight&&i.minHeight>f;i.grid=l,v&&(p+=c),_&&(f+=u),m&&(p-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.top=s.top-h):/^(sw)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.left=s.left-d):((f-u<=0||p-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=s.top-h):(f=u-t.height,n.size.height=f,n.position.top=s.top+r.height-f),p-c>0?(n.size.width=p,n.position.left=s.left-d):(p=c-t.width,n.size.width=p,n.position.left=s.left+r.width-p))}}),e.ui.resizable})?i.apply(t,o):i)||(e.exports=r)},9755:function(e,t){var n;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var r=[],s=Object.getPrototypeOf,a=r.slice,l=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},c=r.push,u=r.indexOf,d={},h=d.toString,p=d.hasOwnProperty,f=p.toString,m=f.call(Object),g={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},_=function(e){return null!=e&&e===e.window},y=i.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var i,o,r=(n=n||y).createElement("script");if(r.text=e,t)for(i in b)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&r.setAttribute(i,o);n.head.appendChild(r).parentNode.removeChild(r)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var k="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!v(e)&&!_(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:k,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},S.extend=S.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(c&&i&&(S.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[t],r=o&&!Array.isArray(n)?[]:o||S.isPlainObject(n)?n:{},o=!1,s[t]=S.extend(c,r,i)):void 0!==i&&(s[t]=i));return s},S.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=s(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&f.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(C(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?S.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;o<r;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,s=[];if(C(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&s.push(o);return l(s)},guid:1,support:g}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=r[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var E=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(e){var t,n,i,o,r,s,a,l,c,u,d,h,p,f,m,g,v,_,y,b="sizzle"+1*new Date,x=e.document,w=0,k=0,S=le(),C=le(),E=le(),$=le(),T=function(e,t){return e===t&&(d=!0),0},A={}.hasOwnProperty,D=[],O=D.pop,P=D.push,N=D.push,j=D.slice,M=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",L="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\[[\\x20\\t\\r\\n\\f]*("+L+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+R+"*\\]",z=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",B=new RegExp(R+"+","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp(R+"|>"),V=new RegExp(z),G=new RegExp("^"+L+"$"),K={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){h()},se=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(D=j.call(x.childNodes),x.childNodes),D[x.childNodes.length].nodeType}catch(e){N={apply:D.length?function(e,t){P.apply(e,j.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,i,o){var r,a,c,u,d,f,v,_=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!o&&(h(t),t=t||p,m)){if(11!==x&&(d=Z.exec(e)))if(r=d[1]){if(9===x){if(!(c=t.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(_&&(c=_.getElementById(r))&&y(t,c)&&c.id===r)return i.push(c),i}else{if(d[2])return N.apply(i,t.getElementsByTagName(e)),i;if((r=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!$[e+" "]&&(!g||!g.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(v=e,_=t,1===x&&(q.test(e)||U.test(e))){for((_=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ie,oe):t.setAttribute("id",u=b)),a=(f=s(e)).length;a--;)f[a]=(u?"#"+u:":scope")+" "+ye(f[a]);v=f.join(",")}try{return N.apply(i,_.querySelectorAll(v)),i}catch(t){$(e,!0)}finally{u===b&&t.removeAttribute("id")}}}return l(e.replace(H,"$1"),t,i,o)}function le(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function ce(e){return e[b]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},r=ae.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!J.test(t||n&&n.nodeName||"HTML")},h=ae.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:x;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,m=!r(p),x!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.scope=ue((function(e){return f.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ue((function(e){return f.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=Q.test(p.querySelectorAll))&&(ue((function(e){var t;f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+I+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(_=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=_.call(e,"*"),_.call(e,"[s!='']:x"),v.push("!=",z)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(f.compareDocumentPosition),y=t||Q.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==p||e.ownerDocument==x&&y(x,e)?-1:t==p||t.ownerDocument==x&&y(x,t)?1:u?M(u,e)-M(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],a=[t];if(!o||!r)return e==p?-1:t==p?1:o?-1:r?1:u?M(u,e)-M(u,t):0;if(o===r)return he(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?he(s[i],a[i]):s[i]==x?-1:a[i]==x?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&m&&!$[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var i=_.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){$(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),y(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var o=i.attrHandle[t.toLowerCase()],r=o&&A.call(i.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==r?r:n.attributes||!m?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.escape=function(e){return(e+"").replace(ie,oe)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],o=0,r=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(T),d){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return u=null,e},o=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=ae.selectors={cacheLength:50,createPseudo:ce,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+R+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=ae.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,m=r!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!l&&!a,y=!1;if(g){if(r){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&_){for(y=(p=(c=(u=(d=(h=g)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){u[e]=[w,p,y];break}}else if(_&&(y=p=(c=(u=(d=(h=t)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===y)for(;(h=++p&&h&&h[m]||(y=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(_&&((u=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[w,y]),h!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[b]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,r=o(e,t),s=r.length;s--;)e[i=M(e,r[s])]=!(n[i]=r[s])})):function(e){return o(e,0,n)}):o}},pseudos:{not:ce((function(e){var t=[],n=[],i=a(e.replace(H,"$1"));return i[b]?ce((function(e,t,n,o){for(var r,s=i(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))})):function(e,o,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:ge((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=fe(t);function _e(){}function ye(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(e,t,n){var i=t.dir,o=t.next,r=o||i,s=n&&"parentNode"===r,a=k++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,l){var c,u,d,h=[w,a];if(l){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(u=(d=t[b]||(t[b]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[r])&&c[0]===w&&c[1]===a)return h[2]=c[2];if(u[r]=h,h[2]=e(t,n,l))return!0}return!1}}function xe(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function we(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(r=e[a])&&(n&&!n(r,i,o)||(s.push(r),c&&t.push(a)));return s}function ke(e,t,n,i,o,r){return i&&!i[b]&&(i=ke(i)),o&&!o[b]&&(o=ke(o,r)),ce((function(r,s,a,l){var c,u,d,h=[],p=[],f=s.length,m=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)ae(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!r&&t?m:we(m,h,e,a,l),v=n?o||(r?e:f||i)?[]:s:g;if(n&&n(g,v,a,l),i)for(c=we(v,p),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(g[p[u]]=d));if(r){if(o||e){if(o){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);o(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=o?M(r,d):h[u])>-1&&(r[c]=!(s[c]=d))}}else v=we(v===s?v.splice(f,v.length):v),o?o(null,s,v,l):N.apply(s,v)}))}function Se(e){for(var t,n,o,r=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,u=be((function(e){return e===t}),a,!0),d=be((function(e){return M(t,e)>-1}),a,!0),h=[function(e,n,i){var o=!s&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,o}];l<r;l++)if(n=i.relative[e[l].type])h=[be(xe(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(o=++l;o<r&&!i.relative[e[o].type];o++);return ke(l>1&&xe(h),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),n,l<o&&Se(e.slice(l,o)),o<r&&Se(e=e.slice(o)),o<r&&ye(e))}h.push(n)}return xe(h)}return _e.prototype=i.filters=i.pseudos,i.setFilters=new _e,s=ae.tokenize=function(e,t){var n,o,r,s,a,l,c,u=C[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=i.preFilter;a;){for(s in n&&!(o=W.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=U.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(H," ")}),a=a.slice(n.length)),i.filter)!(o=K[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):C(e,l).slice(0)},a=ae.compile=function(e,t){var n,o=[],r=[],a=E[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=Se(t[n]))[b]?o.push(a):r.push(a);(a=E(e,function(e,t){var n=t.length>0,o=e.length>0,r=function(r,s,a,l,u){var d,f,g,v=0,_="0",y=r&&[],b=[],x=c,k=r||o&&i.find.TAG("*",u),S=w+=null==x?1:Math.random()||.1,C=k.length;for(u&&(c=s==p||s||u);_!==C&&null!=(d=k[_]);_++){if(o&&d){for(f=0,s||d.ownerDocument==p||(h(d),a=!m);g=e[f++];)if(g(d,s||p,a)){l.push(d);break}u&&(w=S)}n&&((d=!g&&d)&&v--,r&&y.push(d))}if(v+=_,n&&_!==v){for(f=0;g=t[f++];)g(y,b,s,a);if(r){if(v>0)for(;_--;)y[_]||b[_]||(b[_]=O.call(l));b=we(b)}N.apply(l,b),u&&!r&&b.length>0&&v+t.length>1&&ae.uniqueSort(l)}return u&&(w=S,c=x),y};return n?ce(r):r}(r,o))).selector=e}return a},l=ae.select=function(e,t,n,o){var r,l,c,u,d,h="function"==typeof e&&e,p=!o&&s(e=h.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(r=K.needsContext.test(e)?0:l.length;r--&&(c=l[r],!i.relative[u=c.type]);)if((d=i.find[u])&&(o=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(r,1),!(e=o.length&&ye(l)))return N.apply(n,o),n;break}}return(h||a(e,p))(o,t,!m,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(I,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ae}(i);S.find=E,S.expr=E.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=E.uniqueSort,S.text=E.getText,S.isXMLDoc=E.isXML,S.contains=E.contains,S.escapeSelector=E.escape;var $=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(n))break;i.push(e)}return i},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=S.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return v(t)?S.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?S.grep(e,(function(e){return u.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<i;t++)if(S.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)S.find(e,o[t],n);return i>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&A.test(e)?S(e):e||[],!1).length}});var N,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||N,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),O.test(i[1])&&S.isPlainObject(t))for(i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=y.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,N=S(y);var M=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,o=this.length,r=[],s="string"!=typeof e&&S(e);if(!A.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?S.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?u.call(S(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return $(e,"parentNode")},parentsUntil:function(e,t,n){return $(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return $(e,"nextSibling")},prevAll:function(e){return $(e,"previousSibling")},nextUntil:function(e,t,n){return $(e,"nextSibling",n)},prevUntil:function(e,t,n){return $(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,i){var o=S.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=S.filter(i,o)),this.length>1&&(I[e]||S.uniqueSort(o),M.test(e)&&o.reverse()),this.pushStack(o)}}));var L=/[^\x20\t\r\n\f]+/g;function F(e){return e}function z(e){throw e}function B(e,t,n,i){var o;try{e&&v(o=e.promise)?o.call(e).done(t).fail(n):e&&v(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(L)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,i,o,r=[],s=[],a=-1,l=function(){for(o=o||e.once,i=t=!0;s.length;a=-1)for(n=s.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!t&&(a=r.length-1,s.push(n)),function t(n){S.each(n,(function(n,i){v(i)?e.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==w(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,r,n))>-1;)r.splice(n,1),n<=a&&a--})),this},has:function(e){return e?S.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,i){var o=v(e[i[4]])&&e[i[4]];r[i[1]]((function(){var e=o&&o.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var r=0;function s(e,t,n,o){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(e<r)){if((i=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(c)?o?c.call(i,s(r,t,F,o),s(r,t,z,o)):(r++,c.call(i,s(r,t,F,o),s(r,t,z,o),s(r,t,F,t.notifyWith))):(n!==F&&(a=void 0,l=[i]),(o||t.resolveWith)(a,l))}},u=o?c:function(){try{c()}catch(i){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(i,u.stackTrace),e+1>=r&&(n!==z&&(a=void 0,l=[i]),t.rejectWith(a,l))}};e?u():(S.Deferred.getStackHook&&(u.stackTrace=S.Deferred.getStackHook()),i.setTimeout(u))}}return S.Deferred((function(i){t[0][3].add(s(0,i,v(o)?o:F,i.notifyWith)),t[1][3].add(s(0,i,v(e)?e:F)),t[2][3].add(s(0,i,v(n)?n:z))})).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},r={};return S.each(t,(function(e,i){var s=i[2],a=i[5];o[i[1]]=s.add,a&&s.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=s.fireWith})),o.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=a.call(arguments),r=S.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?a.call(arguments):n,--t||r.resolveWith(i,o)}};if(t<=1&&(B(e,r.done(s(n)).resolve,r.reject,!t),"pending"===r.state()||v(o[n]&&o[n].then)))return r.then();for(;n--;)B(o[n],s(n),r.reject);return r.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&H.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){i.setTimeout((function(){throw e}))};var W=S.Deferred();function U(){y.removeEventListener("DOMContentLoaded",U),i.removeEventListener("load",U),S.ready()}S.fn.ready=function(e){return W.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||W.resolveWith(y,[S]))}}),S.ready.then=W.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?i.setTimeout(S.ready):(y.addEventListener("DOMContentLoaded",U),i.addEventListener("load",U));var q=function(e,t,n,i,o,r,s){var a=0,l=e.length,c=null==n;if("object"===w(n))for(a in o=!0,n)q(e,t,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,v(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(S(e),n)})),t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):r},V=/^-ms-/,G=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function J(e){return e.replace(V,"ms-").replace(G,K)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=S.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[J(t)]=n;else for(i in t)o[J(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(J):(t=J(t))in i?[t]:t.match(L)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||S.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Q=new X,Z=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=Z.get(r),1===r.nodeType&&!Q.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=J(i.slice(5)),ne(r,i,o[i]));Q.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){Z.set(this,e)})):q(this,(function(t){var n;if(r&&void 0===t)return void 0!==(n=Z.get(r,e))||void 0!==(n=ne(r,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Q.get(e,t),n&&(!i||Array.isArray(n)?i=Q.access(e,t,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),i=n.length,o=n.shift(),r=S._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,(function(){S.dequeue(e,t)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:S.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=S.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Q.get(r[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],se=y.documentElement,ae=function(e){return S.contains(e.ownerDocument,e)},le={composed:!0};se.getRootNode&&(ae=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===S.css(e,"display")};function ue(e,t,n,i){var o,r,s=20,a=i?function(){return i.cur()}:function(){return S.css(e,t,"")},l=a(),c=n&&n[3]||(S.cssNumber[t]?"":"px"),u=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+l)&&oe.exec(S.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)S.style(e,t,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;u*=2,S.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}var de={};function he(e){var t,n=e.ownerDocument,i=e.nodeName,o=de[i];return o||(t=n.body.appendChild(n.createElement(i)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),de[i]=o,o)}function pe(e,t){for(var n,i,o=[],r=0,s=e.length;r<s;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=Q.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&ce(i)&&(o[r]=he(i))):"none"!==n&&(o[r]="none",Q.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}S.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?S(this).show():S(this).hide()}))}});var fe,me,ge=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,_e=/^$|^module$|\/(?:java|ecma)script/i;fe=y.createDocumentFragment().appendChild(y.createElement("div")),(me=y.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),fe.appendChild(me),g.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",g.option=!!fe.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?S.merge([e],n):n}function xe(e,t){for(var n=0,i=e.length;n<i;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,g.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function ke(e,t,n,i,o){for(var r,s,a,l,c,u,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((r=e[p])||0===r)if("object"===w(r))S.merge(h,r.nodeType?[r]:r);else if(we.test(r)){for(s=s||d.appendChild(t.createElement("div")),a=(ve.exec(r)||["",""])[1].toLowerCase(),l=ye[a]||ye._default,s.innerHTML=l[1]+S.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;S.merge(h,s.childNodes),(s=d.firstChild).textContent=""}else h.push(t.createTextNode(r));for(d.textContent="",p=0;r=h[p++];)if(i&&S.inArray(r,i)>-1)o&&o.push(r);else if(c=ae(r),s=be(d.appendChild(r),"script"),c&&xe(s),n)for(u=0;r=s[u++];)_e.test(r.type||"")&&n.push(r);return d}var Se=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function $e(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,n,i,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)Te(e,a,n,i,t[a],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Ee;else if(!o)return e;return 1===r&&(s=o,(o=function(e){return S().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),e.each((function(){S.event.add(this,t,o,i,n)}))}function Ae(e,t,n){n?(Q.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var i,o,r=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),Q.set(this,t,r),i=n(this,t),this[t](),r!==(o=Q.get(this,t))||i?Q.set(this,t,!1):o={},r!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else r.length&&(Q.set(this,t,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&S.event.add(e,t,Ce)}S.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,c,u,d,h,p,f,m,g=Q.get(e);if(Y(e))for(n.handler&&(n=(r=n).handler,o=r.selector),o&&S.find.matchesSelector(se,o),n.guid||(n.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(L)||[""]).length;c--;)p=m=(a=Se.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=S.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=S.event.special[p]||{},u=S.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),S.event.global[p]=!0)},remove:function(e,t,n,i,o){var r,s,a,l,c,u,d,h,p,f,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(L)||[""]).length;c--;)if(p=m=(a=Se.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=S.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)u=h[r],!o&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||S.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)S.event.remove(e,p+t[c],n,i,!0);S.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,s,a=new Array(arguments.length),l=S.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],u=S.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=S.event.handlers.call(this,l,c),t=0;(o=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(i=((S.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,o,r,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)void 0===s[o=(i=t[n]).selector+" "]&&(s[o]=i.needsContext?S(o,this).index(c)>-1:S.find(o,this,null,[c]).length),s[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&D(t,"input")&&Q.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,$e),!1},trigger:function(){return Ae(this,e),!0},_default:function(){return!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||S.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,i){return Te(this,e,t,n,i)},one:function(e,t,n,i){return Te(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each((function(){S.event.remove(this,e,n,t)}))}});var De=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,i,o,r,s,a;if(1===t.nodeType){if(Q.hasData(e)&&(a=Q.get(e).events))for(o in Q.remove(t,"handle events"),a)for(n=0,i=a[o].length;n<i;n++)S.event.add(t,o,a[o][n]);Z.hasData(e)&&(r=Z.access(e),s=S.extend({},r),Z.set(t,s))}}function Re(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Le(e,t,n,i){t=l(t);var o,r,s,a,c,u,d=0,h=e.length,p=h-1,f=t[0],m=v(f);if(m||h>1&&"string"==typeof f&&!g.checkClone&&Oe.test(f))return e.each((function(o){var r=e.eq(o);m&&(t[0]=f.call(this,o,r.html())),Le(r,t,n,i)}));if(h&&(r=(o=ke(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=(s=S.map(be(o,"script"),je)).length;d<h;d++)c=o,d!==p&&(c=S.clone(c,!0,!0),a&&S.merge(s,be(c,"script"))),n.call(e[d],c,d);if(a)for(u=s[s.length-1].ownerDocument,S.map(s,Me),d=0;d<a;d++)c=s[d],_e.test(c.type||"")&&!Q.access(c,"globalEval")&&S.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?S._evalUrl&&!c.noModule&&S._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):x(c.textContent.replace(Pe,""),c,u))}return e}function Fe(e,t,n){for(var i,o=t?S.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||S.cleanData(be(i)),i.parentNode&&(n&&ae(i)&&xe(be(i,"script")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,r,s,a=e.cloneNode(!0),l=ae(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(s=be(a),i=0,o=(r=be(e)).length;i<o;i++)Re(r[i],s[i]);if(t)if(n)for(r=r||be(e),s=s||be(a),i=0,o=r.length;i<o;i++)Ie(r[i],s[i]);else Ie(e,a);return(s=be(a,"script")).length>0&&xe(s,!l&&be(e,"script")),a},cleanData:function(e){for(var t,n,i,o=S.event.special,r=0;void 0!==(n=e[r]);r++)if(Y(n)){if(t=n[Q.expando]){if(t.events)for(i in t.events)o[i]?S.event.remove(n,i):S.removeEvent(n,i,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return q(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Le(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Le(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!ye[(ve.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Le(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(be(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,i=[],o=S(e),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),S(o[s])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var ze=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Be=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},He=function(e,t,n){var i,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=r[o];return i},We=new RegExp(re.join("|"),"i");function Ue(e,t,n){var i,o,r,s,a=e.style;return(n=n||Be(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||ae(e)||(s=S.style(e,t)),!g.pixelBoxStyles()&&ze.test(s)&&We.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(c).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),o=36===t(e.width),u.style.position="absolute",r=12===t(u.offsetWidth/3),se.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,o,r,s,a,l,c=y.createElement("div"),u=y.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,n,o;return null==a&&(e=y.createElement("table"),t=y.createElement("tr"),n=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",se.appendChild(e).appendChild(t).appendChild(n),o=i.getComputedStyle(t),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,se.removeChild(e)),a}}))}();var Ve=["Webkit","Moz","ms"],Ge=y.createElement("div").style,Ke={};function Je(e){var t=S.cssProps[e]||Ke[e];return t||(e in Ge?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ve.length;n--;)if((e=Ve[n]+t)in Ge)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var i=oe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function tt(e,t,n,i,o,r){var s="width"===t?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=S.css(e,n+re[s],!0,o)),i?("content"===n&&(l-=S.css(e,"padding"+re[s],!0,o)),"margin"!==n&&(l-=S.css(e,"border"+re[s]+"Width",!0,o))):(l+=S.css(e,"padding"+re[s],!0,o),"padding"!==n?l+=S.css(e,"border"+re[s]+"Width",!0,o):a+=S.css(e,"border"+re[s]+"Width",!0,o));return!i&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-a-.5))||0),l}function nt(e,t,n){var i=Be(e),o=(!g.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,i),r=o,s=Ue(e,t,i),a="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(s)){if(!n)return s;s="auto"}return(!g.boxSizingReliable()&&o||!g.reliableTrDimensions()&&D(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===S.css(e,"boxSizing",!1,i),(r=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+tt(e,t,n||(o?"border":"content"),r,i,s)+"px"}function it(e,t,n,i,o){return new it.prototype.init(e,t,n,i,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=J(t),l=Xe.test(t),c=e.style;if(l||(t=Je(a)),s=S.cssHooks[t]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:c[t];"string"===(r=typeof n)&&(o=oe.exec(n))&&o[1]&&(n=ue(e,t,o),r="number"),null!=n&&n==n&&("number"!==r||l||(n+=o&&o[3]||(S.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var o,r,s,a=J(t);return Xe.test(t)||(t=Je(a)),(s=S.cssHooks[t]||S.cssHooks[a])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=Ue(e,t,i)),"normal"===o&&t in Ze&&(o=Ze[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,i){if(n)return!Ye.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,i):He(e,Qe,(function(){return nt(e,t,i)}))},set:function(e,n,i){var o,r=Be(e),s=!g.scrollboxSize()&&"absolute"===r.position,a=(s||i)&&"border-box"===S.css(e,"boxSizing",!1,r),l=i?tt(e,t,i,a,r):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-tt(e,t,"border",!1,r)-.5)),l&&(o=oe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),et(0,n,l)}}})),S.cssHooks.marginLeft=qe(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+re[i]+t]=r[i]||r[i-2]||r[0];return o}},"margin"!==e&&(S.cssHooks[e+t].set=et)})),S.fn.extend({css:function(e,t){return q(this,(function(e,t,n){var i,o,r={},s=0;if(Array.isArray(t)){for(i=Be(e),o=t.length;s<o;s++)r[t[s]]=S.css(e,t[s],!1,i);return r}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=it,it.prototype={constructor:it,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(S.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=it.prototype.init,S.fx.step={};var ot,rt,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function lt(){rt&&(!1===y.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(lt):i.setTimeout(lt,S.fx.interval),S.fx.tick())}function ct(){return i.setTimeout((function(){ot=void 0})),ot=Date.now()}function ut(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=re[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function dt(e,t,n){for(var i,o=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function ht(e,t,n){var i,o,r=0,s=ht.prefilters.length,a=S.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=ot||ct(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(i);return a.notifyWith(e,[c,i,n]),i<1&&s?n:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var i=S.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,o,r,s;for(n in e)if(o=t[i=J(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(s=S.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(u,c.opts.specialEasing);r<s;r++)if(i=ht.prefilters[r].call(c,e,u,c.opts))return v(i.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return S.map(u,dt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,oe.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(L);for(var n,i=0,o=e.length;i<o;i++)n=e[i],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,r,s,a,l,c,u,d="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&ce(e),g=Q.get(e,"fxshow");for(i in n.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always((function(){h.always((function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()}))}))),t)if(o=t[i],st.test(o)){if(delete t[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||S.style(e,i)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(u=S.css(e,"display"))&&(c?u=c:(pe([e],!0),c=e.style.display||c,u=S.css(e,"display"),pe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===S.css(e,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),r&&(g.hidden=!m),m&&pe([e],!0),h.done((function(){for(i in m||pe([e]),Q.remove(e,"fxshow"),p)S.style(e,i,p[i])}))),l=dt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in S.fx.speeds?i.duration=S.fx.speeds[i.duration]:i.duration=S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=S.isEmptyObject(e),r=S.speed(t,n,i),s=function(){var t=ht(this,S.extend({},e),r);(o||Q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",r=S.timers,s=Q.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&at.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=S.timers,s=i?i.length:0;for(n.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,i,o)}})),S.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(ot=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),ot=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){rt||(rt=!0,lt())},S.fx.stop=function(){rt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}}))},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var pt,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return q(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?S.prop(e,t,n):(1===r&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=S.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&D(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(L);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ft[t]||S.find.attr;ft[t]=function(e,t,i){var o,r,s=t.toLowerCase();return i||(r=ft[s],ft[s]=o,o=null!=n(e,t,i)?s:null,ft[s]=r),o}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(L)||[]).join(" ")}function _t(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(L)||[]}S.fn.extend({prop:function(e,t){return q(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,i,o,r,s,a,l=0;if(v(e))return this.each((function(t){S(this).addClass(e.call(this,t,_t(this)))}));if((t=yt(e)).length)for(;n=this[l++];)if(o=_t(n),i=1===n.nodeType&&" "+vt(o)+" "){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(a=vt(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,s,a,l=0;if(v(e))return this.each((function(t){S(this).removeClass(e.call(this,t,_t(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[l++];)if(o=_t(n),i=1===n.nodeType&&" "+vt(o)+" "){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(a=vt(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):v(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,_t(this),t),t)})):this.each((function(){var t,o,r,s;if(i)for(o=0,r=S(this),s=yt(e);t=s[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||((t=_t(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+vt(_t(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;S.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=v(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,S(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(bt,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?r+1:o.length;for(i=r<0?l:s?r:0;i<l;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(t=S(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=S.makeArray(t),s=o.length;s--;)((i=o[s]).selected=S.inArray(S.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in i;var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,o){var r,s,a,l,c,u,d,h,f=[n||y],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(s=h=a=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!xt.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[S.expando]?e:new S.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(n,t))){if(!o&&!d.noBubble&&!_(n)){for(l=d.delegateType||m,xt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(n.ownerDocument||y)&&f.push(a.defaultView||a.parentWindow||i)}for(r=0;(s=f[r++])&&!e.isPropagationStopped();)h=s,e.type=r>1?l:d.bindType||m,(u=(Q.get(s,"events")||Object.create(null))[e.type]&&Q.get(s,"handle"))&&u.apply(s,t),(u=c&&s[c])&&u.apply&&Y(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Y(n)||c&&v(n[m])&&!_(n)&&((a=n[c])&&(n[c]=null),S.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,wt),n[m](),e.isPropagationStopped()&&h.removeEventListener(m,wt),S.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var i=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),g.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,o=Q.access(i,t);o||i.addEventListener(e,n,!0),Q.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=Q.access(i,t)-1;o?Q.access(i,t,o):(i.removeEventListener(e,n,!0),Q.remove(i,t))}}}));var kt=i.location,St={guid:Date.now()},Ct=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Et=/\[\]$/,$t=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,i){var o;if(Array.isArray(t))S.each(t,(function(t,o){n||Et.test(e)?i(e,o):Dt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==w(t))i(e,t);else for(o in t)Dt(e+"["+o+"]",t[o],n,i)}S.param=function(e,t){var n,i=[],o=function(e,t){var n=v(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){o(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,o);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&At.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace($t,"\r\n")}})):{name:t.name,value:n.replace($t,"\r\n")}})).get()}});var Ot=/%20/g,Pt=/#.*$/,Nt=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,It=/^\/\//,Rt={},Lt={},Ft="*/".concat("*"),zt=y.createElement("a");function Bt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(L)||[];if(v(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Ht(e,t,n,i){var o={},r=e===Lt;function s(a){var l;return o[a]=!0,S.each(e[a]||[],(function(e,a){var c=a(t,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Wt(e,t){var n,i,o=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&S.extend(!0,e,i),e}zt.href=kt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,S.ajaxSettings),t):Wt(S.ajaxSettings,e)},ajaxPrefilter:Bt(Rt),ajaxTransport:Bt(Lt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,r,s,a,l,c,u,d,h,p=S.ajaxSetup({},t),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?S(f):S.event,g=S.Deferred(),v=S.Callbacks("once memory"),_=p.statusCode||{},b={},x={},w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=jt.exec(r);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),C(0,t),this}};if(g.promise(k),p.url=((e||p.url||kt.href)+"").replace(It,kt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(L)||[""],null==p.crossDomain){l=y.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=zt.protocol+"//"+zt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Ht(Rt,p,t,k),c)return k;for(d in(u=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Mt.test(p.type),o=p.url.replace(Pt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ot,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ct.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Nt,"$1"),h=(Ct.test(o)?"&":"?")+"_="+St.guid+++h),p.url=o+h),p.ifModified&&(S.lastModified[o]&&k.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&k.setRequestHeader("If-None-Match",S.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,k,p)||c))return k.abort();if(w="abort",v.add(p.complete),k.done(p.success),k.fail(p.error),n=Ht(Lt,p,t,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(a=i.setTimeout((function(){k.abort("timeout")}),p.timeout));try{c=!1,n.send(b,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(e,t,s,l){var d,h,y,b,x,w=t;c||(c=!0,a&&i.clearTimeout(a),n=void 0,r=l||"",k.readyState=e>0?4:0,d=e>=200&&e<300||304===e,s&&(b=function(e,t,n){for(var i,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}(p,k,s)),!d&&S.inArray("script",p.dataTypes)>-1&&S.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(e,t,n,i){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(p,b,k,d),d?(p.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=x),(x=k.getResponseHeader("etag"))&&(S.etag[o]=x)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=b.state,h=b.data,d=!(y=b.error))):(y=w,!e&&w||(w="error",e<0&&(e=0))),k.status=e,k.statusText=(t||w)+"",d?g.resolveWith(f,[h,w,k]):g.rejectWith(f,[k,w,y]),k.statusCode(_),_=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[k,p,d?h:y]),v.fireWith(f,[k,w]),u&&(m.trigger("ajaxComplete",[k,p]),--S.active||S.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,i,o){return v(n)&&(o=o||i,i=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:n,success:i},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},qt=S.ajaxSettings.xhr();g.cors=!!qt&&"withCredentials"in qt,g.ajax=qt=!!qt,S.ajaxTransport((function(e){var t,n;if(g.cors||qt&&!e.crossDomain)return{send:function(o,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ut[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Vt,Gt=[],Kt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||S.expando+"_"+St.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var o,r,s,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+o):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||S.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=i[o],i[o]=function(){s=arguments},n.always((function(){void 0===r?S(i).removeProp(o):i[o]=r,e[o]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(o)),s&&v(r)&&r(s[0]),s=r=void 0})),"script"})),g.createHTMLDocument=((Vt=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((i=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(i)):t=y),r=!n&&[],(o=O.exec(e))?[t.createElement(o[1])]:(o=ke([e],t,r),r&&r.length&&S(r).remove(),S.merge([],o.childNodes)));var i,o,r},S.fn.load=function(e,t,n){var i,o,r,s=this,a=e.indexOf(" ");return a>-1&&(i=vt(e.slice(a)),e=e.slice(0,a)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){r=arguments,s.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,r||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var i,o,r,s,a,l,c=S.css(e,"position"),u=S(e),d={};"static"===c&&(e.style.position="relative"),a=u.offset(),r=S.css(e,"top"),l=S.css(e,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(s=(i=u.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),v(t)&&(t=t.call(e,n,S.extend({},a))),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):u.css(d)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===S.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(i,"marginTop",!0),left:t.left-o.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||se}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(i){return q(this,(function(e,i,o){var r;if(_(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o}),e,i,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=qe(g.pixelPosition,(function(e,n){if(n)return n=Ue(e,t),ze.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){S.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return q(this,(function(t,n,o){var r;return _(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?S.css(t,n,a):S.style(t,n,o,a)}),t,s?o:void 0,s)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Jt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return i=a.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(a.call(arguments)))}).guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=D,S.isFunction=v,S.isWindow=_,S.camelCase=J,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Jt,"")},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var Yt=i.jQuery,Xt=i.$;return S.noConflict=function(e){return i.$===S&&(i.$=Xt),e&&i.jQuery===S&&(i.jQuery=Yt),S},void 0===o&&(i.jQuery=i.$=S),S}))},9461:e=>{"use strict";var t=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),n(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function n(e,i,o,r,s,a,l,c,u,d){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var h in i(r,s,a,l,c,u,d),r){var p=r[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var f=0;f<p.length;f++)n(e,i,o,p[f],s+"/"+h+"/"+f,a,s,h,r,f)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)n(e,i,o,p[m],s+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,h,r,m)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&n(e,i,o,p,s+"/"+h,a,s,h,r)}o(r,s,a,l,c,u,d)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2837:()=>{},5311:function(e,t,n){!function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},u=function(){function e(t){i(this,e),this.selfOptions=t||{},this.pipes={}}return o(e,[{key:"options",value:function(e){return e&&(this.selfOptions=e),this.selfOptions}},{key:"pipe",value:function(e,t){var n=t;if("string"==typeof e){if(void 0===n)return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if(n=e,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(e,t){var n=e;n.options=this.options();for(var i=t||e.pipe||"default",o=void 0,r=void 0;i;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(n),r=n,o=i,i=null,n&&n.next&&(n=n.next,i=r.nextPipe||n.pipe||o);return n.hasResult?n.result:void 0}}]),e}(),d=function(){function e(t){i(this,e),this.name=t,this.filters=[]}return o(e,[{key:"process",value:function(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var t=this.debug,i=this.filters.length,o=e,r=0;r<i;r++){var s=this.filters[r];if(t&&this.log("filter: "+s.filterName),s(o),"object"===(void 0===o?"undefined":n(o))&&o.exiting){o.exiting=!1;break}}!o.next&&this.resultCheck&&this.resultCheck(o)}},{key:"log",value:function(e){console.log("[jsondiffpatch] "+this.name+" pipe, "+e)}},{key:"append",value:function(){var e;return(e=this.filters).push.apply(e,arguments),this}},{key:"prepend",value:function(){var e;return(e=this.filters).unshift.apply(e,arguments),this}},{key:"indexOf",value:function(e){if(!e)throw new Error("a filter name is required");for(var t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw new Error("filter not found: "+e)}},{key:"list",value:function(){return this.filters.map((function(e){return e.filterName}))}},{key:"after",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(e){var t=this.indexOf(e);return this.filters.splice(t,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(e){if(!1!==e){if(!this.resultCheck){var t=this;return this.resultCheck=function(e){if(!e.hasResult){console.log(e);var n=new Error(t.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),e}(),h=function(){function e(){i(this,e)}return o(e,[{key:"setResult",value:function(e){return this.result=e,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(e,t){return"string"==typeof e||e instanceof d?this.nextPipe=e:(this.next=e,t&&(this.nextPipe=t)),this}},{key:"push",value:function(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}]),e}(),p="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array};function f(e){var t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}function m(e){if("object"!==(void 0===e?"undefined":n(e)))return e;if(null===e)return null;if(p(e))return e.map(m);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return f(e);var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=m(e[i]));return t}var g=function(e){function t(e,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.left=e,o.right=n,o.pipe="diff",o}return s(t,e),o(t,[{key:"setResult",value:function(e){if(this.options.cloneDiffValues&&"object"===(void 0===e?"undefined":n(e))){var t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:m;"object"===n(e[0])&&(e[0]=t(e[0])),"object"===n(e[1])&&(e[1]=t(e[1]))}return h.prototype.setResult.apply(this,arguments)}}]),t}(h),v=function(e){function t(e,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.left=e,o.delta=n,o.pipe="patch",o}return s(t,e),t}(h),_=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.delta=e,n.pipe="reverse",n}return s(t,e),t}(h),y="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},b=function(e){if(e.left!==e.right)if(void 0!==e.left)if(void 0!==e.right){if("function"==typeof e.left||"function"==typeof e.right)throw new Error("functions are not supported");e.leftType=null===e.left?"null":n(e.left),e.rightType=null===e.right?"null":n(e.right),e.leftType===e.rightType&&"boolean"!==e.leftType&&"number"!==e.leftType?("object"===e.leftType&&(e.leftIsArray=y(e.left)),"object"===e.rightType&&(e.rightIsArray=y(e.right)),e.leftIsArray===e.rightIsArray?e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()}else e.setResult([e.left,0,0]).exit();else{if("function"==typeof e.right)throw new Error("functions are not supported");e.setResult([e.right]).exit()}else e.setResult(void 0).exit()};b.filterName="trivial";var x=function(e){if(void 0!==e.delta){if(e.nested=!y(e.delta),!e.nested)if(1!==e.delta.length)if(2!==e.delta.length)3===e.delta.length&&0===e.delta[2]&&e.setResult(void 0).exit();else{if(e.left instanceof RegExp){var t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t)return void e.setResult(new RegExp(t[1],t[2])).exit()}e.setResult(e.delta[1]).exit()}else e.setResult(e.delta[0]).exit()}else e.setResult(e.left).exit()};x.filterName="trivial";var w=function(e){void 0!==e.delta?(e.nested=!y(e.delta),e.nested||(1!==e.delta.length?2!==e.delta.length?3===e.delta.length&&0===e.delta[2]&&e.setResult([e.delta[0]]).exit():e.setResult([e.delta[1],e.delta[0]]).exit():e.setResult([e.delta[0],0,0]).exit())):e.setResult(e.delta).exit()};function k(e){if(e&&e.children){for(var t=e.children.length,n=void 0,i=e.result,o=0;o<t;o++)void 0!==(n=e.children[o]).result&&((i=i||{})[n.childName]=n.result);i&&e.leftIsArray&&(i._t="a"),e.setResult(i).exit()}}function S(e){if(!e.leftIsArray&&"object"===e.leftType){var t=void 0,n=void 0,i=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(i&&!i(t,e)||(n=new g(e.left[t],e.right[t]),e.push(n,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(i&&!i(t,e)||void 0===e.left[t]&&(n=new g(void 0,e.right[t]),e.push(n,t)));e.children&&0!==e.children.length?e.exit():e.setResult(void 0).exit()}}w.filterName="trivial",k.filterName="collectChildren",S.filterName="objects";var C=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new v(e.left[t],e.delta[t]),e.push(n,t);e.exit()}};C.filterName="objects";var E=function(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],Object.prototype.hasOwnProperty.call(e.left,n.childName)&&void 0===n.result?delete e.left[n.childName]:e.left[n.childName]!==n.result&&(e.left[n.childName]=n.result);e.setResult(e.left).exit()}};E.filterName="collectChildren";var $=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new _(e.delta[t]),e.push(n,t);e.exit()}};function T(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i={},o=0;o<t;o++)i[(n=e.children[o]).childName]!==n.result&&(i[n.childName]=n.result);e.setResult(i).exit()}}$.filterName="objects",T.filterName="collectChildren";var A=function(e,t,n,i){return e[n]===t[i]},D=function(e,t,n,i){var o=e.length,r=t.length,s=void 0,a=void 0,l=[o+1];for(s=0;s<o+1;s++)for(l[s]=[r+1],a=0;a<r+1;a++)l[s][a]=0;for(l.match=n,s=1;s<o+1;s++)for(a=1;a<r+1;a++)n(e,t,s-1,a-1,i)?l[s][a]=l[s-1][a-1]+1:l[s][a]=Math.max(l[s-1][a],l[s][a-1]);return l},O=function(e,t,n,i){for(var o=t.length,r=n.length,s={sequence:[],indices1:[],indices2:[]};0!==o&&0!==r;)e.match(t,n,o-1,r-1,i)?(s.sequence.unshift(t[o-1]),s.indices1.unshift(o-1),s.indices2.unshift(r-1),--o,--r):e[o][r-1]>e[o-1][r]?--r:--o;return s},P={get:function(e,t,n,i){var o=i||{},r=D(e,t,n||A,o),s=O(r,e,t,o);return"string"==typeof e&&"string"==typeof t&&(s.sequence=s.sequence.join("")),s}},N=3,j="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},M="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]===t)return i;return-1};function I(e,t,n,i){for(var o=0;o<n;o++)for(var r=e[o],s=0;s<i;s++){var a=t[s];if(o!==s&&r===a)return!0}}function R(e,t,i,o,r){var s=e[i],a=t[o];if(s===a)return!0;if("object"!==(void 0===s?"undefined":n(s))||"object"!==(void 0===a?"undefined":n(a)))return!1;var l=r.objectHash;if(!l)return r.matchByPosition&&i===o;var c=void 0,u=void 0;return"number"==typeof i?(r.hashCache1=r.hashCache1||[],void 0===(c=r.hashCache1[i])&&(r.hashCache1[i]=c=l(s,i))):c=l(s),void 0!==c&&("number"==typeof o?(r.hashCache2=r.hashCache2||[],void 0===(u=r.hashCache2[o])&&(r.hashCache2[o]=u=l(a,o))):u=l(a),void 0!==u&&c===u)}var L=function(e){if(e.leftIsArray){var t={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},n=0,i=0,o=void 0,r=void 0,s=void 0,a=e.left,l=e.right,c=a.length,u=l.length,d=void 0;for(c>0&&u>0&&!t.objectHash&&"boolean"!=typeof t.matchByPosition&&(t.matchByPosition=!I(a,l,c,u));n<c&&n<u&&R(a,l,n,n,t);)o=n,d=new g(e.left[o],e.right[o]),e.push(d,o),n++;for(;i+n<c&&i+n<u&&R(a,l,c-1-i,u-1-i,t);)r=c-1-i,s=u-1-i,d=new g(e.left[r],e.right[s]),e.push(d,s),i++;var h=void 0;if(n+i!==c)if(n+i!==u){delete t.hashCache1,delete t.hashCache2;var p=a.slice(n,c-i),f=l.slice(n,u-i),m=P.get(p,f,R,t),v=[];for(h=h||{_t:"a"},o=n;o<c-i;o++)M(m.indices1,o-n)<0&&(h["_"+o]=[a[o],0,0],v.push(o));var _=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(_=!1);var y=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(y=!0);var b=v.length;for(o=n;o<u-i;o++){var x=M(m.indices2,o-n);if(x<0){var w=!1;if(_&&b>0)for(var k=0;k<b;k++)if(R(p,f,(r=v[k])-n,o-n,t)){h["_"+r].splice(1,2,o,N),y||(h["_"+r][0]=""),s=o,d=new g(e.left[r],e.right[s]),e.push(d,s),v.splice(k,1),w=!0;break}w||(h[o]=[l[o]])}else r=m.indices1[x]+n,s=m.indices2[x]+n,d=new g(e.left[r],e.right[s]),e.push(d,s)}e.setResult(h).exit()}else{for(h=h||{_t:"a"},o=n;o<c-i;o++)h["_"+o]=[a[o],0,0];e.setResult(h).exit()}else{if(c===u)return void e.setResult(void 0).exit();for(h=h||{_t:"a"},o=n;o<u-i;o++)h[o]=[l[o]];e.setResult(h).exit()}}};L.filterName="arrays";var F={numerically:function(e,t){return e-t},numericallyBy:function(e){return function(t,n){return t[e]-n[e]}}},z=function(e){if(e.nested&&"a"===e.delta._t){var t=void 0,n=void 0,i=e.delta,o=e.left,r=[],s=[],a=[];for(t in i)if("_t"!==t)if("_"===t[0]){if(0!==i[t][2]&&i[t][2]!==N)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+i[t][2]);r.push(parseInt(t.slice(1),10))}else 1===i[t].length?s.push({index:parseInt(t,10),value:i[t][0]}):a.push({index:parseInt(t,10),delta:i[t]});for(t=(r=r.sort(F.numerically)).length-1;t>=0;t--){var l=i["_"+(n=r[t])],c=o.splice(n,1)[0];l[2]===N&&s.push({index:l[1],value:c})}var u=(s=s.sort(F.numericallyBy("index"))).length;for(t=0;t<u;t++){var d=s[t];o.splice(d.index,0,d.value)}var h=a.length,p=void 0;if(h>0)for(t=0;t<h;t++){var f=a[t];p=new v(e.left[f.index],f.delta),e.push(p,f.index)}e.children?e.exit():e.setResult(e.left).exit()}};z.filterName="arrays";var B=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],e.left[n.childName]=n.result;e.setResult(e.left).exit()}};B.filterName="arraysCollectChildren";var H=function(e){if(e.nested){if("a"===e.delta._t){var t=void 0,n=void 0;for(t in e.delta)"_t"!==t&&(n=new _(e.delta[t]),e.push(n,t));e.exit()}}else e.delta[2]===N&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),N]).exit())};H.filterName="arrays";var W=function(e,t,n){if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if(j(n)&&0===n[2])return"_"+t;var i=+t;for(var o in e){var r=e[o];if(j(r))if(r[2]===N){var s=parseInt(o.substr(1),10),a=r[1];if(a===+t)return s;s<=i&&a>i?i++:s>=i&&a<i&&i--}else 0===r[2]?parseInt(o.substr(1),10)<=i&&i++:1===r.length&&o<=i&&i--}return i};function U(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i={_t:"a"},o=0;o<t;o++){var r=(n=e.children[o]).newName;void 0===r&&(r=W(e.delta,n.childName,n.result)),i[r]!==n.result&&(i[r]=n.result)}e.setResult(i).exit()}}U.filterName="arraysCollectChildren";var q=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};function V(e,t){return e(t={exports:{}},t.exports),t.exports}q.filterName="dates";var G=V((function(e){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1,i=1,o=0;t.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[o,e]]:[];void 0===n&&(n=!0);var s=n,a=this.diff_commonPrefix(e,t),l=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var u=this.diff_compute_(e,t,s,r);return l&&u.unshift([o,l]),c&&u.push([o,c]),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,t,r,s){var a;if(!e)return[[i,t]];if(!t)return[[n,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return a=[[i,l.substring(0,u)],[o,c],[i,l.substring(u+c.length)]],e.length>t.length&&(a[0][0]=a[2][0]=n),a;if(1==c.length)return[[n,e],[i,t]];var d=this.diff_halfMatch_(e,t);if(d){var h=d[0],p=d[1],f=d[2],m=d[3],g=d[4],v=this.diff_main(h,f,r,s),_=this.diff_main(p,m,r,s);return v.concat([[o,g]],_)}return r&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,s):this.diff_bisect_(e,t,s)},t.prototype.diff_lineMode_=function(e,t,r){e=(p=this.diff_linesToChars_(e,t)).chars1,t=p.chars2;var s=p.lineArray,a=this.diff_main(e,t,!1,r);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push([o,""]);for(var l=0,c=0,u=0,d="",h="";l<a.length;){switch(a[l][0]){case i:u++,h+=a[l][1];break;case n:c++,d+=a[l][1];break;case o:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p,f=(p=this.diff_main(d,h,!1,r)).length-1;f>=0;f--)a.splice(l,0,p[f]);l+=p.length}u=0,c=0,d="",h=""}l++}return a.pop(),a},t.prototype.diff_bisect_=function(e,t,o){for(var r=e.length,s=t.length,a=Math.ceil((r+s)/2),l=a,c=2*a,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var p=r-s,f=p%2!=0,m=0,g=0,v=0,_=0,y=0;y<a&&!((new Date).getTime()>o);y++){for(var b=-y+m;b<=y-g;b+=2){for(var x=l+b,w=($=b==-y||b!=y&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-b;$<r&&w<s&&e.charAt($)==t.charAt(w);)$++,w++;if(u[x]=$,$>r)g+=2;else if(w>s)m+=2;else if(f&&(C=l+p-b)>=0&&C<c&&-1!=d[C]&&$>=(S=r-d[C]))return this.diff_bisectSplit_(e,t,$,w,o)}for(var k=-y+v;k<=y-_;k+=2){for(var S,C=l+k,E=(S=k==-y||k!=y&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1)-k;S<r&&E<s&&e.charAt(r-S-1)==t.charAt(s-E-1);)S++,E++;if(d[C]=S,S>r)_+=2;else if(E>s)v+=2;else if(!f){var $;if((x=l+p-k)>=0&&x<c&&-1!=u[x])if(w=l+($=u[x])-x,$>=(S=r-S))return this.diff_bisectSplit_(e,t,$,w,o)}}}return[[n,e],[i,t]]},t.prototype.diff_bisectSplit_=function(e,t,n,i,o){var r=e.substring(0,n),s=t.substring(0,i),a=e.substring(n),l=t.substring(i),c=this.diff_main(r,s,!1,o),u=this.diff_main(a,l,!1,o);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function o(e){for(var t="",o=0,r=-1,s=n.length;r<e.length-1;){-1==(r=e.indexOf("\n",o))&&(r=e.length-1);var a=e.substring(o,r+1);o=r+1,(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?t+=String.fromCharCode(i[a]):(t+=String.fromCharCode(s),i[a]=s,n[s++]=a)}return t}return n[0]="",{chars1:o(e),chars2:o(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],o=[],r=0;r<i.length;r++)o[r]=t[i.charCodeAt(r)];e[n][1]=o.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(r,o)==t.substring(r,o)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(e.length-o,e.length-r)==t.substring(t.length-o,t.length-r)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var o=Math.min(n,i);if(e==t)return o;for(var r=0,s=1;;){var a=e.substring(o-s),l=t.indexOf(a);if(-1==l)return r;s+=l,0!=l&&e.substring(o-s)!=t.substring(0,s)||(r=s,s++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var o=this;function r(e,t,n){for(var i,r,s,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=o.diff_commonPrefix(e.substring(n),t.substring(c)),h=o.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),i=e.substring(0,n-h),r=e.substring(n+d),s=t.substring(0,c-h),a=t.substring(c+d))}return 2*u.length>=e.length?[i,r,s,a,u]:null}var s,a,l,c,u,d=r(n,i,Math.ceil(n.length/4)),h=r(n,i,Math.ceil(n.length/2));return d||h?(s=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var t=!1,r=[],s=0,a=null,l=0,c=0,u=0,d=0,h=0;l<e.length;)e[l][0]==o?(r[s++]=l,c=d,u=h,d=0,h=0,a=e[l][1]):(e[l][0]==i?d+=e[l][1].length:h+=e[l][1].length,a&&a.length<=Math.max(c,u)&&a.length<=Math.max(d,h)&&(e.splice(r[s-1],0,[n,a]),e[r[s-1]+1][0]=i,s--,l=--s>0?r[s-1]:-1,c=0,u=0,d=0,h=0,a=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==n&&e[l][0]==i){var p=e[l-1][1],f=e[l][1],m=this.diff_commonOverlap_(p,f),g=this.diff_commonOverlap_(f,p);m>=g?(m>=p.length/2||m>=f.length/2)&&(e.splice(l,0,[o,f.substring(0,m)]),e[l-1][1]=p.substring(0,p.length-m),e[l+1][1]=f.substring(m),l++):(g>=p.length/2||g>=f.length/2)&&(e.splice(l,0,[o,p.substring(0,g)]),e[l-1][0]=i,e[l-1][1]=f.substring(0,f.length-g),e[l+1][0]=n,e[l+1][1]=p.substring(g),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),o=n.charAt(0),r=i.match(t.nonAlphaNumericRegex_),s=o.match(t.nonAlphaNumericRegex_),a=r&&i.match(t.whitespaceRegex_),l=s&&o.match(t.whitespaceRegex_),c=a&&i.match(t.linebreakRegex_),u=l&&o.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&n.match(t.blanklineStartRegex_);return d||h?5:c||u?4:r&&!a&&l?3:a||l?2:r||s?1:0}for(var i=1;i<e.length-1;){if(e[i-1][0]==o&&e[i+1][0]==o){var r=e[i-1][1],s=e[i][1],a=e[i+1][1],l=this.diff_commonSuffix(r,s);if(l){var c=s.substring(s.length-l);r=r.substring(0,r.length-l),s=c+s.substring(0,s.length-l),a=c+a}for(var u=r,d=s,h=a,p=n(r,s)+n(s,a);s.charAt(0)===a.charAt(0);){r+=s.charAt(0),s=s.substring(1)+a.charAt(0),a=a.substring(1);var f=n(r,s)+n(s,a);f>=p&&(p=f,u=r,d=s,h=a)}e[i-1][1]!=u&&(u?e[i-1][1]=u:(e.splice(i-1,1),i--),e[i][1]=d,h?e[i+1][1]=h:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,r=[],s=0,a=null,l=0,c=!1,u=!1,d=!1,h=!1;l<e.length;)e[l][0]==o?(e[l][1].length<this.Diff_EditCost&&(d||h)?(r[s++]=l,c=d,u=h,a=e[l][1]):(s=0,a=null),d=h=!1):(e[l][0]==n?h=!0:d=!0,a&&(c&&u&&d&&h||a.length<this.Diff_EditCost/2&&c+u+d+h==3)&&(e.splice(r[s-1],0,[n,a]),e[r[s-1]+1][0]=i,s--,a=null,c&&u?(d=h=!0,s=0):(l=--s>0?r[s-1]:-1,d=h=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([o,""]);for(var t,r=0,s=0,a=0,l="",c="";r<e.length;)switch(e[r][0]){case i:a++,c+=e[r][1],r++;break;case n:s++,l+=e[r][1],r++;break;case o:s+a>1?(0!==s&&0!==a&&(0!==(t=this.diff_commonPrefix(c,l))&&(r-s-a>0&&e[r-s-a-1][0]==o?e[r-s-a-1][1]+=c.substring(0,t):(e.splice(0,0,[o,c.substring(0,t)]),r++),c=c.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(c,l))&&(e[r][1]=c.substring(c.length-t)+e[r][1],c=c.substring(0,c.length-t),l=l.substring(0,l.length-t))),0===s?e.splice(r-a,s+a,[i,c]):0===a?e.splice(r-s,s+a,[n,l]):e.splice(r-s-a,s+a,[n,l],[i,c]),r=r-s-a+(s?1:0)+(a?1:0)+1):0!==r&&e[r-1][0]==o?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,a=0,s=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(r=1;r<e.length-1;)e[r-1][0]==o&&e[r+1][0]==o&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),u=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),u=!0)),r++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var o,r=0,s=0,a=0,l=0;for(o=0;o<e.length&&(e[o][0]!==i&&(r+=e[o][1].length),e[o][0]!==n&&(s+=e[o][1].length),!(r>t));o++)a=r,l=s;return e.length!=o&&e[o][0]===n?l:l+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],r=/&/g,s=/</g,a=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1].replace(r,"&amp;").replace(s,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(u){case i:t[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case n:t[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case o:t[c]="<span>"+d+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==i&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,r=0,s=0,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1];switch(l){case i:r+=c.length;break;case n:s+=c.length;break;case o:t+=Math.max(r,s),r=0,s=0}}return t+=Math.max(r,s)},t.prototype.diff_toDelta=function(e){for(var t=[],r=0;r<e.length;r++)switch(e[r][0]){case i:t[r]="+"+encodeURI(e[r][1]);break;case n:t[r]="-"+e[r][1].length;break;case o:t[r]="="+e[r][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,t){for(var r=[],s=0,a=0,l=t.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{r[s++]=[i,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var h=e.substring(a,a+=d);"="==l[c].charAt(0)?r[s++]=[o,h]:r[s++]=[n,h];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return r},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),o=this;function r(e,i){var r=e/t.length,s=Math.abs(n-i);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}var s=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(s=Math.min(r(0,a),s),-1!=(a=e.lastIndexOf(t,n+t.length))&&(s=Math.min(r(0,a),s)));var l,c,u=1<<t.length-1;a=-1;for(var d,h=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=h;l<c;)r(p,n+c)<=s?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var f=Math.max(1,n-c+1),m=Math.min(n+c,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=f;v--){var _=i[e.charAt(v-1)];if(g[v]=0===p?(g[v+1]<<1|1)&_:(g[v+1]<<1|1)&_|(d[v+1]|d[v])<<1|1|d[v+1],g[v]&u){var y=r(p,v-1);if(y<=s){if(s=y,!((a=v-1)>n))break;f=Math.max(1,2*n-a)}}}if(r(p+1,n)>s)break;d=g}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var r=t.substring(e.start2-i,e.start2);r&&e.diffs.unshift([o,r]);var s=t.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([o,s]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+s.length,e.length2+=r.length+s.length}},t.prototype.patch_make=function(e,r,s){var a,l;if("string"==typeof e&&"string"==typeof r&&void 0===s)a=e,(l=this.diff_main(a,r,!0)).length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(e&&"object"==typeof e&&void 0===r&&void 0===s)l=e,a=this.diff_text1(l);else if("string"==typeof e&&r&&"object"==typeof r&&void 0===s)a=e,l=r;else{if("string"!=typeof e||"string"!=typeof r||!s||"object"!=typeof s)throw new Error("Unknown call format to patch_make.");a=e,l=s}if(0===l.length)return[];for(var c=[],u=new t.patch_obj,d=0,h=0,p=0,f=a,m=a,g=0;g<l.length;g++){var v=l[g][0],_=l[g][1];switch(d||v===o||(u.start1=h,u.start2=p),v){case i:u.diffs[d++]=l[g],u.length2+=_.length,m=m.substring(0,p)+_+m.substring(p);break;case n:u.length1+=_.length,u.diffs[d++]=l[g],m=m.substring(0,p)+m.substring(p+_.length);break;case o:_.length<=2*this.Patch_Margin&&d&&l.length!=g+1?(u.diffs[d++]=l[g],u.length1+=_.length,u.length2+=_.length):_.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,f),c.push(u),u=new t.patch_obj,d=0,f=m,h=p)}v!==i&&(h+=_.length),v!==n&&(p+=_.length)}return d&&(this.patch_addContext_(u,f),c.push(u)),c},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var o=e[i],r=new t.patch_obj;r.diffs=[];for(var s=0;s<o.diffs.length;s++)r.diffs[s]=o.diffs[s].slice();r.start1=o.start1,r.start2=o.start2,r.length1=o.length1,r.length2=o.length2,n[i]=r}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);t=r+t+r,this.patch_splitMax(e);for(var s=0,a=[],l=0;l<e.length;l++){var c,u,d=e[l].start2+s,h=this.diff_text1(e[l].diffs),p=-1;if(h.length>this.Match_MaxBits?-1!=(c=this.match_main(t,h.substring(0,this.Match_MaxBits),d))&&(-1==(p=this.match_main(t,h.substring(h.length-this.Match_MaxBits),d+h.length-this.Match_MaxBits))||c>=p)&&(c=-1):c=this.match_main(t,h,d),-1==c)a[l]=!1,s-=e[l].length2-e[l].length1;else if(a[l]=!0,s=c-d,h==(u=-1==p?t.substring(c,c+h.length):t.substring(c,p+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[l].diffs)+t.substring(c+h.length);else{var f=this.diff_main(h,u,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(f)/h.length>this.Patch_DeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(f);for(var m,g=0,v=0;v<e[l].diffs.length;v++){var _=e[l].diffs[v];_[0]!==o&&(m=this.diff_xIndex(f,g)),_[0]===i?t=t.substring(0,c+m)+_[1]+t.substring(c+m):_[0]===n&&(t=t.substring(0,c+m)+t.substring(c+this.diff_xIndex(f,g+_[1].length))),_[0]!==n&&(g+=_[1].length)}}}}return[t=t.substring(r.length,t.length-r.length),a]},t.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var r=e[0],s=r.diffs;if(0==s.length||s[0][0]!=o)s.unshift([o,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>s[0][1].length){var a=t-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}return 0==(s=(r=e[e.length-1]).diffs).length||s[s.length-1][0]!=o?(s.push([o,n]),r.length1+=t,r.length2+=t):t>s[s.length-1][1].length&&(a=t-s[s.length-1][1].length,s[s.length-1][1]+=n.substring(0,a),r.length1+=a,r.length2+=a),n},t.prototype.patch_splitMax=function(e){for(var r=this.Match_MaxBits,s=0;s<e.length;s++)if(!(e[s].length1<=r)){var a=e[s];e.splice(s--,1);for(var l=a.start1,c=a.start2,u="";0!==a.diffs.length;){var d=new t.patch_obj,h=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([o,u]));0!==a.diffs.length&&d.length1<r-this.Patch_Margin;){var p=a.diffs[0][0],f=a.diffs[0][1];p===i?(d.length2+=f.length,c+=f.length,d.diffs.push(a.diffs.shift()),h=!1):p===n&&1==d.diffs.length&&d.diffs[0][0]==o&&f.length>2*r?(d.length1+=f.length,l+=f.length,h=!1,d.diffs.push([p,f]),a.diffs.shift()):(f=f.substring(0,r-d.length1-this.Patch_Margin),d.length1+=f.length,l+=f.length,p===o?(d.length2+=f.length,c+=f.length):h=!1,d.diffs.push([p,f]),f==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(f.length))}u=(u=this.diff_text2(d.diffs)).substring(u.length-this.Patch_Margin);var m=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==m&&(d.length1+=m.length,d.length2+=m.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===o?d.diffs[d.diffs.length-1][1]+=m:d.diffs.push([o,m])),h||e.splice(++s,0,d)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var r=[];if(!e)return r;for(var s=e.split("\n"),a=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<s.length;){var c=s[a].match(l);if(!c)throw new Error("Invalid patch string: "+s[a]);var u=new t.patch_obj;for(r.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),a++;a<s.length;){var d=s[a].charAt(0);try{var h=decodeURI(s[a].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+h)}if("-"==d)u.diffs.push([n,h]);else if("+"==d)u.diffs.push([i,h]);else if(" "==d)u.diffs.push([o,h]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+h)}a++}}return r},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case i:e="+";break;case n:e="-";break;case o:e=" "}t[r+1]=e+encodeURI(this.diffs[r][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=o})),K=2,J=60,Y=null,X=function(e){if(!Y){var t=void 0;if("undefined"!=typeof diff_match_patch)t="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(G)try{t=G&&new G}catch(e){t=null}if(!t){if(!e)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}Y={diff:function(e,n){return t.patch_toText(t.patch_make(e,n))},patch:function(e,n){for(var i=t.patch_apply(t.patch_fromText(n),e),o=0;o<i[1].length;o++)i[1][o]||(new Error("text patch failed").textPatchFailed=!0);return i[0]}}}return Y},Q=function(e){if("string"===e.leftType){var t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||J;if(e.left.length<t||e.right.length<t)e.setResult([e.left,e.right]).exit();else{var n=X();if(n){var i=n.diff;e.setResult([i(e.left,e.right),0,K]).exit()}else e.setResult([e.left,e.right]).exit()}}};Q.filterName="texts";var Z=function(e){if(!e.nested&&e.delta[2]===K){var t=X(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()}};Z.filterName="texts";var ee=function(e){var t=void 0,n=void 0,i=void 0,o=void 0,r=void 0,s=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(t=0,n=(i=e.split("\n")).length;t<n;t++){var l=(o=i[t]).slice(0,1);"@"===l?(s=a.exec(o),i[t]="@@ -"+s[3]+","+s[4]+" +"+s[1]+","+s[2]+" @@"):"+"===l?(i[t]="-"+i[t].slice(1),"+"===i[t-1].slice(0,1)&&(r=i[t],i[t]=i[t-1],i[t-1]=r)):"-"===l&&(i[t]="+"+i[t].slice(1))}return i.join("\n")},te=function(e){e.nested||e.delta[2]===K&&e.setResult([ee(e.delta[0]),0,K]).exit()};te.filterName="texts";var ne=function(){function e(t){i(this,e),this.processor=new u(t),this.processor.pipe(new d("diff").append(k,b,q,Q,S,L).shouldHaveResult()),this.processor.pipe(new d("patch").append(E,B,x,Z,C,z).shouldHaveResult()),this.processor.pipe(new d("reverse").append(T,U,w,te,$,H).shouldHaveResult())}return o(e,[{key:"options",value:function(){var e;return(e=this.processor).options.apply(e,arguments)}},{key:"diff",value:function(e,t){return this.processor.process(new g(e,t))}},{key:"patch",value:function(e,t){return this.processor.process(new v(e,t))}},{key:"reverse",value:function(e){return this.processor.process(new _(e))}},{key:"unpatch",value:function(e,t){return this.patch(e,this.reverse(t))}},{key:"clone",value:function(e){return m(e)}}]),e}(),ie="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},oe="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},re=function(e){return"_"===e.substr(0,1)?e.slice(1):e},se=function(e){return"_t"===e?-1:"_"===e.substr(0,1)?parseInt(e.slice(1),10):parseInt(e,10)+.1},ae=function(e,t){return se(e)-se(t)},le=function(){function e(){i(this,e)}return o(e,[{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),this.finalize(n)}},{key:"prepareContext",value:function(e){e.buffer=[],e.out=function(){var e;(e=this.buffer).push.apply(e,arguments)}}},{key:"typeFormattterNotFound",value:function(e,t){throw new Error("cannot format delta type: "+t)}},{key:"typeFormattterErrorFormatter",value:function(e,t){return t.toString()}},{key:"finalize",value:function(e){var t=e.buffer;if(ie(t))return t.join("")}},{key:"recurse",value:function(e,t,n,i,o,r,s){var a=t&&r?r.value:n;if(void 0!==t||void 0!==i){var l=this.getDeltaType(t,r),c="node"===l?"a"===t._t?"array":"object":"";void 0!==i?this.nodeBegin(e,i,o,l,c,s):this.rootBegin(e,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(e,l)).call(this,e,t,a,i,o,r)}catch(n){this.typeFormattterErrorFormatter(e,n,t,a,i,o,r),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==i?this.nodeEnd(e,i,o,l,c,s):this.rootEnd(e,l,c)}}},{key:"formatDeltaChildren",value:function(e,t,n){var i=this;this.forEachDeltaKey(t,n,(function(o,r,s,a){i.recurse(e,t[o],n?n[r]:void 0,o,r,s,a)}))}},{key:"forEachDeltaKey",value:function(e,t,n){var i=oe(e),o="a"===e._t,r={},s=void 0;if(void 0!==t)for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(void 0!==e[s]||o&&void 0!==e["_"+s]||i.push(s));for(s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=e[s];ie(a)&&3===a[2]&&(r[a[1].toString()]={key:s,value:t&&t[parseInt(s.substr(1))]},!1!==this.includeMoveDestinations&&void 0===t&&void 0===e[a[1]]&&i.push(a[1].toString()))}o?i.sort(ae):i.sort();for(var l=0,c=i.length;l<c;l++){var u=i[l];if(!o||"_t"!==u){var d=o?"number"==typeof u?u:parseInt(re(u),10):u,h=l===c-1;n(u,d,r[d],h)}}}},{key:"getDeltaType",value:function(e,t){if(void 0===e)return void 0!==t?"movedestination":"unchanged";if(ie(e)){if(1===e.length)return"added";if(2===e.length)return"modified";if(3===e.length&&0===e[2])return"deleted";if(3===e.length&&2===e[2])return"textdiff";if(3===e.length&&3===e[2])return"moved"}else if("object"===(void 0===e?"undefined":n(e)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(e){for(var t=[],n=e.split("\n@@ "),i=0,o=n.length;i<o;i++){var r=n[i],s={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(r).slice(1);s.location={line:a[0],chr:a[1]};for(var l=r.split("\n").slice(1),c=0,u=l.length;c<u;c++){var d=l[c];if(d.length){var h={type:"context"};"+"===d.substr(0,1)?h.type="added":"-"===d.substr(0,1)&&(h.type="deleted"),h.text=d.slice(1),s.pieces.push(h)}}t.push(s)}return t}}]),e}(),ce=Object.freeze({default:le}),ue=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"typeFormattterErrorFormatter",value:function(e,t){e.out('<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatValue",value:function(e,t){e.out("<pre>"+de(JSON.stringify(t,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,o=n.length;i<o;i++){var r=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+r.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+r.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=r.pieces,a=0,l=s.length;a<l;a++){var c=s[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+de(decodeURI(c.text))+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){var i="jsondiffpatch-"+t+(n?" jsondiffpatch-child-node-type-"+n:"");e.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(e){e.out("</div>"+(e.hasArrows?'<script type="text/javascript">setTimeout('+he.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(e,t,n,i,o){var r="jsondiffpatch-"+i+(o?" jsondiffpatch-child-node-type-"+o:"");e.out('<li class="'+r+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(e){e.out("</li>")}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_node",value:function(e,t,n){var i="a"===t._t?"array":"object";e.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(e,t,n),e.out("</ul>")}},{key:"format_added",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_modified",value:function(e,t){e.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(e,t[1]),e.out("</div>")}},{key:"format_deleted",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_moved",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-moved-destination">'+t[1]+"</div>"),e.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),e.hasArrows=!0}},{key:"format_textdiff",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(e,t[0]),e.out("</div>")}}]),t}(le);function de(e){for(var t=e,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],i=0;i<n.length;i++)t=t.replace(n[i][0],n[i][1]);return t}var he=function(e){var t=e||document,n=function(e){var t=e.textContent,n=e.innerText;return t||n},i=function(e,t){for(var n=e.children,i=0,o=n.length;i<o;i++)t(n[i],i)};!function(e,t,n){for(var i=e.querySelectorAll(t),o=0,r=i.length;o<r;o++)n(i[o])}(t,".jsondiffpatch-arrow",(function(e){var t=e.parentNode,o=e.children,r=e.style,s=t,a=o[0],l=a.children[1];a.style.display="none";var c=n(s.querySelector(".jsondiffpatch-moved-destination")),u=s.parentNode,d=void 0;if(i(u,(function(e){e.getAttribute("data-key")===c&&(d=e)})),d)try{var h=d.offsetTop-s.offsetTop;a.setAttribute("height",Math.abs(h)+6),r.top=-8+(h>0?0:h)+"px";var p=h>0?"M30,0 Q-10,"+Math.round(h/2)+" 26,"+(h-4):"M30,"+-h+" Q-10,"+Math.round(-h/2)+" 26,4";l.setAttribute("d",p),a.style.display=""}catch(e){}}))},pe=function(e,t,n){var i=t||document.body,o="jsondiffpatch-unchanged-",r={showing:o+"showing",hiding:o+"hiding",visible:o+"visible",hidden:o+"hidden"},s=i.classList;if(s){if(!n)return s.remove(r.showing),s.remove(r.hiding),s.remove(r.visible),s.remove(r.hidden),void(!1===e&&s.add(r.hidden));!1===e?(s.remove(r.showing),s.add(r.visible),setTimeout((function(){s.add(r.hiding)}),10)):(s.remove(r.hiding),s.add(r.showing),s.remove(r.hidden));var a=setInterval((function(){he(i)}),100);setTimeout((function(){s.remove(r.showing),s.remove(r.hiding),!1===e?(s.add(r.hidden),s.remove(r.visible)):(s.add(r.visible),s.remove(r.hidden)),setTimeout((function(){s.remove(r.visible),clearInterval(a)}),n+400)}),n)}},fe=function(e,t){return pe(!1,e,t)},me=void 0;function ge(e,t){return me||(me=new ue),me.format(e,t)}var ve=Object.freeze({showUnchanged:pe,hideUnchanged:fe,default:ue,format:ge}),_e=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return s(t,e),o(t,[{key:"prepareContext",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},e.row=function(t,n){e.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),e.out(e.indentPad),e.out('</pre><pre style="display: inline-block">'),e.out(t),e.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),e.out(n),e.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.row("",'<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,o=n.length;i<o;i++){var r=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+r.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+r.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=r.pieces,a=0,l=s.length;a<l;a++){var c=s[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){e.out('<table class="jsondiffpatch-annotated-delta">'),"node"===t&&(e.row("{"),e.indent()),"array"===n&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(e,t){"node"===t&&(e.indent(-1),e.row("}")),e.out("</table>")}},{key:"nodeBegin",value:function(e,t,n,i,o){e.row("&quot;"+t+"&quot;: {"),"node"===i&&e.indent(),"array"===o&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(e,t,n,i,o,r){"node"===i&&e.indent(-1),e.row("}"+(r?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}}]),t}(le),ye=function(e){return'<pre style="display:inline-block">&quot;'+e+"&quot;</pre>"},be={added:function(e,t,n,i){var o=" <pre>([newValue])</pre>";return void 0===i?"new value"+o:"number"==typeof i?"insert at index "+i+o:"add property "+ye(i)+o},modified:function(e,t,n,i){var o=" <pre>([previousValue, newValue])</pre>";return void 0===i?"modify value"+o:"number"==typeof i?"modify at index "+i+o:"modify property "+ye(i)+o},deleted:function(e,t,n,i){var o=" <pre>([previousValue, 0, 0])</pre>";return void 0===i?"delete value"+o:"number"==typeof i?"remove index "+i+o:"delete property "+ye(i)+o},moved:function(e,t,n,i){return'move from <span title="(position to remove at original state)">index '+i+'</span> to <span title="(position to insert at final state)">index '+e[1]+"</span>"},textdiff:function(e,t,n,i){return"text diff"+(void 0===i?"":"number"==typeof i?" at index "+i:" at property "+ye(i))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},xe=function(e,t){var n=this.getDeltaType(t),i=be[n],o=i&&i.apply(i,Array.prototype.slice.call(arguments,1)),r=JSON.stringify(t,null,2);"textdiff"===n&&(r=r.split("\\n").join('\\n"+\n   "')),e.indent(),e.row(r,o),e.indent(-1)};_e.prototype.format_added=xe,_e.prototype.format_modified=xe,_e.prototype.format_deleted=xe,_e.prototype.format_moved=xe,_e.prototype.format_textdiff=xe;var we=void 0;function ke(e,t){return we||(we=new _e),we.format(e,t)}var Se=Object.freeze({default:_e,format:ke}),Ce={add:"add",remove:"remove",replace:"replace",move:"move"},Ee=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!0,e}return s(t,e),o(t,[{key:"prepareContext",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.result=[],e.path=[],e.pushCurrentOp=function(e){var t=e.op,n=e.value,i={op:t,path:this.currentPath()};void 0!==n&&(i.value=n),this.result.push(i)},e.pushMoveOp=function(e){var t=this.currentPath();this.result.push({op:Ce.move,from:t,path:this.toPath(e)})},e.currentPath=function(){return"/"+this.path.join("/")},e.toPath=function(e){var t=this.path.slice();return t[t.length-1]=e,"/"+t.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.out("[ERROR] "+t)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(e,t,n){e.path.push(n)}},{key:"nodeEnd",value:function(e){e.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){e.pushCurrentOp({op:Ce.add,value:t[0]})}},{key:"format_modified",value:function(e,t){e.pushCurrentOp({op:Ce.replace,value:t[1]})}},{key:"format_deleted",value:function(e){e.pushCurrentOp({op:Ce.remove})}},{key:"format_moved",value:function(e,t){var n=t[1];e.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),n.result}}]),t}(le),$e=function(e){return e[e.length-1]},Te=function(e,t){return e.sort(t),e},Ae=function(e,t){var n=parseInt(e,10),i=parseInt(t,10);return isNaN(n)||isNaN(i)?0:i-n},De=function(e){return Te(e,(function(e,t){var n=e.path.split("/"),i=t.path.split("/");return n.length!==i.length?n.length-i.length:Ae($e(n),$e(i))}))},Oe=function(e,t){var n=Array(t.length+1).fill().map((function(){return[]}));return e.map((function(e){var n=t.map((function(t){return t(e)})).indexOf(!0);return n<0&&(n=t.length),{item:e,position:n}})).reduce((function(e,t){return e[t.position].push(t.item),e}),n)},Pe=function(e){return"move"===e.op},Ne=function(e){return"remove"===e.op},je=function(e){var t=Oe(e,[Pe,Ne]),n=l(t,3),i=n[0],o=n[1],r=n[2],s=De(o);return[].concat(c(s),c(i),c(r))},Me=void 0,Ie=function(e,t){return Me||(Me=new Ee),je(Me.format(e,t))},Re=function(e,t){console.log(Ie(e,t))},Le=Object.freeze({default:Ee,partitionOps:Oe,format:Ie,log:Re});function Fe(e){return t&&t[e]||function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}}var ze={added:Fe("green"),deleted:Fe("red"),movedestination:Fe("gray"),moved:Fe("yellow"),unchanged:Fe("gray"),error:Fe("white.bgRed"),textDiffLine:Fe("gray")},Be=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return s(t,e),o(t,[{key:"prepareContext",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},e.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},e.out=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,o=t.length;i<o;i++){var r=t[i].split("\n").join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(r=this.color[0](r)),this.buffer.push(r)}},e.pushColor=function(e){this.color=this.color||[],this.color.unshift(e)},e.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.pushColor(ze.error),e.out("[ERROR]"+t),e.popColor()}},{key:"formatValue",value:function(e,t){e.out(JSON.stringify(t,null,2))}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.indent();for(var i=0,o=n.length;i<o;i++){var r=n[i];e.pushColor(ze.textDiffLine),e.out(r.location.line+","+r.location.chr+" "),e.popColor();for(var s=r.pieces,a=0,l=s.length;a<l;a++){var c=s[a];e.pushColor(ze[c.type]),e.out(c.text),e.popColor()}i<o-1&&e.outLine()}e.indent(-1)}},{key:"rootBegin",value:function(e,t,n){e.pushColor(ze[t]),"node"===t&&(e.out("array"===n?"[":"{"),e.indent())}},{key:"rootEnd",value:function(e,t,n){"node"===t&&(e.indent(-1),e.out("array"===n?"]":"}")),e.popColor()}},{key:"nodeBegin",value:function(e,t,n,i,o){e.pushColor(ze[i]),e.out(n+": "),"node"===i&&(e.out("array"===o?"[":"{"),e.indent())}},{key:"nodeEnd",value:function(e,t,n,i,o,r){"node"===i&&(e.indent(-1),e.out("array"===o?"]":"}"+(r?"":","))),r||e.outLine(),e.popColor()}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_modified",value:function(e,t){e.pushColor(ze.deleted),this.formatValue(e,t[0]),e.popColor(),e.out(" => "),e.pushColor(ze.added),this.formatValue(e,t[1]),e.popColor()}},{key:"format_deleted",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_moved",value:function(e,t){e.out("==> "+t[1])}},{key:"format_textdiff",value:function(e,t){this.formatTextDiffString(e,t[0])}}]),t}(le),He=void 0,We=function(e,t){return He||(He=new Be),He.format(e,t)};function Ue(e,t){console.log(We(e,t))}var qe=Object.freeze({default:Be,format:We,log:Ue}),Ve=Object.freeze({base:ce,html:ve,annotated:Se,jsonpatch:Le,console:qe});function Ge(e,t){var n=void 0;return"string"==typeof t&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(t))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6],+(n[7]||0))):t}function Ke(e){return new ne(e)}var Je=void 0;function Ye(){return Je||(Je=new ne),Je.diff.apply(Je,arguments)}function Xe(){return Je||(Je=new ne),Je.patch.apply(Je,arguments)}function Qe(){return Je||(Je=new ne),Je.unpatch.apply(Je,arguments)}function Ze(){return Je||(Je=new ne),Je.reverse.apply(Je,arguments)}function et(){return Je||(Je=new ne),Je.clone.apply(Je,arguments)}e.DiffPatcher=ne,e.formatters=Ve,e.console=qe,e.create=Ke,e.dateReviver=Ge,e.diff=Ye,e.patch=Xe,e.unpatch=Qe,e.reverse=Ze,e.clone=et,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2837))},8686:(e,t,n)=>{var i="[object Symbol]",o=/[&<>"'`]/g,r=RegExp(o.source),s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")();var c,u=(c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==c?void 0:c[e]}),d=Object.prototype.toString,h=l.Symbol,p=h?h.prototype:void 0,f=p?p.toString:void 0;function m(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==i}(e))return f?f.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":m(t))&&r.test(e)?e.replace(o,u):e}},9462:e=>{e.exports=function(e){var t=[];return e=void 0===e?null:e,n.set=function(n){e=n,t.forEach((function(e){e(n)}))},n;function n(n){return n?(t.push(n),function(){t.splice(t.indexOf(n),1)}):e}}},6470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",o=0,r=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(r===a-1||1===s);else if(r!==a-1&&2===s){if(i.length<2||2!==o||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",o=0):o=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),r=a,s=0;continue}}else if(2===i.length||1===i.length){i="",o=0,r=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",o=2)}else i.length>0?i+="/"+e.slice(r+1,a):i=e.slice(r+1,a),o=a-r-1;r=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",o=!1,r=arguments.length-1;r>=-1&&!o;r--){var s;r>=0?s=arguments[r]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,o=47===s.charCodeAt(0))}return i=n(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&o&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var o=arguments[n];t(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var r=e.length,s=r-o,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var l=n.length-a,c=s<l?s:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else s>c&&(47===e.charCodeAt(o+d)?u=d:0===d&&(u=0));break}var h=e.charCodeAt(o+d);if(h!==n.charCodeAt(a+d))break;47===h&&(u=d)}var p="";for(d=o+u+1;d<=r;++d)d!==r&&47!==e.charCodeAt(d)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,o=-1,r=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!r){o=s;break}}else r=!1;return-1===o?i?"/":".":i&&1===o?"//":e.slice(0,o)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,o=0,r=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!s){o=i+1;break}}else-1===l&&(s=!1,l=i+1),a>=0&&(c===n.charCodeAt(a)?-1==--a&&(r=i):(a=-1,r=l))}return o===r?r=l:-1===r&&(r=e.length),e.slice(o,r)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){o=i+1;break}}else-1===r&&(s=!1,r=i+1);return-1===r?"":e.slice(o,r)},extname:function(e){t(e);for(var n=-1,i=0,o=-1,r=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===o&&(r=!1,o=a+1),46===l?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!r){i=a+1;break}}return-1===n||-1===o||0===s||1===s&&n===o-1&&n===i+1?"":e.slice(n,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}("/",e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,o=e.charCodeAt(0),r=47===o;r?(n.root="/",i=1):i=0;for(var s=-1,a=0,l=-1,c=!0,u=e.length-1,d=0;u>=i;--u)if(47!==(o=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===o?-1===s?s=u:1!==d&&(d=1):-1!==s&&(d=-1);else if(!c){a=u+1;break}return-1===s||-1===l||0===d||1===d&&s===l-1&&s===a+1?-1!==l&&(n.base=n.name=0===a&&r?e.slice(1,l):e.slice(a,l)):(0===a&&r?(n.name=e.slice(1,s),n.base=e.slice(1,l)):(n.name=e.slice(a,s),n.base=e.slice(a,l)),n.ext=e.slice(s,l)),a>0?n.dir=e.slice(0,a-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},9623:e=>{e.exports=function(e,t){var n,i,o,r,s=0;return function(){n=this,i=arguments;var e=new Date-s;return r||(e>=t?a():r=setTimeout(a,t-e)),o};function a(){r=0,s=+new Date,o=e.apply(n,i),n=null,i=null}}},540:function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,o=1;o<i;++o)t[o]=t[o].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function r(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function s(e,t){var n=e;if(t)for(var i in t)n[i]=t[i];return n}function a(e){var i="[A-Za-z]",o="[0-9]",r=t(o,"[A-Fa-f]"),s=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,o,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),d=n(i+t(i,o,"[\\+\\-\\.]")+"*"),h=n(n(s+"|"+t(u,a,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("[1-9]"+o)+"|"+o),n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("0?[1-9]"+o)+"|0?0?"+o)),f=n(p+"\\."+p+"\\."+p+"\\."+p),m=n(r+"{1,4}"),g=n(n(m+"\\:"+m)+"|"+f),v=n(n(m+"\\:")+"{6}"+g),_=n("\\:\\:"+n(m+"\\:")+"{5}"+g),y=n(n(m)+"?\\:\\:"+n(m+"\\:")+"{4}"+g),b=n(n(n(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+n(m+"\\:")+"{3}"+g),x=n(n(n(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+n(m+"\\:")+"{2}"+g),w=n(n(n(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+g),k=n(n(n(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+g),S=n(n(n(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),C=n(n(n(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),E=n([v,_,y,b,x,w,k,S,C].join("|")),$=n(n(u+"|"+s)+"+"),T=(n(E+"\\%25"+$),n(E+n("\\%25|\\%(?!"+r+"{2})")+$)),A=n("[vV]"+r+"+\\."+t(u,a,"[\\:]")+"+"),D=n("\\["+n(T+"|"+E+"|"+A)+"\\]"),O=n(n(s+"|"+t(u,a))+"*"),P=n(D+"|"+f+"(?!"+O+")|"+O),N=n(o+"*"),j=n(n(h+"@")+"?"+P+n("\\:"+N)+"?"),M=n(s+"|"+t(u,a,"[\\:\\@]")),I=n(M+"*"),R=n(M+"+"),L=n(n(s+"|"+t(u,a,"[\\@]"))+"+"),F=n(n("\\/"+I)+"*"),z=n("\\/"+n(R+F)+"?"),B=n(L+F),H=n(R+F),W="(?!"+M+")",U=(n(F+"|"+z+"|"+B+"|"+H+"|"+W),n(n(M+"|"+t("[\\/\\?]",c))+"*")),q=n(n(M+"|[\\/\\?]")+"*"),V=n(n("\\/\\/"+j+F)+"|"+z+"|"+H+"|"+W),G=n(d+"\\:"+V+n("\\?"+U)+"?"+n("\\#"+q)+"?"),K=n(n("\\/\\/"+j+F)+"|"+z+"|"+B+"|"+W),J=n(K+n("\\?"+U)+"?"+n("\\#"+q)+"?");return n(G+"|"+J),n(d+"\\:"+V+n("\\?"+U)+"?"),n(n("\\/\\/("+n("("+h+")@")+"?("+P+")"+n("\\:("+N+")")+"?)")+"?("+F+"|"+z+"|"+H+"|"+W+")"),n("\\?("+U+")"),n("\\#("+q+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+P+")"+n("\\:("+N+")")+"?)")+"?("+F+"|"+z+"|"+B+"|"+W+")"),n("\\?("+U+")"),n("\\#("+q+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+P+")"+n("\\:("+N+")")+"?)")+"?("+F+"|"+z+"|"+H+"|"+W+")"),n("\\?("+U+")"),n("\\#("+q+")"),n("("+h+")@"),n("\\:("+N+")"),{NOT_SCHEME:new RegExp(t("[^]",i,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+$+")")+"?\\]?$")}}var l=a(!1),c=a(!0),u=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=2147483647,p=36,f=1,m=26,g=38,v=700,_=72,y=128,b="-",x=/^xn--/,w=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=p-f,E=Math.floor,$=String.fromCharCode;function T(e){throw new RangeError(S[e])}function A(e,t){for(var n=[],i=e.length;i--;)n[i]=t(e[i]);return n}function D(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+A((e=e.replace(k,".")).split("."),t).join(".")}function O(e){for(var t=[],n=0,i=e.length;n<i;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<i){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&o)<<10)+(1023&r)+65536):(t.push(o),n--)}else t.push(o)}return t}var P=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:p},N=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},j=function(e,t,n){var i=0;for(e=n?E(e/v):e>>1,e+=E(e/t);e>C*m>>1;i+=p)e=E(e/C);return E(i+(C+1)*e/(e+g))},M=function(e){var t=[],n=e.length,i=0,o=y,r=_,s=e.lastIndexOf(b);s<0&&(s=0);for(var a=0;a<s;++a)e.charCodeAt(a)>=128&&T("not-basic"),t.push(e.charCodeAt(a));for(var l=s>0?s+1:0;l<n;){for(var c=i,u=1,d=p;;d+=p){l>=n&&T("invalid-input");var g=P(e.charCodeAt(l++));(g>=p||g>E((h-i)/u))&&T("overflow"),i+=g*u;var v=d<=r?f:d>=r+m?m:d-r;if(g<v)break;var x=p-v;u>E(h/x)&&T("overflow"),u*=x}var w=t.length+1;r=j(i-c,w,0==c),E(i/w)>h-o&&T("overflow"),o+=E(i/w),i%=w,t.splice(i++,0,o)}return String.fromCodePoint.apply(String,t)},I=function(e){var t=[],n=(e=O(e)).length,i=y,o=0,r=_,s=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d<128&&t.push($(d))}}catch(e){a=!0,l=e}finally{try{!s&&u.return&&u.return()}finally{if(a)throw l}}var g=t.length,v=g;for(g&&t.push(b);v<n;){var x=h,w=!0,k=!1,S=void 0;try{for(var C,A=e[Symbol.iterator]();!(w=(C=A.next()).done);w=!0){var D=C.value;D>=i&&D<x&&(x=D)}}catch(e){k=!0,S=e}finally{try{!w&&A.return&&A.return()}finally{if(k)throw S}}var P=v+1;x-i>E((h-o)/P)&&T("overflow"),o+=(x-i)*P,i=x;var M=!0,I=!1,R=void 0;try{for(var L,F=e[Symbol.iterator]();!(M=(L=F.next()).done);M=!0){var z=L.value;if(z<i&&++o>h&&T("overflow"),z==i){for(var B=o,H=p;;H+=p){var W=H<=r?f:H>=r+m?m:H-r;if(B<W)break;var U=B-W,q=p-W;t.push($(N(W+U%q,0))),B=E(U/q)}t.push($(N(B,0))),r=j(o,P,v==g),o=0,++v}}}catch(e){I=!0,R=e}finally{try{!M&&F.return&&F.return()}finally{if(I)throw R}}++o,++i}return t.join("")},R=function(e){return D(e,(function(e){return x.test(e)?M(e.slice(4).toLowerCase()):e}))},L=function(e){return D(e,(function(e){return w.test(e)?"xn--"+I(e):e}))},F={version:"2.1.0",ucs2:{decode:O,encode:function(e){return String.fromCodePoint.apply(String,d(e))}},decode:M,encode:I,toASCII:L,toUnicode:R},z={};function B(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function H(e){for(var t="",n=0,i=e.length;n<i;){var o=parseInt(e.substr(n+1,2),16);if(o<128)t+=String.fromCharCode(o),n+=3;else if(o>=194&&o<224){if(i-n>=6){var r=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&o)<<6|63&r)}else t+=e.substr(n,6);n+=6}else if(o>=224){if(i-n>=9){var s=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function W(e,t){function n(e){var n=H(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,B).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,B).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,B).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,B).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,B).replace(t.PCT_ENCODED,o)),e}function U(e){return e.replace(/^0*(.*)/,"$1")||"0"}function q(e,t){var n=e.match(t.IPV4ADDRESS)||[],i=u(n,2)[1];return i?i.split(".").map(U).join("."):e}function V(e,t){var n=e.match(t.IPV6ADDRESS)||[],i=u(n,3),o=i[1],r=i[2];if(o){for(var s=o.toLowerCase().split("::").reverse(),a=u(s,2),l=a[0],c=a[1],d=c?c.split(":").map(U):[],h=l.split(":").map(U),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,g=Array(f),v=0;v<f;++v)g[v]=d[v]||h[m+v]||"";p&&(g[f-1]=q(g[f-1],t));var _=g.reduce((function(e,t,n){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===n?i.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],y=void 0;if(_&&_.length>1){var b=g.slice(0,_.index),x=g.slice(_.index+_.length);y=b.join(":")+"::"+x.join(":")}else y=g.join(":");return r&&(y+="%"+r),y}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,K=void 0==="".match(/(){0}/)[1];function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(G);if(o){K?(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5])):(n.scheme=o[1]||void 0,n.userinfo=-1!==e.indexOf("@")?o[3]:void 0,n.host=-1!==e.indexOf("//")?o[4]:void 0,n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=-1!==e.indexOf("?")?o[7]:void 0,n.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),n.host&&(n.host=V(q(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var r=z[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||r&&r.unicodeSupport)W(n,i);else{if(n.host&&(t.domainHost||r&&r.domainHost))try{n.host=F.toASCII(n.host.replace(i.PCT_ENCODED,H).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}W(n,l)}r&&r.parse&&r.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function Y(e,t){var n=!1!==t.iri?c:l,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(V(q(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}var X=/^\.\.?\//,Q=/^\/\.(\/|$)/,Z=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(X))e=e.replace(X,"");else if(e.match(Q))e=e.replace(Q,"/");else if(e.match(Z))e=e.replace(Z,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];e=e.slice(i.length),t.push(i)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,i=[],o=z[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,H).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}W(e,n),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var r=Y(e,t);if(void 0!==r&&("suffix"!==t.reference&&i.push("//"),i.push(r),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var s=e.path;t.absolutePath||o&&o.absolutePath||(s=te(s)),void 0===r&&(s=s.replace(/^\/\//,"/%2F")),i.push(s)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=J(ne(e,n),n),t=J(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=te(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function oe(e,t,n){var i=s({scheme:"null"},n);return ne(ie(J(e,i),J(t,i),i,!0),i)}function re(e,t){return"string"==typeof e?e=ne(J(e,t),t):"object"===i(e)&&(e=J(ne(e,t),t)),e}function se(e,t,n){return"string"==typeof e?e=ne(J(e,n),n):"object"===i(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(J(t,n),n):"object"===i(t)&&(t=ne(t,n)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,B)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,H)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function de(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=de(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(de(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),i=u(n,2),o=i[0],r=i[1];e.path=o&&"/"!==o?o:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},pe={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},fe={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ve=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),_e="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ye=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),be="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xe=new RegExp(me,"g"),we=new RegExp(ve,"g"),ke=new RegExp(t("[^]",_e,"[\\.]",'[\\"]',ye),"g"),Se=new RegExp(t("[^]",me,be),"g"),Ce=Se;function Ee(e){var t=H(e);return t.match(xe)?t:e}var $e={scheme:"mailto",parse:function(e,t){var n=e,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var o=!1,r={},s=n.query.split("&"),a=0,l=s.length;a<l;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,h=u.length;d<h;++d)i.push(u[d]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:o=!0,r[le(c[0],t)]=le(c[1],t)}}o&&(n.headers=r)}n.query=void 0;for(var p=0,f=i.length;p<f;++p){var m=i[p].split("@");if(m[0]=le(m[0]),t.unicodeSupport)m[1]=le(m[1],t).toLowerCase();else try{m[1]=F.toASCII(le(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[p]=m.join("@")}return n},serialize:function(e,t){var n=e,i=r(e.to);if(i){for(var s=0,a=i.length;s<a;++s){var l=String(i[s]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(we,Ee).replace(we,o).replace(ke,B),d=l.slice(c+1);try{d=t.iri?F.toUnicode(d):F.toASCII(le(d,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=u+"@"+d}n.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==fe[f]&&p.push(f.replace(we,Ee).replace(we,o).replace(Se,B)+"="+h[f].replace(we,Ee).replace(we,o).replace(Ce,B));return p.length&&(n.query=p.join("&")),n}},Te=/^([^\:]+)\:(.*)/,Ae={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Te),i=e;if(n){var o=t.scheme||i.scheme||"urn",r=n[1].toLowerCase(),s=n[2],a=o+":"+(t.nid||r),l=z[a];i.nid=r,i.nss=s,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",i=e.nid,o=n+":"+(t.nid||i),r=z[o];r&&(e=r.serialize(e,t));var s=e,a=e.nss;return s.path=(i||t.nid)+":"+a,s}},De=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Oe={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(De)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};z[ce.scheme]=ce,z[ue.scheme]=ue,z[he.scheme]=he,z[pe.scheme]=pe,z[$e.scheme]=$e,z[Ae.scheme]=Ae,z[Oe.scheme]=Oe,e.SCHEMES=z,e.pctEncChar=B,e.pctDecChars=H,e.parse=J,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=ie,e.resolve=oe,e.normalize=re,e.equal=se,e.escapeComponent=ae,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(9755),t=n.n(e),i=n(1182),o=n.n(i);n(2466);class r{constructor(e,n,i,r){this._el=o().create(`\n    <div title="${e}">\n      ${n}\n    </div>\n    `),this._$dialog=t()(this._el),this._$dialog.on("dialogclose",(()=>{requestAnimationFrame((()=>this._$dialog.dialog("destroy")))})),i&&(r={...r,buttons:[{text:i,click:()=>this.close()}]}),this._option=r}get el(){return this._el}get button(){return this._$dialog.dialog("widget")[0].querySelector(".ui-dialog-buttonpane button")}open(){this._$dialog.dialog({dialogClass:"textae-editor__dialog",height:"auto",modal:!0,resizable:!1,width:550,...this._option})}close(){this._$dialog.dialog("close")}}class s extends r{constructor(){super("Help (Keyboard short-cuts)",'<div class="textae-tool__key-help"></div>',null,{height:313,width:523})}}const a=new s;class l{constructor(){this.editorList=[],this.selectedEditor=null}push(e){var t;Object.assign(e,{editorId:(t=this.editorList,`editor${t.length}`)}),this.editorList.push(e),e[0].addEventListener("keyup",(e=>function(e,t){e.selected&&"h"===t.key&&e.openHelpDialog()}(this,e)))}get selected(){return this.selectedEditor}set selected(e){!function(e,t){for(const n of e)n!==t&&n.api.unselect();t.api.select()}(this.editorList,e),this.selectedEditor=e}unselect(e){this.selectedEditor===e&&(e.api.unselect(),this.selectedEditor=null)}redraw(){this.editorList.forEach((e=>e.api.redraw()))}findByHTMLelement(e){return this.editorList.filter((t=>t[0]===e))[0]}openHelpDialog(){a.open()}}var c=n(9623),u=n.n(c);const d={attributes:!0,attributeFilter:["class"]};class h{constructor(){this._waitingEditors=new Set}setObserver(e){this._el||(this._el=o().create('<div class="textae-editor-veil" style="display: none;"></div>'),document.body.appendChild(this._el)),new MutationObserver((e=>this._mutationCallback(e))).observe(e[0],d)}_mutationCallback(e){this._collectWaitingEditors(e),this._waitingEditors.size>0?this._show():this._hide()}_collectWaitingEditors(e){e.forEach((({target:e})=>{e.classList.contains("textae-editor--wait")?this._waitingEditors.add(e):this._waitingEditors.delete(e)}))}_show(){this._el.style.display="block"}_hide(){this._el.style.display="none"}}const p=[[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"},{type:"write-auto",title:"Upload Automatically",push:!0}],[{type:"view",title:"View Mode",push:!0},{type:"term",title:"Term Edit Mode",push:!0},{type:"block",title:"Block Edit Mode",push:!0},{type:"relation",title:"Relation Edit Mode",push:!0}],[{type:"simple",title:"Simple View",push:!0},{type:"line-height",title:"Adjust LineHeight"},{type:"line-height-auto",title:"Auto Adjust LineHeight",push:!0}],[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}],[{type:"replicate",title:"Replicate span annotation [R]",enableWhenSelecting:{span:e=>e.span.single&&e.span.single.isDenotation}},{type:"replicate-auto",title:"Auto replicate",push:!0},{type:"boundary-detection",title:"Boundary Detection [B]",push:!0}],[{type:"entity",title:"New entity [E]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation))}},{type:"pallet",title:"Show label list editor [Q]"},{type:"change-label",title:"Change label [W]",enableWhenSelecting:{entity:e=>e.entity.some,relation:e=>e.relation.some}}],[{type:"delete",title:"Delete [D]",enableWhenSelecting:{span:e=>e.span.some,entity:e=>e.entity.some,relation:e=>e.relation.some}},{type:"copy",title:"Copy [C]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation)),entity:e=>e.entity.contains((e=>e.isDenotation))}},{type:"cut",title:"Cut [X]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation)),entity:e=>e.entity.contains((e=>e.isDenotation))}},{type:"paste",title:"Paste [V]",enableWhenSelecting:{span:(e,t)=>t.hasCopyingItem&&e.span.some||t.hasCuttingItem&&Boolean(e.span.single)}}],[{type:"setting",title:"Setting"}],[{type:"help",title:"Help [H]"}]];const f=new class{get mapForControl(){return{buttonGroup:p.map((e=>({list:e.map((e=>({type:e.type,title:e.title})))})))}}get _buttons(){return p.flat()}_getEnabelButtonsWhenSelecting(e){return this._buttons.filter((t=>t.enableWhenSelecting&&t.enableWhenSelecting[e])).map((t=>({name:t.type,predicate:t.enableWhenSelecting[e]})))}get spanButtons(){return this._getEnabelButtonsWhenSelecting("span")}get entityButtons(){return this._getEnabelButtonsWhenSelecting("entity")}get relationButtons(){return this._getEnabelButtonsWhenSelecting("relation")}get pushButtons(){return this._buttons.filter((e=>e.push)).map((e=>e.type))}},m=new s;const g={read:!0,write:!0,help:!0};class v{constructor(e,t){const n=o().create(e(f.mapForControl));this._el=n,function(e,t){const n=e=>{if(e.currentTarget.classList.contains("textae-control__icon--disabled"))return;const{buttonType:n}=e.currentTarget.dataset;t.api.handleButtonClick(n)};for(const t of e.querySelectorAll(".textae-control__icon"))"help"===t.dataset.buttonType?t.addEventListener("click",(()=>m.open())):t.addEventListener("click",n)}(this._el,t)}get el(){return this._el}updateAllButtonEnableState(e){!function(e,t){!function(e,t){for(const n of e.querySelectorAll(".textae-control__icon")){const{buttonType:e}=n.dataset;!0===t[e]?n.classList.remove("textae-control__icon--disabled"):n.classList.add("textae-control__icon--disabled")}}(e,{...t,...g})}(this._el,e)}updateButtonPushState(e,t){!function(e,t,n){const i=e.querySelector(`.textae-control__${t}-button`);n?i.classList.add("textae-control__icon--pushed"):i.classList.remove("textae-control__icon--pushed")}(this._el,e,t)}}function _({type:e,title:t}){return`\n<span \nclass="textae-control__icon textae-control__${e}-button" \ntitle="${t}" \ndata-button-type="${e}">\n</span>\n`}function y(e){const{buttonGroup:t}=e;return`\n<div class="textae-control textae-control-bar">\n  <span class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </span>\n  ${t.map((({list:e})=>`\n  <span class="textae-control__separator"></span>\n  ${e.map(_).join("\n")}\n  `)).join("\n")}\n</div>\n`}class b extends v{constructor(e){super(y,e)}transitWriteButtonImage(e){!function(e,t){const n=e.querySelector(".textae-control__write-button");!0===t?n.classList.add("textae-control__write-button--transit"):n.classList.remove("textae-control__write-button--transit")}(super.el,e)}}function x(e){const{buttonGroup:t}=e;return`\n<div class="textae-control textae-context-menu">\n  <p class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </p>\n  ${t.map((({list:e})=>`\n  <p class="textae-control__separator"></p>\n  ${e.map((({type:e,title:t})=>`\n  <p \n    class="textae-control__icon textae-control__${e}-button" \n    data-button-type="${e}">${t}\n  </p>`)).join("\n")}\n  `)).join("\n")}\n</div>\n`}class w extends v{constructor(e){super(x,e)}show(e,t){super.el.setAttribute("style",`top: ${e}px; left: ${t}px`),super.el.classList.remove("textae-context-menu--hide"),super.el.classList.add("textae-context-menu--show")}hide(){this._isOpen&&(super.el.classList.remove("textae-context-menu--show"),super.el.classList.add("textae-context-menu--hide"))}get _isOpen(){return super.el.classList.contains("textae-context-menu--show")}}function k(e,t){(e=e.add(".ui-dialog, .ui-widget-overlay"))[`${t}Class`]("textae-editor--wait")}class S{constructor(e){this._editor=e}startWait(){k(this._editor,"add")}endWait(){k(this._editor,"remove")}}function C(e){return window.open(e,"_blank","width=600, height=500")}function E(e,t,n){const i=function(e){const t=e.status,n=e.getResponseHeader("WWW-Authenticate"),i=e.getResponseHeader("Location");return 401===t&&n&&"ServerPage"===n&&i?i:null}(e);if(i){const e=C(i);if(e){const t=setInterval((()=>{e.closed&&(clearInterval(t),n())}),1e3);return}}t()}function $(e,n,i,o,r,s){const a={type:e,url:n,contentType:"application/json",data:i,crossDomain:!0,xhrFields:{withCredentials:!0}},l=()=>{t().ajax(a).done(o).fail(r).always(s)};t().ajax(a).done(o).fail((e=>E(e,r,l))).always(s)}function T(e,t,n,i,o,r){console.assert(e,"url is necessary!"),n(),$("post",e,t,i,o,r)}class A{constructor(e,t,n){this.beforeSend=e,this.failHandler=t,this.finishHandler=n}post(e,t,n){T(e,t,this.beforeSend,n,this.failHandler,this.finishHandler)}patch(e,t,n){!function(e,t,n,i,o,r){console.assert(e,"url is necessary!"),n(),console.log("PATCH data",t),$("patch",e,t,i,(()=>T(e,t,n,i,o,r)),r)}(e,t,this.beforeSend,n,this.failHandler,this.finishHandler)}}function D(e,n,i,o){o.startWait(),function(e,n,i){console.assert(e,"url is necessary!");const o={type:"GET",url:e,cache:!1,xhrFields:{withCredentials:!0},timeout:3e4};t().ajax(o).done(n).fail(i)}(e,(e=>{n(e),o.endWait()}),(()=>{i(),o.endWait()}))}class O{constructor(e,t,n){this._type=e,this._id=t,this._data=n}get type(){return this._type}get id(){return this._id}get data(){return this._data}get displayName(){return function(e,t){switch(e){case"url":return new URL(t,location.href).href;case"local file":return`${t}(local file)`;case"inline":return"inline";default:throw`unknown source type: ${e}.`}}(this._type,this._id)}}class P{constructor(e){this._editor=e,this._urlOfLastRead={annotation:"",config:""},this._cursorChanger=new S(e),this._ajaxSender=new A((()=>this._cursorChanger.startWait()),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.save.error")),(()=>this._cursorChanger.endWait())),function(e){const t=e.eventEmitter;t.on("textae-event.save-annotation-dialog.download.click",(()=>t.emit("textae-event.data-access-object.annotation.save"))).on("textae-event.save-annotation-dialog.viewsource.click",(()=>t.emit("textae-event.data-access-object.annotation.save"))).on("textae-event.save-configuration-dialog.download.click",(e=>t.emit("textae-event.data-access-object.configuration.save",e)))}(e,this._ajaxSender)}get annotationUrl(){return this._urlOfLastRead.annotation}set annotationUrl(e){"url"===e.type&&(this._urlOfLastRead.annotation=e.id)}get configurationUrl(){return this._urlOfLastRead.config}set configurationUrl(e){"url"===e.type&&(this._urlOfLastRead.config=e.id)}loadAnnotation(e){D(e,(t=>{const n=new O("url",e,t);t&&t.text?(this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",n),this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.url.set",n)):this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",n)}),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.error",e)),this._cursorChanger)}loadConfigulation(e,t=null){D(e,(n=>{this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new O("url",e,n),t)}),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.error",e)),this._cursorChanger)}saveAnnotation(e,t){e&&function(e,t,n,i,o){t.post(n,i,(()=>e.eventEmitter.emit(o)))}(this._editor,this._ajaxSender,e,JSON.stringify(t),"textae-event.data-access-object.annotation.save")}saveConfiguration(e,t){e&&this._ajaxSender.patch(e,JSON.stringify(t),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.save",t)))}}class N{constructor(e,t){this._emitter=e,this._name=t,this._container=new Map}_toModel(e){return e}_toModels(e,t){return e.map((e=>this._toModel(e,t)))}addSource(e,t){for(const n of this._toModels(e,t))this._addToContainer(n)}add(e){const t=this._addToContainer(e);return this._emit(`textae-event.annotation-data.${this._name}.add`,t),t}get(e){return this._container.get(e)}get all(){return Array.from(this._container.values())}findByType(e){return this.all.filter((t=>t.typeName===e))}get some(){return this._container.size}changeType(e,t){const n=this._container.get(e);return n.typeName=t,this._emit(`textae-event.annotation-data.${this._name}.change`,n),n}remove(e){const t=this._container.get(e);return t&&(this._container.delete(e),this._emit(`textae-event.annotation-data.${this._name}.remove`,t)),t}clear(){this._container.clear()}_addToContainer(e){return this._container.set(e.id,e),e}_emit(e,t){this._emitter.emit(e,t)}}function j(e,t){return function(e,t){return!!t&&t.begin<=e.begin&&e.end<=t.end}(e,t)?t:t.parent?j(e,t.parent):null}function M(e,t){return e.begin-t.begin||t.end-e.end}function I(e,t){t.sort(M).forEach(((t,n,i)=>{t.severTies();const o=0!==n?i[n-1]:null;if(o){const n=j(t,o);n?t.beChildOf(n):t.beChildOf(e)}else t.beChildOf(e)}))}function R(e,t,n){return`${e.editorId}__S${t}_${n}`}function L(e,t,n){return`${e.editorId}__B${t}_${n}`}function F(e,t){return`${e.editorId}__E${t.replace(/[:.]/g,"")}`}const z="ui-selected";function B(e,t){const{entities:n}=e;return n.length*function(e){return 24*e+18}(t)+function(e){return e.map((e=>18*e.typeValues.attributes.length)).reduce(((e,t)=>e+t),0)}(n)}function H(e,t){const n=0===e.children.length?0:function(e,t){return Math.max.apply(null,e.children.map((e=>H(e,t))))}(e,t);return B(e,t)+n}function W(e){return Math.round(100*e)/100}function U(e,t,n){(function(e,t,n){return!(!e.style||parseFloat(e.style.top)!==t||parseFloat(e.style.left)!==n)})(e,t,n)||(e.style.top=`${t}px`,e.style.left=`${n}px`)}function q(e){return e[0].querySelector(".textae-editor__annotation-box")}function V(e,t){return function(e,t,n){console.assert(t,"element MUST exists.");const i=e[0].querySelectorAll(`.${n}`),o=Array.from(i).indexOf(t);return i.length-o>1?i[o+1]:null}(e,document.querySelector(`#${t}`),"textae-editor__span")}function G(e,t){return{start:e.begin-t,end:e.end-t}}function K(e,t,n){const i=n.begin<e&&e<n.end&&n.end<t,o=e<n.begin&&n.begin<t&&t<n.end;return i||o}function J(e){const t=e.bigBrother;return t?function(e,t){if(K(e.begin,e.end,t))throw new Error(`span ${e.id} is corrisng with ${t.id}`);let{start:n,end:i}=G(e,t.end),o=t.element.nextSibling;return o.length<n&&(n-=o.length,i-=o.length,o=o.nextSibling),{textNode:o,start:n,end:i}}(e,t):function(e){const{start:t,end:n}=G(e,e.parent.begin);return{textNode:e.parent.element.firstChild,start:t,end:n}}(e)}function Y(e){const{textNode:t,start:n,end:i}=J(e);if(!t)throw new Error(`The textNode on to create a span is not found. ${e.id}`);if(n<0)throw new Error(`start must be positive, but ${n} for ${e.id}.`);if(t.length<i)throw new Error(`oh my god! I cannot render ${e.id}. "${t.textContent.slice(n,i)}" at ${n}~${i} of text(${t.textContent.length}) as "${t.textContent}".`);return function(e,t,n){const i=document.createRange();return i.setStart(e,t),i.setEnd(e,n),i}(t,n,i)}class X{constructor(e,t,n,i){this._editor=e,this._begin=t,this._end=n,this._spanModelContainer=i,this.severTies()}get id(){return R(this._editor,this._begin,this._end)}get begin(){return this._begin}get end(){return this._end}get types(){return[]}get entities(){return[]}get bigBrother(){return function(e){const t=e.parent.children,n=t.indexOf(e);return 0===n?null:t[n-1]}(this,this._spanModelContainer.topLevel)}get root(){return this._spanModelContainer}get parent(){return this._parent}get children(){return this._children}severTies(){this._parent=null,this._children=[]}beChildOf(e){e.children.push(this),this._parent=e}traverse(e,t){e(this);for(const n of this._children)n.traverse(e,t);t&&t(this)}get element(){return document.querySelector(`#${this.id}`)}renderElement(){const e=o().create(this._contentHTML);Y(this).surroundContents(e)}destroyElement(){const e=this.element,t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}get gridElement(){return document.querySelector(`#G${this.id}`)}get isGridRendered(){return this.gridElement}renderGridElement(){const e=function(e,t){const n=V(e,t);return n?document.querySelector(`#G${n.id}`):null}(this._editor,this.id);if(e)return e.insertAdjacentElement("beforebegin",this._createGridElement()),e.previousElementSibling;{const e=q(this._editor);return e.insertAdjacentElement("beforeend",this._createGridElement()),e.lastElementChild}}_createGridElement(){const{width:e,top:t,left:n}=this._gridRectangle,i=function(e,t,n,i){return`\n<div \n  id=G${e} \n  class="textae-editor__grid" \n  style="top: ${t}px; left: ${n}px; width: ${i}px;">\n</div>\n`}(this.id,t,n,e);return o().create(i)}updateGridPosition(){const{top:e,left:t}=this._gridRectangle;U(this.gridElement,e,t)}destroyGridElement(){this.isGridRendered&&this.gridElement.remove()}get _styleClasses(){return[...this.styles.values()].map((e=>`textae-editor__style textae-editor__style--${e}`))}}class Q extends X{constructor(e,t,n,i,o){super(e,t,n,o),this._entityModelContainer=i}get entities(){return this._entityModelContainer.getAllOfSpan(this)}passesAllEntitiesTo(e){for(const t of this.entities)t.span=e}get hasStyle(){return this.styles.size>0}get styles(){return this._spanModelContainer.getStyle(this.id)}get rectangle(){const e=this.element,t=e.getBoundingClientRect(),n=e.offsetParent.offsetParent.getBoundingClientRect();return{top:t.top-n.top,left:t.left-n.left,width:t.width}}get isDenotation(){return!0}select(){const e=super.element;e.classList.add(z),e.focus()}deselect(){const e=super.element;e&&e.classList.remove(z)}getHeightIncludeDescendantGrids(e){return H(this,e)+23+30}get _contentHTML(){return`\n      <span\n        id="${this.id}"\n        title="${this.id}"\n        tabindex="0"\n        class="${["textae-editor__span"].concat(this._styleClasses).join(" ")}"\n        >\n      </span>\n    `}get _gridRectangle(){console.assert(this.element,"span is not renderd");const{top:e,left:t,width:n}=this.rectangle;return{width:W(n),top:W(e-H(this,this._spanModelContainer._entityGap.value)),left:W(t)}}}class Z extends X{constructor(e,t,n,i,o){super(e,t,n,i),this.styles=new Set([o])}get styleOnly(){return!0}appendStyles(e){this.styles=new Set([...this.styles,...e])}get _contentHTML(){return`\n      <span\n        id="${this.id}"\n        title="${this.id}"\n        class="${this._styleClasses.join(" ")}"\n        >\n      </span>\n    `}}class ee extends X{constructor(e,t,n,i,o){super(e,t,n,o),this._entityModelContainer=i}get isBlock(){return!0}get entities(){return this._entityModelContainer.getAllOfSpan(this)}passesAllEntitiesTo(e){for(const t of this.entities)t.span=e}get id(){return L(this._editor,this._begin,this._end)}select(){const e=super.element;e.classList.add(z),this._backgroundElement.classList.add(z),e.focus()}deselect(){const e=super.element;e&&e.classList.remove(z),this._backgroundElement&&this._backgroundElement.classList.remove(z)}updateSidekicksOfBlockSpanPosition(e){const{top:t,left:n,width:i,height:o}=this.getReactOfSidekicksOfBlock(e);!function(e,t,n,i,o){e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${i}px`,e.style.height=`${o}px`}(this._backgroundElement,t,n,i,o),this.gridElement.style.height=`${this._rectangle.height}px`}renderElement(){super.renderElement();!function(e,t){const n=o().create(`\n    <div id="${t}" class="textae-editor__block-bg"></div>\n  `);e.insertAdjacentElement("afterbegin",n)}(q(this._editor),this._backgroundId)}destroyElement(){super.destroyElement(),this._backgroundElement.remove()}getHeightIncludeDescendantGrids(e){return B(this,e)+35}get _contentHTML(){return`\n      <div id="${this.id}" title="${this.id}" class="textae-editor__block"></div>\n    `}_createGridElement(){const e=super._createGridElement();return e.classList.add("textae-editor__block-hit-area"),e.dataset.id=this.id,e.title=this.id,e}get _gridRectangle(){console.assert(this.element,"span is not renderd");const e=this._spanModelContainer._textBox.boundingClientRect;return{width:100,top:W(this.getReactOfSidekicksOfBlock(this._spanModelContainer._textBox).top),left:W(e.width-108)}}updateGridPosition(){super.updateGridPosition(),this._entityToFocusOn&&(this._entityToFocusOn.select(),this._entityToFocusOn=null)}get isGridBeforePositioned(){return!this.gridElement.style.top}set entityToFocusOn(e){this._entityToFocusOn=e}getReactOfSidekicksOfBlock(e){const t=this._rectangle;return{top:t.top-e.lineHeight/2+20,left:t.left-e.boundingClientRect.left-8,width:t.width+8,height:t.height}}get _backgroundId(){return`bg_of_${this.id}`}get _backgroundElement(){return document.querySelector(`#${this._backgroundId}`)}get _rectangle(){const e=this.element,t=e.getBoundingClientRect(),n=e.offsetParent.offsetParent.getBoundingClientRect();return{top:t.top-n.top,left:t.left,width:t.width,height:t.height}}}function te(e,t,n){return e.filter((({span:e})=>K(t,n,e)))}function ne(e,t,n){const i=e.get(t),o=e.get(n);let r=i,s=o;return M(i,o)>0&&(r=o,s=i),[...e.values()].filter((e=>r.begin<=e.begin&&(e.end<=r.end||e.end<=s.end))).map((e=>e.id))}class ie{constructor(e,t,n,i,o){this._editor=e,this._emitter=t,this._entityContainer=n,this._textBox=i,this._entityGap=o,this._denotations=new Map,this._blocks=new Map,this._styles=new Map}add(e){if(console.assert(e,"span is necessary."),e instanceof ee)return this._addBlock(e);if(e instanceof Q)return this._addDenotation(e);if(e.isBlock){console.assert(!this.doesParentSpanExits(e.begin,e.end),`There are some parent spans of {begin: ${e.begin}, end: ${e.end}}.`);const t=new ee(this._editor,e.begin,e.end,this._entityContainer,this);return this._addBlock(t)}{const t=new Q(this._editor,e.begin,e.end,this._entityContainer,this);return this._addDenotation(t)}}addSource(e,t){for(const n of e)this._addInstanceFromElement(t,n);this._updateSpanTree()}hasDenotationSpan(e,t){const n=R(this._editor,e,t);return this._denotations.has(n)}get(e){return this._denotations.has(e)?this._denotations.get(e):this._blocks.has(e)?this._blocks.get(e):this._styles.get(e)}getStyle(e){return this._styles.has(e)?this._styles.get(e).styles:new Set}rangeDenotationSpan(e,t){return ne(this._denotations,e,t)}rangeBlockSpan(e,t){return ne(this._blocks,e,t)}get topLevel(){return this.all.filter((e=>e.parent===this)).sort(M)}get children(){return this.topLevel}clear(){this._denotations.clear(),this._blocks.clear(),this._styles.clear()}remove(e){const t=this._blocks.get(e);if(t)return this._removeBlock(t);const n=this._denotations.get(e);return n?this._removeDenotation(n):void 0}moveDenotationSpan(e,t,n){console.assert(e!==R(this._editor,t,n),`Do not need move span:  ${e} ${t} ${n}`);const i=this._denotations.get(e);this._removeDenotation(i);const o=new Q(this._editor,t,n,this._entityContainer,this);return this._addDenotation(o,i),this._emitter.emit("textae-event.annotation-data.span.move"),{begin:i.begin,end:i.end,id:o.id}}moveBlockSpan(e,t,n){console.assert(e!==L(this._editor,t,n),`Do not need move span:  ${e} ${t} ${n}`);const i=this._blocks.get(e);this._removeBlock(i);const o=new ee(this._editor,t,n,this._entityContainer,this);return this._addBlock(o,i),this._emitter.emit("textae-event.annotation-data.span.move"),{begin:i.begin,end:i.end,id:o.id}}_addDenotation(e,t=null){return this._addSpan(this._denotations,e,t),e}_addBlock(e,t=null){return this._addSpan(this._blocks,e,t),this._textBox.forceUpdate(),e}_addSpan(e,t,n=null){e.set(t.id,t),this._updateSpanTree(),n&&n.passesAllEntitiesTo(t),this._emitter.emit("textae-event.annotation-data.span.add",t)}_removeDenotation(e){return this._denotations.delete(e.id),this._emitter.emit("textae-event.annotation-data.span.remove",e),e}_removeBlock(e){return this._blocks.delete(e.id),this._emitter.emit("textae-event.annotation-data.span.remove",e),this._textBox.forceUpdate(),e}isBoundaryCrossingWithOtherSpans(e,t){return function(e,t,n){return console.assert(void 0!==n,"end is necessary."),te(e.map((e=>({span:e}))),t,n).length>0}(this.all,e,t)}doesParentSpanExits(e,t){const n=n=>n.begin<e&&t<n.end;return[...this._denotations.values()].some(n)||[...this._blocks.values()].some(n)||[...this._styles.values()].some(n)}get all(){const e=[...this._styles.values()].filter((e=>!this._denotations.has(e.id)));return[...this._blocks.values()].concat([...this._denotations.values()]).concat(e)}get allDenotationSpans(){return[...this._denotations.values()]}get allBlockSpans(){return[...this._blocks.values()]}get begin(){return 0}get element(){return this._editor[0].querySelector(".textae-editor__text-box")}_updateSpanTree(){I(this,this.all)}_addInstanceFromElement(e,t){switch(e){case"denotation":{const e=new Q(this._editor,t.span.begin,t.span.end,this._entityContainer,this);this._denotations.set(e.id,e);break}case"block":{const e=new ee(this._editor,t.span.begin,t.span.end,this._entityContainer,this);this._blocks.set(e.id,e);break}case"typesetting":{const e=new Z(this._editor,t.span.begin,t.span.end,this,t.style);this._styles.has(e.id)?this._styles.get(e.id).appendStyles(e.styles):this._styles.set(e.id,e);break}default:throw`${e} is unknown type span!`}}arrangeDenotationEntityPosition(){for(const e of this.allDenotationSpans)e.updateGridPosition()}arrangeBlockEntityPosition(){for(const e of this.allBlockSpans)e.updateGridPosition()}arrangeBackgroundOfBlockSpanPosition(){for(const e of this.allBlockSpans)e.updateSidekicksOfBlockSpanPosition(this._textBox)}get maxHeight(){const e=[...this._blocks.values()].concat([...this._denotations.values()]);return e.length?function(e,t){return Math.max(...e.map((e=>e.getHeightIncludeDescendantGrids(t))))}(e,this._entityGap.value):null}}function oe(e){return e.trim().startsWith("http")}function re(e,t){const n=e.all.filter((e=>"_base"!==e.prefix)).filter((e=>0===t.indexOf(`${e.prefix}:`)));return 1===n.length?n[0]:null}function se(e){return/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([/]?[^\s?]*[/]{1})*(?:\/?([^\s\n?[\]{}#]*(?:(?=\.)){1}|[^\s\n?[\]{}.#]*)?([.]{1}[^\s?#]*)?)?(?:\?{1}([^\s\n#[\]]*))?([#][^\s\n]*)?\)?/gi.exec(e)}function ae(e,t,n){if(n)return n;if(oe(t))return function(e){if(oe(e)){const t=se(e);if(t)return t[9]?t[9].slice(1):t[6]?t[6]+(t[7]||""):t[5]&&t[5].length>1?t[5].split("/").filter((e=>""!==e)).pop():t[3]}return e}(t);const i=re(e,t);return i?t.replace(`${i.prefix}:`,""):t}function le(e,t,n){if(oe(t))return t;if(n)return n;if(e.some){const n=re(e,t);if(n)return`${n.uri}${t.replace(`${n.prefix}:`,"")}`;const i=e.all.find((e=>"_base"===e.prefix));if(i)return`${i.uri}${t}`}return null}class ce{constructor({id:e,subj:t,pred:n,obj:i},o,r,s){this.id=e,this.subj=t,this.pred=n,this._obj=i,this._entityContainer=o,this._namespace=r,this._definitionContainer=s}get obj(){return this._obj}set obj(e){"numeric"===this._definitionContainer.get(this.pred).valueType?this._obj=parseFloat(e):this._obj=e}get subjectModel(){return this._entityContainer.get(this.subj)}get title(){return`pred: ${this.pred}, value: ${this._obj}`}get displayName(){return ae(this._namespace,"string"==typeof this._obj?this._obj:"",this._definitionContainer.getDisplayName(this.pred,this._obj))}get href(){return le(this._namespace,"string"==typeof this._obj?this._obj:"")}get color(){return this._definitionContainer.getColor(this.pred,this._obj)}equalsTo(e,t){return this.pred===e&&String(this._obj)===t}}function ue(e){return e.slice(1)}function de(e,t){return e.filter((e=>function(e,t){return new RegExp(`^${e}\\d+$`).test(t)}(t,e))).map(ue)}function he(e,t){return e+function(e){return(0===e.length?0:Math.max(...e))+1}(de(t,e))}class pe extends N{constructor(e,t,n){super(e,t),this._prefix=n}_toModels(e,t){const n=super._toModels(e,t);return n.sort(((e,t)=>e.id?t.id?e.id<t.id?-1:e.id>t.id?1:0:-1:1)),n}_addToContainer(e){return super._addToContainer(function(e,t,n){if(!e.id){const i=he(n,Array.from(t.keys()));e.id=i}return e}(e,this._container,this._prefix))}}class fe extends pe{constructor(e,t,n,i){super(e,"attribute","A"),this._entityContainer=t,this._namespace=n,this._definitionContainer=i}_toModel(e){return new ce(e,this._entityContainer,this._namespace,this._definitionContainer)}add(e){return e=e instanceof ce?e:this._toModel(e),super.add(e),e.subjectModel.updateElement(),e}change(e,t,n){const i=this.get(e);return t&&(i.pred=t),n&&(i.obj=n),super._emit("textae-event.annotation-data.attribute.change",i),i}remove(e){const t=super.remove(e);return console.assert(t,`There are no attribute ${e} to delete!`),t.subjectModel.updateElement(),super._emit("textae-event.annotation-data.attribute.remove",t),t}getSameDefinitionsAttributes(e){return this.all.filter((t=>t.pred===e))}getSameAttributes(e,t){return this.all.filter((n=>n.equalsTo(e,t)))}getAttributesFor(e){return this.all.filter((t=>t.subj===e)).sort(((e,t)=>this._definitionContainer.attributeCompareFunction(e,t)))}}class me{constructor(e,t=[]){this._typeName=e,this._attributes=t}get typeName(){return this._typeName}get attributes(){return this._attributes}isSameType(e,t=null){return t?this.typeName===e&&this._hasSameAttributes(t):this.typeName===e}hasSpecificPredicateAttribute(e){return this.attributes.some((t=>t.pred===e))}_hasSameAttributes(e){return e.length==this.attributes.length&&e.filter((e=>this.attributes.some((t=>t.equalsTo(e.pred,e.obj))))).length==this.attributes.length}}function ge(e,t){const n=F(e,t);return e[0].querySelector(`#${n} .textae-editor__signboard__type-values`)}var ve,_e=new Uint8Array(16);function ye(){if(!ve&&!(ve="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ve(_e)}const be=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const xe=function(e){return"string"==typeof e&&be.test(e)};for(var we=[],ke=0;ke<256;++ke)we.push((ke+256).toString(16).substr(1));const Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(we[e[t+0]]+we[e[t+1]]+we[e[t+2]]+we[e[t+3]]+"-"+we[e[t+4]]+we[e[t+5]]+"-"+we[e[t+6]]+we[e[t+7]]+"-"+we[e[t+8]]+we[e[t+9]]+"-"+we[e[t+10]]+we[e[t+11]]+we[e[t+12]]+we[e[t+13]]+we[e[t+14]]+we[e[t+15]]).toLowerCase();if(!xe(n))throw TypeError("Stringified UUID is invalid");return n};const Ce=function(e,t,n){var i=(e=e||{}).random||(e.rng||ye)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=i[o];return t}return Se(i)},Ee="http://www.w3.org/2000/svg";const $e=24;class Te{constructor(e,t,n,i,o,r,s,a,l,c,u){this._container=e;const d=e.children[0];this._targetMarker=this._createMarker(s,u,!1),d.appendChild(this._targetMarker),this._sourceMarker=this._createMarker(r,u,!0),d.appendChild(this._sourceMarker);const[h,p]=function(e,t,n,i,o,r,s){let a=e.left+e.width/2-t.left,l=n.left+n.width/2-t.left;const c=e.top-t.top-8,u=n.top-t.top-8,d=document.createElementNS(Ee,"path");a<l-$e&&((s||$e<=e.width/2)&&(a+=24),(s||$e<=n.width/2)&&(l-=24)),l<a-$e&&((s||$e<=e.width/2)&&(a-=8),(s||$e<=n.width/2)&&(l+=8));const h=Math.min(c,u)-Math.abs(l-a)/2-20;return d.setAttribute("d",`M ${a}, ${c} C ${a} ${h}, ${l} ${h}, ${l} ${u}`),d.setAttribute("style",`fill:none; stroke: ${i};`),d.setAttribute("marker-start",`url(#${r.id})`),d.setAttribute("marker-end",`url(#${o.id})`),s&&d.classList.add("textae-editor__relation--isBold"),[d,{sourceY:c,targetY:u,controleY:h,sourceX:a,targetX:l}]}(t,i,n,o,this._targetMarker,this._sourceMarker,u);e.appendChild(h),h.addEventListener("click",a),h.addEventListener("mouseenter",l),h.addEventListener("mouseleave",c),this._path=h,this._pathPoints=p}destructor(){this._container.removeChild(this._path);const e=this._container.children[0];e.removeChild(this._targetMarker),e.removeChild(this._sourceMarker)}get top(){return this._path.getBBox().y}get left(){if(this._t){const{sourceX:e,targetX:t}=this._pathPoints;return Math.pow(1-this._t,3)*e+3*Math.pow(1-this._t,2)*this._t*e+3*(1-this._t)*Math.pow(this._t,2)*t+Math.pow(this._t,3)*t}return this._path.getBBox().x}get width(){if(this._t)return 0;return this._path.getBBox().width}get _t(){const{sourceY:e,targetY:t,controleY:n}=this._pathPoints;return[...Array(20).keys()].map((e=>1*e/20)).find((i=>{const o=Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*n+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*t;return Math.abs(o-this._path.getBBox().y)<1}))}_createMarker(e,t,n){const i=function(e,t){const n=document.createElementNS(Ee,"marker");n.setAttribute("id",e),n.setAttribute("orient",t?90:270);const i=document.createElementNS(Ee,"polygon");return n.appendChild(i),n}(`r${Ce()}`,!n);return function(e,t,n,i){e.setAttribute("markerWidth",12*t),e.setAttribute("markerHeight",12*t),e.setAttribute("refX",i?8*t:0),e.setAttribute("refY",6*t);const o=e.children[0];o.setAttribute("points",`0 0, ${8*t} ${6*t}, 0 ${12*t}`),o.setAttribute("stroke","rgba(100, 100, 215, 0.8)"),o.setAttribute("fill",`${n}`)}(i,t?.5:1,e,n),i}}var Ae=n(4576),De=n.n(Ae);function Oe(e,t){return t?De()`<a target="_blank" href="${t}">${e}</a>`:De()`${e}`}function Pe({title:e,pred:t,obj:n,color:i,href:o,displayName:r}){return`\n<div\n  class="textae-editor__signboard__attribute"\n  title="${e}"\n  data-pred="${t}"\n  data-obj="${n}"\n  ${i?`style="background-color: ${i};"`:""}\n  >\n  <span class="textae-editor__signboard__attribute-label">\n    ${Oe(r,o)}\n  </span>\n</div>\n`}function Ne(e,t,n,i,r,s,a,l){const c=`\n<div\n  class="textae-editor__signboard ${a||""}"\n  ${l?`id="${l}"`:""}\n  title="${e}"\n  data-entity-type="${t}"\n  >\n  <div\n    class="textae-editor__signboard__type-values"\n    style="background-color: ${n};"\n    >\n    <div\n      class="textae-editor__signboard__type-label"\n      tabindex="0"\n      >\n      ${Oe(r,i)}\n    </div>\n    ${s.map(Pe).join("\n")}\n  </div>\n</div>\n`;return o().create(c)}class je{constructor(e,t,n,i,o,r,s,a,l,c){this._container=e;const u=document.createElement("div");u.classList.add("textae-editor__relation__signboard-location"),u.style.width=`${i}px`,u.style.top=n-18+"px",u.style.left=`${t}px`;const d=Ne(o,"relation",a,s,r,[],c?"ui-selected":null,null);u.appendChild(d),e.appendChild(u),d.addEventListener("click",l),this._label=u}destructor(){this._container.removeChild(this._label)}}class Me{constructor(e,t,n,i,o){this._relation=e,this._namespace=t,this._definitionContainer=n,this._onClick=i,this._editor=o,this._relationBox=o[0].querySelector(".textae-editor__relation-box"),this._annotationBox=q(o),this._createArrow(!1),this._createLabel(!1)}destroy(){this._arrow.destructor(),this._label.destructor()}select(){this._isSelected||(this._isSelected=!0,this.recreate())}deselect(){this._isSelected&&(this._isSelected=!1,this.recreate())}pointUp(){this._isSelected||this._isHovered||(this._isHovered=!0,this.recreate())}pointDown(){!this._isSelected&&this._isHovered&&(this._isHovered=!1,this.recreate())}recreate(){this.destroy(),this._createArrow(this._isSelected||this._isHovered),this._createLabel(this._isSelected)}_createArrow(e){const t=this._editor[0].querySelector(".textae-editor__annotation-box").getBoundingClientRect(),n=this._relation.sourceEndpoint.getBoundingClientRect(),i=this._relation.targetEndpoint.getBoundingClientRect();this._arrow=new Te(this._relationBox,n,i,t,this._relation.color,this._relation.sourceColor,this._relation.targetColor,this._onClick,(()=>this.pointUp()),(()=>this.pointDown()),e)}_createLabel(e){this._label=new je(this._annotationBox,this._arrow.left,this._arrow.top,this._arrow.width,this._relation.id,this._relation.displayName,this._relation.href,this._relation.color,this._onClick,e)}}class Ie{constructor(e,t,{id:n,pred:i,subj:o,obj:r},s,a){this._editor=e,this._entityContainer=t,this._id=n,this.typeName=i,this._subj=o,this._obj=r,this._namespace=s,this._definitionContainer=a}get id(){return this._id}set id(e){this._id=e}get typeName(){return this._typeName}set typeName(e){this._typeName=String(e)}get typeValues(){return new me(this._typeName)}get subj(){return this._subj}get obj(){return this._obj}get sourceEndpoint(){return ge(this._editor,this.subj)}get targetEndpoint(){return ge(this._editor,this.obj)}get sourceColor(){return this._entityContainer.get(this.subj).color}get targetColor(){return this._entityContainer.get(this.obj).color}select(){this._connect.select()}deselect(){this._connect.deselect()}pointUp(){this._connect.pointUp()}pointDown(){this._connect.pointDown()}renderElement(){const e=new Me(this,this._namespace,this._definitionContainer,(e=>{this._editor.eventEmitter.emit("textae-event.editor.relation.click",e,this),e.stopPropagation()}),this._editor);this._connect=e}updateElement(){this._connect.recreate()}destroyElement(){this._connect.destroy(),this._connect=void 0}get displayName(){return ae(this._namespace,this.typeName,this._definitionContainer.getLabel(this.typeName))}get href(){return le(this._namespace,this.typeName,this._definitionContainer.getUri(this.typeName))}get color(){return this._definitionContainer.getColor(this.typeName)}}class Re extends pe{constructor(e,t,n,i,o){super(t,"relation","R"),this._editor=e,this._parentContainer=n,this._namespace=i,this._definitionContainer=o}_toModel(e){return new Ie(this._editor,this._parentContainer.entity,e,this._namespace,this._definitionContainer)}add(e){return(e=e instanceof Ie?e:new Ie(this._editor,this._parentContainer.entity,e,this._namespace,this._definitionContainer)).renderElement(),super.add(e)}changeType(e,t){const n=super.changeType(e,t);return n.updateElement(),n}remove(e){const t=super.remove(e);return t.destroyElement(),t}clear(){for(const e of this.all)e.destroyElement();super.clear()}}class Le{constructor(e,t,n,i,o,r,s,a,l=null){this._editor=e,this._span=r,this.typeName=s,this._id=l,this._attributeContainer=t,this._relationContaier=n,this._entityGap=i,this._typeDefinition=o,this._namespace=a}get id(){return this._id}set id(e){this._id=e}get span(){return this._span}set span(e){this._span=e}get typeName(){return this._typeName}set typeName(e){this._typeName=String(e)}get typeValues(){return new me(this._typeName,this._attributeContainer.getAttributesFor(this._id))}get relations(){return this._relationContaier.all.filter((e=>e.obj===this.id||e.subj===this.id))}pointUpRelations(){for(const e of this.relations)e.pointUp()}pointDownRelations(){for(const e of this.relations)e.pointDown()}get element(){return document.querySelector(`#${F(this._editor,this.id)}`)}get isDenotation(){return this._span.isDenotation}get isBlock(){return this._span.isBlock}select(){this._selected||(this._selected=!0,this._selectElement())}deselect(){this._selected&&(this._selected=!1,this.element.classList.remove(z))}renderElement(){return Ne(this.id,this.isDenotation?"denotation":"block",this.color,this._href,this._displayName,this._attributeContainer.getAttributesFor(this._id),null,F(this._editor,this.id))}updateElement(){const e=this.renderElement();this.element.replaceWith(e),this._selected&&this._selectElement(),this.reflectEntityGapInTheHeight()}destroyElement(){this.element.remove()}reflectEntityGapInTheHeight(){if(this.isDenotation){const e=this.element;e&&e.setAttribute("style",`padding-top: ${24*this._entityGap.value}px;`)}}_selectElement(){const e=this.element;e.classList.add(z),this.span.isGridBeforePositioned?this.span.entityToFocusOn=this:e.querySelector(".textae-editor__signboard__type-label").focus()}get _definitionContainerFor(){if(this.isDenotation)return this._typeDefinition.denotation;if(this.isBlock)return this._typeDefinition.block;throw"unknown entity type"}get _displayName(){return ae(this._namespace,this.typeName,this._definitionContainerFor.getLabel(this.typeName))}get _href(){return le(this._namespace,this.typeName,this._definitionContainerFor.getUri(this.typeName))}get color(){return this._definitionContainerFor.getColor(this.typeName)}}class Fe extends pe{constructor(e,t,n,i,o){super(t,"entity","T"),this._editor=e,this._parent=n,this._entityGap=i,this._namespace=o}get _spanModelContainer(){return this._parent.span}get _attributeModelContainer(){return this._parent.attribute}get _relationModelContainer(){return this._parent.relation}_toModel(e,t){return new Le(this._editor,this._attributeModelContainer,this._relationModelContainer,this._entityGap,this._parent.typeDefinition,this._getSpan(t,e),e.obj,this._namespace,e.id)}add(e){if(!e.span)throw new Error(`entity has no span! ${JSON.stringify(e)}`);return e instanceof Le?super.add(e):super.add(new Le(this._editor,this._attributeModelContainer,this._relationModelContainer,this._entityGap,this._parent.typeDefinition,this._spanModelContainer.get(e.span),e.typeName,this._namespace))}changeType(e,t){const n=super.changeType(e,t);return n.updateElement(),n}moveEntities(e,t){for(const n of t)n.span=e;this._emit("textae-event.annotation-data.entity.move",t)}getAllOfSpan(e){return this.all.filter((t=>e.id===t.span.id))}get denotations(){return this.all.filter((e=>e.isDenotation))}get blocks(){return this.all.filter((e=>e.isBlock))}_getSpan(e,t){return this._spanModelContainer.get(this._getSpanId(e,t))}_getSpanId(e,t){switch(e){case"denotation":return R(this._editor,t.span.begin,t.span.end);case"block":return L(this._editor,t.span.begin,t.span.end);default:throw`${e} is unknown type span!`}}}function ze(e,t){return 0<=e&&e<=t.length}class Be{constructor(){this._map=new Map}set(e,t){this._map.set(e,t)}get(e){return this._map.has(e)?this._map.get(e)[0]:[]}getInhibitors(e){return this._map.has(e)?this._map.get(e)[1]:[]}get size(){return this._map.size}}class He{constructor(e,t="root",n=(()=>!0),i){this._candidates=e||[],this._name=t,this._predicate=n,this._prevValidation=i}and(e,t){return new He(this._candidates,e,t,this)}validateAll(){const e=new Be;let t,n;for(t=this,n=this._candidates;t;t=t._prevValidation)n=t._validate(n,this._candidates,e);return[n,e]}_validate(e,t,n){return this._getRejects(t).length>0&&n.set(this._name,[this._getRejects(t),this._getInhibitors(t)]),this._getAccepts(e)}_getAccepts(e){return e.filter((e=>this._test(e)))}_getRejects(e){return e.filter((e=>!this._test(e)))}_getInhibitors(e){const t=new Map;for(const n of e){const e=this._predicate(n);Array.isArray(e)&&!e[0]&&t.set(n,e[1])}return t}_test(e){const t=this._predicate(e);return Array.isArray(t)?t[0]:t}}function We(e,t,n){return new He(e).and("hasLength",(e=>e.span.end-e.span.begin>0)).and("inText",(e=>function(e,t){return ze(t.begin,e)&&ze(t.end,e)}(t,e.span))).and("isNotCrossing",(e=>{const t=te(n,e.span.begin,e.span.end);return[0===t.length,t]}))}function Ue(e,t){return e.some((e=>e.id===t))}function qe(e,t){return void 0===t.id||1===e.filter((e=>t.id&&t.id===e.id)).length}function Ve(e,t){return e.sourceProperty=t,e}function Ge(e,t){for(const[n,i]of t.getInhibitors("isNotCrossing"))console.warn(`Crossing ${e}: [${n.span.begin}:${n.span.end}](${n.id}) crosses with ${i.map((({id:e,span:t})=>`[${t.begin}:${t.end}](${e})`)).join(", ")}`)}function Ke(e,t){const n=(t.typesettings||[]).concat(t.denotations||[]).concat(t.blocks||[]),[i,o]=function(e,t,n){return We(t,e,n).validateAll()}(e,t.typesettings,n),[r,s]=function(e,t,n){return We(t,e,n).and("uniqueID",(e=>qe(n,e))).validateAll()}(e,t.denotations,n),[a,l]=function(e,t,n){return We(t,e,n).and("uniqueID",(e=>qe(n,e))).and("uniqueRange",(({span:e})=>1===t.filter((({span:t})=>e.begin===t.begin&e.end===t.end)).length)).validateAll()}(e,t.blocks,n),[c,u]=(d=r.concat(a),h=t.attributes,new He(h).and("subject",(e=>Ue(d,e.subj))).and("unique",(e=>function(e,t){return 1===e.filter((e=>e.subj===t.subj&&e.pred===t.pred&&e.obj===t.obj)).length}(h,e))).validateAll());var d,h;const[p,f]=(m=r.concat(a),g=t.relations,new He(g).and("object",(e=>Ue(m,e.obj))).and("subject",(e=>Ue(m,e.subj))).validateAll());var m,g,v,_,y;return Ge("TypeSettings",o),Ge("Denotations",s),Ge("Blocks",l),{accept:{denotation:r,attribute:c,relation:p,typeSetting:i,block:a},reject:{wrongRangeDenotations:s.get("hasLength"),outOfTextDenotations:s.get("inText"),wrongRangeBlocks:l.get("hasLength"),outOfTextBlocks:l.get("inText"),duplicatedRangeBlocks:l.get("uniqueRange"),wrongRangeTypesettings:o.get("hasLength"),outOfTextTypesettings:o.get("inText"),duplicatedIDs:s.get("uniqueID").map((e=>Ve(e,"denotations"))).concat(l.get("uniqueID").map((e=>Ve(e,"blocks")))),boundaryCrossingSpans:o.get("isNotCrossing").map((e=>Ve(e,"typesettings"))).concat(s.get("isNotCrossing").map((e=>Ve(e,"denotations")))).concat(l.get("isNotCrossing").map((e=>Ve(e,"blocks")))),referencedEntitiesDoNotExist:(v=u.get("subject"),_=f.get("object"),y=f.get("subject"),v.map((e=>(e.sourceProperty="attributes",e.alertSubj=!0,e))).concat(_.map((e=>(e.sourceProperty="relations",e.alertObj=!0,e)))).concat(y.map((e=>(e.sourceProperty="relations",e.alertSubj=!0,e))))),duplicatedAttributes:u.get("unique"),hasError:s.size||l.size||u.size||f.size||o.size}}}function Je(e,t,n,i){n&&(n=n.map(t));for(const t of e)t.addSource(n,i)}function Ye(e,t){return e.id?t+e.id:null}function Xe(e){return{...e,begin:parseInt(e.begin),end:parseInt(e.end)}}function Qe(e,t){return{...e,id:Ye(e,t),span:Xe(e.span)}}function Ze(e,t,n,i,o,r,s=""){const a=Ke(o,r);return Je([e,t],(e=>Qe(e,s)),a.accept.denotation,"denotation"),Je([n],(e=>function(e,t){return{...e,id:Ye(e,t),subj:t+e.subj,obj:e.obj}}(e,s)),a.accept.attribute),Je([i],(e=>function(e,t){return{...e,id:Ye(e,t),subj:t+e.subj,obj:t+e.obj}}(e,s)),a.accept.relation),Je([e],(e=>({...e,span:Xe(e.span)})),a.accept.typeSetting,"typesetting"),Je([e,t],(e=>Qe(e,s)),a.accept.block,"block"),a.reject}function et(e,t){const[n,i]=function(e,t,n,i,o,r){if(!r.tracks)return[!1,[]];const{tracks:s}=r;return delete r.tracks,[!0,s.map(((r,s)=>{const a=s+1,l=Ze(e,t,n,i,o,r,`track${a}_`);return l.name=`Track ${a} annotations.`,l}))]}(e.span,e.entity,e.attribute,e.relation,t.text,t),o=Ze(e.span,e.entity,e.attribute,e.relation,t.text,t);var r,s;o.name="Root annotations.",r=e.namespace,s=t.namespaces||[],Je([r],(e=>({id:e.prefix,...e})),s);const a=[o].concat(i);return{multitrack:n,hasError:a.some((e=>e.hasError)),rejects:a}}function tt(e){return e.attribute.all.map((e=>({id:e.id,subj:e.subj,pred:e.pred,obj:e.obj})))}function nt(e){return e.relation.all.map((e=>({id:e.id,pred:e.typeName,subj:e.subj,obj:e.obj})))}function it(e){return e.entity.blocks.map((e=>({id:e.id,span:{begin:e.span.begin,end:e.span.end},obj:e.typeName})))}class ot{constructor(){this._isGapShown=!0,this._numberOfGap=2}bind(e){this._callback=e}set show(e){this._isGapShown=e,this._callback(this.value)}get show(){return this._isGapShown}get value(){return this._isGapShown?this._numberOfGap:0}set value(e){this._numberOfGap=e,this._callback(e)}}function rt(e){const t=parseInt(e,10);return isNaN(t)?0:t}function st(e){const t=window.getComputedStyle(e);e.style.height="auto",e.style.height=e.offsetHeight-rt(t.paddingTop)+20+"px"}class at{constructor(e,t){this._editor=e,this._el=e.querySelector(".textae-editor__text-box"),this._annotationData=t}get boundingClientRect(){return this._el.getBoundingClientRect()}get lineHeight(){return e=this._el,rt(window.getComputedStyle(e).lineHeight);var e}set lineHeight(e){var t,n;t=this._el,n=e,t.style.lineHeight=`${n}px`,t.style.paddingTop=n/2+"px",st(this._el),this._updateSizeOfRelationBox()}render(e){this._el.innerHTML=e}updateLineHeight(){const e=this._annotationData.span.maxHeight;e?this.lineHeight=e:this._resetLineHeight()}forceUpdate(){st(this._el),this._updateSizeOfRelationBox()}_resetLineHeight(){const{lineHeight:e}=window.getComputedStyle(this._editor);this.lineHeight=rt(e)}_updateSizeOfRelationBox(){const e=this._editor.querySelector(".textae-editor__relation-box");e.style.height=this._el.style.height,e.style.width=window.getComputedStyle(this._el).width}}var lt=n(9462),ct=n.n(lt);class ut{constructor(e,t,n,i,o){this._editor=e,this._denotationContainer=t,this._blockContainer=n,this._relationContainer=i,this._attributeContainer=o,this._lockStateObservable=new(ct())(!1),this._lockStateObservable((()=>this._editor.eventEmitter.emit("textae-event.type-definition.lock")))}get denotation(){return this._denotationContainer}get block(){return this._blockContainer}get relation(){return this._relationContainer}get attribute(){return this._attributeContainer}get config(){const e={};return this._denotationContainer.config.length&&(e["entity types"]=this._denotationContainer.config),this._relationContainer.config.length&&(e["relation types"]=this._relationContainer.config),this._attributeContainer.config.length&&(e["attribute types"]=this._attributeContainer.config),this._blockContainer.config.length&&(e["block types"]=this._blockContainer.config),e}get isLock(){return this._lockStateObservable()}lockEdit(){this._lockStateObservable.set(!0)}unlockEdit(){this._lockStateObservable.set(!1)}setTypeConfig(e){e?(this._denotationContainer.definedTypes=e["entity types"]||[],this._relationContainer.definedTypes=e["relation types"]||[],this._attributeContainer.definedTypes=e["attribute types"]||[],this._blockContainer.definedTypes=e["block types"]||[],this.autocompletionWs=e.autocompletion_ws):(this._denotationContainer.definedTypes=[],this._relationContainer.definedTypes=[],this._attributeContainer.definedTypes=[],this._blockContainer.definedTypes=[],this.autocompletionWs=""),this._editor.eventEmitter.emit("textae-event.type-definition.reset")}}function dt(e){return e.reduce(((e,t)=>{const n=t.typeName;return e.has(n)?e.set(n,e.get(n)+1):e.set(n,1),e}),new Map)}function ht(e,t,n,i){const o=dt(e),r=function(e,t){const n=[];for(const i of e)t.has(i)||n.push(i);return n.sort(((e,t)=>e>t?1:e<t?-1:0)),n}(t.ids(),o);return function(e){const t=Array.from(e.keys());return t.sort(((t,n)=>{const i=e.get(n)-e.get(t);return 0!==i?i:t>n?1:t<n?-1:0})),t}(o).concat(r).map((e=>({id:e,label:t.has(e)&&t.get(e).label||void 0,defaultType:e===n,uri:se(e)?e:void 0,color:t.has(e)&&t.get(e).color||i,useNumber:o.get(e)})))}class pt{constructor(e){this._map=e.reduce(((e,t)=>e.set(t.id,t)),new Map)}has(e){return this._map.has(e)}get(e){return{...this._map.get(e)}}replace(e,t){e!==t.id&&this._map.delete(e),this._map.set(t.id,t)}delete(e){this._map.delete(e)}ids(){return this._map.keys()}getConfig(e){return function(e,t){return e.has(t)?e.get(t):function(e,t){const n=function(e,t){const n=[];for(const i of e)-1!==i.indexOf("*")&&0===t.indexOf(i.slice(0,-1))&&n.push(i);return n}(e.ids(),t);return 0===n.length?null:e.get(function(e){let t="";for(const n of e)n.length>t.length&&(t=n);return t}(n))}(e,t)}(this,e)}labelIncludes(e){return[...this._map.values()].filter((e=>e.label)).filter((t=>t.label.includes(e)))}clone(){return new Map(this._map)}}class ft{constructor(e,t,n,i){this._editor=e,this._annotationType=t,this._definedTypes=null,this._getAllInstanceFunc=n,this._defaultColor=i}get annotationType(){return this._annotationType}set definedTypes(e){this._definedTypes=new pt(e);const t=e.find((e=>!0===e.default));t?(delete t.default,this._defaultType=t.id):this._defaultType=null}has(e){return this._definedTypes.has(e)}get(e){const t={...this._definedTypes.get(e)};return this._defaultType===e?(t.default=!0,t):(delete t.default,t)}replace(e,t){this._definedTypes.replace(e,t),this._editor.eventEmitter.emit(`textae-event.type-definition.${this._annotationType}.change`,t.id)}addDefinedType(e){if(void 0===e.color){const t=this.getColor(e.id);t!==this._defaultColor&&(e.color=t)}if(void 0===e.label){const t=this.getLabel(e.id);t&&(e.label=t)}this.replace(e.id,e),e.default&&(this._defaultType=e.id)}get definedTypes(){return this._definedTypes}get config(){const e=this._definedTypes.clone();for(const{typeName:t}of this._getAllInstanceFunc())e.has(t)||e.set(t,{id:t});for(const[t,n]of e.entries()){const i={...n};n.id===this.defaultType?i.default=!0:delete i.default,e.set(t,i)}return[...e.values()]}get defaultType(){return this._defaultType?this._defaultType:function(e){const t=dt(e);if(0===t.size)return"something";const n=[...t.entries()].sort(),{mostCommonlyUsedType:i}=n.reduce((({max:e,mostCommonlyUsedType:t},[n,i])=>(i>e&&(e=i,t=n),{max:e,mostCommonlyUsedType:t})),{max:0,mostCommonlyUsedType:[n][0]});return i}(this._getAllInstanceFunc())}set defaultType(e){console.assert(e,"id is necessary!"),this._defaultType=e}get defaultColor(){return this._defaultColor}getColor(e){const t=this._definedTypes.getConfig(e);return t&&t.color||this._defaultColor}getLabel(e){const t=this._definedTypes.getConfig(e);return t&&t.label}getUri(e){return se(e)?e:void 0}findByLabel(e){return this.definedTypes.labelIncludes(e)}get pallet(){return ht(this._getAllInstanceFunc(),this._definedTypes,this.defaultType,this._defaultColor)}delete(e){this._definedTypes.delete(e)}}var mt=n(454),gt=n.n(mt);class vt{constructor(e,t){this.valueType=e,this.pred=t}get values(){return console.assert(this._values,"this._values to return!"),this._values}get JSON(){return{pred:this.pred}}get _valuesClone(){console.assert(this._values,"this._values is necessary to clone!");const e=[];for(const t of this._values)e.push({...t});return e}}class _t extends vt{constructor(e,t){super(e,t.pred),this.default=!0,this.label=t.label,this.color=t.color}getLabel(){return this.label}getDisplayName(){return this.label?this.label:this.pred}getColor(){return this.color}get JSON(){return Object.assign(super.JSON,{"value type":"flag",default:this.default,label:this.label,color:this.color})}}function yt(e,t){return e<=t}function bt(e,t){return e<t}function xt(e){if(e.startsWith("["))return t=>yt(new Number(e.replace("[","")),t);if(e.startsWith("("))return t=>bt(new Number(e.replace("(","")),t);throw`${e} is not valid interval notation`}function wt(e){if(e.endsWith("]"))return t=>yt(t,new Number(e.replace("]","")));if(e.endsWith(")"))return t=>bt(t,new Number(e.replace(")","")));throw`${e} is not valid interval notation`}class kt{constructor(e){const[t,n]=e.split(",");if(n?(this._lowwerCond=xt(t),this._upperCond=wt(n)):((t.startsWith("[")||t.startsWith("("))&&(this._lowwerCond=xt(t),this._upperCond=e=>!0),(t.endsWith("]")||t.endsWith(")"))&&(this._lowwerCond=e=>!0,this._upperCond=wt(t))),!this._lowwerCond||!this._upperCond)throw`${e} is not valid interval notation`}test(e){return this._lowwerCond(e)&&this._upperCond(e)}}class St extends vt{constructor(e,t){super(e,t.pred),this.default=t.default,this.min=t.min,this.max=t.max,this.step=t.step,this._values=t.values||[]}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)||String(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}_getMatchedValue(e){const t=this._values.filter((e=>"default"!==e.range)).find((t=>new kt(t.range).test(e)));if(t)return t;const n=this._values.find((e=>"default"===e.range));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"numeric",default:this.default,min:this.min,max:this.max,step:this.step,values:super._valuesClone})}}class Ct extends vt{constructor(e,t){super(e,t.pred),this._values=t.values||[]}get default(){return this.values.find((e=>e.default)).id}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}get values(){return this._values}get hasOnlyOneValue(){return 1===this._values.length}_getMatchedValue(e){return this.values.find((t=>t.id==e))}get JSON(){return Object.assign(super.JSON,{"value type":"selection",values:super._valuesClone})}}class Et extends vt{constructor(e,t){super(e,t.pred),this.autocompletionWs=t.autocompletion_ws,this.default=t.default,this._values=t.values||[]}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}_getMatchedValue(e){const t=this._values.filter((e=>"default"!==e.pattern)).find((t=>new RegExp(t.pattern).test(e)));if(t)return t;const n=this._values.find((e=>"default"===e.pattern));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"string",autocompletion_ws:this.autocompletionWs,default:this.default,values:super._valuesClone})}}function $t(e,t){switch(e){case"flag":return new _t(e,t);case"numeric":return new St(e,t);case"selection":return new Ct(e,t);case"string":return new Et(e,t);default:throw new Error(`${e} of ${JSON.stringify(t)} is Uknown Attribute`)}}class Tt{constructor(e,t){this._editor=e,this._getAllInstanceFunc=t}set definedTypes(e){this._definedTypes=new Map((e||[]).map((e=>[e.pred,$t(e["value type"],e)])))}create(e,t,n=null){null!==n&&this._definedTypes.size!==n?this._definedTypes=new Map(Array.from(this._definedTypes.entries()).reduce(((i,[o,r],s)=>(s===n&&i.push([t.pred,$t(e,t)]),i.push([o,r]),i)),[])):this._definedTypes.set(t.pred,$t(e,t)),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.create",t.pred)}get(e){return this._definedTypes.get(e)}update(e,t){return this._definedTypes=new Map(Array.from(this._definedTypes.entries()).map((([n,i])=>n===e?[t.pred,$t(i.valueType,t)]:[n,i]))),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.change",t.pred),this.get(t.pred)}updateValues(e,t){const n=this.get(e).JSON;return this.update(e,{...n,values:t})}move(e,t){this._definedTypes=new Map(gt()(this.attributes,e,t).map((e=>[e.pred,e])));const{pred:n}=this.attributes[-1===t?this.attributes.length-1:t];this._editor.eventEmitter.emit("textae-event.type-definition.attribute.move",n)}delete(e){this._definedTypes.delete(e),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.delete")}get attributes(){return Array.from(this._definedTypes.values())||[]}get config(){return this.attributes.map((e=>e.JSON))}isSelectionAttributeValueIndelible(e,t){return!!this.get(e).hasOnlyOneValue||!!this._getAllInstanceFunc().some((n=>n.equalsTo(e,t)))}getLabel(e,t){return console.assert(this._definedTypes.has(e),`There is no attribute definition for ${e}.`),this.get(e).getLabel(t)}getDisplayName(e,t){return console.assert(this._definedTypes.has(e),`There is no attribute definition for ${e}.`),this.get(e).getDisplayName(t)}getColor(e,t){if(this._definedTypes.has(e))return this.get(e).getColor(t)}getIndexOf(e){return Array.from(this._definedTypes.values()).findIndex((t=>t.pred===e))}getAttributeAt(e){return Array.from(this._definedTypes.values())[e-1]}attributeCompareFunction(e,t){const n=this.getIndexOf(e.pred),i=this.getIndexOf(t.pred);return n!==i?n-i:e.id&&t.id?e.id.localeCompare(t.id):0}}class At{constructor(e){this._sourceDoc="",this.namespace=new N(e.eventEmitter,"namespace");const t=new ft(e,"relation",(()=>this.relation.all),"#00CC66");this.relation=new Re(e,e.eventEmitter,this,this.namespace,t),this._entityGap=new ot,this.entity=new Fe(e,e.eventEmitter,this,this._entityGap,this.namespace);const n=new Tt(e,(()=>this.attribute.all));this.attribute=new fe(e.eventEmitter,this.entity,this.namespace,n),this._textBox=function(e,t){const n='\n    <div class="textae-editor__body">\n      <div class="textae-editor__annotation-box"></div>\n      <div class="textae-editor__text-box"></div>\n      <svg\n        namespace="http://www.w3.org/2000/svg"\n        class="textae-editor__relation-box">\n        <defs></defs>\n      </svg>\n    </div>\n    ';return e[0].innerHTML=n.replace(/[\n\r]+/g,""),new at(e[0],t)}(e,this),this.span=new ie(e,e.eventEmitter,this.entity,this._textBox,this._entityGap),this._editor=e;const i=new ft(e,"entity",(()=>this.entity.denotations),"#77DDDD"),o=new ft(e,"entity",(()=>this.entity.blocks),"#77DDDD");this._typeDefinition=new ut(e,i,o,t,n)}reset(e,t){var n;console.assert(e.text,"This is not a json file of anntations."),this._typeDefinition.setTypeConfig(t),this._sourceDoc=e.text,this._textBox.render(this.sourceDoc),(n=this).span.clear(),n.entity.clear(),n.attribute.clear(),n.relation.clear(),n.namespace.clear();const{multitrack:i,hasError:o,rejects:r}=et(this,e);this._editor.eventEmitter.emit("textae-event.annotation-data.all.change",this,i,o,r)}toJson(){return{denotations:(e=this,e.entity.denotations.map((e=>({id:e.id,span:{begin:e.span.begin,end:e.span.end},obj:e.typeName})))),attributes:tt(this),relations:nt(this),blocks:it(this)};var e}getReplicationRanges(e,t){return function(e,t,n,i,o){return function(e,t,n){const i=e.substring(t,n),o=n-t,r=[];let s=0;for(let t=e.indexOf(i);-1!==t;t=e.indexOf(i,s))s=t+o,r.push({begin:t,end:s});return r}(e,t,n).filter((({begin:e})=>e!==t)).filter((({begin:t,end:n})=>function(e,t,n,i){const o=e.charAt(t-1),r=e.charAt(n);return i(o)&&i(r)}(e,t,n,o))).filter((({begin:e,end:t})=>!i.hasDenotationSpan(e,t))).filter((({begin:e,end:t})=>!i.isBoundaryCrossingWithOtherSpans(e,t)))}(this.sourceDoc,e.begin,e.end,this.span,t)}get entityGap(){return this._entityGap}get textBox(){return this._textBox}get sourceDoc(){return this._sourceDoc.replaceAll(/\r\n/g," \n")}get typeDefinition(){return this._typeDefinition}}class Dt{constructor(e,t,n){this._emitter=e,this._kindName=t,this._selected=new Map,this._annotationData=n}add(e){if(this._selected.has(e))return;const t=this._annotationData[this._kindName].get(e);console.assert(t,`${e} is not a instance of ${this._kindName}.`),this._selected.set(e,t),t.select(),this._triggerChange()}has(e){return this._selected.has(e)}contains(e){for(const t of this._selected.values())if(e(t))return!0;return!1}get all(){return Array.from(this._selected.values())}get size(){return this._selected.size}get some(){return this.size>0}get singleId(){return 1===this._selected.size?this._selected.keys().next().value:null}get single(){const e=this.singleId;return e?this._selected.get(e):null}toggle(e){this._selected.has(e)?this.remove(e):this.add(e)}remove(e){this._selected.has(e)&&(this._selected.get(e).deselect(),this._selected.delete(e),this._triggerChange())}removeInstance(e){this.remove(e.id)}removeAll(){if(0!==this._selected.size){for(const[e]of this._selected)this._selected.get(e).deselect(),this._selected.delete(e);this._triggerChange()}}clear(){this._selected.clear()}_triggerChange(){this._emitter.emit(`textae-event.selection.${this._kindName}.change`)}}class Ot extends Dt{selectedWithAttributeOf(e){return this.all.some((t=>t.typeValues.attributes.some((t=>t.pred===e))))}onlySelectedWithJustOneAttributeOf(e){return this.all.every((t=>1===t.typeValues.attributes.filter((t=>t.pred===e)).length))}selectedWithoutAttributeOf(e){return this.all.some((t=>!t.typeValues.attributes.some((t=>t.pred===e))))}isDupulicatedPredAttrributeSelected(e){return this.all.some((t=>t.typeValues.attributes.filter((t=>t.pred===e)).length>1))}findSelectedWithSamePredicateAttribute(e){return this.all.find((t=>t.typeValues.attributes.find((t=>t.pred===e))))}findSelectedAttributeWithSamePredicate(e){const t=this.findSelectedWithSamePredicateAttribute(e);if(t)return t.typeValues.attributes.find((t=>t.pred===e))}}class Pt{constructor(e,t){this._annotationData=t,this.span=new Dt(e,"span",t),this.entity=new Ot(e,"entity",t),this.relation=new Dt(e,"relation",t),e.on("textae-event.annotation-data.span.remove",(e=>this.span.removeInstance(e))).on("textae-event.annotation-data.entity.remove",(e=>this.entity.removeInstance(e))).on("textae-event.annotation-data.relation.remove",(e=>this.relation.removeInstance(e))).on("textae-event.annotation-data.all.change",(()=>{this.span.clear(),this.entity.clear(),this.relation.clear()}))}add(e,t){console.assert(this[e]),this[e].add(t)}removeAll(){this.span.removeAll(),this.entity.removeAll(),this.relation.removeAll()}selectSpan(e){this.removeAll(),this.span.add(e)}selectSpanRange(e){this.removeAll();for(const t of e)this.span.add(t)}selectEntity(e){this.removeAll(),this.entity.add(e)}selectRelation(e){this.removeAll(),this.relation.add(e)}}class Nt{constructor(){this.reset()}reset(){this._lastEdit=-1,this._lastSave=-1}save(){this._lastSave=this._lastEdit}set lastEdit(e){this._lastEdit=e}get hasAnythingToSave(){return this._lastEdit!==this._lastSave}}class jt{constructor(e){this._resetHistory(),this._eventEmitter=e}push(e){this._histories.splice(this._pointer+1,this._histories.length-this._pointer,e),this._pointer++,e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger()}next(){this._pointer++;const e=this._histories[this._pointer];return e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger(),e}prev(){const e=this._histories[this._pointer];return e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._getPrevPrevCommandIndexOf("annotation_command")),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._getPrevPrevCommandIndexOf("configuration_command")),this._pointer--,this._trigger(),e}resetConfiguration(){this._removeConfigurationOperationsFromHistory(),this._pointerForConfiguration.reset(),this._trigger()}resetAllHistories(){this._resetHistory(),this._trigger()}annotatioSaved(){this._pointerForAnnotation.save(),this._trigger()}configurationSaved(){this._pointerForConfiguration.save(),this._trigger()}get hasAnythingToSaveAnnotation(){return this._pointerForAnnotation.hasAnythingToSave}get hasAnythingToSaveConfiguration(){return this._pointerForConfiguration.hasAnythingToSave}get hasAnythingToUndo(){return this._pointer>-1}get hasAnythingToRedo(){return this._pointer<this._histories.length-1}_getPrevPrevCommandIndexOf(e){const t=this._getPrevKindCommand(e);return void 0!==t?t:-1}_getPrevKindCommand(e){for(let t=this._pointer-1;t>=0;t--)if(this._histories[t].kind.has(e))return t}_trigger(){this._eventEmitter.emit("textae-event.history.change",this)}_removeConfigurationOperationsFromHistory(){for(let e=0;e<this._histories.length;e++)this._histories[e].isExactly("configuration_command")&&(this._pointer--,this._histories.splice(e,1))}_resetHistory(){this._pointer=-1,this._histories=[],this._pointerForAnnotation=new Nt,this._pointerForConfiguration=new Nt}}class Mt{constructor(e){this._observable=new(ct())(!1);let t=!1;e.eventEmitter.on("textae-event.history.change",(e=>{this._observable.set(t||e.hasAnythingToSaveAnnotation)})),e.eventEmitter.on("textae-event.data-access-object.annotation.save",(()=>{this._observable.set(!1),t=!1})),e.eventEmitter.on("textae-event.annotation-data.all.change",((e,n,i)=>{(n||i)&&(this._observable.set(!0),t=!0),this._observable.set(!1)}))}bind(e){this._observable(e)}get hasChange(){return this._observable()}}var It=n(8307),Rt=n.n(It);const Lt={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n",""],"non-edge characters":[" ","\n"]};class Ft{constructor(){this._delimiterCharacters=[],this._blankCharacters=[]}set(e){const t={...Lt,...e};return this._delimiterCharacters=t["delimiter characters"],this._blankCharacters=t["non-edge characters"],e}isDelimiter(e){return this._delimiterCharacters.indexOf("ANY")>=0?1:this._delimiterCharacters.indexOf(e)>=0}isBlankCharacter(e){return this._blankCharacters.indexOf(e)>=0}removeBlankChractors(e){for(const t of this._blankCharacters)e=e.replaceAll(t,"");return e}}function zt(e,t){t?console.log("[command.invoke]",e,t):console.log("[command.invoke]",e)}class Bt{get isEmpty(){return!1}isExactly(e){return this.kind.has(e)&&1===this.kind.size}}class Ht extends Bt{get kind(){return new Set(["annotation_command"])}}class Wt extends Ht{constructor(e,t,n,i,o=null){super(),this._editor=e,this._annotationData=t,this._modelType=n,this._newModel=i,this._selectionModel=o}execute(){return this._newModel=this._annotationData[this._modelType].add(this._newModel),this._selectionModel&&this._selectionModel.add(this._modelType,this._newModel.id),zt(`create a new ${this._modelType}: ${this._newModel.id}`),this._newModel}revert(){return new Ut(this._editor,this._annotationData,this._modelType,this._newModel.id)}}class Ut extends Ht{constructor(e,t,n,i){super(),this._editor=e,this._annotationData=t,this._modelType=n,this._id=i}execute(){this.oloModel=this._annotationData[this._modelType].remove(this._id),this.oloModel?zt(`remove a ${this._modelType}: `,this.oloModel):zt(`already removed ${this._modelType}: `,this._id)}revert(){return this.oloModel?new Wt(this._editor,this._annotationData,this._modelType,this.oloModel):{execute:()=>{}}}}class qt extends Bt{get kind(){return new Set(["configuration_command"])}}class Vt extends qt{constructor(e,t,n,i=null){super(),this._definitionContainer=e,this._attrDef=t,this._index=n,this._indexThatAddDefaultTo=i}execute(){const e=[...this._attrDef.values];if("selection"===this._attrDef.valueType&&e[this._index].default&&null===this._indexThatAddDefaultTo){let t=null;e.forEach(((e,n)=>{null===t&&n!=this._index&&(t=n)})),e[t]={...e[t],default:!0}}this._deletedValue=e.splice(this._index,1)[0],"selection"===this._attrDef.valueType&&null!==this._indexThatAddDefaultTo&&(e[this._indexThatAddDefaultTo]={...e[this._indexThatAddDefaultTo],default:!0}),this._updatedAttrDef=this._definitionContainer.updateValues(this._attrDef.pred,e),zt(`remove a value from an attrribute:${this._attrDef.pred}, index:${this._index}, updated values: \n ${e.map((e=>JSON.stringify(e))).join("\n ")}`)}revert(){return new Gt(this._definitionContainer,this._updatedAttrDef,this._deletedValue,this._index)}}class Gt extends qt{constructor(e,t,n,i=null){super(),this._definitionContainer=e,this._pred=t.pred,this._index=i,this._value=n;const o=[...t.values];if("selection"===t.valueType&&n.default){this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=o.findIndex((e=>e.default)));const e={...o[this._indexThatRemoveDefaultFrom]};delete e.default,o[this._indexThatRemoveDefaultFrom]=e}o.splice(i||o.length,0,n),this._modifiedValues=o}execute(){this._updatedAttrDef=this._definitionContainer.updateValues(this._pred,this._modifiedValues),zt(`add a new value to attrribute:${this._pred}, value: ${JSON.stringify(this._value)}, index: ${this._index}, updated values: \n ${this._modifiedValues.map((e=>JSON.stringify(e))).join("\n ")}`)}revert(){return new Vt(this._definitionContainer,this._updatedAttrDef,this._updatedAttrDef.values.length-1,this._indexThatRemoveDefaultFrom)}}class Kt extends Bt{execute(){if(console.assert(this._subCommands,"_subCommands is necessary!"),this.isEmpty)this.revert=()=>({execute(){}});else{for(const e of this._subCommands)e.execute();this._afterInvoke&&this._afterInvoke(),this.revert=()=>({_subCommands:this._subCommands,_logMessage:this._logMessage,_afterInvoke:this._afterInvoke,execute(){for(const e of this._subCommands.map((e=>e.revert())).reverse())e.execute();this._afterInvoke&&this._afterInvoke(),zt(`revert: ${this._logMessage}`)}}),zt(this._logMessage)}}get kind(){return this._subCommands.reduce(((e,t)=>new Set([...e,...t.kind])),new Set)}get isEmpty(){return!this._subCommands||0===this._subCommands.length}}class Jt extends qt{constructor(e,t,n){super(),this._definitionContainer=e,this._attrDef=t,this._changedProperties=n}execute(){const e=this._attrDef.pred,[t,n]=function(e,t){const n=e.JSON,i=new Map;for(const[o,r]of t.entries())null===r&&void 0!==e[o]?(delete n[o],i.set(o,e[o])):null!==r&&(n[o]=r,i.set(o,void 0===e[o]?null:e[o]));return[n,i]}(this._attrDef,this._changedProperties);this._revertAttrDef=this._definitionContainer.update(e,t),this._revertChangedProperties=n,zt(`change old pred:${e} to new attridute definition:${JSON.stringify(t)}`)}revert(){return new Jt(this._definitionContainer,this._revertAttrDef,this._revertChangedProperties)}}class Yt extends Ht{constructor(e,t,n,i){super(),this._annotationData=e,this._attribute=t,this._oldPred=t.pred,this._oldObj=t.obj,this._newPred=n,this._newObj=i}execute(){this.newModel=this._annotationData.attribute.change(this._attribute.id,this._newPred,this._newObj),zt(`atttribute: ${this._attribute.id} changed from ${this._oldPred}:${this._oldObj} to ${this._newPred}:${this._newObj}.`)}revert(){return new Yt(this._annotationData,this.newModel,this._oldPred,this._oldObj)}}class Xt extends Kt{constructor(e,t,n,i,o){super();const r=[new Jt(n,i,o)];let s=[];if(o.has("pred")){const n=t.attribute.getSameDefinitionsAttributes(i.pred);s=n.map((e=>new Yt(t,e,o.get("pred"),e.obj))),this._afterInvoke=()=>{e.eventEmitter.emit("textae-event.commander.attributes.change",n)}}this._subCommands=r.concat(s),this._logMessage=`set ${[...o.entries()].map((([e,t])=>`${e}:${t}`))} to attribute definition ${i.pred}`}}class Qt extends Kt{constructor(e,t,n,i,o,r,s=null){super();const a=[];for(const e of i){const t=e.typeValues.attributes.find((e=>e.pred==o.pred&&e.obj!==r));t&&a.push(t)}this._subCommands=a.map((e=>new Yt(t,e,null,r))),a.length&&(this._afterInvoke=()=>e.eventEmitter.emit("textae-event.commander.attributes.change",a));const l=[];s&&"string"===o.valueType&&!o.values.some((e=>e.pattern===r))&&l.push(new Gt(n,o,{pattern:r,label:s})),this._subCommands=this._subCommands.concat(l),this._logMessage=`update obj ${r} to attributes: ${a.map((e=>e.id)).join(",")}`}}class Zt extends Ht{constructor(e,t,n,i,o){super(),this._editor=e,this._annotationData=t,this._annotationType=n,this._id=i,this._newType=o}execute(){this.oldType=this._annotationData[this._annotationType].get(this._id).typeName;const e=this._annotationData[this._annotationType].changeType(this._id,this._newType);zt(`change type of a ${this._annotationType}. oldtype:${this.oldType} ${this._annotationType}:`,e)}revert(){return new Zt(this._editor,this._annotationData,this._annotationType,this._id,this.oldType)}}class en extends Kt{constructor(e,t,n,i,o,r){super();const s=n[i].all.filter((e=>!e.typeValues.isSameType(o,r))),a=s.map((n=>new Zt(e,t,i,n.id,o))),l=function(e,t,n,i){const o=[];for(const r of e){if(r.typeValues)for(const e of r.typeValues.attributes){const r=t.find((t=>e.equalsTo(t.pred,t.obj)));r?String(e.obj)!==r.obj&&o.push(new Yt(n,e,r.pred,r.obj)):o.push(new Ut(i,n,"attribute",e.id))}for(const e of t)r.typeValues.attributes.some((t=>t.equalsTo(e.pred,e.obj)))||o.push(new Wt(i,n,"attribute",{subj:r.id,pred:e.pred,obj:e.obj}))}return o}(s,r,t,e);this._subCommands=a.concat(l),this._logMessage=`set type ${o}${r.length>0?` and attributes ${JSON.stringify(r)}`:""} to ${i} items ${s.map((e=>e.id))}`}}class tn extends qt{constructor(e,t,n,i,o,r){super(),this._editor=e,this._annotationData=t,this._definitionContainer=n,this._id=i,this._changedProperties=o,this._newDefaultTypeId=r}execute(){const e=this._definitionContainer.get(this._id),[t,n]=function(e,t){const n={...t},i=new Map;for(const[o,r]of e.entries())null===r&&void 0!==t[o]?(delete n[o],i.set(o,t[o])):null!==r&&(n[o]=r,i.set(o,void 0===t[o]?null:t[o]));return[n,i]}(this._changedProperties,e);this._definitionContainer.replace(this._id,t),t.default?(this.revertDefaultTypeId=this._definitionContainer.defaultType,this._definitionContainer.defaultType=t.id):this._newDefaultTypeId&&(this._definitionContainer.defaultType=this._newDefaultTypeId),this.revertId=t.id,this.revertChangedProperties=n,zt(`change old type:${JSON.stringify(e)} to new type:${JSON.stringify(t)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new tn(this._editor,this._annotationData,this._definitionContainer,this.revertId,this.revertChangedProperties,this.revertDefaultTypeId)}}class nn extends qt{constructor(e,t,n,i){super(),this._editor=e,this._definitionContainer=t,this._removeType=n,this._revertDefaultTypeId=i}execute(){const{id:e}=this._removeType,t=this._definitionContainer.get(e);this._definitionContainer.delete(e),this._revertDefaultTypeId&&(this._definitionContainer.defaultType=this._revertDefaultTypeId),t&&(this._removeType=t),zt(`remove a type:${JSON.stringify(this._removeType)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new on(this._editor,this._definitionContainer,this._removeType)}}class on extends qt{constructor(e,t,n){super(),this._editor=e,this._definitionContainer=t,this._newType=n}execute(){this._newType.default&&(this._revertDefaultTypeId=this._definitionContainer.defaultType),this._definitionContainer.addDefinedType(this._newType),zt(`create a new type:${JSON.stringify(this._newType)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new nn(this._editor,this._definitionContainer,this._newType,this._revertDefaultTypeId)}}function rn(e,t,n,i,o){return e.has(t)?new tn(n,i,e,t,o,null):new on(n,e,{id:t,...Object.fromEntries(o)})}class sn extends Kt{constructor(e,t,n,i,o,r,s){super();const a=[];i&&a.push(rn(r,o,e,t,new Map([["label",i]])));const l=new en(e,t,n,r.annotationType,o,s);l.isEmpty||a.push(l),this._subCommands=a,this._logMessage=`change ${r.annotationType} value:"${o}"${i?`, label:"${i}"`:""}${s.length>0?`, attributes:${JSON.stringify(s)}`:""}`}}class an extends Kt{constructor(e,t,n,i,o,r){super();const s=[rn(n,o,e,t,r)];let a=[];r.has("id")&&(a=function(e,t,n,i,o){return e[t].all.filter((e=>e.typeName===n)).map((n=>new Zt(i,e,t,n.id,o)))}(t,i,o,e,r.get("id"))),this._subCommands=s.concat(a),this._logMessage=`set ${[...r.entries()].map((([e,t])=>`${e}:${t}`))} to type definition ${o}`}}class ln extends Kt{constructor(e,t,n,i,o){super();const r=n[i].all.filter((e=>!e.typeValues.isSameType(o)));this._subCommands=r.map((n=>new Zt(e,t,i,n.id,o))),this._logMessage=`set type ${o} to ${i} items ${r}`}}class cn extends qt{constructor(e,t,n,i,o){super(),this._definitionContainer=e,this._attrDef=t,this._targetIndex=n,this._newValue=i,this._indexThatRemoveDefaultFrom=o}execute(){if("selection"===this._attrDef["value type"]&&(!this._attrDef.values[this._targetIndex].default&&this._newValue.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=this._attrDef.values.findIndex((e=>e.default))),delete this._attrDef.values[this._indexThatRemoveDefaultFrom].default),this._attrDef.values[this._targetIndex].default&&!this._newValue.default))if(1===this._attrDef.values.length)this._newValue.default=!0;else if(this._indexThatRemoveDefaultFrom)this._attrDef.values[this._indexThatRemoveDefaultFrom].default=!0;else{let e=null;this._attrDef.values.forEach(((t,n)=>{null===e&&n!=this._targetIndex&&(e=n)})),this._attrDef.values[e].default=!0,this._indexThatRemoveDefaultFrom=e}this._valueBeforeChange=this._attrDef.values.splice(this._targetIndex,1,this._newValue)[0],this._definitionContainer.update(this._attrDef.pred,this._attrDef),zt(`change value of attrribute:${this._attrDef.pred}, oldValue: ${JSON.stringify(this._valueBeforeChange)}, newValue: ${JSON.stringify(this._newValue)}`)}revert(){return new cn(this._definitionContainer,this._attrDef,this._targetIndex,this._valueBeforeChange,this._indexThatRemoveDefaultFrom)}}class un extends Kt{constructor(e,t,n,i,o,r,s){if(super(),this._subCommands=[new cn(n,i,o,r,s)],"selection"===i["value type"]&&i.values[o].id!==r.id){const n=t.attribute.getSameAttributes(i.pred,i.values[o].id),s=n.map((e=>new Yt(t,e,null,r.id)));this._subCommands=this._subCommands.concat(s),this._afterInvoke=()=>e.eventEmitter.emit("textae-event.commander.attributes.change",n)}this._logMessage="change attribute definition."}}class dn extends qt{constructor(e,t){super(),this._definitionContainer=e,this._removeAttrdef=t,this._index=e.getIndexOf(t.pred)}execute(){this._definitionContainer.delete(this._removeAttrdef.pred),zt(`remove an attrribute definition:${JSON.stringify(this._removeAttrdef)}, index:${this._index}`)}revert(){return new hn(this._definitionContainer,this._removeAttrdef,this._index)}}class hn extends qt{constructor(e,t,n){super(),this._definitionContainer=e,this._newAttrDef=t,this._index=n}execute(){"selection"!==this._newAttrDef.valueType||this._newAttrDef.values||(this._newAttrDef.values=[{id:"default",default:!0}]),this._definitionContainer.create(this._newAttrDef.valueType,this._newAttrDef,this._index),zt(`create a new attrribute definition:${JSON.stringify(this._newAttrDef)}, index: ${this._index}`)}revert(){return new dn(this._definitionContainer,this._newAttrDef)}}function pn(e,t,n,i,o){return n.filter((e=>!e.typeValues.hasSpecificPredicateAttribute(i))).map((({id:n})=>new Wt(e,t,"attribute",{id:null,subj:n,pred:i,obj:o})))}class fn extends Kt{constructor(e,t,n,i,o){super(),this._subCommands=pn(e,t,n,i.pred,o||i.default),this._logMessage=`create attirbute ${i.pred}:${i.default} to item ${n.map((({id:e})=>e)).join(", ")}`}}class mn extends Wt{constructor(e,t,n,i){super(e,t,"attribute",{obj:n,pred:i})}execute(){const e=this._annotationData.entity.all.pop().id;return this._newModel.subj=e,super.execute()}}class gn extends Kt{constructor(e,t,n,i,o,r){super(),this._subCommands=[new Wt(e,t,"entity",{span:i,typeName:o},n)].concat(r.map((({obj:n,pred:i})=>new mn(e,t,n,i)))),this._logMessage=`create a type for span: ${i}`}}class vn extends Kt{constructor(e,t,n,i,o,r){super();const s=L(e,i,o),a=new Wt(e,t,"span",{begin:i,end:o,isBlock:!0},n),l=new gn(e,t,n,s,r,[]);this._subCommands=[a,l],this._logMessage=`create a span ${s}`}}class _n extends Kt{constructor(e,t,n,i){super();const o=n.span.all.filter((e=>e.isDenotation)).map((e=>e.id));this._subCommands=o.map((o=>new Wt(e,t,"entity",{span:o,typeName:i},n))),this._logMessage=`create a ${i} type entity to ${o}`}}class yn extends Kt{constructor(e,t,n,i,o,r,s){super(),this._subCommands=[new Wt(e,t,"span",{begin:o,end:r},n)].concat(s.map((o=>new gn(e,t,n,i,o.typeName,o.attributes)))),this._logMessage=`create a span ${i}`}}class bn extends Kt{constructor(e,t,n,i,o,r){super(),this._subCommands=t.getReplicationRanges(i,r).map((({begin:i,end:r})=>{const s=R(e,i,r);return new yn(e,t,n,s,i,r,o)})),this._logMessage=`replicate a span ${R(e,i.begin,i.end)}`}}class xn extends Kt{constructor(e,t,n,i,o,r,s){super();const a=[new me(o)],l=R(e,i.begin,i.end);this._subCommands=[new yn(e,t,n,l,i.begin,i.end,a)],this._logMessage=`create a span ${i.begin}:${i.end} with type ${a[0].typeName}`,r&&i.end-i.begin<=100&&(this._subCommands.push(new bn(e,t,n,{begin:i.begin,end:i.end},a,s)),this._logMessage=`${this._logMessage} and replicate auto`)}}class wn extends qt{constructor(e,t,n){super(),this._definitionContainer=e,this._oldIndex=t,this._newIndex=n}execute(){this._definitionContainer.move(this._oldIndex,this._newIndex),zt(`move the attrribute definition: from ${this._oldIndex} to ${this._newIndex}`)}revert(){return new wn(this._definitionContainer,this._newIndex,this._oldIndex)}}class kn extends Ht{constructor(e,t,n,i){super(),this._annotationData=e,this._spanId=t,this._begin=n,this._end=i}execute(){const{id:e,begin:t,end:n}=this._annotationData.span.moveBlockSpan(this._spanId,this._begin,this._end);this._newId=e,this._oldBegin=t,this._oldEnd=n,zt(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new kn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}class Sn extends Ht{constructor(e,t,n,i){super(),this._annotationData=e,this._spanId=t,this._begin=n,this._end=i}execute(){const{id:e,begin:t,end:n}=this._annotationData.span.moveDenotationSpan(this._spanId,this._begin,this._end);this._newId=e,this._oldBegin=t,this._oldEnd=n,zt(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new Sn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}function Cn(e,t){return e.entities.every((e=>t.includes(e)))}class En extends Kt{constructor(e,t){super(),this._subCommands=[];for(const[n,i]of t.entries())this._subCommands.push(new $n(e,n,i));this._logMessage=`revert: move entities ${Array.from(t.values()).flat().map((e=>e.id)).join(", ")}`}}class $n extends Ht{constructor(e,t,n){super(),this._annotationData=e,this._span=t,this._entities=n}execute(){this._moveMap=this._entities.reduce(((e,t)=>(e.has(t.span)?e.get(t.span).push(t):e.set(t.span,[t]),e)),new Map);const e=`move entities: ${Array.from(this._moveMap.entries()).map((([e,t])=>`${t.map((e=>e.id)).join(", ")} from ${t[0].span.id} to ${this._span.id}`)).join(", ")}`;this._annotationData.entity.moveEntities(this._span,this._entities),zt(e)}revert(){return new En(this._annotationData,this._moveMap)}}class Tn extends Kt{constructor(e,t,n,i){console.assert(n.span.single,"There must be one span to be pasted."),super();const o=[new $n(t,n.span.single,i)];for(const n of i.map((e=>e.span)).reduce(((e,t)=>(e.add(t),e)),new Set).values())Cn(n,i)&&o.push(new Ut(e,t,"span",n.id));this._subCommands=o,this._logMessage="paste cut entities"}}class An extends Kt{constructor(e,t,n,i){super();const o=n.span.all.map((e=>e.id));this._subCommands=o.map((o=>i.map((i=>new gn(e,t,n,o,i.typeName,i.attributes))))).flat(),this._logMessage=`paste types [${i.map((({typeName:e,attributes:t})=>[`{type:${e}}`].concat(t.map((({pred:e,obj:t})=>`{${e}:${t}}`)))))}] to ${o}`}}function Dn(e,t,n,i){return n.reduce(((e,{typeValues:t})=>e.concat(t.attributes)),[]).filter((e=>e.pred===i)).map((n=>new Ut(e,t,"attribute",n.id)))}class On extends Kt{constructor(e,t,n,i){super();const o=Dn(e,t,n,i.pred);this._subCommands=o,this._logMessage=`remove ${i.pred} attribute from items ${n.map((e=>e.id)).join(", ")}`}}class Pn extends Kt{constructor(e,t,n){super();const i=new Ut(e,t,"entity",n);const o=t.entity.get(n).relations.map((n=>new Ut(e,t,"relation",n.id))),r=t.entity.get(n).typeValues.attributes.map((n=>new Ut(e,t,"attribute",n.id)));this._subCommands=o.concat(r).concat(i),this._logMessage=`remove an entity ${n}`}}class Nn extends Kt{constructor(e,t,n){super();const i=t.span.get(n).entities.map((({id:n})=>new Pn(e,t,n))),o=new Ut(e,t,"span",n);this._subCommands=i.concat(o),this._logMessage=`remove a span ${n}`}}function jn(e,t){return e.filter((e=>e.span===t))}class Mn extends Kt{constructor(e,t,n){super();const i=n.entity.all,o=new Set(i.map((e=>e.span)));let r=[];for(const n of o.values())Cn(n,i)?r.push(new Nn(e,t,n.id)):r=r.concat(jn(i,n).map((n=>new Pn(e,t,n.id))));this._subCommands=r,this._logMessage=`remove entities ${i.map((e=>e.id))} from spans ${[...o.values()].map((e=>e.id))}`}}class In extends Kt{constructor(e,t,n){super();const i=n.span.all.map((e=>e.id)),o=n.relation.all.map((e=>e.id));this._subCommands=[].concat(o.map((n=>new Ut(e,t,"relation",n))),n.entity.some?[new Mn(e,t,n)]:[],i.map((n=>new Nn(e,t,n)))),this._logMessage=`remove selected ${i.concat(n.entity.all.map((e=>e.id))).concat(o)}`}}class Rn extends Kt{constructor(e,t,n,i){super(),this._subCommands=pn(e,t,n,i.pred,i.default);const o=Dn(e,t,n,i.pred);this._subCommands=this._subCommands.concat(o),this._logMessage=`toggle flag attirbute ${i.pred} to item ${n.map((({id:e})=>e)).join(", ")}`}}class Ln{constructor(e,t,n){this._editor=e,this._annotationData=t,this._selectionModel=n}addValueToAttributeDefinitionCommand(e,t){return new Gt(this._annotationData.typeDefinition.attribute,e,t)}changeAttributeDefinitionCommand(e,t){return new Xt(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t)}changeAttributesOfItemsWithSamePred(e,t,n,i){return new Qt(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t,n,i)}changeItemTypeCommand(e,t,n,i){return new sn(this._editor,this._annotationData,this._selectionModel,e,t,n,i)}changeTypeDefinitionCommand(e,t,n,i){return new an(this._editor,this._annotationData,e,t,n,i)}changeTypeOfSelectedItemsCommand(e,t){return new ln(this._editor,this._annotationData,this._selectionModel,e,t)}changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(e,t,n){return new un(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t,n)}createAttributeDefinitionCommand(e){return new hn(this._annotationData.typeDefinition.attribute,e)}createAttributeToItemsCommand(e,t,n=null){return new fn(this._editor,this._annotationData,e,t,n)}createBlockSpanCommand(e){return new vn(this._editor,this._annotationData,this._selectionModel,e.begin,e.end,this._annotationData.typeDefinition.block.defaultType)}createDefaultTypeEntityToSelectedSpansCommand(e){return new _n(this._editor,this._annotationData,this._selectionModel,e)}createRelationCommand(e){return new Wt(this._editor,this._annotationData,"relation",e,this._selectionModel)}createSpanAndAutoReplicateCommand(e,t,n){return new xn(this._editor,this._annotationData,this._selectionModel,e,this._annotationData.typeDefinition.denotation.defaultType,t,n)}createTypeDefinitionCommand(e,t){return new on(this._editor,e,t)}deleteAttributeDefinitionCommand(e){return new dn(this._annotationData.typeDefinition.attribute,e)}moveAttributeDefintionComannd(e,t){return new wn(this._annotationData.typeDefinition.attribute,e,t)}moveBlockSpanCommand(e,t,n){return new kn(this._annotationData,e,t,n)}moveDenotationSpanCommand(e,t,n){return new Sn(this._annotationData,e,t,n)}moveEntitiesToSelectedSpansCommand(e){return new Tn(this._editor,this._annotationData,this._selectionModel,e)}pasteTypesToSelectedSpansCommand(e){return new An(this._editor,this._annotationData,this._selectionModel,e)}replicateSpanCommand(e,t,n){return new bn(this._editor,this._annotationData,this._selectionModel,e,t,n)}removeAttributesFromItemsByPredCommand(e,t){return new On(this._editor,this._annotationData,e,t)}removeSpanCommand(e){return new Nn(this._editor,this._annotationData,e)}removeSelectedComand(){return new In(this._editor,this._annotationData,this._selectionModel)}removeTypeDefinitionCommand(e,t){return new nn(this._editor,e,t)}removeValueFromAttributeDefinitionCommand(e,t){return new Vt(this._annotationData.typeDefinition.attribute,e,t)}toggleFlagAttributeToItemsCommand(e,t){return new Rn(this._editor,this._annotationData,e,t)}}class Fn{constructor(e,t,n,i){this._editor=e,this._annotationData=t,this._selectionModel=n,this._history=i}invoke(e){e.isEmpty||(e.execute(),this._history.push(e))}undo(){if(this._history.hasAnythingToUndo){this._selectionModel.removeAll(),this._editor.focus();const e=this._history.prev();e.kind.has("configuration_command")&&Rt().success("configuration has been undone"),e.revert().execute()}}redo(){if(this._history.hasAnythingToRedo){this._selectionModel.removeAll();const e=this._history.next();e.kind.has("configuration_command")&&Rt().success("configuration has been redo"),e.execute()}}get factory(){return new Ln(this._editor,this._annotationData,this._selectionModel,this._annotationData.typeDefinition)}}var zn=n(9438),Bn=n.n(zn);class Hn{constructor(e,t,n){this._editor=e,this._annotationData=t,this._renderer=n}async update(){this._editor.eventEmitter.emit("textae-event.annotation-position.position-update.start"),this._annotationData.span.arrangeDenotationEntityPosition(),this._annotationData.span.arrangeBackgroundOfBlockSpanPosition(),this._annotationData.span.arrangeBlockEntityPosition(),this._renderer.arrangeRelationPositionAll(),this._editor.eventEmitter.emit("textae-event.annotation-position.position-update.end")}}const Wn="ui-to-be-cut";class Un{constructor(e){this._annotationData=e}render(e){if(e.element)return;const t=e.span.gridElement||e.span.renderGridElement(),n=e.renderElement();t.insertAdjacentElement("beforeend",n),e.reflectEntityGapInTheHeight()}remove(e){0===e.span.entities.length?e.span.destroyGridElement():e.destroyElement()}updateEntityHtmlelement(e){for(const t of this._annotationData.entity.all)(t.typeName===e||e.lastIndexOf("*")===e.length-1&&t.typeName.indexOf(0===e.slice(0,-1)))&&t.updateElement()}updateAttribute(e){for(const t of this._annotationData.entity.all.filter((t=>t.typeValues.hasSpecificPredicateAttribute(e))))t.updateElement()}updateEntityHtmlelementAll(){for(const e of this._annotationData.entity.all)e.updateElement()}}class qn{constructor(e,t){this._editor=e,this._entityRenderer=t}render(e){e.traverse((e=>{null!==e.element&&e.destroyElement()})),e.traverse((e=>e.renderElement()),(e=>{for(const t of e.entities)this._entityRenderer.render(t)}))}remove(e){if(e.hasStyle){const t=e.element;t.removeAttribute("tabindex"),t.classList.remove("textae-editor__span")}else e.destroyElement()}}class Vn{constructor(e,t){this._annotationData=t;const n=new Un(t);!function(e,t,n){const i=new qn(t,n);t.eventEmitter.on("textae-event.annotation-data.all.change",(()=>{q(t).innerHTML="";for(const t of e.span.topLevel)i.render(t);for(const t of e.relation.all)t.renderElement()})).on("textae-event.annotation-data.span.add",(e=>i.render(e))).on("textae-event.annotation-data.span.remove",(e=>{i.remove(e),e.destroyGridElement()})).on("textae-event.annotation-data.entity.add",(e=>{n.render(e)})).on("textae-event.annotation-data.entity.remove",(e=>{n.remove(e)})).on("textae-event.annotation-data.entity.move",(e=>{for(const t of e)n.remove(t),n.render(t)})).on("textae-event.commander.attributes.change",(e=>{for(const t of e.reduce(((e,t)=>e.add(t.subjectModel)),new Set))t.updateElement()}))}(t,e,n),e.eventEmitter.on("textae-event.type-definition.entity.change",(e=>n.updateEntityHtmlelement(e))).on("textae-event.type-definition.attribute.change",(e=>n.updateAttribute(e))).on("textae-event.type-definition.attribute.move",(e=>n.updateAttribute(e))).on("textae-event.type-definition.relation.change",(e=>{for(const t of this._annotationData.relation.all)(t.typeName===e||e.lastIndexOf("*")===e.length-1&&t.typeName.indexOf(0===e.slice(0,-1)))&&t.updateElement()})),this._editor=e,this._annotationData=t}arrangeRelationPositionAll(){for(const e of this._annotationData.relation.all)e.updateElement()}}var Gn=n(296),Kn=n.n(Gn);class Jn{constructor(e,t){this._textBox=t,this._enable=!1,e.eventEmitter.on("textae-event.control.button.push",(({buttonName:e,state:t})=>{"line-height-auto"===e&&(this._enable=t)}))}updateLineHeight(){this._enable&&this._textBox.updateLineHeight()}}function Yn(e){return e.closest(".textae-editor__signboard")}class Xn{constructor(e,t){const n=new Vn(e,t);this._annotationPosition=new Hn(e,t,n),this._annotationData=t,t.entityGap.bind((()=>this._applyEntityGap())),function(e){e.eventEmitter.on("textae-event.clip-board.change",((e,t)=>{for(const t of e)t.element&&t.element.classList.add(Wn);for(const e of t)e.element&&e.element.classList.remove(Wn)}))}(e),function(e,t,n){const i=new Jn(e,n),o=Kn()((()=>{i.updateLineHeight(),t.update()}),100);e.eventEmitter.on("textae-event.annotation-data.all.change",o).on("textae-event.annotation-data.entity.add",o).on("textae-event.annotation-data.entity.change",o).on("textae-event.annotation-data.entity.remove",o).on("textae-event.annotation-data.entity.move",o).on("textae-event.annotation-data.relation.add",o).on("textae-event.annotation-data.attribute.add",o).on("textae-event.annotation-data.attribute.change",o).on("textae-event.annotation-data.attribute.remove",o).on("textae-event.annotation-data.span.move",(()=>{t.update()}))}(e,this._annotationPosition,this._annotationData.textBox),function(e,t){e.eventEmitter.on("textae-event.annotation-position.position-update.start",(()=>t.startWait())).on("textae-event.annotation-position.position-update.end",(()=>t.endWait()))}(e,new S(e));const i=e[0];Bn()(i,".textae-editor__signboard__type-values","mouseover",(e=>{const n=Yn(e.target);if("denotation"===n.dataset.entityType||"block"===n.dataset.entityType){const e=n.title;t.entity.get(e).pointUpRelations()}})),Bn()(i,".textae-editor__signboard__type-values","mouseout",(e=>{const n=Yn(e.target);if("denotation"===n.dataset.entityType||"block"===n.dataset.entityType){const e=n.title;t.entity.get(e).pointDownRelations()}}))}updateDisplay(){this._annotationData.textBox.forceUpdate(),this._annotationPosition.update()}updateLineHeight(){this._annotationData.textBox.updateLineHeight(),this._annotationPosition.update()}_applyEntityGap(){for(const e of this._annotationData.entity.denotations)e.reflectEntityGapInTheHeight();this.updateLineHeight()}}const Qn="Init",Zn="View Term",ei="View Instance",ti="Term Centric",ni="Instance / Relation",ii="Block Centric",oi="Block / Relation",ri="Relation Edit";var si=n(4676),ai=n.n(si);function li(e){return!e.relation.some}function ci(e,t){switch(e.currentState){case ri:!function(e,t){li(t)?e.setState(ti):e.setState(ni)}(e,t);break;case ei:case oi:e.setState(ni);break;case Zn:case ii:e.setState(ti)}}function ui(e){return`enter:${e}`}class di{constructor(e){this._editor=e}setViewWithRelation(){this._setCssClassFor("view-with-relation")}setViewWithoutRelation(){this._setCssClassFor("view-without-relation")}setDenotationWithRelation(){this._setCssClassFor("denotation-with-relation")}setDenotationWithoutRelation(){this._setCssClassFor("denotation-without-relation")}setBlockWithRelation(){this._setCssClassFor("block-with-relation")}setBlockWithoutRelation(){this._setCssClassFor("block-without-relation")}setRelation(){this._setCssClassFor("relation")}_setCssClassFor(e){for(const e of this._editor.classList)e.startsWith("textae-editor__mode")&&this._editor.classList.remove(e);this._editor.classList.add(`textae-editor__mode--${e}`)}}class hi{constructor(e,t,n,i,o,r){this._editor=e,this._editorCSSClassForMode=new di(e[0]),this._entityGap=t,this._noEdit=n,this._editEntity=i,this._editBlock=o,this._editRelation=r}toViewWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Zn),this._noEdit(),this._editorCSSClassForMode.setViewWithoutRelation()}toViewWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ei),this._noEdit(),this._editorCSSClassForMode.setViewWithRelation()}toEditDenotationWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ti),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithoutRelation()}toEditDenotationWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ni),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithRelation()}toEditBlockWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ii),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithoutRelation()}toEditBlockWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",oi),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithRelation()}toEditRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ri),this._noEdit(),this._editRelation(),this._editorCSSClassForMode.setRelation()}}class pi{constructor(e,t,n,i,o,r){const s=new(ai())({states:[Qn,ti,ni,ii,oi,ri,Zn,ei]});s.config(Qn,{to:{exclude:[ri]}}),s.config(ti,{from:{exclude:[ei]},to:{exclude:[Qn,ei]}}),s.config(ni,{from:{exclude:[Zn]},to:{exclude:[Qn,Zn]}}),s.config(ii,{from:{exclude:[ei]},to:{exclude:[Qn,ei]}}),s.config(oi,{from:{exclude:[Zn]},to:{exclude:[Qn,Zn]}}),s.config(ri,{from:{exclude:[Qn]},to:{exclude:[Qn,Zn]}}),s.config(Zn,{from:{exclude:[ni,ri]},to:{exclude:[Qn,ni]}}),s.config(ei,{from:{exclude:[ti]},to:{exclude:[Qn,ti]}});!function(e,t){e.on(ui(ti),(()=>t.toEditDenotationWithoutRelation())).on(ui(ni),(()=>t.toEditDenotationWithRelation())).on(ui(ii),(()=>t.toEditBlockWithoutRelation())).on(ui(oi),(()=>t.toEditBlockWithRelation())).on(ui(ri),(()=>t.toEditRelation())).on(ui(Zn),(()=>t.toViewWithoutRelation())).on(ui(ei),(()=>t.toViewWithRelation()))}(s,new hi(e,t,n,i,o,r)),this._m=s}get currentState(){return this._m.currentState}setState(e){this._m.setState(e)}pushView(){!function(e){switch(e.currentState){case ti:case ii:e.setState(Zn);break;case ni:case oi:case ri:e.setState(ei)}}(this)}pushTerm(e){ci(this,e)}pushBlock(e){!function(e,t){switch(e.currentState){case ti:e.setState(ii);break;case ni:e.setState(oi);break;case ri:li(t)?e.setState(ii):e.setState(oi);break;case ei:e.setState(oi);break;case Zn:e.setState(ii)}}(this,e)}toggleSimple(){!function(e){switch(e.currentState){case ti:e.setState(ni);break;case ii:e.setState(oi);break;case Zn:e.setState(ei);break;case ni:e.setState(ti);break;case oi:e.setState(ii);break;case ei:e.setState(Zn);break;default:throw new Error(`Invalid state: ${e.currentState}`)}}(this)}changeByShortcut(){!function(e){switch(e.currentState){case ei:e.setState(ni);break;case Zn:e.setState(ti);break;case ti:e.setState(ii);break;case ni:e.setState(oi);break;case ii:case oi:e.setState(ri);break;case ri:e.setState(ei)}}(this)}}class fi extends r{constructor(e,t,n,i){super(e,t,"OK",n),this._promise=new Promise((e=>{const t=()=>{const t=i();t&&e(t),super.close()};this._option.buttons[0].click=t,Bn()(super.el,".textae-editor__promise-daialog__observable-element","keyup",(e=>{13===e.keyCode&&t()}))}))}open(){return super.open(),this._promise}}function mi(e){const t=e.querySelector(".textae-editor__edit-type-dialog__type__value__value").value,n=e.querySelector(".textae-editor__edit-type-dialog__type__label__value").innerText,i=[];for(const t of e.querySelectorAll(".textae-editor__edit-type-dialog__attribute"))i.push({pred:t.querySelector(".textae-editor__edit-type-dialog__attribute__predicate__value").dataset.pred,obj:t.querySelector(".textae-editor__edit-type-dialog__attribute__value__value").innerText});return{typeName:t,label:n,attributes:i}}function gi(e,t,n,i){if(!e)return void i(t);const o=new XMLHttpRequest,r=new URL(e,location);r.searchParams.append("term",n),o.open("GET",r.href,!0),o.onload=()=>{if(o.status>=200&&o.status<400){const e=JSON.parse(o.response).filter((e=>!t.some((t=>e.id===t.id))));i(t.concat(e))}},o.send()}n(2993);function vi(){t().ui.autocomplete.prototype._renderItem=(e,{id:n,label:i})=>{const o=t()(De()`
      <li>
        <div>
          ${i} 
          <i class="fa fa-globe"></i>
          ${n}
        </div>
      </li>`);return e.append(o),o},t().ui.autocomplete.prototype._resizeMenu=()=>{}}function _i(e,n,i,o){t()(e).autocomplete({source:(e,t)=>{n&&(n.innerText=""),gi(i,o(e.term),e.term,t)},minLength:3,select:(t,{item:i})=>(e.value=i.id,n&&(n.innerText=i.label),!1)})}vi();var yi=n(8686),bi=n.n(yi);function xi(e,t,n,i){return`\n    <div style="overflow-y: auto; max-height: 25em; overflow-x: hidden;">\n      <table class="textae-editor__edit-type-dialog__table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Predicate</th>\n            <th>Value</th>\n            <th>Label</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          ${function(e,t){return`\n    <tr>\n      <td></td>\n      <td>\n        <span class="textae-editor__edit-type-dialog__type__predicate__value">type</span>\n      </td>\n      <td class="ui-front">\n        <input class="textae-editor__edit-type-dialog__type__value__value textae-editor__promise-daialog__observable-element" value="${e}">\n      </td>\n      <td>\n        <span class="textae-editor__edit-type-dialog__type__label__value">${bi()(t.getLabel(e))||""}</span>\n      </td>\n    </tr>\n  `}(e,n)}\n          ${t.map(((e,t,n)=>function(e,t,n,i){const{pred:o,obj:r}=e,s=n[t-1],a=s&&s.pred,l=i.getIndexOf(o),c=i.getLabel(o,r)||"",{valueType:u}=i.get(o);return`\n<tr class="textae-editor__edit-type-dialog__attribute">\n  ${o===a?"<td></td>":`<td>\n          ${l<9?`<span class="textae-editor__edit-type-dialog__shortcut-key" title="Shotcut key for this predicate">${l+1}</span>`:""}\n        </td>\n        `}\n  <td>\n    <span\n      class="textae-editor__edit-type-dialog__attribute__predicate__value ${o===a?"":`textae-editor__edit-type-dialog__attribute__predicate__value--${u}`}"\n      data-pred="${o}">\n      ${o===a?"":o}\n    </span>\n  </td>\n  <td>\n    <span class="textae-editor__edit-type-dialog__attribute__value__value">${r}</span>\n  </td>\n  <td>${c}</td>\n  <td>\n    <button\n      type="button"\n      class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__edit__value" data-pred="${o}"\n      data-index="${t}"\n      ${"flag"===u?'disabled="disabled"':""}>\n    </button>\n    <button\n      type="button" \n      class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__remove__value" \n      data-index="${t}">\n    </button>\n  </td>\n</tr>`}(e,t,n,i))).join("")}\n          </tbody>\n      </table>\n    </div>\n    <fieldset>\n      <legend>Available Predicates:</legend>\n      <div class="textae-editor__edit-type-dialog__add-attribute-buttons">\n      ${i.attributes.map((({pred:e,valueType:n})=>`<button\n              type="button" \n              class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__add textae-editor__edit-type-dialog__attribute__add--${n}"\n              data-pred="${e}"\n              ${t.some((t=>t.pred===e&&String(t.obj)===String(i.get(e).default)))?'disabled="disabled" title="There is an attribute with a default value."':""}> ${e}</button>`)).join(" ")}\n      </div>\n    </fieldset>\n  `}n(7285);const wi={};document.querySelector("html").addEventListener("mousemove",(e=>{wi.clientY=e.clientY,wi.pageY=e.pageY,wi.left=e.clientX}));class ki{constructor(e,n,i){this._editor=e,this._title=i,this._el=function(e){const t=`\n    <div \n      class="textae-editor__type-pallet textae-editor__type-pallet--${e}"\n      style="display: none;"\n      >\n    </div>`;return o().create(t)}(n),function(e,n){t()(e).draggable({containment:n,distance:10})}(this._el,e),Bn()(this._el,'[type="button"]',"click",(()=>e.focus())),Bn()(this._el,".textae-editor__type-pallet__read-button","click",(()=>e.eventEmitter.emit("textae-event.pallet.read-button.click"))),Bn()(this._el,".textae-editor__type-pallet__write-button","click",(()=>e.eventEmitter.emit("textae-event.pallet.write-button.click"))),Bn()(this._el,".textae-editor__type-pallet__close-button","click",(()=>this.hide()))}updateDisplay(){this.visibly&&this._updateDisplay()}get el(){return this._el}show(){this._el.style.display="block",this._updateDisplay(),this._moveInto()}_updateDisplay(){var e,t;this._el.innerHTML=`\n      <div class="textae-editor__type-pallet__container">\n        <div class="textae-editor__type-pallet__title-bar ui-widget-header ui-corner-all">\n          <span>${this._title}</span>\n          <button \n            type="button"\n            class="textae-editor__type-pallet__close-button ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close"\n            title="Close">\n            <span class="ui-button-icon ui-icon ui-icon-closethick"></span>\n            <span class="ui-button-icon-space"> </span>Close\n          </button>\n        </div>\n        <div class="textae-editor__type-pallet__content">${this._content}</div>\n      </div>\n    `,e=this._el,t=this._maxWidth,e.style.width="auto",t-2<=e.offsetWidth&&(e.style.width=t-4+"px"),function(e,t){t-14<=e.offsetHeight?e.style.height=t-14+"px":e.style.height=null}(this._el.querySelector(".textae-editor__type-pallet__container"),this._maxHeight)}_moveInto(){const{left:e,clientY:t,pageY:n}=wi;if(this._el.offsetWidth+e<=this._maxWidth?this._el.style.left=`${e}px`:this._el.style.left=this._editor[0].offsetLeft+this._maxWidth-this._el.offsetWidth-2+"px",this._el.offsetHeight+t<=this._maxHeight){const e=n-this._editor[0].offsetTop;this._el.style.top=`${e}px`}else{const e=n-this._editor[0].offsetTop-(this._el.offsetHeight+t-this._maxHeight);this._el.style.top=`${e}px`}}get _maxWidth(){return this._editor[0].offsetWidth}get _maxHeight(){return document.documentElement.clientHeight}hide(){this._el.style.display="none"}get visibly(){return"none"!==this._el.style.display}}class Si extends ki{constructor(e){super(e,"entity","Please select value"),this._veil=o().create('<div style="position: fixed; right: 0; top: 0; bottom:0; left: 0; background-color: rgba(0, 0, 10, 0.3);"></div>')}show(e,t){return this._editor[0].appendChild(this._veil),this._editor[0].appendChild(this.el),this._veil.style["z-index"]=t+1,this._el.style["z-index"]=t+1,this._attributeDefinition=e,super.show(),new Promise((e=>{Bn()(this._el,".textae-editor__type-pallet__selection-attribute-label","click",(t=>{this.hide(),e(t.target.dataset.id)}))}))}hide(){this._editor[0].removeChild(this._veil),this._editor[0].removeChild(this.el)}get _content(){return function(e){const{values:t}=e.attrDef;return`\n  <div>\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n        </tr>\n        ${t.map((({color:e="",id:t,default:n,label:i=""})=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="${t}">\n            ${t}\n            ${n?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${i}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n        </tr>\n        `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}({attrDef:this._attributeDefinition.JSON})}}class Ci extends fi{constructor(e,t){super("Please edit number",function(e){const{pred:t,min:n,max:i,step:o,value:r}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="${t}" \n      disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__promise-daialog__observable-element" \n      type="number" \n      min="${n}" \n      max="${i}" \n      step="${o}" \n      value="${r}">\n  </div>\n</div>`}({pred:t.pred,value:t.obj,min:e.min,max:e.max,step:e.step}),{},(()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value})))}}class Ei extends fi{constructor(e,t){super("Please edit string",function(e){const{pred:t,value:n}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="${t}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><span></span><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__edit-value-and-pred-dialog--value" \n      value="${n}">\n  </div>\n</div>`}({pred:e.pred,value:e.obj}),{height:250},(()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value,newLabel:super.el.querySelector("span").innerText}))),_i(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector("span"),t.autocompletionWs,(()=>[]))}}class $i extends fi{constructor(e,t,n,i,o){const{typeName:r,attributes:s}=o;super("Please edit type and attributes",xi(r,s,t,n),{minHeight:300,width:800},(()=>mi(super.el))),Bn()(super.el,".textae-editor__edit-type-dialog__attribute__edit__value","click",(i=>{const{pred:o}=i.target.dataset,r=n.get(o),s=parseInt(super.el.closest(".textae-editor__dialog").style["z-index"]),{typeName:a,attributes:l}=mi(super.el);switch(r.valueType){case"numeric":new Ci(r,l[i.target.dataset.index]).open().then((({newObj:e})=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;case"selection":new Si(e).show(r,s).then((e=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;case"string":new Ei(l[i.target.dataset.index],r).open().then((({newObj:e})=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;default:throw`${r.valueType} is unknown attribute.`}})),Bn()(super.el,".textae-editor__edit-type-dialog__attribute__remove__value","click",(e=>{const{index:i}=e.target.dataset,o=parseInt(i),{typeName:r,attributes:s}=mi(super.el);this._updateDisplay(r,s.filter(((e,t)=>t!==o)),n,t)})),Bn()(super.el,".textae-editor__edit-type-dialog__attribute__add","click",(e=>{const{pred:i}=e.target.dataset,o=n.get(i).default,{typeName:r,attributes:s}=mi(super.el);this._updateDisplay(r,s.concat({pred:i,obj:o,id:""}).sort(((e,t)=>n.attributeCompareFunction(e,t))),n,t)}));_i(super.el.querySelector(".textae-editor__edit-type-dialog__type__value__value"),super.el.querySelector(".textae-editor__edit-type-dialog__type__label__value"),i,(e=>t.findByLabel(e)))}_updateDisplay(e,t,n,i){const o=xi(e,t,i,n);super.el.closest(".ui-dialog-content").innerHTML=o}}function Ti(e){const{typeName:t}=e[e.length-1],n=[];for(const{typeValues:t}of e)for(const e of t.attributes)n.some((t=>t.equalsTo(e.pred,e.obj)))||n.push(e);return new me(t,n)}class Ai{constructor(e,t,n){this._annotationType=e,this._definitionContainer=t,this._commander=n}selectAll(e){this._selectionModel[this._annotationType].clear();for(const{id:t}of this._annotationData[this._annotationType].findByType(e))this._selectionModel[this._annotationType].add(t)}changeTypeOfSelectedElement(e){return this._commander.factory.changeTypeOfSelectedItemsCommand(this._annotationType,e)}addTypeDefinition(e){return console.assert(e.id,"id is necessary!"),this._commander.factory.createTypeDefinitionCommand(this._definitionContainer,e)}changeTypeDefinition(e,t){return this._commander.factory.changeTypeDefinitionCommand(this._definitionContainer,this._annotationType,e,t)}removeTypeDefinition(e,t){const n={id:e,label:t||""};if(void 0===e)throw new Error("You must set the type id to remove.");return this._commander.factory.removeTypeDefinitionCommand(this._definitionContainer,n)}relationClicked(){}_labelChanged({typeName:e,label:t,attributes:n=[]}){const i=this._commander.factory.changeItemTypeCommand(t,e,this._definitionContainer,n);e&&this._commander.invoke(i)}}class Di extends Ai{constructor(e,t,n,i,o,r){super("entity",t,n),this._editor=e,this._annotationData=i,this._selectionModel=o,this._attributeEditor=r}changeInstance(e){this._selectionModel.entity.some&&new $i(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,Ti(this._selectionModel.entity.all)).open().then((e=>this._labelChanged(e)))}manipulateAttribute(e,t){t?this._attributeEditor.deleteAt(e):this._attributeEditor.addOrEditAt(e)}}function Oi(){window.getSelection().removeAllRanges()}function Pi(e){return e.classList.contains("textae-editor__span")}function Ni(e){return e.classList.contains("textae-editor__text-box")}function ji(e){return e.classList.contains("textae-editor__style")}function Mi(e){return e.classList.contains("textae-editor__block")}class Ii{constructor(){this.selection=window.getSelection()}get isParentOfAnchorNodeTextBox(){return Ni(this.parentOfAnchorNode)}get isParentOfAnchorNodeDenotationSpan(){return Pi(this.parentOfAnchorNode)}get isParentOfAnchorNodeBlockSpan(){return Mi(this.parentOfAnchorNode)}get isParentOfAnchorNodeStyleSpan(){return ji(this.parentOfAnchorNode)}get isParentOfFocusNodeTextBox(){return Ni(this.parentOfFocusNode)}get isParentOfFocusNodeDenotationSpan(){return Pi(this.parentOfFocusNode)}get isParentOfFocusNodeBlockSpan(){return Mi(this.parentOfFocusNode)}get isParentOfFocusNodeStyleSpan(){return ji(this.parentOfFocusNode)}get isParentOfBothNodesSame(){return this.parentOfAnchorNode===this.parentOfFocusNode}get isParentsParentOfAnchorNodeAndFocusedNodeSame(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode.parentElement}get isAnchorNodeParentIsDescendantOfSelectedSpan(){return this.parentOfAnchorNode.closest(".ui-selected")}get isFocusOneDownUnderAnchor(){return this.parentOfAnchorNode===this.parentOfFocusNode.parentElement}get ancestorDenotationSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__span")}get ancestorDenotationSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__span")}get ancestorBlockSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__block")}get ancestorBlockSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__block")}get doesFitInOneBlockSpan(){return this.ancestorBlockSpanOfAnchorNode===this.ancestorBlockSpanOfFocusNode}get isAnchorOneDownUnderFocus(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode}get parentOfAnchorNode(){return this.selection.anchorNode.parentElement}get parentOfFocusNode(){return this.selection.focusNode.parentElement}}function Ri(e,t,n,i){t.length?e.selectSpanRange(t):n.ctrlKey||n.metaKey?e.span.toggle(i):e.selectSpan(i)}class Li{constructor(e,t,n,i,o){this._annotationData=t,this._selectionModel=n,this._spanEditor=o,this._editor=e,this._pallet=i}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(e){this._pallet.hide();"Range"===window.getSelection().type?(this._spanEditor.editFor(new Ii),e.stopPropagation()):this._selectionModel.removeAll()}denotationSpanClicked(e){2===e.button&&Oi();const t=window.getSelection();"Caret"!==t.type&&"None"!==t.type||this._selectSpan(e,e.target.id),"Range"===t.type&&this._spanEditor.editFor(new Ii)}blockSpanClicked(e){2===e.button&&Oi();const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&this._spanEditor.editFor(new Ii)}styleSpanClicked(e){2===e.button&&Oi();const t=window.getSelection();if("Caret"===t.type){const t=e.target.closest(".textae-editor__span");t?this._selectSpan(e,t.id):this._selectionModel.removeAll()}"Range"===t.type&&this._spanEditor.editFor(new Ii)}signboardClicked(){this._editor.focus()}typeValuesClicked(e){const t=Yn(e.target).title;this._annotationData.entity.get(t).isDenotation&&(e.ctrlKey||e.metaKey?this._selectionModel.entity.toggle(t):this._selectionModel.selectEntity(t))}_selectSpan(e,t){const n=this._selectionModel.span.singleId,i=e.shiftKey&&n?this._annotationData.span.rangeDenotationSpan(n,t):[];Ri(this._selectionModel,i,e,t)}}function Fi(e){let t=0;for(const n of e.parentElement.childNodes){if(n==e)break;"#text"===n.nodeName?t+=n.nodeValue.length:t+=n.textContent.length}return t}function zi(e,t){const n=t.parentElement;if(Ni(n))return 0;if(Pi(n)||Mi(n)||ji(n))return e.get(n.id).begin;throw new Error(`Can not get position of a node : ${t} ${t.data}`)}class Bi{constructor(e,t){this._spanModelContainer=e,this._selection=t.selection}get anchor(){return zi(this._spanModelContainer,this._selection.anchorNode)+Fi(this._selection.anchorNode)+this._selection.anchorOffset}get focus(){return zi(this._spanModelContainer,this._selection.focusNode)+Fi(this._selection.focusNode)+this._selection.focusOffset}}function Hi(e,t,n,i,o){for(;o(e(n,i));)i+=t;return i}const Wi=function(e,t){return e.charAt(t)},Ui=function(e,t,n){return Hi(Wi,1,e,t,n)},qi=function(e,t,n){return Hi(Wi,-1,e,t,n)};class Vi{backFromBegin(e,t,n){}forwardFromEnd(e,t,n){}forwardFromBegin(e,t,n){}backFromEnd(e,t,n){}}function Gi(e,t){return[e.charAt(t),e.charAt(t-1)]}function Ki(e,t){return[e.charAt(t),e.charAt(t+1)]}function Ji(e,t,n){return""!==n[0]&&!e(n[1])&&!t(n[1])||t(n[0])}class Yi extends Vi{backFromBegin(e,t,n){return function(e,t,n){return Hi(Gi,-1,e,t,(e=>e[1]&&!n(e[0])&&!n(e[1])))}(e,Ui(e,t,(e=>n.isBlankCharacter(e))),(e=>n.isDelimiter(e)))}forwardFromEnd(e,t,n){return function(e,t,n){return Hi(Ki,1,e,t,(e=>e[1]&&!n(e[0])&&!n(e[1])))}(e,qi(e,t,(e=>n.isBlankCharacter(e))),(e=>n.isDelimiter(e)))}forwardFromBegin(e,t,n){return function(e,t,n){return Hi(Gi,1,e,t,n)}(e,t,(e=>Ji((e=>n.isBlankCharacter(e)),(e=>n.isDelimiter(e)),e)))}backFromEnd(e,t,n){return function(e,t,n){return Hi(Ki,-1,e,t,n)}(e,t,(e=>Ji((e=>n.isBlankCharacter(e)),(e=>n.isDelimiter(e)),e)))}}class Xi extends Vi{backFromBegin(e,t,n){return Ui(e,t,(e=>n.isBlankCharacter(e)))}forwardFromEnd(e,t,n){return qi(e,t,(e=>n.isBlankCharacter(e)))}forwardFromBegin(e,t,n){return Ui(e,t,(e=>n.isBlankCharacter(e)))}backFromEnd(e,t,n){return qi(e,t,(e=>n.isBlankCharacter(e)))}}class Qi{constructor(e){this._positions=e}get begin(){return this._positions.anchor<this._positions.focus?this._positions.anchor:this._positions.focus}get end(){return this._positions.anchor<this._positions.focus?this._positions.focus:this._positions.anchor}}function Zi(e,t,n,i){const o=new Bi(e.span,n),r=new Qi(o);return{begin:t.backFromBegin(e.sourceDoc,r.begin,i),end:t.forwardFromEnd(e.sourceDoc,r.end-1,i)+1}}function eo(e){Oi(),setTimeout((()=>alert(e)),10)}function to(e,t,n,i,o,r,s){const{begin:a,end:l}=function(e,t,n,i,o){const{anchor:r,focus:s}=new Bi(e.span,n),a=e.span.get(o);return r<s?a.end===s?{begin:a.end,end:a.end}:{begin:t.forwardFromBegin(e.sourceDoc,s,i),end:a.end}:a.begin===s?{begin:a.begin,end:a.begin}:{begin:a.begin,end:t.backFromEnd(e.sourceDoc,s-1,i)+1}}(e,n,o,r,i);if(e.span.isBoundaryCrossingWithOtherSpans(a,l))return eo("A span cannot be shrinked to make a boundary crossing."),!1;const c=e.span.hasDenotationSpan(a,l);return a<l&&!c?(s(a,l),!1):(t.invoke(t.factory.removeSpanCommand(i)),!0)}function no(e,t,n,i,o,r,s,a,l){if(r){n.removeAll();const c=V(e,r);to(t,i,o,r,s,a,l)&&c&&n.selectSpan(c.id)}}function io(e,t){return t.isAnchorNodeParentIsDescendantOfSelectedSpan?e.span.singleId:t.isAnchorOneDownUnderFocus?t.selection.anchorNode.parentNode.id:null}function oo(e,t,n,i,o,r,s){e.removeAll();const{begin:a,end:l}=function(e,t,n,i,o){const r=new Bi(e.span,i);return function(e,t,n,i,o,r){const s=e.span.get(n);return i>o?{begin:t.backFromBegin(e.sourceDoc,o,r),end:s.end}:{begin:s.begin,end:t.forwardFromEnd(e.sourceDoc,o-1,r)+1}}(e,t,n,r.anchor,r.focus,o)}(t,n,i,o,r);t.span.isBoundaryCrossingWithOtherSpans(a,l)?eo("A span cannot be expanded to make a boundary crossing."):t.span.hasDenotationSpan(a,l)||s(a,l)}function ro(e,t,n){const i=new Bi(e.span,n),o=new Qi(i),r=e.sourceDoc.substring(o.begin,o.end);return t.removeBlankChractors(r).length>0}function so(e,t){return e.valueOf("boundary-detection")?e=>t.isDelimiter(e):()=>!0}class ao{constructor(e,t,n,i,o,r){this._editor=e,this._annotationData=t,this._selectionModel=n,this._commander=i,this._buttonController=o,this._spanConfig=r}editFor(e){if(e.isParentOfAnchorNodeTextBox){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInTextBoxFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInTextBoxFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInTextBoxFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInTextBoxFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeDenotationSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInDenotationSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInDenotationSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInDenotationSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInDenotationSpanFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeBlockSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInBlockSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInBlockSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInBlockSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInBlockSpanFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeStyleSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInStyleSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInStyleSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInStyleSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInStyleSpanFocusNodeInStyleSpan(e)}}_anchorNodeInTextBoxFocusNodeInTextBox(e){this._create(e)}_anchorNodeInTextBoxFocusNodeInDenotationSpan(e){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e)}_anchorNodeInTextBoxFocusNodeInBlockSpan(){Oi()}_anchorNodeInTextBoxFocusNodeInStyleSpan(e){if(e.ancestorDenotationSpanOfFocusNode){const t=e.ancestorDenotationSpanOfFocusNode.id;this._shrink(e,t)}else this._create(e)}_anchorNodeInDenotationSpanFocusNodeInTextBox(e){const t=io(this._selectionModel,e);this._expand(e,t)}_anchorNodeInDenotationSpanFocusNodeInDenotationSpan(e){if(e.isParentOfBothNodesSame){const t=this._annotationData.span.get(e.parentOfAnchorNode.id),n=new Bi(this._annotationData.span,e);n.anchor===t.begin||n.anchor===t.end?this._isFocusInSelectedSpan(e)?this._shrinkSelectedSpan(e):this._shrink(e,t.id):this._create(e)}else if(e.parentOfFocusNode.closest(`#${e.parentOfAnchorNode.id}`))this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e);else if(e.parentOfAnchorNode.closest(`#${e.parentOfFocusNode.id}`))if(this._isFocusInSelectedSpan(e))this._shrinkSelectedSpan(e);else{const t=io(this._selectionModel,e);this._expand(e,t)}else if(e.isParentsParentOfAnchorNodeAndFocusedNodeSame){const t=e.parentOfAnchorNode.id;this._expand(e,t)}else Oi()}_anchorNodeInDenotationSpanFocusNodeInBlockSpan(e){const t=io(this._selectionModel,e);this._expand(e,t)}_anchorNodeInDenotationSpanFocusNodeInStyleSpan(e){if(e.isParentsParentOfAnchorNodeAndFocusedNodeSame){const t=e.parentOfAnchorNode.id;this._expand(e,t)}else if(e.ancestorDenotationSpanOfFocusNode){const t=e.ancestorDenotationSpanOfFocusNode.id;this._shrink(e,t)}else;}_anchorNodeInBlockSpanFocusNodeInTextBox(){Oi()}_anchorNodeInBlockSpanFocusNodeInDenotationSpan(e){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e)}_anchorNodeInBlockSpanFocusNodeInBlockSpan(e){this._create(e)}_anchorNodeInBlockSpanFocusNodeInStyleSpan(){Oi()}_anchorNodeInStyleSpanFocusNodeInTextBox(e){if(e.ancestorDenotationSpanOfAnchorNode){const t=e.ancestorDenotationSpanOfAnchorNode.id;this._expand(e,t)}else this._create(e)}_anchorNodeInStyleSpanFocusNodeInDenotationSpan(e){if(this._isFocusInSelectedSpan(e))this._shrinkSelectedSpan(e);else if(e.ancestorDenotationSpanOfAnchorNode&&e.ancestorDenotationSpanOfAnchorNode.parentElement===e.parentOfFocusNode){const t=e.ancestorDenotationSpanOfAnchorNode.id;this._expand(e,t)}else if(e.isFocusOneDownUnderAnchor)this._shrink(e,e.parentOfFocusNode.id);else{if(e.isAnchorOneDownUnderFocus){const{anchor:t}=new Bi(this._annotationData.span,e),n=this._annotationData.span.get(e.parentOfFocusNode.id);if(t===n.begin||t===n.end)return void this._shrink(e,e.parentOfFocusNode.id)}Oi()}}_anchorNodeInStyleSpanFocusNodeInBlockSpan(){Oi()}_anchorNodeInStyleSpanFocusNodeInStyleSpan(e){(e.isParentOfBothNodesSame||e.isParentsParentOfAnchorNodeAndFocusedNodeSame)&&this._create(e),Oi()}_isFocusInSelectedSpan(e){const t=this._selectionModel.span.single;if(!t)return!1;const n=new Bi(this._annotationData.span,e).focus;return t.begin<n&&n<t.end}_create(e){ro(this._annotationData,this._spanConfig,e)&&(this._selectionModel.removeAll(),function(e,t,n,i,o,r,s){const{begin:a,end:l}=Zi(e,n,o,r);if(e.span.isBoundaryCrossingWithOtherSpans(a,l))return;if(e.span.hasDenotationSpan(a,l))return;const c=function(e,t,n,i){return e.factory.createSpanAndAutoReplicateCommand({begin:t.begin,end:t.end},n,i)}(t,{begin:a,end:l},i,s);t.invoke(c)}(this._annotationData,this._commander,this._spanAdjuster,this._isReplicateAuto,e,this._spanConfig,so(this._buttonController,this._spanConfig))),Oi()}_expand(e,t){t&&oo(this._selectionModel,this._annotationData,this._spanAdjuster,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(t,e,n))})),Oi()}_shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e){this._isFocusInSelectedSpan(e)?this._shrinkSelectedSpan(e):e.isFocusOneDownUnderAnchor&&this._shrink(e,e.parentOfFocusNode.id),Oi()}_shrinkSelectedSpan(e){this._shrink(e,this._selectionModel.span.singleId)}_shrink(e,t){no(this._editor,this._annotationData,this._selectionModel,this._commander,this._spanAdjuster,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(t,e,n))})),Oi()}get _isReplicateAuto(){return this._buttonController.valueOf("replicate-auto")}get _spanAdjuster(){return this._buttonController.valueOf("boundary-detection")?new Yi:new Xi}}function lo(e,t,{item:n}){return e.value=n.id,t.value=n.label,!1}vi();class co extends fi{constructor(e,n,i,o,r){super(e,function(e){const{id:t,label:n,color:i,isDefault:o}=e;return`\n<div class="textae-editor__edit-type-definition-dialog__container">\n  <div class="textae-editor__edit-type-definition-dialog__input-box ui-front">\n    <label>Id:</label><br>\n    <input\n      class="textae-editor__edit-type-definition-dialog--id textae-editor__promise-daialog__observable-element" \n      value=${t||""}>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__input-box ui-front">\n    <label>Label:<span></span></label><br>\n    <input value="${n}">\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__color-picker">\n    <label>Color:<input \n      class="textae-editor__edit-type-definition-dialog__color-picker__input" \n      type="color" \n      value="${i}">\n    </label>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__set-default">\n    <label>Default type:<input \n      class="textae-editor__edit-type-definition-dialog__set-default__input" \n      type="checkbox" ${o?'checked="checked" disabled="disabled"':""}>\n    </label>\n  </div>\n</div>`}(n),{},(()=>{const e=super.el.querySelectorAll("input");return r(e[0].value,e[1].value,e[2].value,e[3].checked)})),function(e,n,i){const o=e.querySelectorAll("input");t()(o[0]).autocomplete({source:(e,t)=>gi(n,i(e.term),e.term,t),minLength:3,select:(e,t)=>lo(o[0],o[1],t)}),t()(o[1]).autocomplete({source:(e,t)=>gi(n,i(e.term),e.term,t),minLength:3,select:(e,t)=>lo(o[0],o[1],t)})}(super.el,o,(e=>i.findByLabel(e)))}}class uo extends co{constructor(e,t){super("Please create a new type",{id:null,label:"",color:e.defaultColor,isDefault:!1},e,t,((e,t,n,i)=>{if(""===e)return;const o={id:e,color:n};return""!==t&&(o.label=t),i&&(o.default=i),{newType:o}}))}}class ho extends co{constructor(e,t,n,i,o){const r=e.getLabel(t)||"",s={id:t,label:r,color:n,isDefault:i};super("Please edit the type",s,e,o,((e,n,i,o)=>{const r=function(e,t){const n=new Map;return e.id!==t.id&&n.set("id",t.id),e.label!==t.label&&n.set("label",""===t.label?null:t.label),e.color!==t.color&&n.set("color",""===t.color?null:t.color),e.isDefault!==t.isDefault&&n.set("default",!!t.isDefault||null),n}(s,{id:e,label:n,color:i,isDefault:o});return{id:t,changedProperties:r}}))}}function po(e){return!e.classList.contains("textae-editor__type-pallet__table-button--disabled")}class fo{constructor(e,t,n,i,o,r,s,a){this._editor=e,this._bindMouseEvents=t,this._mouseEventHandler=n,this._handler=i,this._pallet=o,function(e,t,n,i,o){Bn()(e.el,".textae-editor__type-pallet__add-button","click",(()=>{new uo(o,i()).open().then((({newType:e})=>t.invoke(n.addTypeDefinition(e))))})),Bn()(e.el,".textae-editor__type-pallet__label","click",(e=>t.invoke(n.changeTypeOfSelectedElement(e.delegateTarget.dataset.id)))),Bn()(e.el,".textae-editor__type-pallet__select-all","click",(e=>{po(e.target)&&n.selectAll(e.delegateTarget.dataset.id)})),Bn()(e.el,".textae-editor__type-pallet__edit-type","click",(e=>{new ho(o,e.target.dataset.id,e.target.dataset.color.toLowerCase(),"true"===e.target.dataset.isDefault,i()).open().then((({id:e,changedProperties:i})=>{i.size&&t.invoke(n.changeTypeDefinition(e,i))}))})),Bn()(e.el,".textae-editor__type-pallet__remove","click",(e=>{po(e.target)&&t.invoke(n.removeTypeDefinition(e.delegateTarget.dataset.id,e.delegateTarget.dataset.label))}))}(o,r,i,s,a),e.eventEmitter.on("textae-event.editor.unselect",(()=>o.hide())).on("textae-event.history.change",(()=>o.updateDisplay())).on("textae-event.data-access-object.configuration.save",(()=>o.updateDisplay())).on("textae-event.type-definition.lock",(()=>o.updateDisplay())),e[0].appendChild(o.el)}init(){return this._bindMouseEvents(this._editor,this._mouseEventHandler)}get handler(){return this._handler}get pallet(){return this._pallet}}function mo(e,t){const n=[];let i=!1;return n.push(Bn()(e[0],".textae-editor__text-box","click",(e=>{e.target.classList.contains("textae-editor__text-box")&&!i&&t.textBoxClicked(e)}))),n.push(Bn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(Bn()(e[0],".textae-editor__signboard","mousedown",(()=>t.signboardClicked()))),n.push(Bn()(e[0],".textae-editor__signboard__type-values","click",(e=>t.typeValuesClicked(e)))),n.push(Bn()(e[0],".textae-editor__span","mouseup",(e=>{e.target.classList.contains("textae-editor__span")&&(t.denotationSpanClicked(e),i=!0,setTimeout((()=>i=!1),0))}))),n.push(Bn()(e[0],".textae-editor__block","mouseup",(e=>{e.target.classList.contains("textae-editor__block")&&t.blockSpanClicked(e)}))),n.push(Bn()(e[0],".textae-editor__style","mouseup",(e=>{e.target.classList.contains("textae-editor__style")&&t.styleSpanClicked(e)}))),n}function go(e,t,n,i){new Ci(t,n).open().then((({newObj:n})=>{const o=i.factory.changeAttributesOfItemsWithSamePred(e.all,t,n);i.invoke(o)}))}function vo(e,t,n,i){new Ei(t,i).open().then((({newObj:t,newLabel:o})=>{t?n.invoke(n.factory.changeAttributesOfItemsWithSamePred(e.all,i,t,o)):n.invoke(n.factory.removeAttributesFromItemsByPredCommand(e.all,i))}))}class _o{constructor(e,t,n,i,o){this._commander=e,this._annotationData=t,this._selectionModel=n,this._pallet=i,this._typeDefinition=o}addOrEditAt(e){this._pallet.hide();const t=this._typeDefinition.attribute.getAttributeAt(e);if(t)switch(t.valueType){case"flag":this._commander.invoke(this._commander.factory.toggleFlagAttributeToItemsCommand(this._selectionModel.entity.all,t));break;case"numeric":!function(e,t,n){const i=e.entity.findSelectedAttributeWithSamePredicate(t.pred);if(i)e.entity.onlySelectedWithJustOneAttributeOf(t.pred)?go(e.entity,t,i,n):Rt().warning("Some selected items has zero or multi this attribute.");else{const i=n.factory.createAttributeToItemsCommand(e.entity.all,t);n.invoke(i)}}(this._selectionModel,t,this._commander);break;case"selection":if(this._selectionModel.entity.findSelectedAttributeWithSamePredicate(t.pred))this._pallet.show(),this._pallet.showAttribute(t.pred);else{const e=this._commander.factory.createAttributeToItemsCommand(this._selectionModel.entity.all,t);this._commander.invoke(e)}break;case"string":!function(e,t,n){const i=e.entity.findSelectedAttributeWithSamePredicate(t.pred);if(i)e.entity.onlySelectedWithJustOneAttributeOf(t.pred)?vo(e.entity,i,n,t):Rt().warning("Some selected items has zero or multi this attribute.");else{const i=n.factory.createAttributeToItemsCommand(e.entity.all,t);n.invoke(i)}}(this._selectionModel,t,this._commander);break;default:throw`${t.valueType} is unknown attribute`}else Rt().warning(`Attribute No.${e} is not defined`)}deleteAt(e){const t=this._typeDefinition.attribute.getAttributeAt(e);if(this._selectionModel.entity.selectedWithAttributeOf(t.pred)){const e=this._commander.factory.removeAttributesFromItemsByPredCommand(this._selectionModel.entity.all,t);this._commander.invoke(e)}else Rt().warning("None of the selected items has this attribute.")}}var yo=n(5311);function bo(e,t){return e.querySelector(`${t} input`)&&e.querySelector(`${t} input`).value}function xo(e,t){const{pred:n,default:i,label:o,color:r,min:s,max:a,step:l,valueType:c}=t,u="flag"===c,d="numeric"===c;return`\n    <div class="${e}__row">\n      <div class="${e}__pred textae-editor__promise-daialog__observable-element">\n        <label>Predicate:</label><br>\n        <input value="${n||""}">\n      </div>\n      ${"numeric"===c||"string"===c?`${function(e,t){return`\n    <div class="${e}__default-value">\n      <label>Default:</label><br>\n      <input value="${t||""}">\n    </div>\n  `}(e,i)}`:""}\n    </div>\n    ${u?`${function(e,t,n){return`\n    <div class="${e}__row">\n      <div class="${e}__label">\n        <label>Label:</label><br>\n        <input type="text" value="${t||""}">\n      </div>\n    </div>\n    <div class="${e}__row">\n      <div class="${e}__color">\n        <label>Color:</label><br>\n        <input type="text" value="${n||""}">\n      </div>\n    </div>\n  `}(e,o,r)}`:""}\n    ${d?`${function(e,t,n,i){return`\n    <div class="${e}__row">\n      <div class="${e}__min">\n        <label>Min:</label><br>\n        <input type="text" value="${t||0}">\n      </div>\n      <div class="${e}__max">\n        <label>Max:</label><br>\n        <input type="text" value="${n||0}">\n      </div>\n      <div class="${e}__step">\n        <label>Step:</label><br>\n        <input type="text" value="${i||0}">\n      </div>\n    </div>\n  `}(e,s,a,l)}`:""}\n  `}function wo(e,t){const{valueType:n}=t;return`\n<div class="${e}__container">\n  <div class="${e}__row">\n    <label>Attribute type:</label>\n    <select class="${e}__value-type">\n      <option value="flag"${"flag"===n?" selected":""}>\n        flag\n        </option>\n      <option value="selection"${"selection"===n?" selected":""}>\n        selection\n      </option>\n      <option value="string"${"string"===n?" selected":""}>\n        string\n      </option>\n      <option value="numeric"${"numeric"===n?" selected":""}>\n        numeric\n      </option>\n    </select>\n  </div>\n  ${xo(e,t)}\n</div>`}const ko="textae-editor__create-attribute-definition-dialog";class So extends fi{constructor(){super("Please enter new attribute definition",wo(ko,{valueType:"flag"}),{},(()=>{const e=this._state;return"numeric"===e.valueType?{...e,default:parseFloat(e.default)||0,min:parseFloat(e.min)||0,max:parseFloat(e.max)||0,step:parseFloat(e.step)||0}:e})),Bn()(super.el,`.${ko}__value-type`,"change",(()=>{const e=wo(ko,this._state);super.el.closest(".ui-dialog-content").innerHTML=e}))}get _state(){const e=super.el.querySelector(`.${ko}__value-type`).value;return{pred:bo(super.el,`.${ko}__pred`),label:bo(super.el,`.${ko}__label`),color:bo(super.el,`.${ko}__color`),default:bo(super.el,`.${ko}__default-value`),min:bo(super.el,`.${ko}__min`),max:bo(super.el,`.${ko}__max`),step:bo(super.el,`.${ko}__step`),valueType:e}}}function Co(e,t){return!Number.isNaN(parseFloat(t))&&e!==parseFloat(t)}const Eo="textae-editor__edit-attribute-definition-dialog";class $o extends fi{constructor(e){super("Please enter new values",function(e,t){return`\n<div class="${e}__container">\n  ${xo(e,t)}\n</div>`}(Eo,e),{},(()=>{const t=bo(super.el,".textae-editor__edit-attribute-definition-dialog__pred"),n=bo(super.el,".textae-editor__edit-attribute-definition-dialog__default-value"),i=new Map;if(e.pred!==t&&i.set("pred",t),"flag"===e.valueType){const t=bo(super.el,".textae-editor__edit-attribute-definition-dialog__label"),n=bo(super.el,".textae-editor__edit-attribute-definition-dialog__color");e.label!==t&&i.set("label",t),e.color!==n&&i.set("color",n)}if("string"===e.valueType&&e.default!==n&&i.set("default",n),"numeric"===e.valueType){Co(e.default,n)&&i.set("default",parseFloat(n));const t=bo(super.el,".textae-editor__edit-attribute-definition-dialog__min"),o=bo(super.el,".textae-editor__edit-attribute-definition-dialog__max"),r=bo(super.el,".textae-editor__edit-attribute-definition-dialog__step");Co(e.min,t)&&i.set("min",parseFloat(t)),Co(e.max,o)&&i.set("max",parseFloat(o)),Co(e.step,r)&&i.set("step",parseFloat(r))}return i}))}}function To(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}class Ao extends fi{constructor(e,t={}){const n={label:t.label,color:t.color};switch(e){case"numeric":n.labelForRangeOrIdOrPattern="range",n.rangeOrIdOrPattern=t.range;break;case"selection":n.labelForRangeOrIdOrPattern="id",n.rangeOrIdOrPattern=t.id,n.showDefault=!0,n.default=t.default;break;case"string":n.labelForRangeOrIdOrPattern="pattern",n.rangeOrIdOrPattern=t.pattern;break;default:throw new Error(`${e} is Uknown Attribute`)}super("Please enter new values",function(e){const{labelForRangeOrIdOrPattern:t,rangeOrIdOrPattern:n,showDefault:i,default:o,label:r,color:s}=e;return`\n<div class="textae-editor__add-value-to-attribute-dialog__container">\n  <div class="textae-editor__add-value-to-attribute-dialog__row">\n    <div class="textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern textae-editor__promise-daialog__observable-element">\n      <label>${t}:</label><br>\n      <input value="${n||""}">\n    </div>\n    ${function(e,t){return e?`\n    <div class="textae-editor__add-value-to-attribute-dialog__default">\n      <label>default:</label><br>\n      <input type="checkbox" ${t?'checked="checked"':""}>\n    </div>\n    `:""}(i,o)}\n    <div class="textae-editor__add-value-to-attribute-dialog__label">\n      <label>label:</label><br>\n      <input value="${r||""}">\n    </div>\n    <div class="textae-editor__add-value-to-attribute-dialog__color">\n      <label>color:</label><br>\n      <input value="${s||""}">\n    </div>\n  </div>\n</div>`}(n),{},(()=>{const t=bo(super.el,".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern"),n=bo(super.el,".textae-editor__add-value-to-attribute-dialog__label"),i=bo(super.el,".textae-editor__add-value-to-attribute-dialog__color"),o={};switch(n&&(o.label=n),i&&(o.color=i),e){case"numeric":o.range=t;break;case"selection":o.id=t,super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__default input").checked&&(o.default=!0);break;case"string":o.pattern=t}return o})),"numeric"===e&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(e=>{const{value:t}=e.target;try{new kt(t),To(super.button,!0)}catch(e){To(super.button,!1)}})),"string"===e&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(e=>{const{value:t}=e.target;try{new RegExp(t),To(super.button,!0)}catch(e){To(super.button,!1)}})),super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__color").addEventListener("input",(e=>{const{value:t}=e.target;To(super.button,!t||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t))}))}}function Do(e,t,n,i){!function(e){Bn()(e,".textae-editor__type-pallet__attribute","dragstart",(e=>{e.dataTransfer.setData("application/x-textae-attribute-tab-old-index",e.target.dataset.index),function(e){e.target.closest(".textae-editor__type-pallet__content").classList.add("textae-editor__type-pallet__content--dragging")}(e)})),Bn()(e,".textae-editor__type-pallet__attribute","dragend",(e=>{!function(e){e.target.closest(".textae-editor__type-pallet__content").classList.remove("textae-editor__type-pallet__content--dragging")}(e)}))}(t),function(e,t){Bn()(e,".textae-editor__type-pallet__drop-target","dragover",(e=>{const t=e.target.closest(".textae-editor__type-pallet__content").querySelector(".textae-editor__type-pallet__attribute").offsetWidth;e.target.innerHTML=`<div style="width: ${t}px;"></div>`,e.preventDefault()})),Bn()(e,".textae-editor__type-pallet__drop-target","dragleave",(e=>{e.target.innerHTML=""})),Bn()(e,".textae-editor__type-pallet__drop-target","drop",(e=>{const n=parseInt(e.dataTransfer.getData("application/x-textae-attribute-tab-old-index")),i=parseInt(e.target.dataset.index);t.invoke(t.factory.moveAttributeDefintionComannd(n,n<i?i-1:i))}))}(t,n),Bn()(t,".textae-editor__type-pallet__attribute","click",(t=>{e.showAttribute(t.target.dataset.attribute)})),Bn()(t,".textae-editor__type-pallet__create-predicate","click",(()=>(new So).open().then((e=>{e.pred&&n.invoke(n.factory.createAttributeDefinitionCommand(e))})))),Bn()(t,".textae-editor__type-pallet__edit-predicate","click",(()=>new $o(e.attrDef).open().then((t=>{t.size&&""!==t.get("pred")&&n.invoke(n.factory.changeAttributeDefinitionCommand(e.attrDef,t))})))),Bn()(t,".textae-editor__type-pallet__delete-predicate","click",(()=>n.invoke(n.factory.deleteAttributeDefinitionCommand(e.attrDef)))),Bn()(t,".textae-editor__type-pallet__selection-attribute-label","click",(t=>{if(i.selectedWithAttributeOf(e.attrDef.pred))if(i.isDupulicatedPredAttrributeSelected(e.attrDef.pred))Rt().warning("An item among the selected has this attribute multiple times.");else{const o=n.factory.changeAttributesOfItemsWithSamePred(i.all,e.attrDef,t.target.dataset.id);n.invoke(o)}else{const o=n.factory.createAttributeToItemsCommand(i.all,e.attrDef,t.target.dataset.id);n.invoke(o)}})),Bn()(t,".textae-editor__type-pallet__add-attribute-value-button","click",(()=>new Ao(e.attrDef.valueType).open().then((t=>{(t.range||t.id||t.pattern)&&n.invoke(n.factory.addValueToAttributeDefinitionCommand(e.attrDef,t))})))),Bn()(t,".textae-editor__type-pallet__edit-value","click",(t=>{const i=e.attrDef.values[t.target.dataset.index];new Ao(e.attrDef.valueType,i).open().then((o=>{if(o.range||o.id||o.pattern){if(!(Object.keys(o).reduce(((e,t)=>e||o[t]!==i[t]),!1)||Object.keys(i).reduce(((e,t)=>e||o[t]!==i[t]),!1)))return;n.invoke(n.factory.changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(e.attrDef.JSON,t.target.dataset.index,o))}}))})),Bn()(t,".textae-editor__type-pallet__remove-value","click",(t=>n.invoke(n.factory.removeValueFromAttributeDefinitionCommand(e.attrDef,t.target.dataset.index)))),Bn()(t,".textae-editor__type-pallet__add-attribute","click",(()=>n.invoke(n.factory.createAttributeToItemsCommand(i.all,e.attrDef)))),Bn()(t,".textae-editor__type-pallet__edit-object","click",(()=>{const t=i.findSelectedAttributeWithSamePredicate(e.attrDef.pred);switch(e.attrDef.valueType){case"numeric":go(i,e.attrDef,t,n);break;case"string":vo(i,t,n,e.attrDef);break;default:throw new Error(`Invalid attribute valueType: ${e.attrDef.valueType}`)}})),Bn()(t,".textae-editor__type-pallet__remove-attribute","click",(()=>n.invoke(n.factory.removeAttributesFromItemsByPredCommand(i.all,e.attrDef))))}function Oo(e){const{isLock:t,selectionModelItems:n,selectedPred:i,attributes:o,hasDiff:r}=e,s=1===(a=n.size)?"1 item selected":a>1?`${a} items selected`:"";var a;const l=o.length<30,c=i===(o[o.length-1]&&o[o.length-1].pred);return`\n<div style="display: flex;">\n  <p class="textae-editor__type-pallet__information">\n    <span class="textae-editor__type-pallet__lock-icon" style="display: ${t?"inline-block":"none"};">locked</span>\n    <span class="textae-editor__type-pallet__selected-entity-label">${s}</span>\n  </p>\n  <p class="textae-editor__type-pallet__attribute ${i?"":"textae-editor__type-pallet__attribute--selected"}" data-attribute="">\n    Type\n  </p>\n  ${o.map(((e,t,n)=>function({pred:e},t,n,i){return`\n    ${e!==i&&t>1&&n[t-1].pred!==i?`<span class="textae-editor__type-pallet__drop-target" data-index="${t}"></span>`:""}\n    <p \n      class="textae-editor__type-pallet__attribute${e===i?" textae-editor__type-pallet__attribute--selected":""}"\n      data-attribute="${e}"\n      data-index="${t}"\n      ${e===i?'draggable="true"':""}>\n      ${t<9?`${t+1}:`:""}${e}\n    </p>\n  `}(e,t,n,i))).join("\n")}\n  ${t?"":`\n        ${c?"":'<span class="textae-editor__type-pallet__drop-target" data-index="-1"></span>'}\n        ${l?'\n            <p class="textae-editor__type-pallet__attribute textae-editor__type-pallet__create-predicate">\n              <span class="textae-editor__type-pallet__create-predicate__button" title="Add new attribute"></span>\n            </p>\n            ':""}`}\n  <div class="textae-editor__type-pallet__buttons">\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button ${r?"textae-editor__type-pallet__write-button--transit":""}" title="Upload"></span>\n  </div>\n</div>\n`}function Po(e){const{attrDef:t,selectionModelItems:n}=e,{pred:i}=t,{valueType:o}=t,r=n.size;return`\n  <div class="textae-editor__type-pallet__predicate-controller">\n    <div>\n      ${function(e){const{isLock:t,numberOfItemsUsingSelectedPred:n}=e;return t?'\n      <button \n        type="button"\n        class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__delete-predicate"\n        disabled="disabled">\n      </button>\n      <button\n        type="button"\n        class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__edit-predicate"\n        disabled="disabled">\n      </button>\n    ':`\n    ${n.size>0?`<button \n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__delete-predicate"\n            disabled="disabled"\n            title="It cannot be deleted, as this attribute is used for ${n.size} items.">\n          </button>`:'<button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__delete-predicate"\n            title="Delet this predicate.">\n          </button>'}\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n      title="Edit this predicate.">\n    </button>\n  `}(e)}\n      Attribute\n      <span\n        class="textae-editor__type-pallet__predicate__value-type textae-editor__type-pallet__predicate__value-type--${o}"\n        title="${o} type">\n      </span>\n      "${i}"\n      ${r>0?`\n            ${function(e){const{selectionModelItems:t,selectedPred:n}=e;return t.selectedWithoutAttributeOf(n)?'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__add-attribute"\n        >add to</button>\n      ':'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__add-attribute"\n        disabled="disabled"\n        title="All the selected items already have this attribute."\n        >add to</button>\n      '}(e)}\n            ${function(e){const{attrDef:t,selectionModelItems:n,selectedPred:i}=e,{valueType:o}=t,r=n.onlySelectedWithJustOneAttributeOf(i);return"string"===o||"numeric"===o?r?'\n        <button\n          type="button"\n          class="textae-editor__type-pallet__edit-object"\n          >edit object of\n        </button>\n        ':'\n        <button\n          type="button"\n          class="textae-editor__type-pallet__edit-object"\n          disabled="disabled"\n          title="Some selected items has zero or multi this attribute."\n          >edit object of\n        </button>\n      ':""}(e)}\n            ${function(e){const{selectionModelItems:t,selectedPred:n}=e;return t.selectedWithAttributeOf(n)?'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__remove-attribute"\n        >remove from</button>\n      ':'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__remove-attribute"\n        disabled="disabled"\n        title="None of the selected items has this attribute."\n        >remove from</button>\n      '}(e)}\n            the ${r} items selected\n            `:""}\n    </div>\n  </div>\n  `}function No(e,t,n){return e?"":`\n  <td class="textae-editor__type-pallet__table-attribute-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-value"\n      title="Edit this value." data-index="${t}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove-value${n?" textae-editor__type-pallet__table-button--disabled":""}"\n      title="${n?"To activate this button, remove all the annotations of this type.":"Remove this value."}"\n      ${n?' disabled="disabled"':""}\n      data-index="${t}">\n    </button>\n  </td>\n  `}function jo(e){return e?"":'\n              <th>\n                <span class="textae-editor__type-pallet__add-attribute-value-button" title="Add new value"></span>\n              </th>'}function Mo(e,t,n,i,o,r,s){const{attributes:a}=o;if(!n)return function(e){const{types:t,isLock:n}=e;return`\n  ${Oo(e)}\n  <table>\n    <tbody>\n      <tr>\n        <th>id</th>\n        <th>label</th>\n        <th title="Number of annotations.">#</th>\n        <th>\n          ${n?"":'<span class="textae-editor__type-pallet__add-button" title="Add new type"></span>'}\n        </th>\n      </tr>\n      ${t?t.map((({color:e="",id:t,uri:i,defaultType:o,label:r="",useNumber:s})=>`\n      <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n        <td class="textae-editor__type-pallet__label" data-id="${t}">\n          <span title=${t}>\n            ${t}\n          </span>\n          ${i?`<a href="${i}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>`:""}\n          ${o?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n        </td>\n        <td class="textae-editor__type-pallet__short-label">\n          ${bi()(r)}\n        </td>\n        <td class="textae-editor__type-pallet__use-number">\n          ${s||0}\n        </td>\n        <td class="textae-editor__type-pallet__table-buttons">\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all${s?"":" textae-editor__type-pallet__table-button--disabled"}"\n            title="Select all the cases of this type."\n            data-id="${t}"\n            data-use-number="${s}">\n          </button>\n          ${n?"":`\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n            title="Edit this type." data-id="${t}"\n            data-color="${e}"\n            data-is-default="${o}">\n          </button>\n          <button \n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove${s?" textae-editor__type-pallet__table-button--disabled":""}"\n            title="${s?"To activate this button, remove all the annotations of this type.":"Remove this type."}"\n            data-id="${t}"\n            data-label="${r}">\n          </button>\n          `}\n        </td>\n      </tr>`)).join("\n"):'\n      <tr class="textae-editor__type-pallet__row">\n        <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Entity definition.</td>\n      </tr>\n      '}\n    </tbody>\n  </table>\n  `}({isLock:s,attributes:a,hasDiff:t,types:e,selectionModelItems:i});const l=a.find((e=>e.pred===n)),c={isLock:s,attributes:a,hasDiff:t,attrDef:l,selectedPred:n,selectionModelItems:i,numberOfItemsUsingSelectedPred:new Set(r.filter((e=>e.pred===n)).map((e=>e.subj)))};switch(l.valueType){case"flag":return function(e){const{label:t,color:n}=e.attrDef;return`\n  ${Oo(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Po(e)}\n      label: "${t||""}"\n      color: "${n||""}"\n    </div>\n  </div>\n  `}(c);case"numeric":return function(e){const{min:t,max:n,step:i,default:o,values:r}=e.attrDef,{isLock:s}=e;return`\n  ${Oo(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Po(e)}\n      min: ${t}\n      max: ${n}\n      step: ${i}\n      default: ${o}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>range</th>\n          <th>label</th>\n          <th>color</th>\n          ${jo(s)}\n        </tr>\n        ${r.map((({color:e="",range:t,label:n="",indelible:i},o)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            ${t}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${n}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${No(s,o,i)}\n        </tr>\n      `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c);case"selection":return function(e,t){const{values:n}=e.attrDef,{isLock:i,selectedPred:o}=e;return`\n  ${Oo(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Po(e)}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n          ${jo(i)}\n        </tr>\n        ${n.map((({color:e="",id:n,default:r,label:s=""},a)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="${n}">\n            ${n}\n            ${r?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${s}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${No(i,a,t.isSelectionAttributeValueIndelible(o,n))}\n        </tr>\n        `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c,o);case"string":return function(e){const{default:t,values:n}=e.attrDef,{isLock:i}=e;return`\n  ${Oo(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Po(e)}\n      default: ${t}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>pattern</th>\n          <th>label</th>\n          <th>color</th>\n          ${jo(i)}\n        </tr>\n        ${n.map((({color:e=" ",pattern:t="",label:n="",indelible:o},r)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            ${t}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${n}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${No(i,r,o)}\n        </tr>`)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c);default:throw"attrDef.valueType is unknown attribute"}}function Io(e){for(const t of e.querySelectorAll(".textae-editor__type-pallet__attribute"))t.addEventListener("mousedown",(e=>{e.stopPropagation()}))}class Ro extends ki{constructor(e,t,n,i,o,r,s){super(e,"entity",s),this._eventEmitter=e.eventEmitter,this._originalData=t,this._annotationData=n,this._entityContainer=i,this._selectionModelItems=o,Do(this,this._el,r,o),e.eventEmitter.on("textae-event.type-definition.attribute.create",(e=>{this.showAttribute(e)})).on("textae-event.type-definition.attribute.change",(e=>{this.showAttribute(e)})).on("textae-event.type-definition.attribute.delete",(()=>{this.showAttribute(null)})).on("textae-event.type-definition.attribute.move",(()=>{this.updateDisplay()})),e.eventEmitter.on("textae-event.annotation-data.attribute.add",(()=>this.updateDisplay())).on("textae-event.annotation-data.attribute.remove",(()=>this.updateDisplay())),e.eventEmitter.on("textae-event.selection.entity.change",(()=>this.updateDisplay()))}updateDisplay(){super.updateDisplay(),Io(this._el)}show(){this._selectedPred=null,super.show(),Io(this._el)}showAttribute(e){this._selectedPred=e,this.updateDisplay()}selectLeftTab(){this._selectedPred&&(0===this._selectedIndex?this.showAttribute():this.showAttribute(this._attributes[this._selectedIndex-1].pred))}selectRightTab(){if(this._selectedPred){if(this._selectedIndex===this._attributes.length-1)return;this.showAttribute(this._attributes[this._selectedIndex+1].pred)}else this._attributes.length&&this.showAttribute(this._attributes[0].pred)}get _selectedIndex(){return this._attributes.findIndex((e=>e.pred===this._selectedPred))}get _content(){return Mo(this._entityContainer.pallet,(0,yo.diff)(this._originalData.configuration,{...this._originalData.configuration,...this._annotationData.typeDefinition.config}),this._selectedPred,this._selectionModelItems,this._annotationData.typeDefinition.attribute,this._annotationData.attribute.all,this._annotationData.typeDefinition.isLock)}get attrDef(){return this._annotationData.typeDefinition.attribute.get(this._selectedPred)}get _attributes(){return this._annotationData.typeDefinition.attribute.attributes}}class Lo extends fo{constructor(e,t,n,i,o,r,s,a){const l=new ao(e,t,n,i,o,r),c=new Ro(e,s,t,t.typeDefinition.denotation,n.entity,i,"Entity configuration"),u=new _o(i,t,n,c,t.typeDefinition),d=new Di(e,t.typeDefinition.denotation,i,t,n,u);super(e,mo,new Li(e,t,n,c,l),d,c,i,(()=>a||t.typeDefinition.autocompletionWs),t.typeDefinition.denotation)}}class Fo{constructor(e,t,n,i,o,r){this._editor=e,this._annotationData=t,this._spanConfig=n,this._commander=i,this._buttonController=o,this._selectionModel=r}editFor(e){if(e.isParentOfAnchorNodeTextBox){if(e.isParentOfFocusNodeTextBox)return void this._create(e);if(e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void(e.ancestorBlockSpanOfFocusNode?this._shrink(e):this._create(e));if(e.isParentOfFocusNodeBlockSpan)return void this._shrink(e)}if(e.isParentOfAnchorNodeDenotationSpan||e.isParentOfAnchorNodeStyleSpan){if(e.isParentOfFocusNodeTextBox||e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void(e.ancestorBlockSpanOfAnchorNode?e.doesFitInOneBlockSpan?this._shrink(e):this._expand(e):e.ancestorBlockSpanOfFocusNode?this._shrink(e):this._create(e));if(e.isParentOfFocusNodeBlockSpan)return void this._shrink(e)}if(e.isParentOfAnchorNodeBlockSpan){if(e.isParentOfFocusNodeTextBox||e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void this._expand(e);if(e.isParentOfFocusNodeBlockSpan){const{anchor:t}=new Bi(this._annotationData.span,e),n=this._annotationData.span.get(e.parentOfFocusNode.id);if(t===n.begin||t===n.end)return void this._shrink(e)}}Oi()}_create(e){if(ro(this._annotationData,this._spanConfig,e)){this._selectionModel.removeAll();const{begin:t,end:n}=Zi(this._annotationData,new Yi,e,this._spanConfig);if(this._annotationData.span.isBoundaryCrossingWithOtherSpans(t,n))return;if(this._annotationData.span.doesParentSpanExits(t,n))return;const i=this._commander.factory.createBlockSpanCommand({begin:t,end:n});this._commander.invoke(i)}Oi()}_expand(e){const t=e.ancestorBlockSpanOfAnchorNode.id;oo(this._selectionModel,this._annotationData,new Yi,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(t,e,n))})),Oi()}_shrink(e){const t=e.ancestorBlockSpanOfFocusNode.id;no(this._editor,this._annotationData,this._selectionModel,this._commander,new Yi,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(t,e,n))})),Oi()}}function zo(e,t){const n=[];return n.push(Bn()(e[0],".textae-editor__text-box","click",(e=>{e.target.classList.contains("textae-editor__text-box")&&t.textBoxClicked(e)}))),n.push(Bn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(Bn()(e[0],".textae-editor__signboard","mousedown",(()=>t.signboardClicked()))),n.push(Bn()(e[0],".textae-editor__signboard__type-values","click",(e=>t.typeValuesClicked(e)))),n.push(Bn()(e[0],".textae-editor__block","mouseup",(e=>{e.target.classList.contains("textae-editor__block")&&t.blockSpanClicked()}))),n.push(Bn()(e[0],".textae-editor__block-hit-area","mouseup",(e=>{e.target.classList.contains("textae-editor__block-hit-area")&&t.blockHitAreaClicked(e)}))),n.push(Bn()(e[0],".textae-editor__style","mouseup",(e=>{e.target.classList.contains("textae-editor__style")&&t.styleSpanClicked(e)}))),n.push(Bn()(e[0],".textae-editor__span","mouseup",(e=>{e.target.classList.contains("textae-editor__span")&&t.denotationSpanClicked(e)}))),n}class Bo{constructor(e,t,n,i,o){this._editor=e,this._annotationData=t,this._selectionModel=n,this._spanEditor=i,this._pallet=o}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(e){const t=window.getSelection();"Caret"===t.type&&(this._pallet.hide(),this._selectionModel.removeAll()),"Range"===t.type&&(this._spanEditor.editFor(new Ii),e.stopPropagation())}blockSpanClicked(){const e=window.getSelection();"Caret"===e.type&&(this._pallet.hide(),Oi(),this._selectionModel.removeAll()),"Range"===e.type&&this._spanEditor.editFor(new Ii)}blockHitAreaClicked(e){2===e.button&&Oi();const t=window.getSelection();if("Caret"===t.type||"None"===t.type){const t=e.target.dataset.id;this._selectSpanAndEntity(e,t)}}styleSpanClicked(e){const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&(this._spanEditor.editFor(new Ii),e.stopPropagation())}denotationSpanClicked(e){const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&(this._spanEditor.editFor(new Ii),e.stopPropagation())}signboardClicked(){this._editor.focus()}typeValuesClicked(e){const t=Yn(e.target).title;if(this._annotationData.entity.get(t).isBlock){e.ctrlKey||e.metaKey?this._selectionModel.entity.toggle(t):this._selectionModel.selectEntity(t);for(const{span:e}of this._selectionModel.entity.all)this._selectionModel.span.add(e.id)}}_selectSpanAndEntity(e,t){const n=this._selectionModel.span.singleId,i=e.shiftKey&&n?this._annotationData.span.rangeBlockSpan(n,t):[];Ri(this._selectionModel,i,e,t);for(const{entities:e}of this._selectionModel.span.all)this._selectionModel.entity.add(e[0].id)}}class Ho extends Ai{constructor(e,t,n,i,o,r){super("entity",t,n),this._editor=e,this._selectionModel=o,this._annotationData=i,this._attributeEditor=r}changeInstance(e){this._selectionModel.entity.some&&new $i(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,Ti(this._selectionModel.entity.all)).open().then((e=>this._labelChanged(e)))}manipulateAttribute(e,t){t?this._attributeEditor.deleteAt(e):this._attributeEditor.addOrEditAt(e)}}class Wo extends fo{constructor(e,t,n,i,o,r,s,a){const l=new Ro(e,s,t,t.typeDefinition.block,n.entity,o,"Entity configuration"),c=new _o(o,t,n,l,t.typeDefinition),u=new Ho(e,t.typeDefinition.block,o,t,n,c),d=new Fo(e,t,i,o,r,n);super(e,zo,new Bo(e,t,n,d,l),u,l,o,(()=>a||t.typeDefinition.autocompletionWs),t.typeDefinition.block)}}class Uo extends fi{constructor(e,t,n){super("Please enter new values",function(e){const{label:t,value:n}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="type" \n      disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Value:<span>${t||""}</span></label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__promise-daialog__observable-element" \n      value="${n}">\n  </div>\n</div>`}({value:e,label:t.getLabel(e)}),{height:250},(()=>{const e=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),t=super.el.querySelector("span");return{typeName:e.value,label:t.innerText}}));_i(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--label span"),n,(e=>t.findByLabel(e)))}}class qo extends Ai{constructor(e,t,n,i){super("relation",e,t),this._annotationData=n,this._selectionModel=i}changeInstance(e){if(this._selectionModel.relation.some){const t=this._getSelectedType();new Uo(t,this._definitionContainer,e).open().then((e=>this._labelChanged(e)))}}relationClicked(e,t){e.ctrlKey||e.metaKey?this._selectionModel.relation.add(t.id):this._selectionModel.selectRelation(t.id)}manipulateAttribute(){}_getSelectedType(){const e=this._selectionModel.relation.single;return e?e.typeName:""}}function Vo(e,t){const n=[];return n.push(Bn()(e[0],".textae-editor__text-box","click",(()=>t.textBoxClicked()))),n.push(Bn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(Bn()(e[0],".textae-editor__signboard","mousedown",(()=>t.signboardClicked()))),n.push(Bn()(e[0],".textae-editor__signboard__type-values","click",(e=>t.typeValuesClicked(e)))),n}class Go{constructor(e,t,n,i,o){this._editor=e,this._selectionModel=t,this._commander=n,this._typeDefinition=i,this._pallet=o}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(){this._pallet.hide(),this._selectionModel.removeAll()}signboardClicked(){this._editor.focus()}typeValuesClicked(e){!function(e,t,n,i){const o=Yn(i.target).title;if(e.entity.some){const r=e.entity.singleId,s=o;r===s?e.entity.toggle(r):(t.invoke(t.factory.createRelationCommand({subj:r,obj:s,pred:n.defaultType})),function(e,t,n,i){e.ctrlKey||e.metaKey?t.remove(i):e.shiftKey?(t.remove(n),t.add(i)):(t.remove(n),t.remove(i))}(i,e.entity,r,s))}else e.selectEntity(o)}(this._selectionModel,this._commander,this._typeDefinition.relation,e)}}class Ko extends ki{constructor(e,t,n){super(e,"relation","Relation configuration"),this._originalData=t,this._typeDefinition=n,this._definitionContainer=n.relation}get _content(){const e=(0,yo.diff)(this._originalData.configuration,{...this._originalData.configuration,...this._typeDefinition.config});return function(e){const{isLock:t,hasDiff:n,types:i}=e;return`\n<p class="textae-editor__type-pallet__title">\n  <span \n    class="textae-editor__type-pallet__lock-icon" \n    style="display: ${t?"inline-block":"none"};">\n    locked\n  </span>\n</p>\n<div class="textae-editor__type-pallet__buttons">\n  <span \n    class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" \n    title="Import"></span>\n  <span \n    class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button ${n?"textae-editor__type-pallet__write-button--transit":""}" \n    title="Upload"></span>\n</div>\n<table>\n  <tbody>\n    <tr>\n      <th>id</th>\n      <th>label</th>\n      <th title="Number of annotations.">#</th>\n      <th>\n        ${t?"":'\n        <span \n          class="textae-editor__type-pallet__add-button" \n          title="Add new type"></span>\n        '}\n      </th>\n    </tr>\n    ${i?`\n    ${i.map(function(e){return({color:t,id:n,uri:i,defaultType:o,label:r,useNumber:s})=>`\n<tr class="textae-editor__type-pallet__row" style="background-color: ${t};">\n  <td class="textae-editor__type-pallet__label" data-id="${n}">\n    <span title=${n}>\n      ${n}\n    </span>\n    ${i?`\n    <a \n      href="${i}" \n      target="_blank">\n      <span class="textae-editor__type-pallet__link"></span>\n    </a>\n    `:""}\n    ${o?'\n    <span \n      class="textae-editor__type-pallet__default-icon" \n      title="This type is set as a default type."></span>\n    ':""}\n  </td>\n  <td class="textae-editor__type-pallet__short-label">\n    ${r||""}\n  </td>\n  <td class="textae-editor__type-pallet__use-number">\n    ${s||"0"}\n  </td>\n  <td class="textae-editor__type-pallet__table-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all ${s?"":"textae-editor__type-pallet__table-button--disabled"}"\n      title="Select all the cases of this type."\n      data-id="${n}"\n      data-use-number="${s}">\n    </button>\n    ${e?"":`\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n      title="Edit this type." data-id="${n}"\n      data-color="${t}"\n      data-is-default="${o}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove ${s?"textae-editor__type-pallet__table-button--disabled":""}"\n      title="${s?"To activate this button, remove all the annotations of this type.":"Remove this type."}"\n      data-id="${n}"\n      data-label="${r}">\n    </button>\n    `}\n  </td>\n</tr>\n`}(t)).join("\n")}\n    `:'\n    <tr class="textae-editor__type-pallet__row">\n      <td \n        class="textae-editor__type-pallet__no-config" \n        colspan="4">\n        There is no Relation definition.\n      </td>\n    </tr>\n    '}\n  </tbody>\n</table>\n`}({isLock:this._typeDefinition.isLock,hasDiff:e,types:this._definitionContainer.pallet})}}class Jo extends fo{constructor(e,t,n,i,o,r){const s=new Ko(e,o,t.typeDefinition),a=new qo(t.typeDefinition.relation,i,t,n);super(e,Vo,new Go(e,n,i,t.typeDefinition,s),a,s,i,(()=>r||t.typeDefinition.autocompletionWs),t.typeDefinition.relation)}}class Yo{constructor(e,t){this._namespace=e,this._denititionContainer=t}relationClicked(e,t){const{href:n}=t;n&&window.open(n,"_blank")}changeInstance(){}manipulateAttribute(){}}class Xo{constructor(e,t,n,i,o,r,s,a){this._annotationData=t,this._editDenotation=new Lo(e,t,n,o,r,i,s,a),this._editBlock=new Wo(e,t,n,i,o,r,s,a),this._editRelation=new Jo(e,t,n,o,s,a),this._listeners=[],this._stateMachine=new pi(e,t.entityGap,(()=>{this.cancelSelect(),this._unbindAllMouseEventhandler()}),(()=>this._listeners=this._editDenotation.init()),(()=>this._listeners=this._editBlock.init()),(()=>this._listeners=this._editRelation.init())),this._autocompletionWsFromParams=a,this._selectionModel=n,e.eventEmitter.on("textae-event.editor.relation.click",((e,t)=>this._getHandler().relationClicked(e,t))),this._viewHandler=new Yo(t.namespace,t.typeDefinition.relation)}get isEditDenotation(){return this._stateMachine.currentState===ni||this._stateMachine.currentState===ti}toEditDenotationWithoutRelation(){this._stateMachine.setState(ti)}toEditDenotationWithRelation(){this._stateMachine.setState(ni)}toViewWithoutRelation(){this._stateMachine.setState(Zn)}toViewWithRelation(){this._stateMachine.setState(ei)}pushView(){this._stateMachine.pushView()}pushTerm(){this._stateMachine.pushTerm(this._annotationData)}pushBlock(){this._stateMachine.pushBlock(this._annotationData)}pushRelation(){this._stateMachine.setState(ri)}toggleSimple(){this._stateMachine.toggleSimple()}changeByShortcut(){this._stateMachine.changeByShortcut()}showPallet(){switch(this._stateMachine.currentState){case ti:case ni:this._editDenotation.pallet.show();break;case ii:case oi:this._editBlock.pallet.show();break;case ri:this._editRelation.pallet.show()}}changeLabel(){this._getHandler().changeInstance(this._autocompletionWsFromParams||this._annotationData.typeDefinition.autocompletionWs)}manipulateAttribute(e,t){this._getHandler().manipulateAttribute(e,t)}cancelSelect(){this._editDenotation.pallet.hide(),this._editBlock.pallet.hide(),this._editRelation.pallet.hide(),this._selectionModel.removeAll()}get isEntityAndAttributePalletShown(){return this._editDenotation.pallet.visibly||this._editBlock.pallet.visibly}selectLeftAttributeTab(){switch(this._stateMachine.currentState){case ti:case ni:this._editDenotation.pallet.selectLeftTab();break;case ii:case oi:this._editBlock.pallet.selectLeftTab()}}selectRightAttributeTab(){switch(this._stateMachine.currentState){case ti:case ni:this._editDenotation.pallet.selectRightTab();break;case ii:case oi:this._editBlock.pallet.selectRightTab()}}_getHandler(){switch(this._stateMachine.currentState){case ti:case ni:return this._editDenotation.handler;case ii:case oi:return this._editBlock.handler;case ri:return this._editRelation.handler;default:return this._viewHandler}}_unbindAllMouseEventhandler(){for(const e of this._listeners)e.destroy();this._listeners=[]}}function Qo(e,t,n){e.eventEmitter.on("textae-event.annotation-data.all.change",((e,i)=>{"edit"!==n?function(e,t){li(t)?e.toViewWithoutRelation():e.toViewWithRelation()}(t,e):(function(e){e&&Rt().success("track annotations have been merged to root annotations.")}(i),function(e,t){li(t)?e.toEditDenotationWithoutRelation():e.toEditDenotationWithRelation()}(t,e))}))}function Zo(e){return Kn()(e,300)}function er(e,t){Bn()(e,".line-height","change",Zo((e=>{t.lineHeight=e.target.value,function(){const e=new Event("resize");window.dispatchEvent(e)}()})))}function tr(e,t,n,i,o){!function(e,t,n){Bn()(e,".type-gap","change",Zo((i=>{t.value=Number(i.target.value),e.querySelector(".line-height").value=n.lineHeight})))}(e,n,o),er(e,o),function(e,t){Bn()(e,".lock-config","change",Zo((e=>{e.target.checked?t.lockEdit():t.unlockEdit()})))}(e,i),function(e,t){Bn()(e,".reset-hidden-message-boxes","click",(()=>t.eventEmitter.emit("textae-event.message-box.show")))}(e,t)}const nr="6.7.6";class ir extends r{constructor(e,t,n,i){super("Setting",function(e){const{typeGap:t,typeGapDisabled:n,lineHeight:i,typeDefinitionLocked:o,version:r}=e;return`\n<div class="textae-editor__setting-dialog">\n  <div>\n    <label class="textae-editor__setting-dialog__label">Type Gap</label>\n    <input \n      type="number" \n      class="textae-editor__setting-dialog__type-gap type-gap" \n      step="1" \n      min="0" \n      max="5" \n      value="${t}" ${n?'disabled="disabled"':""}>\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Line Height</label>\n    <input \n      type="number" class="textae-editor__setting-dialog__line-height line-height" \n      step="1" \n      min="50" \n      max="500" \n      value="${i}">px\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Lock Edit Config</label>\n    <input \n      type="checkbox" \n      class="textae-editor__setting-dialog__lock-config lock-config"\n      ${o?'checked="checked"':""}>\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Reset Hidden Message Boxes</label>\n    <input \n      type="button" \n      class="textae-editor__setting-dialog__reset-hidden-message-boxes reset-hidden-message-boxes" \n      value="Reset">\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Version</label>\n    ${r}\n  </div>\n</div>\n`}({typeGapDisabled:!n.show,typeGap:n.value,lineHeight:i.lineHeight,typeDefinitionLocked:t.isLock,version:nr}),"OK"),tr(super.el,e,n,t,i),Bn()(super.el,".textae-editor__dialog","keyup",(e=>{13===e.keyCode&&super.close()}))}}class or{constructor(e,t){this._editor=e,this._selectionModel=t}left(e){const t=this._searchLeft(".textae-editor__span");if(t)return void(e?this._selectionModel.span.add(t.id):this._selectionModel.selectSpan(t.id));const n=this._searchLeft(".textae-editor__grid .textae-editor__signboard");n&&(e?this._selectionModel.entity.add(n.title):this._selectionModel.selectEntity(n.title))}right(e){const t=this._searchRight(".textae-editor__span");if(t)return void(e?this._selectionModel.span.add(t.id):this._selectionModel.selectSpan(t.id));const n=this._searchRight(".textae-editor__grid .textae-editor__signboard");n&&(e?this._selectionModel.entity.add(n.title):this._selectionModel.selectEntity(n.title))}_searchLeft(e){const t=this._editor[0].querySelectorAll(e),n=[...t].findIndex((e=>e.classList.contains("ui-selected")));if(n>0)return t[n-1]}_searchRight(e){const t=this._editor[0].querySelectorAll(e),n=[...t].reverse().findIndex((e=>e.classList.contains("ui-selected")));if(t.length-n>0)return t[t.length-n]}}class rr{constructor(e,t){this._editor=e,this._selectionModel=t}up(){if(this._selectionModel.span.single){const e=this._selectionModel.span.single.gridElement.querySelector(".textae-editor__signboard");this._selectionModel.selectEntity(e.title)}}down(){const e=this._editor[0].querySelector(".textae-editor__signboard.ui-selected");if(e){const t=e.closest(".textae-editor__grid").id.substring(1);this._selectionModel.selectSpan(t)}}}class sr{constructor(e,t,n,i,o,r,s,a,l){this._editor=e,this._commander=t,this._selectionModel=n,this._annotationData=i,this._buttonController=o,this._spanConfig=r,this._clipBoard=s,this._view=a,this._editMode=l,this._horizontal=new or(e,n),this._vertical=new rr(e,n)}copyEntities(){this._clipBoard.copyEntities()}cutEntities(){this._clipBoard.cutEntities()}removeSelectedElements(){const e=this._commander.factory.removeSelectedComand();this._horizontal.right(null),this._commander.invoke(e)}createEntity(){!function(e,t){const n=e.factory.createDefaultTypeEntityToSelectedSpansCommand(t.denotation.defaultType);n.isEmpty||e.invoke(n)}(this._commander,this._annotationData.typeDefinition)}showPallet(){this._editMode.showPallet()}replicate(){!function(e,t,n,i){const o=so(t,n);i?e.invoke(e.factory.replicateSpanCommand(i,i.entities.map((e=>e.typeValues)),o)):alert("You can replicate span annotation when there is only span selected.")}(this._commander,this._buttonController,this._spanConfig,this._selectionModel.span.single)}pasteEntities(){this._clipBoard.pasteEntities()}changeLabel(){this._editMode.changeLabel()}manipulateAttribute(e,t){this._editMode.manipulateAttribute(e,t)}cancelSelect(){this._editMode.cancelSelect(),this._editor.focus()}showSettingDialog(){new ir(this._editor,this._annotationData.typeDefinition,this._annotationData.entityGap,this._annotationData.textBox).open()}select(){this._editor[0].classList.add("textae-editor--active")}unselect(){this._editor[0].classList.remove("textae-editor--active"),this._editor.eventEmitter.emit("textae-event.editor.unselect")}selectLeft(e){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectLeftAttributeTab():this._horizontal.left(e)}selectRight(e){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectRightAttributeTab():this._horizontal.right(e)}selectUp(){this._editMode.isEditDenotation&&this._vertical.up()}selectDown(){this._editMode.isEditDenotation&&this._vertical.down()}toggleSimpleMode(){this._editMode.toggleSimple()}toggleButton(e){this._buttonController.toggle(e)}changeMode(){this._editMode.changeByShortcut()}toViewMode(){this._editMode.pushView()}toTermMode(){this._editMode.pushTerm()}toBlockMode(){this._editMode.pushBlock()}toRelationMode(){this._editMode.pushRelation()}}class ar{constructor(e,t,n,i,o,r,s,a,l,c,u){const d=new Xo(e,t,n,o,i,s,l,c);Qo(e,d,u),this.event=new sr(e,i,n,t,s,o,r,a,d)}}var lr=n(2025),cr=n.n(lr);class ur extends r{constructor(e,t,n,i,o){super(e,function(e){const{url:t}=e;return`\n<div>\n  <div class="textae-editor__load-dialog__row">\n    <label class="textae-editor__load-dialog__label">\n      URL\n    </label>\n    <input \n      type="text" \n      value="${t}" \n      class="textae-editor__load-dialog__file-name url">\n    <input \n      type="button" \n      class="url" ${t?"":'disabled="disabled"'} \n      value="Open">\n  </div>\n  <div class="textae-editor__load-dialog__row">\n    <label class="textae-editor__load-dialog__label">\n      Local\n    </label>\n    <div class="textae-editor__load-dialog__dz-file-preview">\n      <div class="dz-filename"><span data-dz-name>No file selected</span></div>\n    </div>\n    <input \n      type="button" \n      class="local"\n      disabled="disabled"\n      value="Open">\n    <form class="dropzone textae-editor__load-dialog__dropzone">\n      <div class="dz-message">\n        Drop a file here or click to select\n      </div>\n    </form>\n  </div>\n</div>`}({url:t}),"Cancel"),Bn()(super.el,'[type="text"].url',"input",(e=>{To(e.target.nextElementSibling,e.target.value)}));const r=()=>!o||window.confirm("There is a change that has not been saved. If you procceed now, you will lose it.");Bn()(super.el,'[type="button"].url',"click",(e=>{r()&&n(e.target.previousElementSibling.value),super.close()})),Bn()(super.el,'[type="button"].local',"click",(()=>{r()&&i(this.dropedFile),super.close()}))}open(){super.open();const e={url:"nothing",previewsContainer:".textae-editor__load-dialog__dz-file-preview",previewTemplate:super.el.querySelector(".textae-editor__load-dialog__dz-file-preview").innerHTML};new(cr())("body > div.ui-widget-overlay.ui-front",{...e,clickable:!1}).on("addedfile",(e=>{this._showFilePreview(e)}));new(cr())(".textae-editor__load-dialog__dropzone",e).on("addedfile",(e=>{this._showFilePreview(e)})),this._preventDropOutsideDropzone()}_showFilePreview(e){super.el.querySelector(".textae-editor__load-dialog__dz-file-preview > div").remove(),this.dropedFile=e,super.el.querySelector(".textae-editor__load-dialog__dz-file-preview > div").setAttribute("title",this.dropedFile.name),To(super.el.querySelector('[type="button"].local'),!0)}_preventDropOutsideDropzone(){const e=super.el.closest(".textae-editor__dialog");e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(e=>{e.preventDefault(),e.stopPropagation()}))}}function dr(e){const t=new Blob([JSON.stringify(e)],{type:"application/json"});return URL.createObjectURL(t)}class hr extends r{constructor(e,t,n,i,o){super("Save Annotations",function(e){const{url:t,filename:n}=e;return`\n<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input \n      type="text"\n      value="${t}"\n      class="textae-editor__save-dialog__server-file-name url">\n    <input \n      type="button"\n      class="url" ${t?"":'disabled="disabled"'}\n      value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input\n      type="text"\n      value="${n}"\n      class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label"></label>\n    <a class="viewsource" href="#">Click to see the json source in a new window.</a>\n  </div>\n</div>\n`}({filename:n,url:t}),"Cancel"),function(e,t,n,i,o){Bn()(t,'[type="text"].url',"input",(e=>{To(e.target.nextElementSibling,e.target.value)})),Bn()(t,'[type="button"].url',"click",(e=>{o(e.target.previousElementSibling.value),i()})),Bn()(t,"a.download","click",(t=>{const o=t.target,r=dr(n);o.setAttribute("href",r),o.setAttribute("download",o.previousElementSibling.value),e.eventEmitter.emit("textae-event.save-annotation-dialog.download.click"),i()})),Bn()(t,"a.viewsource","click",(()=>{window.open(dr(n),"_blank"),e.eventEmitter.emit("textae-event.save-annotation-dialog.viewsource.click"),i()}))}(e,super.el,i,(()=>super.close()),o)}}const pr=(0,yo.create)({objectHash:(e,t)=>e.id||`$$index:${t}`});function fr(e,t){const n=pr.diff(e,t);return yo.formatters.html.format(n,e)}class mr extends r{constructor(e,t,n,i,o,r){super("Save Configurations",function(e){const{url:t,filename:n,diff:i}=e;return`\n<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input \n      type="text" value="${t}" \n      class="textae-editor__save-dialog__server-file-name url">\n    <input \n      type="button" \n      class="url" ${t?"":'disabled="disabled"'} \n      value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input \n      type="text" value="${n}" \n      class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <p class="textae-editor__save-dialog__diff-title">\n      Configuration differences\n      <span class="diff-info diff-info--add">added</span>\n      <span class="diff-info diff-info--remove">removed</span>\n    </p>\n  </div>\n  <div class="textae-editor__save-dialog__diff-viewer">${i}</div>\n</div>\n`}({filename:n,url:t,diff:fr(i,o)||"nothing."}),"Cancel",{width:550}),this._$dialog.on("dialogopen",(()=>yo.formatters.html.hideUnchanged())),function(e,t,n,i,o){Bn()(t,'[type="text"].url',"input",(e=>{To(e.target.nextElementSibling,e.target.value)})),Bn()(t,'[type="button"].url',"click",(e=>{o(e.target.previousElementSibling.value),i()})),Bn()(t,"a.download","click",(t=>{const o=t.target,r=dr(n);o.setAttribute("href",r),o.setAttribute("download",o.previousElementSibling.value),e.eventEmitter.emit("textae-event.save-configuration-dialog.download.click",n),i()}))}(e,super.el,o,(()=>super.close()),r)}}async function gr(e){return new Promise((t=>{const n=new FileReader;n.onload=e=>t(e),n.readAsText(e)}))}function vr(e){if("string"!=typeof e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0}var _r=n(6470),yr=n.n(_r);async function br(e,t){const n=(await gr(e)).target.result;if(i=e.name,".txt"!==yr().extname(i)){var i;if(vr(n)){const i=JSON.parse(n);if(i.text)return void t.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new O("local file",e.name,i))}t.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",new O("local file",e.name))}else t.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new O("local file",e.name,{text:n}))}class xr{constructor(e,t,n,i,o,r,s){this._editor=e,this._dataAccessObject=t,this._history=n,this._annotationData=i,this._getOriginalAnnotation=o,this._getOriginalConfig=r,this._saveToParameter=s,this._filenameOfLastRead={annotation:"",configuration:""}}importAnnotation(){new ur("Load Annotations",this._dataAccessObject.annotationUrl,(e=>this._dataAccessObject.loadAnnotation(e)),(e=>{br(e,this._editor),this._filenameOfLastRead.annotation=e.name}),this._history.hasAnythingToSaveAnnotation).open()}uploadAnnotation(){new hr(this._editor,this._saveToParameter||this._dataAccessObject.annotationUrl,this._filenameOfLastRead.annotation,this._editedAnnotation,(e=>this._dataAccessObject.saveAnnotation(e,this._editedAnnotation))).open()}saveAnnotation(){this._dataAccessObject.saveAnnotation(this._saveToParameter||this._dataAccessObject.annotationUrl,this._editedAnnotation)}importConfiguration(){new ur("Load Configurations",this._dataAccessObject.configurationUrl,(e=>this._dataAccessObject.loadConfigulation(e)),(e=>{!function(e,t){gr(e).then((({target:n})=>{vr(n.result)?t.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new O("local file",e.name,JSON.parse(n.result))):t.eventEmitter.emit("textae-event.data-access-object.configuration.format.error",new O("local file",e.name))}))}(e,this._editor),this._filenameOfLastRead.configuration=e.name}),this._history.hasAnythingToSaveConfiguration).open()}uploadConfiguration(){const e={...this._getOriginalConfig(),...this._annotationData.typeDefinition.config};new mr(this._editor,this._dataAccessObject.configurationUrl,this._filenameOfLastRead.configuration,this._getOriginalConfig(),e,(t=>this._dataAccessObject.saveConfiguration(t,e))).open()}get _editedAnnotation(){return function(e,t,n){return Object.assign(e,t.toJson(),{config:n})}(this._getOriginalAnnotation(),this._annotationData,this._annotationData.typeDefinition.config)}}function wr(e,t,...n){e.has(t)&&e.get(t)(...n)}function kr(e,t,n){return new Map([["1",e=>t.event.manipulateAttribute(1,e)],["2",e=>t.event.manipulateAttribute(2,e)],["3",e=>t.event.manipulateAttribute(3,e)],["4",e=>t.event.manipulateAttribute(4,e)],["5",e=>t.event.manipulateAttribute(5,e)],["6",e=>t.event.manipulateAttribute(6,e)],["7",e=>t.event.manipulateAttribute(7,e)],["8",e=>t.event.manipulateAttribute(8,e)],["9",e=>t.event.manipulateAttribute(9,e)],["a",()=>e.redo()],["b",()=>t.event.toggleButton("boundary-detection")],["c",()=>t.event.copyEntities()],["d",()=>t.event.removeSelectedElements()],["e",()=>t.event.createEntity()],["f",()=>t.event.changeMode()],["i",()=>n.importAnnotation()],["m",()=>t.event.changeMode()],["q",()=>t.event.showPallet()],["r",()=>t.event.replicate()],["u",()=>n.uploadAnnotation()],["v",()=>t.event.pasteEntities()],["w",()=>t.event.changeLabel()],["x",()=>t.event.cutEntities()],["y",()=>e.redo()],["z",()=>e.undo()],["ArrowDown",()=>t.event.selectDown()],["ArrowLeft",e=>t.event.selectLeft(e)],["ArrowRight",e=>t.event.selectRight(e)],["ArrowUp",()=>t.event.selectUp()],["Backspace",()=>t.event.removeSelectedElements()],["Delete",()=>t.event.removeSelectedElements()],["Escape",()=>t.event.cancelSelect()]])}function Sr(e,t,n,i,o){const r=new Map([["view",()=>t.event.toViewMode()],["term",()=>t.event.toTermMode()],["block",()=>t.event.toBlockMode()],["relation",()=>t.event.toRelationMode()],["simple",()=>t.event.toggleSimpleMode()],["read",()=>n.importAnnotation()],["write",()=>n.uploadAnnotation()],["undo",()=>e.undo()],["redo",()=>e.redo()],["replicate",()=>t.event.replicate()],["entity",()=>t.event.createEntity()],["change-label",()=>t.event.changeLabel()],["pallet",()=>t.event.showPallet()],["delete",()=>t.event.removeSelectedElements()],["copy",()=>t.event.copyEntities()],["cut",()=>t.event.cutEntities()],["paste",()=>t.event.pasteEntities()],["setting",()=>t.event.showSettingDialog()],["line-height",()=>i.updateLineHeight()]]);for(const e of o.pushButtonNames)r.has(e)||r.set(e,(()=>t.event.toggleButton(e)));return r}class Cr{constructor(e,t,n,i,o){this._keyApiMap=new kr(e,t,n),this._iconApiMap=new Sr(e,t,n,o,i),this._view=o,this._buttonController=i,this._presenter=t,this._isSelected=!1}handleKeyInput(e){if(this._isSelected){const t=e.shiftKey&&48<=e.keyCode&&e.keyCode<=57?String.fromCharCode(e.keyCode):e.key;wr(this._keyApiMap,t,e.shiftKey)}}handleButtonClick(e){wr(this._iconApiMap,e,{})}redraw(){this._view.updateDisplay()}updateButtons(){this._buttonController.propagate()}select(){this._presenter.event.select(),this._isSelected=!0}unselect(){this._presenter.event.unselect(),this._isSelected=!1}}const Er='\n<div class="textae-editor__footer">\n  <div class="textae-editor__footer__message"></div>\n</div>\n';class $r{constructor(e){this._container=e[0]}set status(e){const t=e.displayName;var n;""!==t&&((n=this._container,n.querySelector(".textae-editor__footer__message")||(n.insertAdjacentHTML("beforeend",Er.replace(/[\n\r]+/g,"")),n.querySelector(".textae-editor__footer__message"))).innerHTML=oe(t)?`Source: <a class="textae-editor__footer__message__link" href="${t}">${decodeURI(t)}</a>`:`Source: ${t}`)}}function Tr(e,t,n,i,o){!function(e,t){!0===e.autosave?t.push("write-auto"):t.release("write-auto"),!0===e.autolineheight?t.push("line-height-auto"):t.release("line-height-auto"),!0===e.boundarydetection?t.push("boundary-detection"):t.release("boundary-detection")}(e,t),n.set(e),i.reset(o,e)}function Ar(e){if(!0===e)return"flag";if("number"==typeof e)return"numeric";if("string"==typeof e)return"string";throw`${JSON.stringify(e)} is an unexpected value for an Attribute.`}function Dr(e){const t=e.reduce(((e,t)=>e.has(t)?e.set(t,e.get(t)+1):e.set(t,1)),new Map),n=Math.max(...t.values());for(const[e,i]of t.entries())if(i===n)return e}function Or(e){const t=Math.max(...e.map((e=>{const[t,n]=String(e).split(".");return n?n.length:0})));return Number(Array.from(Array(t)).reduce(((e,t)=>.1*e),1).toFixed(t))}class Pr{constructor({pred:e,obj:t}){this._pred=e,this._objects=[t]}push(e){this._objects.push(e)}get definition(){switch(Ar(this._objects[0])){case"flag":return this._prototype;case"numeric":return this._numericAttribute;case"string":return this._stringAttribute;default:throw new Error(`prototype: ${JSON.stringify(this._prototype)}`)}}get mostFrequentObject(){return Dr(this._objects)}get _prototype(){return{pred:this._pred,"value type":Ar(this._objects[0])}}get _numericAttribute(){return{min:Math.min(...this._objects),max:Math.max(...this._objects),step:Or(this._objects),default:Dr(this._objects),...this._prototype}}get _stringAttribute(){return{default:Dr(this._objects),...this._prototype}}}function Nr(e){return e.reduce(((e,t)=>(e.has(t.pred)?e.get(t.pred).push(t.obj):e.set(t.pred,new Pr(t)),e)),new Map)}function jr(e,t){return function(e,t){for(const n of t){const t=e.findIndex((e=>e.pred===n.pred));-1!==t?e[t]=Object.assign(n,e[t]):e.push(n)}return e}(e,function(e){return[...Nr(e).values()].map((e=>e.definition))}(t))}function Mr(e){return e?JSON.parse(JSON.stringify(e)):{}}class Ir{constructor(e=[],t=[]){this._annotations=t,this._config=e}get configuration(){return function(e,t){e=Mr(e);const n=Nr(t);for(const t of function(e){return e.filter((e=>"selection"===e["value type"]))}(e))if(t.values&&0!==t.values.length)if(t.values.find((e=>!0===e.default)));else if(n.has(t.pred)){const e=n.get(t.pred);t.values.find((t=>t.id===e.mostFrequentObject)).default=!0}else t.values[0].default=!0;else t.values=[{id:"default",default:!0}];return e}(jr(this._config,this._annotations),this._annotations)}}function Rr(e,t){return console.assert(e),(t=Mr(t))["attribute types"]=new Ir(t["attribute types"],e.attributes).configuration,t}var Lr=n(1581),Fr=n(5477),zr=n.n(Fr);const Br=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"JSON schema for texta configuration files","definitions":{"characters":{"type":"array","items":{"type":"string","minLength":1,"maxLength":1}},"color":{"pattern":"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$","type":"string"},"default":{"type":"boolean"},"denote":{"type":"object","required":["id"],"properties":{"id":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"},"default":{"$ref":"#/definitions/default"}}},"types":{"type":"array","items":{"$ref":"#/definitions/denote"}},"autocompletion_ws":{"type":"string","format":"uri-reference"}},"type":"object","properties":{"delimiter characters":{"$ref":"#/definitions/characters"},"non-edge characters":{"$ref":"#/definitions/characters"},"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"autosave":{"type":"boolean"},"autolineheight":{"type":"boolean"},"boundarydetection":{"type":"boolean"},"entity types":{"$ref":"#/definitions/types"},"relation types":{"$ref":"#/definitions/types"},"attribute types":{"type":"array","items":{"type":"object","required":["pred","value type"],"properties":{"pred":{"type":"string"},"value type":{"enum":["flag","selection","string","numeric"]}},"allOf":[{"if":{"properties":{"value type":{"const":"flag"}}},"then":{"properties":{"color":{"$ref":"#/definitions/color"},"label":{"type":"string"}}}},{"if":{"properties":{"value type":{"const":"selection"}}},"then":{"required":["values"],"properties":{"values":{"type":"array","items":{"$ref":"#/definitions/denote"}}}}},{"if":{"properties":{"value type":{"const":"string"}}},"then":{"required":["default"],"properties":{"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"default":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["pattern"],"properties":{"pattern":{"type":"string","format":"regex"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}},{"if":{"properties":{"value type":{"const":"numeric"}}},"then":{"required":["default","min","max","step"],"properties":{"default":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"values":{"type":"array","items":{"type":"object","required":["range"],"properties":{"range":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}}]}}}}');const Hr=new Lr.ZP({verbose:!0});zr()(Hr,["uri-reference","regex"]);const Wr=Hr.compile(Br);function Ur(e){return console.assert(e,"config is required."),Wr(e)?null:(console.warn(Wr.errors),function(e){for(const t of e){if("required"===t.keyword)return`Invalid configuration: The attribute type whose predicate is '${t.data.pred}' misses a mandatory property, '${t.params.missingProperty}'.`;if(t.dataPath.includes("color"))return De()`Invalid configuration: '${t.data}' is invalid color format.`}}(Wr.errors))}function qr(e,t){const n=function(e,t){if(console.assert(t,"If you don't have a configuration, generate a configuration from the annotation."),e.attributes){const n=t["attribute types"],i=e.attributes.filter((e=>n.some((t=>t.pred===e.pred&&"selection"===t["value type"])))).filter((e=>!n.some((t=>t.pred===e.pred&&t.values.some((t=>t.id===e.obj))))));if(i.length)return console.warn("selection attribute values without definition",i),`selection attribute value definition for "${i.map((e=>e.obj)).join(", ")}" in configuration is missing. `}}(e,t);if(!n)return t;Rt().error(n)}function Vr(e,t){const n=Rr(e,t),i=Ur(n);if(!i)return qr(e,n);Rt().error(i)}function Gr(e){(function(e){if(e.denotations)for(const t of e.denotations){if(t.span.begin!==parseInt(t.span.begin))return!0;if(t.span.end!==parseInt(t.span.end))return!0}})(e)&&Rt().warning("In the annotation file, some of the begin and end offsets of denotations were not integer values.\n      TextAE converted them to integer values.\n      However, to avoid a chance of unexpected rendering, please fix them.",15)}function Kr(e,t,n,i,o,r,s){const a=i.get("annotation");if(a)if(a.has("inlineAnnotation")){const n=new O("inline",null,JSON.parse(a.get("inlineAnnotation")));if(!n.data.config&&i.get("config"))o.loadConfigulation(i.get("config"),n);else{if(Gr(n.data),n.data.config&&"object"!=typeof n.data.config)return void Rt().error("configuration in anntotaion file is invalid.");const i=Vr(n.data,n.data.config);i&&(Tr(i,r,e,t,n.data),s.annotation=n)}}else a.has("url")?o.loadAnnotation(a.get("url")):i.get("config")?o.loadConfigulation(i.get("config")):function(e,t,n,i){Tr(e.defaultConfiguration,t,n,i,e.defaultAnnotation)}(s,r,e,t)}function Jr(e){if(e){const t=function(e){const t=new Map,n=e.split("?")[1];if(n){const e=n.split("&");for(let n=0;n<e.length;n++){const i=e[n].split("="),o=decodeURIComponent(i[0]),r=decodeURIComponent(i[1]);t.set(o,decodeURIComponent(r))}}return t}(e);if(t.has("config_lock"))return t.get("config_lock")}return null}class Yr{constructor(e,t){this._dataAccessObject=e,this._statusBar=t,this._map=new Map}get defaultAnnotation(){return{text:"Currently, the document is empty. Use the `import` button or press the key `i` to open a document with annotation."}}get defaultConfiguration(){return Rr(this.defaultAnnotation)}get annotation(){return this._map.has("annotation")?this._map.get("annotation").data:this.defaultAnnotation}set annotation(e){this._map.set("annotation",e),e.data.config&&(this.configuration=new O(null,null,e.data.config)),this._dataAccessObject.annotationUrl=e,e.type&&(this._statusBar.status=e)}get configuration(){return this._map.has("configuration")?this._map.get("configuration").data:{}}set configuration(e){this._map.set("configuration",e),this._dataAccessObject.configurationUrl=e}}class Xr{constructor(e,t){this._editor=e,this.name=t,this.state=!1}value(e){return void 0===e?this.state:(this.state=e,this.propagate(),null)}toggle(){this.state=!this.state,this.propagate()}propagate(){this._editor.eventEmitter.emit("textae-event.control.button.push",{buttonName:this.name,state:this.state})}}class Qr{constructor(e){this._buttonMap=f.pushButtons.reduce(((t,n)=>(t.set(n,new Xr(e,n)),t)),new Map),e.eventEmitter.on("textae-event.edit-mode.transition",(e=>this._setMode(e))),this._buttonMap.get("boundary-detection").value(!0)}propagate(){for(const e of this._buttonMap.values())e.propagate()}getButton(e){return this._buttonMap.get(e)}get names(){return this._buttonMap.keys()}_setMode(e){switch(e){case Zn:this._updateModeButtons(!0,!1,!1,!1,!0);break;case ei:this._updateModeButtons(!0,!1,!1,!1,!1);break;case ti:this._updateModeButtons(!1,!0,!1,!1,!0);break;case ni:this._updateModeButtons(!1,!0,!1,!1,!1);break;case ii:this._updateModeButtons(!1,!1,!0,!1,!0);break;case oi:this._updateModeButtons(!1,!1,!0,!1,!1);break;case ri:this._updateModeButtons(!1,!1,!1,!0,!1);break;default:throw`unknown edit mode!${e}`}}_updateModeButtons(e,t,n,i,o){this._buttonMap.get("view").value(e),this._buttonMap.get("term").value(t),this._buttonMap.get("block").value(n),this._buttonMap.get("relation").value(i),this._buttonMap.get("simple").value(o)}}class Zr{constructor(e,t,n){this._states={},this._editor=e,this._selectionModel=t,this._clipBoard=n,this.enable("view",!0),this.enable("term",!0),this.enable("block",!0),this.enable("relation",!0),this.enable("simple",!0),this.enable("setting",!0),function(e,t){e.eventEmitter.on("textae-event.history.change",(e=>{t.enable("undo",e.hasAnythingToUndo),t.enable("redo",e.hasAnythingToRedo)})).on("textae-event.selection.span.change",(()=>t.updateBySpan())).on("textae-event.selection.relation.change",(()=>t.updateByRelation())).on("textae-event.selection.entity.change",(()=>t.updateByEntity())).on("textae-event.edit-mode.transition",(e=>t.setForMode(e))).on("textae-event.clip-board.change",(()=>t.updateByClipboard)).on("textae-event.annotation-auto-saver.enable",(e=>t.enable("write-auto",e)))}(e,this)}propagate(){this._editor.eventEmitter.emit("textae-event.control.buttons.change",this._states)}enable(e,t){this._states[e]=t,this.propagate()}updateBySpan(){this._updateButtons(f.spanButtons),this.propagate()}updateByEntity(){this._updateButtons(f.entityButtons),this.propagate()}updateByRelation(){this._updateButtons(f.relationButtons),this.propagate()}_updateButtons(e){for(const{name:t,predicate:n}of e){const e=n(this._selectionModel,this._clipBoard);this.enable(t,e)}}updateByClipboard(){this.enable("paste",this._enablePaste)}get _enablePaste(){return f.spanButtons.find((({name:e})=>"copy"===e)).predicate(this._selectionModel,this._clipBoard)}setForMode(e){switch(e){case Zn:case ei:this._updateButtonsForMode(!0,!1,!1,!1,!1,!1);break;case ti:case ni:this._updateButtonsForMode(!0,!0,!0,!0,!0,!0);break;case ii:case oi:this._updateButtonsForMode(!0,!1,!0,!0,!0,!0);break;case ri:this._updateButtonsForMode(!1,!1,!1,!0,!0,!0);break;default:throw`unknown edit mode!${e}`}this.propagate()}_updateButtonsForMode(e,t,n,i,o,r){this._states.simple=e,this._states["replicate-auto"]=t,this._states["boundary-detection"]=n,this._states["line-height"]=i,this._states["line-height-auto"]=o,this._states.pallet=r}}class es{constructor(e,t,n){this._enableState=new Zr(e,t,n),this._pushButtons=new Qr(e)}propagate(){this._enableState.propagate(),this._pushButtons.propagate()}get pushButtonNames(){return this._pushButtons.names}valueOf(e){return this._getPushButton(e).value()}push(e){this._getPushButton(e).value(!0)}release(e){this._getPushButton(e).value(!1)}toggle(e){return this._getPushButton(e).toggle()}_getPushButton(e){return this._pushButtons.getButton(e)}}function ts(e){return new Set(function(e){return e.span.all.map((e=>e.entities)).flat()}(e).concat(e.entity.all))}class ns{constructor(e,t,n){this._editor=e,this._commander=t,this._selectionModel=n,this._items=[],e.eventEmitter.on("textae-event.annotation-data.entity.remove",(e=>{this.hasCuttingItem&&this._updateItems(new Set(this._items.filter((t=>t!=e))))})).on("textae-event.edit-mode.transition",(()=>this._updateItems()))}get hasCopyingItem(){return this._items[0]instanceof me}get hasCuttingItem(){return this._items[0]instanceof Le}copyEntities(){const e=[...ts(this._selectionModel)].reduce(((e,t)=>e.add(t.typeValues)),new Set);this._updateItems(e)}cutEntities(){const e=ts(this._selectionModel);this._cuttingItems.length&&this._cuttingItems.every((t=>e.has(t)))&&[...e].every((e=>this._cuttingItems.includes(e)))?this._updateItems():this._updateItems(e)}pasteEntities(){if(this.hasCopyingItem){const e=this._commander.factory.pasteTypesToSelectedSpansCommand(this._items);this._commander.invoke(e)}else if(this._itemsWillBeCutAndPaste.length&&this._selectionModel.span.single){const e=this._commander.factory.moveEntitiesToSelectedSpansCommand(this._itemsWillBeCutAndPaste);return this._commander.invoke(e),void this._updateItems()}}_updateItems(e=new Set){const t=this._cuttingItems.filter((t=>!e.has(t)));this._items=[...e],this._editor.eventEmitter.emit("textae-event.clip-board.change",this._cuttingItems,t)}get _itemsWillBeCutAndPaste(){return this._cuttingItems.filter((e=>e.span.id!==(this._selectionModel.span.single&&this._selectionModel.span.single.id)))}get _cuttingItems(){return this.hasCuttingItem?this._items:[]}}class is{constructor(e,t,n,i,o){this._buttonController=t;const r=Kn()((()=>n.saveAnnotation()),5e3);o.bind((e=>{e&&t.valueOf("write-auto")&&r()})),e.eventEmitter.on("textae-event.data-access-object.annotation.load.success",(()=>this._disabled())).on("textae-event.data-access-object.save.error",(()=>this._disabled())).on("textae-event.data-access-object.annotation.url.set",(t=>e.eventEmitter.emit("textae-event.annotation-auto-saver.enable",Boolean(i||t.id)))).on("textae-event.control.button.push",(({buttonName:e,state:t})=>{"write-auto"===e&&!0===t&&o.hasChange&&n.saveAnnotation()}))}_disabled(){this._buttonController.valueOf("write-auto")&&this._buttonController.toggle("write-auto")}}function os(e,t,n,i,o,r,s,a,l){!function(e,t){e.eventEmitter.on("textae-event.type-definition.reset",(()=>t.resetConfiguration()))}(e,t),function(e){e.eventEmitter.on("textae-event.history.change",(e=>{window.onbeforeunload=e.hasAnythingToSaveAnnotation?()=>!0:null}))}(e),function(e,t,n,i,o,r,s,a){e.eventEmitter.on("textae-event.data-access-object.annotation.load.success",(e=>{if(!e.data.config&&i.get("config"))s.loadConfigulation(i.get("config"),e);else{if(Gr(e.data),e.data.config&&"object"!=typeof e.data.config)return void Rt().error("configuration in anntotaion file is invalid.");const i=Vr(e.data,e.data.config);i&&(Tr(i,a,t,n,e.data),r.annotation=e)}})).on("textae-event.data-access-object.annotation.load.error",(e=>Rt().error(`Could not load the file from the location you specified.: ${e}`))).on("textae-event.data-access-object.annotation.format.error",(({displayName:e})=>Rt().error(`${e} is not a annotation file or its format is invalid.`))).on("textae-event.data-access-object.configuration.load.success",((e,i=null)=>{if("object"!=typeof e.data)return void Rt().error(`${e.displayName} is not a configuration file or its format is invalid.`);i&&Gr(i.data);const o=i&&i.data||Object.assign(r.annotation,n.toJson()),s=Vr(o,e.data);s&&(Tr(s,a,t,n,o),i&&(r.annotation=i),r.configuration=e)})).on("textae-event.data-access-object.configuration.load.error",(e=>Rt().error(`Could not load the file from the location you specified.: ${e}`))).on("textae-event.data-access-object.configuration.format.error",(({displayName:e})=>Rt().error(`${e} is not a configuration file or its format is invalid.!`))).on("textae-event.data-access-object.configuration.save",(e=>{r.configuration=new O(null,null,e)}))}(e,i,n,o,0,s,a,l),function(e){const t=e[0];t.addEventListener("mousedown",(e=>{e.shiftKey&&e.preventDefault()})),Bn()(t,".textae-editor__signboard","mousedown",(e=>e.preventDefault()))}(e),function(e){e[0].addEventListener("keyup",(t=>{e.eventEmitter.emit("textae-event.editor.key.input"),e.api.handleKeyInput(t)}))}(e)}function rs(e,t,n,i,o,r,s){const a=new Ft,l=new Fn(e,i,o,n),c=new ns(e,l,o),u=new es(e,o,c),d=new Xn(e,i),h=function(e,t){return"on"===t?new $r(e):{status(){}}}(e,s.get("status_bar")),p=new Yr(t,h),f=new ar(e,i,o,l,a,c,u,d,p,s.get("autocompletion_ws"),s.get("mode"));!function(e){new MutationObserver((t=>{t.forEach((t=>{t.removedNodes.length&&1===t.removedNodes[0].nodeType&&(t.removedNodes[0].classList.contains("textae-editor__span")||t.removedNodes[0].classList.contains("textae-editor__type"))&&"BODY"===document.activeElement.tagName&&e.focus()}))})).observe(e[0].querySelector(".textae-editor__body"),{childList:!0,subtree:!0})}(e),"visible"===s.get("control")&&e[0].classList.add("textae-editor--control-visible"),"hidden"===s.get("control")&&e[0].classList.add("textae-editor--control-hidden");const m=Jr(s.get("source"));null!==m&&s.set("config_lock",m),s.has("config_lock")&&"true"===s.get("config_lock")?i.typeDefinition.lockEdit():i.typeDefinition.unlockEdit(),Kr(a,i,0,s,t,u,p);const g=new xr(e,t,n,i,(()=>p.annotation),(()=>p.configuration),s.get("annotation").get("save_to"));new is(e,u,g,s.get("annotation").get("save_to"),r),e.api=new Cr(l,f,g,u,d),os(e,n,i,a,s,0,p,t,u),e.eventEmitter.on("textae-event.pallet.read-button.click",(()=>g.importConfiguration())).on("textae-event.pallet.write-button.click",(()=>g.uploadConfiguration())),e[0].tabIndex=-1,Rt().set("notifier","position","top-right")}var ss=n(7187);class as extends r{constructor(e){super("The following erroneous annotations ignored",e.map((({name:e,wrongRangeDenotations:t,outOfTextDenotations:n,wrongRangeBlocks:i,outOfTextBlocks:o,duplicatedRangeBlocks:r,wrongRangeTypesettings:s,outOfTextTypesettings:a,duplicatedIDs:l,boundaryCrossingSpans:c,referencedEntitiesDoNotExist:u,duplicatedAttributes:d},h)=>`\n    ${1===h?'\n      <div class="textae-editor__valiondate-dialog__content">\n        <h1>Track annatations will be merged to the root anntations.</h1>\n      </div>':""}\n    <div class="textae-editor__valiondate-dialog__content">\n      <h2>${e}</h2>\n      ${function(e){return e.length?`\n        <table>\n          <caption>Wrong range denotations.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n          `)).join("\n")}\n          </tbody>\n        </table>`:""}(t)}\n      ${function(e){return e.length?`\n        <table>\n          <caption>Out of text denotations.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n            `)).join("\n")}\n          </tbody>\n        </table>`:""}(n)}\n      ${function(e){return e.length?`\n        <table>\n          <caption>Wrong range blocks.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n            `)).join("\n")}\n          </tbody>\n        </table>\n  `:""}(i)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Out of text blokcs.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,obj:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(o)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated range blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,obj:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(r)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Wrong range typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,style:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(s)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Out of text typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,style:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(a)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated IDs in Denotations and Blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,span:n,obj:i})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td class="alert">${n.begin}</td>\n            <td class="alert">${n.end}</td>\n            <td>${i}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(l)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Denotations or Blocks or Typesettings with boundary-cross.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style/obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,span:n,style:i,obj:o})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td class="alert">${n.begin}</td>\n            <td class="alert">${n.end}</td>\n            <td>${i||o}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(c)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Referenced entities do not exist.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,alertSubj:n,subj:i,pred:o,alertObj:r,obj:s})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td${n?' class="alert"':""}>${i}</td>\n            <td>${o}</td>\n            <td${r?' class="alert"':""}>${s}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(u)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated attributes.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,subj:t,pred:n,obj:i})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t}</td>\n            <td>${n}</td>\n            <td class="alert">${i}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(d)}\n    </div>\n    `)).join("\n"),null,{width:900})}}function ls(e){const t=e.getAttribute("save_to");return t?decodeURIComponent(t):""}function cs(e,t){const n=new Map,i=e.innerText;e.innerHTML="",i&&n.set("inlineAnnotation",i);const o=function(e){return e?decodeURIComponent(e):""}(t);o&&n.set("url",o);return ls(e)&&n.set("save_to",ls(e)),n}function us(e,t){e.has(t)&&e.set(t,decodeURIComponent(e.get(t)))}function ds(e,t,n){t.getAttribute(n)&&e.set(n,t.getAttribute(n))}function hs(){this.eventEmitter=new ss.EventEmitter;const e=function(e){const t=new Map;return ds(t,e,"mode"),ds(t,e,"control"),ds(t,e,"status_bar"),ds(t,e,"config"),ds(t,e,"config_lock"),ds(t,e,"autocompletion_ws"),us(t,"config"),us(t,"autocompletion_ws"),t.set("source",function(e){return e.getAttribute("source")||e.getAttribute("target")}(e)),t.set("annotation",cs(e,t.get("source"))),t}(this[0]),t=new At(this),n=new Pt(this.eventEmitter,t),i=new jt(this.eventEmitter),o=new P(this),r=new Mt(this);return r.bind((e=>this.eventEmitter.emit("textae-event.control.writeButton.transit",e))),function(e,t){e.eventEmitter.on("textae-event.data-access-object.annotation.save",(()=>{t.annotatioSaved(),Rt().success("annotation saved")})).on("textae-event.data-access-object.configuration.save",(()=>{t.configurationSaved(),Rt().success("configuration saved")})).on("textae-event.data-access-object.save.error",(()=>{Rt().error("could not save")}))}(this,i),function(e,t){e.eventEmitter.on("textae-event.annotation-data.all.change",((e,n,i,o)=>{t.resetAllHistories(),i&&new as(o).open()}))}(this,i),this.api={start:s=>rs(s,o,i,t,n,r,e)},this}function ps(e,t,n){!function(e,t){e[0].insertBefore(t.el,e[0].childNodes[0]),e.eventEmitter.on("textae-event.control.button.push",(e=>t.updateButtonPushState(e.buttonName,e.state))).on("textae-event.control.buttons.change",(e=>t.updateAllButtonEnableState(e))).on("textae-event.control.writeButton.transit",(e=>t.transitWriteButtonImage(e)))}(e,t),function(e,t){e[0].appendChild(t.el),e.eventEmitter.on("textae-event.control.button.push",(e=>t.updateButtonPushState(e.buttonName,e.state))).on("textae-event.control.buttons.change",(e=>t.updateAllButtonEnableState(e))).on("textae-event.editor.key.input",(()=>t.hide())),window.addEventListener("click",(e=>{3!==e.which&&t.hide()})),window.addEventListener("contextmenu",(n=>{t.hide();const i=n.target.closest(".textae-editor");if(i===e[0]){if(i.classList.contains("textae-editor__mode--view-with-relation")||i.classList.contains("textae-editor__mode--view-without-relation"))return;n.preventDefault(),t.show(n.pageY-e[0].offsetTop,n.pageX)}}))}(e,n),e.eventEmitter.on("textae-event.control.button.click",(t=>e.api.handleButtonClick(t))),e.api.updateButtons()}const fs=new class{constructor(){var e;this._editors=new l,this._veil=new h,e=this._editors,window.addEventListener("resize",u()((()=>e.redraw()),500)),window.addEventListener("load",(()=>{!function(e){document.body.addEventListener("focus",(t=>{const n=e.findByHTMLelement(t.target.closest(".textae-editor"));!function(e,t){t&&(e.selected&&t[0]!==e.selected[0]&&e.unselect(e.selected),e.selected=t)}(e,n)}),!0),document.body.addEventListener("click",(t=>{null===t.target.closest(".textae-editor__dialog")&&null===t.target.closest(".ui-autocomplete")&&null===t.target.closest(".ui-widget-overlay")&&null===t.target.closest(".textae-editor__type-pallet__content")&&(e.findByHTMLelement(t.target.closest(".textae-editor"))||e.selected&&e.unselect(e.selected))}))}(this._editors)}))}registerEditor(e){this._editors.push(e),this._veil.setObserver(e)}};document.addEventListener("DOMContentLoaded",(function(){for(const e of document.querySelectorAll(".textae-editor")){const n=t()(e);hs.call(n),fs.registerEditor(n),n.api.start(n),ps(n,new b(n),new w(n))}}))})()})();