/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

!function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j>o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m>p&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m>p&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d>=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1>=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1>=m;m++)for(var n=0;d>=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e>=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p>=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s>=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f>q;q++)d[q]=o[q];for(var q=0;j>q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b>=f;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b>u;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:max_distance_below>v&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c>d?1:0},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(var h=1;b>=h;h++)for(var g=0;b-h>=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a>i;i++){for(var j=[new e(a)],k=0;a-i>k;k++)j.push(new f);for(var k=0;i>k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1>d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};window.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}(),function(){"use strict";var a,b=this;a="undefined"!=typeof exports?exports:b.jsPlumbGeom={};var c=function(a){return"[object Array]"===Object.prototype.toString.call(a)},d=function(a,b,d){return a=c(a)?a:[a.x,a.y],b=c(b)?b:[b.x,b.y],d(a,b)},e=a.gradient=function(a,b){return d(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-1/0:b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},f=(a.normal=function(a,b){return-1/e(a,b)},a.lineLength=function(a,b){return d(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return d(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),g=(a.theta=function(a,b){return d(a,b,function(a,b){var c=e(a,b),d=Math.atan(c),g=f(a,b);return(4==g||3==g)&&(d+=Math.PI),0>d&&(d+=2*Math.PI),d})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),h=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var d=e(a,b),i=f(a,b),j=c>0?g[i]:h[i],k=Math.atan(d),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var d=e(a,b),f=Math.atan(-1/d),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null==a?!1:"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e){var g=this.clone(b);for(var h in e)if(null==g[h]||c(e[h])||d(e[h]))g[h]=e[h];else if(a(e[h])){var i=[];a(g[h])&&i.push.apply(i,g[h]),i.push.apply(i,e[h]),g[h]=i}else if(f(e[h])){f(g[h])||(g[h]={});for(var j in e[h])g[h][j]=e[h][j]}return g},copyValues:function(a,b,c){for(var d=0;d<a.length;d++)c[a[d]]=b[a[d]]},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d){var e=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)];null!=e&&(a=a.replace(b[c],e))}return a},g=function(b){if(null!=b){if(c(b))return e(b);if(a(b)){for(var d=[],h=0;h<b.length;h++)d.push(g(b[h]));return d}if(f(b)){var i={};for(var j in b)i[j]=g(b[j]);return i}return b}};return g(b)},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(",");c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},clampToGrid:function(a,b,c,d,e){var f=function(a,b){var c=a%b,d=Math.floor(a/b),e=c>=b/2?1:0;return(d+e)*b};return[d||null==c?a:f(a,c[0]),e||null==c?b:f(b,c[1])]},indexOf:function(a,b){return jsPlumbUtil.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=jsPlumbUtil.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=jsPlumbUtil.indexOf(a,b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==jsPlumbUtil.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c,d,e){d=d||{},e=e||{},c=a(c)?c:[c];for(var f=0;f<c.length;f++)for(var g in c[f].prototype)c[f].prototype.hasOwnProperty(g)&&(b.prototype[g]=c[f].prototype[g]);var h=function(a){return function(){for(var b=0;b<c.length;b++)c[b].prototype[a]&&c[b].prototype[a].apply(this,arguments);return d[a].apply(this,arguments)}};for(var i in d)b.prototype[i]=h(i);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},logEnabled:!0,log:function(){if(jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(b){}},group:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.group(a)},groupEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.groupEnd(a)},time:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.time(a)},timeEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.timeEnd(a)},removeElement:function(a){null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a)},removeElements:function(a){for(var b=0;b<a.length;b++)jsPlumbUtil.removeElement(a[b])},sizeElement:function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(e){jsPlumbUtil.log("jsPlumb function failed : "+e)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(e){jsPlumbUtil.log("wrapped function failed : "+e)}return d}}},jsPlumbUtil.EventGenerator=function(){var a={},b=!1,c=["ready"];this.bind=function(b,c,d){return jsPlumbUtil.addToList(a,b,c,d),this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&g>h&&j!==!1;){if(-1!=jsPlumbUtil.findWithFunction(c,function(a){return a===d}))a[d][h](e,f);else try{j=a[d][h](e,f)}catch(k){jsPlumbUtil.log("jsPlumb: fire failed for event "+d+" : "+k)}h++,(null==a||null==a[d])&&(i=!0)}}return this},this.unbind=function(b){return b?delete a[b]:a={},this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.cleanupListeners=function(){for(var b in a)a[b].splice(0),delete a[b]}},jsPlumbUtil.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}(),function(){var a=!!document.createElement("canvas").getContext,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){if(void 0===c.vml){var a=document.body.appendChild(document.createElement("div"));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;null!=b&&null!=b.style?(b.style.behavior="url(#default#VML)",c.vml=b?"object"==typeof b.adj:!0):c.vml=!1,a.parentNode.removeChild(a)}return c.vml},d=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=jsPlumb.CurrentLibrary,i=h.getElementObject(g),j=a.getId(g),k=h.getOffset(i);b[j]||(b[j]=g,c.push(g),d[j]={});var l=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=h.getElementObject(b.childNodes[c]),i=a.getId(b.childNodes[c],null,!0);if(i&&e[i]&&e[i]>0){var m=h.getOffset(g);d[j][i]={id:i,offset:{left:m.left-k.left,top:m.top-k.top}},f[i]=j}l(b.childNodes[c])}};l(g)},this.updateOffsets=function(b){var c=jsPlumb.CurrentLibrary,e=c.getElementObject(b),g=c.getDOMElement(e),h=a.getId(g),i=d[h],j=c.getOffset(e);if(i)for(var k in i){var l=c.getElementObject(k),m=c.getOffset(l);d[h][k]={id:k,offset:{left:m.left-j.left,top:m.top-j.top}},f[k]=h}},this.endpointAdded=function(c){var g=jsPlumb.CurrentLibrary,h=document.body,i=a.getId(c),j=g.getElementObject(c),k=jsPlumb.CurrentLibrary.getOffset(j),l=c.parentNode;for(e[i]=e[i]?e[i]+1:1;null!=l&&l!=h;){var m=a.getId(l,null,!0);if(m&&b[m]){var n=g.getElementObject(l),o=g.getOffset(n);null==d[m][i]&&(d[m][i]={id:i,offset:{left:k.left-o.left,top:k.top-o.top}},f[i]=m);break}l=l.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(a,b,c,e){var g=f[b];if(g){d[e]||(d[e]={}),d[e][b]=d[g][b],delete d[g][b];var h=jsPlumb.CurrentLibrary.getOffset(c),i=jsPlumb.CurrentLibrary.getOffset(a);d[e][b].offset={left:i.left-h.left,top:i.top-h.top},f[b]=e}}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}}),window.jsPlumbAdapter={headless:!1,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["canvas","svg","vml"]},isRenderModeAvailable:function(d){return{canvas:a,svg:b,vml:c()}[d]},getDragManager:function(a){return new d(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable("canvas"),d=this.isRenderModeAvailable("svg"),e=this.isRenderModeAvailable("vml");"svg"===a?d?b="svg":c?b="canvas":e&&(b="vml"):"canvas"===a&&c?b="canvas":e&&(b="vml")}return b}}}(),function(){var a=jsPlumbUtil,b=function(a,b){y.CurrentLibrary.addClass(d(a),b)},c=function(a,b){y.CurrentLibrary.removeClass(d(a),b)},d=function(a){return y.CurrentLibrary.getElementObject(a)},e=function(a){return y.CurrentLibrary.getDOMElement(a)},f=function(a,b){var c=y.CurrentLibrary.getOffset(d(a));if(null!=b){var e=b.getZoom();return{left:c.left/e,top:c.top/e}}return c},g=function(a){return y.CurrentLibrary.getSize(d(a))},h=function(){return""+(new Date).getTime()},i=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};y.extend(b,a._jsPlumb.paintStyle),y.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},j=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],k={mouseout:"mouseexit"},l=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g>f;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},m=function(a){return null==a?null:a.split(" ")},n=function(b,c,d){if(b.getDefaultType){for(var e=b.getTypeDescriptor(),f=a.merge({},b.defaultType),g=0,h=b._jsPlumb.types.length;h>g;g++)f=a.merge(f,b._jsPlumb.instance.getType(b._jsPlumb.types[g],e));c&&(f=a.populate(f,c)),b.applyType(f,d),d||b.repaint()}},o=window.jsPlumbUIComponent=function(b){jsPlumbUtil.EventGenerator.apply(this,arguments);var c=this,d=arguments,e=c.idPrefix,f=e+(new Date).getTime(),g=y.CurrentLibrary;if(this._jsPlumb={instance:b._jsPlumb,parameters:b.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:b.beforeDetach,beforeDrop:b.beforeDrop,overlayPlacements:[],hoverClass:b.hoverClass||b._jsPlumb.Defaults.HoverClass||y.Defaults.HoverClass,types:[]},this.getId=function(){return f},b.events)for(var h in b.events)c.bind(h,b.events[h]);this.clone=function(){var a={};return this.constructor.apply(a,d),a}.bind(this),this.isDetachAllowed=function(b){var c=!0;if(this._jsPlumb.beforeDetach)try{c=this._jsPlumb.beforeDetach(b)}catch(d){a.log("jsPlumb: beforeDetach callback failed",d)}return c},this.isDropAllowed=function(b,c,d,e,f){var g=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f});if(this._jsPlumb.beforeDrop)try{g=this._jsPlumb.beforeDrop({sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f})}catch(h){a.log("jsPlumb: beforeDrop callback failed",h)}return g};var i=[],l=function(a,b,c){i.push([a,b,c]),a.bind(b,c)},m=[],n=function(a,b,c){var d=k[c]||c,e=function(a){b.fire(d,b,a)};m.push([a,c,e]),g.bind(a,c,e)},o=function(a,b,c){k[b]||b,g.unbind(a,b,c)};this.bindListeners=function(a,b,c){l(a,"click",function(a,c){b.fire("click",b,c)}),l(a,"dblclick",function(a,c){b.fire("dblclick",b,c)}),l(a,"contextmenu",function(a,c){b.fire("contextmenu",b,c)}),l(a,"mouseenter",function(a,d){b.isHover()||(c(!0),b.fire("mouseenter",b,d))}),l(a,"mouseexit",function(a,d){b.isHover()&&(c(!1),b.fire("mouseexit",b,d))}),l(a,"mousedown",function(a,c){b.fire("mousedown",b,c)}),l(a,"mouseup",function(a,c){b.fire("mouseup",b,c)})},this.unbindListeners=function(){for(var a=0;a<i.length;a++){var b=i[a];b[0].unbind(b[1],b[2])}i=null},this.attachListeners=function(a,b){for(var c=0,d=j.length;d>c;c++)n(a,b,j[c])},this.detachListeners=function(){for(var a=0;a<m.length;a++)o(m[a][0],m[a][1],m[a][2]);m=null},this.reattachListenersForElement=function(a){if(arguments.length>1){for(var b=0,c=j.length;c>b;b++)o(a,j[b]);for(b=1,c=arguments.length;c>b;b++)this.attachListeners(a,arguments[b])}}};jsPlumbUtil.extend(o,jsPlumbUtil.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},addClass:function(a){null!=this.canvas&&b(this.canvas,a)},removeClass:function(a){null!=this.canvas&&c(this.canvas,a)},setType:function(a,b,c){this._jsPlumb.types=m(a)||[],n(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){n(this,a,b)},hasType:function(a){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,a)},addType:function(a,b,c){var d=m(a),e=!1;if(null!=d){for(var f=0,g=d.length;g>f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&n(this,b,c)}},removeType:function(b,c){var d=m(b),e=!1,f=function(b){var c=a.indexOf(this._jsPlumb.types,b);return-1!=c?(this._jsPlumb.types.splice(c,1),!0):!1}.bind(this);if(null!=d){for(var g=0,h=d.length;h>g;g++)e=f(d[g])||e;e&&n(this,null,c)}},toggleType:function(a,b,c){var d=m(a);if(null!=d){for(var e=0,f=d.length;f>e;e++){var g=jsPlumbUtil.indexOf(this._jsPlumb.types,d[e]);-1!=g?this._jsPlumb.types.splice(g,1):this._jsPlumb.types.push(d[e])}n(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c])},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,i(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,i(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},cleanup:function(){this.unbindListeners(),this.detachListeners()},destroy:function(){this.cleanupListeners(),this.clone=null,this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,c){var d=y.CurrentLibrary;!this._jsPlumb||this._jsPlumb.instance.currentlyDragging||this._jsPlumb.instance.isHoverSuspended()||(this._jsPlumb.hover=a,null!=this.canvas&&null!=this._jsPlumb.instance.hoverClass&&d[a?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(c=c||h(),this.repaint({timestamp:c,recalc:!1}))),this.getAttachedElements&&!b&&l(this,a,h(),this))}});var p="__label",q=function(a,b){for(var c=-1,d=0,e=a._jsPlumb.overlays.length;e>d;d++)if(b===a._jsPlumb.overlays[d].id){c=d;break}return c},r=function(a,b){var c={cssClass:b.cssClass,labelStyle:a.labelStyle,id:p,component:a,_jsPlumb:a._jsPlumb.instance},d=y.extend(c,b);return new(y.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(d)},s=function(b,c){var d=null;if(a.isArray(c)){var e=c[0],f=y.extend({component:b,_jsPlumb:b._jsPlumb.instance},c[1]);3==c.length&&y.extend(f,c[2]),d=new(y.Overlays[b._jsPlumb.instance.getRenderMode()][e])(f)}else d=c.constructor==String?new(y.Overlays[b._jsPlumb.instance.getRenderMode()][c])({component:b,_jsPlumb:b._jsPlumb.instance}):c;b._jsPlumb.overlays.push(d)},t=function(a,b){var c=a.defaultOverlayKeys||[],d=b.overlays,e=function(b){return a._jsPlumb.instance.Defaults[b]||y.Defaults[b]||[]};d||(d=[]);for(var f=0,g=c.length;g>f;f++)d.unshift.apply(d,e(c[f]));return d},u=window.OverlayCapableJsPlumbUIComponent=function(a){o.apply(this,arguments),this._jsPlumb.overlays=[];var b=t(this,a);if(b)for(var c=0,d=b.length;d>c;c++)s(this,b[c]);if(a.label){var e=a.labelLocation||this.defaultLabelLocation||.5,f=a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle||y.Defaults.LabelStyle;this._jsPlumb.overlays.push(r(this,{label:a.label,location:e,labelStyle:f}))}};jsPlumbUtil.extend(u,o,{applyType:function(a,b){if(this.removeAllOverlays(b),a.overlays)for(var c=0,d=a.overlays.length;d>c;c++)this.addOverlay(a.overlays[c],!0)},setHover:function(a){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){s(this,a),b||this.repaint()},getOverlay:function(a){var b=q(this,a);return b>=0?this._jsPlumb.overlays[b]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length),this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a){var b=q(this,a);if(-1!=b){var c=this._jsPlumb.overlays[b];c.cleanup&&c.cleanup(),this._jsPlumb.overlays.splice(b,1),this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a]}},removeOverlays:function(){for(var a=0,b=arguments.length;b>a;a++)this.removeOverlay(arguments[a])},getLabel:function(){var a=this.getOverlay(p);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(p)},setLabel:function(a){var b=this.getOverlay(p);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=r(this,c),this._jsPlumb.overlays.push(b)}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(){for(var a=0;a<this._jsPlumb.overlays.length;a++)this._jsPlumb.overlays[a].cleanup(),this._jsPlumb.overlays[a].destroy();this._jsPlumb.overlays.splice(0),this._jsPlumb.overlayPositions=null},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{},this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null}});var v=0,w=function(){var a=v+1;return v++,a},x=window.jsPlumbInstance=function(i){this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},i&&y.extend(this.Defaults,i),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var j=this,k=w(),l=j.bind,m={},n=1,p=function(a){var b=e(a);return{el:b,id:jsPlumbUtil.isString(a)&&null==b?a:bb(b)}};this.getInstanceIndex=function(){return k},this.setZoom=function(a,b){n=a,b&&j.repaintEverything()},this.getZoom=function(){return n};for(var q in this.Defaults)m[q]=this.Defaults[q];this.bind=function(a,b){"ready"===a&&s?b():l.apply(j,[a,b])},j.importDefaults=function(a){for(var b in a)j.Defaults[b]=a[b];return j},j.restoreDefaults=function(){return j.Defaults=y.extend({},m),j};var r=null,s=!1,t=[],u={},v={},x={},z={},A={},B={},C=!1,D=[],E=!1,F=null,G=this.Defaults.Scope,H=null,I=1,J=function(){return""+I++},K=function(a,b){j.Defaults.Container?y.CurrentLibrary.appendElement(a,j.Defaults.Container):b?y.CurrentLibrary.appendElement(a,b):jsPlumbAdapter.appendToRoot(a)},L=function(a){return a._nodes?a._nodes:a},M=function(a,b,c,d){if(!jsPlumbAdapter.headless&&!E){var e=bb(a),f=j.dragManager.getElementsForDraggable(e);null==c&&(c=h());var g=_({elId:e,offset:b,recalc:!1,timestamp:c});if(f)for(var i in f)_({elId:f[i].id,offset:{left:g.o.left+f[i].offset.left,top:g.o.top+f[i].offset.top},recalc:!1,timestamp:c});if(j.anchorManager.redraw(e,b,c,null,d),f)for(var k in f)j.anchorManager.redraw(f[k].id,b,c,f[k].offset,d,!0)}},N=function(b,c){var e,f,g=null;if(a.isArray(b)){g=[];for(var h=0,i=b.length;i>h;h++)e=d(b[h]),f=j.getAttribute(e,"id"),g.push(c(e,f))}else e=d(b),f=j.getAttribute(e,"id"),g=c(e,f);return g},O=function(a){return v[a]},P=function(d,e,f){if(!jsPlumbAdapter.headless){var g=null==e?!1:e,h=y.CurrentLibrary;if(g&&h.isDragSupported(d)&&!h.isAlreadyDraggable(d)){var i=f||j.Defaults.DragOptions||y.Defaults.DragOptions;i=y.extend({},i);var k=h.dragEvents.drag,l=h.dragEvents.stop,m=h.dragEvents.start;i[m]=a.wrap(i[m],function(){j.setHoverSuspended(!0),j.select({source:d}).addClass(j.elementDraggingClass+" "+j.sourceElementDraggingClass,!0),j.select({target:d}).addClass(j.elementDraggingClass+" "+j.targetElementDraggingClass,!0),j.setConnectionBeingDragged(!0)}),i[k]=a.wrap(i[k],function(){var a=h.getUIPosition(arguments,j.getZoom());M(d,a,null,!0),b(d,"jsPlumb_dragged")}),i[l]=a.wrap(i[l],function(){var a=h.getUIPosition(arguments,j.getZoom());M(d,a),c(d,"jsPlumb_dragged"),j.setHoverSuspended(!1),j.select({source:d}).removeClass(j.elementDraggingClass+" "+j.sourceElementDraggingClass,!0),j.select({target:d}).removeClass(j.elementDraggingClass+" "+j.targetElementDraggingClass,!0),j.setConnectionBeingDragged(!1),j.dragManager.dragEnded(d)});var n=bb(d);B[n]=!0;var o=B[n];i.disabled=null==o?!1:!o,h.initDraggable(d,i,!1,j),j.dragManager.register(d)}}},Q=function(b,c){var d=y.extend({},b);if(c&&y.extend(d,c),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=e(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=e(d.target)),b.uuids&&(d.sourceEndpoint=O(b.uuids[0]),d.targetEndpoint=O(b.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return a.log(j,"could not add connection; source endpoint is full"),void 0;if(d.targetEndpoint&&d.targetEndpoint.isFull())return a.log(j,"could not add connection; target endpoint is full"),void 0;if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var f=0,g=d.sourceEndpoint.connectorOverlays.length;g>f;f++)d.overlays.push(d.sourceEndpoint.connectorOverlays[f])}!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h,i,k,l;if(d.target&&!d.target.endpoint&&!d.targetEndpoint&&!d.newConnection&&(h=bb(d.target),i=tb[h],k=ub[h],i)){if(!Eb[h])return;i.isTarget=!0,l=null!=k?k:j.addEndpoint(d.target,i),vb[h]&&(ub[h]=l),d.targetEndpoint=l,l._doNotDeleteOnDetach=!1,l._deleteOnDetach=!0}if(d.source&&!d.source.endpoint&&!d.sourceEndpoint&&!d.newConnection&&(h=bb(d.source),i=yb[h],k=zb[h],i)){if(!Bb[h])return;l=null!=k?k:j.addEndpoint(d.source,i),Ab[h]&&(zb[h]=l),d.sourceEndpoint=l,l._doNotDeleteOnDetach=!1,l._deleteOnDetach=!0}return d},R=function(a){var b=j.Defaults.ConnectionType||j.getDefaultConnectionType(),c=j.Defaults.EndpointType||y.Endpoint,d=y.CurrentLibrary.getParent;a.parent=a.container?a.container:a.sourceEndpoint?a.sourceEndpoint.parent:a.source.constructor==c?a.source.parent:d(a.source),a._jsPlumb=j,a.newConnection=R,a.newEndpoint=V,a.endpointsByUUID=v,a.endpointsByElement=u,a.finaliseConnection=S;var e=new b(a);return e.id="con_"+J(),T("click","click",e),T("dblclick","dblclick",e),T("contextmenu","contextmenu",e),e.isDetachable()&&(e.endpoints[0].initDraggable(),e.endpoints[1].initDraggable()),e},S=function(a,b,c,d){if(b=b||{},a.suspendedEndpoint||t.push(a),(null==a.suspendedEndpoint||d)&&j.anchorManager.newConnection(a),M(a.source),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var e={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};j.fire("connection",e,c)}},T=function(a,b,c){c.bind(a,function(a,d){j.fire(b,c,d)})},U=function(a){if(a.container)return a.container;var b=y.CurrentLibrary.getTagName(a.source),c=y.CurrentLibrary.getParent(a.source);return b&&"td"===b.toLowerCase()?y.CurrentLibrary.getParent(c):c},V=function(a){var b=j.Defaults.EndpointType||y.Endpoint,c=y.extend({},a);c.parent=U(c),c._jsPlumb=j,c.newConnection=R,c.newEndpoint=V,c.endpointsByUUID=v,c.endpointsByElement=u,c.finaliseConnection=S,c.fireDetachEvent=cb,c.fireMoveEvent=db,c.floatingConnections=A,c.getParentFromParams=U,c.elementId=bb(c.source);var d=new b(c);return d.id="ep_"+J(),T("click","endpointClick",d),T("dblclick","endpointDblClick",d),T("contextmenu","contextmenu",d),jsPlumbAdapter.headless||j.dragManager.endpointAdded(c.source),d},W=function(a,b,c){var d=u[a];if(d&&d.length)for(var e=0,f=d.length;f>e;e++){for(var g=0,h=d[e].connections.length;h>g;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},X=function(a,b){return N(a,function(a,c){B[c]=b,y.CurrentLibrary.isDragSupported(a)&&y.CurrentLibrary.setDraggable(a,b)})},Y=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=p(a);W(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},Z=function(a){return N(a,function(a,b){var c=null==B[b]?!1:B[b];return c=!c,B[b]=c,y.CurrentLibrary.setDraggable(a,c),c})},$=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),W(a,function(a){var b=a.isVisible();
a.setVisible(!b)},c)},_=function(a){var b,c=a.timestamp,e=a.recalc,h=a.offset,i=a.elId;return E&&!c&&(c=F),!e&&c&&c===z[i]?{o:a.offset||x[i],s:D[i]}:(e||!h?(b=d(i),null!=b&&(D[i]=g(b),x[i]=f(b,j),z[i]=c)):(x[i]=h,null==D[i]&&(b=d(i),null!=b&&(D[i]=g(b))),z[i]=c),x[i]&&!x[i].right&&(x[i].right=x[i].left+D[i][0],x[i].bottom=x[i].top+D[i][1],x[i].width=D[i][0],x[i].height=D[i][1],x[i].centerx=x[i].left+x[i].width/2,x[i].centery=x[i].top+x[i].height/2),{o:x[i],s:D[i]})},ab=function(a){var b=x[a];return b?{o:b,s:D[a]}:_({elId:a})},bb=function(a,b,c){if(jsPlumbUtil.isString(a))return a;if(null==a)return null;var d=jsPlumbAdapter.getAttribute(a,"id");return d&&"undefined"!==d||(2==arguments.length&&void 0!==arguments[1]?d=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(d="jsPlumb_"+k+"_"+J()),c||jsPlumbAdapter.setAttribute(a,"id",d)),d};this.setConnectionBeingDragged=function(a){C=a},this.isConnectionBeingDragged=function(){return C},this.connectorClass="_jsPlumb_connector",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={canvas:{},svg:{},vml:{}},this.Endpoints={canvas:{},svg:{},vml:{}},this.Overlays={canvas:{},svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.CANVAS="canvas",this.VML="vml",this.addEndpoint=function(b,c,d){d=d||{};var f=y.extend({},d);y.extend(f,c),f.endpoint=f.endpoint||j.Defaults.Endpoint||y.Defaults.Endpoint,f.paintStyle=f.paintStyle||j.Defaults.EndpointStyle||y.Defaults.EndpointStyle,b=L(b);for(var g=[],h=a.isArray(b)||null!=b.length&&!a.isString(b)?b:[b],i=0,k=h.length;k>i;i++){var l=e(h[i]),m=bb(l);f.source=l,_({elId:m,timestamp:F});var n=V(f);f.parentAnchor&&(n.parentAnchor=f.parentAnchor),a.addToList(u,m,n);var o=x[m],p=D[m],q=n.anchor.compute({xy:[o.left,o.top],wh:p,element:n,timestamp:F}),r={anchorLoc:q,timestamp:F};E&&(r.recalc=!1),E||n.paint(r),g.push(n),n._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(b,c,d){for(var e=[],f=0,g=c.length;g>f;f++){var h=j.addEndpoint(b,c[f],d);a.isArray(h)?Array.prototype.push.apply(e,h):e.push(h)}return e},this.animate=function(b,c,e){e=e||{};var f=d(b),g=bb(b),h=y.CurrentLibrary.dragEvents.step,i=y.CurrentLibrary.dragEvents.complete;e[h]=a.wrap(e[h],function(){j.repaint(g)}),e[i]=a.wrap(e[i],function(){j.repaint(g)}),y.CurrentLibrary.animate(f,c,e)},this.checkCondition=function(b,c){var d=j.getListener(b),e=!0;if(d&&d.length>0)try{for(var f=0,g=d.length;g>f;f++)e=e&&d[f](c)}catch(h){a.log(j,"cannot check condition ["+b+"]"+h)}return e},this.checkASyncCondition=function(b,c,d,e){var f=j.getListener(b);if(f&&f.length>0)try{f[0](c,d,e)}catch(g){a.log(j,"cannot asynchronously check condition ["+b+"]"+g)}},this.connect=function(a,b){var c,d=Q(a,b);return d&&(c=R(d),S(c,d)),c},this.deleteEndpoint=function(a,b){var c=j.setSuspendDrawing(!0),d="string"==typeof a?v[a]:a;return d&&j.deleteObject({endpoint:d}),c||j.setSuspendDrawing(!1,b),j},this.deleteEveryEndpoint=function(){var a=j.setSuspendDrawing(!0);for(var b in u){var c=u[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)j.deleteEndpoint(c[d],!0)}return u={},v={},j.anchorManager.reset(),j.dragManager.reset(),a||j.setSuspendDrawing(!1),j};var cb=function(a,b,c){var d=j.Defaults.ConnectionType||j.getDefaultConnectionType(),e=a.constructor==d,f=e?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&j.fire("connectionDetached",f,c),j.anchorManager.connectionDetached(f)},db=function(a,b){j.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(v[a._jsPlumb.uuid]=null),j.anchorManager.deleteEndpoint(a);for(var b in u){var c=u[b];if(c){for(var d=[],e=0,f=c.length;f>e;e++)c[e]!=a&&d.push(c[e]);u[b]=d}u[b].length<1&&delete u[b]}},this.detach=function(){if(0!==arguments.length){var a=j.Defaults.ConnectionType||j.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length?b?arguments[1]||{}:arguments[0]:arguments[0],d=c.fireEvent!==!1,f=c.forceDetach,g=b?arguments[0]:c.connection;if(g)(f||jsPlumbUtil.functionChain(!0,!1,[[g.endpoints[0],"isDetachAllowed",[g]],[g.endpoints[1],"isDetachAllowed",[g]],[g,"isDetachAllowed",[g]],[j,"checkCondition",["beforeDetach",g]]]))&&g.endpoints[0].detach(g,!1,!0,d);else{var h=y.extend({},c);if(h.uuids)O(h.uuids[0]).detachFrom(O(h.uuids[1]),d);else if(h.sourceEndpoint&&h.targetEndpoint)h.sourceEndpoint.detachFrom(h.targetEndpoint);else{var i=bb(e(h.source)),k=bb(e(h.target));W(i,function(a){(a.sourceId==i&&a.targetId==k||a.targetId==i&&a.sourceId==k)&&j.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=e(a);var c=bb(a),d=u[c];if(d&&d.length)for(var f=0,g=d.length;g>f;f++)d[f].detachAll(b.fireEvent!==!1);return j},this.detachEveryConnection=function(a){return a=a||{},j.doWhileSuspended(function(){for(var b in u){var c=u[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)c[d].detachAll(a.fireEvent!==!1)}t.splice(0)}),j},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},c=a.fireEvent!==!1,d=a.deleteAttachedObjects!==!1,e=function(a){if(null!=a&&null==b.connections[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.connections[a.id]=a,b.connectionCount++,d))for(var c=0;c<a.endpoints.length;c++)a.endpoints[c]._deleteOnDetach&&f(a.endpoints[c])},f=function(a){if(null!=a&&null==b.endpoints[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.endpoints[a.id]=a,b.endpointCount++,d))for(var c=0;c<a.connections.length;c++){var f=a.connections[c];e(f)}};a.connection?e(a.connection):f(a.endpoint);for(var g in b.connections){var h=b.connections[g];h.endpoints[0].detachFromConnection(h),h.endpoints[1].detachFromConnection(h),jsPlumbUtil.removeWithFunction(t,function(a){return h.id==a.id}),cb(h,c,a.originalEvent),h.cleanup(),h.destroy()}for(var i in b.endpoints){var k=b.endpoints[i];j.unregisterEndpoint(k),k.cleanup(),k.destroy()}return b},this.draggable=function(a,b){var c,d,f;if("object"==typeof a&&a.length)for(c=0,d=a.length;d>c;c++)f=e(a[c]),f&&P(f,!0,b);else if(a._nodes)for(c=0,d=a._nodes.length;d>c;c++)f=e(a._nodes[c]),f&&P(f,!0,b);else f=e(a),f&&P(f,!0,b);return j},this.extend=function(a,b){return y.CurrentLibrary.extend(a,b)};var eb=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++)a[e][b].apply(a[e],c);return d(a)},fb=function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},gb=function(a,b,c){return function(){return eb(a,b,arguments,c)}},hb=function(a,b){return function(){return fb(a,b,arguments)}},ib=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(a=d(a),b)c=a;else for(var e=0,f=a.length;f>e;e++)c.push(p(a[e]).id);return c},jb=function(a,b,c){return"*"===a?!0:a.length>0?-1!=jsPlumbUtil.indexOf(a,b):!c};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var c=a.scope||j.getDefaultScope(),d=ib(c,!0),e=ib(a.source),f=ib(a.target),g=!b&&d.length>1?{}:[],h=function(a,c){if(!b&&d.length>1){var e=g[a];null==e&&(e=g[a]=[]),e.push(c)}else g.push(c)},i=0,k=t.length;k>i;i++){var l=t[i];jb(d,l.scope)&&jb(e,l.sourceId)&&jb(f,l.targetId)&&h(l.scope,l)}return g};var kb=function(a,b){return function(c){for(var d=0,e=a.length;e>d;d++)c(a[d]);return b(a)}},lb=function(a){return function(b){return a[b]}},mb=function(a,b){var c,d,e={length:a.length,each:kb(a,b),get:lb(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;d>c;c++)e[f[c]]=gb(a,f[c],b);for(c=0,d=g.length;d>c;c++)e[g[c]]=hb(a,g[c]);return e},nb=function(a){var b=mb(a,nb);return y.CurrentLibrary.extend(b,{setDetachable:gb(a,"setDetachable",nb),setReattach:gb(a,"setReattach",nb),setConnector:gb(a,"setConnector",nb),detach:function(){for(var b=0,c=a.length;c>b;b++)j.detach(a[b])},isDetachable:hb(a,"isDetachable"),isReattach:hb(a,"isReattach")})},ob=function(a){var b=mb(a,ob);return y.CurrentLibrary.extend(b,{setEnabled:gb(a,"setEnabled",ob),setAnchor:gb(a,"setAnchor",ob),isEnabled:hb(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;c>b;b++)a[b].detachAll()},remove:function(){for(var b=0,c=a.length;c>b;b++)j.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",nb(a.connections||j.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":ib(a.element),d=b?"*":ib(a.source),e=b?"*":ib(a.target),f=ib(a.scope,!0),g=[];for(var h in u){var i=jb(c,h,!0),j=jb(d,h,!0),k="*"!=d,l=jb(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=u[h].length;o>n;n++){var p=u[h][n];if(jb(f,p.scope,!0)){var q=k&&d.length>0&&!p.isSource,r=m&&e.length>0&&!p.isTarget;if(q||r)continue a;g.push(p)}}}return ob(g)},this.getAllConnections=function(){return t},this.getDefaultScope=function(){return G},this.getEndpoint=O,this.getEndpoints=function(a){return u[p(a).id]},this.getDefaultEndpointType=function(){return y.Endpoint},this.getDefaultConnectionType=function(){return y.Connection},this.getId=bb,this.getOffset=function(a){return x[a],_({elId:a})},this.getSelector=function(){return y.CurrentLibrary.getSelector.apply(null,arguments)},this.getSize=function(a){var b=D[a];return b||_({elId:a}),D[a]},this.appendElement=K;var pb=!1;this.isHoverSuspended=function(){return pb},this.setHoverSuspended=function(a){pb=a};var qb=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isCanvasAvailable=qb("canvas"),this.isSVGAvailable=qb("svg"),this.isVMLAvailable=qb("vml"),this.hide=function(a,b){return Y(a,"none",b),j},this.idstamp=J,this.connectorsInitialized=!1;var rb=[],sb=["canvas","svg","vml"];this.registerConnectorType=function(a,b){rb.push([a,b])},this.init=function(){var a=function(a,b,c){y.Connectors[a][b]=function(){c.apply(this,arguments),y.ConnectorRenderers[a].apply(this,arguments)},jsPlumbUtil.extend(y.Connectors[a][b],[c,y.ConnectorRenderers[a]])};if(!y.connectorsInitialized){for(var b=0;b<rb.length;b++)for(var c=0;c<sb.length;c++)a(sb[c],rb[b][1],rb[b][0]);y.connectorsInitialized=!0}s||(j.anchorManager=new y.AnchorManager({jsPlumbInstance:j}),j.setRenderMode(j.Defaults.RenderMode),s=!0,j.fire("ready",j))}.bind(this),this.log=r,this.jsPlumbUIComponent=o,this.makeAnchor=function(){var b,c=function(a,b){if(y.Anchors[a])return new y.Anchors[a](b);if(!j.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],e=arguments[1],f=arguments[2],g=null;if(d.compute&&d.getOrientation)return d;if("string"==typeof d)g=c(arguments[0],{elementId:e,jsPlumbInstance:j});else if(a.isArray(d))if(a.isArray(d[0])||a.isString(d[0]))2==d.length&&a.isObject(d[1])?a.isString(d[0])?(b=y.extend({elementId:e,jsPlumbInstance:j},d[1]),g=c(d[0],b)):(b=y.extend({elementId:e,jsPlumbInstance:j,anchors:d[0]},d[1]),g=new y.DynamicAnchor(b)):g=new y.DynamicAnchor({anchors:d,selector:null,elementId:e,jsPlumbInstance:f});else{var h={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:e,jsPlumbInstance:f,cssClass:7==d.length?d[6]:null};g=new y.Anchor(h),g.clone=function(){return new y.Anchor(h)}}return g.id||(g.id="anchor_"+J()),g},this.makeAnchors=function(b,c,d){for(var e=[],f=0,g=b.length;g>f;f++)"string"==typeof b[f]?e.push(y.Anchors[b[f]]({elementId:c,jsPlumbInstance:d})):a.isArray(b[f])&&e.push(j.makeAnchor(b[f],c,d));return e},this.makeDynamicAnchor=function(a,b){return new y.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:j})};var tb={},ub={},vb={},wb={},xb=function(a,b){a.paintStyle=a.paintStyle||j.Defaults.EndpointStyles[b]||j.Defaults.EndpointStyle||y.Defaults.EndpointStyles[b]||y.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||j.Defaults.EndpointHoverStyles[b]||j.Defaults.EndpointHoverStyle||y.Defaults.EndpointHoverStyles[b]||y.Defaults.EndpointHoverStyle,a.anchor=a.anchor||j.Defaults.Anchors[b]||j.Defaults.Anchor||y.Defaults.Anchors[b]||y.Defaults.Anchor,a.endpoint=a.endpoint||j.Defaults.Endpoints[b]||j.Defaults.Endpoint||y.Defaults.Endpoints[b]||y.Defaults.Endpoint},yb={},zb={},Ab={},Bb={},Cb={},Db={},Eb={},Fb=function(a,b,c){for(var d=a.target||a.srcElement,e=!1,f=j.getSelector(b,c),g=0;g<f.length;g++)if(f[g]==d){e=!0;break}return e};this.makeTarget=function(b,c,e){var h=y.extend({_jsPlumb:j},e);y.extend(h,c),xb(h,1);var i=y.CurrentLibrary,k=h.scope||j.Defaults.Scope,l=!(h.deleteEndpointsOnDetach===!1),m=h.maxConnections||-1,n=h.onMaxConnections,q=function(b){var c=p(b),e=c.id,q=new o(h),r=y.extend({},h.dropOptions||{});tb[e]=h,vb[e]=h.uniqueEndpoint,wb[e]=m,Eb[e]=!0;var s=function(){j.currentlyDragging=!1;var a=y.CurrentLibrary.getDropEvent(arguments),b=j.select({target:e}).length,k=d(i.getDragObject(arguments)),m=j.getAttribute(k,"dragId"),o=j.getAttribute(k,"originalScope"),p=A[m],r=p.endpoints[0].isFloating()?0:1,s=p.endpoints[0];if(h.endpoint?y.extend({},h.endpoint):{},!Eb[e]||wb[e]>0&&b>=wb[e])return n&&n({element:c.el,connection:p},a),!1;if(s.anchor.locked=!1,o&&i.setDragScope(k,o),null==p.suspendedEndpoint&&!p.pending)return!1;var t=q.isDropAllowed(0===r?e:p.sourceId,0===r?p.targetId:e,p.scope,p,null);if(p.suspendedEndpoint&&(p[r?"targetId":"sourceId"]=p.suspendedEndpoint.elementId,p[r?"target":"source"]=p.suspendedEndpoint.element,p.endpoints[r]=p.suspendedEndpoint),t){var u=i.getElementObject(c.el),v=ub[e];if((null==v||null==v._jsPlumb)&&(v=j.addEndpoint(u,h)),h.uniqueEndpoint&&(ub[e]=v),v._doNotDeleteOnDetach=!1,v._deleteOnDetach=!0,null!=v.anchor.positionFinder){var w=i.getUIPosition(arguments,j.getZoom()),x=f(u,j),z=g(u),B=v.anchor.positionFinder(w,x,z,v.anchor.constructorParams);v.anchor.x=B[0],v.anchor.y=B[1]}p[r?"target":"source"]=v.element,p[r?"targetId":"sourceId"]=v.elementId,p.endpoints[r].detachFromConnection(p),p.endpoints[r]._deleteOnDetach&&(p.endpoints[r].deleteAfterDragStop=!0),v.addConnection(p),p.endpoints[r]=v,p.deleteEndpointsOnDetach=l,1==r?j.anchorManager.updateOtherEndpoint(p.sourceId,p.suspendedElementId,p.targetId,p):j.anchorManager.sourceChanged(p.suspendedEndpoint.elementId,p.sourceId,p),S(p,null,a),p.pending=!1}else p.suspendedEndpoint&&(p.isReattach()?(p.setHover(!1),p.floatingAnchorIndex=null,p.suspendedEndpoint.addConnection(p),j.repaint(s.elementId)):s.detach(p,!1,!0,!0,a))},t=i.dragEvents.drop;r.scope=r.scope||k,r[t]=a.wrap(r[t],s),i.initDroppable(d(c.el),r,!0)};b=L(b);for(var r=b.length&&b.constructor!=String?b:[b],s=0,t=r.length;t>s;s++)q(r[s]);return j},this.unmakeTarget=function(a,b){var c=p(a);return y.CurrentLibrary.destroyDroppable(c.el),b||(delete tb[c.id],delete vb[c.id],delete wb[c.id],delete Eb[c.id]),j},this.makeSource=function(b,c,h){var i=y.extend({},h);y.extend(i,c),xb(i,0);var k=y.CurrentLibrary,l=i.maxConnections||-1,m=i.onMaxConnections,n=function(b){var c=b.id,h=d(b.el),n=function(){return null==i.parent?null:"parent"===i.parent?b.el.parentNode:e(i.parent)},o=null!=i.parent?j.getId(n()):c;yb[o]=i,Ab[o]=i.uniqueEndpoint,Bb[o]=!0;var p=k.dragEvents.stop,q=k.dragEvents.drag,r=y.extend({},i.dragOptions||{}),s=r.drag,t=r.stop,u=null,v=!1;Db[o]=l,r.scope=r.scope||i.scope,r[q]=a.wrap(r[q],function(){s&&s.apply(this,arguments),v=!1}),r[p]=a.wrap(r[p],function(){if(t&&t.apply(this,arguments),j.currentlyDragging=!1,null!=u._jsPlumb){k.unbind(u.canvas,"mousedown");var a=i.anchor||j.Defaults.Anchor,b=u.anchor,d=u.connections[0],e=j.makeAnchor(a,c,j),h=u.element;if(null!=e.positionFinder){var l=f(h,j),m=g(h),o={left:l.left+b.x*m[0],top:l.top+b.y*m[1]},p=e.positionFinder(o,l,m,e.constructorParams);e.x=p[0],e.y=p[1]}if(u.setAnchor(e,!0),i.parent){var q=n();if(q){var r=i.container||j.Defaults.Container||y.Defaults.Container;u.setElement(q,r)}}u.repaint(),j.repaint(u.elementId),j.repaint(d.targetId)}});var w=function(a){if(Bb[o]){if(i.filter){var b=k.getOriginalEvent(a),d=jsPlumbUtil.isString(i.filter)?Fb(b,h,i.filter):i.filter(b,h);if(d===!1)return}var e=j.select({source:o}).length;if(Db[o]>=0&&e>=Db[o])return m&&m({element:h,maxConnections:l},a),!1;var f=_({elId:c}).o,g=j.getZoom(),p=((a.pageX||a.page.x)/g-f.left)/f.width,q=((a.pageY||a.page.y)/g-f.top)/f.height,s=p,t=q;if(i.parent){var w=n(),x=bb(w);f=_({elId:x}).o,s=((a.pageX||a.page.x)-f.left)/f.width,t=((a.pageY||a.page.y)-f.top)/f.height}var z={};if(y.extend(z,i),z.isSource=!0,z.anchor=[p,q,0,0],z.parentAnchor=[s,t,0,0],z.dragOptions=r,i.parent){var A=z.container||j.Defaults.Container||y.Defaults.Container;z.container=A?A:y.CurrentLibrary.getParent(n())}u=j.addEndpoint(c,z),v=!0,u.endpointWillMoveAfterConnection=null!=i.parent,u.endpointWillMoveTo=i.parent?n():null,u._doNotDeleteOnDetach=!1,u._deleteOnDetach=!0;var B=function(){v&&(v=!1,j.deleteEndpoint(u))};j.registerListener(u.canvas,"mouseup",B),j.registerListener(h,"mouseup",B),k.trigger(u.canvas,"mousedown",a)}};j.registerListener(h,"mousedown",w),Cb[c]=w,i.filter&&jsPlumbUtil.isString(i.filter)&&k.setDragFilter(h,i.filter)};b=L(b);for(var o=b.length&&b.constructor!=String?b:[b],q=0,r=o.length;r>q;q++)n(p(o[q]));return j},this.unmakeSource=function(a,b){var c=p(a),d=Cb[c.id];return d&&j.unregisterListener(c.el,"mousedown",d),b||(delete yb[c.id],delete Ab[c.id],delete Bb[c.id],delete Cb[c.id],delete Db[c.id]),j},this.unmakeEverySource=function(){for(var a in Bb)j.unmakeSource(a,!0);yb={},Ab={},Bb={},Cb={}},this.unmakeEveryTarget=function(){for(var a in Eb)j.unmakeTarget(a,!0);return tb={},vb={},wb={},Eb={},j};var Gb=function(b,c,d,e){var f="source"==b?Bb:Eb;if(c=L(c),a.isString(c))f[c]=e?!f[c]:d;else if(c.length)for(var g=0,h=c.length;h>g;g++){var i=p(c[g]);f[i.id]=e?!f[i.id]:d}return j};this.toggleSourceEnabled=function(a){return Gb("source",a,null,!0),j.isSourceEnabled(a)},this.setSourceEnabled=function(a,b){return Gb("source",a,b)},this.isSource=function(a){return null!=Bb[p(a).id]},this.isSourceEnabled=function(a){return Bb[p(a).id]===!0},this.toggleTargetEnabled=function(a){return Gb("target",a,null,!0),j.isTargetEnabled(a)},this.isTarget=function(a){return null!=Eb[p(a).id]},this.isTargetEnabled=function(a){return Eb[p(a).id]===!0},this.setTargetEnabled=function(a,b){return Gb("target",a,b)},this.ready=function(a){j.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a&&a.length)for(var d=0,e=a.length;e>d;d++)M(a[d],b,c);else M(a,b,c);return j},this.repaintEverything=function(a){var b=h();for(var c in u)M(c,null,b,a);return j},this.removeAllEndpoints=function(a,b){var c=function(a){var d,e,f=p(a),g=u[f.id];if(g)for(d=0,e=g.length;e>d;d++)j.deleteEndpoint(g[d]);if(delete u[f.id],b&&f.el&&3!=f.el.nodeType&&8!=f.el.nodeType)for(d=0,e=f.el.childNodes.length;e>d;d++)c(f.el.childNodes[d])};return c(a),j},this.remove=function(a,b){var c=p(a);j.doWhileSuspended(function(){j.removeAllEndpoints(c.id,!0),j.dragManager.elementRemoved(c.id),delete A[c.id],j.anchorManager.clearFor(c.id),j.anchorManager.removeFloatingConnection(c.id)},b===!1),c.el&&y.CurrentLibrary.removeElement(c.el)};var Hb={},Ib=function(){for(var a in Hb)for(var b=0,c=Hb[a].length;c>b;b++){var d=Hb[a][b];y.CurrentLibrary.unbind(d.el,d.event,d.listener)}Hb={}};this.registerListener=function(a,b,c){y.CurrentLibrary.bind(a,b,c),jsPlumbUtil.addToList(Hb,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,c){y.CurrentLibrary.unbind(a,b,c),jsPlumbUtil.removeWithFunction(Hb,function(a){return a.type==b&&a.listener==c})},this.reset=function(){j.deleteEveryEndpoint(),j.unbind(),tb={},ub={},vb={},wb={},yb={},zb={},Ab={},Db={},t.splice(0),Ib(),j.anchorManager.reset(),jsPlumbAdapter.headless||j.dragManager.reset()},this.setDefaultScope=function(a){return G=a,j},this.setDraggable=X,this.setId=function(a,b,c){var d;jsPlumbUtil.isString(a)?d=a:(a=e(a),d=j.getId(a));var f=j.getConnections({source:d,scope:"*"},!0),g=j.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=e(b):(a=e(d),jsPlumbAdapter.setAttribute(a,"id",b)),u[b]=u[d]||[];for(var h=0,i=u[b].length;i>h;h++)u[b][h].setElementId(b),u[b][h].setReferenceElement(a);delete u[d],j.anchorManager.changeId(d,b),jsPlumbAdapter.headless||j.dragManager.changeId(d,b);var k=function(c,d,e){for(var f=0,g=c.length;g>f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};k(f,0,"source"),k(g,1,"target"),j.repaint(b)},this.setDebugLog=function(a){r=a},this.setSuspendDrawing=function(a,b){var c=E;return E=a,F=a?(new Date).getTime():null,b&&j.repaintEverything(),c},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return F},this.doWhileSuspended=function(b,c){var d=j.isSuspendDrawing();d||j.setSuspendDrawing(!0);try{b()}catch(e){a.log("Function run while suspended failed",e)}d||j.setSuspendDrawing(!1,!c)},this.updateOffset=_,this.getOffset=function(a){return x[a]},this.getSize=function(a){return D[a]},this.getCachedData=ab,this.timestamp=h,this.setRenderMode=function(a){H=jsPlumbAdapter.setRenderMode(a);var b,c;if(H==y.CANVAS){var d=function(a){y.CurrentLibrary.bind(document,a,function(d){if(!j.currentlyDragging&&H==y.CANVAS){for(b=0,c=t.length;c>b;b++){var e=t[b].getConnector()[a](d);if(e)return}for(var f in u){var g=u[f];for(b=0,c=g.length;c>b;b++)if(g[b].endpoint[a]&&g[b].endpoint[a](d))return}}})};d("click"),d("dblclick"),d("mousemove"),d("mousedown"),d("mouseup"),d("contextmenu")}return H},this.getRenderMode=function(){return H},this.show=function(a,b){return Y(a,"block",b),j},this.getTestHarness=function(){return{endpointsByElement:u,endpointCount:function(a){var b=u[a];return b?b.length:0},connectionCount:function(a){a=a||G;var b=j.getConnections({scope:a});return b?b.length:0},getId:bb,makeAnchor:self.makeAnchor,makeDynamicAnchor:self.makeDynamicAnchor}},this.toggleVisible=$,this.toggleDraggable=Z,this.addListener=this.bind,this.adjustForParentOffsetAndScroll=function(a,b){var c=null,d=a;if("svg"===b.tagName.toLowerCase()&&b.parentNode?c=b.parentNode:b.offsetParent&&(c=b.offsetParent),null!=c){var e="body"===c.tagName.toLowerCase()?{left:0,top:0}:f(c,j),g="body"===c.tagName.toLowerCase()?{left:0,top:0}:{left:c.scrollLeft,top:c.scrollTop};d[0]=a[0]-e.left+g.left,d[1]=a[1]-e.top+g.top}return d},jsPlumbAdapter.headless||(j.dragManager=jsPlumbAdapter.getDragManager(j),j.recalculateOffsets=j.dragManager.updateOffsets)};jsPlumbUtil.extend(x,jsPlumbUtil.EventGenerator,{setAttribute:function(a,b,c){jsPlumbAdapter.setAttribute(a,b,c)},getAttribute:function(a,b){return jsPlumbAdapter.getAttribute(y.CurrentLibrary.getDOMElement(a),b)},registerConnectionType:function(a,b){this._connectionTypes[a]=y.extend({},b)},registerConnectionTypes:function(a){for(var b in a)this._connectionTypes[b]=y.extend({},a[b])},registerEndpointType:function(a,b){this._endpointTypes[a]=y.extend({},b)},registerEndpointTypes:function(a){for(var b in a)this._endpointTypes[b]=y.extend({},a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=y.CurrentLibrary,d=c.getElementObject(a),e=c.getDOMElement(d),f=this.getId(e),g=c.getElementObject(b),h=c.getDOMElement(g),i=this.getId(h);e.parentNode.removeChild(e),h.appendChild(e),this.dragManager.setParent(d,f,g,i)}});var y=new x;"undefined"!=typeof window&&(window.jsPlumb=y),y.getInstance=function(a){var b=new x(a);return b.init(),b},"function"==typeof define&&(define("jsplumb",[],function(){return y}),define("jsplumbinstance",[],function(){return y.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=y)}(),function(){var a=function(a,b){var c=!1;return{drag:function(){if(c)return c=!1,!0;var d=jsPlumb.CurrentLibrary.getUIPosition(arguments,b.getZoom());a.element&&(jsPlumb.CurrentLibrary.setOffset(a.element,d),b.repaint(a.element,d))},stopDrag:function(){c=!0}}},b=function(a,b,c){var d=document.createElement("div");d.style.position="absolute",jsPlumb.CurrentLibrary.getElementObject(d),jsPlumb.CurrentLibrary.appendElement(d,b);var e=c.getId(d);c.updateOffset({elId:e}),a.id=e,a.element=d},c=function(a,b,c,d,e,f,g){var h=new jsPlumb.FloatingAnchor({reference:b,referenceCanvas:d,jsPlumbInstance:f});return g({paintStyle:a,endpoint:c,anchor:h,source:e,scope:"__floating"})},d=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],e=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]},f=function(a,b){return jsPlumbUtil.findWithFunction(b.connections,function(b){return b.id==a.id})};jsPlumb.Endpoint=function(g){var h=g._jsPlumb,i=jsPlumb.CurrentLibrary,j=(jsPlumbAdapter.getAttribute,i.getElementObject),k=i.getDOMElement,l=jsPlumbUtil,m=g.newConnection,n=g.newEndpoint,o=g.finaliseConnection,p=(g.fireDetachEvent,g.fireMoveEvent),q=g.floatingConnections;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],this.parent=g.parent,OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:g.connectorStyle,connectorHoverStyle:g.connectorHoverStyle,connectorClass:g.connectorClass,connectorHoverClass:g.connectorHoverClass,connectorOverlays:g.connectorOverlays,connector:g.connector,connectorTooltip:g.connectorTooltip}},this._jsPlumb.enabled=!(g.enabled===!1),this._jsPlumb.visible=!0,this.element=k(g.source),this._jsPlumb.uuid=g.uuid,this._jsPlumb.floatingEndpoint=null;var r=null;this._jsPlumb.uuid&&(g.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=g.elementId,this._jsPlumb.connectionCost=g.connectionCost,this._jsPlumb.connectionsDirected=g.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var s=function(){i.removeClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.removeClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this._jsPlumb.currentAnchorClass=this.anchor.getCssClass(),this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),i.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass)}.bind(this);this.setAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(a,this.elementId,h),s(),this.anchor.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),s()}.bind(this)),b||this._jsPlumb.instance.repaint(this.elementId),this};var t=g.anchor?g.anchor:g.anchors?g.anchors:h.Defaults.Anchor||"Top";this.setAnchor(t,!0);var u=function(a){this.connections.length>0?this.connections[0].setHover(a,!1):this.setHover(a)}.bind(this);g._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(a){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy());var b=function(a,b){var c=h.getRenderMode();if(jsPlumb.Endpoints[c][a])return new jsPlumb.Endpoints[c][a](b);if(!h.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},c={_jsPlumb:this._jsPlumb.instance,cssClass:g.cssClass,parent:g.parent,container:g.container,tooltip:g.tooltip,connectorTooltip:g.connectorTooltip,endpoint:this};l.isString(a)?this.endpoint=b(a,c):l.isArray(a)?(c=l.merge(a[1],c),this.endpoint=b(a[0],c)):this.endpoint=a.clone(),jsPlumb.extend({},c),this.endpoint.clone=function(){return l.isString(a)?b(a,c):l.isArray(a)?(c=l.merge(a[1],c),b(a[0],c)):void 0}.bind(this),this.type=this.endpoint.type,this.bindListeners(this.endpoint,this,u)},this.setEndpoint(g.endpoint||h.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot"),this.setPaintStyle(g.paintStyle||g.style||h.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(g.hoverPaintStyle||h.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),l.copyValues(d,g,this),this.isSource=g.isSource||!1,this.isTarget=g.isTarget||!1,this._jsPlumb.maxConnections=g.maxConnections||h.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),i.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.connections=g.connections||[],this.connectorPointerEvents=g["connector-pointer-events"],this.scope=g.scope||h.getDefaultScope(),this.timestamp=null,this.reattachConnections=g.reattach||h.Defaults.ReattachConnections,this.connectionsDetachable=h.Defaults.ConnectionsDetachable,(g.connectionsDetachable===!1||g.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=g.dragAllowedWhenFull||!0,g.onMaxConnections&&this.bind("maxConnections",g.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)},this.detachFromConnection=function(a,b){b=null==b?f(a,this):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass))},this.detach=function(a,b,c,d,e,g,i){var j=null==i?f(a,this):i,k=!1;return d=d!==!1,j>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a))&&(h.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e}),k=!0),k},this.detachAll=function(a,b){for(;this.connections.length>0;)this.detach(this.connections[0],!1,!0,a!==!1,b,this,0);return this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&&d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(a){var b=this._jsPlumb.instance.getId(a),c=this.elementId;return l.removeWithFunction(g.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=k(a),this.elementId=h.getId(this.element),h.anchorManager.rehomeEndpoint(this,c,this.element),h.dragManager.endpointAdded(this.element),l.addToList(g.endpointsByElement,b,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),b=this.anchor.getOrientation(this),c=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[a[0],a[1]]
},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b},getCssClass:function(){return c}};return n({anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:g.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope})},this.isFloating=function(){return null!=this.anchor&&this.anchor.isFloating},this.connectorSelector=function(){var a=this.connections[0];return this.isTarget&&a?a:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=h.updateOffset({elId:this.elementId,timestamp:b}),f=a.offset?a.offset.o:d.o;if(null!=f){var g=a.anchorPoint,i=a.connectorPaintStyle;if(null==g){var j=a.dimensions||d.s,k={xy:[f.left,f.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=e(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=h.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}g=this.anchor.compute(k)}this.endpoint.compute(g,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,i||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r=0;r<this._jsPlumb.overlays.length;r++){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.repaint=this.paint;var v=!1;this.initDraggable=function(){if(!v&&i.isDragSupported(this.element)){var d={id:null,element:null},e=null,f=!1,k=null,o=a(d,h),p=function(){e=this.connectorSelector();var a=!0;if(this.isEnabled()||(a=!1),null!=e||this.isSource||(a=!1),this.isSource&&this.isFull()&&!this.dragAllowedWhenFull&&(a=!1),null==e||e.isDetachable()||(a=!1),a===!1)return i.stopDrag&&i.stopDrag(),o.stopDrag(),!1;for(var p=0;p<this.connections.length;p++)this.connections[p].setHover(!1);this.addClass("endpointDrag"),h.setConnectionBeingDragged(!0),e&&!this.isFull()&&this.isSource&&(e=null),h.updateOffset({elId:this.elementId}),r=this.makeInPlaceCopy(),r.referenceEndpoint=this,r.paint(),b(d,this.parent,h);var s=j(r.canvas),t=jsPlumb.CurrentLibrary.getOffset(s,h),u=h.adjustForParentOffsetAndScroll([t.left,t.top],r.canvas),v=j(this.canvas);if(i.setOffset(d.element,{left:u[0],top:u[1]}),this.parentAnchor&&(this.anchor=h.makeAnchor(this.parentAnchor,this.elementId,h)),h.setAttribute(this.canvas,"dragId",d.id),h.setAttribute(this.canvas,"elId",this.elementId),this._jsPlumb.floatingEndpoint=c(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,d.element,h,n),this.canvas.style.visibility="hidden",null==e)this.anchor.locked=!0,this.setHover(!1,!1),e=m({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:d.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:g.connectorStyle,hoverPaintStyle:g.connectorHoverStyle,connector:g.connector,overlays:g.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),e.pending=!0,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass),h.fire("connectionDrag",e);else{f=!0,e.setHover(!1),w(s,!1,!0);var x=e.endpoints[0].id==this.id?0:1;e.floatingAnchorIndex=x,this.detachFromConnection(e);var y=jsPlumb.CurrentLibrary.getDragScope(v);h.setAttribute(this.canvas,"originalScope",y);var z=i.getDropScope(v);i.setDragScope(v,z),h.fire("connectionDrag",e),0===x?(k=[e.source,e.sourceId,v,y],e.source=d.element,e.sourceId=d.id):(k=[e.target,e.targetId,v,y],e.target=d.element,e.targetId=d.id),e.endpoints[0===x?1:0].anchor.locked=!0,e.suspendedEndpoint=e.endpoints[x],e.suspendedElement=e.endpoints[x].getElement(),e.suspendedElementId=e.endpoints[x].elementId,e.suspendedElementType=0===x?"source":"target",e.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=e.suspendedEndpoint,e.endpoints[x]=this._jsPlumb.floatingEndpoint,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass)}q[d.id]=e,h.anchorManager.addFloatingConnection(d.id,e),l.addToList(g.endpointsByElement,d.id,this._jsPlumb.floatingEndpoint),h.currentlyDragging=!0}.bind(this),s=g.dragOptions||{},t=jsPlumb.extend({},i.defaultDragOptions),u=i.dragEvents.start,x=i.dragEvents.stop,y=i.dragEvents.drag;s=jsPlumb.extend(t,s),s.scope=s.scope||this.scope,s[u]=l.wrap(s[u],p,!1),s[y]=l.wrap(s[y],o.drag),s[x]=l.wrap(s[x],function(){if(h.setConnectionBeingDragged(!1),null!=e.endpoints){var a=i.getDropEvent(arguments),b=null==e.floatingAnchorIndex?1:e.floatingAnchorIndex;e.endpoints[0===b?1:0].anchor.locked=!1,e.removeClass(h.draggingClass),e.endpoints[b]==this._jsPlumb.floatingEndpoint&&f&&e.suspendedEndpoint&&(0===b?(e.source=k[0],e.sourceId=k[1]):(e.target=k[0],e.targetId=k[1]),i.setDragScope(k[2],k[3]),e.endpoints[b]=e.suspendedEndpoint,(e.isReattach()||e._forceReattach||e._forceDetach||!e.endpoints[0===b?1:0].detach(e,!1,!1,!0,a))&&(e.setHover(!1),e.floatingAnchorIndex=null,e._forceDetach=null,e._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(e),e.suspendedEndpoint.addConnection(e),h.repaint(k[1])))}h.remove(d.element,!1),h.remove(r.canvas,!1),this.deleteAfterDragStop?h.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),h.fire("connectionDragStop",e,a),h.currentlyDragging=!1,e=null}.bind(this));var z=j(this.canvas);i.initDraggable(z,s,!0,h),v=!0}},(this.isSource||this.isTarget)&&this.initDraggable();var w=function(a,b,c,d){if((this.isTarget||b)&&i.isDropSupported(this.element)){var e=g.dropOptions||h.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;e=jsPlumb.extend({},e),e.scope=e.scope||this.scope;var f=i.dragEvents.drop,k=i.dragEvents.over,m=i.dragEvents.out,n=function(){this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass);var a=i.getDropEvent(arguments),b=j(i.getDragObject(arguments)),c=h.getAttribute(b,"dragId"),e=(h.getAttribute(b,"elId"),h.getAttribute(b,"originalScope")),f=q[c],g=f.suspendedEndpoint&&(f.suspendedEndpoint.id==this.id||this.referenceEndpoint&&f.suspendedEndpoint.id==this.referenceEndpoint.id);if(g)return f._forceReattach=!0,void 0;if(null!=f){var k=null==f.floatingAnchorIndex?1:f.floatingAnchorIndex;e&&jsPlumb.CurrentLibrary.setDragScope(b,e);var l=null!=d?d.isEnabled():!0;if(this.isFull()&&this.fire("maxConnections",{endpoint:this,connection:f,maxConnections:this._jsPlumb.maxConnections},a),!this.isFull()&&(0!==k||this.isSource)&&(1!=k||this.isTarget)&&l){var m=!0;f.suspendedEndpoint&&f.suspendedEndpoint.id!=this.id&&(0===k?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.isDetachAllowed(f)&&f.endpoints[k].isDetachAllowed(f)&&f.suspendedEndpoint.isDetachAllowed(f)&&h.checkCondition("beforeDetach",f)||(m=!1)),0===k?(f.source=this.element,f.sourceId=this.elementId):(f.target=this.element,f.targetId=this.elementId);var n=function(){f.floatingAnchorIndex=null},r=function(){f.pending=!1,f.endpoints[k].detachFromConnection(f),f.suspendedEndpoint&&f.suspendedEndpoint.detachFromConnection(f),f.endpoints[k]=this,this.addConnection(f);var b=this.getParameters();for(var c in b)f.setParameter(c,b[c]);if(f.suspendedEndpoint){var d=(f.suspendedEndpoint.getElement(),f.suspendedEndpoint.elementId);p({index:k,originalSourceId:0===k?d:f.sourceId,newSourceId:0===k?this.elementId:f.sourceId,originalTargetId:1==k?d:f.targetId,newTargetId:1==k?this.elementId:f.targetId,originalSourceEndpoint:0===k?f.suspendedEndpoint:f.endpoints[0],newSourceEndpoint:0===k?this:f.endpoints[0],originalTargetEndpoint:1==k?f.suspendedEndpoint:f.endpoints[1],newTargetEndpoint:1==k?this:f.endpoints[1],connection:f},a)}else b.draggable&&jsPlumb.CurrentLibrary.initDraggable(this.element,dragOptions,!0,h);1==k?h.anchorManager.updateOtherEndpoint(f.sourceId,f.suspendedElementId,f.targetId,f):h.anchorManager.sourceChanged(f.suspendedEndpoint.elementId,f.sourceId,f),o(f,null,a),n()}.bind(this),s=function(){f.suspendedEndpoint&&(f.endpoints[k]=f.suspendedEndpoint,f.setHover(!1),f._forceDetach=!0,0===k?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.suspendedEndpoint.addConnection(f),f.endpoints[0].repaint(),f.repaint(),h.repaint(f.sourceId),f._forceDetach=!1),n()};m=m&&this.isDropAllowed(f.sourceId,f.targetId,f.scope,f,this),m?r():s()}h.currentlyDragging=!1}}.bind(this);e[f]=l.wrap(e[f],n),e[k]=l.wrap(e[k],function(){var a=i.getDragObject(arguments),b=h.getAttribute(a,"dragId"),c=q[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;if(e){var f=h.checkCondition("checkDropAllowed",{sourceEndpoint:c.endpoints[d],targetEndpoint:this,connection:c});this[(f?"add":"remove")+"Class"](h.endpointDropAllowedClass),this[(f?"remove":"add")+"Class"](h.endpointDropForbiddenClass),c.endpoints[d].anchor.over(this.anchor,this)}}}.bind(this)),e[m]=l.wrap(e[m],function(){var a=i.getDragObject(arguments),b=h.getAttribute(a,"dragId"),c=q[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;e&&(this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass),c.endpoints[d].anchor.out())}}.bind(this)),i.initDroppable(a,e,!0,c)}}.bind(this);return w(j(this.canvas),!0,!(g._transient||this.anchor.isFloating),this),g.type&&this.addType(g.type,g.data,h.isSuspendDrawing()),this},jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a){null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),jsPlumbUtil.copyValues(d,a,this),a.anchor&&(this.anchor=this._jsPlumb.instance.makeAnchor(a.anchor))},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){jsPlumb.CurrentLibrary.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null;var a=jsPlumb.CurrentLibrary.getElementObject(this.canvas);jsPlumb.CurrentLibrary.destroyDraggable(a),jsPlumb.CurrentLibrary.destroyDroppable(a)},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=jsPlumb.CurrentLibrary.getDOMElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}})}(),function(){var a=function(a,b,c,d){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[b][c])throw{msg:"jsPlumb: unknown connector type '"+c+"'"};return new jsPlumb.Connectors[b][c](d)},b=function(a,b,c){return a?c.makeAnchor(a,b,c):null},c=function(a,c,d,e,f,g,h,i,j,k){var l;if(e)d.endpoints[f]=e,e.addConnection(d);else{g.endpoints||(g.endpoints=[null,null]);var m=g.endpoints[f]||g.endpoint||a.Defaults.Endpoints[f]||jsPlumb.Defaults.Endpoints[f]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var n=g.endpointStyles[f]||g.endpointStyle||a.Defaults.EndpointStyles[f]||jsPlumb.Defaults.EndpointStyles[f]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==n.fillStyle&&null!=j&&(n.fillStyle=j.strokeStyle),null==n.outlineColor&&null!=j&&(n.outlineColor=j.outlineColor),null==n.outlineWidth&&null!=j&&(n.outlineWidth=j.outlineWidth);var o=g.endpointHoverStyles[f]||g.endpointHoverStyle||a.Defaults.EndpointHoverStyles[f]||jsPlumb.Defaults.EndpointHoverStyles[f]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=k&&(null==o&&(o={}),null==o.fillStyle&&(o.fillStyle=k.strokeStyle));var p=g.anchors?g.anchors[f]:g.anchor?g.anchor:b(a.Defaults.Anchors[f],i,a)||b(jsPlumb.Defaults.Anchors[f],i,a)||b(a.Defaults.Anchor,i,a)||b(jsPlumb.Defaults.Anchor,i,a),q=g.uuids?g.uuids[f]:null;l=c({paintStyle:n,hoverPaintStyle:o,endpoint:m,connections:[d],uuid:q,anchor:p,source:h,scope:g.scope,container:g.container,reattach:g.reattach||a.Defaults.ReattachConnections,detachable:g.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[f]=l,g.drawEndpoints===!1&&l.setVisible(!1,!0,!0)}return l};jsPlumb.Connection=function(a){var b=(a.newConnection,a.newEndpoint),d=jsPlumb.CurrentLibrary,e=(d.getAttribute,d.getElementObject,d.getDOMElement),f=jsPlumbUtil;d.getOffset,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.parent=a.parent,this.previousConnection=a.previousConnection,this.source=e(a.source),this.target=e(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var g=this._jsPlumb.instance;this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={parent:a.parent,cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams},this._jsPlumb.lastPaintedAt=null,this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}};var h=c(g,b,this,a.sourceEndpoint,0,a,this.source,this.sourceId,a.paintStyle,a.hoverPaintStyle);h&&f.addToList(a.endpointsByElement,this.sourceId,h);var i=c(g,b,this,a.targetEndpoint,1,a,this.target,this.targetId,a.paintStyle,a.hoverPaintStyle);i&&f.addToList(a.endpointsByElement,this.targetId,i),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0)),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||g.Defaults.Connector||jsPlumb.Defaults.Connector,!0),a.path&&this.connector.setPath(a.path),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||g.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||g.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle();var j=g.getSuspendedAt();if(g.updateOffset({elId:this.sourceId,timestamp:j}),g.updateOffset({elId:this.targetId,timestamp:j}),!g.isSuspendDrawing()){var k=g.getCachedData(this.sourceId),l=k.o,m=k.s,n=g.getCachedData(this.targetId),o=n.o,p=n.s,q=j||g.timestamp(),r=this.endpoints[0].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[o.left,o.top],twh:p,tElement:this.endpoints[1],timestamp:q});this.endpoints[0].paint({anchorLoc:r,timestamp:q}),r=this.endpoints[1].anchor.compute({xy:[o.left,o.top],wh:p,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[0],timestamp:q}),this.endpoints[1].paint({anchorLoc:r,timestamp:q})}this._jsPlumb.detachable=g.Defaults.ConnectionsDetachable,a.detachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[0].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[1].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this._jsPlumb.reattach=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||g.Defaults.ReattachConnections,this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var s=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(s,this.endpoints[0].getParameters()),jsPlumb.extend(s,this.getParameters()),this.setParameters(s);var t=[a.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[a-zA-Z]/.test(t)&&this.addType(t,a.data,!0)},jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(a,b){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),this.setConnector(a.connector,b)},getTypeDescriptor:function(){return"connection"},getAttachedElements:function(){return this.endpoints},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(),this.connector.destroy()),this.connector=null},isDetachable:function(){return this._jsPlumb.detachable===!0},setDetachable:function(a){this._jsPlumb.detachable=a===!0},isReattach:function(){return this._jsPlumb.reattach===!0},setReattach:function(a){this._jsPlumb.reattach=a===!0},setHover:function(a){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(a),jsPlumb.CurrentLibrary[a?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),jsPlumb.CurrentLibrary[a?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getCost:function(){return this._jsPlumb.cost},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},moveParent:function(a){var b=jsPlumb.CurrentLibrary;b.getParent(this.connector.canvas),this.connector.bgCanvas&&(b.removeElement(this.connector.bgCanvas),b.appendElement(this.connector.bgCanvas,a)),b.removeElement(this.connector.canvas),b.appendElement(this.connector.canvas,a);for(var c=0;c<this._jsPlumb.overlays.length;c++)this._jsPlumb.overlays[c].isAppendedAtTopLevel&&(b.removeElement(this._jsPlumb.overlays[c].canvas),b.appendElement(this._jsPlumb.overlays[c].canvas,a),this._jsPlumb.overlays[c].reattachListeners&&this._jsPlumb.overlays[c].reattachListeners(this.connector));this.connector.reattachListeners&&this.connector.reattachListeners()},getConnector:function(){return this.connector},setConnector:function(b,c){var d=jsPlumbUtil;null!=this.connector&&(this.connector.cleanup(),this.connector.destroy());var e={_jsPlumb:this._jsPlumb.instance,parent:this._jsPlumb.params.parent,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},f=this._jsPlumb.instance.getRenderMode();d.isString(b)?this.connector=a(this._jsPlumb.instance,f,b,e):d.isArray(b)&&(this.connector=1==b.length?a(this._jsPlumb.instance,f,b[0],e):a(this._jsPlumb.instance,f,b[0],d.merge(b[1],e))),this.bindListeners(this.connector,this,function(a){this.setHover(a,!1)}.bind(this)),this.canvas=this.connector.canvas,this._jsPlumb.editable&&null!=jsPlumb.ConnectorEditors&&jsPlumb.ConnectorEditors[this.connector.type]&&this.connector.isEditable()?new jsPlumb.ConnectorEditors[this.connector.type]({connector:this.connector,connection:this,params:this._jsPlumb.params.editorParams||{}}):this._jsPlumb.editable=!1,c||this.repaint()},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=(a.elId,a.ui),c=a.recalc,d=a.timestamp,e=!1,f=e?this.sourceId:this.targetId,g=e?this.targetId:this.sourceId,h=e?0:1,i=e?1:0;if(null==d||d!=this._jsPlumb.lastPaintedAt){var j=this._jsPlumb.instance.updateOffset({elId:g,offset:b,recalc:c,timestamp:d}).o,k=this._jsPlumb.instance.updateOffset({elId:f,timestamp:d}).o,l=this.endpoints[i],m=this.endpoints[h];a.clearEdits&&(this._jsPlumb.overlayPositions=null,l.anchor.clearUserDefinedLocation(),m.anchor.clearUserDefinedLocation(),this.connector.setEdited(!1));var n=l.anchor.getCurrentLocation({xy:[j.left,j.top],wh:[j.width,j.height],element:l,timestamp:d}),o=m.anchor.getCurrentLocation({xy:[k.left,k.top],wh:[k.width,k.height],element:m,timestamp:d});this.connector.resetBounds(),this.connector.compute({sourcePos:n,targetPos:o,sourceEndpoint:this.endpoints[i],targetEndpoint:this.endpoints[h],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:j,targetInfo:k,clearEdits:a.clearEdits===!0});for(var p={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},q=0;q<this._jsPlumb.overlays.length;q++){var r=this._jsPlumb.overlays[q];r.isVisible()&&(this._jsPlumb.overlayPlacements[q]=r.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(r)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[q].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[q].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[q].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[q].maxY))}var s=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,t=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),u={xmin:Math.min(this.connector.bounds.minX-(s+t),p.minX),ymin:Math.min(this.connector.bounds.minY-(s+t),p.minY),xmax:Math.max(this.connector.bounds.maxX+(s+t),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(s+t),p.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,u);for(var v=0;v<this._jsPlumb.overlays.length;v++){var w=this._jsPlumb.overlays[v];w.isVisible()&&w.paint(this._jsPlumb.overlayPlacements[v],u)}}this._jsPlumb.lastPaintedAt=d}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp,clearEdits:a.clearEdits})}})}(),function(){jsPlumb.AnchorManager=function(a){var b={},c={},d={},e={},f={},g={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},h={},i=this,j={},k=a.jsPlumbInstance,l=jsPlumb.CurrentLibrary,m={},n=function(a,b,c,d,e,f){if(a===b)return{orientation:g.IDENTITY,a:["top","top"]};var h=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),i=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),j=c.left<=d.left&&c.right>=d.left||c.left<=d.right&&c.right>=d.right||c.left<=d.left&&c.right>=d.right||d.left<=c.left&&d.right>=c.right,k=c.top<=d.top&&c.bottom>=d.top||c.top<=d.bottom&&c.bottom>=d.bottom||c.top<=d.top&&c.bottom>=d.bottom||d.top<=c.top&&d.bottom>=c.bottom,l=function(a){return[e.isContinuous?e.verifyEdge(a[0]):a[0],f.isContinuous?f.verifyEdge(a[1]):a[1]]},m={orientation:g.DIAGONAL,theta:h,theta2:i};return j||k?j?(m.orientation=g.HORIZONTAL,m.a=c.top<d.top?["bottom","top"]:["top","bottom"]):(m.orientation=g.VERTICAL,m.a=c.left<d.left?["right","left"]:["left","right"]):d.left>c.left&&d.top>c.top?m.a=["right","top"]:d.left>c.left&&c.top>d.top?m.a=["top","left"]:d.left<c.left&&d.top<c.top?m.a=["top","right"]:d.left<c.left&&d.top>c.top&&(m.a=["left","top"]),m.a=l(m.a),m},o=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},p=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],d===!1?-1:1}},q=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},r={top:function(a,b){return a[0]>b[0]?1:-1},right:p(!0),bottom:p(!0),left:q},s=function(a,b){return a.sort(b)},t=function(a,b){var c=k.getCachedData(a),e=c.s,g=c.o,h=function(b,c,e,g,h,i,j){if(g.length>0)for(var l=s(g,r[b]),m="right"===b||"top"===b,n=o(b,c,e,l,h,i,m),p=function(a,b){var c=k.adjustForParentOffsetAndScroll([b[0],b[1]],a.canvas);d[a.id]=[c[0],c[1],b[2],b[3]],f[a.id]=j},q=0;q<n.length;q++){var t=n[q][4],u=t.endpoints[0].elementId===a,v=t.endpoints[1].elementId===a;u?p(t.endpoints[0],n[q]):v&&p(t.endpoints[1],n[q])}};h("bottom",e,[g.left,g.top],b.bottom,!0,1,[0,1]),h("top",e,[g.left,g.top],b.top,!0,0,[0,-1]),h("left",e,[g.left,g.top],b.left,!1,0,[-1,0]),h("right",e,[g.left,g.top],b.right,!1,1,[1,0])};this.reset=function(){b={},h={},j={}},this.addFloatingConnection=function(a,b){m[a]=b},this.removeFloatingConnection=function(a){delete m[a]},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,e=!0,f=function(a,f,g,i,j){b==c&&g.isContinuous&&(l.removeElement(d[1].canvas),e=!1),jsPlumbUtil.addToList(h,i,[j,f,g.constructor==jsPlumb.DynamicAnchor])};f(0,d[0],d[0].anchor,c,a),e&&f(1,d[1],d[1].anchor,b,a)};var u=function(a){!function(a,b){if(a){var c=function(a){return a[4]==b};jsPlumbUtil.removeWithFunction(a.top,c),jsPlumbUtil.removeWithFunction(a.left,c),jsPlumbUtil.removeWithFunction(a.bottom,c),jsPlumbUtil.removeWithFunction(a.right,c)}}(j[a.elementId],a.id)};this.connectionDetached=function(a){var b=a.connection||a,c=a.sourceId,d=a.targetId,e=b.endpoints,f=function(a,b,c,d,e){null!=c&&c.constructor==jsPlumb.FloatingAnchor||jsPlumbUtil.removeWithFunction(h[d],function(a){return a[0].id==e.id})};f(1,e[1],e[1].anchor,c,b),f(0,e[0],e[0].anchor,d,b),u(b.endpoints[0]),u(b.endpoints[1]),i.redraw(b.sourceId),i.redraw(b.targetId)},this.add=function(a,c){jsPlumbUtil.addToList(b,c,a)},this.changeId=function(a,c){h[c]=h[a],b[c]=b[a],delete h[a],delete b[a]},this.getConnectionsFor=function(a){return h[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){jsPlumbUtil.removeWithFunction(b[a.elementId],function(b){return b.id==a.id}),u(a)},this.clearFor=function(a){delete b[a],b[a]=[]};var v=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=-1,o=-1,p=e.endpoints[h],q=p.id,r=[1,0][h],s=[[c,d],e,f,g,q],t=b[j],u=p._continuousAnchorEdge?b[p._continuousAnchorEdge]:null;if(u){var v=jsPlumbUtil.findWithFunction(u,function(a){return a[4]==q});if(-1!=v){u.splice(v,1);for(var w=0;w<u.length;w++)jsPlumbUtil.addWithFunction(l,u[w][1],function(a){return a.id==u[w][1].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[h],function(a){return a.id==u[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[r],function(a){return a.id==u[w][1].endpoints[r].id})}}for(w=0;w<t.length;w++)1==a.idx&&t[w][3]===g&&-1==o&&(o=w),jsPlumbUtil.addWithFunction(l,t[w][1],function(a){return a.id==t[w][1].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[h],function(a){return a.id==t[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[r],function(a){return a.id==t[w][1].endpoints[r].id});if(-1!=n)t[n]=s;else{var x=i?-1!=o?o:0:t.length;t.splice(x,0,s)}p._continuousAnchorEdge=j};this.updateOtherEndpoint=function(a,b,c,d){var e=jsPlumbUtil.findWithFunction(h[a],function(a){return a[0].id===d.id}),f=jsPlumbUtil.findWithFunction(h[b],function(a){return a[0].id===d.id});-1!=e&&(h[a][e][0]=d,h[a][e][1]=d.endpoints[1],h[a][e][2]=d.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor),f>-1&&(h[b].splice(f,1),jsPlumbUtil.addToList(h,c,[d,d.endpoints[0],d.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]))},this.sourceChanged=function(a,b,c){jsPlumbUtil.removeWithFunction(h[a],function(a){return a[0].id===c.id});var d=jsPlumbUtil.findWithFunction(h[c.targetId],function(a){return a[0].id===c.id});d>-1&&(h[c.targetId][d][0]=c,h[c.targetId][d][1]=c.endpoints[0],h[c.targetId][d][2]=c.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor),jsPlumbUtil.addToList(h,b,[c,c.endpoints[1],c.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])},this.rehomeEndpoint=function(a,c,d){var e=b[c]||[],f=k.getId(d);if(f!==c){var g=jsPlumbUtil.indexOf(e,a);if(g>-1){var h=e.splice(g,1)[0];i.add(h,f)}}for(var j=0;j<a.connections.length;j++)a.connections[j].sourceId==c?(a.connections[j].sourceId=a.elementId,a.connections[j].source=a.element,i.sourceChanged(c,a.elementId,a.connections[j])):a.connections[j].targetId==c&&(a.connections[j].targetId=a.elementId,a.connections[j].target=a.element,i.updateOtherEndpoint(a.connections[j].sourceId,c,a.elementId,a.connections[j]))},this.redraw=function(a,c,d,e,f,g){if(!k.isSuspendDrawing()){var i=b[a]||[],l=h[a]||[],o=[],p=[],q=[];d=d||k.timestamp(),e=e||{left:0,top:0},c&&(c={left:c.left+e.left,top:c.top+e.top});for(var r=k.updateOffset({elId:a,offset:c,recalc:!1,timestamp:d}),s={},u=0;u<l.length;u++){var w=l[u][0],x=w.sourceId,y=w.targetId,z=w.endpoints[0].anchor.isContinuous,A=w.endpoints[1].anchor.isContinuous;if(z||A){var B=x+"_"+y,C=s[B],D=w.sourceId==a?1:0;z&&!j[x]&&(j[x]={top:[],right:[],bottom:[],left:[]}),A&&!j[y]&&(j[y]={top:[],right:[],bottom:[],left:[]}),a!=y&&k.updateOffset({elId:y,timestamp:d}),a!=x&&k.updateOffset({elId:x,timestamp:d});var E=k.getCachedData(y),F=k.getCachedData(x);y==x&&(z||A)?v(j[x],-Math.PI/2,0,w,!1,y,0,!1,"top",x,o,p):(C||(C=n(x,y,F.o,E.o,w.endpoints[0].anchor,w.endpoints[1].anchor),s[B]=C),z&&v(j[x],C.theta,0,w,!1,y,0,!1,C.a[0],x,o,p),A&&v(j[y],C.theta2,-1,w,!0,x,1,!0,C.a[1],y,o,p)),z&&jsPlumbUtil.addWithFunction(q,x,function(a){return a===x}),A&&jsPlumbUtil.addWithFunction(q,y,function(a){return a===y}),jsPlumbUtil.addWithFunction(o,w,function(a){return a.id==w.id}),(z&&0===D||A&&1===D)&&jsPlumbUtil.addWithFunction(p,w.endpoints[D],function(a){return a.id==w.endpoints[D].id})}}for(u=0;u<i.length;u++)0===i[u].connections.length&&i[u].anchor.isContinuous&&(j[a]||(j[a]={top:[],right:[],bottom:[],left:[]}),v(j[a],-Math.PI/2,0,{endpoints:[i[u],i[u]],paint:function(){}},!1,a,0,!1,"top",a,o,p),jsPlumbUtil.addWithFunction(q,a,function(b){return b===a
}));for(u=0;u<q.length;u++)t(q[u],j[q[u]]);for(u=0;u<i.length;u++)i[u].paint({timestamp:d,offset:r,dimensions:r.s,recalc:g!==!0});for(u=0;u<p.length;u++){var G=k.getCachedData(p[u].elementId);p[u].paint({timestamp:d,offset:G,dimensions:G.s})}for(u=0;u<l.length;u++){var H=l[u][1];if(H.anchor.constructor==jsPlumb.DynamicAnchor){H.paint({elementWithPrecedence:a,timestamp:d}),jsPlumbUtil.addWithFunction(o,l[u][0],function(a){return a.id==l[u][0].id});for(var I=0;I<H.connections.length;I++)H.connections[I]!==l[u][0]&&jsPlumbUtil.addWithFunction(o,H.connections[I],function(a){return a.id==H.connections[I].id})}else H.anchor.constructor==jsPlumb.Anchor&&jsPlumbUtil.addWithFunction(o,l[u][0],function(a){return a.id==l[u][0].id})}var J=m[a];for(J&&J.paint({timestamp:d,recalc:!1,elId:a}),u=0;u<o.length;u++){var K=d;o[u].paint({elId:a,timestamp:K,recalc:!1,clearEdits:f})}}};var w=function(a){jsPlumbUtil.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||["top","right","bottom","left"],c=!(a.clockwise===!1),g={},h={top:"bottom",right:"left",left:"right",bottom:"top"},i={top:"right",right:"bottom",left:"top",bottom:"left"},j={top:"left",right:"top",left:"bottom",bottom:"right"},k=c?i:j,l=c?j:i,m=a.cssClass||"",n=0;n<b.length;n++)g[b[n]]=!0;this.verifyEdge=function(a){return g[a]?a:g[h[a]]?h[a]:g[k[a]]?k[a]:g[l[a]]?l[a]:a},this.compute=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getOrientation=function(a){return f[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete e[a.elementId]},this.setUserDefinedLocation=function(b){e[a.elementId]=b},this.getCssClass=function(){return m},this.setCssClass=function(a){m=a}};k.continuousAnchorFactory={get:function(a){var b=c[a.elementId];return b||(b=new w(a),c[a.elementId]=b),b},clear:function(a){delete c[a]}}},jsPlumb.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],jsPlumbUtil.EventGenerator.apply(this);var b=a.jsPlumbInstance;this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,this.compute=function(a){var c=a.xy,d=a.wh,e=a.element,f=a.timestamp;return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),f&&f===self.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:(this.lastReturnValue=[c[0]+this.x*d[0]+this.offsets[0],c[1]+this.y*d[1]+this.offsets[1]],this.lastReturnValue=b.adjustForParentOffsetAndScroll(this.lastReturnValue,e.canvas)),this.timestamp=f,this.lastReturnValue)},this.getCurrentLocation=function(a){return null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),jsPlumb.FloatingAnchor=function(a){jsPlumb.Anchor.apply(this,arguments);var b=a.reference,c=jsPlumb.CurrentLibrary,d=a.jsPlumbInstance,e=a.referenceCanvas,f=c.getSize(c.getElementObject(e)),g=0,h=0,i=null,j=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=a.element,e=[b[0]+f[0]/2,b[1]+f[1]/2];return e=d.adjustForParentOffsetAndScroll(e,c.canvas),j=e,e},this.getOrientation=function(a){if(i)return i;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*g,-1*Math.abs(c[1])*h]},this.over=function(a,b){i=a.getOrientation(b)},this.out=function(){i=null},this.getCurrentLocation=function(a){return null==j?this.compute(a):j}},jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var a=function(a,b,c){return a.constructor==jsPlumb.Anchor?a:b.makeAnchor(a,c,b)};jsPlumb.DynamicAnchor=function(b){jsPlumb.Anchor.apply(this,arguments),this.isSelective=!0,this.isDynamic=!0,this.anchors=[],this.elementId=b.elementId,this.jsPlumbInstance=b.jsPlumbInstance;for(var c=0;c<b.anchors.length;c++)this.anchors[c]=a(b.anchors[c],this.jsPlumbInstance,this.elementId);this.addAnchor=function(b){this.anchors.push(a(b,this.jsPlumbInstance,this.elementId))},this.getAnchors=function(){return this.anchors},this.locked=!1;var d=this.anchors.length>0?this.anchors[0]:null,e=(this.anchors.length>0?0:-1,d),f=this,g=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},h=b.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,h=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=g(e[k],f,h,a,b);j>l&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,g=a.timestamp,i=a.txy,j=a.twh;a.clearUserDefinedLocation&&(userDefinedLocation=null),this.timestamp=g;var k=f.getUserDefinedLocation();return null!=k?k:this.locked||null==i||null==j?d.compute(a):(a.timestamp=null,d=h(b,c,i,j,this.anchors),this.x=d.x,this.y=d.y,d!=e&&this.fire("anchorChanged",d),e=d,d.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=d?d.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=d?d.getOrientation(a):[0,0]},this.over=function(a,b){null!=d&&d.over(a,b)},this.out=function(){null!=d&&d.out()},this.getCssClass=function(){return d&&d.getCssClass()||""}},jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(a,b,c,d,e,f){jsPlumb.Anchors[e]=function(g){var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}};b(.5,0,0,-1,"TopCenter"),b(.5,1,0,1,"BottomCenter"),b(0,.5,-1,0,"LeftMiddle"),b(1,.5,1,0,"RightMiddle"),b(.5,0,0,-1,"Top"),b(.5,1,0,1,"Bottom"),b(0,.5,-1,0,"Left"),b(1,.5,1,0,"Right"),b(.5,.5,0,0,"Center"),b(1,0,0,-1,"TopRight"),b(1,1,0,1,"BottomRight"),b(0,0,0,-1,"TopLeft"),b(0,1,0,1,"BottomLeft"),jsPlumb.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},jsPlumb.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var c=function(a,b){jsPlumb.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};jsPlumb.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},c("ContinuousLeft",["left"]),c("ContinuousTop",["top"]),c("ContinuousBottom",["bottom"]),c("ContinuousRight",["right"]),b(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},jsPlumb.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b>f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}(),function(){jsPlumb.DOMElementComponent=jsPlumbUtil.extend(jsPlumb.jsPlumbUIComponent,function(){this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(){}}),jsPlumb.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var b,c,d,e,f,g,h,i=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(){b=Math.sqrt(Math.pow(f-e,2)+Math.pow(h-g,2)),c=jsPlumbGeom.gradient({x:e,y:g},{x:f,y:h}),d=-1/c});this.type="Straight",this.getLength=function(){return b},this.getGradient=function(){return c},this.getCoordinates=function(){return{x1:e,y1:g,x2:f,y2:h}},this.setCoordinates=function(a){e=a.x1,g=a.y1,f=a.x2,h=a.y2,i()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(e,f),minY:Math.min(g,h),maxX:Math.max(e,f),maxY:Math.max(g,h)}},this.pointOnPath=function(a,c){if(0!==a||c){if(1!=a||c){var d=c?a>0?a:b+a:a*b;return jsPlumbGeom.pointOnLine({x:e,y:g},{x:f,y:h},d)}return{x:f,y:h}}return{x:e,y:g}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(a,b,c){var d=this.pointOnPath(a,c),i=0>=b?{x:e,y:g}:{x:f,y:h};return 0>=b&&Math.abs(b)>1&&(b*=-1),jsPlumbGeom.pointOnLine(d,i,b)};var j=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},k=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,i){var l={d:1/0,x:null,y:null,l:null,x1:e,x2:f,y1:g,y2:h};if(0===c)l.y=g,l.x=j(e,f,a)?a:k(e,f,a);else if(1/0==c||c==-1/0)l.x=e,l.y=j(g,h,i)?i:k(g,h,i);else{var m=g-c*e,n=i-d*a,o=(n-m)/(c-d),p=c*o+m;l.x=j(e,f,o)?o:k(e,f,o),l.y=j(g,h,p)?p:k(g,h,p)}var q=jsPlumbGeom.lineLength([l.x,l.y],[e,g]);return l.d=jsPlumbGeom.lineLength([a,i],[l.x,l.y]),l.l=q/b,l}},Arc:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(b,c){return jsPlumbGeom.theta([a.cx,a.cy],[b,c])}),c=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+d:a.startAngle,e=Math.abs(c-a.endAngle);return c-e*b}var f=a.endAngle<a.startAngle?a.endAngle+d:a.endAngle,g=Math.abs(f-a.startAngle);return a.startAngle+g*b},d=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=b(a.x1,a.y1),this.endAngle=b(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=d),this.startAngle<0&&(this.startAngle+=d),this.segment=jsPlumbGeom.quadrant([this.x1,this.y1],[this.x2,this.y2]);var e=this.endAngle<this.startAngle?this.endAngle+d:this.endAngle;this.sweep=Math.abs(e-this.startAngle),this.anticlockwise&&(this.sweep=d-this.sweep);var f=2*Math.PI*this.radius,g=this.sweep/d,h=f*g;this.getLength=function(){return h},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var i=1e-10,j=function(a){var b=Math.floor(a),c=Math.ceil(a);return i>a-b?b:i>c-a?c:a};this.pointOnPath=function(b,d){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};d&&(b/=h);var e=c(this,b),f=a.cx+a.r*Math.cos(e),g=a.cy+a.r*Math.sin(e);return{x:j(f),y:j(g),theta:e}},this.gradientAtPoint=function(b,c){var d=this.pointOnPath(b,c),e=jsPlumbGeom.normal([a.cx,a.cy],[d.x,d.y]);return this.anticlockwise||1/0!=e&&e!=-1/0||(e*=-1),e},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),g=2*(c/f)*Math.PI,h=this.anticlockwise?-1:1,i=e.theta+h*g,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),[{x:a.x1,y:a.y1},{x:a.cp1x,y:a.cp1y},{x:a.cp2x,y:a.cp2y},{x:a.x2,y:a.y2}]),c={minX:Math.min(a.x1,a.x2,a.cp1x,a.cp2x),minY:Math.min(a.y1,a.y2,a.cp1y,a.cp2y),maxX:Math.max(a.x1,a.x2,a.cp1x,a.cp2x),maxY:Math.max(a.y1,a.y2,a.cp1y,a.cp2y)};this.type="Bezier";var d=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,c){return a=d(b,a,c),jsBezier.pointOnCurve(b,a)},this.gradientAtPoint=function(a,c){return a=d(b,a,c),jsBezier.gradientAtPoint(b,a)},this.pointAlongPathFrom=function(a,c,e){return a=d(b,a,e),jsBezier.pointAlongCurveFrom(b,a,c)},this.getLength=function(){return jsBezier.getLength(b)},this.getBounds=function(){return c}}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(b){a.apply(this,arguments);var c=[],d=0,e=[],f=[],g=b.stub||0,h=jsPlumbUtil.isArray(g)?g[0]:g,i=jsPlumbUtil.isArray(g)?g[1]:g,j=b.gap||0,k=jsPlumbUtil.isArray(j)?j[0]:j,l=jsPlumbUtil.isArray(j)?j[1]:j,m=null,n=!1,o=null;this.isEditable=function(){return!1},this.setEdited=function(a){n=a},this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(a,b){for(var d={d:1/0,s:null,x:null,y:null,l:null},e=0;e<c.length;e++){var f=c[e].findClosestPointOnPath(a,b);f.d<d.d&&(d.d=f.d,d.l=f.l,d.x=f.x,d.y=f.y,d.s=c[e],d.x1=f.x1,d.x2=f.x2,d.y1=f.y1,d.y2=f.y2,d.index=e)}return d};var p=function(){for(var a=0,b=0;b<c.length;b++){var g=c[b].getLength();f[b]=g/d,e[b]=[a,a+=g/d]}},q=function(a,b){b&&(a=a>0?a/d:(d+a)/d);for(var g=e.length-1,h=1,i=0;i<e.length;i++)if(e[i][1]>=a){g=i,h=1==a?1:0===a?0:(a-e[i][0])/f[i];break}return{segment:c[g],proportion:h,index:g}},r=function(a,b,e){if(e.x1!=e.x2||e.y1!=e.y2){var f=new jsPlumb.Segments[b](e);c.push(f),d+=f.getLength(),a.updateBounds(f)}},s=function(){d=0,c.splice(0,c.length),e.splice(0,e.length),f.splice(0,f.length)};this.setSegments=function(a){m=[],d=0;for(var b=0;b<a.length;b++)m.push(a[b]),d+=a[b].getLength()};var t=function(a){this.lineWidth=a.lineWidth;var b=jsPlumbGeom.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],d=a.targetPos[1]<a.sourcePos[1],e=a.lineWidth||1,f=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),g=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),j=c?a.targetPos[0]:a.sourcePos[0],m=d?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===f[0]&&0===f[1]||0===g[0]&&0===g[1]){var p=n>o?0:1,q=[1,0][p];f=[],g=[],f[p]=a.sourcePos[p]>a.targetPos[p]?-1:1,g[p]=a.sourcePos[p]>a.targetPos[p]?1:-1,f[q]=0,g[q]=0}var r=c?n+k*f[0]:k*f[0],s=d?o+k*f[1]:k*f[1],t=c?l*g[0]:n+l*g[0],u=d?l*g[1]:o+l*g[1],v=f[0]*g[0]+f[1]*g[1],w={sx:r,sy:s,tx:t,ty:u,lw:e,xSpan:Math.abs(t-r),ySpan:Math.abs(u-s),mx:(r+t)/2,my:(s+u)/2,so:f,to:g,x:j,y:m,w:n,h:o,segment:b,startStubX:r+f[0]*h,startStubY:s+f[1]*h,endStubX:t+g[0]*i,endStubY:u+g[1]*i,isXGreaterThanStubTimes2:Math.abs(r-t)>h+i,isYGreaterThanStubTimes2:Math.abs(s-u)>h+i,opposite:-1==v,perpendicular:0===v,orthogonal:1==v,sourceAxis:0===f[0]?"y":"x",points:[j,m,n,o,r,s,t,u]};return w.anchorOrientation=w.opposite?"opposite":w.orthogonal?"orthogonal":"perpendicular",w};return this.getSegments=function(){return c},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)},this.pointOnPath=function(a,b){var c=q(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,b)||[0,0]},this.gradientAtPoint=function(a){var b=q(a,absolute);return b.segment&&b.segment.gradientAtPoint(b.proportion,absolute)||0},this.pointAlongPathFrom=function(a,b,c){var d=q(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){n||(o=t.call(this,a)),s(),this._compute(o,a),this.x=o.points[0],this.y=o.points[1],this.w=o.points[2],this.h=o.points[3],this.segment=o.segment,p()},{addSegment:r,prepareCompute:t,sourceStub:h,targetStub:i,maxStub:Math.max(h,i),sourceGap:k,targetGap:l,maxGap:Math.max(k,l)}},jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,a);var b=jsPlumb.Connectors.Straight=function(){this.type="Straight";var a=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(b,"Straight");var c=function(a){a=a||{};var b=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),c=(a.stub||50,a.curviness||150),d=10;this.type="Bezier",this.getCurviness=function(){return c},this._findControlPoint=function(a,b,e,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(e[0]<b[0]?a[0]+d:a[0]-d):k.push(a[0]+c*i[0]),0===i[1]?k.push(e[1]<b[1]?a[1]+d:a[1]-d):k.push(a[1]+c*h[1])):(0===h[0]?k.push(b[0]<e[0]?a[0]+d:a[0]-d):k.push(a[0]-c*h[0]),0===h[1]?k.push(b[1]<e[1]?a[1]+d:a[1]-d):k.push(a[1]+c*i[1])),k},this._compute=function(a,c){var d=c.sourcePos,e=c.targetPos,f=Math.abs(d[0]-e[0]),g=Math.abs(d[1]-e[1]),h=d[0]<e[0]?f:0,i=d[1]<e[1]?g:0,j=d[0]<e[0]?0:f,k=d[1]<e[1]?0:g,l=this._findControlPoint([h,i],d,e,c.sourceEndpoint,c.targetEndpoint),m=this._findControlPoint([j,k],e,d,c.targetEndpoint,c.sourceEndpoint);b.addSegment(this,"Bezier",{x1:h,y1:i,x2:j,y2:k,cp1x:l[0],cp1y:l[1],cp2x:m[0],cp2y:m[1]})}};jsPlumbUtil.extend(c,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(c,"Bezier"),jsPlumb.Endpoints.AbstractEndpoint=function(b){a.apply(this,arguments);var c=this.compute=function(){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a};return{compute:c,cssClass:b.cssClass}},jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,a),jsPlumb.Endpoints.Dot=function(a){this.type="Dot",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c){this.radius=c.radius||this.radius;var d=a[0]-this.radius,e=a[1]-this.radius,f=2*this.radius,g=2*this.radius;if(c.strokeStyle){var h=c.lineWidth||1;d-=h,e-=h,f+=2*h,g+=2*h}return[d,e,f,g,this.radius]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint),jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c){var d=c.width||this.width,e=c.height||this.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var d=function(){jsPlumb.DOMElementComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(d,jsPlumb.DOMElementComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),jsPlumb.Endpoints.Image=function(a){this.type="Image",d.apply(this,arguments),jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var b=a.onload,c=a.src||a.url,e=a.parent,f=a.cssClass?" "+a.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=a.width,this._jsPlumb.heightToUse=a.height,this._jsPlumb.endpoint=a.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&&b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,c){var d=a.constructor==String?a:a.src;b=c,this._jsPlumb.img.src=d,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(c,b),this._compute=function(a){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=document.createElement("img"),this.canvas.style.margin=0,this.canvas.style.padding=0,this.canvas.style.outline=0,this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.instance.endpointClass+f,this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas,e),this.attachListeners(this.canvas,this),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,b=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;jsPlumbUtil.sizeElement(this.canvas,a,b,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(a,b){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(a,b):window.setTimeout(function(){this.paint(a,b)}.bind(this),200))}},jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[d,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=!0,jsPlumbUtil.removeElement(this.canvas),this.canvas=null}}),jsPlumb.Endpoints.Blank=function(a){jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",d.apply(this,arguments),this._compute=function(a){return[a[0],a[1],10,0]},this.canvas=document.createElement("div"),this.canvas.style.display="block",this.canvas.style.width="1px",this.canvas.style.height="1px",this.canvas.style.background="transparent",this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.endpointClass,jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,d],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c){var d=c.width||self.width,e=c.height||self.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}};var e=jsPlumb.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation};e.prototype={cleanup:function(){this.component=null,this.canvas=null,this.endpointLoc=null},setVisible:function(a){this.visible=a},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc}},jsPlumb.Overlays.Arrow=function(a){this.type="Arrow",e.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var b=jsPlumbUtil,c=jsPlumbGeom;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var d=(a.direction||1)<0?-1:1,f=a.paintStyle||{lineWidth:1},g=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(a,e){var h,i,j,k,l;if(a.pointAlongPathFrom){if(b.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-d*this.length/2,!1),j=c.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=c.pointOnLine(h,i,this.length),-1==d){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=c.pointOnLine(j,i,this.length),-1==d){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,d*this.length/2),i=a.pointOnPath(this.loc),j=c.pointOnLine(h,i,this.length);k=c.perpendicularLineTo(h,j,this.width),l=c.pointOnLine(h,j,g*this.length);var q={hxy:h,tail:k,cxy:l},r=f.strokeStyle||e.strokeStyle,s=f.fillStyle||e.strokeStyle,t=f.lineWidth||e.lineWidth,u={component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)};return u}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,e),jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow),jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"},jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var f=function(a){return null==a._jsPlumb.cachedDimensions&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},g=function(a){jsPlumb.DOMElementComponent.apply(this,arguments),e.apply(this,arguments);var b=jsPlumb.CurrentLibrary;this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this.getElement=function(){if(null==this._jsPlumb.div){var c=this._jsPlumb.div=b.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));c.style.position="absolute";var d=a._jsPlumb.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:"");c.className=d,this._jsPlumb.instance.appendElement(c,this._jsPlumb.component.parent),this._jsPlumb.instance.getId(c),this.attachListeners(c,this),this.canvas=c}return this._jsPlumb.div},this.draw=function(a,b,c){var d=f(this);if(null!=d&&2==d.length){var e={x:0,y:0};if(c)e={x:c[0],y:c[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),e=a.pointOnPath(g,h)}else{var i=this.loc.constructor==Array?this.loc:this.endpointLoc;e={x:i[0]*a.w,y:i[1]*a.h}}var j=e.x-d[0]/2,k=e.y-d[1]/2;return{component:a,d:{minx:j,miny:k,td:d,cxy:e},minX:j,maxX:j+d[0],minY:k,maxY:k+d[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};jsPlumbUtil.extend(g,[jsPlumb.DOMElementComponent,e],{getDimensions:function(){return jsPlumb.CurrentLibrary.getSize(jsPlumb.CurrentLibrary.getElementObject(this.getElement()))},setVisible:function(a){this._jsPlumb.div.style.display=a?"block":"none"},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){null!=this._jsPlumb.div&&jsPlumb.CurrentLibrary.removeElement(this._jsPlumb.div)},computeMaxSize:function(){var a=f(this);return Math.max(a[0],a[1])},reattachListeners:function(a){this._jsPlumb.div&&this.reattachListenersForElement(this._jsPlumb.div,this,a)},paint:function(a){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this.attachListeners(this._jsPlumb.div,a.component),this._jsPlumb.initialised=!0),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),jsPlumb.Overlays.Custom=function(){this.type="Custom",g.apply(this,arguments)},jsPlumbUtil.extend(jsPlumb.Overlays.Custom,g),jsPlumb.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",e.apply(this,arguments),jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b){var c=b.pointAlongPathFrom(a.loc,a.length/2),d=b.pointOnPath(a.loc),e=jsPlumbGeom.pointOnLine(c,d,a.length),f=jsPlumbGeom.perpendicularLineTo(c,e,40),g=jsPlumbGeom.perpendicularLineTo(e,c,20);return{connector:b,head:c,tail:e,headLine:g,tailLine:f,minX:Math.min(c.x,e.x,g[0].x,g[1].x),minY:Math.min(c.y,e.y,g[0].y,g[1].y),maxX:Math.max(c.x,e.x,g[0].x,g[1].x),maxY:Math.max(c.y,e.y,g[0].y,g[1].y)}}},jsPlumb.Overlays.Label=function(a){this.labelStyle=a.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var b=jsPlumb.extend({create:function(){return document.createElement("div")}},a);if(jsPlumb.Overlays.Custom.call(this,b),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var c=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",c.style.font=this.labelStyle.font,c.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(c.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var d=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";c.style.border=this.labelStyle.borderWidth+"px solid "+d}this.labelStyle.padding&&(c.style.padding=this.labelStyle.padding)}},jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),g.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))}})}(),function(){var a=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var b,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=null==a.midpoint?.5:a.midpoint,e=[],f=(a.grid,a.alwaysRespectStubs),g=null,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=function(a){return 0>a?-1:0===a?0:1},l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,d){for(var e,f,g=0;g<b.length-1;g++){if(e=e||n(b[g]),f=n(b[g+1]),j>0&&e[4]!=f[4]){var h=Math.min(j,m(e),m(f));e[2]-=e[5]*h,e[3]-=e[6]*h,f[0]+=f[5]*h,f[1]+=f[6]*h;var i=e[6]==f[5]&&1==f[5]||e[6]==f[5]&&0===f[5]&&e[5]!=f[6]||e[6]==f[5]&&-1==f[5],k=f[1]>e[3]?1:-1,l=f[0]>e[2]?1:-1,o=k==l,p=o&&i||!o&&!i?f[0]:e[2],q=o&&i||!o&&!i?e[3]:f[1];c.addSegment(a,"Straight",{x1:e[0],y1:e[1],x2:e[2],y2:e[3]}),c.addSegment(a,"Arc",{r:h,x1:e[2],y1:e[3],x2:f[0],y2:f[1],cx:p,cy:q,ac:i})
}else{var r=e[2]==e[0]?0:e[2]>e[0]?d.lw/2:-(d.lw/2),s=e[3]==e[1]?0:e[3]>e[1]?d.lw/2:-(d.lw/2);c.addSegment(a,"Straight",{x1:e[0]-r,y1:e[1]-s,x2:e[2]+r,y2:e[3]+s})}e=f}c.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(a){g=a},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return g||e},this._compute=function(a,j){if(j.clearEdits&&(g=null),null!=g)return o(this,g,a),void 0;e=[],h=null,i=null,b=null;var k=a.startStubX+(a.endStubX-a.startStubX)*d,m=a.startStubY+(a.endStubY-a.startStubY)*d,n={x:[0,1],y:[1,0]},p=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},q={perpendicular:p,orthogonal:p,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1==c.so[d]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1==c.so[d]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!f&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},r={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[k,c.startStubY],[k,c.endStubY]],y:[[c.startStubX,m],[c.endStubX,m]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,m],[c.endStubX,m],[c.endStubX,c.endStubY]],y:[[k,c.startStubY],[k,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},l=n[b][0],o=n[b][1],p=c.so[l]+1,q=c.to[o]+1,r=-1==c.to[o]&&j[b][1]<j[b][0]||1==c.to[o]&&j[b][1]>j[b][0],s=e[b][p][0],t=e[b][p][1],u=d[b][p][q];return c.segment==u[3]||c.segment==u[2]&&r?f[b]:c.segment==u[2]&&s>t?g[b]:c.segment==u[2]&&t>=s||c.segment==u[1]&&!r?i[b]:c.segment==u[0]||c.segment==u[1]&&r?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(b,d,e,f){var g=a,h={x:"y",y:"x"}[b],i={x:"height",y:"width"}[b],l=g["is"+b.toUpperCase()+"GreaterThanStubTimes2"];if(j.sourceEndpoint.elementId==j.targetEndpoint.elementId){var n=e+(1-j.sourceEndpoint.anchor[h])*j.sourceInfo[i]+c.maxStub;return{x:[[d,n],[f,n]],y:[[n,d],[n,f]]}[b]}return!l||1==g.so[t]&&d>f||-1==g.so[t]&&f>d?{x:[[d,m],[f,m]],y:[[k,d],[k,f]]}[b]:1==g.so[t]&&f>d||-1==g.so[t]&&d>f?{x:[[k,g.sy],[k,g.ty]],y:[[g.sx,m],[g.tx,m]]}[b]:void 0}},s=q[a.anchorOrientation](a.sourceAxis),t="x"==a.sourceAxis?0:1,u="x"==a.sourceAxis?1:0,v=s[t],w=s[u],x=s[t+2],y=s[u+2];l(e,s[0],s[1],a);var z=r[a.anchorOrientation](a.sourceAxis,v,w,x,y);if(z)for(var A=0;A<z.length;A++)l(e,z[A][0],z[A][1],a);l(e,s[2],s[3],a),l(e,a.tx,a.ty,a),o(this,e,a)},this.getPath=function(){for(var a=null,b=null,c=[],d=g||e,f=0;f<d.length;f++){var h=d[f],i=h[4],j="v"==i?3:2;null!=a&&b===i?a[j]=h[j]:(h[0]!=h[2]||h[1]!=h[3])&&(c.push({start:[h[0],h[1]],end:[h[2],h[3]]}),a=h,b=h[4])}return c},this.setPath=function(a){g=[];for(var b=0;b<a.length;b++){var c=a[b].start[0],d=a[b].start[1],e=a[b].end[0],f=a[b].end[1],h=c==e?"v":"h",i=k(e-c),j=k(f-d);g.push([c,d,e,f,h,i,j])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Flowchart")}(),function(){var a=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0},c=function(c){c=c||{},this.type="StateMachine";var d=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=c.curviness||10,f=c.margin||5,g=c.proximityLimit||80,h=c.orientation&&"clockwise"===c.orientation,i=c.loopbackRadius||25,j=c.showLoopback!==!1;this._compute=function(c,k){var l=Math.abs(k.sourcePos[0]-k.targetPos[0]),m=Math.abs(k.sourcePos[1]-k.targetPos[1]);if(Math.min(k.sourcePos[0],k.targetPos[0]),Math.min(k.sourcePos[1],k.targetPos[1]),j&&k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var n=k.sourcePos[0],o=(k.sourcePos[0],k.sourcePos[1]-f),p=(k.sourcePos[1]-f,n),q=o-i,r=2*i,s=2*i,t=p-i,u=q-i;c.points[0]=t,c.points[1]=u,c.points[2]=r,c.points[3]=s,d.addSegment(this,"Arc",{loopback:!0,x1:n-t+4,y1:o-u,startAngle:0,endAngle:2*Math.PI,r:i,ac:!h,x2:n-t-4,y2:o-u,cx:p-t,cy:q-u})}else{var v=k.sourcePos[0]<k.targetPos[0]?0:l,w=k.sourcePos[1]<k.targetPos[1]?0:m,x=k.sourcePos[0]<k.targetPos[0]?l:0,y=k.sourcePos[1]<k.targetPos[1]?m:0;0===k.sourcePos[2]&&(v-=f),1===k.sourcePos[2]&&(v+=f),0===k.sourcePos[3]&&(w-=f),1===k.sourcePos[3]&&(w+=f),0===k.targetPos[2]&&(x-=f),1===k.targetPos[2]&&(x+=f),0===k.targetPos[3]&&(y-=f),1===k.targetPos[3]&&(y+=f);var z=(v+x)/2,A=(w+y)/2,B=-1*z/A,C=Math.atan(B),D=(1/0==B||B==-1/0?0:Math.abs(e/2*Math.sin(C)),1/0==B||B==-1/0?0:Math.abs(e/2*Math.cos(C)),a(v,w,x,y)),E=Math.sqrt(Math.pow(x-v,2)+Math.pow(y-w,2)),F=b(z,A,D,k.sourcePos,k.targetPos,e,e,E,g);d.addSegment(this,"Bezier",{x1:x,y1:y,x2:v,y2:w,cp1x:F[0],cp1y:F[1],cp2x:F[0],cp2y:F[1]})}}};jsPlumb.registerConnectorType(c,"StateMachine")}(),function(){var a=function(a){a=a||{};var b=this,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=(a.stub||50,a.curviness||150),e=10;this.type="Bezier",this.getCurviness=function(){return d},this._findControlPoint=function(a,b,c,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(c[0]<b[0]?a[0]+e:a[0]-e):k.push(a[0]+d*i[0]),0===i[1]?k.push(c[1]<b[1]?a[1]+e:a[1]-e):k.push(a[1]+d*h[1])):(0===h[0]?k.push(b[0]<c[0]?a[0]+e:a[0]-e):k.push(a[0]-d*h[0]),0===h[1]?k.push(b[1]<c[1]?a[1]+e:a[1]-e):k.push(a[1]+d*i[1])),k},this._compute=function(a,d){var e=d.sourcePos,f=d.targetPos,g=Math.abs(e[0]-f[0]),h=Math.abs(e[1]-f[1]),i=e[0]<f[0]?g:0,j=e[1]<f[1]?h:0,k=e[0]<f[0]?0:g,l=e[1]<f[1]?0:h,m=b._findControlPoint([i,j],e,f,d.sourceEndpoint,d.targetEndpoint),n=b._findControlPoint([k,l],f,e,d.targetEndpoint,d.sourceEndpoint);c.addSegment(this,"Bezier",{x1:i,y1:j,x2:k,y2:l,cp1x:m[0],cp1y:m[1],cp2x:n[0],cp2y:n[1]})}};jsPlumb.registerConnectorType(a,"Bezier")}(),function(){var a=null,b=function(a,b){return jsPlumb.CurrentLibrary.hasClass(c(a),b)},c=function(a){return jsPlumb.CurrentLibrary.getElementObject(a)},d=function(a){return jsPlumb.CurrentLibrary.getOffset(c(a))},e=function(a){return jsPlumb.CurrentLibrary.getPageXY(a)},f=function(a){return jsPlumb.CurrentLibrary.getClientXY(a)},g=window.CanvasMouseAdapter=function(){var g=this;this.overlayPlacements=[],jsPlumb.jsPlumbUIComponent.apply(this,arguments),jsPlumbUtil.EventGenerator.apply(this,arguments),this._over=function(a){var b=d(c(g.canvas)),f=e(a),h=f[0]-b.left,i=f[1]-b.top;if(h>0&&i>0&&h<g.canvas.width&&i<g.canvas.height){for(var j=0;j<g.overlayPlacements.length;j++){var k=g.overlayPlacements[j];if(k&&k[0]<=h&&k[1]>=h&&k[2]<=i&&k[3]>=i)return!0}var l=g.canvas.getContext("2d").getImageData(parseInt(h,10),parseInt(i,10),1,1);return 0!==l.data[0]||0!==l.data[1]||0!==l.data[2]||0!==l.data[3]}return!1};var h=!1,i=!1,j=null,k=!1,l=function(a,c){return null!==a&&b(a,c)};this.mousemove=function(b){var c=(e(b),f(b)),d=document.elementFromPoint(c[0],c[1]),i=l(d,"_jsPlumb_overlay"),j=null===a&&(l(d,"_jsPlumb_endpoint")||l(d,"_jsPlumb_connector"));return!h&&j&&g._over(b)?(h=!0,g.fire("mouseenter",g,b),!0):(!h||g._over(b)&&j||i||(h=!1,g.fire("mouseexit",g,b)),g.fire("mousemove",g,b),void 0)},this.click=function(a){h&&g._over(a)&&!k&&g.fire("click",g,a),k=!1},this.dblclick=function(a){h&&g._over(a)&&!k&&g.fire("dblclick",g,a),k=!1},this.mousedown=function(a){g._over(a)&&!i&&(i=!0,j=d(c(g.canvas)),g.fire("mousedown",g,a))},this.mouseup=function(a){i=!1,g.fire("mouseup",g,a)},this.contextmenu=function(a){h&&g._over(a)&&!k&&g.fire("contextmenu",g,a),k=!1}};jsPlumbUtil.extend(g,[jsPlumb.jsPlumbUIComponent,jsPlumbUtil.EventGenerator]);var h=function(a){var b=document.createElement("canvas");return a._jsPlumb.instance.appendElement(b,a.parent),b.style.position="absolute",a["class"]&&(b.className=a["class"]),a._jsPlumb.instance.getId(b,a.uuid),a.tooltip&&b.setAttribute("title",a.tooltip),b},i=window.CanvasComponent=function(){g.apply(this,arguments);var a=[];this.getDisplayElements=function(){return a},this.appendDisplayElement=function(b){a.push(b)}};jsPlumbUtil.extend(i,g,{setVisible:function(a){this.canvas.style.display=a?"block":"none"}});var j=[null,[1,-1],[1,1],[-1,1],[-1,-1]],k=function(a,b,c){if(b.gradient){for(var d=c(),e=0;e<b.gradient.stops.length;e++)d.addColorStop(b.gradient.stops[e][0],b.gradient.stops[e][1]);a.strokeStyle=d}},l=function(a,b,c,d,e){({Straight:function(a,b,c,d,e){var f=a.params;if(b.save(),k(b,c,function(){return b.createLinearGradient(f.x1,f.y1,f.x2,f.y2)}),b.beginPath(),b.translate(d,e),c.dashstyle&&2===c.dashstyle.split(" ").length){var g=c.dashstyle.split(" ");2!==g.length&&(g=[2,2]);for(var h=[g[0]*c.lineWidth,g[1]*c.lineWidth],i=(f.x2-f.x1)/(f.y2-f.y1),l=jsPlumbUtil.segment([f.x1,f.y1],[f.x2,f.y2]),m=j[l],n=Math.atan(i),o=Math.sqrt(Math.pow(f.x2-f.x1,2)+Math.pow(f.y2-f.y1,2)),p=Math.floor(o/(h[0]+h[1])),q=[f.x1,f.y1],r=0;p>r;r++){b.moveTo(q[0],q[1]);var s=q[0]+Math.abs(Math.sin(n)*h[0])*m[0],t=q[1]+Math.abs(Math.cos(n)*h[0])*m[1],u=q[0]+Math.abs(Math.sin(n)*(h[0]+h[1]))*m[0],v=q[1]+Math.abs(Math.cos(n)*(h[0]+h[1]))*m[1];b.lineTo(s,t),q=[u,v]}b.moveTo(q[0],q[1]),b.lineTo(f.x2,f.y2)}else b.moveTo(f.x1,f.y1),b.lineTo(f.x2,f.y2);b.stroke(),b.restore()},Bezier:function(a,b,c,d,e){var f=a.params;b.save(),k(b,c,function(){return b.createLinearGradient(f.x2+d,f.y2+e,f.x1+d,f.y1+e)}),b.beginPath(),b.translate(d,e),b.moveTo(f.x1,f.y1),b.bezierCurveTo(f.cp1x,f.cp1y,f.cp2x,f.cp2y,f.x2,f.y2),b.stroke(),b.restore()},Arc:function(a,b,c,d,e){var f=a.params;b.save(),b.beginPath(),b.translate(d,e),b.arc(f.cx,f.cy,f.r,a.startAngle,a.endAngle,f.ac),b.stroke(),b.restore()}})[a.type](a,b,c,d,e)},m=jsPlumb.ConnectorRenderers.canvas=function(a){i.apply(this,arguments);var b=function(a,b,c){this.ctx.save(),jsPlumb.extend(this.ctx,a);for(var d=this.getSegments(),e=0;e<d.length;e++)l(d[e],this.ctx,a,b,c);this.ctx.restore()}.bind(this),c=this._jsPlumb.instance.connectorClass+" "+(a.cssClass||"");this.canvas=h({"class":c,_jsPlumb:this._jsPlumb,parent:a.parent}),this.ctx=this.canvas.getContext("2d"),this.appendDisplayElement(this.canvas),this.paint=function(a,c,d){if(null!=a){var e=[this.x,this.y],f=[this.w,this.h],g=0,h=0;if(null!=d&&(d.xmin<0&&(e[0]+=d.xmin,g=-d.xmin),d.ymin<0&&(e[1]+=d.ymin,h=-d.ymin),f[0]=d.xmax+(d.xmin<0?-d.xmin:0),f[1]=d.ymax+(d.ymin<0?-d.ymin:0)),this.translateX=g,this.translateY=h,jsPlumbUtil.sizeElement(this.canvas,e[0],e[1],f[0],f[1]),null!=a.outlineColor){var i=a.outlineWidth||1,j=a.lineWidth+2*i,k={strokeStyle:a.outlineColor,lineWidth:j};b(k,g,h)}b(a,g,h)}}};jsPlumbUtil.extend(m,i);var n=function(a){i.apply(this,arguments);var b=this._jsPlumb.instance.endpointClass+" "+(a.cssClass||""),c={"class":b,_jsPlumb:this._jsPlumb,parent:a.parent,tooltip:self.tooltip};this.canvas=h(c),this.ctx=this.canvas.getContext("2d"),this.appendDisplayElement(this.canvas),this.paint=function(a){if(jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null!=a.outlineColor){var b=a.outlineWidth||1,c=a.lineWidth+2*b;({strokeStyle:a.outlineColor,lineWidth:c})}this._paint.apply(this,arguments)}};jsPlumbUtil.extend(n,i),jsPlumb.Endpoints.canvas.Dot=function(a){jsPlumb.Endpoints.Dot.apply(this,arguments),n.apply(this,arguments);var b=this,c=function(a){try{return parseInt(a,10)}catch(b){if("%"==a.substring(a.length-1))return parseInt(a.substring(0,a-1),10)}},d=function(a){var d=b.defaultOffset,e=b.defaultInnerRadius;return a.offset&&(d=c(a.offset)),a.innerRadius&&(e=c(a.innerRadius)),[d,e]};this._paint=function(c){if(null!=c){var e=b.canvas.getContext("2d"),f=a.endpoint.anchor.getOrientation(a.endpoint);if(jsPlumb.extend(e,c),c.gradient){for(var g=d(c.gradient),h=1==f[1]?-1*g[0]:g[0],i=1==f[0]?-1*g[0]:g[0],j=e.createRadialGradient(b.radius,b.radius,b.radius,b.radius+i,b.radius+h,g[1]),k=0;k<c.gradient.stops.length;k++)j.addColorStop(c.gradient.stops[k][0],c.gradient.stops[k][1]);e.fillStyle=j}e.beginPath(),e.arc(b.radius,b.radius,b.radius,0,2*Math.PI,!0),e.closePath(),(c.fillStyle||c.gradient)&&e.fill(),c.strokeStyle&&e.stroke()}}},jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Dot,[jsPlumb.Endpoints.Dot,n]),jsPlumb.Endpoints.canvas.Rectangle=function(a){var b=this;jsPlumb.Endpoints.Rectangle.apply(this,arguments),n.apply(this,arguments),this._paint=function(c){var d=b.canvas.getContext("2d"),e=a.endpoint.anchor.getOrientation(a.endpoint);if(jsPlumb.extend(d,c),c.gradient){for(var f=1==e[1]?b.h:0===e[1]?b.h/2:0,g=-1==e[1]?b.h:0===e[1]?b.h/2:0,h=1==e[0]?b.w:0===e[0]?b.w/2:0,i=-1==e[0]?b.w:0===e[0]?b.w/2:0,j=d.createLinearGradient(h,f,i,g),k=0;k<c.gradient.stops.length;k++)j.addColorStop(c.gradient.stops[k][0],c.gradient.stops[k][1]);d.fillStyle=j}d.beginPath(),d.rect(0,0,b.w,b.h),d.closePath(),(c.fillStyle||c.gradient)&&d.fill(),c.strokeStyle&&d.stroke()}},jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Rectangle,[jsPlumb.Endpoints.Rectangle,n]),jsPlumb.Endpoints.canvas.Triangle=function(a){var b=this;jsPlumb.Endpoints.Triangle.apply(this,arguments),n.apply(this,arguments),this._paint=function(c){var d=b.canvas.getContext("2d"),e=0,f=0,g=0,h=a.endpoint.anchor.getOrientation(a.endpoint);1==h[0]&&(e=b.width,f=b.height,g=180),-1==h[1]&&(e=b.width,g=90),1==h[1]&&(f=b.height,g=-90),d.fillStyle=c.fillStyle,d.translate(e,f),d.rotate(g*Math.PI/180),d.beginPath(),d.moveTo(0,0),d.lineTo(b.width/2,b.height/2),d.lineTo(0,b.height),d.closePath(),(c.fillStyle||c.gradient)&&d.fill(),c.strokeStyle&&d.stroke()}},jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Triangle,[jsPlumb.Endpoints.Triangle,n]),jsPlumb.Endpoints.canvas.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.canvas.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.canvas.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.canvas.Custom=jsPlumb.Overlays.Custom;var o=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments)};jsPlumbUtil.extend(o,jsPlumb.jsPlumbUIComponent,{setVisible:function(a){this.visible=a,this.component.repaint()}});var p=function(a,b){a.apply(this,b),o.apply(this,b),this.paint=function(a){var b=a.component.ctx,c=a.d;c&&(b.save(),b.lineWidth=a.lineWidth,b.beginPath(),b.translate(a.component.translateX,a.component.translateY),b.moveTo(c.hxy.x,c.hxy.y),b.lineTo(c.tail[0].x,c.tail[0].y),b.lineTo(c.cxy.x,c.cxy.y),b.lineTo(c.tail[1].x,c.tail[1].y),b.lineTo(c.hxy.x,c.hxy.y),b.closePath(),a.strokeStyle&&(b.strokeStyle=a.strokeStyle,b.stroke()),a.fillStyle&&(b.fillStyle=a.fillStyle,b.fill()),b.restore())}};jsPlumb.Overlays.canvas.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.canvas.Arrow,[jsPlumb.Overlays.Arrow,o]),jsPlumb.Overlays.canvas.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.canvas.PlainArrow,[jsPlumb.Overlays.PlainArrow,o]),jsPlumb.Overlays.canvas.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.canvas.Diamond,[jsPlumb.Overlays.Diamond,o])}(),function(){var a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="fill",g="stop",h="stroke",i="stroke-width",j="style",k="none",l="jsplumb_gradient_",m="lineWidth",n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},o=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},p=function(a,b){var c=document.createElementNS(n.svg,a);return b=b||{},b.version="1.1",b.xmlns=n.xhtml,o(c,b),c},q=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},r=function(a){for(var b=0;b<a.childNodes.length;b++)(a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&&a.removeChild(a.childNodes[b])},s=function(a,b,c,i,k){var m=l+k._jsPlumb.instance.idstamp();r(a);var n;n=c.gradient.offset?p(e,{id:m}):p(d,{id:m,gradientUnits:"userSpaceOnUse"}),a.appendChild(n);for(var o=0;o<c.gradient.stops.length;o++){var q=1==k.segment||2==k.segment?o:c.gradient.stops.length-1-o,s=jsPlumbUtil.convertStyle(c.gradient.stops[q][1],!0),t=p(g,{offset:Math.floor(100*c.gradient.stops[o][0])+"%","stop-color":s});n.appendChild(t)}var u=c.strokeStyle?h:f;b.setAttribute(j,u+":url("+document.location.toString()+"#"+m+")")},t=function(d,e,g,l,n){if(g.gradient?s(d,e,g,l,n):(r(d),e.setAttribute(j,"")),e.setAttribute(f,g.fillStyle?jsPlumbUtil.convertStyle(g.fillStyle,!0):k),e.setAttribute(h,g.strokeStyle?jsPlumbUtil.convertStyle(g.strokeStyle,!0):k),g.lineWidth&&e.setAttribute(i,g.lineWidth),g[c]&&g[m]&&!g[b]){var o=-1==g[c].indexOf(",")?" ":",",p=g[c].split(o),q="";p.forEach(function(a){q+=Math.floor(a*g.lineWidth)+o}),e.setAttribute(b,q)}else g[b]&&e.setAttribute(b,g[b]);for(var t in a)g[t]&&e.setAttribute(a[t],g[t])},u=function(a,b,c){for(var d=c.split(" "),e=a.className,f=e.baseVal.split(" "),g=0;g<d.length;g++)if(b)-1==f.indexOf(d[g])&&f.push(d[g]);else{var h=f.indexOf(d[g]);-1!=h&&f.splice(h,1)}a.className.baseVal=f.join(" ")},v=function(a,b){u(a,!0,b)},w=function(a,b){u(a,!1,b)},x=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};jsPlumbUtil.svg={addClass:v,removeClass:w,node:p,attr:o,pos:q};var y=function(a){var b=a.pointerEventsSpec||"all",c={};jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null;var d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":b,position:"absolute"};this.svg=p("svg",e),a.useDivWrapper?(this.canvas=document.createElement("div"),this.canvas.style.position="absolute",jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=d):(o(this.svg,{"class":d}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var f=[this.canvas];return this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(b,d,e){if(null!=b){var f,g=[this.x,this.y],h=[this.w,this.h];null!=e&&(e.xmin<0&&(g[0]+=e.xmin),e.ymin<0&&(g[1]+=e.ymin),h[0]=e.xmax+(e.xmin<0?-e.xmin:0),h[1]=e.ymax+(e.ymin<0?-e.ymin:0)),a.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,g[0],g[1],h[0],h[1]),g[0]=0,g[1]=0,f=q([0,0])):f=q([g[0],g[1]]),c.paint.apply(this,arguments),o(this.svg,{style:f,width:h[0],height:h[1]})}},{renderer:c}};jsPlumbUtil.extend(y,jsPlumb.jsPlumbUIComponent,{cleanup:function(){jsPlumbUtil.removeElement(this.canvas),this.svg=null,this.canvas=null,this.path=null},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}}),jsPlumb.ConnectorRenderers.svg=function(a){var b=this,c=y.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(c,d,e){var f=b.getSegments(),g="",h=[0,0];e.xmin<0&&(h[0]=-e.xmin),e.ymin<0&&(h[1]=-e.ymin);for(var i=0;i<f.length;i++)g+=jsPlumb.Segments.svg.SegmentRenderer.getPath(f[i]),g+=" ";var j={d:g,transform:"translate("+h[0]+","+h[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},k=null,l=[b.x,b.y,b.w,b.h];if(c.outlineColor){var m=c.outlineWidth||1,n=c.lineWidth+2*m;k=jsPlumb.CurrentLibrary.extend({},c),k.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),k.lineWidth=n,null==b.bgPath?(b.bgPath=p("path",j),x(b.svg,b.bgPath,0),b.attachListeners(b.bgPath,b)):o(b.bgPath,j),t(b.svg,b.bgPath,k,l,b)}null==b.path?(b.path=p("path",j),x(b.svg,b.path,c.outlineColor?1:0),b.attachListeners(b.path,b)):o(b.path,j),t(b.svg,b.path,c,l,b)},this.reattachListeners=function(){this.bgPath&&this.reattachListenersForElement(this.bgPath,this),this.path&&this.reattachListenersForElement(this.path,this)}},jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,y),jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var z=window.SvgEndpoint=function(a){var b=y.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);b.renderer.paint=function(a){var b=jsPlumb.extend({},a);b.outlineColor&&(b.strokeWidth=b.outlineWidth,b.strokeStyle=jsPlumbUtil.convertStyle(b.outlineColor,!0)),null==this.node?(this.node=this.makeNode(b),this.svg.appendChild(this.node),this.attachListeners(this.node,this)):null!=this.updateNode&&this.updateNode(this.node),t(this.svg,this.node,b,[this.x,this.y,this.w,this.h],this),q(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(z,y,{reattachListeners:function(){this.node&&this.reattachListenersForElement(this.node,this)}}),jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),z.apply(this,arguments),this.makeNode=function(){return p("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){o(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,z]),jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),z.apply(this,arguments),this.makeNode=function(){return p("rect",{width:this.w,height:this.h})},this.updateNode=function(a){o(a,{width:this.w,height:this.h})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,z]),jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var A=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(a,d){if(a.component.svg&&d){null==this.path&&(this.path=p("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.attachListeners(this.path,a.component),this.attachListeners(this.path,this));var e=b&&1==b.length?b[0].cssClass||"":"",f=[0,0];d.xmin<0&&(f[0]=-d.xmin),d.ymin<0&&(f[1]=-d.ymin),o(this.path,{d:c(a.d),"class":e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var c=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.reattachListeners=function(){this.path&&this.reattachListenersForElement(this.path,this)}};jsPlumbUtil.extend(A,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){null!=this.path&&jsPlumb.CurrentLibrary.removeElement(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),jsPlumb.Overlays.svg.Arrow=function(){A.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,A]),jsPlumb.Overlays.svg.PlainArrow=function(){A.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,A]),jsPlumb.Overlays.svg.Diamond=function(){A.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,A]),jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g){null==c&&(c=p("path"),f.connector.svg.appendChild(c),d.attachListeners(c,f.connector),d.attachListeners(c,d),a=p("path"),f.connector.svg.appendChild(a),d.attachListeners(a,f.connector),d.attachListeners(a,d),b=p("path"),f.connector.svg.appendChild(b),d.attachListeners(b,f.connector),d.attachListeners(b,d));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),o(c,{d:e(f.head,f.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),o(a,{d:e(f.tailLine[0],f.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),o(b,{d:e(f.headLine[0],f.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var e=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)}(),function(){var a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){var c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;";b=document.createStyleSheet();for(var e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement("jsplumb:"+a);return f?e.appendElement(h,d):jsPlumb.CurrentLibrary.appendElement(h,d),h.className=(c["class"]?c["class"]+" ":"")+"jsplumb_vml",i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked="true";var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"}else e.stroked="false";if(b.fillStyle){e.filled="true";var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,"fill",c)}else e.filled="false";if(b.dashstyle)null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(var j=-1==b["stroke-dasharray"].indexOf(",")?" ":",",l=b["stroke-dasharray"].split(j),m="",n=0;n<l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance),a.opacityNodes.fill=h("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}};jsPlumbUtil.extend(m,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&jsPlumbUtil.removeElement(this.bgCanvas),jsPlumbUtil.removeElement(this.canvas)}});var n=jsPlumb.ConnectorRenderers.vml=function(b){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var c=this._jsPlumb.instance.connectorClass+(b.cssClass?" "+b.cssClass:"");this.paint=function(d){if(null!==d){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var e=this.getSegments(),j={path:""},k=[this.x,this.y,this.w,this.h],m=0;m<e.length;m++)j.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(e[m]),j.path+=" ";if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n,p={strokeStyle:jsPlumbUtil.convertStyle(d.outlineColor),lineWidth:o};for(var q in a)p[q]=d[q];null==this.bgCanvas?(j["class"]=c,j.coordsize=k[2]*f+","+k[3]*f,this.bgCanvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),i(this.bgCanvas,k),this.appendDisplayElement(this.bgCanvas,!0),this.attachListeners(this.bgCanvas,this),this.initOpacityNodes(this.bgCanvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.bgCanvas,k),g(this.bgCanvas,j)),l(this.bgCanvas,p,this)}null==this.canvas?(j["class"]=c,j.coordsize=k[2]*f+","+k[3]*f,this.canvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.attachListeners(this.canvas,this),this.initOpacityNodes(this.canvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.canvas,k),g(this.canvas,j)),l(this.canvas,d,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(n,m,{reattachListeners:function(){this.canvas&&this.reattachListenersForElement(this.canvas,this)},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}});var o=window.VmlEndpoint=function(a){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(a.cssClass?" "+a.cssClass:""),a._jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(a,b){var c={},d=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(c["class"]=this._jsPlumb.clazz,d=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],c,b,this.canvas,this._jsPlumb.instance),this.attachListeners(d,this),this.appendDisplayElement(d,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(d,["fill"])):(i(d,[0,0,this.w,this.h]),g(d,c)),l(d,a,this)}};jsPlumbUtil.extend(o,m,{reattachListeners:function(){this._jsPlumb.vml&&this.reattachListenersForElement(this._jsPlumb.vml,this)}}),jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(a){return{Straight:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" l"+j(b.x2)+","+j(b.y2)+" e"},Bezier:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" c"+j(b.cp1x)+","+j(b.cp1y)+","+j(b.cp2x)+","+j(b.cp2y)+","+j(b.x2)+","+j(b.y2)+" e"},Arc:function(a){var b=a.params,c=Math.min(b.x1,b.x2),d=(Math.max(b.x1,b.x2),Math.min(b.y1,b.y2)),e=(Math.max(b.y1,b.y2),a.anticlockwise?1:0),f=a.anticlockwise?"at ":"wa ",g=function(){if(b.loopback)return"0,0,"+j(2*b.r)+","+j(2*b.r);var f=[null,[function(){return[c,d]},function(){return[c-b.r,d-b.r]}],[function(){return[c-b.r,d]},function(){return[c,d-b.r]}],[function(){return[c-b.r,d-b.r]},function(){return[c,d]}],[function(){return[c,d-b.r]},function(){return[c-b.r,d]}]][a.segment][e]();return j(f[0])+","+j(f[1])+","+j(f[0]+2*b.r)+","+j(f[1]+2*b.r)};return f+" "+g()+","+j(b.x1)+","+j(b.y1)+","+j(b.x2)+","+j(b.y2)+" e"}}[a.type](a)}}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("oval",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o),jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("rect",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o),jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;
var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;c.canvas=null,c.isAppendedAtTopLevel=!0;var d=function(a){return"m "+j(a.hxy.x)+","+j(a.hxy.y)+" l "+j(a.tail[0].x)+","+j(a.tail[0].y)+" "+j(a.cxy.x)+","+j(a.cxy.y)+" "+j(a.tail[1].x)+","+j(a.tail[1].y)+" x e"};this.paint=function(a,e){if(a.component.canvas&&e){var j={},k=a.d,l=a.component;a.strokeStyle&&(j.stroked="true",j.strokecolor=jsPlumbUtil.convertStyle(a.strokeStyle,!0)),a.lineWidth&&(j.strokeweight=a.lineWidth+"px"),a.fillStyle&&(j.filled="true",j.fillcolor=a.fillStyle);var m=Math.min(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),n=Math.min(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),o=Math.max(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),p=Math.max(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),q=Math.abs(o-m),r=Math.abs(p-n),s=[m,n,q,r];if(j.path=d(k),j.coordsize=l.w*f+","+l.h*f,s[0]=l.x,s[1]=l.y,s[2]=l.w,s[3]=l.h,null==c.canvas){var t=l._jsPlumb.overlayClass||"",u=b&&1==b.length?b[0].cssClass||"":"";j["class"]=u+" "+t,c.canvas=h("shape",s,j,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,l),c.attachListeners(c.canvas,c)}else i(c.canvas,s),g(c.canvas,j)}},this.reattachListeners=function(){c.canvas&&c.reattachListenersForElement(c.canvas,c)},this.cleanup=function(){null!=c.canvas&&jsPlumb.CurrentLibrary.removeElement(c.canvas)}};jsPlumbUtil.extend(p,[m,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(a){this.canvas.style.display=a?"block":"none"}}),jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,p]),jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,p]),jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,p])}(),function(a){var b=function(b){return"string"==typeof b?a("#"+b):a(b)};jsPlumb.CurrentLibrary={addClass:function(a,c){a=b(a);try{a[0].className.constructor==SVGAnimatedString&&jsPlumbUtil.svg.addClass(a[0],c)}catch(d){}try{a.addClass(c)}catch(d){}},animate:function(a,b,c){a.animate(b,c)},appendElement:function(a,c){b(c).append(a)},ajax:function(b){b=b||{},b.type=b.type||"get",a.ajax(b)},bind:function(a,c,d){a=b(a),a.bind(c,d)},destroyDraggable:function(b){a(b).data("draggable")&&a(b).draggable("destroy")},destroyDroppable:function(b){a(b).data("droppable")&&a(b).droppable("destroy")},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},extend:function(b,c){return a.extend(b,c)},getClientXY:function(a){return[a.clientX,a.clientY]},getDragObject:function(a){return a[1].draggable||a[1].helper},getDragScope:function(b){return a(b).draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(b){return a(b).droppable("option","scope")},getDOMElement:function(a){return null==a?null:"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:b,getOffset:function(a){return a.offset()},getOriginalEvent:function(a){return a.originalEvent},getPageXY:function(a){return[a.pageX,a.pageY]},getParent:function(a){return b(a).parent()},getScrollLeft:function(a){return a.scrollLeft()},getScrollTop:function(a){return a.scrollTop()},getSelector:function(c,d){return 2==arguments.length?b(c).find(d):a(c)},getSize:function(b){return b=a(b),[b.outerWidth(),b.outerHeight()]},getTagName:function(a){var c=b(a);return c.length>0?c[0].tagName:null},getUIPosition:function(a,b){if(b=b||1,1==a.length)ret={left:a[0].pageX,top:a[0].pageY};else{var c=a[1],d=c.offset;ret=d||c.absolutePosition,c.position.left/=b,c.position.top/=b}return{left:ret.left/b,top:ret.top/b}},hasClass:function(a,b){return a.hasClass(b)},initDraggable:function(b,c,d,e){c=c||{},b=a(b),c.start=jsPlumbUtil.wrap(c.start,function(){a("body").addClass(e.dragSelectClass)},!1),c.stop=jsPlumbUtil.wrap(c.stop,function(){a("body").removeClass(e.dragSelectClass)}),c.doNotRemoveHelper||(c.helper=null),d&&(c.scope=c.scope||jsPlumb.Defaults.Scope),b.draggable(c)},initDroppable:function(b,c){c.scope=c.scope||jsPlumb.Defaults.Scope,a(b).droppable(c)},isAlreadyDraggable:function(b){return a(b).hasClass("ui-draggable")},isDragSupported:function(b){return a(b).draggable},isDropSupported:function(b){return a(b).droppable},removeClass:function(a,c){a=b(a);try{if(a[0].className.constructor==SVGAnimatedString)return jsPlumbUtil.svg.removeClass(a[0],c),void 0}catch(d){}a.removeClass(c)},removeElement:function(a){b(a).remove()},setDragFilter:function(a,b){jsPlumb.CurrentLibrary.isAlreadyDraggable(a)&&a.draggable("option","cancel",b)},setDraggable:function(a,b){a.draggable("option","disabled",!b)},setDragScope:function(a,b){a.draggable("option","scope",b)},setOffset:function(a,c){b(a).offset(c)},trigger:function(a,c,d){var e=jQuery._data(b(a)[0],"handle");e(d)},unbind:function(a,c,d){a=b(a),a.unbind(c,d)}},a(document).ready(jsPlumb.init)}(jQuery);
(()=>{var t={6870:(t,e)=>{"use strict";function n(t,e){return{validate:t,compare:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:n(o,r),time:n(l,c),"date-time":n((function(t){const e=t.split(u);return 2===e.length&&o(e[0])&&l(e[1],!0)}),h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(t){return d.test(t)&&p.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(t){if(f.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/},e.fastFormats={...e.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,r),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(t){const e=i.exec(t);if(!e)return!1;const n=+e[1],o=+e[2],r=+e[3];return o>=1&&o<=12&&r>=1&&r<=(2===o&&function(t){return t%4==0&&(t%100!=0||t%400==0)}(n)?29:s[o])}function r(t,e){if(t&&e)return t>e?1:t<e?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(t,e){const n=a.exec(t);if(!n)return!1;const i=+n[1],s=+n[2],o=+n[3],r=n[5];return(i<=23&&s<=59&&o<=59||23===i&&59===s&&60===o)&&(!e||""!==r)}function c(t,e){if(!t||!e)return;const n=a.exec(t),i=a.exec(e);return n&&i?(t=n[1]+n[2]+n[3]+(n[4]||""))>(e=i[1]+i[2]+i[3]+(i[4]||""))?1:t<e?-1:0:void 0}const u=/t|\s/i;function h(t,e){if(!t||!e)return;const[n,i]=t.split(u),[s,o]=e.split(u),a=r(n,s);return void 0!==a?a||c(i,o):void 0}const d=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const f=/[^\\]\\Z/},5477:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6870),s=n(7963),o=n(3487),r=new o.Name("fullFormats"),a=new o.Name("fastFormats"),l=(t,e={keywords:!0})=>{if(Array.isArray(e))return c(t,e,i.fullFormats,r),t;const[n,o]="fast"===e.mode?[i.fastFormats,a]:[i.fullFormats,r];return c(t,e.formats||i.formatNames,n,o),e.keywords&&s.default(t),t};function c(t,e,n,i){var s,r;null!==(s=(r=t.opts.code).formats)&&void 0!==s||(r.formats=o._`require("ajv-formats/dist/formats").${i}`);for(const i of e)t.addFormat(i,n[i])}l.get=(t,e="full")=>{const n=("fast"===e?i.fastFormats:i.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n},e.default=l,t.exports=l,t.exports.default=l},7963:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const i=n(2227),s=n(3487),o=s.operators,r={formatMaximum:{okStr:"<=",ok:o.LTE,fail:o.GT},formatMinimum:{okStr:">=",ok:o.GTE,fail:o.LT},formatExclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},formatExclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},a={message:({keyword:t,schemaCode:e})=>s.str`should be ${r[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>s._`{comparison: ${r[t].okStr}, limit: ${e}}`};e.formatLimitDefinition={keyword:Object.keys(r),type:"string",schemaType:"string",$data:!0,error:a,code(t){const{gen:e,data:n,schemaCode:o,keyword:a,it:l}=t,{opts:c,self:u}=l;if(!c.validateFormats)return;const h=new i.default(l,u.RULES.all.format.definition,"format");function d(t){return s._`${t}.compare(${n}, ${o}) ${r[a].fail} 0`}h.$data?function(){const n=e.scopeValue("formats",{ref:u.formats,code:c.code.formats}),i=e.const("fmt",s._`${n}[${h.schemaCode}]`);t.fail$data(s.or(s._`typeof ${i} != "object"`,s._`${i} instanceof RegExp`,s._`typeof ${i}.compare != "function"`,d(i)))}():function(){const n=h.schema,i=u.formats[n];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error(`"${a}": format "${n}" does not define "compare" function`);const o=e.scopeValue("formats",{key:n,ref:i,code:c.code.formats?s._`${c.code.formats}${s.getProperty(n)}`:void 0});t.fail$data(d(o))}()},dependencies:["format"]};e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)},1581:(t,e,n)=>{"use strict";n(2227).default;var i=n(3487);const s=n(7159),o=n(3924),r=n(278),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends s.default{_addVocabularies(){super._addVocabularies(),o.default.forEach((t=>this.addVocabulary(t)))}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:t,meta:e}=this.opts;if(!e)return;const n=t?this.$dataMetaSchema(r,a):r;this.addMetaSchema(n,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.ZP=c},7023:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class n{}e._CodeOrName=n,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=i;class s extends n{constructor(t){super(),this._items="string"==typeof t?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const t=this._items[0];return""===t||'""'===t}get str(){var t;return null!==(t=this._str)&&void 0!==t?t:this._str=this._items.reduce(((t,e)=>`${t}${e}`),"")}get names(){var t;return null!==(t=this._names)&&void 0!==t?t:this._names=this._items.reduce(((t,e)=>(e instanceof i&&(t[e.str]=(t[e.str]||0)+1),t)),{})}}function o(t,...e){const n=[t[0]];let i=0;for(;i<e.length;)l(n,e[i]),n.push(t[++i]);return new s(n)}e._Code=s,e.nil=new s(""),e._=o;const r=new s("+");function a(t,...e){const n=[u(t[0])];let i=0;for(;i<e.length;)n.push(r),l(n,e[i]),n.push(r,u(t[++i]));return function(t){let e=1;for(;e<t.length-1;){if(t[e]===r){const n=c(t[e-1],t[e+1]);if(void 0!==n){t.splice(e-1,3,n);continue}t[e++]="+"}e++}}(n),new s(n)}function l(t,e){var n;e instanceof s?t.push(...e._items):e instanceof i?t.push(e):t.push("number"==typeof(n=e)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function c(t,e){if('""'===e)return t;if('""'===t)return e;if("string"==typeof t){if(e instanceof i||'"'!==t[t.length-1])return;return"string"!=typeof e?`${t.slice(0,-1)}${e}"`:'"'===e[0]?t.slice(0,-1)+e.slice(1):void 0}return"string"!=typeof e||'"'!==e[0]||t instanceof i?void 0:`"${t}${e.slice(1)}`}function u(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=a,e.addCodeArg=l,e.strConcat=function(t,e){return e.emptyStr()?t:t.emptyStr()?e:a`${t}${e}`},e.stringify=function(t){return new s(u(t))},e.safeStringify=u,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new s(`.${t}`):o`[${t}]`}},3487:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const i=n(7023),s=n(8490);var o=n(7023);Object.defineProperty(e,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return o.Name}});var r=n(8490);Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return r.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return r.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return r.varKinds}}),e.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&")};class a{optimizeNodes(){return this}optimizeNames(t,e){return this}}class l extends a{constructor(t,e,n){super(),this.varKind=t,this.name=e,this.rhs=n}render({es5:t,_n:e}){const n=t?s.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+e}optimizeNames(t,e){if(t[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,t,e)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(t,e,n){super(),this.lhs=t,this.rhs=e,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,e){if(!(this.lhs instanceof i.Name)||t[this.lhs.str]||this.sideEffects)return this.rhs=$(this.rhs,t,e),this}get names(){return T(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class u extends a{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}}class h extends a{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}}class d extends a{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}}class p extends a{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,e){return this.code=$(this.code,t,e),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class f extends a{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce(((e,n)=>e+n.render(t)),"")}optimizeNodes(){const{nodes:t}=this;let e=t.length;for(;e--;){const n=t[e].optimizeNodes();Array.isArray(n)?t.splice(e,1,...n):n?t[e]=n:t.splice(e,1)}return t.length>0?this:void 0}optimizeNames(t,e){const{nodes:n}=this;let i=n.length;for(;i--;){const s=n[i];s.optimizeNames(t,e)||(O(t,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((t,e)=>D(t,e.names)),{})}}class m extends f{render(t){return"{"+t._n+super.render(t)+"}"+t._n}}class g extends f{}class _ extends m{}_.kind="else";class v extends m{constructor(t,e){super(e),this.condition=t}render(t){let e=`if(${this.condition})`+super.render(t);return this.else&&(e+="else "+this.else.render(t)),e}optimizeNodes(){super.optimizeNodes();const t=this.condition;if(!0===t)return this.nodes;let e=this.else;if(e){const t=e.optimizeNodes();e=this.else=Array.isArray(t)?new _(t):t}return e?!1===t?e instanceof v?e:e.nodes:this.nodes.length?this:new v(A(t),e instanceof v?[e]:e.nodes):!1!==t&&this.nodes.length?this:void 0}optimizeNames(t,e){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(t,e),super.optimizeNames(t,e)||this.else)return this.condition=$(this.condition,t,e),this}get names(){const t=super.names;return T(t,this.condition),this.else&&D(t,this.else.names),t}}v.kind="if";class y extends m{}y.kind="for";class b extends y{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iteration=$(this.iteration,t,e),this}get names(){return D(super.names,this.iteration.names)}}class x extends y{constructor(t,e,n,i){super(),this.varKind=t,this.name=e,this.from=n,this.to=i}render(t){const e=t.es5?s.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${e} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(t)}get names(){const t=T(super.names,this.from);return T(t,this.to)}}class w extends y{constructor(t,e,n,i){super(),this.loop=t,this.varKind=e,this.name=n,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,e){if(super.optimizeNames(t,e))return this.iterable=$(this.iterable,t,e),this}get names(){return D(super.names,this.iterable.names)}}class k extends m{constructor(t,e,n){super(),this.name=t,this.args=e,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}}k.kind="func";class S extends f{render(t){return"return "+super.render(t)}}S.kind="return";class C extends m{render(t){let e="try"+super.render(t);return this.catch&&(e+=this.catch.render(t)),this.finally&&(e+=this.finally.render(t)),e}optimizeNodes(){var t,e;return super.optimizeNodes(),null===(t=this.catch)||void 0===t||t.optimizeNodes(),null===(e=this.finally)||void 0===e||e.optimizeNodes(),this}optimizeNames(t,e){var n,i;return super.optimizeNames(t,e),null===(n=this.catch)||void 0===n||n.optimizeNames(t,e),null===(i=this.finally)||void 0===i||i.optimizeNames(t,e),this}get names(){const t=super.names;return this.catch&&D(t,this.catch.names),this.finally&&D(t,this.finally.names),t}}class E extends m{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}}E.kind="catch";class P extends m{render(t){return"finally"+super.render(t)}}P.kind="finally";function D(t,e){for(const n in e)t[n]=(t[n]||0)+(e[n]||0);return t}function T(t,e){return e instanceof i._CodeOrName?D(t,e.names):t}function $(t,e,n){return t instanceof i.Name?o(t):(s=t)instanceof i._Code&&s._items.some((t=>t instanceof i.Name&&1===e[t.str]&&void 0!==n[t.str]))?new i._Code(t._items.reduce(((t,e)=>(e instanceof i.Name&&(e=o(e)),e instanceof i._Code?t.push(...e._items):t.push(e),t)),[])):t;var s;function o(t){const i=n[t.str];return void 0===i||1!==e[t.str]?t:(delete e[t.str],i)}}function O(t,e){for(const n in e)t[n]=(t[n]||0)-(e[n]||0)}function A(t){return"boolean"==typeof t||"number"==typeof t||null===t?!t:i._`!${I(t)}`}e.CodeGen=class{constructor(t,e={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...e,_n:e.lines?"\n":""},this._extScope=t,this._scope=new s.Scope({parent:t}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,e){const n=this._extScope.value(t,e);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,e){return this._extScope.getValue(t,e)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,e,n,i){const s=this._scope.toName(e);return void 0!==n&&i&&(this._constants[s.str]=n),this._leafNode(new l(t,s,n)),s}const(t,e,n){return this._def(s.varKinds.const,t,e,n)}let(t,e,n){return this._def(s.varKinds.let,t,e,n)}var(t,e,n){return this._def(s.varKinds.var,t,e,n)}assign(t,e,n){return this._leafNode(new c(t,e,n))}code(t){return"function"==typeof t?t():t!==i.nil&&this._leafNode(new p(t)),this}object(...t){const e=["{"];for(const[n,s]of t)e.length>1&&e.push(","),e.push(n),(n!==s||this.opts.es5)&&(e.push(":"),i.addCodeArg(e,s));return e.push("}"),new i._Code(e)}if(t,e,n){if(this._blockNode(new v(t)),e&&n)this.code(e).else().code(n).endIf();else if(e)this.code(e).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new v(t))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(v,_)}_for(t,e){return this._blockNode(t),e&&this.code(e).endFor(),this}for(t,e){return this._for(new b(t),e)}forRange(t,e,n,i,o=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const r=this._scope.toName(t);return this._for(new x(o,r,e,n),(()=>i(r)))}forOf(t,e,n,o=s.varKinds.const){const r=this._scope.toName(t);if(this.opts.es5){const t=e instanceof i.Name?e:this.var("_arr",e);return this.forRange("_i",0,i._`${t}.length`,(e=>{this.var(r,i._`${t}[${e}]`),n(r)}))}return this._for(new w("of",o,r,e),(()=>n(r)))}forIn(t,e,n,o=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(t,i._`Object.keys(${e})`,n);const r=this._scope.toName(t);return this._for(new w("in",o,r,e),(()=>n(r)))}endFor(){return this._endBlockNode(y)}label(t){return this._leafNode(new u(t))}break(t){return this._leafNode(new h(t))}return(t){const e=new S;if(this._blockNode(e),this.code(t),1!==e.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(t,e,n){if(!e&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new C;if(this._blockNode(i),this.code(t),e){const t=this.name("e");this._currNode=i.catch=new E(t),e(t)}return n&&(this._currNode=i.finally=new P,this.code(n)),this._endBlockNode(E,P)}throw(t){return this._leafNode(new d(t))}block(t,e){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(e),this}endBlock(t){const e=this._blockStarts.pop();if(void 0===e)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-e;if(n<0||void 0!==t&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=e,this}func(t,e=i.nil,n,s){return this._blockNode(new k(t,e,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(k)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,e){const n=this._currNode;if(n instanceof t||e&&n instanceof e)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${e?`${t.kind}/${e.kind}`:t.kind}"`)}_elseNode(t){const e=this._currNode;if(!(e instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=e.else=t,this}get _root(){return this._nodes[0]}get _currNode(){const t=this._nodes;return t[t.length-1]}set _currNode(t){const e=this._nodes;e[e.length-1]=t}},e.not=A;const N=M(e.operators.AND);e.and=function(...t){return t.reduce(N)};const j=M(e.operators.OR);function M(t){return(e,n)=>e===i.nil?n:n===i.nil?e:i._`${I(e)} ${t} ${I(n)}`}function I(t){return t instanceof i.Name?t:i._`(${t})`}e.or=function(...t){return t.reduce(j)}},8490:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=void 0;const i=n(7023);class s extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}e.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class o{constructor({prefixes:t,parent:e}={}){this._names={},this._prefixes=t,this._parent=e}toName(t){return t instanceof i.Name?t:this.name(t)}name(t){return new i.Name(this._newName(t))}_newName(t){return`${t}${(this._names[t]||this._nameGroup(t)).index++}`}_nameGroup(t){var e,n;if((null===(n=null===(e=this._parent)||void 0===e?void 0:e._prefixes)||void 0===n?void 0:n.has(t))||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}e.Scope=o;class r extends i.Name{constructor(t,e){super(e),this.prefix=t}setValue(t,{property:e,itemIndex:n}){this.value=t,this.scopePath=i._`.${new i.Name(e)}[${n}]`}}e.ValueScopeName=r;const a=i._`\n`;e.ValueScope=class extends o{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?a:i.nil}}get(){return this._scope}name(t){return new r(t,this._newName(t))}value(t,e){var n;if(void 0===e.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(t),{prefix:s}=i,o=null!==(n=e.key)&&void 0!==n?n:e.ref;let r=this._values[s];if(r){const t=r.get(o);if(t)return t}else r=this._values[s]=new Map;r.set(o,i);const a=this._scope[s]||(this._scope[s]=[]),l=a.length;return a[l]=e.ref,i.setValue(e,{property:s,itemIndex:l}),i}getValue(t,e){const n=this._values[t];if(n)return n.get(e)}scopeRefs(t,e=this._values){return this._reduceValues(e,(e=>{if(void 0===e.scopePath)throw new Error(`CodeGen: name "${e}" has no value`);return i._`${t}${e.scopePath}`}))}scopeCode(t=this._values,e,n){return this._reduceValues(t,(t=>{if(void 0===t.value)throw new Error(`CodeGen: name "${t}" has no value`);return t.value.code}),e,n)}_reduceValues(t,n,o={},r){let a=i.nil;for(const l in t){const c=t[l];if(!c)continue;const u=o[l]=o[l]||new Set;c.forEach((t=>{if(u.has(t))return;u.add(t);let o=n(t);if(o){const n=this.opts.es5?e.varKinds.var:e.varKinds.const;a=i._`${a}${n} ${t} = ${o};${this.opts._n}`}else{if(!(o=null==r?void 0:r(t)))throw new s(t);a=i._`${a}${o}${this.opts._n}`}}))}return a}}},2227:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getData=void 0;const i=n(453),s=n(6776),o=n(4181),r=n(3487),a=n(2141),l=n(4069);e.default=class{constructor(t,e,n){if(function({schema:t,opts:e,self:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(null==o?void 0:o.some((e=>!Object.prototype.hasOwnProperty.call(t,e))))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema){if(!i.validateSchema(t[s])){const t="keyword value is invalid: "+n.errorsText(i.validateSchema.errors);if("log"!==e.validateSchema)throw new Error(t);n.logger.error(t)}}}(t,e,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=e.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=s.schemaRefOrVal(t,this.schema,n,this.$data),this.schemaType=e.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=e,this.$data)this.schemaCode=t.gen.const("vSchema",h(this.$data,t));else if(this.schemaCode=this.schemaValue,!function(t,e,n=!1){return!e.length||e.some((e=>"array"===e?Array.isArray(t):"object"===e?t&&"object"==typeof t&&!Array.isArray(t):typeof t==e||n&&void 0===t))}(this.schema,e.schemaType,e.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(e.schemaType)}`);("code"in e?e.trackErrors:!1!==e.errors)&&(this.errsCount=t.gen.const("_errs",a.default.errors))}result(t,e,n){this.gen.if(r.not(t)),n?n():this.error(),e?(this.gen.else(),e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,e){this.result(t,void 0,e)}fail(t){if(void 0===t)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:e}=this;this.fail(r._`${e} !== undefined && (${r.or(this.invalid$data(),t)})`)}error(t){(t?o.reportExtraError:o.reportError)(this,this.def.error||o.keywordError)}$dataError(){o.reportError(this,this.def.$dataError||o.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');o.resetErrorsCount(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,e){e?Object.assign(this.params,t):this.params=t}block$data(t,e,n=r.nil){this.gen.block((()=>{this.check$data(t,n),e()}))}check$data(t=r.nil,e=r.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if(r.or(r._`${i} === undefined`,e)),t!==r.nil&&n.assign(t,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==r.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:e,schemaType:n,def:s,it:o}=this;return r.or(function(){if(n.length){if(!(e instanceof r.Name))throw new Error("ajv implementation error");const t=Array.isArray(n)?n:[n];return r._`${i.checkDataTypes(t,e,o.opts.strict,i.DataType.Wrong)}`}return r.nil}(),function(){if(s.validateSchema){const n=t.scopeValue("validate$data",{ref:s.validateSchema});return r._`!${n}(${e})`}return r.nil}())}subschema(t,e){return l.applySubschema(this.it,t,e)}mergeEvaluated(t,e){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==t.props&&(n.props=s.mergeEvaluated.props(i,t.props,n.props,e)),!0!==n.items&&void 0!==t.items&&(n.items=s.mergeEvaluated.items(i,t.items,n.items,e)))}mergeValidEvaluated(t,e){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(e,(()=>this.mergeEvaluated(t,r.Name))),!0}};const c=/^\/(?:[^~]|~0|~1)*$/,u=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(t,{dataLevel:e,dataNames:n,dataPathArr:i}){let o,l;if(""===t)return a.default.rootData;if("/"===t[0]){if(!c.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);o=t,l=a.default.rootData}else{const s=u.exec(t);if(!s)throw new Error(`Invalid JSON-pointer: ${t}`);const r=+s[1];if(o=s[2],"#"===o){if(r>=e)throw new Error(p("property/index",r));return i[e-r]}if(r>e)throw new Error(p("data",r));if(l=n[e-r],!o)return l}let h=l;const d=o.split("/");for(const t of d)t&&(l=r._`${l}${r.getProperty(s.unescapeJsonPointer(t))}`,h=r._`${h} && ${l}`);return h;function p(t,n){return`Cannot access ${t} ${n} levels up, current level is ${e}`}}e.getData=h},8727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=void 0;const i=n(2531);class s extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}e.ValidationError=s;class o extends Error{constructor(t,e){super(`can't resolve reference ${e} from id ${t}`),this.missingRef=i.resolveUrl(t,e),this.missingSchema=i.normalizeId(i.getFullPath(this.missingRef))}}e.MissingRefError=o,t.exports={ValidationError:s,MissingRefError:o}},4181:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const i=n(3487),s=n(2141);function o(t,e){const n=t.const("err",e);t.if(i._`${s.default.vErrors} === null`,(()=>t.assign(s.default.vErrors,i._`[${n}]`)),i._`${s.default.vErrors}.push(${n})`),t.code(i._`${s.default.errors}++`)}function r(t,e){const{gen:n,validateName:s,schemaEnv:o}=t;o.$async?n.throw(i._`new ${t.ValidationError}(${e})`):(n.assign(i._`${s}.errors`,e),n.return(!1))}e.keywordError={message:({keyword:t})=>i.str`should pass "${t}" keyword validation`},e.keyword$DataError={message:({keyword:t,schemaType:e})=>e?i.str`"${t}" keyword must be ${e} ($data)`:i.str`"${t}" keyword is invalid ($data)`},e.reportError=function(t,e,n){const{it:s}=t,{gen:a,compositeRule:c,allErrors:u}=s,h=l(t,e);(null!=n?n:c||u)?o(a,h):r(s,i._`[${h}]`)},e.reportExtraError=function(t,e){const{it:n}=t,{gen:i,compositeRule:a,allErrors:c}=n;o(i,l(t,e)),a||c||r(n,s.default.vErrors)},e.resetErrorsCount=function(t,e){t.assign(s.default.errors,e),t.if(i._`${s.default.vErrors} !== null`,(()=>t.if(e,(()=>t.assign(i._`${s.default.vErrors}.length`,e)),(()=>t.assign(s.default.vErrors,null)))))},e.extendErrors=function({gen:t,keyword:e,schemaValue:n,data:o,errsCount:r,it:a}){if(void 0===r)throw new Error("ajv implementation error");const l=t.name("err");t.forRange("i",r,s.default.errors,(r=>{t.const(l,i._`${s.default.vErrors}[${r}]`),t.if(i._`${l}.dataPath === undefined`,(()=>t.assign(i._`${l}.dataPath`,i.strConcat(s.default.dataPath,a.errorPath)))),t.assign(i._`${l}.schemaPath`,i.str`${a.errSchemaPath}/${e}`),a.opts.verbose&&(t.assign(i._`${l}.schema`,n),t.assign(i._`${l}.data`,o))}))};const a={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema")};function l(t,e){const{keyword:n,data:o,schemaValue:r,it:{gen:l,createErrors:c,topSchemaRef:u,schemaPath:h,errorPath:d,errSchemaPath:p,propertyName:f,opts:m}}=t;if(!1===c)return i._`{}`;const{params:g,message:_}=e,v=[[a.keyword,n],[s.default.dataPath,i.strConcat(s.default.dataPath,d)],[a.schemaPath,i.str`${p}/${n}`],[a.params,"function"==typeof g?g(t):g||i._`{}`]];if(f&&v.push([a.propertyName,f]),!1!==m.messages){const e="function"==typeof _?_(t):_;v.push([a.message,e])}return m.verbose&&v.push([a.schema,r],[a.parentSchema,i._`${u}${h}`],[s.default.data,o]),l.object(...v)}},5173:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveSchema=e.resolveRef=e.compileSchema=e.SchemaEnv=void 0;const i=n(3487),s=n(8727),o=n(2141),r=n(2531),a=n(6776),l=n(4815),c=n(540);class u{constructor(t){var e;let n;this.refs={},this.dynamicAnchors={},"object"==typeof t.schema&&(n=t.schema),this.schema=t.schema,this.root=t.root||this,this.baseId=null!==(e=t.baseId)&&void 0!==e?e:r.normalizeId(null==n?void 0:n.$id),this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function h(t){const e=p.call(this,t);if(e)return e;const n=r.getFullPath(t.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,h=new i.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let d;t.$async&&(d=h.scopeValue("Error",{ref:s.ValidationError,code:i._`require("ajv/dist/compile/error_classes").ValidationError`}));const f=h.scopeName("validate");t.validateName=f;const m={gen:h,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:t.schema,code:i.stringify(t.schema)}:{ref:t.schema}),validateName:f,ValidationError:d,schema:t.schema,schemaEnv:t,strictSchema:!0,rootId:n,baseId:t.baseId||n,schemaPath:i.nil,errSchemaPath:"#",errorPath:i._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(t),l.validateFunctionCode(m),h.optimize(this.opts.code.optimize);const e=h.toString();g=`${h.scopeRefs(o.default.scope)}return ${e}`,this.opts.code.process&&(g=this.opts.code.process(g,t));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:n}),n.errors=null,n.schema=t.schema,n.schemaEnv=t,t.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:f,validateCode:e,scopeValues:h._values}),this.opts.unevaluated){const{props:t,items:e}=m;n.evaluated={props:t instanceof i.Name?void 0:t,items:e instanceof i.Name?void 0:e,dynamicProps:t instanceof i.Name,dynamicItems:e instanceof i.Name},n.source&&(n.source.evaluated=i.stringify(n.evaluated))}return t.validate=n,t}catch(e){throw delete t.validate,delete t.validateName,g&&this.logger.error("Error compiling schema, function code:",g),e}finally{this._compilations.delete(t)}}function d(t){return r.inlineRef(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:h.call(this,t)}function p(t){for(const i of this._compilations)if(n=t,(e=i).schema===n.schema&&e.root===n.root&&e.baseId===n.baseId)return i;var e,n}function f(t,e){let n;for(;"string"==typeof(n=this.refs[e]);)e=n;return n||this.schemas[e]||m.call(this,t,e)}function m(t,e){const n=c.parse(e),i=r._getFullPath(n),s=r.getFullPath(t.baseId);if(Object.keys(t.schema).length>0&&i===s)return _.call(this,n,t);const o=r.normalizeId(i),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const e=m.call(this,t,a);if("object"!=typeof(null==e?void 0:e.schema))return;return _.call(this,n,e)}return"object"==typeof(null==a?void 0:a.schema)?(a.validate||h.call(this,a),o===r.normalizeId(e)?new u({schema:a.schema,root:t,baseId:s}):_.call(this,n,a)):void 0}e.SchemaEnv=u,e.compileSchema=h,e.resolveRef=function(t,e,n){var i;n=r.resolveUrl(e,n);const s=t.refs[n];if(s)return s;let o=f.call(this,t,n);if(void 0===o){const s=null===(i=t.localRefs)||void 0===i?void 0:i[n];s&&(o=new u({schema:s,root:t,baseId:e}))}return void 0!==o?t.refs[n]=d.call(this,o):void 0},e.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _(t,{baseId:e,schema:n,root:i}){var s;if("/"!==(null===(s=t.fragment)||void 0===s?void 0:s[0]))return;for(const i of t.fragment.slice(1).split("/")){if("boolean"==typeof n)return;if(void 0===(n=n[a.unescapeFragment(i)]))return;!g.has(i)&&"object"==typeof n&&n.$id&&(e=r.resolveUrl(e,n.$id))}let o;if("boolean"!=typeof n&&n.$ref&&!a.schemaHasRulesButRef(n,this.RULES)){const t=r.resolveUrl(e,n.$ref);o=m.call(this,i,t)}return o=o||new u({schema:n,root:i,baseId:e}),o.schema!==o.root.schema?o:void 0}},2141:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s={data:new i.Name("data"),valCxt:new i.Name("valCxt"),dataPath:new i.Name("dataPath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope")};e.default=s},2531:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSchemaRefs=e.resolveUrl=e.normalizeId=e._getFullPath=e.getFullPath=e.inlineRef=void 0;const i=n(6776),s=n(4063),o=n(9461),r=n(540),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);e.inlineRef=function(t,e=!0){return"boolean"==typeof t||(!0===e?!c(t):!!e&&u(t)<=e)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(t){for(const e in t){if(l.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function u(t){let e=0;for(const n in t){if("$ref"===n)return 1/0;if(e++,!a.has(n)&&("object"==typeof t[n]&&i.eachItem(t[n],(t=>e+=u(t))),e===1/0))return 1/0}return e}function h(t="",e){!1!==e&&(t=f(t));return d(r.parse(t))}function d(t){return r.serialize(t).split("#")[0]+"#"}e.getFullPath=h,e._getFullPath=d;const p=/#\/?$/;function f(t){return t?t.replace(p,""):""}e.normalizeId=f,e.resolveUrl=function(t,e){return e=f(e),r.resolve(t,e)};const m=/^[a-z_][-a-z0-9._]*$/i;e.getSchemaRefs=function(t){if("boolean"==typeof t)return{};const e=f(t.$id),n={"":e},i=h(e,!1),a={},l=new Set;return o(t,{allKeys:!0},((t,e,s,o)=>{if(void 0===o)return;const h=i+e;let d=n[o];function p(e){if(e=f(d?r.resolve(d,e):e),l.has(e))throw u(e);l.add(e);let n=this.refs[e];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?c(t,n.schema,e):e!==f(h)&&("#"===e[0]?(c(t,a[e],e),a[e]=t):this.refs[e]=h),e}function g(t){if("string"==typeof t){if(!m.test(t))throw new Error(`invalid anchor "${t}"`);p.call(this,`#${t}`)}}"string"==typeof t.$id&&(d=p.call(this,t.$id)),g.call(this,t.$anchor),g.call(this,t.$dynamicAnchor),n[e]=d})),a;function c(t,e,n){if(void 0!==e&&!s(t,e))throw u(n)}function u(t){return new Error(`reference "${t}" resolves to more than one schema`)}}},3141:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRules=e.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);e.isJSONType=function(t){return"string"==typeof t&&n.has(t)},e.getRules=function(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{type:!0,$comment:!0},keywords:{type:!0,$comment:!0}}}},4069:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applySubschema=e.Type=void 0;const i=n(4815),s=n(6776),o=n(3487);var r;!function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"}(r=e.Type||(e.Type={})),e.applySubschema=function(t,e,n){const a=function(t,{keyword:e,schemaProp:n,schema:i,strictSchema:r,schemaPath:a,errSchemaPath:l,topSchemaRef:c}){if(void 0!==e&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==e){const i=t.schema[e];return void 0===n?{schema:i,schemaPath:o._`${t.schemaPath}${o.getProperty(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:i[n],schemaPath:o._`${t.schemaPath}${o.getProperty(e)}${o.getProperty(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${s.escapeFragment(n)}`}}if(void 0!==i){if(void 0===a||void 0===l||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,strictSchema:r,schemaPath:a,topSchemaRef:c,errSchemaPath:l}}throw new Error('either "keyword" or "schema" must be passed')}(t,e);!function(t,e,{dataProp:n,dataPropType:i,data:a,dataTypes:l,propertyName:c}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=e;if(void 0!==n){const{errorPath:a,dataPathArr:l,opts:c}=e;h(u.let("data",o._`${e.data}${o.getProperty(n)}`,!0)),t.errorPath=o.str`${a}${function(t,e,n){if(t instanceof o.Name){const i=e===r.Num;return n?i?o._`"[" + ${t} + "]"`:o._`"['" + ${t} + "']"`:i?o._`"/" + ${t}`:o._`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?o.getProperty(t).toString():"/"+s.escapeJsonPointer(t)}(n,i,c.jsPropertySyntax)}`,t.parentDataProperty=o._`${n}`,t.dataPathArr=[...l,t.parentDataProperty]}if(void 0!==a){h(a instanceof o.Name?a:u.let("data",a,!0)),void 0!==c&&(t.propertyName=c)}l&&(t.dataTypes=l);function h(n){t.data=n,t.dataLevel=e.dataLevel+1,t.dataTypes=[],t.parentData=e.data,t.dataNames=[...e.dataNames,n]}}(a,t,e),function(t,{compositeRule:e,createErrors:n,allErrors:i,strictSchema:s}){void 0!==e&&(t.compositeRule=e);void 0!==n&&(t.createErrors=n);void 0!==i&&(t.allErrors=i);t.strictSchema=s}(a,e);const l={...t,...a,items:void 0,props:void 0};return i.subschemaCode(l,n),l}},4776:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=t.length;let n,i=0,s=0;for(;s<e;)i++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),56320==(64512&n)&&s++);return i}},6776:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const i=n(3487),s=n(4815);function o(t,e=t.schema){const{opts:n,self:i}=t;if(!n.strict)return;if("boolean"==typeof e)return;const o=i.RULES.keywords;for(const n in e)o[n]||s.checkStrictMode(t,`unknown keyword: "${n}"`)}function r(t,e){if("boolean"==typeof t)return!t;for(const n in t)if(e[n])return!0;return!1}function a(t){return"number"==typeof t?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}function l(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:s}){return(o,r,a,l)=>{const c=void 0===a?r:a instanceof i.Name?(r instanceof i.Name?t(o,r,a):e(o,r,a),a):r instanceof i.Name?(e(o,a,r),r):n(r,a);return l!==i.Name||c instanceof i.Name?c:s(o,c)}}function u(t,e){if(!0===e)return t.var("props",!0);const n=t.var("props",i._`{}`);return void 0!==e&&h(t,n,e),n}function h(t,e,n){Object.keys(n).forEach((n=>t.assign(i._`${e}${i.getProperty(n)}`,!0)))}e.toHash=function(t){const e={};for(const n of t)e[n]=!0;return e},e.alwaysValidSchema=function(t,e){return"boolean"==typeof e?e:0===Object.keys(e).length||(o(t,e),!r(e,t.self.RULES.all))},e.checkUnknownRules=o,e.schemaHasRules=r,e.schemaHasRulesButRef=function(t,e){if("boolean"==typeof t)return!t;for(const n in t)if("$ref"!==n&&e.all[n])return!0;return!1},e.schemaRefOrVal=function({topSchemaRef:t,schemaPath:e},n,s,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${t}${e}${i.getProperty(s)}`},e.unescapeFragment=function(t){return l(decodeURIComponent(t))},e.escapeFragment=function(t){return encodeURIComponent(a(t))},e.escapeJsonPointer=a,e.unescapeJsonPointer=l,e.eachItem=function(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)},e.mergeEvaluated={props:c({mergeNames:(t,e,n)=>t.if(i._`${n} !== true && ${e} !== undefined`,(()=>{t.if(i._`${e} === true`,(()=>t.assign(n,!0)),(()=>t.code(i._`Object.assign(${n}, ${e})`)))})),mergeToName:(t,e,n)=>t.if(i._`${n} !== true`,(()=>{!0===e?t.assign(n,!0):(t.assign(n,i._`${n} || {}`),h(t,n,e))})),mergeValues:(t,e)=>!0===t||{...t,...e},resultToName:u}),items:c({mergeNames:(t,e,n)=>t.if(i._`${n} !== true && ${e} !== undefined`,(()=>t.assign(n,i._`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`))),mergeToName:(t,e,n)=>t.if(i._`${n} !== true`,(()=>t.assign(n,!0===e||i._`${n} > ${e} ? ${n} : ${e}`))),mergeValues:(t,e)=>!0===t||Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})},e.evaluatedPropsToName=u,e.setEvaluated=h},8876:(t,e)=>{"use strict";function n(t,e){return e.rules.some((e=>i(t,e)))}function i(t,e){var n;return void 0!==t[e.keyword]||(null===(n=e.definition.implements)||void 0===n?void 0:n.some((e=>void 0!==t[e])))}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseRule=e.shouldUseGroup=e.schemaHasRulesForType=void 0,e.schemaHasRulesForType=function({schema:t,self:e},i){const s=e.RULES.types[i];return s&&!0!==s&&n(t,s)},e.shouldUseGroup=n,e.shouldUseRule=i},5667:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boolOrEmptySchema=e.topBoolOrEmptySchema=void 0;const i=n(4181),s=n(3487),o=n(2141),r={message:"boolean schema is false"};function a(t,e){const{gen:n,data:s}=t,o={gen:n,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};i.reportError(o,r,e)}e.topBoolOrEmptySchema=function(t){const{gen:e,schema:n,validateName:i}=t;!1===n?a(t,!1):"object"==typeof n&&!0===n.$async?e.return(o.default.data):(e.assign(s._`${i}.errors`,null),e.return(!0))},e.boolOrEmptySchema=function(t,e){const{gen:n,schema:i}=t;!1===i?(n.var(e,!1),a(t)):n.var(e,!0)}},453:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const i=n(3141),s=n(8876),o=n(4181),r=n(3487),a=n(6776);var l;function c(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(i.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}!function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"}(l=e.DataType||(e.DataType={})),e.getSchemaTypes=function(t){const e=c(t.type);if(e.includes("null")){if(!1===t.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&void 0!==t.nullable)throw new Error('"nullable" cannot be used without "type"');!0===t.nullable&&e.push("null")}return e},e.getJSONTypes=c,e.coerceAndCheckDataType=function(t,e){const{gen:n,data:i,opts:o}=t,a=function(t,e){return e?t.filter((t=>u.has(t)||"array"===e&&"array"===t)):[]}(e,o.coerceTypes),c=e.length>0&&!(0===a.length&&1===e.length&&s.schemaHasRulesForType(t,e[0]));if(c){const s=d(e,i,o.strict,l.Wrong);n.if(s,(()=>{a.length?function(t,e,n){const{gen:i,data:s,opts:o}=t,a=i.let("dataType",r._`typeof ${s}`),l=i.let("coerced",r._`undefined`);"array"===o.coerceTypes&&i.if(r._`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,(()=>i.assign(s,r._`${s}[0]`).assign(a,r._`typeof ${s}`).if(d(e,s,o.strict),(()=>i.assign(l,s)))));i.if(r._`${l} !== undefined`);for(const t of n)(u.has(t)||"array"===t&&"array"===o.coerceTypes)&&c(t);function c(t){switch(t){case"string":return void i.elseIf(r._`${a} == "number" || ${a} == "boolean"`).assign(l,r._`"" + ${s}`).elseIf(r._`${s} === null`).assign(l,r._`""`);case"number":return void i.elseIf(r._`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(l,r._`+${s}`);case"integer":return void i.elseIf(r._`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(l,r._`+${s}`);case"boolean":return void i.elseIf(r._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(l,!1).elseIf(r._`${s} === "true" || ${s} === 1`).assign(l,!0);case"null":return i.elseIf(r._`${s} === "" || ${s} === 0 || ${s} === false`),void i.assign(l,null);case"array":i.elseIf(r._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(l,r._`[${s}]`)}}i.else(),f(t),i.endIf(),i.if(r._`${l} !== undefined`,(()=>{i.assign(s,l),function({gen:t,parentData:e,parentDataProperty:n},i){t.if(r._`${e} !== undefined`,(()=>t.assign(r._`${e}[${n}]`,i)))}(t,l)}))}(t,e,a):f(t)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function h(t,e,n,i=l.Correct){const s=i===l.Correct?r.operators.EQ:r.operators.NEQ;let o;switch(t){case"null":return r._`${e} ${s} null`;case"array":o=r._`Array.isArray(${e})`;break;case"object":o=r._`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=a(r._`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=a();break;default:return r._`typeof ${e} ${s} ${t}`}return i===l.Correct?o:r.not(o);function a(t=r.nil){return r.and(r._`typeof ${e} == "number"`,t,n?r._`isFinite(${e})`:r.nil)}}function d(t,e,n,i){if(1===t.length)return h(t[0],e,n,i);let s;const o=a.toHash(t);if(o.array&&o.object){const t=r._`typeof ${e} != "object"`;s=o.null?t:r._`!${e} || ${t}`,delete o.null,delete o.array,delete o.object}else s=r.nil;o.number&&delete o.integer;for(const t in o)s=r.and(s,h(t,e,n,i));return s}e.checkDataType=h,e.checkDataTypes=d;const p={message:({schema:t})=>r.str`should be ${t}`,params:({schema:t,schemaValue:e})=>"string"==typeof t?r._`{type: ${t}}`:r._`{type: ${e}}`};function f(t){const e=function(t){const{gen:e,data:n,schema:i}=t,s=a.schemaRefOrVal(t,i,"type");return{gen:e,keyword:"type",data:n,schema:i.type,schemaCode:s,schemaValue:s,parentSchema:i,params:{},it:t}}(t);o.reportError(e,p)}e.reportTypeError=f},313:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=void 0;const i=n(3487),s=n(4815);function o(t,e,n){const{gen:o,compositeRule:r,data:a,opts:l}=t;if(void 0===n)return;const c=i._`${a}${i.getProperty(e)}`;if(r)return void s.checkStrictMode(t,`default is ignored for: ${c}`);let u=i._`${c} === undefined`;"empty"===l.useDefaults&&(u=i._`${u} || ${c} === null || ${c} === ""`),o.if(u,i._`${c} = ${i.stringify(n)}`)}e.assignDefaults=function(t,e){const{properties:n,items:i}=t.schema;if("object"===e&&n)for(const e in n)o(t,e,n[e].default);else"array"===e&&Array.isArray(i)&&i.forEach(((e,n)=>o(t,n,e.default)))}},4815:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.schemaCxtHasRules=e.subschemaCode=e.validateFunctionCode=void 0;const i=n(5667),s=n(453),o=n(7449),r=n(3487),a=n(2141),l=n(2531),c=n(6776);function u({gen:t,validateName:e,schema:n,schemaEnv:i,opts:s},o){s.code.es5?t.func(e,r._`${a.default.data}, ${a.default.valCxt}`,i.$async,(()=>{t.code(r._`"use strict"; ${h(n,s)}`),function(t,e){t.if(a.default.valCxt,(()=>{t.var(a.default.dataPath,r._`${a.default.valCxt}.${a.default.dataPath}`),t.var(a.default.parentData,r._`${a.default.valCxt}.${a.default.parentData}`),t.var(a.default.parentDataProperty,r._`${a.default.valCxt}.${a.default.parentDataProperty}`),t.var(a.default.rootData,r._`${a.default.valCxt}.${a.default.rootData}`),e.dynamicRef&&t.var(a.default.dynamicAnchors,r._`${a.default.valCxt}.${a.default.dynamicAnchors}`)}),(()=>{t.var(a.default.dataPath,r._`""`),t.var(a.default.parentData,r._`undefined`),t.var(a.default.parentDataProperty,r._`undefined`),t.var(a.default.rootData,a.default.data),e.dynamicRef&&t.var(a.default.dynamicAnchors,r._`{}`)}))}(t,s),t.code(o)})):t.func(e,r._`${a.default.data}, ${function(t){return r._`{${a.default.dataPath}="", ${a.default.parentData}, ${a.default.parentDataProperty}, ${a.default.rootData}=${a.default.data}${t.dynamicRef?r._`, ${a.default.dynamicAnchors}={}`:r.nil}}={}`}(s)}`,i.$async,(()=>t.code(h(n,s)).code(o)))}function h(t,e){return"object"==typeof t&&t.$id&&(e.code.source||e.code.process)?r._`/*# sourceURL=${t.$id} */`:r.nil}function d({schema:t,self:e}){if("boolean"==typeof t)return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function p(t){return"boolean"!=typeof t.schema}function f(t){c.checkUnknownRules(t),function(t){const{schema:e,errSchemaPath:n,opts:i,self:s}=t;e.$ref&&i.ignoreKeywordsWithRef&&c.schemaHasRulesButRef(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(t)}function m(t,e){const n=s.getSchemaTypes(t.schema),i=s.coerceAndCheckDataType(t,n);o.schemaKeywords(t,n,!i,e)}function g({gen:t,schemaEnv:e,schema:n,errSchemaPath:i,opts:s}){const o=n.$comment;if(!0===s.$comment)t.code(r._`${a.default.self}.logger.log(${o})`);else if("function"==typeof s.$comment){const n=r.str`${i}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code(r._`${a.default.self}.opts.$comment(${o}, ${n}, ${s}.schema)`)}}function _(t,e,n=t.opts.strict){if(n){if(e=`strict mode: ${e}`,!0===n)throw new Error(e);t.self.logger.warn(e)}}e.validateFunctionCode=function(t){p(t)&&(f(t),d(t))?function(t){const{schema:e,opts:n,gen:i}=t;u(t,(()=>{n.$comment&&e.$comment&&g(t),function(t){const{schema:e,opts:n}=t;void 0!==e.default&&n.useDefaults&&n.strict&&_(t,"default is ignored in the schema root")}(t),i.let(a.default.vErrors,null),i.let(a.default.errors,0),n.unevaluated&&function(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",r._`${n}.evaluated`),e.if(r._`${t.evaluated}.dynamicProps`,(()=>e.assign(r._`${t.evaluated}.props`,r._`undefined`))),e.if(r._`${t.evaluated}.dynamicItems`,(()=>e.assign(r._`${t.evaluated}.items`,r._`undefined`)))}(t),m(t),function(t){const{gen:e,schemaEnv:n,validateName:i,ValidationError:s,opts:o}=t;n.$async?e.if(r._`${a.default.errors} === 0`,(()=>e.return(a.default.data)),(()=>e.throw(r._`new ${s}(${a.default.vErrors})`))):(e.assign(r._`${i}.errors`,a.default.vErrors),o.unevaluated&&function({gen:t,evaluated:e,props:n,items:i}){n instanceof r.Name&&t.assign(r._`${e}.props`,n);i instanceof r.Name&&t.assign(r._`${e}.items`,i)}(t),e.return(r._`${a.default.errors} === 0`))}(t)}))}(t):u(t,(()=>i.topBoolOrEmptySchema(t)))},e.subschemaCode=function(t,e){p(t)&&(f(t),d(t))?function(t,e){const{schema:n,gen:i,opts:s}=t;s.$comment&&n.$comment&&g(t);(function(t){t.schema.$id&&(t.baseId=l.resolveUrl(t.baseId,t.schema.$id))})(t),function(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}(t);const o=i.const("_errs",a.default.errors);m(t,o),i.var(e,r._`${o} === ${a.default.errors}`)}(t,e):i.boolOrEmptySchema(t,e)},e.schemaCxtHasRules=d,e.checkStrictMode=_},7449:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.schemaKeywords=void 0;const i=n(8876),s=n(453),o=n(313),r=n(453),a=n(5005),l=n(6776),c=n(4815),u=n(3487),h=n(2141);function d(t,e){const{gen:n,schema:s,opts:{useDefaults:r}}=t;r&&o.assignDefaults(t,e.type),n.block((()=>{for(const n of e.rules)i.shouldUseRule(s,n)&&a.keywordCode(t,n.keyword,n.definition,e.type)}))}function p(t,e){return t.includes(e)||"number"===e&&t.includes("integer")}function f(t,e){return t.includes(e)||"integer"===e&&t.includes("number")}function m(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,c.checkStrictMode(t,e,t.opts.strictTypes)}e.schemaKeywords=function(t,e,n,o){const{gen:c,schema:g,data:_,allErrors:v,opts:y,self:b}=t,{RULES:x}=b;function w(a){i.shouldUseGroup(g,a)&&(a.type?(c.if(s.checkDataType(a.type,_,y.strict)),d(t,a),1===e.length&&e[0]===a.type&&n&&(c.else(),r.reportTypeError(t)),c.endIf()):d(t,a),v||c.if(u._`${h.default.errors} === ${o||0}`))}!g.$ref||!y.ignoreKeywordsWithRef&&l.schemaHasRulesButRef(g,x)?(!function(t,e){if(t.schemaEnv.meta||!t.opts.strictTypes)return;(function(t,e){if(!e.length)return;if(!t.dataTypes.length)return void(t.dataTypes=e);e.forEach((e=>{f(t.dataTypes,e)||m(t,`type "${e}" not allowed by context "${t.dataTypes.join(",")}"`)})),t.dataTypes=t.dataTypes.filter((t=>f(e,t)))})(t,e),t.opts.allowUnionTypes||function(t,e){e.length>1&&(2!==e.length||!e.includes("null"))&&m(t,"use allowUnionTypes to allow union type keyword")}(t,e);!function(t,e){const n=t.self.RULES.all;for(const s in n){const o=n[s];if("object"==typeof o&&i.shouldUseRule(t.schema,o)){const{type:n}=o.definition;n.length&&!n.some((t=>p(e,t)))&&m(t,`missing type "${n.join(",")}" for keyword "${s}"`)}}}(t,t.dataTypes)}(t,e),c.block((()=>{for(const t of x.rules)w(t);w(x.post)}))):c.block((()=>a.keywordCode(t,"$ref",x.all.$ref.definition)))}},5005:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keywordCode=void 0;const i=n(2227),s=n(4181),o=n(412),r=n(3487),a=n(2141);function l(t,e){var n;const{gen:i,keyword:l,schema:h,parentSchema:d,$data:p,it:f}=t;!function({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}(f,e);const m=!p&&e.compile?e.compile.call(f.self,h,d,f):e.validate,g=u(i,l,m),_=i.let("valid");function v(n=(e.async?r._`await `:r.nil)){const s=f.opts.passContext?a.default.this:a.default.self,l=!("compile"in e&&!p||!1===e.schema);i.assign(_,r._`${n}${o.callValidateCode(t,g,s,l)}`,e.modifying)}function y(t){var n;i.if(r.not(null!==(n=e.valid)&&void 0!==n?n:_),t)}t.block$data(_,(function(){if(!1===e.errors)v(),e.modifying&&c(t),y((()=>t.error()));else{const n=e.async?function(){const t=i.let("ruleErrs",null);return i.try((()=>v(r._`await `)),(e=>i.assign(_,!1).if(r._`${e} instanceof ${f.ValidationError}`,(()=>i.assign(t,r._`${e}.errors`)),(()=>i.throw(e))))),t}():function(){const t=r._`${g}.errors`;return i.assign(t,null),v(r.nil),t}();e.modifying&&c(t),y((()=>function(t,e){const{gen:n}=t;n.if(r._`Array.isArray(${e})`,(()=>{n.assign(a.default.vErrors,r._`${a.default.vErrors} === null ? ${e} : ${a.default.vErrors}.concat(${e})`).assign(a.default.errors,r._`${a.default.vErrors}.length`),s.extendErrors(t)}),(()=>t.error()))}(t,n)))}})),t.ok(null!==(n=e.valid)&&void 0!==n?n:_)}function c(t){const{gen:e,data:n,it:i}=t;e.if(i.parentData,(()=>e.assign(n,r._`${i.parentData}[${i.parentDataProperty}]`)))}function u(t,e,n){if(void 0===n)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:r.stringify(n)})}e.keywordCode=function(t,e,n,s){const o=new i.default(t,n,e);"code"in n?n.code(o,s):o.$data&&n.validate?l(o,n):"macro"in n?function(t,e){const{gen:n,keyword:i,schema:s,parentSchema:o,it:a}=t,l=e.macro.call(a.self,s,o,a),c=u(n,i,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const h=n.name("valid");t.subschema({schema:l,schemaPath:r.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:c,compositeRule:!0},h),t.pass(h,(()=>t.error(!0)))}(o,n):(n.compile||n.validate)&&l(o,n)}},7159:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const i=n(2227);e.KeywordCxt=i.default;var s=n(3487);Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const o=n(8727),r=n(3141),a=n(5173),l=n(3487),c=n(2531),u=n(453),h=n(6776),d=n(2228),p=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function _(t){var e,n,i,s,o,r,a,l,c,u,h,d;const p=null===(e=t.strict)||void 0===e||e,f=!!p&&"log",m=null===(n=t.code)||void 0===n?void 0:n.optimize,g=!0===m||void 0===m?1:m||0;return{strict:p,strictTypes:null!==(i=t.strictTypes)&&void 0!==i?i:f,strictTuples:null!==(s=t.strictTuples)&&void 0!==s?s:f,code:t.code?{...t.code,optimize:g}:{optimize:g},loopRequired:null!==(o=t.loopRequired)&&void 0!==o?o:1/0,loopEnum:null!==(r=t.loopEnum)&&void 0!==r?r:1/0,meta:null===(a=t.meta)||void 0===a||a,messages:null===(l=t.messages)||void 0===l||l,inlineRefs:null===(c=t.inlineRefs)||void 0===c||c,addUsedSchema:null===(u=t.addUsedSchema)||void 0===u||u,validateSchema:null===(h=t.validateSchema)||void 0===h||h,validateFormats:null===(d=t.validateFormats)||void 0===d||d}}class v{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,..._(t)};const{es5:e,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:f,es5:e,lines:n}),this.logger=function(t){if(!1===t)return C;if(void 0===t)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}(t.logger);const i=t.validateFormats;t.validateFormats=!1,this.RULES=r.getRules(),y.call(this,m,t,"NOT SUPPORTED"),y.call(this,g,t,"DEPRECATED","warn"),this._metaOpts=S.call(this),t.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&k.call(this,t.keywords),"object"==typeof t.meta&&this.addMetaSchema(t.meta),x.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:t,meta:e}=this.opts;e&&t&&this.addMetaSchema(d,d.$id,!1)}defaultMeta(){const{meta:t}=this.opts;return this.opts.defaultMeta="object"==typeof t?t.$id||t:void 0}validate(t,e){let n;if("string"==typeof t){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);const i=n(e);return"$async"in n||(this.errors=n.errors),i}compile(t,e){const n=this._addSchema(t,e);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,e){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,t,e);async function i(t,e){await s.call(this,t.$schema);const n=this._addSchema(t,e);return n.validate||r.call(this,n)}async function s(t){t&&!this.getSchema(t)&&await i.call(this,{$ref:t},!0)}async function r(t){try{return this._compileSchemaEnv(t)}catch(e){if(!(e instanceof o.MissingRefError))throw e;return a.call(this,e),await l.call(this,e.missingSchema),r.call(this,t)}}function a({missingSchema:t,missingRef:e}){if(this.refs[t])throw new Error(`AnySchema ${t} is loaded but ${e} cannot be resolved`)}async function l(t){const n=await c.call(this,t);this.refs[t]||await s.call(this,n.$schema),this.refs[t]||this.addSchema(n,t,e)}async function c(t){const e=this._loading[t];if(e)return e;try{return await(this._loading[t]=n(t))}finally{delete this._loading[t]}}}addSchema(t,e,n,i=this.opts.validateSchema){if(Array.isArray(t)){for(const e of t)this.addSchema(e,void 0,n,i);return this}let s;if("object"==typeof t&&(s=t.$id,void 0!==s&&"string"!=typeof s))throw new Error("schema id must be string");return e=c.normalizeId(e||s),this._checkUnique(e),this.schemas[e]=this._addSchema(t,n,i,!0),this}addMetaSchema(t,e,n=this.opts.validateSchema){return this.addSchema(t,e,!0,n),this}validateSchema(t,e){if("boolean"==typeof t)return!0;let n;if(n=t.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,t);if(!i&&e){const t="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(t);this.logger.error(t)}return i}getSchema(t){let e;for(;"string"==typeof(e=b.call(this,t));)t=e;if(void 0===e){const n=new a.SchemaEnv({schema:{}});if(e=a.resolveSchema.call(this,n,t),!e)return;this.refs[t]=e}return e.validate||this._compileSchemaEnv(e)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const e=b.call(this,t);return"object"==typeof e&&this._cache.delete(e.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{const e=t;this._cache.delete(e);let n=t.$id;return n&&(n=c.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(const e of t)this.addKeyword(e);return this}addKeyword(t,e){let n;if("string"==typeof t)n=t,"object"==typeof e&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),e.keyword=n);else{if("object"!=typeof t||void 0!==e)throw new Error("invalid addKeywords parameters");if(n=(e=t).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(P.call(this,n,e),!e)return h.eachItem(n,(t=>D.call(this,t))),this;$.call(this,e);const i={...e,type:u.getJSONTypes(e.type),schemaType:u.getJSONTypes(e.schemaType)};return h.eachItem(n,0===i.type.length?t=>D.call(this,t,i):t=>i.type.forEach((e=>D.call(this,t,i,e)))),this}getKeyword(t){const e=this.RULES.all[t];return"object"==typeof e?e.definition:!!e}removeKeyword(t){const{RULES:e}=this;delete e.keywords[t],delete e.all[t];for(const n of e.rules){const e=n.rules.findIndex((e=>e.keyword===t));e>=0&&n.rules.splice(e,1)}return this}addFormat(t,e){return"string"==typeof e&&(e=new RegExp(e)),this.formats[t]=e,this}errorsText(t=this.errors,{separator:e=", ",dataVar:n="data"}={}){return t&&0!==t.length?t.map((t=>`${n}${t.dataPath} ${t.message}`)).reduce(((t,n)=>t+e+n)):"No errors"}$dataMetaSchema(t,e){const n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(const i of e){const e=i.split("/").slice(1);let s=t;for(const t of e)s=s[t];for(const t in n){const e=n[t];if("object"!=typeof e)continue;const{$data:i}=e.definition,o=s[t];i&&o&&(s[t]=A(o))}}return t}_removeAllSchemas(t,e){for(const n in t){const i=t[n];e&&!e.test(n)||("string"==typeof i?delete t[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[n]))}}_addSchema(t,e,n=this.opts.validateSchema,i=this.opts.addUsedSchema){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema must be object or boolean");let s=this._cache.get(t);if(void 0!==s)return s;const o=c.getSchemaRefs.call(this,t);s=new a.SchemaEnv({schema:t,meta:e,localRefs:o}),this._cache.set(s.schema,s);const r=s.baseId;return i&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=s),n&&this.validateSchema(t,!0),s}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):a.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){const e=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,t)}finally{this.opts=e}}}function y(t,e,n,i="error"){for(const s in t){const o=s;o in e&&this.logger[i](`${n}: option ${s}. ${t[o]}`)}}function b(t){return t=c.normalizeId(t),this.schemas[t]||this.refs[t]}function x(){const t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(const e in t)this.addSchema(t[e],e)}function w(){for(const t in this.opts.formats){const e=this.opts.formats[t];e&&this.addFormat(t,e)}}function k(t){if(Array.isArray(t))this.addVocabulary(t);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const e in t){const n=t[e];n.keyword||(n.keyword=e),this.addKeyword(n)}}}function S(){const t={...this.opts};for(const e of p)delete t[e];return t}e.default=v,v.ValidationError=o.ValidationError,v.MissingRefError=o.MissingRefError;const C={log(){},warn(){},error(){}};const E=/^[a-z_$][a-z0-9_$-]*$/i;function P(t,e){const{RULES:n}=this;if(h.eachItem(t,(t=>{if(n.keywords[t])throw new Error(`Keyword ${t} is already defined`);if(!E.test(t))throw new Error(`Keyword ${t} has invalid name`)})),e&&e.$data&&!("code"in e)&&!("validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function D(t,e,n){var i;const s=null==e?void 0:e.post;if(n&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let r=s?o.post:o.rules.find((({type:t})=>t===n));if(r||(r={type:n,rules:[]},o.rules.push(r)),o.keywords[t]=!0,!e)return;const a={keyword:t,definition:{...e,type:u.getJSONTypes(e.type),schemaType:u.getJSONTypes(e.schemaType)}};e.before?T.call(this,r,a,e.before):r.rules.push(a),o.all[t]=a,null===(i=e.implements)||void 0===i||i.forEach((t=>this.addKeyword(t)))}function T(t,e,n){const i=t.rules.findIndex((t=>t.keyword===n));i>=0?t.rules.splice(i,0,e):(t.rules.push(e),this.logger.warn(`rule ${n} is not defined`))}function $(t){let{metaSchema:e}=t;void 0!==e&&(t.$data&&this.opts.$data&&(e=A(e)),t.validateSchema=this.compile(e,!0))}const O={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(t){return{anyOf:[t,O]}}},2228:t=>{"use strict";t.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},278:t=>{"use strict";t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},4783:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(4069),o=n(6776),r=n(4815),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:t}})=>i.str`should NOT have more than ${t} items`,params:({params:{len:t}})=>i._`{limit: ${t}}`},code(t){const{gen:e,schema:n,parentSchema:a,data:l,it:c}=t,{items:u}=a;if(!Array.isArray(u))return void r.checkStrictMode(c,'"additionalItems" is ignored when "items" is not an array of schemas');c.items=!0;const h=e.const("len",i._`${l}.length`);if(!1===n)t.setParams({len:u.length}),t.pass(i._`${h} <= ${u.length}`);else if("object"==typeof n&&!o.alwaysValidSchema(c,n)){const n=e.var("valid",i._`${h} <= ${u.length}`);e.if(i.not(n),(()=>function(n){e.forRange("i",u.length,h,(o=>{t.subschema({keyword:"additionalItems",dataProp:o,dataPropType:s.Type.Num},n),c.allErrors||e.if(i.not(n),(()=>e.break()))}))}(n))),t.ok(n)}}};e.default=a},9351:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),s=n(3487),o=n(2141),r=n(4069),a=n(6776),l={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:t})=>s._`{additionalProperty: ${t.additionalProperty}}`},code(t){const{gen:e,schema:n,parentSchema:l,data:c,errsCount:u,it:h}=t;if(!u)throw new Error("ajv implementation error");const{allErrors:d,opts:p}=h;if(h.props=!0,"all"!==p.removeAdditional&&a.alwaysValidSchema(h,n))return;const f=i.allSchemaProperties(l.properties),m=i.allSchemaProperties(l.patternProperties);function g(t){e.code(s._`delete ${c}[${t}]`)}function _(i){if("all"===p.removeAdditional||p.removeAdditional&&!1===n)g(i);else{if(!1===n)return t.setParams({additionalProperty:i}),t.error(),void(d||e.break());if("object"==typeof n&&!a.alwaysValidSchema(h,n)){const n=e.name("valid");"failing"===p.removeAdditional?(v(i,n,!1),e.if(s.not(n),(()=>{t.reset(),g(i)}))):(v(i,n),d||e.if(s.not(n),(()=>e.break())))}}}function v(e,n,i){const s={keyword:"additionalProperties",dataProp:e,dataPropType:r.Type.Str,strictSchema:h.strictSchema};!1===i&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(s,n)}e.forIn("key",c,(t=>{f.length||m.length?e.if(function(t){let n;if(f.length>8){const e=a.schemaRefOrVal(h,l.properties,"properties");n=s._`${e}.hasOwnProperty(${t})`}else n=f.length?s.or(...f.map((e=>s._`${t} === ${e}`))):s.nil;return m.length&&(n=s.or(n,...m.map((n=>s._`${i.usePattern(e,n)}.test(${t})`)))),s._`!(${n})`}(t),(()=>_(t))):_(t)})),t.ok(s._`${u} === ${o.default.errors}`)}};e.default=l},1125:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6776),s={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=e.name("valid");n.forEach(((e,n)=>{if(i.alwaysValidSchema(s,e))return;const r=t.subschema({keyword:"allOf",schemaProp:n},o);t.ok(o),t.mergeEvaluated(r)}))}};e.default=s},19:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(6776),o={keyword:"anyOf",schemaType:"array",trackErrors:!0,code(t){const{gen:e,schema:n,it:o}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((t=>s.alwaysValidSchema(o,t)))&&!o.opts.unevaluated)return;const r=e.let("valid",!1),a=e.name("_valid");e.block((()=>n.forEach(((n,s)=>{const o=t.subschema({keyword:"anyOf",schemaProp:s,compositeRule:!0},a);e.assign(r,i._`${r} || ${a}`);t.mergeValidEvaluated(o,a)||e.if(i.not(r))})))),t.result(r,(()=>t.reset()),(()=>t.error(!0)))},error:{message:"should match some schema in anyOf"}};e.default=o},9864:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(4069),o=n(6776),r=n(4815),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:t,max:e}})=>void 0===e?i.str`should contain at least ${t} valid item(s)`:i.str`should contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>void 0===e?i._`{minContains: ${t}}`:i._`{minContains: ${t}, maxContains: ${e}}`},code(t){const{gen:e,schema:n,parentSchema:a,data:l,it:c}=t;let u,h;const{minContains:d,maxContains:p}=a;c.opts.next?(u=void 0===d?1:d,h=p):u=1;const f=e.const("len",i._`${l}.length`);if(t.setParams({min:u,max:h}),void 0===h&&0===u)return void r.checkStrictMode(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==h&&u>h)return r.checkStrictMode(c,'"minContains" > "maxContains" is always invalid'),void t.fail();if(o.alwaysValidSchema(c,n)){let e=i._`${f} >= ${u}`;return void 0!==h&&(e=i._`${e} && ${f} <= ${h}`),void t.pass(e)}c.items=!0;const m=e.name("valid");if(void 0===h&&1===u)g(m,(()=>e.if(m,(()=>e.break()))));else{e.let(m,!1);const t=e.name("_valid"),n=e.let("count",0);g(t,(()=>e.if(t,(()=>function(t){e.code(i._`${t}++`),void 0===h?e.if(i._`${t} >= ${u}`,(()=>e.assign(m,!0).break())):(e.if(i._`${t} > ${h}`,(()=>e.assign(m,!1).break())),1===u?e.assign(m,!0):e.if(i._`${t} >= ${u}`,(()=>e.assign(m,!0))))}(n)))))}function g(n,i){e.forRange("i",0,f,(e=>{t.subschema({keyword:"contains",dataProp:e,dataPropType:s.Type.Num,compositeRule:!0},n),i()}))}t.result(m,(()=>t.reset()))}};e.default=a},7772:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const i=n(3487),s=n(6776),o=n(412);e.error={message:({params:{property:t,depsCount:e,deps:n}})=>{const s=1===e?"property":"properties";return i.str`should have ${s} ${n} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:n,missingProperty:s}})=>i._`{property: ${t},
    missingProperty: ${s},
    depsCount: ${e},
    deps: ${n}}`};const r={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(t){const[e,n]=function({schema:t}){const e={},n={};for(const i in t){if("__proto__"===i)continue;(Array.isArray(t[i])?e:n)[i]=t[i]}return[e,n]}(t);a(t,e),l(t,n)}};function a(t,e=t.schema){const{gen:n,data:s,it:r}=t;if(0===Object.keys(e).length)return;const a=n.let("missing");for(const l in e){const c=e[l];if(0===c.length)continue;const u=o.propertyInData(s,l,r.opts.ownProperties);t.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),r.allErrors?n.if(u,(()=>{for(const e of c)o.checkReportMissingProp(t,e)})):(n.if(i._`${u} && (${o.checkMissingProp(t,c,a)})`),o.reportMissingProp(t,a),n.else())}}function l(t,e=t.schema){const{gen:n,data:i,keyword:r,it:a}=t,l=n.name("valid");for(const c in e)s.alwaysValidSchema(a,e[c])||(n.if(o.propertyInData(i,c,a.opts.ownProperties),(()=>{const e=t.subschema({keyword:r,schemaProp:c},l);t.mergeValidEvaluated(e,l)}),(()=>n.var(l,!0))),t.ok(l))}e.validatePropertyDeps=a,e.validateSchemaDeps=l,e.default=r},9434:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(6776),o=n(4815),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:t})=>i.str`should match "${t.ifClause}" schema`,params:({params:t})=>i._`{failingKeyword: ${t.ifClause}}`},code(t){const{gen:e,parentSchema:n,it:s}=t;void 0===n.then&&void 0===n.else&&o.checkStrictMode(s,'"if" without "then" and "else" is ignored');const r=a(s,"then"),l=a(s,"else");if(!r&&!l)return;const c=e.let("valid",!0),u=e.name("_valid");if(function(){const e=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);t.mergeEvaluated(e)}(),t.reset(),r&&l){const n=e.let("ifClause");t.setParams({ifClause:n}),e.if(u,h("then",n),h("else",n))}else r?e.if(u,h("then")):e.if(i.not(u),h("else"));function h(n,s){return()=>{const o=t.subschema({keyword:n},u);e.assign(c,u),t.mergeValidEvaluated(o,c),s?e.assign(s,i._`${n}`):t.setParams({ifClause:n})}}t.pass(c,(()=>t.error(!0)))}};function a(t,e){const n=t.schema[e];return void 0!==n&&!s.alwaysValidSchema(t,n)}e.default=r},8200:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(4783),s=n(4665),o=n(9864),r=n(7772),a=n(3708),l=n(9351),c=n(6239),u=n(2296),h=n(5697),d=n(19),p=n(4200),f=n(1125),m=n(9434),g=n(6552),_=[h.default,d.default,p.default,f.default,m.default,g.default,i.default,s.default,o.default,a.default,l.default,r.default,c.default,u.default];e.default=_},4665:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(4069),o=n(6776),r=n(4815),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{gen:e,schema:n,parentSchema:a,data:l,it:c}=t,u=e.const("len",i._`${l}.length`);Array.isArray(n)?(c.opts.unevaluated&&n.length&&!0!==c.items&&(c.items=o.mergeEvaluated.items(e,n.length,c.items)),function(s){if(c.opts.strictTuples&&!function(t,e){return t===e.minItems&&(t===e.maxItems||!1===e.additionalItems)}(n.length,a)){const t=`"items" is ${s.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;r.checkStrictMode(c,t,c.opts.strictTuples)}const l=e.name("valid");s.forEach(((n,s)=>{o.alwaysValidSchema(c,n)||(e.if(i._`${u} > ${s}`,(()=>t.subschema({keyword:"items",schemaProp:s,dataProp:s,strictSchema:c.strictSchema},l))),t.ok(l))}))}(n)):(c.items=!0,o.alwaysValidSchema(c,n)||function(){const n=e.name("valid");e.forRange("i",0,u,(o=>{t.subschema({keyword:"items",dataProp:o,dataPropType:s.Type.Num,strictSchema:c.strictSchema},n),c.allErrors||e.if(i.not(n),(()=>e.break()))})),t.ok(n)}())}};e.default=a},5697:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(6776),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:s}=t;if(i.alwaysValidSchema(s,n))return void t.fail();const o=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.result(o,(()=>t.error()),(()=>t.reset()))},error:{message:"should NOT be valid"}};e.default=s},4200:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(6776),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:t})=>i._`{passingSchemas: ${t.passing}}`},code(t){const{gen:e,schema:n,it:o}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const r=n,a=e.let("valid",!1),l=e.let("passing",null),c=e.name("_valid");t.setParams({passing:l}),e.block((function(){r.forEach(((n,r)=>{let u;s.alwaysValidSchema(o,n)?e.var(c,!0):u=t.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},c),r>0&&e.if(i._`${c} && ${a}`).assign(a,!1).assign(l,i._`[${l}, ${r}]`).else(),e.if(c,(()=>{e.assign(a,!0),e.assign(l,r),u&&t.mergeEvaluated(u,i.Name)}))}))})),t.result(a,(()=>t.reset()),(()=>t.error(!0)))}};e.default=o},2296:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),s=n(3487),o=n(4069),r=n(4815),a=n(6776),l={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:l,parentSchema:c,it:u}=t,{opts:h}=u,d=i.schemaProperties(u,n);if(0===d.length)return;const p=h.strict&&!h.allowMatchingProperties&&c.properties,f=e.name("valid");!0===u.props||u.props instanceof s.Name||(u.props=a.evaluatedPropsToName(e,u.props));const{props:m}=u;function g(t){for(const e in p)new RegExp(t).test(e)&&r.checkStrictMode(u,`property ${e} matches pattern ${t} (use allowMatchingProperties)`)}function _(n){e.forIn("key",l,(r=>{e.if(s._`${i.usePattern(e,n)}.test(${r})`,(()=>{t.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:o.Type.Str,strictSchema:u.strictSchema},f),u.opts.unevaluated&&!0!==m?e.assign(s._`${m}[${r}]`,!0):u.allErrors||e.if(s.not(f),(()=>e.break()))}))}))}!function(){for(const t of d)p&&g(t),u.allErrors?_(t):(e.var(f,!0),_(t),e.if(f))}()}};e.default=l},6239:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(2227),s=n(412),o=n(6776),r=n(9351),a={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:a,data:l,it:c}=t;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&r.default.code(new i.default(c,r.default,"additionalProperties"));const u=s.allSchemaProperties(n);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=o.mergeEvaluated.props(e,o.toHash(u),c.props));const h=u.filter((t=>!o.alwaysValidSchema(c,n[t])));if(0===h.length)return;const d=e.name("valid");for(const n of h)p(n)?f(n):(e.if(s.propertyInData(l,n,c.opts.ownProperties)),f(n),c.allErrors||e.else().var(d,!0),e.endIf()),t.ok(d);function p(t){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[t].default}function f(e){t.subschema({keyword:"properties",schemaProp:e,dataProp:e,strictSchema:c.strictSchema},d)}}};e.default=a},3708:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(6776),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:t})=>i.str`property name '${t.propertyName}' is invalid`,params:({params:t})=>i._`{propertyName: ${t.propertyName}}`},code(t){const{gen:e,schema:n,data:o,it:r}=t;if(s.alwaysValidSchema(r,n))return;const a=e.name("valid");e.forIn("key",o,(n=>{t.setParams({propertyName:n}),t.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0,strictSchema:r.strictSchema},a),e.if(i.not(a),(()=>{t.error(!0),r.allErrors||e.break()}))})),t.ok(a)}};e.default=o},6552:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(4815),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){void 0===e.if&&i.checkStrictMode(n,`"${t}" without "if" is ignored`)}};e.default=s},412:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.usePattern=e.callValidateCode=e.schemaProperties=e.allSchemaProperties=e.noPropertyInData=e.propertyInData=e.reportMissingProp=e.checkMissingProp=e.checkReportMissingProp=void 0;const i=n(3487),s=n(6776),o=n(2141);function r(t,e){return i._`Object.prototype.hasOwnProperty.call(${t}, ${e})`}function a(t,e,n){const s=i._`${t}${i.getProperty(e)} === undefined`;return n?i._`${s} || !${r(t,e)}`:s}function l(t){return t?Object.keys(t).filter((t=>"__proto__"!==t)):[]}e.checkReportMissingProp=function(t,e){const{gen:n,data:s,it:o}=t;n.if(a(s,e,o.opts.ownProperties),(()=>{t.setParams({missingProperty:i._`${e}`},!0),t.error()}))},e.checkMissingProp=function({data:t,it:{opts:e}},n,s){return i.or(...n.map((n=>i._`${a(t,n,e.ownProperties)} && (${s} = ${n})`)))},e.reportMissingProp=function(t,e){t.setParams({missingProperty:e},!0),t.error()},e.propertyInData=function(t,e,n){const s=i._`${t}${i.getProperty(e)} !== undefined`;return n?i._`${s} && ${r(t,e)}`:s},e.noPropertyInData=a,e.allSchemaProperties=l,e.schemaProperties=function(t,e){return l(e).filter((n=>!s.alwaysValidSchema(t,e[n])))},e.callValidateCode=function({schemaCode:t,data:e,it:{gen:n,topSchemaRef:s,schemaPath:r,errorPath:a},it:l},c,u,h){const d=h?i._`${t}, ${e}, ${s}${r}`:e,p=[[o.default.dataPath,i.strConcat(o.default.dataPath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&p.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const f=i._`${d}, ${n.object(...p)}`;return u!==i.nil?i._`${c}.call(${u}, ${f})`:i._`${c}(${f})`},e.usePattern=function(t,e){return t.scopeValue("pattern",{key:e,ref:new RegExp(e,"u"),code:i._`new RegExp(${e}, "u")`})}},8386:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};e.default=n},5684:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(8386),s=n(8280),o=["$schema","$id","$defs","$vocabulary","definitions",i.default,s.default];e.default=o},8280:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callRef=e.getValidate=void 0;const i=n(8727),s=n(412),o=n(3487),r=n(2141),a=n(5173),l=n(6776),c={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:s}=t,{baseId:r,schemaEnv:l,validateName:c,opts:d,self:p}=s;if("#"===n||"#/"===n)return function(){if(l===l.root)return h(t,c,l,l.$async);const n=e.scopeValue("root",{ref:l.root});return h(t,o._`${n}.validate`,l.root,l.root.$async)}();const f=a.resolveRef.call(p,l.root,r,n);if(void 0===f)throw new i.MissingRefError(r,n);return f instanceof a.SchemaEnv?function(e){const n=u(t,e);h(t,n,e,e.$async)}(f):function(i){const s=e.scopeValue("schema",!0===d.code.source?{ref:i,code:o.stringify(i)}:{ref:i}),r=e.name("valid"),a=t.subschema({schema:i,strictSchema:!0,dataTypes:[],schemaPath:o.nil,topSchemaRef:s,errSchemaPath:n},r);t.mergeEvaluated(a),t.ok(r)}(f)}};function u(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):o._`${n.scopeValue("wrapper",{ref:e})}.validate`}function h(t,e,n,i){const{gen:a,it:c}=t,{allErrors:u,schemaEnv:h,opts:d}=c,p=d.passContext?r.default.this:o.nil;function f(t){const e=o._`${t}.errors`;a.assign(r.default.vErrors,o._`${r.default.vErrors} === null ? ${e} : ${r.default.vErrors}.concat(${e})`),a.assign(r.default.errors,o._`${r.default.vErrors}.length`)}function m(t){var e;if(!c.opts.unevaluated)return;const i=null===(e=null==n?void 0:n.validate)||void 0===e?void 0:e.evaluated;if(!0!==c.props)if(i&&!i.dynamicProps)void 0!==i.props&&(c.props=l.mergeEvaluated.props(a,i.props,c.props));else{const e=a.var("props",o._`${t}.evaluated.props`);c.props=l.mergeEvaluated.props(a,e,c.props,o.Name)}if(!0!==c.items)if(i&&!i.dynamicItems)void 0!==i.items&&(c.items=l.mergeEvaluated.items(a,i.items,c.items));else{const e=a.var("items",o._`${t}.evaluated.items`);c.items=l.mergeEvaluated.items(a,e,c.items,o.Name)}}i?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(o._`await ${s.callValidateCode(t,e,p)}`),m(e),u||a.assign(n,!0)}),(t=>{a.if(o._`!(${t} instanceof ${c.ValidationError})`,(()=>a.throw(t))),f(t),u||a.assign(n,!1)})),t.ok(n)}():t.result(s.callValidateCode(t,e,p),(()=>m(e)),(()=>f(e)))}e.getValidate=u,e.callRef=h,e.default=c},3924:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(5684),s=n(2649),o=n(8200),r=n(9502),a=n(6167),l=[i.default,s.default,o.default,r.default,a.metadataVocabulary,a.contentVocabulary];e.default=l},9651:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>i.str`should match format "${t}"`,params:({schemaCode:t})=>i._`{format: ${t}}`},code(t,e){const{gen:n,data:s,$data:o,schema:r,schemaCode:a,it:l}=t,{opts:c,errSchemaPath:u,schemaEnv:h,self:d}=l;c.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:d.formats,code:c.code.formats}),r=n.const("fDef",i._`${o}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(i._`typeof ${r} == "object" && !(${r} instanceof RegExp)`,(()=>n.assign(l,i._`${r}.type || "string"`).assign(u,i._`${r}.validate`)),(()=>n.assign(l,i._`"string"`).assign(u,r))),t.fail$data(i.or(!1===c.strict?i.nil:i._`${a} && !${u}`,function(){const t=h.$async?i._`(${r}.async ? await ${u}(${s}) : ${u}(${s}))`:i._`${u}(${s})`,n=i._`(typeof ${u} == "function" ? ${t} : ${u}.test(${s}))`;return i._`${u} && ${u} !== true && ${l} === ${e} && !${n}`}()))}():function(){const o=d.formats[r];if(!o)return void function(){if(!1===c.strict)return void d.logger.warn(t());throw new Error(t());function t(){return`unknown format "${r}" ignored in schema at path "${u}"`}}();if(!0===o)return;const[a,l,p]=function(t){const e=n.scopeValue("formats",{key:r,ref:t,code:c.code.formats?i._`${c.code.formats}${i.getProperty(r)}`:void 0});if("object"==typeof t&&!(t instanceof RegExp))return[t.type||"string",t.validate,i._`${e}.validate`];return["string",t,e]}(o);a===e&&t.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!h.$async)throw new Error("async format in sync schema");return i._`await ${p}(${s})`}return"function"==typeof l?i._`${p}(${s})`:i._`${p}.test(${s})`}())}())}};e.default=s},9502:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=[n(9651).default];e.default=i},6167:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contentVocabulary=e.metadataVocabulary=void 0,e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},4693:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(4063),o={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:t})=>i._`{allowedValue: ${t}}`},code(t){const e=t.gen.scopeValue("func",{ref:s,code:i._`require("ajv/dist/compile/equal")`});t.fail$data(i._`!${e}(${t.data}, ${t.schemaCode})`)}};e.default=o},966:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(4063),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:t})=>i._`{allowedValues: ${t}}`},code(t){const{gen:e,data:n,$data:o,schema:r,schemaCode:a,it:l}=t;if(!o&&0===r.length)throw new Error("enum must have non-empty array");const c=r.length>=l.opts.loopEnum,u=t.gen.scopeValue("func",{ref:s,code:i._`require("ajv/dist/compile/equal")`});let h;if(c||o)h=e.let("valid"),t.block$data(h,(function(){e.assign(h,!1),e.forOf("v",a,(t=>e.if(i._`${u}(${n}, ${t})`,(()=>e.assign(h,!0).break()))))}));else{if(!Array.isArray(r))throw new Error("ajv implementation error");const t=e.const("vSchema",a);h=i.or(...r.map(((e,s)=>function(t,e){const s=r[e];return s&&"object"==typeof s?i._`${u}(${n}, ${t}[${e}])`:i._`${n} === ${s}`}(t,s))))}t.pass(h)}};e.default=o},2649:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3983),s=n(430),o=n(3229),r=n(4336),a=n(498),l=n(3301),c=n(1687),u=n(2958),h=n(4693),d=n(966),p=[i.default,s.default,o.default,r.default,a.default,l.default,c.default,u.default,{keyword:"nullable",schemaType:"boolean"},h.default,d.default];e.default=p},1687:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:t,schemaCode:e}){const n="maxItems"===t?"more":"fewer";return i.str`should NOT have ${n} than ${e} items`},params:({schemaCode:t})=>i._`{limit: ${t}}`},code(t){const{keyword:e,data:n,schemaCode:s}=t,o="maxItems"===e?i.operators.GT:i.operators.LT;t.fail$data(i._`${n}.length ${o} ${s}`)}};e.default=s},3229:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=n(4776),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:t,schemaCode:e}){const n="maxLength"===t?"more":"fewer";return i.str`should NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>i._`{limit: ${t}}`},code(t){const{keyword:e,data:n,schemaCode:o,it:r}=t,a="maxLength"===e?i.operators.GT:i.operators.LT;let l;if(!1===r.opts.unicode)l=i._`${n}.length`;else{const e=t.gen.scopeValue("func",{ref:s.default,code:i._`require("ajv/dist/compile/ucs2length").default`});l=i._`${e}(${n})`}t.fail$data(i._`${l} ${a} ${o}`)}};e.default=o},3983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s=i.operators,o={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},r={message:({keyword:t,schemaCode:e})=>i.str`should be ${o[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>i._`{comparison: ${o[t].okStr}, limit: ${e}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:r,code(t){const{keyword:e,data:n,schemaCode:s}=t;t.fail$data(i._`${n} ${o[e].fail} ${s} || isNaN(${n})`)}};e.default=a},498:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:t,schemaCode:e}){const n="maxProperties"===t?"more":"fewer";return i.str`should NOT have ${n} than ${e} items`},params:({schemaCode:t})=>i._`{limit: ${t}}`},code(t){const{keyword:e,data:n,schemaCode:s}=t,o="maxProperties"===e?i.operators.GT:i.operators.LT;t.fail$data(i._`Object.keys(${n}).length ${o} ${s}`)}};e.default=s},430:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3487),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:t})=>i.str`should be multiple of ${t}`,params:({schemaCode:t})=>i._`{multipleOf: ${t}}`},code(t){const{gen:e,data:n,schemaCode:s,it:o}=t,r=o.opts.multipleOfPrecision,a=e.let("res"),l=r?i._`Math.abs(Math.round(${a}) - ${a}) > 1e-${r}`:i._`${a} !== parseInt(${a})`;t.fail$data(i._`(${s} === 0 || (${a} = ${n}/${s}, ${l}))`)}};e.default=s},4336:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),s=n(3487),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>s.str`should match pattern "${t}"`,params:({schemaCode:t})=>s._`{pattern: ${t}}`},code(t){const{gen:e,data:n,$data:o,schema:r,schemaCode:a}=t,l=o?s._`(new RegExp(${a}, "u"))`:i.usePattern(e,r);t.fail$data(s._`!${l}.test(${n})`)}};e.default=o},3301:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(412),s=n(3487),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:t}})=>s.str`should have required property '${t}'`,params:({params:{missingProperty:t}})=>s._`{missingProperty: ${t}}`},code(t){const{gen:e,schema:n,schemaCode:o,data:r,$data:a,it:l}=t,{opts:c}=l;if(!a&&0===n.length)return;const u=n.length>=c.loopRequired;function h(){e.forOf("prop",o,(n=>{t.setParams({missingProperty:n}),e.if(i.noPropertyInData(r,n,c.ownProperties),(()=>t.error()))}))}l.allErrors?function(){if(u||a)t.block$data(s.nil,h);else for(const e of n)i.checkReportMissingProp(t,e)}():function(){const l=e.let("missing");if(u||a){const n=e.let("valid",!0);t.block$data(n,(()=>function(n,a){t.setParams({missingProperty:n}),e.forOf(n,o,(()=>{e.assign(a,i.propertyInData(r,n,c.ownProperties)),e.if(s.not(a),(()=>{t.error(),e.break()}))}),s.nil)}(l,n))),t.ok(n)}else e.if(i.checkMissingProp(t,n,l)),i.reportMissingProp(t,l),e.else()}()}};e.default=o},2958:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(453),s=n(3487),o=n(4063),r={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:t,j:e}})=>s.str`should NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>s._`{i: ${t}, j: ${e}}`},code(t){const{gen:e,data:n,$data:r,schema:a,parentSchema:l,schemaCode:c,it:u}=t;if(!r&&!a)return;const h=e.let("valid"),d=l.items?i.getSchemaTypes(l.items):[];function p(o,r){const a=e.name("item"),l=i.checkDataTypes(d,a,u.opts.strict,i.DataType.Wrong),c=e.const("indices",s._`{}`);e.for(s._`;${o}--;`,(()=>{e.let(a,s._`${n}[${o}]`),e.if(l,s._`continue`),d.length>1&&e.if(s._`typeof ${a} == "string"`,s._`${a} += "_"`),e.if(s._`typeof ${c}[${a}] == "number"`,(()=>{e.assign(r,s._`${c}[${a}]`),t.error(),e.assign(h,!1).break()})).code(s._`${c}[${a}] = ${o}`)}))}function f(i,r){const a=t.gen.scopeValue("func",{ref:o,code:s._`require("ajv/dist/compile/equal")`}),l=e.name("outer");e.label(l).for(s._`;${i}--;`,(()=>e.for(s._`${r} = ${i}; ${r}--;`,(()=>e.if(s._`${a}(${n}[${i}], ${n}[${r}])`,(()=>{t.error(),e.assign(h,!1).break(l)}))))))}t.block$data(h,(function(){const i=e.let("i",s._`${n}.length`),o=e.let("j");t.setParams({i,j:o}),e.assign(h,!0),e.if(s._`${i} > 1`,(()=>(d.length>0&&!d.some((t=>"object"===t||"array"===t))?p:f)(i,o)))}),s._`${c} === false`),t.ok(h)}};e.default=r},8307:function(t,e){var n;!function(i){"use strict";var s=":not(:disabled):not(.ajs-reset)",o=13,r=27,a=112,l=123,c=37,u=39,h=9,d={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+s].join(s+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},p=[];function f(t,e){t.className+=" "+e}function m(t,e){for(var n=t.className.split(" "),i=e.split(" "),s=0;s<i.length;s+=1){var o=n.indexOf(i[s]);o>-1&&n.splice(o,1)}t.className=n.join(" ")}function g(){return"rtl"===i.getComputedStyle(document.body).direction}function _(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function v(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function y(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function b(t){if(null===t)return t;var e;if(Array.isArray(t)){e=[];for(var n=0;n<t.length;n+=1)e.push(b(t[n]));return e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return(e=new RegExp(t.source)).global=t.global,e.ignoreCase=t.ignoreCase,e.multiline=t.multiline,e.lastIndex=t.lastIndex,e;if("object"==typeof t){for(var i in e={},t)t.hasOwnProperty(i)&&(e[i]=b(t[i]));return e}return t}function x(t,e){if(t.elements){var n=t.elements.root;n.parentNode.removeChild(n),delete t.elements,t.settings=b(t.__settings),t.__init=e,delete t.__internal}}var w=!1;try{var k=Object.defineProperty({},"passive",{get:function(){w=!0}});i.addEventListener("test",k,k),i.removeEventListener("test",k,k)}catch(t){}var S=function(t,e,n,i,s){t.addEventListener(e,n,w?{capture:i,passive:s}:!0===i)},C=function(t,e,n,i,s){t.removeEventListener(e,n,w?{capture:i,passive:s}:!0===i)},E=function(){var t,e,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(void 0!==document.documentElement.style[t]){e=i[t],n=!0;break}return{type:e,supported:n}}();function P(t,e){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(t),e.apply(t,n)}return e.apply(t,[null,t])}}function D(t,e){return{index:t,button:e,cancel:!1}}function T(t,e){if("function"==typeof e.get(t))return e.get(t).call(e)}var $=function(){var t,e,n=[],s=!1,o=i.navigator.userAgent.indexOf("Safari")>-1&&i.navigator.userAgent.indexOf("Chrome")<0,w='<div class="ajs-dimmer"></div>',k='<div class="ajs-modal" tabindex="0"></div>',$='<div class="ajs-dialog" tabindex="0"></div>',O='<button class="ajs-reset"></button>',N='<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',j='<div class="ajs-header"></div>',M='<div class="ajs-body"></div>',I='<div class="ajs-content"></div>',L='<div class="ajs-footer"></div>',R={primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},B='<button class="ajs-button"></button>',F='<div class="ajs-handle"></div>',H="ajs-in",z="ajs-out",W="alertify",q="ajs-basic",V="ajs-capture",U="ajs-closable",G="ajs-fixed",K="ajs-frameless",J="ajs-hidden",X="ajs-maximized",Y="ajs-maximizable",Q="ajs-modeless",Z="ajs-movable",tt="ajs-no-selection",et="ajs-no-overflow",nt="ajs-no-padding",it="ajs-pinnable",st="ajs-",ot="ajs-resizable",rt="ajs-shake",at="ajs-unpinned",lt="ajs-no-transition";function ct(t){if(!t.__internal){var e;A.defaults.hooks.preinit(t),delete t.__init,t.__settings||(t.__settings=b(t.settings)),"function"==typeof t.setup?((e=t.setup()).options=e.options||{},e.focus=e.focus||{}):e={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof t.hooks&&(t.hooks={});var i=[];if(Array.isArray(e.buttons))for(var s=0;s<e.buttons.length;s+=1){var o=e.buttons[s],r={};for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a]);i.push(r)}var l=t.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:i,focus:e.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};c.root=document.createElement("div"),c.root.style.display="none",c.root.className=W+" "+J+" ",c.root.innerHTML=w+k,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=$,c.dialog=c.modal.firstChild,c.dialog.innerHTML=O+N+j+M+L+F+O,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=I,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=R.auxiliary+R.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=B,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<t.__internal.buttons.length;u+=1){var h=t.__internal.buttons[u];for(var d in n.indexOf(h.key)<0&&n.push(h.key),h.element=c.buttonTemplate.cloneNode(),h.element.innerHTML=h.text,"string"==typeof h.className&&""!==h.className&&f(h.element,h.className),h.attrs)"className"!==d&&h.attrs.hasOwnProperty(d)&&h.element.setAttribute(d,h.attrs[d]);"auxiliary"===h.scope?c.buttons.auxiliary.appendChild(h.element):c.buttons.primary.appendChild(h.element)}for(var p in t.elements=c,l.resetHandler=P(t,Lt),l.beginMoveHandler=P(t,Qt),l.beginResizeHandler=P(t,ae),l.bringToFrontHandler=P(t,mt),l.modalClickHandler=P(t,Tt),l.buttonsClickHandler=P(t,Nt),l.commandsClickHandler=P(t,yt),l.transitionInHandler=P(t,Ft),l.transitionOutHandler=P(t,Ht),l.options)void 0!==e.options[p]?t.set(p,e.options[p]):A.defaults.hasOwnProperty(p)?t.set(p,A.defaults[p]):"title"===p&&t.set(p,A.defaults.glossary[p]);"function"==typeof t.build&&t.build(),A.defaults.hooks.postinit(t)}document.body.appendChild(t.elements.root)}function ut(){i.scrollTo(t,e)}function ht(){for(var t=0,e=0;e<p.length;e+=1){var n=p[e];(n.isModal()||n.isMaximized())&&(t+=1)}0===t&&document.body.className.indexOf(et)>=0?(m(document.body,et),ft(!1)):t>0&&document.body.className.indexOf(et)<0&&(ft(!0),f(document.body,et))}var dt="",pt=0;function ft(t){A.defaults.preventBodyShift&&(t&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(pt=e,dt=i.getComputedStyle(document.body).top,f(document.body,G),document.body.style.top=-e+"px"):t||(e=pt,document.body.style.top=dt,m(document.body,G),ut()))}function mt(t,e){for(var n=p.indexOf(e)+1;n<p.length;n+=1)if(p[n].isModal())return;return document.body.lastChild!==e.elements.root&&(document.body.appendChild(e.elements.root),p.splice(p.indexOf(e),1),p.push(e),It(e)),!1}function gt(t,e,n,i){switch(e){case"title":t.setHeader(i);break;case"modal":!function(t){t.get("modal")?(m(t.elements.root,Q),t.isOpen()&&(pe(t),Et(t),ht())):(f(t.elements.root,Q),t.isOpen()&&(de(t),Et(t),ht()))}(t);break;case"basic":!function(t){t.get("basic")?f(t.elements.root,q):m(t.elements.root,q)}(t);break;case"frameless":!function(t){t.get("frameless")?f(t.elements.root,K):m(t.elements.root,K)}(t);break;case"pinned":!function(t){t.get("pinned")?(m(t.elements.root,at),t.isOpen()&&Ct(t)):(f(t.elements.root,at),t.isOpen()&&!t.isModal()&&St(t))}(t);break;case"closable":!function(t){t.get("closable")?(f(t.elements.root,U),function(t){S(t.elements.modal,"click",t.__internal.modalClickHandler)}(t)):(m(t.elements.root,U),function(t){C(t.elements.modal,"click",t.__internal.modalClickHandler)}(t))}(t);break;case"maximizable":!function(t){t.get("maximizable")?f(t.elements.root,Y):m(t.elements.root,Y)}(t);break;case"pinnable":!function(t){t.get("pinnable")?f(t.elements.root,it):m(t.elements.root,it)}(t);break;case"movable":!function(t){t.get("movable")?(f(t.elements.root,Z),t.isOpen()&&fe(t)):(ee(t),m(t.elements.root,Z),t.isOpen()&&me(t))}(t);break;case"resizable":!function(t){t.get("resizable")?(f(t.elements.root,ot),t.isOpen()&&ge(t)):(ue(t),m(t.elements.root,ot),t.isOpen()&&_e(t))}(t);break;case"padding":i?m(t.elements.root,nt):t.elements.root.className.indexOf(nt)<0&&f(t.elements.root,nt);break;case"overflow":i?m(t.elements.root,et):t.elements.root.className.indexOf(et)<0&&f(t.elements.root,et);break;case"transition":!function(t,e,n){"string"==typeof n&&m(t.elements.root,st+n),f(t.elements.root,st+e),t.elements.root.offsetWidth}(t,i,n);break;case"transitionOff":!function(t){t.get("transitionOff")?f(t.elements.root,lt):m(t.elements.root,lt)}(t)}"function"==typeof t.hooks.onupdate&&t.hooks.onupdate.call(t,e,n,i)}function _t(t,e,n,i,s){var o,r={op:void 0,items:[]};if(void 0===s&&"string"==typeof i)r.op="get",e.hasOwnProperty(i)?(r.found=!0,r.value=e[i]):(r.found=!1,r.value=void 0);else if(r.op="set","object"==typeof i){var a=i;for(var l in a)e.hasOwnProperty(l)?(e[l]!==a[l]&&(o=e[l],e[l]=a[l],n.call(t,l,o,a[l])),r.items.push({key:l,value:a[l],found:!0})):r.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof i)throw new Error("args must be a string or object");e.hasOwnProperty(i)?(e[i]!==s&&(o=e[i],e[i]=s,n.call(t,i,o,s)),r.items.push({key:i,value:s,found:!0})):r.items.push({key:i,value:s,found:!1})}return r}function vt(t){var e;At(t,(function(n){return e=!0!==t.get("invokeOnCloseOff")&&!0===n.invokeOnClose})),!e&&t.isOpen()&&t.close()}function yt(t,e){switch(t.srcElement||t.target){case e.elements.commands.pin:e.isPinned()?xt(e):bt(e);break;case e.elements.commands.maximize:e.isMaximized()?kt(e):wt(e);break;case e.elements.commands.close:vt(e)}return!1}function bt(t){t.set("pinned",!0)}function xt(t){t.set("pinned",!1)}function wt(t){T("onmaximize",t),f(t.elements.root,X),t.isOpen()&&ht(),T("onmaximized",t)}function kt(t){T("onrestore",t),m(t.elements.root,X),t.isOpen()&&ht(),T("onrestored",t)}function St(t){var e=v();t.elements.modal.style.marginTop=_()+"px",t.elements.modal.style.marginLeft=e+"px",t.elements.modal.style.marginRight=-e+"px"}function Ct(t){var e=parseInt(t.elements.modal.style.marginTop,10),n=parseInt(t.elements.modal.style.marginLeft,10);if(t.elements.modal.style.marginTop="",t.elements.modal.style.marginLeft="",t.elements.modal.style.marginRight="",t.isOpen()){var i=0,s=0;""!==t.elements.dialog.style.top&&(i=parseInt(t.elements.dialog.style.top,10)),t.elements.dialog.style.top=i+(e-_())+"px",""!==t.elements.dialog.style.left&&(s=parseInt(t.elements.dialog.style.left,10)),t.elements.dialog.style.left=s+(n-v())+"px"}}function Et(t){t.get("modal")||t.get("pinned")?Ct(t):St(t)}var Pt=!1,Dt=0;function Tt(t,e){if(t.timeStamp-Dt>200&&(Dt=t.timeStamp)&&!Pt){var n=t.srcElement||t.target;!0===e.get("closableByDimmer")&&n===e.elements.modal&&vt(e)}Pt=!1}var $t=0,Ot=!1;function At(t,e){if(Date.now()-$t>200&&($t=Date.now()))for(var n=0;n<t.__internal.buttons.length;n+=1){var i=t.__internal.buttons[n];if(!i.element.disabled&&e(i)){var s=D(n,i);"function"==typeof t.callback&&t.callback.apply(t,[s]),!1===s.cancel&&t.close();break}}}function Nt(t,e){var n=t.srcElement||t.target;At(e,(function(t){return t.element===n&&(Ot=!0)}))}function jt(t){if(!Ot){var e=p[p.length-1],i=t.keyCode;return 0===e.__internal.buttons.length&&i===r&&!0===e.get("closable")?(vt(e),!1):n.indexOf(i)>-1?(At(e,(function(t){return t.key===i})),!1):void 0}Ot=!1}function Mt(t){var e=p[p.length-1],i=t.keyCode;if(i===c||i===u){for(var s=e.__internal.buttons,o=0;o<s.length;o+=1)if(document.activeElement===s[o].element)switch(i){case c:return void s[(o||s.length)-1].element.focus();case u:return void s[(o+1)%s.length].element.focus()}}else if(i<l+1&&i>a-1&&n.indexOf(i)>-1)return t.preventDefault(),t.stopPropagation(),At(e,(function(t){return t.key===i})),!1}function It(t,e){if(e)e.focus();else{var n=t.__internal.focus,i=n.element;switch(typeof n.element){case"number":t.__internal.buttons.length>n.element&&(i=!0===t.get("basic")?t.elements.reset[0]:t.__internal.buttons[n.element].element);break;case"string":i=t.elements.body.querySelector(n.element);break;case"function":i=n.element.call(t)}(!0===t.get("defaultFocusOff")||null==i&&0===t.__internal.buttons.length)&&(i=t.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}function Lt(t,e){if(!e)for(var n=p.length-1;n>-1;n-=1)if(p[n].isModal()){e=p[n];break}if(e&&e.isModal()){var i,s=e.elements.reset[0],o=e.elements.reset[1],r=t.relatedTarget,a=e.elements.root.contains(r),l=t.srcElement||t.target;if(l===s&&!a||l===o&&r===s)return;l===o||l===document.body?i=s:l===s&&r===o?i=Rt(e):l===s&&a&&(i=Rt(e,!0)),It(e,i)}}function Rt(t,e){var n=[].slice.call(t.elements.dialog.querySelectorAll(d.tabbable));e&&n.reverse();for(var i=0;i<n.length;i+=1){var s=n[i];if(s.offsetParent||s.offsetWidth||s.offsetHeight||s.getClientRects().length)return s}}function Bt(t){var e=p[p.length-1];e&&t.shiftKey&&t.keyCode===h&&e.elements.reset[1].focus()}function Ft(t,e){clearTimeout(e.__internal.timerIn),It(e),Ot=!1,T("onfocus",e),C(e.elements.dialog,E.type,e.__internal.transitionInHandler),m(e.elements.root,H)}function Ht(t,e){clearTimeout(e.__internal.timerOut),C(e.elements.dialog,E.type,e.__internal.transitionOutHandler),ee(e),ue(e),e.isMaximized()&&!e.get("startMaximized")&&kt(e),"function"==typeof e.__internal.destroy&&e.__internal.destroy.apply(e)}var zt=null,Wt=0,qt=0,Vt="pageX",Ut="pageY",Gt=null,Kt=!1,Jt=null;function Xt(t,e){var n=t[Vt]-Wt,i=t[Ut]-qt;Kt&&(i-=document.body.scrollTop),e.style.left=n+"px",e.style.top=i+"px"}function Yt(t,e){var n=t[Vt]-Wt,i=t[Ut]-qt;Kt&&(i-=document.body.scrollTop),e.style.left=Math.min(Gt.maxLeft,Math.max(Gt.minLeft,n))+"px",e.style.top=Kt?Math.min(Gt.maxTop,Math.max(Gt.minTop,i))+"px":Math.max(Gt.minTop,i)+"px"}function Qt(t,e){if(null===ne&&!e.isMaximized()&&e.get("movable")){var n,i=0,s=0;if("touchstart"===t.type?(t.preventDefault(),n=t.targetTouches[0],Vt="clientX",Ut="clientY"):0===t.button&&(n=t),n){var o=e.elements.dialog;if(f(o,V),o.style.left&&(i=parseInt(o.style.left,10)),o.style.top&&(s=parseInt(o.style.top,10)),Wt=n[Vt]-i,qt=n[Ut]-s,e.isModal()?qt+=e.elements.modal.scrollTop:e.isPinned()&&(qt-=document.body.scrollTop),e.get("moveBounded")){var r=o,a=-i,l=-s;do{a+=r.offsetLeft,l+=r.offsetTop}while(r=r.offsetParent);Gt={maxLeft:a,minLeft:-a,maxTop:document.documentElement.clientHeight-o.clientHeight-l,minTop:-l},Jt=Yt}else Gt=null,Jt=Xt;return T("onmove",e),Kt=!e.isModal()&&e.isPinned(),zt=e,Jt(n,o),f(document.body,tt),!1}}}function Zt(t){var e;zt&&("touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&Jt(e,zt.elements.dialog))}function te(){if(zt){var t=zt;zt=Gt=null,m(document.body,tt),m(t.elements.dialog,V),T("onmoved",t)}}function ee(t){zt=null;var e=t.elements.dialog;e.style.left=e.style.top=""}var ne=null,ie=Number.Nan,se=0,oe=0,re=0;function ae(t,e){var n;if(!e.isMaximized()&&("touchstart"===t.type?(t.preventDefault(),n=t.targetTouches[0]):0===t.button&&(n=t),n)){T("onresize",e),ne=e,re=e.elements.resizeHandle.offsetHeight/2;var i=e.elements.dialog;return f(i,V),ie=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=e.elements.header.offsetHeight+e.elements.footer.offsetHeight+"px",i.style.width=(se=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(oe=i.offsetWidth)+"px"),i.style.maxWidth="none",f(document.body,tt),!1}}function le(t){var e;ne&&("touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&function(t,e,n){var i,s,o=e,r=0,a=0;do{r+=o.offsetLeft,a+=o.offsetTop}while(o=o.offsetParent);!0===n?(i=t.pageX,s=t.pageY):(i=t.clientX,s=t.clientY);var l=g();if(l&&(i=document.body.offsetWidth-i,isNaN(ie)||(r=document.body.offsetWidth-r-e.offsetWidth)),e.style.height=s-a+re+"px",e.style.width=i-r+re+"px",!isNaN(ie)){var c=.5*Math.abs(e.offsetWidth-se);l&&(c*=-1),e.offsetWidth>se?e.style.left=ie+c+"px":e.offsetWidth>=oe&&(e.style.left=ie-c+"px")}}(e,ne.elements.dialog,!ne.get("modal")&&!ne.get("pinned")))}function ce(){if(ne){var t=ne;ne=null,m(document.body,tt),m(t.elements.dialog,V),Pt=!0,T("onresized",t)}}function ue(t){ne=null;var e=t.elements.dialog;"none"===e.style.maxWidth&&(e.style.maxWidth=e.style.minWidth=e.style.width=e.style.height=e.style.minHeight=e.style.left="",ie=Number.Nan,se=oe=re=0)}function he(){for(var t=0;t<p.length;t+=1){var e=p[t];e.get("autoReset")&&(ee(e),ue(e))}}function de(t){S(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function pe(t){C(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function fe(t){S(t.elements.header,"mousedown",t.__internal.beginMoveHandler),S(t.elements.header,"touchstart",t.__internal.beginMoveHandler,!1,!1)}function me(t){C(t.elements.header,"mousedown",t.__internal.beginMoveHandler),C(t.elements.header,"touchstart",t.__internal.beginMoveHandler,!1,!1)}function ge(t){S(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),S(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler,!1,!1)}function _e(t){C(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),C(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler,!1,!1)}return{__init:ct,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(Q)<0},isMaximized:function(){return this.elements.root.className.indexOf(X)>-1},isPinned:function(){return this.elements.root.className.indexOf(at)<0},maximize:function(){return this.isMaximized()||wt(this),this},restore:function(){return this.isMaximized()&&kt(this),this},pin:function(){return this.isPinned()||bt(this),this},unpin:function(){return this.isPinned()&&xt(this),this},bringToFront:function(){return mt(0,this),this},moveTo:function(t,e){if(!isNaN(t)&&!isNaN(e)){T("onmove",this);var n=this.elements.dialog,i=n,s=0,o=0;n.style.left&&(s-=parseInt(n.style.left,10)),n.style.top&&(o-=parseInt(n.style.top,10));do{s+=i.offsetLeft,o+=i.offsetTop}while(i=i.offsetParent);var r=t-s,a=e-o;g()&&(r*=-1),n.style.left=r+"px",n.style.top=a+"px",T("onmoved",this)}return this},resizeTo:function(t,e){var n=parseFloat(t),i=parseFloat(e),s=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){T("onresize",this),(""+t).match(s)&&(n=n/100*document.documentElement.clientWidth),(""+e).match(s)&&(i=i/100*document.documentElement.clientHeight);var o=this.elements.dialog;"none"!==o.style.maxWidth&&(o.style.minWidth=(oe=o.offsetWidth)+"px"),o.style.maxWidth="none",o.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",o.style.width=n+"px",o.style.height=i+"px",T("onresized",this)}return this},setting:function(t,e){var n=this,i=_t(this,this.__internal.options,(function(t,e,i){gt(n,t,e,i)}),t,e);if("get"===i.op)return i.found?i.value:void 0!==this.settings?_t(this,this.settings,this.settingUpdated||function(){},t,e).value:void 0;if("set"===i.op){if(i.items.length>0)for(var s=this.settingUpdated||function(){},o=0;o<i.items.length;o+=1){var r=i.items[o];r.found||void 0===this.settings||_t(this,this.settings,s,r.key,r.value)}return this}},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},setHeader:function(t){return"string"==typeof t?(y(this.elements.header),this.elements.header.innerHTML=t):t instanceof i.HTMLElement&&this.elements.header.firstChild!==t&&(y(this.elements.header),this.elements.header.appendChild(t)),this},setContent:function(t){return"string"==typeof t?(y(this.elements.content),this.elements.content.innerHTML=t):t instanceof i.HTMLElement&&this.elements.content.firstChild!==t&&(y(this.elements.content),this.elements.content.appendChild(t)),this},showModal:function(t){return this.show(!0,t)},show:function(n,r){if(ct(this),this.__internal.isOpen){ee(this),ue(this),f(this.elements.dialog,rt);var a=this;setTimeout((function(){m(a.elements.dialog,rt)}),200)}else{if(this.__internal.isOpen=!0,p.push(this),A.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",s="0"),"function"==typeof this.prepare&&this.prepare(),c=this,1===p.length&&(S(i,"resize",he),S(document.body,"keyup",jt),S(document.body,"keydown",Mt),S(document.body,"focus",Lt),S(document.documentElement,"mousemove",Zt),S(document.documentElement,"touchmove",Zt,!1,!1),S(document.documentElement,"mouseup",te),S(document.documentElement,"touchend",te),S(document.documentElement,"mousemove",le),S(document.documentElement,"touchmove",le,!1,!1),S(document.documentElement,"mouseup",ce),S(document.documentElement,"touchend",ce)),S(c.elements.commands.container,"click",c.__internal.commandsClickHandler),S(c.elements.footer,"click",c.__internal.buttonsClickHandler),S(c.elements.reset[0],"focusin",c.__internal.resetHandler),S(c.elements.reset[0],"keydown",Bt),S(c.elements.reset[1],"focusin",c.__internal.resetHandler),Ot=!0,S(c.elements.dialog,E.type,c.__internal.transitionInHandler),c.get("modal")||de(c),c.get("resizable")&&ge(c),c.get("movable")&&fe(c),void 0!==n&&this.set("modal",n),t=v(),e=_(),ht(),"string"==typeof r&&""!==r&&(this.__internal.className=r,f(this.elements.root,r)),this.get("startMaximized")?this.maximize():this.isMaximized()&&kt(this),Et(this),this.elements.root.removeAttribute("style"),m(this.elements.root,z),f(this.elements.root,H),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,E.supported?1e3:100),o){var l=this.elements.root;l.style.display="none",setTimeout((function(){l.style.display="block"}),0)}this.elements.root.offsetWidth,m(this.elements.root,J),ut(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),T("onshow",this)}var c;return this},close:function(){var t;return this.__internal.isOpen&&!1!==T("onclosing",this)&&(t=this,1===p.length&&(C(i,"resize",he),C(document.body,"keyup",jt),C(document.body,"keydown",Mt),C(document.body,"focus",Lt),C(document.documentElement,"mousemove",Zt),C(document.documentElement,"mouseup",te),C(document.documentElement,"mousemove",le),C(document.documentElement,"mouseup",ce)),C(t.elements.commands.container,"click",t.__internal.commandsClickHandler),C(t.elements.footer,"click",t.__internal.buttonsClickHandler),C(t.elements.reset[0],"focusin",t.__internal.resetHandler),C(t.elements.reset[0],"keydown",Bt),C(t.elements.reset[1],"focusin",t.__internal.resetHandler),S(t.elements.dialog,E.type,t.__internal.transitionOutHandler),t.get("modal")||pe(t),t.get("movable")&&me(t),t.get("resizable")&&_e(t),m(this.elements.root,H),f(this.elements.root,z),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,E.supported?1e3:100),f(this.elements.root,J),this.elements.modal.offsetWidth,A.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&m(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),T("onclose",this),p.splice(p.indexOf(this),1),this.__internal.isOpen=!1,ht()),p.length||"0"!==s||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return A.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){x(this,ct)},this.close()):this.__internal.destroy||x(this,ct)),this}}}(),O=function(){var t,e=[],n=d.notifier.classes,s=n.base;function o(e){e.__internal||(e.__internal={position:A.defaults.notifier.position,delay:A.defaults.notifier.delay},t=document.createElement("DIV"),("transitionOff"in d.notifier?d.notifier.transitionOff:d.transitionOff)&&(s=n.base+" ajs-no-transition"),a(e));t.parentNode!==document.body&&document.body.appendChild(t)}function r(t){t.__internal.pushed=!0,e.push(t)}function a(e){switch(t.className=s,e.__internal.position){case"top-right":f(t,n.top+" "+n.right);break;case"top-left":f(t,n.top+" "+n.left);break;case"top-center":f(t,n.top+" "+n.center);break;case"bottom-left":f(t,n.bottom+" "+n.left);break;case"bottom-center":f(t,n.bottom+" "+n.center);break;default:case"bottom-right":f(t,n.bottom+" "+n.right)}}function l(s,o){function a(t,e){e.__internal.closeButton&&"true"!==t.target.getAttribute("data-close")||e.dismiss(!0)}function l(e,n){C(n.element,E.type,l),t.removeChild(n.element)}function c(t){clearTimeout(t.__internal.timer),clearTimeout(t.__internal.transitionTimeout)}return(u={element:s,push:function(e,i){if(!this.__internal.pushed){var s,o;switch(r(this),c(this),arguments.length){case 0:o=this.__internal.delay;break;case 1:"number"==typeof e?o=e:(s=e,o=this.__internal.delay);break;case 2:s=e,o=i}return this.__internal.closeButton=A.defaults.notifier.closeButton,void 0!==s&&this.setContent(s),O.__internal.position.indexOf("top")<0?t.appendChild(this.element):t.insertBefore(this.element,t.firstChild),this.element.offsetWidth,f(this.element,n.visible),S(this.element,"click",this.__internal.clickHandler),this.delay(o)}return this},ondismiss:function(){},callback:o,dismiss:function(i){var s;return this.__internal.pushed&&(c(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(C(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===t&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,E.supported?1e3:100),m(this.element,n.visible),"function"==typeof this.callback&&this.callback.call(this,i)),s=this,e.splice(e.indexOf(s),1),s.__internal.pushed=!1)),this},delay:function(t){if(c(this),this.__internal.delay=void 0===t||isNaN(+t)?O.__internal.delay:+t,this.__internal.delay>0){var e=this;this.__internal.timer=setTimeout((function(){e.dismiss()}),1e3*this.__internal.delay)}return this},setContent:function(t){if("string"==typeof t?(y(this.element),this.element.innerHTML=t):t instanceof i.HTMLElement&&this.element.firstChild!==t&&(y(this.element),this.element.appendChild(t)),this.__internal.closeButton){var e=document.createElement("span");f(e,n.close),e.setAttribute("data-close",!0),this.element.appendChild(e)}return this},dismissOthers:function(){return O.dismissAll(this),this}}).__internal||(u.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},u.__internal.clickHandler=P(u,a),u.__internal.transitionEndHandler=P(u,l)),u;var u}return{setting:function(t,e){if(o(this),void 0===e)return this.__internal[t];switch(t){case"position":this.__internal.position=e,a(this);break;case"delay":this.__internal.delay=e}return this},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},create:function(t,e){o(this);var i=document.createElement("div");return i.className=n.message+("string"==typeof t&&""!==t?" "+n.prefix+t:""),l(i,e)},dismissAll:function(t){for(var n=e.slice(0),i=0;i<n.length;i+=1){var s=n[i];void 0!==t&&t===s||s.dismiss()}}}}();var A=new function(){var t={};function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function n(e){var n=t[e].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}return{defaults:d,dialog:function(i,s,o,r){if("function"!=typeof s)return n(i);if(this.hasOwnProperty(i))throw new Error("alertify.dialog: name already exists");var a=function(n,i,s,o){var r={dialog:null,factory:i};return void 0!==o&&(r.factory=function(){return e(new t[o].factory,new i)}),s||(r.dialog=e(new r.factory,$)),t[n]=r}(i,s,o,r);this[i]=o?function(){if(0===arguments.length)return a.dialog;var t=e(new a.factory,$);return t&&"function"==typeof t.__init&&t.__init(t),t.main.apply(t,arguments),t.show.apply(t)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var t=a.dialog;return t.main.apply(a.dialog,arguments),t.show.apply(a.dialog)}},closeAll:function(t){for(var e=p.slice(0),n=0;n<e.length;n+=1){var i=e[n];void 0!==t&&t===i||i.close()}},setting:function(t,e,i){if("notifier"===t)return O.setting(e,i);var s=n(t);return s?s.setting(e,i):void 0},set:function(t,e,n){return this.setting(t,e,n)},get:function(t,e){return this.setting(t,e)},notify:function(t,e,n,i){return O.create(e,i).push(t,n)},message:function(t,e,n){return O.create(null,n).push(t,e)},success:function(t,e,n){return O.create("success",n).push(t,e)},error:function(t,e,n){return O.create("error",n).push(t,e)},warning:function(t,e,n){return O.create("warning",n).push(t,e)},dismissAll:function(){O.dismissAll()}}};A.dialog("alert",(function(){return{main:function(t,e,n){var i,s,o;switch(arguments.length){case 1:s=t;break;case 2:"function"==typeof e?(s=t,o=e):(i=t,s=e);break;case 3:i=t,s=e,o=n}return this.set("title",i),this.set("message",s),this.set("onok",o),this},setup:function(){return{buttons:[{text:A.defaults.glossary.ok,key:r,invokeOnClose:!0,className:A.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(t,e,n){switch(t){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(t){if("function"==typeof this.get("onok")){var e=this.get("onok").call(this,t);void 0!==e&&(t.cancel=!e)}}}})),A.dialog("confirm",(function(){var t={timer:null,index:null,text:null,duration:null,task:function(n,i){if(i.isOpen()){if(i.__internal.buttons[t.index].element.innerHTML=t.text+" (&#8207;"+t.duration+"&#8207;) ",t.duration-=1,-1===t.duration){e(i);var s=i.__internal.buttons[t.index],o=D(t.index,s);"function"==typeof i.callback&&i.callback.apply(i,[o]),!1!==o.close&&i.close()}}else e(i)}};function e(e){null!==t.timer&&(clearInterval(t.timer),t.timer=null,e.__internal.buttons[t.index].element.innerHTML=t.text)}function n(n,i,s){e(n),t.duration=s,t.index=i,t.text=n.__internal.buttons[i].element.innerHTML,t.timer=setInterval(P(n,t.task),1e3),t.task(null,n)}return{main:function(t,e,n,i){var s,o,r,a;switch(arguments.length){case 1:o=t;break;case 2:o=t,r=e;break;case 3:o=t,r=e,a=n;break;case 4:s=t,o=e,r=n,a=i}return this.set("title",s),this.set("message",o),this.set("onok",r),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:A.defaults.glossary.ok,key:o,className:A.defaults.theme.ok},{text:A.defaults.glossary.cancel,key:r,invokeOnClose:!0,className:A.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(t,e,n){switch(t){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(t){var n;switch(e(this),t.index){case 0:"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,t))&&(t.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,t))&&(t.cancel=!n)}},autoOk:function(t){return n(this,0,t),this},autoCancel:function(t){return n(this,1,t),this}}})),A.dialog("prompt",(function(){var t=document.createElement("INPUT"),e=document.createElement("P");return{main:function(t,e,n,i,s){var o,r,a,l,c;switch(arguments.length){case 1:r=t;break;case 2:r=t,a=e;break;case 3:r=t,a=e,l=n;break;case 4:r=t,a=e,l=n,c=i;break;case 5:o=t,r=e,a=n,l=i,c=s}return this.set("title",o),this.set("message",r),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:A.defaults.glossary.ok,key:o,className:A.defaults.theme.ok},{text:A.defaults.glossary.cancel,key:r,invokeOnClose:!0,className:A.defaults.theme.cancel}],focus:{element:t,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){t.className=A.defaults.theme.input,t.setAttribute("type","text"),t.value=this.get("value"),this.elements.content.appendChild(e),this.elements.content.appendChild(t)},prepare:function(){},setMessage:function(t){"string"==typeof t?(y(e),e.innerHTML=t):t instanceof i.HTMLElement&&e.firstChild!==t&&(y(e),e.appendChild(t))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(e,n,i){switch(e){case"message":this.setMessage(i);break;case"value":t.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":t.type=i;break;default:t.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(e){var n;switch(e.index){case 0:this.settings.value=t.value,"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,e,this.settings.value))&&(e.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,e))&&(e.cancel=!n),e.cancel||(t.value=this.settings.value)}}}})),"object"==typeof t.exports?t.exports=A:void 0===(n=function(){return A}.apply(e,[]))||(t.exports=n)}("undefined"!=typeof window?window:this)},454:t=>{"use strict";const e=(t,e,n)=>{const i=e<0?t.length+e:e;if(i>=0&&i<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}};t.exports=(t,n,i)=>(t=[...t],e(t,n,i),t),t.exports.mutate=e},296:t=>{function e(t,e,n){var i,s,o,r,a;function l(){var c=Date.now()-r;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(o,s),o=s=null))}null==e&&(e=100);var c=function(){o=this,s=arguments,r=Date.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(o,s),o=s=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(o,s),o=s=null,clearTimeout(i),i=null)},c}e.debounce=e,t.exports=e},2828:t=>{if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},9438:(t,e,n)=>{var i=n(2828);function s(t,e,n,i,s){var r=o.apply(this,arguments);return t.addEventListener(n,r,s),{destroy:function(){t.removeEventListener(n,r,s)}}}function o(t,e,n,s){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&s.call(t,n)}}t.exports=function(t,e,n,i,o){return"function"==typeof t.addEventListener?s.apply(null,arguments):"function"==typeof n?s.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return s(t,e,n,i,o)})))}},1182:(t,e,n)=>{t.exports=n(9269)},9269:t=>{var e={create:function(t){var e;if(t=t.trim(),/<.*>/g.test(t)){var n=document.createElement("div");n.innerHTML=t,e=n.firstChild}else e=document.createElement(t);if(!this.isValidNode(e))throw new Error("Element not valid");return e},isValidNode:function(t){return t&&"nodeType"in t},render:function(t,e){var n;if(e=null==(n=e)?[]:Array.isArray(n)?n:[n],!this.isValidNode(t))throw new Error("Require a valid HTML Element");return e.forEach((function(e){t.appendChild(e)})),t}};t.exports=e},4676:(t,e,n)=>{var i=n(7187).EventEmitter;function s(t){i.call(this),t=t||{},this.states=t.states||["default"],this.currentState=t.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var e=this;this.on("transition",(function(t){e.events.forEach((function(n){n.from===t.from&&n.to===t.to&&e.emit(n.event)}))}))}s.prototype=Object.create(i.prototype),s.prototype.setState=function(t){var e=this.currentState;if(!this._validate(e,t))return!1;this.history.push({state:e,args:this.currentArgs});var n=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=n,this.currentState=t,this._emit(e,t,n),!0},s.prototype.back=function(){if(!this.history.length)return!1;var t=this.history[this.history.length-1],e=this.currentState,n=t.state,i=t.args;return!!this._validate(e,n)&&(this.history.pop(),this.currentState=n,this.currentArgs=i,this._emit(e,n,i,!0),!0)},s.prototype.lock=function(){this.locked=!0},s.prototype.unlock=function(){this.locked=!1},s.prototype.config=function(t,e){e.to=e.to||{},e.from=e.from||{},this.configs[t]=e},s.prototype.register=function(t,e){this.events.push({event:t,from:e.from,to:e.to})},s.prototype._emit=function(t,e,n,i){var s={from:t,to:e,args:n,back:i};this.emit("transition",s),this.emit("leave:"+t,s),this.emit("enter:"+e,s)},s.prototype._validate=function(t,e){if(!(this.locked||t===e||this.states.indexOf(e)<0)){var n=this.configs[t];if(n)if(n.to.only){if(n.to.only.indexOf(e)<0)return}else if(n.to.exclude&&n.to.exclude.indexOf(e)>-1)return;var i=this.configs[e];if(i)if(i.from.only){if(i.from.only.indexOf(t)<0)return}else if(i.from.exclude&&i.from.exclude.indexOf(t)>-1)return;return!0}},t.exports=s},7187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,i){function s(){void 0!==o&&t.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==e&&(o=function(n){t.removeListener(e,s),i(n)},t.once("error",o)),t.once(e,s)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,i){var s,o,r,c;if(a(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),r=o[e]),void 0===r)r=o[e]=n,++t._eventsCount;else if("function"==typeof r?r=o[e]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),(s=l(t))>0&&r.length>s&&!r.warned){r.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=r.length,c=u,console&&console.warn&&console.warn(c)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=u.bind(i);return s.listener=n,i.wrapFn=s,s}function d(t,e,n){var i=t._events;if(void 0===i)return[];var s=i[e];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(s):f(s,s.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var s="error"===t,o=this._events;if(void 0!==o)s=s&&void 0===o.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)i(l,this,e);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)i(u[n],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return a(e),this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,h(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,s,o,r;if(a(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){r=n[o].listener,s=o;break}if(s<0)return this;0===s?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,s),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,r||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var s,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(s=o[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},4063:t=>{"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,s,o;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(s=i;0!=s--;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(s=i;0!=s--;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=i;0!=s--;){var r=o[s];if(!t(e[r],n[r]))return!1}return!0}return e!=e&&n!=n}},9675:function(t){
/**!

 @license
 handlebars v4.7.6

Copyright (C) 2011-2019 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var e;e=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var s=i(n(2)),o=i(n(45)),r=n(46),a=n(51),l=i(n(52)),c=i(n(49)),u=i(n(44)),h=s.default.create;function d(){var t=h();return t.compile=function(e,n){return a.compile(e,n,t)},t.precompile=function(e,n){return a.precompile(e,n,t)},t.AST=o.default,t.Compiler=a.Compiler,t.JavaScriptCompiler=l.default,t.Parser=r.parser,t.parse=r.parse,t.parseWithoutProcessing=r.parseWithoutProcessing,t}var p=d();p.create=d,u.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,n){"use strict";var i=n(3).default,s=n(1).default;e.__esModule=!0;var o=i(n(4)),r=s(n(37)),a=s(n(6)),l=i(n(5)),c=i(n(38)),u=s(n(44));function h(){var t=new o.HandlebarsEnvironment;return l.extend(t,o),t.SafeString=r.default,t.Exception=a.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var d=h();d.create=h,u.default(d),d.default=d,e.default=d,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__esModule=!0},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.HandlebarsEnvironment=h;var s=n(5),o=i(n(6)),r=n(10),a=n(30),l=i(n(32)),c=n(33);e.VERSION="4.7.6",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function h(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},r.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(s.toString.call(t)===u){if(e)throw new o.default("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(s.toString.call(t)===u)s.extend(this.partials,t);else{if(void 0===e)throw new o.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(s.toString.call(t)===u){if(e)throw new o.default("Arg not supported with multiple decorators");s.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var d=l.default.log;e.log=d,e.createFrame=s.createFrame,e.logger=l.default},function(t,e){"use strict";e.__esModule=!0,e.extend=r,e.indexOf=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return s.test(t)?t.replace(i,o):t},e.isEmpty=function(t){return!t&&0!==t||!(!c(t)||0!==t.length)},e.createFrame=function(t){var e=r({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,s=/[&<>"'`=]/;function o(t){return n[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}var a=Object.prototype.toString;e.toString=a;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)}),e.isFunction=l;var c=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===a.call(t)};e.isArray=c},function(t,e,n){"use strict";var i=n(7).default;e.__esModule=!0;var s=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function o(t,e){var n=e&&e.loc,r=void 0,a=void 0,l=void 0,c=void 0;n&&(r=n.start.line,a=n.end.line,l=n.start.column,c=n.end.column,t+=" - "+r+":"+l);for(var u=Error.prototype.constructor.call(this,t),h=0;h<s.length;h++)this[s[h]]=u[s[h]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{n&&(this.lineNumber=r,this.endLineNumber=a,i?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=l,this.endColumn=c))}catch(t){}}o.prototype=new Error,e.default=o,t.exports=e.default},function(t,e,n){t.exports={default:n(8),__esModule:!0}},function(t,e,n){var i=n(9);t.exports=function(t,e,n){return i.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){s.default(t),o.default(t),r.default(t),a.default(t),l.default(t),c.default(t),u.default(t)},e.moveHelperToHooks=function(t,e,n){t.helpers[e]&&(t.hooks[e]=t.helpers[e],n||delete t.helpers[e])};var s=i(n(11)),o=i(n(12)),r=i(n(25)),a=i(n(26)),l=i(n(27)),c=i(n(28)),u=i(n(29))},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,n){var s=n.inverse,o=n.fn;if(!0===e)return o(this);if(!1===e||null==e)return s(this);if(i.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):s(this);if(n.data&&n.ids){var r=i.createFrame(n.data);r.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:r}}return o(e,n)}))},t.exports=e.default},function(t,e,n){(function(i){"use strict";var s=n(13).default,o=n(1).default;e.__esModule=!0;var r=n(5),a=o(n(6));e.default=function(t){t.registerHelper("each",(function(t,e){if(!e)throw new a.default("Must pass iterator to #each");var n,o=e.fn,l=e.inverse,c=0,u="",h=void 0,d=void 0;function p(e,n,i){h&&(h.key=e,h.index=n,h.first=0===n,h.last=!!i,d&&(h.contextPath=d+e)),u+=o(t[e],{data:h,blockParams:r.blockParams([t[e],e],[d+e,null])})}if(e.data&&e.ids&&(d=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),r.isFunction(t)&&(t=t.call(this)),e.data&&(h=r.createFrame(e.data)),t&&"object"==typeof t)if(r.isArray(t))for(var f=t.length;c<f;c++)c in t&&p(c,c,c===t.length-1);else if(i.Symbol&&t[i.Symbol.iterator]){for(var m=[],g=t[i.Symbol.iterator](),_=g.next();!_.done;_=g.next())m.push(_.value);for(f=(t=m).length;c<f;c++)p(c,c,c===t.length-1)}else n=void 0,s(t).forEach((function(t){void 0!==n&&p(n,c-1),n=t,c++})),void 0!==n&&p(n,c-1,!0);return 0===c&&(u=l(this)),u}))},t.exports=e.default}).call(e,function(){return this}())},function(t,e,n){t.exports={default:n(14),__esModule:!0}},function(t,e,n){n(15),t.exports=n(21).Object.keys},function(t,e,n){var i=n(16);n(18)("keys",(function(t){return function(e){return t(i(e))}}))},function(t,e,n){var i=n(17);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(19),s=n(21),o=n(24);t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],r={};r[t]=e(n),i(i.S+i.F*o((function(){n(1)})),"Object",r)}},function(t,e,n){var i=n(20),s=n(21),o=n(22),r=function(t,e,n){var a,l,c,u=t&r.F,h=t&r.G,d=t&r.S,p=t&r.P,f=t&r.B,m=t&r.W,g=h?s:s[e]||(s[e]={}),_=h?i:d?i[e]:(i[e]||{}).prototype;for(a in h&&(n=e),n)(l=!u&&_&&a in _)&&a in g||(c=l?_[a]:n[a],g[a]=h&&"function"!=typeof _[a]?n[a]:f&&l?o(c,i):m&&_[a]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((g.prototype||(g.prototype={}))[a]=c))};r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(23);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var s=i(n(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var s=n(5),o=i(n(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return s.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var s=1;null!=n.hash.level?s=n.hash.level:n.data&&null!=n.data.level&&(s=n.data.level),e[0]=s,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,n){return t?n.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var s=n(5),o=i(n(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");s.isFunction(t)&&(t=t.call(this));var n=e.fn;if(s.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&((i=s.createFrame(e.data)).contextPath=s.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:i,blockParams:s.blockParams([t],[i&&i.contextPath])})}))},t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){s.default(t)};var s=i(n(31))},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,n,s){var o=t;return e.partials||(e.partials={},o=function(s,o){var r=n.partials;n.partials=i.extend({},r,e.partials);var a=t(s,o);return n.partials=r,a}),e.partials[s.args[0]]=s.fn,o}))},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5),s={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.indexOf(s.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=s.lookupLevel(t),"undefined"!=typeof console&&s.lookupLevel(s.level)<=t){var e=s.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];console[e].apply(console,i)}}};e.default=s,t.exports=e.default},function(t,e,n){"use strict";var i=n(34).default,s=n(13).default,o=n(3).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=i(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var n=i(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,n){return c("function"==typeof t?e.methods:e.properties,n)},e.resetLoggedProperties=function(){s(l).forEach((function(t){delete l[t]}))};var r=n(36),a=o(n(32)),l=i(null);function c(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==l[t]&&(l[t]=!0,a.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}},function(t,e,n){t.exports={default:n(35),__esModule:!0}},function(t,e,n){var i=n(9);t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){"use strict";var i=n(34).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return s.extend.apply(void 0,[i(null)].concat(e))};var s=n(5)},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(39).default,s=n(13).default,o=n(3).default,r=n(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,n=c.COMPILER_REVISION;if(!(e>=c.LAST_COMPATIBLE_COMPILER_REVISION&&e<=c.COMPILER_REVISION)){if(e<c.LAST_COMPATIBLE_COMPILER_REVISION){var i=c.REVISION_CHANGES[n],s=c.REVISION_CHANGES[e];throw new l.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new l.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){if(!e)throw new l.default("No environment passed to template");if(!t||!t.main)throw new l.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var n=t.compiler&&7===t.compiler[0],o={strict:function(t,e,n){if(!t||!(e in t))throw new l.default('"'+e+'" not defined in '+t,{loc:n});return t[e]},lookupProperty:function(t,e){var n=t[e];return null==n||Object.prototype.hasOwnProperty.call(t,e)||d.resultIsAllowed(n,o.protoAccessControl,e)?n:void 0},lookup:function(t,e){for(var n=t.length,i=0;i<n;i++)if(null!=(t[i]&&o.lookupProperty(t[i],e)))return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:a.escapeExpression,invokePartial:function(n,i,s){s.hash&&(i=a.extend({},i,s.hash),s.ids&&(s.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,i,s);var o=a.extend({},s,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),r=e.VM.invokePartial.call(this,n,i,o);if(null==r&&e.compile&&(s.partials[s.name]=e.compile(n,t.compilerOptions,e),r=s.partials[s.name](i,o)),null!=r){if(s.indent){for(var c=r.split("\n"),u=0,h=c.length;u<h&&(c[u]||u+1!==h);u++)c[u]=s.indent+c[u];r=c.join("\n")}return r}throw new l.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,i,s){var o=this.programs[t],r=this.fn(t);return e||s||i||n?o=p(this,t,r,e,n,i,s):o||(o=this.programs[t]=p(this,t,r)),o},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=a.extend({},e,t)),n},nullContext:i({}),noop:e.VM.noop,compilerInfo:t.compiler};function r(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;r._setup(n),!n.partial&&t.useData&&(i=m(e,i));var s=void 0,a=t.useBlockParams?[]:void 0;function l(e){return""+t.main(o,e,o.helpers,o.partials,i,a,s)}return t.useDepths&&(s=n.depths?e!=n.depths[0]?[e].concat(n.depths):n.depths:[e]),(l=g(t.main,l,o,n.depths||[],i,a))(e,n)}return r.isTop=!0,r._setup=function(i){if(i.partial)o.protoAccessControl=i.protoAccessControl,o.helpers=i.helpers,o.partials=i.partials,o.decorators=i.decorators,o.hooks=i.hooks;else{var r=a.extend({},e.helpers,i.helpers);!function(t,e){s(t).forEach((function(n){var i=t[n];t[n]=function(t,e){var n=e.lookupProperty;return h.wrapHelper(t,(function(t){return a.extend({lookupProperty:n},t)}))}(i,e)}))}(r,o),o.helpers=r,t.usePartial&&(o.partials=o.mergeIfNeeded(i.partials,e.partials)),(t.usePartial||t.useDecorators)&&(o.decorators=a.extend({},e.decorators,i.decorators)),o.hooks={},o.protoAccessControl=d.createProtoAccessControl(i);var l=i.allowCallsToHelperMissing||n;u.moveHelperToHooks(o,"helperMissing",l),u.moveHelperToHooks(o,"blockHelperMissing",l)}},r._child=function(e,n,i,s){if(t.useBlockParams&&!i)throw new l.default("must pass block params");if(t.useDepths&&!s)throw new l.default("must pass parent depths");return p(o,e,t[e],n,0,i,s)},r},e.wrapProgram=p,e.resolvePartial=function(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t},e.invokePartial=function(t,e,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var s=void 0;if(n.fn&&n.fn!==f&&function(){n.data=c.createFrame(n.data);var t=n.fn;s=n.data["partial-block"]=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=c.createFrame(n.data),n.data["partial-block"]=i,t(e,n)},t.partials&&(n.partials=a.extend({},n.partials,t.partials))}(),void 0===t&&s&&(t=s),void 0===t)throw new l.default("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)},e.noop=f;var a=o(n(5)),l=r(n(6)),c=n(4),u=n(10),h=n(43),d=n(33);function p(t,e,n,i,s,o,r){function a(e){var s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=r;return!r||e==r[0]||e===t.nullContext&&null===r[0]||(a=[e].concat(r)),n(t,e,t.helpers,t.partials,s.data||i,o&&[s.blockParams].concat(o),a)}return(a=g(n,a,t,r,i,o)).program=e,a.depth=r?r.length:0,a.blockParams=s||0,a}function f(){return""}function m(t,e){return e&&"root"in e||((e=e?c.createFrame(e):{}).root=t),e}function g(t,e,n,i,s,o){if(t.decorator){var r={};e=t.decorator(e,r,n,i&&i[0],s,o,i),a.extend(e,r)}return e}},function(t,e,n){t.exports={default:n(40),__esModule:!0}},function(t,e,n){n(41),t.exports=n(21).Object.seal},function(t,e,n){var i=n(42);n(18)("seal",(function(t){return function(e){return t&&i(e)?t(e):e}}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=e(n),t.apply(this,arguments)}}},function(t,e){(function(n){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==n?n:window,i=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=i),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var n={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!n.helpers.scopedId(t)&&!t.depth}}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default,s=n(3).default;e.__esModule=!0,e.parseWithoutProcessing=u,e.parse=function(t,e){var n=u(t,e);return new r.default(e).accept(n)};var o=i(n(47)),r=i(n(48)),a=s(n(50)),l=n(5);e.parser=o.default;var c={};function u(t,e){return"Program"===t.type?t:(o.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},o.default.parse(t))}l.extend(c,a)},function(t,e){"use strict";e.__esModule=!0;var n=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,n,i,s,o,r){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=i.prepareProgram(o[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[a];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(o[a]),strip:i.stripFlags(o[a],o[a]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[a],value:o[a],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(o[a-2],o[a-1],o[a],this._$);break;case 12:this.$={path:o[a-3],params:o[a-2],hash:o[a-1]};break;case 13:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!1,this._$);break;case 14:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!0,this._$);break;case 15:this.$={open:o[a-5],path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:i.stripFlags(o[a-5],o[a])};break;case 16:case 17:this.$={path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:i.stripFlags(o[a-5],o[a])};break;case 18:this.$={strip:i.stripFlags(o[a-1],o[a-1]),program:o[a]};break;case 19:var l=i.prepareBlock(o[a-2],o[a-1],o[a],o[a],!1,this._$),c=i.prepareProgram([l],o[a-1].loc);c.chained=!0,this.$={strip:o[a-2].strip,program:c,chain:!0};break;case 20:this.$=o[a];break;case 21:this.$={path:o[a-1],strip:i.stripFlags(o[a-2],o[a])};break;case 22:case 23:this.$=i.prepareMustache(o[a-3],o[a-2],o[a-1],o[a-4],i.stripFlags(o[a-4],o[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[a-3],params:o[a-2],hash:o[a-1],indent:"",strip:i.stripFlags(o[a-4],o[a]),loc:i.locInfo(this._$)};break;case 25:this.$=i.preparePartialBlock(o[a-2],o[a-1],o[a],this._$);break;case 26:this.$={path:o[a-3],params:o[a-2],hash:o[a-1],strip:i.stripFlags(o[a-4],o[a])};break;case 27:case 28:this.$=o[a];break;case 29:this.$={type:"SubExpression",path:o[a-3],params:o[a-2],hash:o[a-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[a],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(o[a-2]),value:o[a],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(o[a-1]);break;case 33:case 34:this.$=o[a];break;case 35:this.$={type:"StringLiteral",value:o[a],original:o[a],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[a]),original:Number(o[a]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[a],original:"true"===o[a],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 40:case 41:this.$=o[a];break;case 42:this.$=i.preparePath(!0,o[a],this._$);break;case 43:this.$=i.preparePath(!1,o[a],this._$);break;case 44:o[a-2].push({part:i.id(o[a]),original:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 45:this.$=[{part:i.id(o[a]),original:o[a]}];break;case 46:this.$=[];break;case 47:o[a-1].push(o[a]);break;case 48:this.$=[];break;case 49:o[a-1].push(o[a]);break;case 50:this.$=[];break;case 51:o[a-1].push(o[a]);break;case 58:this.$=[];break;case 59:o[a-1].push(o[a]);break;case 64:this.$=[];break;case 65:o[a-1].push(o[a]);break;case 70:this.$=[];break;case 71:o[a-1].push(o[a]);break;case 78:this.$=[];break;case 79:o[a-1].push(o[a]);break;case 82:this.$=[];break;case 83:o[a-1].push(o[a]);break;case 86:this.$=[];break;case 87:o[a-1].push(o[a]);break;case 90:this.$=[];break;case 91:o[a-1].push(o[a]);break;case 94:this.$=[];break;case 95:o[a-1].push(o[a]);break;case 98:this.$=[o[a]];break;case 99:o[a-1].push(o[a]);break;case 100:this.$=[o[a]];break;case 101:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,n=[0],i=[null],s=[],o=this.table,r="",a=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,f,m,g,_,v,y,b,x,w={};;){if(f=n[n.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==d&&(x=void 0,"number"!=typeof(x=e.lexer.lex()||1)&&(x=e.symbols_[x]||x),d=x),m=o[f]&&o[f][d]),void 0===m||!m.length||!m[0]){var k="";if(!c){for(_ in b=[],o[f])this.terminals_[_]&&_>2&&b.push("'"+this.terminals_[_]+"'");k=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:b})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+d);switch(m[0]){case 1:n.push(d),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(m[1]),d=null,p?(d=p,p=null):(l=this.lexer.yyleng,r=this.lexer.yytext,a=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[m[1]][1],w.$=i[i.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},h&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),void 0!==(g=this.performAction.call(w,r,l,a,this.yy,m[1],i,s)))return g;v&&(n=n.slice(0,-1*v*2),i=i.slice(0,-1*v),s=s.slice(0,-1*v)),n.push(this.productions_[m[1]][0]),i.push(w.$),s.push(w._$),y=o[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,i,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(!(n=this._input.match(this.rules[o[r]]))||e&&!(n[0].length>e[0].length)||(e=n,i=r,this.options.flex));r++);return e?((s=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,n,i){function s(t,n){return e.yytext=e.yytext.substring(t,e.yyleng-n+t)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(s(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=s(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=s(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();function n(){this.yy={}}return t.lexer=e,n.prototype=t,t.Parser=n,new n}();e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var s=i(n(49));function o(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function r(t,e,n){void 0===e&&(e=t.length);var i=t[e-1],s=t[e-2];return i?"ContentStatement"===i.type?(s||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function a(t,e,n){void 0===e&&(e=-1);var i=t[e+1],s=t[e+2];return i?"ContentStatement"===i.type?(s||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function l(t,e,n){var i=t[null==e?0:e+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var s=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==s}}function c(t,e,n){var i=t[null==e?t.length-1:e-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var s=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==s,i.leftStripped}}o.prototype=new s.default,o.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=t.body,s=0,o=i.length;s<o;s++){var u=i[s],h=this.accept(u);if(h){var d=r(i,s,n),p=a(i,s,n),f=h.openStandalone&&d,m=h.closeStandalone&&p,g=h.inlineStandalone&&d&&p;h.close&&l(i,s,!0),h.open&&c(i,s,!0),e&&g&&(l(i,s),c(i,s)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(i[s-1].original)[1])),e&&f&&(l((u.program||u.inverse).body),c(i,s)),e&&m&&(l(i,s),c((u.inverse||u.program).body))}}return t},o.prototype.BlockStatement=o.prototype.DecoratorBlock=o.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,i=n,s=n;if(n&&n.chained)for(i=n.body[0].program;s.chained;)s=s.body[s.body.length-1].program;var o={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:a(e.body),closeStandalone:r((i||e).body)};if(t.openStrip.close&&l(e.body,null,!0),n){var u=t.inverseStrip;u.open&&c(e.body,null,!0),u.close&&l(i.body,null,!0),t.closeStrip.open&&c(s.body,null,!0),!this.options.ignoreStandalone&&r(e.body)&&a(i.body)&&(c(e.body),l(i.body))}else t.closeStrip.open&&c(e.body,null,!0);return o},o.prototype.Decorator=o.prototype.MustacheStatement=function(t){return t.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=o,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var s=i(n(6));function o(){this.parents=[]}function r(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function a(t){r.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function l(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}o.prototype={constructor:o,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&!o.prototype[n.type])throw new s.default('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new s.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;e<n;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){if(!this[t.type])throw new s.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:r,Decorator:r,BlockStatement:a,DecoratorBlock:a,PartialStatement:l,PartialBlockStatement:function(t){l.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=o,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,n){n=this.locInfo(n);for(var i=t?"@":"",o=[],r=0,a=0,l=e.length;a<l;a++){var c=e[a].part,u=e[a].original!==c;if(i+=(e[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)o.push(c);else{if(o.length>0)throw new s.default("Invalid path: "+i,{loc:n});".."===c&&r++}}return{type:"PathExpression",data:t,depth:r,parts:o,original:i,loc:n}},e.prepareMustache=function(t,e,n,i,s,o){var r=i.charAt(3)||i.charAt(2),a="{"!==r&&"&"!==r;return{type:/\*/.test(i)?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:a,strip:s,loc:this.locInfo(o)}},e.prepareRawBlock=function(t,e,n,i){o(t,n),i=this.locInfo(i);var s={type:"Program",body:e,strip:{},loc:i};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:s,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(t,e,n,i,r,a){i&&i.path&&o(t,i);var l=/\*/.test(t.open);e.blockParams=t.blockParams;var c=void 0,u=void 0;if(n){if(l)throw new s.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=i.strip),u=n.strip,c=n.program}return r&&(r=c,c=e,e=r),{type:l?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:c,openStrip:t.strip,inverseStrip:u,closeStrip:i&&i.strip,loc:this.locInfo(a)}},e.prepareProgram=function(t,e){if(!e&&t.length){var n=t[0].loc,i=t[t.length-1].loc;n&&i&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,n,i){return o(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}};var s=i(n(6));function o(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new s.default(t.path.original+" doesn't match "+e,n)}}},function(t,e,n){"use strict";var i=n(34).default,s=n(1).default;e.__esModule=!0,e.Compiler=c,e.precompile=function(t,e,n){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var i=n.parse(t,e),s=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(s,e)},e.compile=function(t,e,n){if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=r.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var i=void 0;function s(){var i=n.parse(t,e),s=(new n.Compiler).compile(i,e),o=(new n.JavaScriptCompiler).compile(s,e,void 0,!0);return n.template(o)}function a(t,e){return i||(i=s()),i.call(this,t,e)}return a._setup=function(t){return i||(i=s()),i._setup(t)},a._child=function(t,e,n,o){return i||(i=s()),i._child(t,e,n,o)},a};var o=s(n(6)),r=n(5),a=s(n(45)),l=[].slice;function c(){}function u(t,e){if(t===e)return!0;if(r.isArray(t)&&r.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1;return!0}}function h(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}c.prototype={compiler:c,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;n<e;n++){var i=this.opcodes[n],s=t.opcodes[n];if(i.opcode!==s.opcode||!u(i.args,s.args))return!1}for(e=this.children.length,n=0;n<e;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=r.extend(i(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[n]=e,this.useDepths=this.useDepths||e.useDepths,n},accept:function(t){if(!this[t.type])throw new o.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,n=e.length,i=0;i<n;i++)this.accept(e[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){h(t);var e=t.program,n=t.inverse;e=e&&this.compileProgram(e),n=n&&this.compileProgram(n);var i=this.classifySexpr(t);"helper"===i?this.helperSexpr(t,e,n):"simple"===i?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,n),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),n=this.setupFullMustacheParams(t,e,void 0),i=t.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var n=t.params;if(n.length>1)throw new o.default("Unsupported number of partial arguments: "+n.length,t);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=t.name.original,s="SubExpression"===t.name.type;s&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var r=t.indent||"";this.options.preventIndent&&r&&(this.opcode("appendContent",r),r=""),this.opcode("invokePartial",s,i,r),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){h(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,n){var i=t.path,s=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),s=t.path,r=s.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new o.default("You specified knownHelpersOnly, but used the unknown helper "+r,t);s.strict=!0,s.falsy=!0,this.accept(s),this.opcode("invokeHelper",i.length,s.original,a.default.helpers.simpleId(s))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],n=a.default.helpers.scopedId(t),i=!t.depth&&!n&&this.blockParamIndex(e);i?this.opcode("lookupBlockParam",i,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,n):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,n=0,i=e.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(e[n].value);for(;n--;)this.opcode("assignToHash",e[n].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:l.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=a.default.helpers.simpleId(t.path),n=e&&!!this.blockParamIndex(t.path.parts[0]),i=!n&&a.default.helpers.helperExpression(t),s=!n&&(i||e);if(s&&!i){var o=t.path.parts[0],r=this.options;r.knownHelpers[o]?i=!0:r.knownHelpersOnly&&(s=!1)}return i?"helper":s?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;e<n;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var n=void 0;if(!t.parts||a.default.helpers.scopedId(t)||t.depth||(n=this.blockParamIndex(t.parts[0])),n){var i=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,n,i){var s=t.params;return this.pushParams(s),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.accept(t.hash):this.opcode("emptyHash",i),s},blockParamIndex:function(t){for(var e=0,n=this.options.blockParams.length;e<n;e++){var i=this.options.blockParams[e],s=i&&r.indexOf(i,t);if(i&&s>=0)return[e,s]}}}},function(t,e,n){"use strict";var i=n(13).default,s=n(1).default;e.__esModule=!0;var o=n(4),r=s(n(6)),a=n(5),l=s(n(53));function c(t){this.value=t}function u(){}u.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=o.COMPILER_REVISION;return[t,o.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,n){return a.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:n?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,n,i){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var s=t.opcodes,o=void 0,a=void 0,l=void 0,c=void 0;for(l=0,c=s.length;l<c;l++)o=s[l],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new r.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(i);if(this.isChild)return u;var h={compiler:this.compilerInfo(),main:u};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,p=d.programs,f=d.decorators;for(l=0,c=p.length;l<c;l++)p[l]&&(h[l]=p[l],f[l]&&(h[l+"_d"]=f[l],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),i?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(t){var e=this,n="",s=this.stackVars.concat(this.registers.list);s.length>0&&(n+=", "+s.join(", "));var o=0;i(this.aliases).forEach((function(t){var i=e.aliases[t];i.children&&i.referenceCount>1&&(n+=", alias"+ ++o+"="+t,i.children[0]="alias"+o)})),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var r=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths");var a=this.mergeSource(n);return t?(r.push(a),Function.apply(this,r)):this.source.wrap(["function(",r.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var e=this.environment.isSimple,n=!this.forceBuffer,i=void 0,s=void 0,o=void 0,r=void 0;return this.source.each((function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,r=t):(o&&(s?o.prepend("buffer += "):i=!0,r.add(";"),o=r=void 0),s=!0,e||(n=!1))})),n?o?(o.prepend("return "),r.add(";")):s||this.source.push('return "";'):(t+=", buffer = "+(i?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),r.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(i?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(e,"call",n))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var n=this.topStack();e.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n,i){var s=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[s++])),this.resolvePath("context",t,s,e,n)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,n){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,n)},resolvePath:function(t,e,n,i,s){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,n,i){var s=e.popStack(),o=0,r=n.length;for(t&&r--;o<r;o++)s=e.nameLookup(s,n[o],i);return t?[e.aliasable("container.strict"),"(",s,", ",e.quotedString(n[o]),", ",JSON.stringify(e.source.currentLocation)," )"]:s}(this.options.strict&&s,this,e,t));else for(var r=e.length;n<r;n++)this.replaceStack((function(s){var r=o.nameLookup(s,e[n],t);return i?[" && ",r]:[" != null ? ",r," : ",s]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var n=this.nameLookup("decorators",e,"decorator"),i=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(t,e,n){var i=this.popStack(),s=this.setupHelper(t,e),o=[];n&&o.push(s.name),o.push(i),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var r=["(",this.itemsSeparatedBy(o,"||"),")"],a=this.source.functionCall(r,"call",s.callParams);this.push(a)},itemsSeparatedBy:function(t,e){var n=[];n.push(t[0]);for(var i=1;i<t.length;i++)n.push(e,t[i]);return n},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,e),s=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",n,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",s,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(t,e,n){var i=[],s=this.setupParams(e,1,i);t&&(e=this.popStack(),delete s.name),n&&(s.indent=JSON.stringify(n)),s.helpers="helpers",s.partials="partials",s.decorators="container.decorators",t?i.unshift(e):i.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(s.depths="depths"),s=this.objectLiteral(s),i.push(s),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(t){var e=this.popStack(),n=void 0,i=void 0,s=void 0;this.trackIds&&(s=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var o=this.hash;n&&(o.contexts[t]=n),i&&(o.types[t]=i),s&&(o.ids[t]=s),o.values[t]=e},pushId:function(t,e,n){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(t,e){for(var n=t.children,i=void 0,s=void 0,o=0,r=n.length;o<r;o++){i=n[o],s=new this.compiler;var a=this.matchExistingProgram(i);if(null==a){this.context.programs.push("");var l=this.context.programs.length;i.index=l,i.name="program"+l,this.context.programs[l]=s.compile(i,e,this.context,!this.precompile),this.context.decorators[l]=s.decorators,this.context.environments[l]=i,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=a.index,i.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;e<n;e++){var i=this.context.environments[e];if(i&&i.equals(t))return i}},programExpression:function(t){var e=this.environment.children[t],n=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof c||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new c(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],n=void 0,i=void 0,s=void 0;if(!this.isInline())throw new r.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof c)e=["(",n=[o.value]],s=!0;else{i=!0;var a=this.incrStack();e=["((",this.push(a)," = ",o,")"],n=this.topStack()}var l=t.call(this,n);s||this.popStack(),i&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i instanceof c)this.compileStack.push(i);else{var s=this.incrStack();this.pushSource([s," = ",i,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof c)return n.value;if(!e){if(!this.stackSlot)throw new r.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof c?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(e,t,i,n),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(i)}},setupParams:function(t,e,n){var i={},s=[],o=[],r=[],a=!n,l=void 0;a&&(n=[]),i.name=this.quotedString(t),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(i.fn=u||"container.noop",i.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),n[h]=l,this.trackIds&&(r[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),s[h]=this.popStack());return a&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(r)),this.stringParams&&(i.types=this.source.generateArray(o),i.contexts=this.source.generateArray(s)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(t,e,n,i){var s=this.setupParams(t,e,n);return s.loc=JSON.stringify(this.source.currentLocation),s=this.objectLiteral(s),i?(this.useRegister("options"),n.push("options"),["options=",s]):n?(n.push(s),""):s}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=u.RESERVED_WORDS={},n=0,i=t.length;n<i;n++)e[t[n]]=!0}(),u.isValidJavaScriptVariableName=function(t){return!u.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=u,t.exports=e.default},function(t,e,n){"use strict";var i=n(13).default;e.__esModule=!0;var s=n(5),o=void 0;function r(t,e,n){if(s.isArray(t)){for(var i=[],o=0,r=t.length;o<r;o++)i.push(e.wrap(t[o],n));return i}return"boolean"==typeof t||"number"==typeof t?t+"":t}function a(t){this.srcFile=t,this.source=[]}o||((o=function(t,e,n,i){this.src="",i&&this.add(i)}).prototype={add:function(t){s.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){s.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,n=this.source.length;e<n;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new o(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof o?t:(t=r(t,this,e),new o(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,n){return n=this.generateList(n),this.wrap([t,e?"."+e+"(":"(",n,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,n=[];i(t).forEach((function(i){var s=r(t[i],e);"undefined"!==s&&n.push([e.quotedString(i),":",s])}));var s=this.generateList(n);return s.prepend("{"),s.add("}"),s},generateList:function(t){for(var e=this.empty(),n=0,i=t.length;n<i;n++)n&&e.add(","),e.add(r(t[n],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=a,t.exports=e.default}])},t.exports=e()},6400:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(n){return!!t.data(n,e)}})):function(e,n,i){return!!t.data(e,i[3])}})})?i.apply(e,s):i)||(t.exports=o)},2064:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.fn.extend({disableSelection:(e="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(e+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var e})?i.apply(e,s):i)||(t.exports=o)},5042:(t,e,n)=>{var i,s,o;s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.escapeSelector=(e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(e,"\\$1")});var e})?i.apply(e,s):i)||(t.exports=o)},5436:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}return t.ui.focusable=function(n,i){var s,o,r,a,l,c=n.nodeName.toLowerCase();return"area"===c?(o=(s=n.parentNode).name,!(!n.href||!o||"map"!==s.nodeName.toLowerCase())&&(r=t("img[usemap='#"+o+"']")).length>0&&r.is(":visible")):(/^(input|select|textarea|button|object)$/.test(c)?(a=!n.disabled)&&(l=t(n).closest("fieldset")[0])&&(a=!l.disabled):a="a"===c&&n.href||i,a&&t(n).is(":visible")&&e(t(n)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable})?i.apply(e,s):i)||(t.exports=o)},7808:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5588),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var n=e.data("ui-form-reset-instances");t.each(n,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?i.apply(e,s):i)||(t.exports=o)},5588:(t,e,n)=>{var i,s,o;s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)}})?i.apply(e,s):i)||(t.exports=o)},1870:(t,e,n)=>{var i,s,o;s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(e,s):i)||(t.exports=o)},7053:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(e,s):i)||(t.exports=o)},6575:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592),n(5042)],void 0===(o="function"==typeof(i=function(t){return t.fn.labels=function(){var e,n,i,s,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(s=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),n="label[for='"+t.ui.escapeSelector(i)+"']",s=s.add(o.find(n).addBack(n))),this.pushStack(s))}})?i.apply(e,s):i)||(t.exports=o)},1624:(t,e,n)=>{var i,s,o;s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.plugin={add:function(e,n,i){var s,o=t.ui[e].prototype;for(s in i)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([n,i[s]])},call:function(t,e,n,i){var s,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,n)}}})?i.apply(e,s):i)||(t.exports=o)},1822:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return function(){var e,n=Math.max,i=Math.abs,s=/left|center|right/,o=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function u(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function h(e,n){return parseInt(t.css(e,n),10)||0}function d(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var n,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),n=o.offsetWidth,s.css("overflow","scroll"),n===(i=o.offsetWidth)&&(i=s[0].clientWidth),s.remove(),e=n-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),s=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:s,offset:i||s?{left:0,top:0}:t(e).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var l,p,f,m,g,_,v=t(e.of),y=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),w={};return _=d(v),v[0].preventDefault&&(e.at="left top"),p=_.width,f=_.height,m=_.offset,g=t.extend({},m),t.each(["my","at"],(function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=s.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=s.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",t=r.exec(i[0]),n=r.exec(i[1]),w[this]=[t?t[0]:0,n?n[0]:0],e[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?g.left+=p:"center"===e.at[0]&&(g.left+=p/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),l=u(w.at,p,f),g.left+=l[0],g.top+=l[1],this.each((function(){var s,o,r=t(this),a=r.outerWidth(),c=r.outerHeight(),d=h(this,"marginLeft"),_=h(this,"marginTop"),k=a+d+h(this,"marginRight")+b.width,S=c+_+h(this,"marginBottom")+b.height,C=t.extend({},g),E=u(w.my,r.outerWidth(),r.outerHeight());"right"===e.my[0]?C.left-=a:"center"===e.my[0]&&(C.left-=a/2),"bottom"===e.my[1]?C.top-=c:"center"===e.my[1]&&(C.top-=c/2),C.left+=E[0],C.top+=E[1],s={marginLeft:d,marginTop:_},t.each(["left","top"],(function(n,i){t.ui.position[x[n]]&&t.ui.position[x[n]][i](C,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:s,collisionWidth:k,collisionHeight:S,offset:[l[0]+E[0],l[1]+E[1]],my:e.my,at:e.at,within:y,elem:r})})),e.using&&(o=function(t){var s=m.left-C.left,o=s+p-a,l=m.top-C.top,u=l+f-c,h={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:r,left:C.left,top:C.top,width:a,height:c},horizontal:o<0?"left":s>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};p<a&&i(s+o)<p&&(h.horizontal="center"),f<c&&i(l+u)<f&&(h.vertical="middle"),n(i(s),i(o))>n(i(l),i(u))?h.important="horizontal":h.important="vertical",e.using.call(this,t,h)}),r.offset(t.extend(C,{using:o}))}))},t.ui.position={fit:{left:function(t,e){var i,s=e.within,o=s.isWindow?s.scrollLeft:s.offset.left,r=s.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,c=a+e.collisionWidth-r-o;e.collisionWidth>r?l>0&&c<=0?(i=t.left+l+e.collisionWidth-r-o,t.left+=l-i):t.left=c>0&&l<=0?o:l>c?o+r-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=n(t.left-a,t.left)},top:function(t,e){var i,s=e.within,o=s.isWindow?s.scrollTop:s.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,c=a+e.collisionHeight-r-o;e.collisionHeight>r?l>0&&c<=0?(i=t.top+l+e.collisionHeight-r-o,t.top+=l-i):t.top=c>0&&l<=0?o:l>c?o+r-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=n(t.top-a,t.top)}},flip:{left:function(t,e){var n,s,o=e.within,r=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+d+p+f+e.collisionWidth-a-r)<0||n<i(u))&&(t.left+=d+p+f):h>0&&((s=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||i(s)<h)&&(t.left+=d+p+f)},top:function(t,e){var n,s,o=e.within,r=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((s=t.top+d+p+f+e.collisionHeight-a-r)<0||s<i(u))&&(t.top+=d+p+f):h>0&&((n=t.top-e.collisionPosition.marginTop+d+p+f-l)>0||i(n)<h)&&(t.top+=d+p+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position})?i.apply(e,s):i)||(t.exports=o)},1440:(t,e,n)=>{var i,s,o;s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?i.apply(e,s):i)||(t.exports=o)},192:(t,e,n)=>{var i,s,o;s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?i.apply(e,s):i)||(t.exports=o)},464:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var e=t(this);return(!i||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)}})?i.apply(e,s):i)||(t.exports=o)},3614:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592),n(5436)],void 0===(o="function"==typeof(i=function(t){return t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}})})?i.apply(e,s):i)||(t.exports=o)},9138:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){return t.fn.extend({uniqueId:(e=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}});var e})?i.apply(e,s):i)||(t.exports=o)},5592:(t,e,n)=>{var i,s,o;s=[n(9755)],void 0===(o="function"==typeof(i=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?i.apply(e,s):i)||(t.exports=o)},6891:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(t){var e,n=0,i=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(n){var i,s,o;for(o=0;null!=(s=n[o]);o++)try{(i=t._data(s,"events"))&&i.remove&&t(s).triggerHandler("remove")}catch(t){}e(n)}),t.widget=function(e,n,i){var s,o,r,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},s=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,s,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),(r=new n).options=t.widget.extend({},r.options),t.each(i,(function(e,i){t.isFunction(i)?a[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function s(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}():a[e]=i})),o.prototype=t.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||e},a,{constructor:o,namespace:l,widgetName:e,widgetFullName:c}),s?(t.each(s._childConstructors,(function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete s._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,s,o=i.call(arguments,1),r=0,a=o.length;r<a;r++)for(n in o[r])s=o[r][n],o[r].hasOwnProperty(n)&&void 0!==s&&(t.isPlainObject(s)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):e[n]=s);return e},t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,a=i.call(arguments,1),l=this;return r?this.length||"instance"!==o?this.each((function(){var n,i=t.data(this,s);return"instance"===o?(l=i,!1):i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,a))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each((function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new n(o,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,n){e._removeClass(n,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,s,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},i=e.split("."),e=i.shift(),i.length){for(s=r[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];if(e=i.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,s;for(n in e)s=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&s&&s.length&&(i=t(s.get()),this._removeClass(s,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var n=[],i=this;function s(s,o){var r,a;for(a=0;a<s.length;a++)r=i.classesElementLookup[s[a]]||t(),r=e.add?t(t.unique(r.get().concat(e.element.get()))):t(r.not(e.element).get()),i.classesElementLookup[s[a]]=r,n.push(s[a]),o&&e.classes[s[a]]&&n.push(e.classes[s[a]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&s(e.keys.match(/\S+/g)||[],!0),e.extra&&s(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,(function(i,s){-1!==t.inArray(e.target,s)&&(n.classesElementLookup[i]=t(s.not(e.target).get()))}))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var s="string"==typeof t||null===t,o={extra:s?e:n,keys:s?t:e,element:s?this.element:t,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(e,n,i){var s,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=s=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),t.each(i,(function(i,r){function a(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?o[r]:r).apply(o,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?s.on(c,u,a):n.on(c,a)}))},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var s,o,r=this.options[e];if(i=i||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(s in o)s in n||(n[s]=o[s]);return this.element.trigger(n,i),!(t.isFunction(r)&&!1===r.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,n){t.Widget.prototype["_"+e]=function(i,s,o){var r;"string"==typeof s&&(s={effect:s});var a=s?!0===s||"number"==typeof s?n:s.effect||n:e;"number"==typeof(s=s||{})&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&i.delay(s.delay),r&&t.effects&&t.effects.effect[a]?i[e](s):a!==e&&i[a]?i[a](s.duration,s.easing,o):i.queue((function(n){t(this)[e](),o&&o.call(i[0]),n()}))}})),t.widget})?i.apply(e,s):i)||(t.exports=o)},2993:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(8851),n(7053),n(1822),n(1440),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,i,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o||!r&&this._isContentEditable(this.element),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:n=!0,this._searchTimeout(s)}},keypress:function(i){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var s=t.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i)}}},input:function(t){if(i)return i=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(e,n){var i,s;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));s=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),(i=n.item.attr("aria-label")||s.value)&&t.trim(i).length&&(this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(e,n){var i=n.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay((function(){this.previous=s,this.selectedItem=i}))),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var n=this.menu.element[0];return e.target===this.element[0]||e.target===n||t.contains(n,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,s){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),i=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||n||i)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy((function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,(function(t,n){i._renderItemData(e,n)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<div>").text(n.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,(function(t){return i.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))}}),t.ui.autocomplete})?i.apply(e,s):i)||(t.exports=o)},9366:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(341),n(1193),n(7053),n(6891)],void 0===(o="function"==typeof(i=function(t){var e;return t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,n){var i="iconPosition"!==e,s=i?this.options.iconPosition:n,o="top"===s||"bottom"===s;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(s),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(s))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(e=t.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button})?i.apply(e,s):i)||(t.exports=o)},1193:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(5042),n(7808),n(6575),n(6891)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,n,i=this,s=this._super()||{};return this._readType(),n=this.element.labels(),this.label=t(n[n.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(s.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(s.disabled=e),s},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,n="input[name='"+t.ui.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(n):t(n).filter((function(){return 0===t(this).form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio})?i.apply(e,s):i)||(t.exports=o)},341:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(6891)],void 0===(o="function"==typeof(i=function(t){var e=/ui-corner-([a-z]){2,6}/g;return t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,n=[];t.each(this.options.items,(function(i,s){var o,r={};if(s)return"controlgroupLabel"===i?((o=e.element.find(s)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(o.get()))):void(t.fn[i]&&(r=e["_"+i+"Options"]?e["_"+i+"Options"]("middle"):{classes:{}},e.element.find(s).each((function(){var s=t(this),o=s[i]("instance"),a=t.widget.extend({},r);if("button"!==i||!s.parent(".ui-spinner").length){o||(o=s[i]()[i]("instance")),o&&(a.classes=e._resolveClassesValues(a.classes,o)),s[i](a);var l=s[i]("widget");t.data(l[0],"ui-controlgroup-data",o||s[i]("instance")),n.push(l[0])}}))))})),this.childWidgets=t(t.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var n=t(this).data("ui-controlgroup-data");n&&n[e]&&n[e]()}))},_updateCornerClass:function(t,e){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,n),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(n,i){var s={};return t.each(n,(function(o){var r=i.options.classes[o]||"";r=t.trim(r.replace(e,"")),s[o]=(r+" "+n[o]).replace(/\s+/g," ")})),s},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,i){var s=e[i]().data("ui-controlgroup-data");if(s&&n["_"+s.widgetName+"Options"]){var o=n["_"+s.widgetName+"Options"](1===e.length?"only":i);o.classes=n._resolveClassesValues(o.classes,s),s.element[s.widgetName](o)}else n._updateCornerClass(e[i](),i)})),this._callChildMethod("refresh"))}})})?i.apply(e,s):i)||(t.exports=o)},2466:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(9366),n(7285),n(6177),n(1707),n(5436),n(7053),n(1822),n(1440),n(192),n(3614),n(9138),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,n){var i=!1,s=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get(),o=Math.max.apply(null,s);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!n&&this._trigger("focus",e),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function n(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),s=n.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){s.trigger("focus")})),e.preventDefault()):(this._delay((function(){i.trigger("focus")})),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(n,(function(n,i){var s,o;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),s=i.click,o={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,t("<button></button>",i).button(o).appendTo(e.uiButtonSet).on("click",(function(){s.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,n=this.options;function i(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",n,i(s))},drag:function(t,n){e._trigger("drag",t,i(n))},stop:function(s,o){var r=o.offset.left-e.document.scrollLeft(),a=o.offset.top-e.document.scrollTop();n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(a>=0?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",s,i(o))}})},_makeResizable:function(){var e=this,n=this.options,i=n.resizable,s=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function r(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,i){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",n,r(i))},resize:function(t,n){e._trigger("resize",t,r(n))},stop:function(i,s){var o=e.uiDialog.offset(),a=o.left-e.document.scrollLeft(),l=o.top-e.document.scrollTop();n.height=e.uiDialog.height(),n.width=e.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",i,r(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),n=t.inArray(this,e);-1!==n&&e.splice(n,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var n=this,i=!1,s={};t.each(e,(function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(s[t]=e)})),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,n){var i,s,o=this.uiDialog;"disabled"!==e&&(this._super(e,n),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((i=o.is(":data(ui-draggable)"))&&!n&&o.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((s=o.is(":data(ui-resizable)"))&&!n&&o.resizable("destroy"),s&&"string"==typeof n&&o.resizable("option","handles",n),s||!1===n||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay((function(){e=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog})?i.apply(e,s):i)||(t.exports=o)},7285:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(6177),n(6400),n(1624),n(1440),n(192),n(464),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",e)&&n._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),s=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,s=this.options,o=this.document[0];this.relativeContainer=null,s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),(i=(n=t(s.containment))[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=s.containment:this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,s,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=n?s-this.offset.click.top>=n[1]||s-this.offset.click.top>n[3]?s:s-this.offset.click.top>=n[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-r.grid[0]:o+r.grid[0]:o),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var s=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each((function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,s))}))},stop:function(e,n,i){var s=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,(function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))}))},drag:function(e,n,i){t.each(i.sortables,(function(){var s=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(s=!0,t.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(s=!1),s}))),s?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",e),i.dropped=o.element,t.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var s=t("body"),o=i.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(e,n,i){var s=i.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var s=t(n.helper),o=i.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(e,n,i){var s=i.options;s._opacity&&t(n.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var s=i.options,o=!1,r=i.scrollParentNotHidden[0],a=i.document[0];r!==a&&"HTML"!==r.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<s.scrollSensitivity?r.scrollTop=o=r.scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<s.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var s=i.options;i.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each((function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})}))},drag:function(e,n,i){var s,o,r,a,l,c,u,h,d,p,f=i.options,m=f.snapTolerance,g=n.offset.left,_=g+i.helperProportions.width,v=n.offset.top,y=v+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)c=(l=i.snapElements[d].left-i.margins.left)+i.snapElements[d].width,h=(u=i.snapElements[d].top-i.margins.top)+i.snapElements[d].height,_<l-m||g>c+m||y<u-m||v>h+m||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(u-y)<=m,o=Math.abs(h-v)<=m,r=Math.abs(l-_)<=m,a=Math.abs(c-g)<=m,s&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),p=s||o||r||a,"outer"!==f.snapMode&&(s=Math.abs(u-v)<=m,o=Math.abs(h-y)<=m,r=Math.abs(l-g)<=m,a=Math.abs(c-_)<=m,s&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(s||o||r||a||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=s||o||r||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var s,o=i.options,r=t.makeArray(t(o.stack)).sort((function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)}));r.length&&(s=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each((function(e){t(this).css("zIndex",s+e)})),this.css("zIndex",s+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var s=t(n.helper),o=i.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(e,n,i){var s=i.options;s._zIndex&&t(n.helper).css("zIndex",s._zIndex)}}),t.ui.draggable})?i.apply(e,s):i)||(t.exports=o)},8851:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(7053),n(1822),n(1440),n(9138),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target),i=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var n=t(e.target).closest(".ui-menu-item"),i=t(e.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay((function(){!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var n,i,s,o,r=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:r=!1,i=this.previousFilter||"",o=!1,s=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),s===i?o=!0:s=i+s,n=this._filterMenuItems(s),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(s=String.fromCharCode(e.keyCode),n=this._filterMenuItems(s)),n.length?(this.focus(e,n),this.previousFilter=s,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}r&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n,i,s,o=this,r=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),n=e.prev(),i=t("<span>").data("ui-menu-submenu-caret",!0);o._addClass(i,"ui-menu-icon","ui-icon "+r),n.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",n.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);o._isDivider(e)&&o._addClass(e,"ui-menu-divider","ui-widget-content")})),s=(i=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(s,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),s=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,s,o,r,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=e.outerHeight(),s<0?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i}),this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(e){var n,i,s;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=t(this)).offset().top-i-s<0})),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var n,i,s;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=t(this)).offset().top-i+s>0})),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))}))}})})?i.apply(e,s):i)||(t.exports=o)},6177:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(1870),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,s=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(e,s):i)||(t.exports=o)},1707:(t,e,n)=>{var i,s,o;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[n(9755),n(6177),n(2064),n(1624),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=!1;return e[i]>0||(e[i]=1,s=e[i]>0,e[i]=0,s)},_create:function(){var e,n=this.options,i=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),n.autoHide&&t(this.element).on("mouseenter",(function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())})).on("mouseleave",(function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,n,i,s,o,r=this.options,a=this;if(this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)s="ui-resizable-"+(e=t.trim(i[n])),o=t("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:r.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var n,i,s,o;for(n in e=e||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=t(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=t(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")})),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var n,i,s=!1;for(n in this.handles)((i=t(this.handles[n])[0])===e.target||t.contains(i,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var n,i,s,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(n+=t(o.containment).scrollLeft()||0,i+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var n,i,s=this.originalMousePosition,o=this.axis,r=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var n,i,s,o,r,a,l,c=this.options,u=this;return this._helper&&(s=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,o=i?0:u.sizeDiff.width,r={width:u.helper.width()-o,height:u.helper.height()-s},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(r,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,s,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&c&&(t.left=a-e.minWidth),i&&c&&(t.left=a-e.maxWidth),r&&u&&(t.top=l-e.minHeight),s&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(s[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),i=n.options,s=n._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&n._hasScroll(s[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-r},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};s&&s.length&&t(s[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,i,s,o,r,a,l=t(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,d=h instanceof t?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(l.containerElement=t(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),n=[],t(["Top","Right","Left","Bottom"]).each((function(t,i){n[t]=l._num(e.css("padding"+i))})),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},i=l.containerOffset,s=l.containerSize.height,o=l.containerSize.width,r=l._hasScroll(d,"left")?d.scrollWidth:o,a=l._hasScroll(d)?d.scrollHeight:s,l.parentData={element:d,left:i.left,top:i.top,width:r,height:a}))},resize:function(e){var n,i,s,o,r=t(this).resizable("instance"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||e.shiftKey,h={top:0,left:0},d=r.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-h.left),u&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?l.top:0),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),n=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-h.left:r.offset.left-l.left)),i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-h.top:r.offset.top-l.top)),n+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-n,u&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,u&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),n=e.options,i=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=t(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,c=r.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-s.left-i.left,width:l,height:c}),e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-s.left-i.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,n){var i=t(this).resizable("instance"),s=i.options,o=i.originalSize,r=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-r.top||0,left:i.position.left-r.left||0};t(s.alsoResize).each((function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),s={},o=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,(function(t,e){var n=(i[e]||0)+(a[e]||0);n&&n>=0&&(s[e]=n||null)})),e.css(s)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),i=n.options,s=n.size,o=n.originalSize,r=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,h=Math.round((s.width-o.width)/c)*c,d=Math.round((s.height-o.height)/u)*u,p=o.width+h,f=o.height+d,m=i.maxWidth&&i.maxWidth<p,g=i.maxHeight&&i.maxHeight<f,_=i.minWidth&&i.minWidth>p,v=i.minHeight&&i.minHeight>f;i.grid=l,_&&(p+=c),v&&(f+=u),m&&(p-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.top=r.top-d):/^(sw)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.left=r.left-h):((f-u<=0||p-c<=0)&&(e=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=r.top-d):(f=u-e.height,n.size.height=f,n.position.top=r.top+o.height-f),p-c>0?(n.size.width=p,n.position.left=r.left-h):(p=c-e.width,n.size.width=p,n.position.left=r.left+o.width-p))}}),t.ui.resizable})?i.apply(e,s):i)||(t.exports=o)},9755:function(t,e){var n,i,s;
/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */i="undefined"!=typeof window?window:this,s=function(i,s){var o=[],r=i.document,a=o.slice,l=o.concat,c=o.push,u=o.indexOf,h={},d=h.toString,p=h.hasOwnProperty,f={},m="2.2.4",g=function(t,e){return new g.fn.init(t,e)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,y=/-([\da-z])/gi,b=function(t,e){return e.toUpperCase()};function x(t){var e=!!t&&"length"in t&&t.length,n=g.type(t);return"function"!==n&&!g.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}g.fn=g.prototype={jquery:m,constructor:g,selector:"",length:0,toArray:function(){return a.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:a.call(this)},pushStack:function(t){var e=g.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return g.each(this,t)},map:function(t){return this.pushStack(g.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},g.extend=g.fn.extend=function(){var t,e,n,i,s,o,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||g.isFunction(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=r[e],r!==(i=t[e])&&(c&&i&&(g.isPlainObject(i)||(s=g.isArray(i)))?(s?(s=!1,o=n&&g.isArray(n)?n:[]):o=n&&g.isPlainObject(n)?n:{},r[e]=g.extend(c,o,i)):void 0!==i&&(r[e]=i));return r},g.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===g.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!g.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==g.type(t)||t.nodeType||g.isWindow(t))return!1;if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||p.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=g.trim(t))&&(1===t.indexOf("use strict")?((e=r.createElement("script")).text=t,r.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(v,"ms-").replace(y,b)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(x(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(_,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(x(Object(t))?g.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},grep:function(t,e,n){for(var i=[],s=0,o=t.length,r=!n;s<o;s++)!e(t[s],s)!==r&&i.push(t[s]);return i},map:function(t,e,n){var i,s,o=0,r=[];if(x(t))for(i=t.length;o<i;o++)null!=(s=e(t[o],o,n))&&r.push(s);else for(o in t)null!=(s=e(t[o],o,n))&&r.push(s);return l.apply([],r)},guid:1,proxy:function(t,e){var n,i,s;if("string"==typeof e&&(n=t[e],e=t,t=n),g.isFunction(t))return i=a.call(arguments,2),(s=function(){return t.apply(e||this,i.concat(a.call(arguments)))}).guid=t.guid=t.guid||g.guid++,s},now:Date.now,support:f}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=o[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var w=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){var e,n,i,s,o,r,a,l,c,u,h,d,p,f,m,g,_,v,y,b="sizzle"+1*new Date,x=t.document,w=0,k=0,S=ot(),C=ot(),E=ot(),P=function(t,e){return t===e&&(h=!0),0},D=1<<31,T={}.hasOwnProperty,$=[],O=$.pop,A=$.push,N=$.push,j=$.slice,M=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B="\\[[\\x20\\t\\r\\n\\f]*("+R+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+L+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),U=new RegExp(F),G=new RegExp("^"+R+"$"),K={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=function(){d()};try{N.apply($=j.call(x.childNodes),x.childNodes),$[x.childNodes.length].nodeType}catch(t){N={apply:$.length?function(t,e){A.apply(t,j.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function st(t,e,i,s){var o,a,c,u,h,f,_,v,w=e&&e.ownerDocument,k=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==k&&9!==k&&11!==k)return i;if(!s&&((e?e.ownerDocument||e:x)!==p&&d(e),e=e||p,m)){if(11!==k&&(f=Q.exec(t)))if(o=f[1]){if(9===k){if(!(c=e.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(w&&(c=w.getElementById(o))&&y(e,c)&&c.id===o)return i.push(c),i}else{if(f[2])return N.apply(i,e.getElementsByTagName(t)),i;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return N.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!E[t+" "]&&(!g||!g.test(t))){if(1!==k)w=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(tt,"\\$&"):e.setAttribute("id",u=b),a=(_=r(t)).length,h=G.test(u)?"#"+u:"[id='"+u+"']";a--;)_[a]=h+" "+mt(_[a]);v=_.join(","),w=Z.test(t)&&pt(e.parentNode)||e}if(v)try{return N.apply(i,w.querySelectorAll(v)),i}catch(t){}finally{u===b&&e.removeAttribute("id")}}}return l(t.replace(z,"$1"),e,i,s)}function ot(){var t=[];return function e(n,s){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=s}}function rt(t){return t[b]=!0,t}function at(t){var e=p.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),s=n.length;s--;)i.attrHandle[n[s]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||D)-(~t.sourceIndex||D);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function dt(t){return rt((function(e){return e=+e,rt((function(n,i){for(var s,o=t([],n.length,e),r=o.length;r--;)n[s=o[r]]&&(n[s]=!(i[s]=n[s]))}))}))}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=st.setDocument=function(t){var e,s,r=t?t.ownerDocument||t:x;return r!==p&&9===r.nodeType&&r.documentElement?(f=(p=r).documentElement,m=!o(p),(s=p.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",it,!1):s.attachEvent&&s.attachEvent("onunload",it)),n.attributes=at((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=at((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Y.test(p.getElementsByClassName),n.getById=at((function(t){return f.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}},i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}}):(delete i.find.ID,i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[s++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},_=[],g=[],(n.qsa=Y.test(p.querySelectorAll))&&(at((function(t){f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+I+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")})),at((function(t){var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),t.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Y.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at((function(t){n.disconnectedMatch=v.call(t,"div"),v.call(t,"[s!='']:x"),_.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),_=_.length&&new RegExp(_.join("|")),e=Y.test(f.compareDocumentPosition),y=e||Y.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===p||t.ownerDocument===x&&y(x,t)?-1:e===p||e.ownerDocument===x&&y(x,e)?1:u?M(u,t)-M(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,s=t.parentNode,o=e.parentNode,r=[t],a=[e];if(!s||!o)return t===p?-1:e===p?1:s?-1:o?1:u?M(u,t)-M(u,e):0;if(s===o)return ct(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;r[i]===a[i];)i++;return i?ct(r[i],a[i]):r[i]===x?-1:a[i]===x?1:0},p):p},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&d(t),e=e.replace(V,"='$1']"),n.matchesSelector&&m&&!E[e+" "]&&(!_||!_.test(e))&&(!g||!g.test(e)))try{var i=v.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return st(e,p,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!==p&&d(t),y(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==p&&d(t);var s=i.attrHandle[e.toLowerCase()],o=s&&T.call(i.attrHandle,e.toLowerCase())?s(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],s=0,o=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[o++];)e===t[o]&&(s=i.push(o));for(;s--;)t.splice(i[s],1)}return u=null,t},s=st.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=s(e);return n},(i=st.selectors={cacheLength:50,createPseudo:rt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&U.test(n)&&(e=r(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+L+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var s=st.attr(i,t);return null==s?"!="===e:!e||(s+="","="===e?s===n:"!="===e?s!==n:"^="===e?n&&0===s.indexOf(n):"*="===e?n&&s.indexOf(n)>-1:"$="===e?n&&s.slice(-n.length)===n:"~="===e?(" "+s.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===s?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,p,f,m=o!==r?"nextSibling":"previousSibling",g=e.parentNode,_=a&&e.nodeName.toLowerCase(),v=!l&&!a,y=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&v){for(y=(p=(c=(u=(h=(d=g)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(y=p=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[w,p,y];break}}else if(v&&(y=p=(c=(u=(h=(d=e)[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===y)for(;(d=++p&&d&&d[m]||(y=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++y||(v&&((u=(h=d[b]||(d[b]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[w,y]),d!==e)););return(y-=s)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,e){var n,s=i.pseudos[t]||i.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return s[b]?s(e):s.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?rt((function(t,n){for(var i,o=s(t,e),r=o.length;r--;)t[i=M(t,o[r])]=!(n[i]=o[r])})):function(t){return s(t,0,n)}):s}},pseudos:{not:rt((function(t){var e=[],n=[],i=a(t.replace(z,"$1"));return i[b]?rt((function(t,e,n,s){for(var o,r=i(t,null,s,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))})):function(t,s,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}})),has:rt((function(t){return function(e){return st(t,e).length>0}})),contains:rt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||e.innerText||s(e)).indexOf(t)>-1}})),lang:rt((function(t){return G.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt((function(){return[0]})),last:dt((function(t,e){return[e-1]})),eq:dt((function(t,e,n){return[n<0?n+e:n]})),even:dt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:dt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:dt((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:dt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ut(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ht(e);function ft(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function gt(t,e,n){var i=e.dir,s=n&&"parentNode"===i,o=k++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,o)}:function(e,n,r){var a,l,c,u=[w,o];if(r){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,r))return!0}else for(;e=e[i];)if(1===e.nodeType||s){if((a=(l=(c=e[b]||(e[b]={}))[e.uniqueID]||(c[e.uniqueID]={}))[i])&&a[0]===w&&a[1]===o)return u[2]=a[2];if(l[i]=u,u[2]=t(e,n,r))return!0}}}function _t(t){return t.length>1?function(e,n,i){for(var s=t.length;s--;)if(!t[s](e,n,i))return!1;return!0}:t[0]}function vt(t,e,n,i,s){for(var o,r=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,i,s)||(r.push(o),c&&e.push(a)));return r}function yt(t,e,n,i,s,o){return i&&!i[b]&&(i=yt(i)),s&&!s[b]&&(s=yt(s,o)),rt((function(o,r,a,l){var c,u,h,d=[],p=[],f=r.length,m=o||function(t,e,n){for(var i=0,s=e.length;i<s;i++)st(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),g=!t||!o&&e?m:vt(m,d,t,a,l),_=n?s||(o?t:f||i)?[]:r:g;if(n&&n(g,_,a,l),i)for(c=vt(_,p),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(_[p[u]]=!(g[p[u]]=h));if(o){if(s||t){if(s){for(c=[],u=_.length;u--;)(h=_[u])&&c.push(g[u]=h);s(null,_=[],c,l)}for(u=_.length;u--;)(h=_[u])&&(c=s?M(o,h):d[u])>-1&&(o[c]=!(r[c]=h))}}else _=vt(_===r?_.splice(f,_.length):_),s?s(null,r,_,l):N.apply(r,_)}))}function bt(t){for(var e,n,s,o=t.length,r=i.relative[t[0].type],a=r||i.relative[" "],l=r?1:0,u=gt((function(t){return t===e}),a,!0),h=gt((function(t){return M(e,t)>-1}),a,!0),d=[function(t,n,i){var s=!r&&(i||n!==c)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,s}];l<o;l++)if(n=i.relative[t[l].type])d=[gt(_t(d),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[b]){for(s=++l;s<o&&!i.relative[t[s].type];s++);return yt(l>1&&_t(d),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(z,"$1"),n,l<s&&bt(t.slice(l,s)),s<o&&bt(t=t.slice(s)),s<o&&mt(t))}d.push(n)}return _t(d)}return ft.prototype=i.filters=i.pseudos,i.setFilters=new ft,r=st.tokenize=function(t,e){var n,s,o,r,a,l,c,u=C[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=i.preFilter;a;){for(r in n&&!(s=W.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=q.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(z," ")}),a=a.slice(n.length)),i.filter)!(s=K[r].exec(a))||c[r]&&!(s=c[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return e?a.length:a?st.error(t):C(t,l).slice(0)},a=st.compile=function(t,e){var n,s=[],o=[],a=E[t+" "];if(!a){for(e||(e=r(t)),n=e.length;n--;)(a=bt(e[n]))[b]?s.push(a):o.push(a);(a=E(t,function(t,e){var n=e.length>0,s=t.length>0,o=function(o,r,a,l,u){var h,f,g,_=0,v="0",y=o&&[],b=[],x=c,k=o||s&&i.find.TAG("*",u),S=w+=null==x?1:Math.random()||.1,C=k.length;for(u&&(c=r===p||r||u);v!==C&&null!=(h=k[v]);v++){if(s&&h){for(f=0,r||h.ownerDocument===p||(d(h),a=!m);g=t[f++];)if(g(h,r||p,a)){l.push(h);break}u&&(w=S)}n&&((h=!g&&h)&&_--,o&&y.push(h))}if(_+=v,n&&v!==_){for(f=0;g=e[f++];)g(y,b,r,a);if(o){if(_>0)for(;v--;)y[v]||b[v]||(b[v]=O.call(l));b=vt(b)}N.apply(l,b),u&&!o&&b.length>0&&_+e.length>1&&st.uniqueSort(l)}return u&&(w=S,c=x),y};return n?rt(o):o}(o,s))).selector=t}return a},l=st.select=function(t,e,s,o){var l,c,u,h,d,p="function"==typeof t&&t,f=!o&&r(t=p.selector||t);if(s=s||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===e.nodeType&&m&&i.relative[c[1].type]){if(!(e=(i.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return s;p&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=K.needsContext.test(t)?0:c.length;l--&&(u=c[l],!i.relative[h=u.type]);)if((d=i.find[h])&&(o=d(u.matches[0].replace(et,nt),Z.test(c[0].type)&&pt(e.parentNode)||e))){if(c.splice(l,1),!(t=o.length&&mt(c)))return N.apply(s,o),s;break}}return(p||a(t,f))(o,e,!m,s,!e||Z.test(t)&&pt(e.parentNode)||e),s},n.sortStable=b.split("").sort(P).join("")===b,n.detectDuplicates=!!h,d(),n.sortDetached=at((function(t){return 1&t.compareDocumentPosition(p.createElement("div"))})),at((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||lt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&at((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||lt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),at((function(t){return null==t.getAttribute("disabled")}))||lt(I,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),st}(i);g.find=w,g.expr=w.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=w.uniqueSort,g.text=w.getText,g.isXMLDoc=w.isXML,g.contains=w.contains;var k=function(t,e,n){for(var i=[],s=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&g(t).is(n))break;i.push(t)}return i},S=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},C=g.expr.match.needsContext,E=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,P=/^.[^:#\[\.,]*$/;function D(t,e,n){if(g.isFunction(e))return g.grep(t,(function(t,i){return!!e.call(t,i,t)!==n}));if(e.nodeType)return g.grep(t,(function(t){return t===e!==n}));if("string"==typeof e){if(P.test(e))return g.filter(e,t,n);e=g.filter(e,t)}return g.grep(t,(function(t){return u.call(e,t)>-1!==n}))}g.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?g.find.matchesSelector(i,t)?[i]:[]:g.find.matches(t,g.grep(e,(function(t){return 1===t.nodeType})))},g.fn.extend({find:function(t){var e,n=this.length,i=[],s=this;if("string"!=typeof t)return this.pushStack(g(t).filter((function(){for(e=0;e<n;e++)if(g.contains(s[e],this))return!0})));for(e=0;e<n;e++)g.find(t,s[e],i);return(i=this.pushStack(n>1?g.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&C.test(t)?g(t):t||[],!1).length}});var T,$=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(g.fn.init=function(t,e,n){var i,s;if(!t)return this;if(n=n||T,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:$.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof g?e[0]:e,g.merge(this,g.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:r,!0)),E.test(i[1])&&g.isPlainObject(e))for(i in e)g.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(s=r.getElementById(i[2]))&&s.parentNode&&(this.length=1,this[0]=s),this.context=r,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):g.isFunction(t)?void 0!==n.ready?n.ready(t):t(g):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),g.makeArray(t,this))}).prototype=g.fn,T=g(r);var O=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}g.fn.extend({has:function(t){var e=g(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(g.contains(this,e[t]))return!0}))},closest:function(t,e){for(var n,i=0,s=this.length,o=[],r=C.test(t)||"string"!=typeof t?g(t,e||this.context):0;i<s;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&g.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?g.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(g(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),g.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return t.contentDocument||g.merge([],t.childNodes)}},(function(t,e){g.fn[t]=function(n,i){var s=g.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=g.filter(i,s)),this.length>1&&(A[t]||g.uniqueSort(s),O.test(t)&&s.reverse()),this.pushStack(s)}}));var j,M=/\S+/g;function I(){r.removeEventListener("DOMContentLoaded",I),i.removeEventListener("load",I),g.ready()}g.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return g.each(t.match(M)||[],(function(t,n){e[n]=!0})),e}(t):g.extend({},t);var e,n,i,s,o=[],r=[],a=-1,l=function(){for(s=t.once,i=e=!0;r.length;a=-1)for(n=r.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,s&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(a=o.length-1,r.push(n)),function e(n){g.each(n,(function(n,i){g.isFunction(i)?t.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==g.type(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return g.each(arguments,(function(t,e){for(var n;(n=g.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?g.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return s=r=[],o=n="",this},disabled:function(){return!o},lock:function(){return s=r=[],n||(o=n=""),this},locked:function(){return!!s},fireWith:function(t,n){return s||(n=[t,(n=n||[]).slice?n.slice():n],r.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},g.extend({Deferred:function(t){var e=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return g.Deferred((function(n){g.each(e,(function(e,o){var r=g.isFunction(t[e])&&t[e];s[o[1]]((function(){var t=r&&r.apply(this,arguments);t&&g.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,r?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?g.extend(t,i):i}},s={};return i.pipe=i.then,g.each(e,(function(t,o){var r=o[2],a=o[3];i[o[1]]=r.add,a&&r.add((function(){n=a}),e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?i:this,arguments),this},s[o[0]+"With"]=r.fireWith})),i.promise(s),t&&t.call(s,s),s},when:function(t){var e,n,i,s=0,o=a.call(arguments),r=o.length,l=1!==r||t&&g.isFunction(t.promise)?r:0,c=1===l?t:g.Deferred(),u=function(t,n,i){return function(s){n[t]=this,i[t]=arguments.length>1?a.call(arguments):s,i===e?c.notifyWith(n,i):--l||c.resolveWith(n,i)}};if(r>1)for(e=new Array(r),n=new Array(r),i=new Array(r);s<r;s++)o[s]&&g.isFunction(o[s].promise)?o[s].promise().progress(u(s,n,e)).done(u(s,i,o)).fail(c.reject):--l;return l||c.resolveWith(i,o),c.promise()}}),g.fn.ready=function(t){return g.ready.promise().done(t),this},g.extend({isReady:!1,readyWait:1,holdReady:function(t){t?g.readyWait++:g.ready(!0)},ready:function(t){(!0===t?--g.readyWait:g.isReady)||(g.isReady=!0,!0!==t&&--g.readyWait>0||(j.resolveWith(r,[g]),g.fn.triggerHandler&&(g(r).triggerHandler("ready"),g(r).off("ready"))))}}),g.ready.promise=function(t){return j||(j=g.Deferred(),"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?i.setTimeout(g.ready):(r.addEventListener("DOMContentLoaded",I),i.addEventListener("load",I))),j.promise(t)},g.ready.promise();var L=function(t,e,n,i,s,o,r){var a=0,l=t.length,c=null==n;if("object"===g.type(n))for(a in s=!0,n)L(t,e,a,n[a],!0,o,r);else if(void 0!==i&&(s=!0,g.isFunction(i)||(r=!0),c&&(r?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(g(t),n)})),e))for(;a<l;a++)e(t[a],n,r?i:i.call(t[a],a,e(t[a],n)));return s?t:c?e.call(t):l?e(t[0],n):o},R=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function B(){this.expando=g.expando+B.uid++}B.uid=1,B.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!R(t))return{};var e=t[this.expando];return e||(e={},R(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,s=this.cache(t);if("string"==typeof e)s[e]=n;else for(i in e)s[i]=e[i];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(i=this.get(t,e))?i:this.get(t,g.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,s,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{g.isArray(e)?i=e.concat(e.map(g.camelCase)):(s=g.camelCase(e),i=e in o?[e,s]:(i=s)in o?[i]:i.match(M)||[]),n=i.length;for(;n--;)delete o[i[n]]}(void 0===e||g.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!g.isEmptyObject(e)}};var F=new B,H=new B,z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function q(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(W,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:z.test(n)?g.parseJSON(n):n)}catch(t){}H.set(t,e,n)}else n=void 0;return n}g.extend({hasData:function(t){return H.hasData(t)||F.hasData(t)},data:function(t,e,n){return H.access(t,e,n)},removeData:function(t,e){H.remove(t,e)},_data:function(t,e,n){return F.access(t,e,n)},_removeData:function(t,e){F.remove(t,e)}}),g.fn.extend({data:function(t,e){var n,i,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=H.get(o),1===o.nodeType&&!F.get(o,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&(i=g.camelCase(i.slice(5)),q(o,i,s[i]));F.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each((function(){H.set(this,t)})):L(this,(function(e){var n,i;if(o&&void 0===e)return void 0!==(n=H.get(o,t)||H.get(o,t.replace(W,"-$&").toLowerCase()))?n:(i=g.camelCase(t),void 0!==(n=H.get(o,i))||void 0!==(n=q(o,i,void 0))?n:void 0);i=g.camelCase(t),this.each((function(){var n=H.get(this,i);H.set(this,i,e),t.indexOf("-")>-1&&void 0!==n&&H.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){H.remove(this,t)}))}}),g.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=F.get(t,e),n&&(!i||g.isArray(n)?i=F.access(t,e,g.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=g.queue(t,e),i=n.length,s=n.shift(),o=g._queueHooks(t,e);"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===e&&n.unshift("inprogress"),delete o.stop,s.call(t,(function(){g.dequeue(t,e)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return F.get(t,n)||F.access(t,n,{empty:g.Callbacks("once memory").add((function(){F.remove(t,[e+"queue",n])}))})}}),g.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?g.queue(this[0],t):void 0===e?this:this.each((function(){var n=g.queue(this,t,e);g._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&g.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){g.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,s=g.Deferred(),o=this,r=this.length,a=function(){--i||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(n=F.get(o[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(e)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),G=["Top","Right","Bottom","Left"],K=function(t,e){return t=e||t,"none"===g.css(t,"display")||!g.contains(t.ownerDocument,t)};function J(t,e,n,i){var s,o=1,r=20,a=i?function(){return i.cur()}:function(){return g.css(t,e,"")},l=a(),c=n&&n[3]||(g.cssNumber[e]?"":"px"),u=(g.cssNumber[e]||"px"!==c&&+l)&&U.exec(g.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{u/=o=o||".5",g.style(t,e,u+c)}while(o!==(o=a()/l)&&1!==o&&--r)}return n&&(u=+u||+l||0,s=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=s)),s}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Q=/^$|\/(?:java|ecma)script/i,Z={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function tt(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&g.nodeName(t,e)?g.merge([t],n):n}function et(t,e){for(var n=0,i=t.length;n<i;n++)F.set(t[n],"globalEval",!e||F.get(e[n],"globalEval"))}Z.optgroup=Z.option,Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead,Z.th=Z.td;var nt,it,st=/<|&#?\w+;/;function ot(t,e,n,i,s){for(var o,r,a,l,c,u,h=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((o=t[p])||0===o)if("object"===g.type(o))g.merge(d,o.nodeType?[o]:o);else if(st.test(o)){for(r=r||h.appendChild(e.createElement("div")),a=(Y.exec(o)||["",""])[1].toLowerCase(),l=Z[a]||Z._default,r.innerHTML=l[1]+g.htmlPrefilter(o)+l[2],u=l[0];u--;)r=r.lastChild;g.merge(d,r.childNodes),(r=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(i&&g.inArray(o,i)>-1)s&&s.push(o);else if(c=g.contains(o.ownerDocument,o),r=tt(h.appendChild(o),"script"),c&&et(r),n)for(u=0;o=r[u++];)Q.test(o.type||"")&&n.push(o);return h}nt=r.createDocumentFragment().appendChild(r.createElement("div")),(it=r.createElement("input")).setAttribute("type","radio"),it.setAttribute("checked","checked"),it.setAttribute("name","t"),nt.appendChild(it),f.checkClone=nt.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!nt.cloneNode(!0).lastChild.defaultValue;var rt=/^key/,at=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,lt=/^([^.]*)(?:\.(.+)|)/;function ct(){return!0}function ut(){return!1}function ht(){try{return r.activeElement}catch(t){}}function dt(t,e,n,i,s,o){var r,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)dt(t,a,n,i,e[a],o);return t}if(null==i&&null==s?(s=n,i=n=void 0):null==s&&("string"==typeof n?(s=i,i=void 0):(s=i,i=n,n=void 0)),!1===s)s=ut;else if(!s)return t;return 1===o&&(r=s,(s=function(t){return g().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=g.guid++)),t.each((function(){g.event.add(this,e,s,i,n)}))}g.event={global:{},add:function(t,e,n,i,s){var o,r,a,l,c,u,h,d,p,f,m,_=F.get(t);if(_)for(n.handler&&(n=(o=n).handler,s=o.selector),n.guid||(n.guid=g.guid++),(l=_.events)||(l=_.events={}),(r=_.handle)||(r=_.handle=function(e){return void 0!==g&&g.event.triggered!==e.type?g.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(M)||[""]).length;c--;)p=m=(a=lt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=g.event.special[p]||{},p=(s?h.delegateType:h.bindType)||p,h=g.event.special[p]||{},u=g.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&g.expr.match.needsContext.test(s),namespace:f.join(".")},o),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,r)||t.addEventListener&&t.addEventListener(p,r)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),g.event.global[p]=!0)},remove:function(t,e,n,i,s){var o,r,a,l,c,u,h,d,p,f,m,_=F.hasData(t)&&F.get(t);if(_&&(l=_.events)){for(c=(e=(e||"").match(M)||[""]).length;c--;)if(p=m=(a=lt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=g.event.special[p]||{},d=l[p=(i?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=d.length;o--;)u=d[o],!s&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));r&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,_.handle)||g.removeEvent(t,p,_.handle),delete l[p])}else for(p in l)g.event.remove(t,p+e[c],n,i,!0);g.isEmptyObject(l)&&F.remove(t,"handle events")}},dispatch:function(t){t=g.event.fix(t);var e,n,i,s,o,r=[],l=a.call(arguments),c=(F.get(this,"events")||{})[t.type]||[],u=g.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(r=g.event.handlers.call(this,t,c),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,n=0;(o=s.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(i=((g.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,l))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,s,o,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<a;n++)void 0===i[s=(o=e[n]).selector+" "]&&(i[s]=o.needsContext?g(s,this).index(l)>-1:g.find(s,this,null,[l]).length),i[s]&&i.push(o);i.length&&r.push({elem:l,handlers:i})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,s,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||r).documentElement,s=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[g.expando])return t;var e,n,i,s=t.type,o=t,a=this.fixHooks[s];for(a||(this.fixHooks[s]=a=at.test(s)?this.mouseHooks:rt.test(s)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new g.Event(o),e=i.length;e--;)t[n=i[e]]=o[n];return t.target||(t.target=r),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ht()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ht()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g.nodeName(this,"input"))return this.click(),!1},_default:function(t){return g.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},g.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},g.Event=function(t,e){if(!(this instanceof g.Event))return new g.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?ct:ut):this.type=t,e&&g.extend(this,e),this.timeStamp=t&&t.timeStamp||g.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:ut,isPropagationStopped:ut,isImmediatePropagationStopped:ut,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){g.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,s=t.relatedTarget,o=t.handleObj;return s&&(s===i||g.contains(i,s))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),g.fn.extend({on:function(t,e,n,i){return dt(this,t,e,n,i)},one:function(t,e,n,i){return dt(this,t,e,n,i,1)},off:function(t,e,n){var i,s;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,g(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=ut),this.each((function(){g.event.remove(this,t,n,e)}))}});var pt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ft=/<script|<style|<link/i,mt=/checked\s*(?:[^=]|=\s*.checked.)/i,gt=/^true\/(.*)/,_t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function vt(t,e){return g.nodeName(t,"table")&&g.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function yt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function bt(t){var e=gt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function xt(t,e){var n,i,s,o,r,a,l,c;if(1===e.nodeType){if(F.hasData(t)&&(o=F.access(t),r=F.set(e,o),c=o.events))for(s in delete r.handle,r.events={},c)for(n=0,i=c[s].length;n<i;n++)g.event.add(e,s,c[s][n]);H.hasData(t)&&(a=H.access(t),l=g.extend({},a),H.set(e,l))}}function wt(t,e,n,i){e=l.apply([],e);var s,o,r,a,c,u,h=0,d=t.length,p=d-1,m=e[0],_=g.isFunction(m);if(_||d>1&&"string"==typeof m&&!f.checkClone&&mt.test(m))return t.each((function(s){var o=t.eq(s);_&&(e[0]=m.call(this,s,o.html())),wt(o,e,n,i)}));if(d&&(o=(s=ot(e,t[0].ownerDocument,!1,t,i)).firstChild,1===s.childNodes.length&&(s=o),o||i)){for(a=(r=g.map(tt(s,"script"),yt)).length;h<d;h++)c=s,h!==p&&(c=g.clone(c,!0,!0),a&&g.merge(r,tt(c,"script"))),n.call(t[h],c,h);if(a)for(u=r[r.length-1].ownerDocument,g.map(r,bt),h=0;h<a;h++)c=r[h],Q.test(c.type||"")&&!F.access(c,"globalEval")&&g.contains(u,c)&&(c.src?g._evalUrl&&g._evalUrl(c.src):g.globalEval(c.textContent.replace(_t,"")))}return t}function kt(t,e,n){for(var i,s=e?g.filter(e,t):t,o=0;null!=(i=s[o]);o++)n||1!==i.nodeType||g.cleanData(tt(i)),i.parentNode&&(n&&g.contains(i.ownerDocument,i)&&et(tt(i,"script")),i.parentNode.removeChild(i));return t}g.extend({htmlPrefilter:function(t){return t.replace(pt,"<$1></$2>")},clone:function(t,e,n){var i,s,o,r,a,l,c,u=t.cloneNode(!0),h=g.contains(t.ownerDocument,t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||g.isXMLDoc(t)))for(r=tt(u),i=0,s=(o=tt(t)).length;i<s;i++)a=o[i],l=r[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&X.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(e)if(n)for(o=o||tt(t),r=r||tt(u),i=0,s=o.length;i<s;i++)xt(o[i],r[i]);else xt(t,u);return(r=tt(u,"script")).length>0&&et(r,!h&&tt(t,"script")),u},cleanData:function(t){for(var e,n,i,s=g.event.special,o=0;void 0!==(n=t[o]);o++)if(R(n)){if(e=n[F.expando]){if(e.events)for(i in e.events)s[i]?g.event.remove(n,i):g.removeEvent(n,i,e.handle);n[F.expando]=void 0}n[H.expando]&&(n[H.expando]=void 0)}}}),g.fn.extend({domManip:wt,detach:function(t){return kt(this,t,!0)},remove:function(t){return kt(this,t)},text:function(t){return L(this,(function(t){return void 0===t?g.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return wt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||vt(this,t).appendChild(t)}))},prepend:function(){return wt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=vt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(g.cleanData(tt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return g.clone(this,t,e)}))},html:function(t){return L(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ft.test(t)&&!Z[(Y.exec(t)||["",""])[1].toLowerCase()]){t=g.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(g.cleanData(tt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return wt(this,arguments,(function(e){var n=this.parentNode;g.inArray(this,t)<0&&(g.cleanData(tt(this)),n&&n.replaceChild(e,this))}),t)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){g.fn[t]=function(t){for(var n,i=[],s=g(t),o=s.length-1,r=0;r<=o;r++)n=r===o?this:this.clone(!0),g(s[r])[e](n),c.apply(i,n.get());return this.pushStack(i)}}));var St,Ct={HTML:"block",BODY:"block"};function Et(t,e){var n=g(e.createElement(t)).appendTo(e.body),i=g.css(n[0],"display");return n.detach(),i}function Pt(t){var e=r,n=Ct[t];return n||("none"!==(n=Et(t,e))&&n||((e=(St=(St||g("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=Et(t,e),St.detach()),Ct[t]=n),n}var Dt=/^margin/,Tt=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),$t=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Ot=function(t,e,n,i){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in s=n.apply(t,i||[]),e)t.style[o]=r[o];return s},At=r.documentElement;function Nt(t,e,n){var i,s,o,r,a=t.style;return""!==(r=(n=n||$t(t))?n.getPropertyValue(e)||n[e]:void 0)&&void 0!==r||g.contains(t.ownerDocument,t)||(r=g.style(t,e)),n&&!f.pixelMarginRight()&&Tt.test(r)&&Dt.test(e)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=n.width,a.width=i,a.minWidth=s,a.maxWidth=o),void 0!==r?r+"":r}function jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){var t,e,n,s,o=r.createElement("div"),a=r.createElement("div");function l(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",At.appendChild(o);var r=i.getComputedStyle(a);t="1%"!==r.top,s="2px"===r.marginLeft,e="4px"===r.width,a.style.marginRight="50%",n="4px"===r.marginRight,At.removeChild(o)}a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),g.extend(f,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==e&&l(),e},pixelMarginRight:function(){return null==e&&l(),n},reliableMarginLeft:function(){return null==e&&l(),s},reliableMarginRight:function(){var t,e=a.appendChild(r.createElement("div"));return e.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",a.style.width="1px",At.appendChild(o),t=!parseFloat(i.getComputedStyle(e).marginRight),At.removeChild(o),a.removeChild(e),t}}))}();var Mt=/^(none|table(?!-c[ea]).+)/,It={position:"absolute",visibility:"hidden",display:"block"},Lt={letterSpacing:"0",fontWeight:"400"},Rt=["Webkit","O","Moz","ms"],Bt=r.createElement("div").style;function Ft(t){if(t in Bt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Rt.length;n--;)if((t=Rt[n]+e)in Bt)return t}function Ht(t,e,n){var i=U.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function zt(t,e,n,i,s){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,r=0;o<4;o+=2)"margin"===n&&(r+=g.css(t,n+G[o],!0,s)),i?("content"===n&&(r-=g.css(t,"padding"+G[o],!0,s)),"margin"!==n&&(r-=g.css(t,"border"+G[o]+"Width",!0,s))):(r+=g.css(t,"padding"+G[o],!0,s),"padding"!==n&&(r+=g.css(t,"border"+G[o]+"Width",!0,s)));return r}function Wt(t,e,n){var i=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=$t(t),r="border-box"===g.css(t,"boxSizing",!1,o);if(s<=0||null==s){if(((s=Nt(t,e,o))<0||null==s)&&(s=t.style[e]),Tt.test(s))return s;i=r&&(f.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+zt(t,e,n||(r?"border":"content"),i,o)+"px"}function qt(t,e){for(var n,i,s,o=[],r=0,a=t.length;r<a;r++)(i=t[r]).style&&(o[r]=F.get(i,"olddisplay"),n=i.style.display,e?(o[r]||"none"!==n||(i.style.display=""),""===i.style.display&&K(i)&&(o[r]=F.access(i,"olddisplay",Pt(i.nodeName)))):(s=K(i),"none"===n&&s||F.set(i,"olddisplay",s?n:g.css(i,"display"))));for(r=0;r<a;r++)(i=t[r]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[r]||"":"none"));return t}function Vt(t,e,n,i,s){return new Vt.prototype.init(t,e,n,i,s)}g.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Nt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=g.camelCase(e),l=t.style;if(e=g.cssProps[a]||(g.cssProps[a]=Ft(a)||a),r=g.cssHooks[e]||g.cssHooks[a],void 0===n)return r&&"get"in r&&void 0!==(s=r.get(t,!1,i))?s:l[e];"string"==(o=typeof n)&&(s=U.exec(n))&&s[1]&&(n=J(t,e,s),o="number"),null!=n&&n==n&&("number"===o&&(n+=s&&s[3]||(g.cssNumber[a]?"":"px")),f.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),r&&"set"in r&&void 0===(n=r.set(t,n,i))||(l[e]=n))}},css:function(t,e,n,i){var s,o,r,a=g.camelCase(e);return e=g.cssProps[a]||(g.cssProps[a]=Ft(a)||a),(r=g.cssHooks[e]||g.cssHooks[a])&&"get"in r&&(s=r.get(t,!0,n)),void 0===s&&(s=Nt(t,e,i)),"normal"===s&&e in Lt&&(s=Lt[e]),""===n||n?(o=parseFloat(s),!0===n||isFinite(o)?o||0:s):s}}),g.each(["height","width"],(function(t,e){g.cssHooks[e]={get:function(t,n,i){if(n)return Mt.test(g.css(t,"display"))&&0===t.offsetWidth?Ot(t,It,(function(){return Wt(t,e,i)})):Wt(t,e,i)},set:function(t,n,i){var s,o=i&&$t(t),r=i&&zt(t,e,i,"border-box"===g.css(t,"boxSizing",!1,o),o);return r&&(s=U.exec(n))&&"px"!==(s[3]||"px")&&(t.style[e]=n,n=g.css(t,e)),Ht(0,n,r)}}})),g.cssHooks.marginLeft=jt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Nt(t,"marginLeft"))||t.getBoundingClientRect().left-Ot(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),g.cssHooks.marginRight=jt(f.reliableMarginRight,(function(t,e){if(e)return Ot(t,{display:"inline-block"},Nt,[t,"marginRight"])})),g.each({margin:"",padding:"",border:"Width"},(function(t,e){g.cssHooks[t+e]={expand:function(n){for(var i=0,s={},o="string"==typeof n?n.split(" "):[n];i<4;i++)s[t+G[i]+e]=o[i]||o[i-2]||o[0];return s}},Dt.test(t)||(g.cssHooks[t+e].set=Ht)})),g.fn.extend({css:function(t,e){return L(this,(function(t,e,n){var i,s,o={},r=0;if(g.isArray(e)){for(i=$t(t),s=e.length;r<s;r++)o[e[r]]=g.css(t,e[r],!1,i);return o}return void 0!==n?g.style(t,e,n):g.css(t,e)}),t,e,arguments.length>1)},show:function(){return qt(this,!0)},hide:function(){return qt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){K(this)?g(this).show():g(this).hide()}))}}),g.Tween=Vt,Vt.prototype={constructor:Vt,init:function(t,e,n,i,s,o){this.elem=t,this.prop=n,this.easing=s||g.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(g.cssNumber[n]?"":"px")},cur:function(){var t=Vt.propHooks[this.prop];return t&&t.get?t.get(this):Vt.propHooks._default.get(this)},run:function(t){var e,n=Vt.propHooks[this.prop];return this.options.duration?this.pos=e=g.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Vt.propHooks._default.set(this),this}},Vt.prototype.init.prototype=Vt.prototype,Vt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=g.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){g.fx.step[t.prop]?g.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[g.cssProps[t.prop]]&&!g.cssHooks[t.prop]?t.elem[t.prop]=t.now:g.style(t.elem,t.prop,t.now+t.unit)}}},Vt.propHooks.scrollTop=Vt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},g.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},g.fx=Vt.prototype.init,g.fx.step={};var Ut,Gt,Kt=/^(?:toggle|show|hide)$/,Jt=/queueHooks$/;function Xt(){return i.setTimeout((function(){Ut=void 0})),Ut=g.now()}function Yt(t,e){var n,i=0,s={height:t};for(e=e?1:0;i<4;i+=2-e)s["margin"+(n=G[i])]=s["padding"+n]=t;return e&&(s.opacity=s.width=t),s}function Qt(t,e,n){for(var i,s=(Zt.tweeners[e]||[]).concat(Zt.tweeners["*"]),o=0,r=s.length;o<r;o++)if(i=s[o].call(n,e,t))return i}function Zt(t,e,n){var i,s,o=0,r=Zt.prefilters.length,a=g.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var e=Ut||Xt(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),o=0,r=c.tweens.length;o<r;o++)c.tweens[o].run(i);return a.notifyWith(t,[c,i,n]),i<1&&r?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:g.extend({},e),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},n),originalProperties:e,originalOptions:n,startTime:Ut||Xt(),duration:n.duration,tweens:[],createTween:function(e,n){var i=g.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(s)return this;for(s=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,i,s,o,r;for(n in t)if(s=e[i=g.camelCase(n)],o=t[n],g.isArray(o)&&(s=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(r=g.cssHooks[i])&&"expand"in r)for(n in o=r.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=s);else e[i]=s}(u,c.opts.specialEasing);o<r;o++)if(i=Zt.prefilters[o].call(c,t,u,c.opts))return g.isFunction(i.stop)&&(g._queueHooks(c.elem,c.opts.queue).stop=g.proxy(i.stop,i)),i;return g.map(u,Qt,c),g.isFunction(c.opts.start)&&c.opts.start.call(t,c),g.fx.timer(g.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}g.Animation=g.extend(Zt,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return J(n.elem,t,U.exec(e),n),n}]},tweener:function(t,e){g.isFunction(t)?(e=t,t=["*"]):t=t.match(M);for(var n,i=0,s=t.length;i<s;i++)n=t[i],Zt.tweeners[n]=Zt.tweeners[n]||[],Zt.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,s,o,r,a,l,c,u=this,h={},d=t.style,p=t.nodeType&&K(t),f=F.get(t,"fxshow");for(i in n.queue||(null==(a=g._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always((function(){u.always((function(){a.unqueued--,g.queue(t,"fx").length||a.empty.fire()}))}))),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(c=g.css(t,"display"))?F.get(t,"olddisplay")||Pt(t.nodeName):c)&&"none"===g.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),e)if(s=e[i],Kt.exec(s)){if(delete e[i],o=o||"toggle"===s,s===(p?"hide":"show")){if("show"!==s||!f||void 0===f[i])continue;p=!0}h[i]=f&&f[i]||g.style(t,i)}else c=void 0;if(g.isEmptyObject(h))"inline"===("none"===c?Pt(t.nodeName):c)&&(d.display=c);else for(i in f?"hidden"in f&&(p=f.hidden):f=F.access(t,"fxshow",{}),o&&(f.hidden=!p),p?g(t).show():u.done((function(){g(t).hide()})),u.done((function(){var e;for(e in F.remove(t,"fxshow"),h)g.style(t,e,h[e])})),h)r=Qt(p?f[i]:0,i,u),i in f||(f[i]=r.start,p&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}],prefilter:function(t,e){e?Zt.prefilters.unshift(t):Zt.prefilters.push(t)}}),g.speed=function(t,e,n){var i=t&&"object"==typeof t?g.extend({},t):{complete:n||!n&&e||g.isFunction(t)&&t,duration:t,easing:n&&e||e&&!g.isFunction(e)&&e};return i.duration=g.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in g.fx.speeds?g.fx.speeds[i.duration]:g.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g.isFunction(i.old)&&i.old.call(this),i.queue&&g.dequeue(this,i.queue)},i},g.fn.extend({fadeTo:function(t,e,n,i){return this.filter(K).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var s=g.isEmptyObject(t),o=g.speed(e,n,i),r=function(){var e=Zt(this,g.extend({},t),o);(s||F.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,s=null!=t&&t+"queueHooks",o=g.timers,r=F.get(this);if(s)r[s]&&r[s].stop&&i(r[s]);else for(s in r)r[s]&&r[s].stop&&Jt.test(s)&&i(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(n),e=!1,o.splice(s,1));!e&&n||g.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=F.get(this),i=n[t+"queue"],s=n[t+"queueHooks"],o=g.timers,r=i?i.length:0;for(n.finish=!0,g.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),g.each(["toggle","show","hide"],(function(t,e){var n=g.fn[e];g.fn[e]=function(t,i,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Yt(e,!0),t,i,s)}})),g.each({slideDown:Yt("show"),slideUp:Yt("hide"),slideToggle:Yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){g.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),g.timers=[],g.fx.tick=function(){var t,e=0,n=g.timers;for(Ut=g.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||g.fx.stop(),Ut=void 0},g.fx.timer=function(t){g.timers.push(t),t()?g.fx.start():g.timers.pop()},g.fx.interval=13,g.fx.start=function(){Gt||(Gt=i.setInterval(g.fx.tick,g.fx.interval))},g.fx.stop=function(){i.clearInterval(Gt),Gt=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(t,e){return t=g.fx&&g.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var s=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(s)}}))},function(){var t=r.createElement("input"),e=r.createElement("select"),n=e.appendChild(r.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=n.selected,e.disabled=!0,f.optDisabled=!n.disabled,(t=r.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var te,ee=g.expr.attrHandle;g.fn.extend({attr:function(t,e){return L(this,g.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){g.removeAttr(this,t)}))}}),g.extend({attr:function(t,e,n){var i,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?g.prop(t,e,n):(1===o&&g.isXMLDoc(t)||(e=e.toLowerCase(),s=g.attrHooks[e]||(g.expr.match.bool.test(e)?te:void 0)),void 0!==n?null===n?void g.removeAttr(t,e):s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:(t.setAttribute(e,n+""),n):s&&"get"in s&&null!==(i=s.get(t,e))?i:null==(i=g.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&g.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,s=0,o=e&&e.match(M);if(o&&1===t.nodeType)for(;n=o[s++];)i=g.propFix[n]||n,g.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)}}),te={set:function(t,e,n){return!1===e?g.removeAttr(t,n):t.setAttribute(n,n),n}},g.each(g.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ee[e]||g.find.attr;ee[e]=function(t,e,i){var s,o;return i||(o=ee[e],ee[e]=s,s=null!=n(t,e,i)?e.toLowerCase():null,ee[e]=o),s}}));var ne=/^(?:input|select|textarea|button)$/i,ie=/^(?:a|area)$/i;g.fn.extend({prop:function(t,e){return L(this,g.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[g.propFix[t]||t]}))}}),g.extend({prop:function(t,e,n){var i,s,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&g.isXMLDoc(t)||(e=g.propFix[e]||e,s=g.propHooks[e]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:t[e]=n:s&&"get"in s&&null!==(i=s.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=g.find.attr(t,"tabindex");return e?parseInt(e,10):ne.test(t.nodeName)||ie.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(g.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){g.propFix[this.toLowerCase()]=this}));var se=/[\t\r\n\f]/g;function oe(t){return t.getAttribute&&t.getAttribute("class")||""}g.fn.extend({addClass:function(t){var e,n,i,s,o,r,a,l=0;if(g.isFunction(t))return this.each((function(e){g(this).addClass(t.call(this,e,oe(this)))}));if("string"==typeof t&&t)for(e=t.match(M)||[];n=this[l++];)if(s=oe(n),i=1===n.nodeType&&(" "+s+" ").replace(se," ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s!==(a=g.trim(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,s,o,r,a,l=0;if(g.isFunction(t))return this.each((function(e){g(this).removeClass(t.call(this,e,oe(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(M)||[];n=this[l++];)if(s=oe(n),i=1===n.nodeType&&(" "+s+" ").replace(se," ")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s!==(a=g.trim(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):g.isFunction(t)?this.each((function(n){g(this).toggleClass(t.call(this,n,oe(this),e),e)})):this.each((function(){var e,i,s,o;if("string"===n)for(i=0,s=g(this),o=t.match(M)||[];e=o[i++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=oe(this))&&F.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":F.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+oe(n)+" ").replace(se," ").indexOf(e)>-1)return!0;return!1}});var re=/\r/g,ae=/[\x20\t\r\n\f]+/g;g.fn.extend({val:function(t){var e,n,i,s=this[0];return arguments.length?(i=g.isFunction(t),this.each((function(n){var s;1===this.nodeType&&(null==(s=i?t.call(this,n,g(this).val()):t)?s="":"number"==typeof s?s+="":g.isArray(s)&&(s=g.map(s,(function(t){return null==t?"":t+""}))),(e=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))}))):s?(e=g.valHooks[s.type]||g.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(s,"value"))?n:"string"==typeof(n=s.value)?n.replace(re,""):null==n?"":n:void 0}}),g.extend({valHooks:{option:{get:function(t){var e=g.find.attr(t,"value");return null!=e?e:g.trim(g.text(t)).replace(ae," ")}},select:{get:function(t){for(var e,n,i=t.options,s=t.selectedIndex,o="select-one"===t.type||s<0,r=o?null:[],a=o?s+1:i.length,l=s<0?a:o?s:0;l<a;l++)if(((n=i[l]).selected||l===s)&&(f.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!g.nodeName(n.parentNode,"optgroup"))){if(e=g(n).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var n,i,s=t.options,o=g.makeArray(e),r=s.length;r--;)((i=s[r]).selected=g.inArray(g.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),g.each(["radio","checkbox"],(function(){g.valHooks[this]={set:function(t,e){if(g.isArray(e))return t.checked=g.inArray(g(t).val(),e)>-1}},f.checkOn||(g.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var le=/^(?:focusinfocus|focusoutblur)$/;g.extend(g.event,{trigger:function(t,e,n,s){var o,a,l,c,u,h,d,f=[n||r],m=p.call(t,"type")?t.type:t,_=p.call(t,"namespace")?t.namespace.split("."):[];if(a=l=n=n||r,3!==n.nodeType&&8!==n.nodeType&&!le.test(m+g.event.triggered)&&(m.indexOf(".")>-1&&(_=m.split("."),m=_.shift(),_.sort()),u=m.indexOf(":")<0&&"on"+m,(t=t[g.expando]?t:new g.Event(m,"object"==typeof t&&t)).isTrigger=s?2:3,t.namespace=_.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:g.makeArray(e,[t]),d=g.event.special[m]||{},s||!d.trigger||!1!==d.trigger.apply(n,e))){if(!s&&!d.noBubble&&!g.isWindow(n)){for(c=d.delegateType||m,le.test(c+m)||(a=a.parentNode);a;a=a.parentNode)f.push(a),l=a;l===(n.ownerDocument||r)&&f.push(l.defaultView||l.parentWindow||i)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)t.type=o>1?c:d.bindType||m,(h=(F.get(a,"events")||{})[t.type]&&F.get(a,"handle"))&&h.apply(a,e),(h=u&&a[u])&&h.apply&&R(a)&&(t.result=h.apply(a,e),!1===t.result&&t.preventDefault());return t.type=m,s||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!R(n)||u&&g.isFunction(n[m])&&!g.isWindow(n)&&((l=n[u])&&(n[u]=null),g.event.triggered=m,n[m](),g.event.triggered=void 0,l&&(n[u]=l)),t.result}},simulate:function(t,e,n){var i=g.extend(new g.Event,n,{type:t,isSimulated:!0});g.event.trigger(i,null,e)}}),g.fn.extend({trigger:function(t,e){return this.each((function(){g.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return g.event.trigger(t,e,n,!0)}}),g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){g.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),g.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),f.focusin="onfocusin"in i,f.focusin||g.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){g.event.simulate(e,t.target,g.event.fix(t))};g.event.special[e]={setup:function(){var i=this.ownerDocument||this,s=F.access(i,e);s||i.addEventListener(t,n,!0),F.access(i,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this,s=F.access(i,e)-1;s?F.access(i,e,s):(i.removeEventListener(t,n,!0),F.remove(i,e))}}}));var ce=i.location,ue=g.now(),he=/\?/;g.parseJSON=function(t){return JSON.parse(t+"")},g.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+t),e};var de=/#.*$/,pe=/([?&])_=[^&]*/,fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,me=/^(?:GET|HEAD)$/,ge=/^\/\//,_e={},ve={},ye="*/".concat("*"),be=r.createElement("a");function xe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,s=0,o=e.toLowerCase().match(M)||[];if(g.isFunction(n))for(;i=o[s++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function we(t,e,n,i){var s={},o=t===ve;function r(a){var l;return s[a]=!0,g.each(t[a]||[],(function(t,a){var c=a(e,n,i);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)})),l}return r(e.dataTypes[0])||!s["*"]&&r("*")}function ke(t,e){var n,i,s=g.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&g.extend(!0,t,i),t}be.href=ce.href,g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ke(ke(t,g.ajaxSettings),e):ke(g.ajaxSettings,t)},ajaxPrefilter:xe(_e),ajaxTransport:xe(ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,a,l,c,u,h,d=g.ajaxSetup({},e),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?g(p):g.event,m=g.Deferred(),_=g.Callbacks("once memory"),v=d.statusCode||{},y={},b={},x=0,w="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!a)for(a={};e=fe.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return x||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(x<2)for(e in t)v[e]=[v[e],t[e]];else k.always(t[k.status]);return this},abort:function(t){var e=t||w;return n&&n.abort(e),S(0,e),this}};if(m.promise(k).complete=_.add,k.success=k.done,k.error=k.fail,d.url=((t||d.url||ce.href)+"").replace(de,"").replace(ge,ce.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=g.trim(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=r.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=be.protocol+"//"+be.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=g.param(d.data,d.traditional)),we(_e,d,e,k),2===x)return k;for(h in(u=g.event&&d.global)&&0==g.active++&&g.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!me.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(he.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=pe.test(s)?s.replace(pe,"$1_="+ue++):s+(he.test(s)?"&":"?")+"_="+ue++)),d.ifModified&&(g.lastModified[s]&&k.setRequestHeader("If-Modified-Since",g.lastModified[s]),g.etag[s]&&k.setRequestHeader("If-None-Match",g.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ye+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,k,d)||2===x))return k.abort();for(h in w="abort",{success:1,error:1,complete:1})k[h](d[h]);if(n=we(ve,d,e,k)){if(k.readyState=1,u&&f.trigger("ajaxSend",[k,d]),2===x)return k;d.async&&d.timeout>0&&(l=i.setTimeout((function(){k.abort("timeout")}),d.timeout));try{x=1,n.send(y,S)}catch(t){if(!(x<2))throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,r,a){var c,h,y,b,w,S=e;2!==x&&(x=2,l&&i.clearTimeout(l),n=void 0,o=a||"",k.readyState=t>0?4:0,c=t>=200&&t<300||304===t,r&&(b=function(t,e,n){for(var i,s,o,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)o=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}(d,k,r)),b=function(t,e,n,i){var s,o,r,a,l,c={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=c[l+" "+o]||c["* "+o]))for(s in c)if((a=s.split(" "))[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[s]:!0!==c[s]&&(o=a[0],u.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(d,b,k,c),c?(d.ifModified&&((w=k.getResponseHeader("Last-Modified"))&&(g.lastModified[s]=w),(w=k.getResponseHeader("etag"))&&(g.etag[s]=w)),204===t||"HEAD"===d.type?S="nocontent":304===t?S="notmodified":(S=b.state,h=b.data,c=!(y=b.error))):(y=S,!t&&S||(S="error",t<0&&(t=0))),k.status=t,k.statusText=(e||S)+"",c?m.resolveWith(p,[h,S,k]):m.rejectWith(p,[k,S,y]),k.statusCode(v),v=void 0,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[k,d,c?h:y]),_.fireWith(p,[k,S]),u&&(f.trigger("ajaxComplete",[k,d]),--g.active||g.event.trigger("ajaxStop")))}return k},getJSON:function(t,e,n){return g.get(t,e,n,"json")},getScript:function(t,e){return g.get(t,void 0,e,"script")}}),g.each(["get","post"],(function(t,e){g[e]=function(t,n,i,s){return g.isFunction(n)&&(s=s||i,i=n,n=void 0),g.ajax(g.extend({url:t,type:e,dataType:s,data:n,success:i},g.isPlainObject(t)&&t))}})),g._evalUrl=function(t){return g.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},g.fn.extend({wrapAll:function(t){var e;return g.isFunction(t)?this.each((function(e){g(this).wrapAll(t.call(this,e))})):(this[0]&&(e=g(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this)},wrapInner:function(t){return g.isFunction(t)?this.each((function(e){g(this).wrapInner(t.call(this,e))})):this.each((function(){var e=g(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g.isFunction(t);return this.each((function(n){g(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(){return this.parent().each((function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)})).end()}}),g.expr.filters.hidden=function(t){return!g.expr.filters.visible(t)},g.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Se=/%20/g,Ce=/\[\]$/,Ee=/\r?\n/g,Pe=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Te(t,e,n,i){var s;if(g.isArray(e))g.each(e,(function(e,s){n||Ce.test(t)?i(t,s):Te(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,n,i)}));else if(n||"object"!==g.type(e))i(t,e);else for(s in e)Te(t+"["+s+"]",e[s],n,i)}g.param=function(t,e){var n,i=[],s=function(t,e){e=g.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=g.ajaxSettings&&g.ajaxSettings.traditional),g.isArray(t)||t.jquery&&!g.isPlainObject(t))g.each(t,(function(){s(this.name,this.value)}));else for(n in t)Te(n,t[n],e,s);return i.join("&").replace(Se,"+")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=g.prop(this,"elements");return t?g.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!g(this).is(":disabled")&&De.test(this.nodeName)&&!Pe.test(t)&&(this.checked||!X.test(t))})).map((function(t,e){var n=g(this).val();return null==n?null:g.isArray(n)?g.map(n,(function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}})):{name:e.name,value:n.replace(Ee,"\r\n")}})).get()}}),g.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},Oe=g.ajaxSettings.xhr();f.cors=!!Oe&&"withCredentials"in Oe,f.ajax=Oe=!!Oe,g.ajaxTransport((function(t){var e,n;if(f.cors||Oe&&!t.crossDomain)return{send:function(s,o){var r,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];for(r in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(r,s[r]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o($e[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return g.globalEval(t),t}}}),g.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),g.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain)return{send:function(i,s){e=g("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),r.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ae=[],Ne=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ae.pop()||g.expando+"_"+ue++;return this[t]=!0,t}}),g.ajaxPrefilter("json jsonp",(function(t,e,n){var s,o,r,a=!1!==t.jsonp&&(Ne.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ne.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=g.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ne,"$1"+s):!1!==t.jsonp&&(t.url+=(he.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return r||g.error(s+" was not called"),r[0]},t.dataTypes[0]="json",o=i[s],i[s]=function(){r=arguments},n.always((function(){void 0===o?g(i).removeProp(s):i[s]=o,t[s]&&(t.jsonpCallback=e.jsonpCallback,Ae.push(s)),r&&g.isFunction(o)&&o(r[0]),r=o=void 0})),"script"})),g.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||r;var i=E.exec(t),s=!n&&[];return i?[e.createElement(i[1])]:(i=ot([t],e,s),s&&s.length&&g(s).remove(),g.merge([],i.childNodes))};var je=g.fn.load;function Me(t){return g.isWindow(t)?t:9===t.nodeType&&t.defaultView}g.fn.load=function(t,e,n){if("string"!=typeof t&&je)return je.apply(this,arguments);var i,s,o,r=this,a=t.indexOf(" ");return a>-1&&(i=g.trim(t.slice(a)),t=t.slice(0,a)),g.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&g.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done((function(t){o=arguments,r.html(i?g("<div>").append(g.parseHTML(t)).find(i):t)})).always(n&&function(t,e){r.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){g.fn[e]=function(t){return this.on(e,t)}})),g.expr.filters.animated=function(t){return g.grep(g.timers,(function(e){return t===e.elem})).length},g.offset={setOffset:function(t,e,n){var i,s,o,r,a,l,c=g.css(t,"position"),u=g(t),h={};"static"===c&&(t.style.position="relative"),a=u.offset(),o=g.css(t,"top"),l=g.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(r=(i=u.position()).top,s=i.left):(r=parseFloat(o)||0,s=parseFloat(l)||0),g.isFunction(e)&&(e=e.call(t,n,g.extend({},a))),null!=e.top&&(h.top=e.top-a.top+r),null!=e.left&&(h.left=e.left-a.left+s),"using"in e?e.using.call(t,h):u.css(h)}},g.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){g.offset.setOffset(this,t,e)}));var e,n,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,g.contains(e,i)?(s=i.getBoundingClientRect(),n=Me(o),{top:s.top+n.pageYOffset-e.clientTop,left:s.left+n.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===g.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),g.nodeName(t[0],"html")||(i=t.offset()),i.top+=g.css(t[0],"borderTopWidth",!0),i.left+=g.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-g.css(n,"marginTop",!0),left:e.left-i.left-g.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===g.css(t,"position");)t=t.offsetParent;return t||At}))}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;g.fn[t]=function(i){return L(this,(function(t,i,s){var o=Me(t);if(void 0===s)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:s,n?s:o.pageYOffset):t[i]=s}),t,i,arguments.length)}})),g.each(["top","left"],(function(t,e){g.cssHooks[e]=jt(f.pixelPosition,(function(t,n){if(n)return n=Nt(t,e),Tt.test(n)?g(t).position()[e]+"px":n}))})),g.each({Height:"height",Width:"width"},(function(t,e){g.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){g.fn[i]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),r=n||(!0===i||!0===s?"margin":"border");return L(this,(function(e,n,i){var s;return g.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===i?g.css(e,n,r):g.style(e,n,i,r)}),e,o?i:void 0,o,null)}}))})),g.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),g.fn.andSelf=g.fn.addBack,void 0===(n=function(){return g}.apply(e,[]))||(t.exports=n);var Ie=i.jQuery,Le=i.$;return g.noConflict=function(t){return i.$===g&&(i.$=Le),t&&i.jQuery===g&&(i.jQuery=Ie),g},s||(i.jQuery=i.$=g),g},"object"==typeof t.exports?t.exports=i.document?s(i,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return s(t)}:s(i)},9461:t=>{"use strict";var e=t.exports=function(t,e,i){"function"==typeof e&&(i=e,e={}),n(e,"function"==typeof(i=e.cb||i)?i:i.pre||function(){},i.post||function(){},t,"",t)};function n(t,i,s,o,r,a,l,c,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in i(o,r,a,l,c,u,h),o){var p=o[d];if(Array.isArray(p)){if(d in e.arrayKeywords)for(var f=0;f<p.length;f++)n(t,i,s,p[f],r+"/"+d+"/"+f,a,r,d,o,f)}else if(d in e.propsKeywords){if(p&&"object"==typeof p)for(var m in p)n(t,i,s,p[m],r+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,r,d,o,m)}else(d in e.keywords||t.allKeys&&!(d in e.skipKeywords))&&n(t,i,s,p,r+"/"+d,a,r,d,o)}s(o,r,a,l,c,u,h)}}e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2837:()=>{},5311:function(t,e,n){!function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in s)return s.value;var r=s.get;return void 0!==r?r.call(i):void 0},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=function(){function t(t,e){var n=[],i=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},u=function(){function t(e){i(this,t),this.selfOptions=e||{},this.pipes={}}return s(t,[{key:"options",value:function(t){return t&&(this.selfOptions=t),this.selfOptions}},{key:"pipe",value:function(t,e){var n=e;if("string"==typeof t){if(void 0===n)return this.pipes[t];this.pipes[t]=n}if(t&&t.name){if(n=t,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(t,e){var n=t;n.options=this.options();for(var i=e||t.pipe||"default",s=void 0,o=void 0;i;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(n),o=n,s=i,i=null,n&&n.next&&(n=n.next,i=o.nextPipe||n.pipe||s);return n.hasResult?n.result:void 0}}]),t}(),h=function(){function t(e){i(this,t),this.name=e,this.filters=[]}return s(t,[{key:"process",value:function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,i=this.filters.length,s=t,o=0;o<i;o++){var r=this.filters[o];if(e&&this.log("filter: "+r.filterName),r(s),"object"===(void 0===s?"undefined":n(s))&&s.exiting){s.exiting=!1;break}}!s.next&&this.resultCheck&&this.resultCheck(s)}},{key:"log",value:function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)}},{key:"append",value:function(){var t;return(t=this.filters).push.apply(t,arguments),this}},{key:"prepend",value:function(){var t;return(t=this.filters).unshift.apply(t,arguments),this}},{key:"indexOf",value:function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++)if(this.filters[e].filterName===t)return e;throw new Error("filter not found: "+t)}},{key:"list",value:function(){return this.filters.map((function(t){return t.filterName}))}},{key:"after",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return this.filters.splice(e,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(t){if(!1!==t){if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var n=new Error(e.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),t}(),d=function(){function t(){i(this,t)}return s(t,[{key:"setResult",value:function(t){return this.result=t,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(t,e){return"string"==typeof t||t instanceof h?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this}},{key:"push",value:function(t,e){return t.parent=this,void 0!==e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this}}]),t}(),p="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array};function f(t){var e=/^\/(.*)\/([gimyu]*)$/.exec(t.toString());return new RegExp(e[1],e[2])}function m(t){if("object"!==(void 0===t?"undefined":n(t)))return t;if(null===t)return null;if(p(t))return t.map(m);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return f(t);var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=m(t[i]));return e}var g=function(t){function e(t,n){i(this,e);var s=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.left=t,s.right=n,s.pipe="diff",s}return r(e,t),s(e,[{key:"setResult",value:function(t){if(this.options.cloneDiffValues&&"object"===(void 0===t?"undefined":n(t))){var e="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:m;"object"===n(t[0])&&(t[0]=e(t[0])),"object"===n(t[1])&&(t[1]=e(t[1]))}return d.prototype.setResult.apply(this,arguments)}}]),e}(d),_=function(t){function e(t,n){i(this,e);var s=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.left=t,s.delta=n,s.pipe="patch",s}return r(e,t),e}(d),v=function(t){function e(t){i(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.delta=t,n.pipe="reverse",n}return r(e,t),e}(d),y="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},b=function(t){if(t.left!==t.right)if(void 0!==t.left)if(void 0!==t.right){if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");t.leftType=null===t.left?"null":n(t.left),t.rightType=null===t.right?"null":n(t.right),t.leftType===t.rightType&&"boolean"!==t.leftType&&"number"!==t.leftType?("object"===t.leftType&&(t.leftIsArray=y(t.left)),"object"===t.rightType&&(t.rightIsArray=y(t.right)),t.leftIsArray===t.rightIsArray?t.left instanceof RegExp&&(t.right instanceof RegExp?t.setResult([t.left.toString(),t.right.toString()]).exit():t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()}else t.setResult([t.left,0,0]).exit();else{if("function"==typeof t.right)throw new Error("functions are not supported");t.setResult([t.right]).exit()}else t.setResult(void 0).exit()};b.filterName="trivial";var x=function(t){if(void 0!==t.delta){if(t.nested=!y(t.delta),!t.nested)if(1!==t.delta.length)if(2!==t.delta.length)3===t.delta.length&&0===t.delta[2]&&t.setResult(void 0).exit();else{if(t.left instanceof RegExp){var e=/^\/(.*)\/([gimyu]+)$/.exec(t.delta[1]);if(e)return void t.setResult(new RegExp(e[1],e[2])).exit()}t.setResult(t.delta[1]).exit()}else t.setResult(t.delta[0]).exit()}else t.setResult(t.left).exit()};x.filterName="trivial";var w=function(t){void 0!==t.delta?(t.nested=!y(t.delta),t.nested||(1!==t.delta.length?2!==t.delta.length?3===t.delta.length&&0===t.delta[2]&&t.setResult([t.delta[0]]).exit():t.setResult([t.delta[1],t.delta[0]]).exit():t.setResult([t.delta[0],0,0]).exit())):t.setResult(t.delta).exit()};function k(t){if(t&&t.children){for(var e=t.children.length,n=void 0,i=t.result,s=0;s<e;s++)void 0!==(n=t.children[s]).result&&((i=i||{})[n.childName]=n.result);i&&t.leftIsArray&&(i._t="a"),t.setResult(i).exit()}}function S(t){if(!t.leftIsArray&&"object"===t.leftType){var e=void 0,n=void 0,i=t.options.propertyFilter;for(e in t.left)Object.prototype.hasOwnProperty.call(t.left,e)&&(i&&!i(e,t)||(n=new g(t.left[e],t.right[e]),t.push(n,e)));for(e in t.right)Object.prototype.hasOwnProperty.call(t.right,e)&&(i&&!i(e,t)||void 0===t.left[e]&&(n=new g(void 0,t.right[e]),t.push(n,e)));t.children&&0!==t.children.length?t.exit():t.setResult(void 0).exit()}}w.filterName="trivial",k.filterName="collectChildren",S.filterName="objects";var C=function(t){if(t.nested&&!t.delta._t){var e=void 0,n=void 0;for(e in t.delta)n=new _(t.left[e],t.delta[e]),t.push(n,e);t.exit()}};C.filterName="objects";var E=function(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,n=void 0,i=0;i<e;i++)n=t.children[i],Object.prototype.hasOwnProperty.call(t.left,n.childName)&&void 0===n.result?delete t.left[n.childName]:t.left[n.childName]!==n.result&&(t.left[n.childName]=n.result);t.setResult(t.left).exit()}};E.filterName="collectChildren";var P=function(t){if(t.nested&&!t.delta._t){var e=void 0,n=void 0;for(e in t.delta)n=new v(t.delta[e]),t.push(n,e);t.exit()}};function D(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,n=void 0,i={},s=0;s<e;s++)i[(n=t.children[s]).childName]!==n.result&&(i[n.childName]=n.result);t.setResult(i).exit()}}P.filterName="objects",D.filterName="collectChildren";var T=function(t,e,n,i){return t[n]===e[i]},$=function(t,e,n,i){var s=t.length,o=e.length,r=void 0,a=void 0,l=[s+1];for(r=0;r<s+1;r++)for(l[r]=[o+1],a=0;a<o+1;a++)l[r][a]=0;for(l.match=n,r=1;r<s+1;r++)for(a=1;a<o+1;a++)n(t,e,r-1,a-1,i)?l[r][a]=l[r-1][a-1]+1:l[r][a]=Math.max(l[r-1][a],l[r][a-1]);return l},O=function(t,e,n,i){for(var s=e.length,o=n.length,r={sequence:[],indices1:[],indices2:[]};0!==s&&0!==o;)t.match(e,n,s-1,o-1,i)?(r.sequence.unshift(e[s-1]),r.indices1.unshift(s-1),r.indices2.unshift(o-1),--s,--o):t[s][o-1]>t[s-1][o]?--o:--s;return r},A={get:function(t,e,n,i){var s=i||{},o=$(t,e,n||T,s),r=O(o,t,e,s);return"string"==typeof t&&"string"==typeof e&&(r.sequence=r.sequence.join("")),r}},N=3,j="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},M="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i]===e)return i;return-1};function I(t,e,n,i){for(var s=0;s<n;s++)for(var o=t[s],r=0;r<i;r++){var a=e[r];if(s!==r&&o===a)return!0}}function L(t,e,i,s,o){var r=t[i],a=e[s];if(r===a)return!0;if("object"!==(void 0===r?"undefined":n(r))||"object"!==(void 0===a?"undefined":n(a)))return!1;var l=o.objectHash;if(!l)return o.matchByPosition&&i===s;var c=void 0,u=void 0;return"number"==typeof i?(o.hashCache1=o.hashCache1||[],void 0===(c=o.hashCache1[i])&&(o.hashCache1[i]=c=l(r,i))):c=l(r),void 0!==c&&("number"==typeof s?(o.hashCache2=o.hashCache2||[],void 0===(u=o.hashCache2[s])&&(o.hashCache2[s]=u=l(a,s))):u=l(a),void 0!==u&&c===u)}var R=function(t){if(t.leftIsArray){var e={objectHash:t.options&&t.options.objectHash,matchByPosition:t.options&&t.options.matchByPosition},n=0,i=0,s=void 0,o=void 0,r=void 0,a=t.left,l=t.right,c=a.length,u=l.length,h=void 0;for(c>0&&u>0&&!e.objectHash&&"boolean"!=typeof e.matchByPosition&&(e.matchByPosition=!I(a,l,c,u));n<c&&n<u&&L(a,l,n,n,e);)s=n,h=new g(t.left[s],t.right[s]),t.push(h,s),n++;for(;i+n<c&&i+n<u&&L(a,l,c-1-i,u-1-i,e);)o=c-1-i,r=u-1-i,h=new g(t.left[o],t.right[r]),t.push(h,r),i++;var d=void 0;if(n+i!==c)if(n+i!==u){delete e.hashCache1,delete e.hashCache2;var p=a.slice(n,c-i),f=l.slice(n,u-i),m=A.get(p,f,L,e),_=[];for(d=d||{_t:"a"},s=n;s<c-i;s++)M(m.indices1,s-n)<0&&(d["_"+s]=[a[s],0,0],_.push(s));var v=!0;t.options&&t.options.arrays&&!1===t.options.arrays.detectMove&&(v=!1);var y=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(y=!0);var b=_.length;for(s=n;s<u-i;s++){var x=M(m.indices2,s-n);if(x<0){var w=!1;if(v&&b>0)for(var k=0;k<b;k++)if(L(p,f,(o=_[k])-n,s-n,e)){d["_"+o].splice(1,2,s,N),y||(d["_"+o][0]=""),r=s,h=new g(t.left[o],t.right[r]),t.push(h,r),_.splice(k,1),w=!0;break}w||(d[s]=[l[s]])}else o=m.indices1[x]+n,r=m.indices2[x]+n,h=new g(t.left[o],t.right[r]),t.push(h,r)}t.setResult(d).exit()}else{for(d=d||{_t:"a"},s=n;s<c-i;s++)d["_"+s]=[a[s],0,0];t.setResult(d).exit()}else{if(c===u)return void t.setResult(void 0).exit();for(d=d||{_t:"a"},s=n;s<u-i;s++)d[s]=[l[s]];t.setResult(d).exit()}}};R.filterName="arrays";var B={numerically:function(t,e){return t-e},numericallyBy:function(t){return function(e,n){return e[t]-n[t]}}},F=function(t){if(t.nested&&"a"===t.delta._t){var e=void 0,n=void 0,i=t.delta,s=t.left,o=[],r=[],a=[];for(e in i)if("_t"!==e)if("_"===e[0]){if(0!==i[e][2]&&i[e][2]!==N)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+i[e][2]);o.push(parseInt(e.slice(1),10))}else 1===i[e].length?r.push({index:parseInt(e,10),value:i[e][0]}):a.push({index:parseInt(e,10),delta:i[e]});for(e=(o=o.sort(B.numerically)).length-1;e>=0;e--){var l=i["_"+(n=o[e])],c=s.splice(n,1)[0];l[2]===N&&r.push({index:l[1],value:c})}var u=(r=r.sort(B.numericallyBy("index"))).length;for(e=0;e<u;e++){var h=r[e];s.splice(h.index,0,h.value)}var d=a.length,p=void 0;if(d>0)for(e=0;e<d;e++){var f=a[e];p=new _(t.left[f.index],f.delta),t.push(p,f.index)}t.children?t.exit():t.setResult(t.left).exit()}};F.filterName="arrays";var H=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,n=void 0,i=0;i<e;i++)n=t.children[i],t.left[n.childName]=n.result;t.setResult(t.left).exit()}};H.filterName="arraysCollectChildren";var z=function(t){if(t.nested){if("a"===t.delta._t){var e=void 0,n=void 0;for(e in t.delta)"_t"!==e&&(n=new v(t.delta[e]),t.push(n,e));t.exit()}}else t.delta[2]===N&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),N]).exit())};z.filterName="arrays";var W=function(t,e,n){if("string"==typeof e&&"_"===e[0])return parseInt(e.substr(1),10);if(j(n)&&0===n[2])return"_"+e;var i=+e;for(var s in t){var o=t[s];if(j(o))if(o[2]===N){var r=parseInt(s.substr(1),10),a=o[1];if(a===+e)return r;r<=i&&a>i?i++:r>=i&&a<i&&i--}else 0===o[2]?parseInt(s.substr(1),10)<=i&&i++:1===o.length&&s<=i&&i--}return i};function q(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,n=void 0,i={_t:"a"},s=0;s<e;s++){var o=(n=t.children[s]).newName;void 0===o&&(o=W(t.delta,n.childName,n.result)),i[o]!==n.result&&(i[o]=n.result)}t.setResult(i).exit()}}q.filterName="arraysCollectChildren";var V=function(t){t.left instanceof Date?(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?t.setResult([t.left,t.right]):t.setResult(void 0):t.setResult([t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};function U(t,e){return t(e={exports:{}},e.exports),e.exports}V.filterName="dates";var G=U((function(t){function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1,i=1,s=0;e.prototype.diff_main=function(t,e,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[s,t]]:[];void 0===n&&(n=!0);var r=n,a=this.diff_commonPrefix(t,e),l=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var u=this.diff_compute_(t,e,r,o);return l&&u.unshift([s,l]),c&&u.push([s,c]),this.diff_cleanupMerge(u),u},e.prototype.diff_compute_=function(t,e,o,r){var a;if(!t)return[[i,e]];if(!e)return[[n,t]];var l=t.length>e.length?t:e,c=t.length>e.length?e:t,u=l.indexOf(c);if(-1!=u)return a=[[i,l.substring(0,u)],[s,c],[i,l.substring(u+c.length)]],t.length>e.length&&(a[0][0]=a[2][0]=n),a;if(1==c.length)return[[n,t],[i,e]];var h=this.diff_halfMatch_(t,e);if(h){var d=h[0],p=h[1],f=h[2],m=h[3],g=h[4],_=this.diff_main(d,f,o,r),v=this.diff_main(p,m,o,r);return _.concat([[s,g]],v)}return o&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},e.prototype.diff_lineMode_=function(t,e,o){t=(p=this.diff_linesToChars_(t,e)).chars1,e=p.chars2;var r=p.lineArray,a=this.diff_main(t,e,!1,o);this.diff_charsToLines_(a,r),this.diff_cleanupSemantic(a),a.push([s,""]);for(var l=0,c=0,u=0,h="",d="";l<a.length;){switch(a[l][0]){case i:u++,d+=a[l][1];break;case n:c++,h+=a[l][1];break;case s:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p,f=(p=this.diff_main(h,d,!1,o)).length-1;f>=0;f--)a.splice(l,0,p[f]);l+=p.length}u=0,c=0,h="",d=""}l++}return a.pop(),a},e.prototype.diff_bisect_=function(t,e,s){for(var o=t.length,r=e.length,a=Math.ceil((o+r)/2),l=a,c=2*a,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var p=o-r,f=p%2!=0,m=0,g=0,_=0,v=0,y=0;y<a&&!((new Date).getTime()>s);y++){for(var b=-y+m;b<=y-g;b+=2){for(var x=l+b,w=(P=b==-y||b!=y&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-b;P<o&&w<r&&t.charAt(P)==e.charAt(w);)P++,w++;if(u[x]=P,P>o)g+=2;else if(w>r)m+=2;else if(f&&(C=l+p-b)>=0&&C<c&&-1!=h[C]&&P>=(S=o-h[C]))return this.diff_bisectSplit_(t,e,P,w,s)}for(var k=-y+_;k<=y-v;k+=2){for(var S,C=l+k,E=(S=k==-y||k!=y&&h[C-1]<h[C+1]?h[C+1]:h[C-1]+1)-k;S<o&&E<r&&t.charAt(o-S-1)==e.charAt(r-E-1);)S++,E++;if(h[C]=S,S>o)v+=2;else if(E>r)_+=2;else if(!f){var P;if((x=l+p-k)>=0&&x<c&&-1!=u[x])if(w=l+(P=u[x])-x,P>=(S=o-S))return this.diff_bisectSplit_(t,e,P,w,s)}}}return[[n,t],[i,e]]},e.prototype.diff_bisectSplit_=function(t,e,n,i,s){var o=t.substring(0,n),r=e.substring(0,i),a=t.substring(n),l=e.substring(i),c=this.diff_main(o,r,!1,s),u=this.diff_main(a,l,!1,s);return c.concat(u)},e.prototype.diff_linesToChars_=function(t,e){var n=[],i={};function s(t){for(var e="",s=0,o=-1,r=n.length;o<t.length-1;){-1==(o=t.indexOf("\n",s))&&(o=t.length-1);var a=t.substring(s,o+1);s=o+1,(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?e+=String.fromCharCode(i[a]):(e+=String.fromCharCode(r),i[a]=r,n[r++]=a)}return e}return n[0]="",{chars1:s(t),chars2:s(e),lineArray:n}},e.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],s=[],o=0;o<i.length;o++)s[o]=e[i.charCodeAt(o)];t[n][1]=s.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),s=i,o=0;n<s;)t.substring(o,s)==e.substring(o,s)?o=n=s:i=s,s=Math.floor((i-n)/2+n);return s},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),s=i,o=0;n<s;)t.substring(t.length-s,t.length-o)==e.substring(e.length-s,e.length-o)?o=n=s:i=s,s=Math.floor((i-n)/2+n);return s},e.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var s=Math.min(n,i);if(t==e)return s;for(var o=0,r=1;;){var a=t.substring(s-r),l=e.indexOf(a);if(-1==l)return o;r+=l,0!=l&&t.substring(s-r)!=e.substring(0,r)||(o=r,r++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var s=this;function o(t,e,n){for(var i,o,r,a,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(l,c+1));){var h=s.diff_commonPrefix(t.substring(n),e.substring(c)),d=s.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<d+h&&(u=e.substring(c-d,c)+e.substring(c,c+h),i=t.substring(0,n-d),o=t.substring(n+h),r=e.substring(0,c-d),a=e.substring(c+h))}return 2*u.length>=t.length?[i,o,r,a,u]:null}var r,a,l,c,u,h=o(n,i,Math.ceil(n.length/4)),d=o(n,i,Math.ceil(n.length/2));return h||d?(r=d?h&&h[4].length>d[4].length?h:d:h,t.length>e.length?(a=r[0],l=r[1],c=r[2],u=r[3]):(c=r[0],u=r[1],a=r[2],l=r[3]),[a,l,c,u,r[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var e=!1,o=[],r=0,a=null,l=0,c=0,u=0,h=0,d=0;l<t.length;)t[l][0]==s?(o[r++]=l,c=h,u=d,h=0,d=0,a=t[l][1]):(t[l][0]==i?h+=t[l][1].length:d+=t[l][1].length,a&&a.length<=Math.max(c,u)&&a.length<=Math.max(h,d)&&(t.splice(o[r-1],0,[n,a]),t[o[r-1]+1][0]=i,r--,l=--r>0?o[r-1]:-1,c=0,u=0,h=0,d=0,a=null,e=!0)),l++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),l=1;l<t.length;){if(t[l-1][0]==n&&t[l][0]==i){var p=t[l-1][1],f=t[l][1],m=this.diff_commonOverlap_(p,f),g=this.diff_commonOverlap_(f,p);m>=g?(m>=p.length/2||m>=f.length/2)&&(t.splice(l,0,[s,f.substring(0,m)]),t[l-1][1]=p.substring(0,p.length-m),t[l+1][1]=f.substring(m),l++):(g>=p.length/2||g>=f.length/2)&&(t.splice(l,0,[s,p.substring(0,g)]),t[l-1][0]=i,t[l-1][1]=f.substring(0,f.length-g),t[l+1][0]=n,t[l+1][1]=p.substring(g),l++),l++}l++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var i=t.charAt(t.length-1),s=n.charAt(0),o=i.match(e.nonAlphaNumericRegex_),r=s.match(e.nonAlphaNumericRegex_),a=o&&i.match(e.whitespaceRegex_),l=r&&s.match(e.whitespaceRegex_),c=a&&i.match(e.linebreakRegex_),u=l&&s.match(e.linebreakRegex_),h=c&&t.match(e.blanklineEndRegex_),d=u&&n.match(e.blanklineStartRegex_);return h||d?5:c||u?4:o&&!a&&l?3:a||l?2:o||r?1:0}for(var i=1;i<t.length-1;){if(t[i-1][0]==s&&t[i+1][0]==s){var o=t[i-1][1],r=t[i][1],a=t[i+1][1],l=this.diff_commonSuffix(o,r);if(l){var c=r.substring(r.length-l);o=o.substring(0,o.length-l),r=c+r.substring(0,r.length-l),a=c+a}for(var u=o,h=r,d=a,p=n(o,r)+n(r,a);r.charAt(0)===a.charAt(0);){o+=r.charAt(0),r=r.substring(1)+a.charAt(0),a=a.substring(1);var f=n(o,r)+n(r,a);f>=p&&(p=f,u=o,h=r,d=a)}t[i-1][1]!=u&&(u?t[i-1][1]=u:(t.splice(i-1,1),i--),t[i][1]=h,d?t[i+1][1]=d:(t.splice(i+1,1),i--))}i++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,o=[],r=0,a=null,l=0,c=!1,u=!1,h=!1,d=!1;l<t.length;)t[l][0]==s?(t[l][1].length<this.Diff_EditCost&&(h||d)?(o[r++]=l,c=h,u=d,a=t[l][1]):(r=0,a=null),h=d=!1):(t[l][0]==n?d=!0:h=!0,a&&(c&&u&&h&&d||a.length<this.Diff_EditCost/2&&c+u+h+d==3)&&(t.splice(o[r-1],0,[n,a]),t[o[r-1]+1][0]=i,r--,a=null,c&&u?(h=d=!0,r=0):(l=--r>0?o[r-1]:-1,h=d=!1),e=!0)),l++;e&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push([s,""]);for(var e,o=0,r=0,a=0,l="",c="";o<t.length;)switch(t[o][0]){case i:a++,c+=t[o][1],o++;break;case n:r++,l+=t[o][1],o++;break;case s:r+a>1?(0!==r&&0!==a&&(0!==(e=this.diff_commonPrefix(c,l))&&(o-r-a>0&&t[o-r-a-1][0]==s?t[o-r-a-1][1]+=c.substring(0,e):(t.splice(0,0,[s,c.substring(0,e)]),o++),c=c.substring(e),l=l.substring(e)),0!==(e=this.diff_commonSuffix(c,l))&&(t[o][1]=c.substring(c.length-e)+t[o][1],c=c.substring(0,c.length-e),l=l.substring(0,l.length-e))),0===r?t.splice(o-a,r+a,[i,c]):0===a?t.splice(o-r,r+a,[n,l]):t.splice(o-r-a,r+a,[n,l],[i,c]),o=o-r-a+(r?1:0)+(a?1:0)+1):0!==o&&t[o-1][0]==s?(t[o-1][1]+=t[o][1],t.splice(o,1)):o++,a=0,r=0,l="",c=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(o=1;o<t.length-1;)t[o-1][0]==s&&t[o+1][0]==s&&(t[o][1].substring(t[o][1].length-t[o-1][1].length)==t[o-1][1]?(t[o][1]=t[o-1][1]+t[o][1].substring(0,t[o][1].length-t[o-1][1].length),t[o+1][1]=t[o-1][1]+t[o+1][1],t.splice(o-1,1),u=!0):t[o][1].substring(0,t[o+1][1].length)==t[o+1][1]&&(t[o-1][1]+=t[o+1][1],t[o][1]=t[o][1].substring(t[o+1][1].length)+t[o+1][1],t.splice(o+1,1),u=!0)),o++;u&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var s,o=0,r=0,a=0,l=0;for(s=0;s<t.length&&(t[s][0]!==i&&(o+=t[s][1].length),t[s][0]!==n&&(r+=t[s][1].length),!(o>e));s++)a=o,l=r;return t.length!=s&&t[s][0]===n?l:l+(e-a)},e.prototype.diff_prettyHtml=function(t){for(var e=[],o=/&/g,r=/</g,a=/>/g,l=/\n/g,c=0;c<t.length;c++){var u=t[c][0],h=t[c][1].replace(o,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(u){case i:e[c]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case n:e[c]='<del style="background:#ffe6e6;">'+h+"</del>";break;case s:e[c]="<span>"+h+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==i&&(e[n]=t[n][1]);return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==n&&(e[i]=t[i][1]);return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,o=0,r=0,a=0;a<t.length;a++){var l=t[a][0],c=t[a][1];switch(l){case i:o+=c.length;break;case n:r+=c.length;break;case s:e+=Math.max(o,r),o=0,r=0}}return e+=Math.max(o,r)},e.prototype.diff_toDelta=function(t){for(var e=[],o=0;o<t.length;o++)switch(t[o][0]){case i:e[o]="+"+encodeURI(t[o][1]);break;case n:e[o]="-"+t[o][1].length;break;case s:e[o]="="+t[o][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,e){for(var o=[],r=0,a=0,l=e.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{o[r++]=[i,decodeURI(u)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var h=parseInt(u,10);if(isNaN(h)||h<0)throw new Error("Invalid number in diff_fromDelta: "+u);var d=t.substring(a,a+=h);"="==l[c].charAt(0)?o[r++]=[s,d]:o[r++]=[n,d];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(a!=t.length)throw new Error("Delta length ("+a+") does not equal source text length ("+t.length+").");return o},e.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},e.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),s=this;function o(t,i){var o=t/e.length,r=Math.abs(n-i);return s.Match_Distance?o+r/s.Match_Distance:r?1:o}var r=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(r=Math.min(o(0,a),r),-1!=(a=t.lastIndexOf(e,n+e.length))&&(r=Math.min(o(0,a),r)));var l,c,u=1<<e.length-1;a=-1;for(var h,d=e.length+t.length,p=0;p<e.length;p++){for(l=0,c=d;l<c;)o(p,n+c)<=r?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var f=Math.max(1,n-c+1),m=Math.min(n+c,t.length)+e.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var _=m;_>=f;_--){var v=i[t.charAt(_-1)];if(g[_]=0===p?(g[_+1]<<1|1)&v:(g[_+1]<<1|1)&v|(h[_+1]|h[_])<<1|1|h[_+1],g[_]&u){var y=o(p,_-1);if(y<=r){if(r=y,!((a=_-1)>n))break;f=Math.max(1,2*n-a)}}}if(o(p+1,n)>r)break;h=g}return a},e.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},e.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var o=e.substring(t.start2-i,t.start2);o&&t.diffs.unshift([s,o]);var r=e.substring(t.start2+t.length1,t.start2+t.length1+i);r&&t.diffs.push([s,r]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+r.length,t.length2+=o.length+r.length}},e.prototype.patch_make=function(t,o,r){var a,l;if("string"==typeof t&&"string"==typeof o&&void 0===r)a=t,(l=this.diff_main(a,o,!0)).length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(t&&"object"==typeof t&&void 0===o&&void 0===r)l=t,a=this.diff_text1(l);else if("string"==typeof t&&o&&"object"==typeof o&&void 0===r)a=t,l=o;else{if("string"!=typeof t||"string"!=typeof o||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");a=t,l=r}if(0===l.length)return[];for(var c=[],u=new e.patch_obj,h=0,d=0,p=0,f=a,m=a,g=0;g<l.length;g++){var _=l[g][0],v=l[g][1];switch(h||_===s||(u.start1=d,u.start2=p),_){case i:u.diffs[h++]=l[g],u.length2+=v.length,m=m.substring(0,p)+v+m.substring(p);break;case n:u.length1+=v.length,u.diffs[h++]=l[g],m=m.substring(0,p)+m.substring(p+v.length);break;case s:v.length<=2*this.Patch_Margin&&h&&l.length!=g+1?(u.diffs[h++]=l[g],u.length1+=v.length,u.length2+=v.length):v.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(u,f),c.push(u),u=new e.patch_obj,h=0,f=m,d=p)}_!==i&&(d+=v.length),_!==n&&(p+=v.length)}return h&&(this.patch_addContext_(u,f),c.push(u)),c},e.prototype.patch_deepCopy=function(t){for(var n=[],i=0;i<t.length;i++){var s=t[i],o=new e.patch_obj;o.diffs=[];for(var r=0;r<s.diffs.length;r++)o.diffs[r]=s.diffs[r].slice();o.start1=s.start1,o.start2=s.start2,o.length1=s.length1,o.length2=s.length2,n[i]=o}return n},e.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var o=this.patch_addPadding(t);e=o+e+o,this.patch_splitMax(t);for(var r=0,a=[],l=0;l<t.length;l++){var c,u,h=t[l].start2+r,d=this.diff_text1(t[l].diffs),p=-1;if(d.length>this.Match_MaxBits?-1!=(c=this.match_main(e,d.substring(0,this.Match_MaxBits),h))&&(-1==(p=this.match_main(e,d.substring(d.length-this.Match_MaxBits),h+d.length-this.Match_MaxBits))||c>=p)&&(c=-1):c=this.match_main(e,d,h),-1==c)a[l]=!1,r-=t[l].length2-t[l].length1;else if(a[l]=!0,r=c-h,d==(u=-1==p?e.substring(c,c+d.length):e.substring(c,p+this.Match_MaxBits)))e=e.substring(0,c)+this.diff_text2(t[l].diffs)+e.substring(c+d.length);else{var f=this.diff_main(d,u,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(f)/d.length>this.Patch_DeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(f);for(var m,g=0,_=0;_<t[l].diffs.length;_++){var v=t[l].diffs[_];v[0]!==s&&(m=this.diff_xIndex(f,g)),v[0]===i?e=e.substring(0,c+m)+v[1]+e.substring(c+m):v[0]===n&&(e=e.substring(0,c+m)+e.substring(c+this.diff_xIndex(f,g+v[1].length))),v[0]!==n&&(g+=v[1].length)}}}}return[e=e.substring(o.length,e.length-o.length),a]},e.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var o=t[0],r=o.diffs;if(0==r.length||r[0][0]!=s)r.unshift([s,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>r[0][1].length){var a=e-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}return 0==(r=(o=t[t.length-1]).diffs).length||r[r.length-1][0]!=s?(r.push([s,n]),o.length1+=e,o.length2+=e):e>r[r.length-1][1].length&&(a=e-r[r.length-1][1].length,r[r.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a),n},e.prototype.patch_splitMax=function(t){for(var o=this.Match_MaxBits,r=0;r<t.length;r++)if(!(t[r].length1<=o)){var a=t[r];t.splice(r--,1);for(var l=a.start1,c=a.start2,u="";0!==a.diffs.length;){var h=new e.patch_obj,d=!0;for(h.start1=l-u.length,h.start2=c-u.length,""!==u&&(h.length1=h.length2=u.length,h.diffs.push([s,u]));0!==a.diffs.length&&h.length1<o-this.Patch_Margin;){var p=a.diffs[0][0],f=a.diffs[0][1];p===i?(h.length2+=f.length,c+=f.length,h.diffs.push(a.diffs.shift()),d=!1):p===n&&1==h.diffs.length&&h.diffs[0][0]==s&&f.length>2*o?(h.length1+=f.length,l+=f.length,d=!1,h.diffs.push([p,f]),a.diffs.shift()):(f=f.substring(0,o-h.length1-this.Patch_Margin),h.length1+=f.length,l+=f.length,p===s?(h.length2+=f.length,c+=f.length):d=!1,h.diffs.push([p,f]),f==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(f.length))}u=(u=this.diff_text2(h.diffs)).substring(u.length-this.Patch_Margin);var m=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==m&&(h.length1+=m.length,h.length2+=m.length,0!==h.diffs.length&&h.diffs[h.diffs.length-1][0]===s?h.diffs[h.diffs.length-1][1]+=m:h.diffs.push([s,m])),d||t.splice(++r,0,h)}}},e.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},e.prototype.patch_fromText=function(t){var o=[];if(!t)return o;for(var r=t.split("\n"),a=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<r.length;){var c=r[a].match(l);if(!c)throw new Error("Invalid patch string: "+r[a]);var u=new e.patch_obj;for(o.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),a++;a<r.length;){var h=r[a].charAt(0);try{var d=decodeURI(r[a].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==h)u.diffs.push([n,d]);else if("+"==h)u.diffs.push([i,d]);else if(" "==h)u.diffs.push([s,d]);else{if("@"==h)break;if(""!==h)throw new Error('Invalid patch mode "'+h+'" in: '+d)}a++}}return o},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case i:t="+";break;case n:t="-";break;case s:t=" "}e[o+1]=t+encodeURI(this.diffs[o][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=e,t.exports.diff_match_patch=e,t.exports.DIFF_DELETE=n,t.exports.DIFF_INSERT=i,t.exports.DIFF_EQUAL=s})),K=2,J=60,X=null,Y=function(t){if(!X){var e=void 0;if("undefined"!=typeof diff_match_patch)e="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(G)try{e=G&&new G}catch(t){e=null}if(!e){if(!t)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}X={diff:function(t,n){return e.patch_toText(e.patch_make(t,n))},patch:function(t,n){for(var i=e.patch_apply(e.patch_fromText(n),t),s=0;s<i[1].length;s++)i[1][s]||(new Error("text patch failed").textPatchFailed=!0);return i[0]}}}return X},Q=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||J;if(t.left.length<e||t.right.length<e)t.setResult([t.left,t.right]).exit();else{var n=Y();if(n){var i=n.diff;t.setResult([i(t.left,t.right),0,K]).exit()}else t.setResult([t.left,t.right]).exit()}}};Q.filterName="texts";var Z=function(t){if(!t.nested&&t.delta[2]===K){var e=Y(!0).patch;t.setResult(e(t.left,t.delta[0])).exit()}};Z.filterName="texts";var tt=function(t){var e=void 0,n=void 0,i=void 0,s=void 0,o=void 0,r=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(e=0,n=(i=t.split("\n")).length;e<n;e++){var l=(s=i[e]).slice(0,1);"@"===l?(r=a.exec(s),i[e]="@@ -"+r[3]+","+r[4]+" +"+r[1]+","+r[2]+" @@"):"+"===l?(i[e]="-"+i[e].slice(1),"+"===i[e-1].slice(0,1)&&(o=i[e],i[e]=i[e-1],i[e-1]=o)):"-"===l&&(i[e]="+"+i[e].slice(1))}return i.join("\n")},et=function(t){t.nested||t.delta[2]===K&&t.setResult([tt(t.delta[0]),0,K]).exit()};et.filterName="texts";var nt=function(){function t(e){i(this,t),this.processor=new u(e),this.processor.pipe(new h("diff").append(k,b,V,Q,S,R).shouldHaveResult()),this.processor.pipe(new h("patch").append(E,H,x,Z,C,F).shouldHaveResult()),this.processor.pipe(new h("reverse").append(D,q,w,et,P,z).shouldHaveResult())}return s(t,[{key:"options",value:function(){var t;return(t=this.processor).options.apply(t,arguments)}},{key:"diff",value:function(t,e){return this.processor.process(new g(t,e))}},{key:"patch",value:function(t,e){return this.processor.process(new _(t,e))}},{key:"reverse",value:function(t){return this.processor.process(new v(t))}},{key:"unpatch",value:function(t,e){return this.patch(t,this.reverse(e))}},{key:"clone",value:function(t){return m(t)}}]),t}(),it="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},st="function"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},ot=function(t){return"_"===t.substr(0,1)?t.slice(1):t},rt=function(t){return"_t"===t?-1:"_"===t.substr(0,1)?parseInt(t.slice(1),10):parseInt(t,10)+.1},at=function(t,e){return rt(t)-rt(e)},lt=function(){function t(){i(this,t)}return s(t,[{key:"format",value:function(t,e){var n={};return this.prepareContext(n),this.recurse(n,t,e),this.finalize(n)}},{key:"prepareContext",value:function(t){t.buffer=[],t.out=function(){var t;(t=this.buffer).push.apply(t,arguments)}}},{key:"typeFormattterNotFound",value:function(t,e){throw new Error("cannot format delta type: "+e)}},{key:"typeFormattterErrorFormatter",value:function(t,e){return e.toString()}},{key:"finalize",value:function(t){var e=t.buffer;if(it(e))return e.join("")}},{key:"recurse",value:function(t,e,n,i,s,o,r){var a=e&&o?o.value:n;if(void 0!==e||void 0!==i){var l=this.getDeltaType(e,o),c="node"===l?"a"===e._t?"array":"object":"";void 0!==i?this.nodeBegin(t,i,s,l,c,r):this.rootBegin(t,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(t,l)).call(this,t,e,a,i,s,o)}catch(n){this.typeFormattterErrorFormatter(t,n,e,a,i,s,o),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==i?this.nodeEnd(t,i,s,l,c,r):this.rootEnd(t,l,c)}}},{key:"formatDeltaChildren",value:function(t,e,n){var i=this;this.forEachDeltaKey(e,n,(function(s,o,r,a){i.recurse(t,e[s],n?n[o]:void 0,s,o,r,a)}))}},{key:"forEachDeltaKey",value:function(t,e,n){var i=st(t),s="a"===t._t,o={},r=void 0;if(void 0!==e)for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(void 0!==t[r]||s&&void 0!==t["_"+r]||i.push(r));for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=t[r];it(a)&&3===a[2]&&(o[a[1].toString()]={key:r,value:e&&e[parseInt(r.substr(1))]},!1!==this.includeMoveDestinations&&void 0===e&&void 0===t[a[1]]&&i.push(a[1].toString()))}s?i.sort(at):i.sort();for(var l=0,c=i.length;l<c;l++){var u=i[l];if(!s||"_t"!==u){var h=s?"number"==typeof u?u:parseInt(ot(u),10):u,d=l===c-1;n(u,h,o[h],d)}}}},{key:"getDeltaType",value:function(t,e){if(void 0===t)return void 0!==e?"movedestination":"unchanged";if(it(t)){if(1===t.length)return"added";if(2===t.length)return"modified";if(3===t.length&&0===t[2])return"deleted";if(3===t.length&&2===t[2])return"textdiff";if(3===t.length&&3===t[2])return"moved"}else if("object"===(void 0===t?"undefined":n(t)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(t){for(var e=[],n=t.split("\n@@ "),i=0,s=n.length;i<s;i++){var o=n[i],r={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(o).slice(1);r.location={line:a[0],chr:a[1]};for(var l=o.split("\n").slice(1),c=0,u=l.length;c<u;c++){var h=l[c];if(h.length){var d={type:"context"};"+"===h.substr(0,1)?d.type="added":"-"===h.substr(0,1)&&(d.type="deleted"),d.text=h.slice(1),r.pieces.push(d)}}e.push(r)}return e}}]),t}(),ct=Object.freeze({default:lt}),ut=function(t){function e(){return i(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"typeFormattterErrorFormatter",value:function(t,e){t.out('<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatValue",value:function(t,e){t.out("<pre>"+ht(JSON.stringify(e,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,s=n.length;i<s;i++){var o=n[i];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var r=o.pieces,a=0,l=r.length;a<l;a++){var c=r[a];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+ht(decodeURI(c.text))+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,n){var i="jsondiffpatch-"+e+(n?" jsondiffpatch-child-node-type-"+n:"");t.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(t){t.out("</div>"+(t.hasArrows?'<script type="text/javascript">setTimeout('+dt.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(t,e,n,i,s){var o="jsondiffpatch-"+i+(s?" jsondiffpatch-child-node-type-"+s:"");t.out('<li class="'+o+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(t){t.out("</li>")}},{key:"format_unchanged",value:function(t,e,n){void 0!==n&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,n),t.out("</div>"))}},{key:"format_movedestination",value:function(t,e,n){void 0!==n&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,n),t.out("</div>"))}},{key:"format_node",value:function(t,e,n){var i="a"===e._t?"array":"object";t.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(t,e,n),t.out("</ul>")}},{key:"format_added",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_modified",value:function(t,e){t.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(t,e[1]),t.out("</div>")}},{key:"format_deleted",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_moved",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-moved-destination">'+e[1]+"</div>"),t.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),t.hasArrows=!0}},{key:"format_textdiff",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(t,e[0]),t.out("</div>")}}]),e}(lt);function ht(t){for(var e=t,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],i=0;i<n.length;i++)e=e.replace(n[i][0],n[i][1]);return e}var dt=function(t){var e=t||document,n=function(t){var e=t.textContent,n=t.innerText;return e||n},i=function(t,e){for(var n=t.children,i=0,s=n.length;i<s;i++)e(n[i],i)};!function(t,e,n){for(var i=t.querySelectorAll(e),s=0,o=i.length;s<o;s++)n(i[s])}(e,".jsondiffpatch-arrow",(function(t){var e=t.parentNode,s=t.children,o=t.style,r=e,a=s[0],l=a.children[1];a.style.display="none";var c=n(r.querySelector(".jsondiffpatch-moved-destination")),u=r.parentNode,h=void 0;if(i(u,(function(t){t.getAttribute("data-key")===c&&(h=t)})),h)try{var d=h.offsetTop-r.offsetTop;a.setAttribute("height",Math.abs(d)+6),o.top=-8+(d>0?0:d)+"px";var p=d>0?"M30,0 Q-10,"+Math.round(d/2)+" 26,"+(d-4):"M30,"+-d+" Q-10,"+Math.round(-d/2)+" 26,4";l.setAttribute("d",p),a.style.display=""}catch(t){}}))},pt=function(t,e,n){var i=e||document.body,s="jsondiffpatch-unchanged-",o={showing:s+"showing",hiding:s+"hiding",visible:s+"visible",hidden:s+"hidden"},r=i.classList;if(r){if(!n)return r.remove(o.showing),r.remove(o.hiding),r.remove(o.visible),r.remove(o.hidden),void(!1===t&&r.add(o.hidden));!1===t?(r.remove(o.showing),r.add(o.visible),setTimeout((function(){r.add(o.hiding)}),10)):(r.remove(o.hiding),r.add(o.showing),r.remove(o.hidden));var a=setInterval((function(){dt(i)}),100);setTimeout((function(){r.remove(o.showing),r.remove(o.hiding),!1===t?(r.add(o.hidden),r.remove(o.visible)):(r.add(o.visible),r.remove(o.hidden)),setTimeout((function(){r.remove(o.visible),clearInterval(a)}),n+400)}),n)}},ft=function(t,e){return pt(!1,t,e)},mt=void 0;function gt(t,e){return mt||(mt=new ut),mt.format(t,e)}var _t=Object.freeze({showUnchanged:pt,hideUnchanged:ft,default:ut,format:gt}),vt=function(t){function e(){i(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return r(e,t),s(e,[{key:"prepareContext",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},t.row=function(e,n){t.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),t.out(t.indentPad),t.out('</pre><pre style="display: inline-block">'),t.out(e),t.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),t.out(n),t.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.row("",'<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,s=n.length;i<s;i++){var o=n[i];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var r=o.pieces,a=0,l=r.length;a<l;a++){var c=r[a];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,n){t.out('<table class="jsondiffpatch-annotated-delta">'),"node"===e&&(t.row("{"),t.indent()),"array"===n&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(t,e){"node"===e&&(t.indent(-1),t.row("}")),t.out("</table>")}},{key:"nodeBegin",value:function(t,e,n,i,s){t.row("&quot;"+e+"&quot;: {"),"node"===i&&t.indent(),"array"===s&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(t,e,n,i,s,o){"node"===i&&t.indent(-1),t.row("}"+(o?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}}]),e}(lt),yt=function(t){return'<pre style="display:inline-block">&quot;'+t+"&quot;</pre>"},bt={added:function(t,e,n,i){var s=" <pre>([newValue])</pre>";return void 0===i?"new value"+s:"number"==typeof i?"insert at index "+i+s:"add property "+yt(i)+s},modified:function(t,e,n,i){var s=" <pre>([previousValue, newValue])</pre>";return void 0===i?"modify value"+s:"number"==typeof i?"modify at index "+i+s:"modify property "+yt(i)+s},deleted:function(t,e,n,i){var s=" <pre>([previousValue, 0, 0])</pre>";return void 0===i?"delete value"+s:"number"==typeof i?"remove index "+i+s:"delete property "+yt(i)+s},moved:function(t,e,n,i){return'move from <span title="(position to remove at original state)">index '+i+'</span> to <span title="(position to insert at final state)">index '+t[1]+"</span>"},textdiff:function(t,e,n,i){return"text diff"+(void 0===i?"":"number"==typeof i?" at index "+i:" at property "+yt(i))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},xt=function(t,e){var n=this.getDeltaType(e),i=bt[n],s=i&&i.apply(i,Array.prototype.slice.call(arguments,1)),o=JSON.stringify(e,null,2);"textdiff"===n&&(o=o.split("\\n").join('\\n"+\n   "')),t.indent(),t.row(o,s),t.indent(-1)};vt.prototype.format_added=xt,vt.prototype.format_modified=xt,vt.prototype.format_deleted=xt,vt.prototype.format_moved=xt,vt.prototype.format_textdiff=xt;var wt=void 0;function kt(t,e){return wt||(wt=new vt),wt.format(t,e)}var St=Object.freeze({default:vt,format:kt}),Ct={add:"add",remove:"remove",replace:"replace",move:"move"},Et=function(t){function e(){i(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!0,t}return r(e,t),s(e,[{key:"prepareContext",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.result=[],t.path=[],t.pushCurrentOp=function(t){var e=t.op,n=t.value,i={op:e,path:this.currentPath()};void 0!==n&&(i.value=n),this.result.push(i)},t.pushMoveOp=function(t){var e=this.currentPath();this.result.push({op:Ct.move,from:e,path:this.toPath(t)})},t.currentPath=function(){return"/"+this.path.join("/")},t.toPath=function(t){var e=this.path.slice();return e[e.length-1]=t,"/"+e.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.out("[ERROR] "+e)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(t,e,n){t.path.push(n)}},{key:"nodeEnd",value:function(t){t.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}},{key:"format_added",value:function(t,e){t.pushCurrentOp({op:Ct.add,value:e[0]})}},{key:"format_modified",value:function(t,e){t.pushCurrentOp({op:Ct.replace,value:e[1]})}},{key:"format_deleted",value:function(t){t.pushCurrentOp({op:Ct.remove})}},{key:"format_moved",value:function(t,e){var n=e[1];t.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(t,e){var n={};return this.prepareContext(n),this.recurse(n,t,e),n.result}}]),e}(lt),Pt=function(t){return t[t.length-1]},Dt=function(t,e){return t.sort(e),t},Tt=function(t,e){var n=parseInt(t,10),i=parseInt(e,10);return isNaN(n)||isNaN(i)?0:i-n},$t=function(t){return Dt(t,(function(t,e){var n=t.path.split("/"),i=e.path.split("/");return n.length!==i.length?n.length-i.length:Tt(Pt(n),Pt(i))}))},Ot=function(t,e){var n=Array(e.length+1).fill().map((function(){return[]}));return t.map((function(t){var n=e.map((function(e){return e(t)})).indexOf(!0);return n<0&&(n=e.length),{item:t,position:n}})).reduce((function(t,e){return t[e.position].push(e.item),t}),n)},At=function(t){return"move"===t.op},Nt=function(t){return"remove"===t.op},jt=function(t){var e=Ot(t,[At,Nt]),n=l(e,3),i=n[0],s=n[1],o=n[2],r=$t(s);return[].concat(c(r),c(i),c(o))},Mt=void 0,It=function(t,e){return Mt||(Mt=new Et),jt(Mt.format(t,e))},Lt=function(t,e){console.log(It(t,e))},Rt=Object.freeze({default:Et,partitionOps:Ot,format:It,log:Lt});function Bt(t){return e&&e[t]||function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}}var Ft={added:Bt("green"),deleted:Bt("red"),movedestination:Bt("gray"),moved:Bt("yellow"),unchanged:Bt("gray"),error:Bt("white.bgRed"),textDiffLine:Bt("gray")},Ht=function(t){function e(){i(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return r(e,t),s(e,[{key:"prepareContext",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},t.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},t.out=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,s=e.length;i<s;i++){var o=e[i].split("\n").join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(o=this.color[0](o)),this.buffer.push(o)}},t.pushColor=function(t){this.color=this.color||[],this.color.unshift(t)},t.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.pushColor(Ft.error),t.out("[ERROR]"+e),t.popColor()}},{key:"formatValue",value:function(t,e){t.out(JSON.stringify(e,null,2))}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.indent();for(var i=0,s=n.length;i<s;i++){var o=n[i];t.pushColor(Ft.textDiffLine),t.out(o.location.line+","+o.location.chr+" "),t.popColor();for(var r=o.pieces,a=0,l=r.length;a<l;a++){var c=r[a];t.pushColor(Ft[c.type]),t.out(c.text),t.popColor()}i<s-1&&t.outLine()}t.indent(-1)}},{key:"rootBegin",value:function(t,e,n){t.pushColor(Ft[e]),"node"===e&&(t.out("array"===n?"[":"{"),t.indent())}},{key:"rootEnd",value:function(t,e,n){"node"===e&&(t.indent(-1),t.out("array"===n?"]":"}")),t.popColor()}},{key:"nodeBegin",value:function(t,e,n,i,s){t.pushColor(Ft[i]),t.out(n+": "),"node"===i&&(t.out("array"===s?"[":"{"),t.indent())}},{key:"nodeEnd",value:function(t,e,n,i,s,o){"node"===i&&(t.indent(-1),t.out("array"===s?"]":"}"+(o?"":","))),o||t.outLine(),t.popColor()}},{key:"format_unchanged",value:function(t,e,n){void 0!==n&&this.formatValue(t,n)}},{key:"format_movedestination",value:function(t,e,n){void 0!==n&&this.formatValue(t,n)}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}},{key:"format_added",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_modified",value:function(t,e){t.pushColor(Ft.deleted),this.formatValue(t,e[0]),t.popColor(),t.out(" => "),t.pushColor(Ft.added),this.formatValue(t,e[1]),t.popColor()}},{key:"format_deleted",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_moved",value:function(t,e){t.out("==> "+e[1])}},{key:"format_textdiff",value:function(t,e){this.formatTextDiffString(t,e[0])}}]),e}(lt),zt=void 0,Wt=function(t,e){return zt||(zt=new Ht),zt.format(t,e)};function qt(t,e){console.log(Wt(t,e))}var Vt=Object.freeze({default:Ht,format:Wt,log:qt}),Ut=Object.freeze({base:ct,html:_t,annotated:St,jsonpatch:Rt,console:Vt});function Gt(t,e){var n=void 0;return"string"==typeof e&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6],+(n[7]||0))):e}function Kt(t){return new nt(t)}var Jt=void 0;function Xt(){return Jt||(Jt=new nt),Jt.diff.apply(Jt,arguments)}function Yt(){return Jt||(Jt=new nt),Jt.patch.apply(Jt,arguments)}function Qt(){return Jt||(Jt=new nt),Jt.unpatch.apply(Jt,arguments)}function Zt(){return Jt||(Jt=new nt),Jt.reverse.apply(Jt,arguments)}function te(){return Jt||(Jt=new nt),Jt.clone.apply(Jt,arguments)}t.DiffPatcher=nt,t.formatters=Ut,t.console=Vt,t.create=Kt,t.dateReviver=Gt,t.diff=Xt,t.patch=Yt,t.unpatch=Qt,t.reverse=Zt,t.clone=te,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(2837))},9462:t=>{t.exports=function(t){var e=[];return t=void 0===t?null:t,n.set=function(n){t=n,e.forEach((function(t){t(n)}))},n;function n(n){return n?(e.push(n),function(){e.splice(e.indexOf(n),1)}):t}}},6470:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function n(t,e){for(var n,i="",s=0,o=-1,r=0,a=0;a<=t.length;++a){if(a<t.length)n=t.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===r);else if(o!==a-1&&2===r){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",s=0):s=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),o=a,r=0;continue}}else if(2===i.length||1===i.length){i="",s=0,o=a,r=0;continue}e&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+t.slice(o+1,a):i=t.slice(o+1,a),s=a-o-1;o=a,r=0}else 46===n&&-1!==r?++r:r=-1}return i}var i={resolve:function(){for(var t,i="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var r;o>=0?r=arguments[o]:(void 0===t&&(t=process.cwd()),r=t),e(r),0!==r.length&&(i=r+"/"+i,s=47===r.charCodeAt(0))}return i=n(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(t){if(e(t),0===t.length)return".";var i=47===t.charCodeAt(0),s=47===t.charCodeAt(t.length-1);return 0!==(t=n(t,!i)).length||i||(t="."),t.length>0&&s&&(t+="/"),i?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,n=0;n<arguments.length;++n){var s=arguments[n];e(s),s.length>0&&(void 0===t?t=s:t+="/"+s)}return void 0===t?".":i.normalize(t)},relative:function(t,n){if(e(t),e(n),t===n)return"";if((t=i.resolve(t))===(n=i.resolve(n)))return"";for(var s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var o=t.length,r=o-s,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var l=n.length-a,c=r<l?r:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===n.charCodeAt(a+h))return n.slice(a+h+1);if(0===h)return n.slice(a+h)}else r>c&&(47===t.charCodeAt(s+h)?u=h:0===h&&(u=0));break}var d=t.charCodeAt(s+h);if(d!==n.charCodeAt(a+h))break;47===d&&(u=h)}var p="";for(h=s+u+1;h<=o;++h)h!==o&&47!==t.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var n=t.charCodeAt(0),i=47===n,s=-1,o=!0,r=t.length-1;r>=1;--r)if(47===(n=t.charCodeAt(r))){if(!o){s=r;break}}else o=!1;return-1===s?i?"/":".":i&&1===s?"//":t.slice(0,s)},basename:function(t,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');e(t);var i,s=0,o=-1,r=!0;if(void 0!==n&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var a=n.length-1,l=-1;for(i=t.length-1;i>=0;--i){var c=t.charCodeAt(i);if(47===c){if(!r){s=i+1;break}}else-1===l&&(r=!1,l=i+1),a>=0&&(c===n.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=l))}return s===o?o=l:-1===o&&(o=t.length),t.slice(s,o)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!r){s=i+1;break}}else-1===o&&(r=!1,o=i+1);return-1===o?"":t.slice(s,o)},extname:function(t){e(t);for(var n=-1,i=0,s=-1,o=!0,r=0,a=t.length-1;a>=0;--a){var l=t.charCodeAt(a);if(47!==l)-1===s&&(o=!1,s=a+1),46===l?-1===n?n=a:1!==r&&(r=1):-1!==n&&(r=-1);else if(!o){i=a+1;break}}return-1===n||-1===s||0===r||1===r&&n===s-1&&n===i+1?"":t.slice(n,s)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+i:n+t+i:i}("/",t)},parse:function(t){e(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return n;var i,s=t.charCodeAt(0),o=47===s;o?(n.root="/",i=1):i=0;for(var r=-1,a=0,l=-1,c=!0,u=t.length-1,h=0;u>=i;--u)if(47!==(s=t.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===s?-1===r?r=u:1!==h&&(h=1):-1!==r&&(h=-1);else if(!c){a=u+1;break}return-1===r||-1===l||0===h||1===h&&r===l-1&&r===a+1?-1!==l&&(n.base=n.name=0===a&&o?t.slice(1,l):t.slice(a,l)):(0===a&&o?(n.name=t.slice(1,r),n.base=t.slice(1,l)):(n.name=t.slice(a,r),n.base=t.slice(a,l)),n.ext=t.slice(r,l)),a>0?n.dir=t.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,t.exports=i},2587:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,i,s){n=n||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var r=/\+/g;t=t.split(n);var a=1e3;s&&"number"==typeof s.maxKeys&&(a=s.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var c=0;c<l;++c){var u,h,d,p,f=t[c].replace(r,"%20"),m=f.indexOf(i);m>=0?(u=f.substr(0,m),h=f.substr(m+1)):(u=f,h=""),d=decodeURIComponent(u),p=decodeURIComponent(h),e(o,d)?Array.isArray(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o}},2361:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,i,s){return n=n||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(s){var o=encodeURIComponent(e(s))+i;return Array.isArray(t[s])?t[s].map((function(t){return o+encodeURIComponent(e(t))})).join(n):o+encodeURIComponent(e(t[s]))})).join(n):s?encodeURIComponent(e(s))+i+encodeURIComponent(e(t)):""}},7673:(t,e,n)=>{"use strict";e.decode=e.parse=n(2587),e.encode=e.stringify=n(2361)},9293:function(){
/**
@license Sticky-kit v1.1.3 | MIT | Leaf Corcoran 2015 | http://leafo.net
 */
(function(){var t,e;t=window.jQuery,e=t(window),t.fn.stick_in_parent=function(n){var i,s,o,r,a,l,c,u,h,d,p,f,m;for(null==n&&(n={}),m=n.sticky_class,l=n.inner_scrolling,f=n.recalc_every,p=n.parent,h=n.offset_top,u=n.spacer,o=n.bottoming,null==h&&(h=0),null==p&&(p=void 0),null==l&&(l=!0),null==m&&(m="is_stuck"),i=t(document),null==o&&(o=!0),d=function(t){var e,n;return window.getComputedStyle?(t[0],e=window.getComputedStyle(t[0]),n=parseFloat(e.getPropertyValue("width"))+parseFloat(e.getPropertyValue("margin-left"))+parseFloat(e.getPropertyValue("margin-right")),"border-box"!==e.getPropertyValue("box-sizing")&&(n+=parseFloat(e.getPropertyValue("border-left-width"))+parseFloat(e.getPropertyValue("border-right-width"))+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))),n):t.outerWidth(!0)},r=function(n,s,r,a,c,g,_,v){var y,b,x,w,k,S,C,E,P,D,T,$;if(!n.data("sticky_kit")){if(n.data("sticky_kit",!0),k=i.height(),C=n.parent(),null!=p&&(C=C.closest(p)),!C.length)throw"failed to find stick parent";if(x=!1,y=!1,(T=null!=u?u&&n.closest(u):t("<div />"))&&T.css("position",n.css("position")),(E=function(){var t,e,o;if(!v)return k=i.height(),t=parseInt(C.css("border-top-width"),10),e=parseInt(C.css("padding-top"),10),s=parseInt(C.css("padding-bottom"),10),r=C.offset().top+t+e,a=C.height(),x&&(x=!1,y=!1,null==u&&(n.insertAfter(T),T.detach()),n.css({position:"",top:"",width:"",bottom:""}).removeClass(m),o=!0),c=n.offset().top-(parseInt(n.css("margin-top"),10)||0)-h,g=n.outerHeight(!0),_=n.css("float"),T&&T.css({width:d(n),height:g,display:n.css("display"),"vertical-align":n.css("vertical-align"),float:_}),o?$():void 0})(),g!==a)return w=void 0,S=h,D=f,$=function(){var t,d,p,b,P,$;if(!v)return p=!1,null!=D&&(D-=1)<=0&&(D=f,E(),p=!0),p||i.height()===k||(E(),p=!0),b=e.scrollTop(),null!=w&&(d=b-w),w=b,x?(o&&(P=b+g+S>a+r,y&&!P&&(y=!1,n.css({position:"fixed",bottom:"",top:S}).trigger("sticky_kit:unbottom"))),b<c&&(x=!1,S=h,null==u&&("left"!==_&&"right"!==_||n.insertAfter(T),T.detach()),t={position:"",width:"",top:""},n.css(t).removeClass(m).trigger("sticky_kit:unstick")),l&&($=e.height(),g+h>$&&(y||(S-=d,S=Math.max($-g,S),S=Math.min(h,S),x&&n.css({top:S+"px"}))))):b>c&&(x=!0,(t={position:"fixed",top:S}).width="border-box"===n.css("box-sizing")?n.outerWidth()+"px":n.width()+"px",n.css(t).addClass(m),null==u&&(n.after(T),"left"!==_&&"right"!==_||T.append(n)),n.trigger("sticky_kit:stick")),x&&o&&(null==P&&(P=b+g+S>a+r),!y&&P)?(y=!0,"static"===C.css("position")&&C.css({position:"relative"}),n.css({position:"absolute",bottom:s,top:"auto"}).trigger("sticky_kit:bottom")):void 0},P=function(){return E(),$()},b=function(){if(v=!0,e.off("touchmove",$),e.off("scroll",$),e.off("resize",P),t(document.body).off("sticky_kit:recalc",P),n.off("sticky_kit:detach",b),n.removeData("sticky_kit"),n.css({position:"",bottom:"",top:"",width:""}),C.position("position",""),x)return null==u&&("left"!==_&&"right"!==_||n.insertAfter(T),T.remove()),n.removeClass(m)},e.on("touchmove",$),e.on("scroll",$),e.on("resize",P),t(document.body).on("sticky_kit:recalc",P),n.on("sticky_kit:detach",b),setTimeout($,0)}},a=0,c=this.length;a<c;a++)s=this[a],r(t(s));return this}}).call(this)},9623:t=>{t.exports=function(t,e){var n,i,s,o,r=0;return function(){n=this,i=arguments;var t=new Date-r;return o||(t>=e?a():o=setTimeout(a,e-t)),s};function a(){o=0,r=+new Date,s=t.apply(n,i),n=null,i=null}}},540:function(t,e){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var i=e.length-1,s=1;s<i;++s)e[s]=e[s].slice(1,-1);return e[i]=e[i].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function i(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function s(t){return t.toUpperCase()}function o(t){return null!=t?t instanceof Array?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[]}function r(t,e){var n=t;if(e)for(var i in e)n[i]=e[i];return n}function a(t){var i="[A-Za-z]",s="[0-9]",o=e(s,"[A-Fa-f]"),r=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=e("[\\:\\/\\?\\#\\[\\]\\@]",a),c=t?"[\\uE000-\\uF8FF]":"[]",u=e(i,s,"[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=n(i+e(i,s,"[\\+\\-\\.]")+"*"),d=n(n(r+"|"+e(u,a,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4]"+s)+"|"+n("1"+s+s)+"|"+n("[1-9]"+s)+"|"+s),n(n("25[0-5]")+"|"+n("2[0-4]"+s)+"|"+n("1"+s+s)+"|"+n("0?[1-9]"+s)+"|0?0?"+s)),f=n(p+"\\."+p+"\\."+p+"\\."+p),m=n(o+"{1,4}"),g=n(n(m+"\\:"+m)+"|"+f),_=n(n(m+"\\:")+"{6}"+g),v=n("\\:\\:"+n(m+"\\:")+"{5}"+g),y=n(n(m)+"?\\:\\:"+n(m+"\\:")+"{4}"+g),b=n(n(n(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+n(m+"\\:")+"{3}"+g),x=n(n(n(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+n(m+"\\:")+"{2}"+g),w=n(n(n(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+g),k=n(n(n(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+g),S=n(n(n(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),C=n(n(n(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),E=n([_,v,y,b,x,w,k,S,C].join("|")),P=n(n(u+"|"+r)+"+"),D=(n(E+"\\%25"+P),n(E+n("\\%25|\\%(?!"+o+"{2})")+P)),T=n("[vV]"+o+"+\\."+e(u,a,"[\\:]")+"+"),$=n("\\["+n(D+"|"+E+"|"+T)+"\\]"),O=n(n(r+"|"+e(u,a))+"*"),A=n($+"|"+f+"(?!"+O+")|"+O),N=n(s+"*"),j=n(n(d+"@")+"?"+A+n("\\:"+N)+"?"),M=n(r+"|"+e(u,a,"[\\:\\@]")),I=n(M+"*"),L=n(M+"+"),R=n(n(r+"|"+e(u,a,"[\\@]"))+"+"),B=n(n("\\/"+I)+"*"),F=n("\\/"+n(L+B)+"?"),H=n(R+B),z=n(L+B),W="(?!"+M+")",q=(n(B+"|"+F+"|"+H+"|"+z+"|"+W),n(n(M+"|"+e("[\\/\\?]",c))+"*")),V=n(n(M+"|[\\/\\?]")+"*"),U=n(n("\\/\\/"+j+B)+"|"+F+"|"+z+"|"+W),G=n(h+"\\:"+U+n("\\?"+q)+"?"+n("\\#"+V)+"?"),K=n(n("\\/\\/"+j+B)+"|"+F+"|"+H+"|"+W),J=n(K+n("\\?"+q)+"?"+n("\\#"+V)+"?");return n(G+"|"+J),n(h+"\\:"+U+n("\\?"+q)+"?"),n(n("\\/\\/("+n("("+d+")@")+"?("+A+")"+n("\\:("+N+")")+"?)")+"?("+B+"|"+F+"|"+z+"|"+W+")"),n("\\?("+q+")"),n("\\#("+V+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+A+")"+n("\\:("+N+")")+"?)")+"?("+B+"|"+F+"|"+H+"|"+W+")"),n("\\?("+q+")"),n("\\#("+V+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+A+")"+n("\\:("+N+")")+"?)")+"?("+B+"|"+F+"|"+z+"|"+W+")"),n("\\?("+q+")"),n("\\#("+V+")"),n("("+d+")@"),n("\\:("+N+")"),{NOT_SCHEME:new RegExp(e("[^]",i,s,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(e("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(r,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+P+")")+"?\\]?$")}}var l=a(!1),c=a(!0),u=function(){function t(t,e){var n=[],i=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},d=2147483647,p=36,f=1,m=26,g=38,_=700,v=72,y=128,b="-",x=/^xn--/,w=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=p-f,E=Math.floor,P=String.fromCharCode;function D(t){throw new RangeError(S[t])}function T(t,e){for(var n=[],i=t.length;i--;)n[i]=e(t[i]);return n}function $(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+T((t=t.replace(k,".")).split("."),e).join(".")}function O(t){for(var e=[],n=0,i=t.length;n<i;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&s)<<10)+(1023&o)+65536):(e.push(s),n--)}else e.push(s)}return e}var A=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:p},N=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},j=function(t,e,n){var i=0;for(t=n?E(t/_):t>>1,t+=E(t/e);t>C*m>>1;i+=p)t=E(t/C);return E(i+(C+1)*t/(t+g))},M=function(t){var e=[],n=t.length,i=0,s=y,o=v,r=t.lastIndexOf(b);r<0&&(r=0);for(var a=0;a<r;++a)t.charCodeAt(a)>=128&&D("not-basic"),e.push(t.charCodeAt(a));for(var l=r>0?r+1:0;l<n;){for(var c=i,u=1,h=p;;h+=p){l>=n&&D("invalid-input");var g=A(t.charCodeAt(l++));(g>=p||g>E((d-i)/u))&&D("overflow"),i+=g*u;var _=h<=o?f:h>=o+m?m:h-o;if(g<_)break;var x=p-_;u>E(d/x)&&D("overflow"),u*=x}var w=e.length+1;o=j(i-c,w,0==c),E(i/w)>d-s&&D("overflow"),s+=E(i/w),i%=w,e.splice(i++,0,s)}return String.fromCodePoint.apply(String,e)},I=function(t){var e=[],n=(t=O(t)).length,i=y,s=0,o=v,r=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var h=c.value;h<128&&e.push(P(h))}}catch(t){a=!0,l=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw l}}var g=e.length,_=g;for(g&&e.push(b);_<n;){var x=d,w=!0,k=!1,S=void 0;try{for(var C,T=t[Symbol.iterator]();!(w=(C=T.next()).done);w=!0){var $=C.value;$>=i&&$<x&&(x=$)}}catch(t){k=!0,S=t}finally{try{!w&&T.return&&T.return()}finally{if(k)throw S}}var A=_+1;x-i>E((d-s)/A)&&D("overflow"),s+=(x-i)*A,i=x;var M=!0,I=!1,L=void 0;try{for(var R,B=t[Symbol.iterator]();!(M=(R=B.next()).done);M=!0){var F=R.value;if(F<i&&++s>d&&D("overflow"),F==i){for(var H=s,z=p;;z+=p){var W=z<=o?f:z>=o+m?m:z-o;if(H<W)break;var q=H-W,V=p-W;e.push(P(N(W+q%V,0))),H=E(q/V)}e.push(P(N(H,0))),o=j(s,A,_==g),s=0,++_}}}catch(t){I=!0,L=t}finally{try{!M&&B.return&&B.return()}finally{if(I)throw L}}++s,++i}return e.join("")},L=function(t){return $(t,(function(t){return x.test(t)?M(t.slice(4).toLowerCase()):t}))},R=function(t){return $(t,(function(t){return w.test(t)?"xn--"+I(t):t}))},B={version:"2.1.0",ucs2:{decode:O,encode:function(t){return String.fromCodePoint.apply(String,h(t))}},decode:M,encode:I,toASCII:R,toUnicode:L},F={};function H(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function z(t){for(var e="",n=0,i=t.length;n<i;){var s=parseInt(t.substr(n+1,2),16);if(s<128)e+=String.fromCharCode(s),n+=3;else if(s>=194&&s<224){if(i-n>=6){var o=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&s)<<6|63&o)}else e+=t.substr(n,6);n+=6}else if(s>=224){if(i-n>=9){var r=parseInt(t.substr(n+4,2),16),a=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function W(t,e){function n(t){var n=z(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,H).replace(e.PCT_ENCODED,s)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,H).replace(e.PCT_ENCODED,s)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,H).replace(e.PCT_ENCODED,s)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,H).replace(e.PCT_ENCODED,s)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,H).replace(e.PCT_ENCODED,s)),t}function q(t){return t.replace(/^0*(.*)/,"$1")||"0"}function V(t,e){var n=t.match(e.IPV4ADDRESS)||[],i=u(n,2)[1];return i?i.split(".").map(q).join("."):t}function U(t,e){var n=t.match(e.IPV6ADDRESS)||[],i=u(n,3),s=i[1],o=i[2];if(s){for(var r=s.toLowerCase().split("::").reverse(),a=u(r,2),l=a[0],c=a[1],h=c?c.split(":").map(q):[],d=l.split(":").map(q),p=e.IPV4ADDRESS.test(d[d.length-1]),f=p?7:8,m=d.length-f,g=Array(f),_=0;_<f;++_)g[_]=h[_]||d[m+_]||"";p&&(g[f-1]=V(g[f-1],e));var v=g.reduce((function(t,e,n){if(!e||"0"===e){var i=t[t.length-1];i&&i.index+i.length===n?i.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],y=void 0;if(v&&v.length>1){var b=g.slice(0,v.index),x=g.slice(v.index+v.length);y=b.join(":")+"::"+x.join(":")}else y=g.join(":");return o&&(y+="%"+o),y}return t}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,K=void 0==="".match(/(){0}/)[1];function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==e.iri?c:l;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var s=t.match(G);if(s){K?(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5])):(n.scheme=s[1]||void 0,n.userinfo=-1!==t.indexOf("@")?s[3]:void 0,n.host=-1!==t.indexOf("//")?s[4]:void 0,n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=-1!==t.indexOf("?")?s[7]:void 0,n.fragment=-1!==t.indexOf("#")?s[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),n.host&&(n.host=U(V(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var o=F[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)W(n,i);else{if(n.host&&(e.domainHost||o&&o.domainHost))try{n.host=B.toASCII(n.host.replace(i.PCT_ENCODED,z).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}W(n,l)}o&&o.parse&&o.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}function X(t,e){var n=!1!==e.iri?c:l,i=[];return void 0!==t.userinfo&&(i.push(t.userinfo),i.push("@")),void 0!==t.host&&i.push(U(V(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"!=typeof t.port&&"string"!=typeof t.port||(i.push(":"),i.push(String(t.port))),i.length?i.join(""):void 0}var Y=/^\.\.?\//,Q=/^\/\.(\/|$)/,Z=/^\/\.\.(\/|$)/,tt=/^\/?(?:.|\n)*?(?=\/|$)/;function et(t){for(var e=[];t.length;)if(t.match(Y))t=t.replace(Y,"");else if(t.match(Q))t=t.replace(Q,"/");else if(t.match(Z))t=t.replace(Z,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(tt);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];t=t.slice(i.length),e.push(i)}return e.join("")}function nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?c:l,i=[],s=F[(e.scheme||t.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||s&&s.domainHost)try{t.host=e.iri?B.toUnicode(t.host):B.toASCII(t.host.replace(n.PCT_ENCODED,z).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}W(t,n),"suffix"!==e.reference&&t.scheme&&(i.push(t.scheme),i.push(":"));var o=X(t,e);if(void 0!==o&&("suffix"!==e.reference&&i.push("//"),i.push(o),t.path&&"/"!==t.path.charAt(0)&&i.push("/")),void 0!==t.path){var r=t.path;e.absolutePath||s&&s.absolutePath||(r=et(r)),void 0===o&&(r=r.replace(/^\/\//,"/%2F")),i.push(r)}return void 0!==t.query&&(i.push("?"),i.push(t.query)),void 0!==t.fragment&&(i.push("#"),i.push(t.fragment)),i.join("")}function it(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(t=J(nt(t,n),n),e=J(nt(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=et(e.path||""),i.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=et(e.path||""),i.query=e.query):(e.path?("/"===e.path.charAt(0)?i.path=et(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path:i.path="/"+e.path,i.path=et(i.path)),i.query=e.query):(i.path=t.path,void 0!==e.query?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function st(t,e,n){var i=r({scheme:"null"},n);return nt(it(J(t,i),J(e,i),i,!0),i)}function ot(t,e){return"string"==typeof t?t=nt(J(t,e),e):"object"===i(t)&&(t=J(nt(t,e),e)),t}function rt(t,e,n){return"string"==typeof t?t=nt(J(t,n),n):"object"===i(t)&&(t=nt(t,n)),"string"==typeof e?e=nt(J(e,n),n):"object"===i(e)&&(e=nt(e,n)),t===e}function at(t,e){return t&&t.toString().replace(e&&e.iri?c.ESCAPE:l.ESCAPE,H)}function lt(t,e){return t&&t.toString().replace(e&&e.iri?c.PCT_ENCODED:l.PCT_ENCODED,z)}var ct={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){var n="https"===String(t.scheme).toLowerCase();return t.port!==(n?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},ut={scheme:"https",domainHost:ct.domainHost,parse:ct.parse,serialize:ct.serialize};function ht(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}var dt={scheme:"ws",domainHost:!0,parse:function(t,e){var n=t;return n.secure=ht(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(t,e){if(t.port!==(ht(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){var n=t.resourceName.split("?"),i=u(n,2),s=i[0],o=i[1];t.path=s&&"/"!==s?s:void 0,t.query=o,t.resourceName=void 0}return t.fragment=void 0,t}},pt={scheme:"wss",domainHost:dt.domainHost,parse:dt.parse,serialize:dt.serialize},ft={},mt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",gt="[0-9A-Fa-f]",_t=n(n("%[EFef]"+gt+"%"+gt+gt+"%"+gt+gt)+"|"+n("%[89A-Fa-f]"+gt+"%"+gt+gt)+"|"+n("%"+gt+gt)),vt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",yt=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),bt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xt=new RegExp(mt,"g"),wt=new RegExp(_t,"g"),kt=new RegExp(e("[^]",vt,"[\\.]",'[\\"]',yt),"g"),St=new RegExp(e("[^]",mt,bt),"g"),Ct=St;function Et(t){var e=z(t);return e.match(xt)?e:t}var Pt={scheme:"mailto",parse:function(t,e){var n=t,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var s=!1,o={},r=n.query.split("&"),a=0,l=r.length;a<l;++a){var c=r[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,d=u.length;h<d;++h)i.push(u[h]);break;case"subject":n.subject=lt(c[1],e);break;case"body":n.body=lt(c[1],e);break;default:s=!0,o[lt(c[0],e)]=lt(c[1],e)}}s&&(n.headers=o)}n.query=void 0;for(var p=0,f=i.length;p<f;++p){var m=i[p].split("@");if(m[0]=lt(m[0]),e.unicodeSupport)m[1]=lt(m[1],e).toLowerCase();else try{m[1]=B.toASCII(lt(m[1],e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}i[p]=m.join("@")}return n},serialize:function(t,e){var n=t,i=o(t.to);if(i){for(var r=0,a=i.length;r<a;++r){var l=String(i[r]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(wt,Et).replace(wt,s).replace(kt,H),h=l.slice(c+1);try{h=e.iri?B.toUnicode(h):B.toASCII(lt(h,e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}i[r]=u+"@"+h}n.path=i.join(",")}var d=t.headers=t.headers||{};t.subject&&(d.subject=t.subject),t.body&&(d.body=t.body);var p=[];for(var f in d)d[f]!==ft[f]&&p.push(f.replace(wt,Et).replace(wt,s).replace(St,H)+"="+d[f].replace(wt,Et).replace(wt,s).replace(Ct,H));return p.length&&(n.query=p.join("&")),n}},Dt=/^([^\:]+)\:(.*)/,Tt={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(Dt),i=t;if(n){var s=e.scheme||i.scheme||"urn",o=n[1].toLowerCase(),r=n[2],a=s+":"+(e.nid||o),l=F[a];i.nid=o,i.nss=r,i.path=void 0,l&&(i=l.parse(i,e))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(t,e){var n=e.scheme||t.scheme||"urn",i=t.nid,s=n+":"+(e.nid||i),o=F[s];o&&(t=o.serialize(t,e));var r=t,a=t.nss;return r.path=(i||e.nid)+":"+a,r}},$t=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ot={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match($t)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};F[ct.scheme]=ct,F[ut.scheme]=ut,F[dt.scheme]=dt,F[pt.scheme]=pt,F[Pt.scheme]=Pt,F[Tt.scheme]=Tt,F[Ot.scheme]=Ot,t.SCHEMES=F,t.pctEncChar=H,t.pctDecChars=z,t.parse=J,t.removeDotSegments=et,t.serialize=nt,t.resolveComponents=it,t.resolve=st,t.normalize=ot,t.equal=rt,t.escapeComponent=at,t.unescapeComponent=lt,Object.defineProperty(t,"__esModule",{value:!0})}(e)},2511:function(t,e,n){var i;/*! https://mths.be/punycode v1.3.2 by @mathias */t=n.nmd(t),function(s){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var r,a=2147483647,l=36,c=/^xn--/,u=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw RangeError(d[t])}function g(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function _(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+g((t=t.replace(h,".")).split("."),e).join(".")}function v(t){for(var e,n,i=[],s=0,o=t.length;s<o;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<o?56320==(64512&(n=t.charCodeAt(s++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),s--):i.push(e);return i}function y(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var i=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;i+=l)t=p(t/35);return p(i+36*t/(t+38))}function w(t){var e,n,i,s,o,r,c,u,h,d,f,g=[],_=t.length,v=0,b=128,w=72;for((n=t.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&m("not-basic"),g.push(t.charCodeAt(i));for(s=n>0?n+1:0;s<_;){for(o=v,r=1,c=l;s>=_&&m("invalid-input"),((u=(f=t.charCodeAt(s++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:l)>=l||u>p((a-v)/r))&&m("overflow"),v+=u*r,!(u<(h=c<=w?1:c>=w+26?26:c-w));c+=l)r>p(a/(d=l-h))&&m("overflow"),r*=d;w=x(v-o,e=g.length+1,0==o),p(v/e)>a-b&&m("overflow"),b+=p(v/e),v%=e,g.splice(v++,0,b)}return y(g)}function k(t){var e,n,i,s,o,r,c,u,h,d,g,_,y,w,k,S=[];for(_=(t=v(t)).length,e=128,n=0,o=72,r=0;r<_;++r)(g=t[r])<128&&S.push(f(g));for(i=s=S.length,s&&S.push("-");i<_;){for(c=a,r=0;r<_;++r)(g=t[r])>=e&&g<c&&(c=g);for(c-e>p((a-n)/(y=i+1))&&m("overflow"),n+=(c-e)*y,e=c,r=0;r<_;++r)if((g=t[r])<e&&++n>a&&m("overflow"),g==e){for(u=n,h=l;!(u<(d=h<=o?1:h>=o+26?26:h-o));h+=l)k=u-d,w=l-d,S.push(f(b(d+k%w,0))),u=p(k/w);S.push(f(b(u,0))),o=x(n,y,i==s),n=0,++i}++n,++e}return S.join("")}r={version:"1.3.2",ucs2:{decode:v,encode:y},decode:w,encode:k,toASCII:function(t){return _(t,(function(t){return u.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return _(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}()},8575:(t,e,n)=>{"use strict";var i=n(2511),s=n(2502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.DB=function(t,e){return y(t,!1,!0).resolve(e)};var r=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(7673);function y(t,e,n){if(t&&s.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,n),i}o.prototype.parse=function(t,e,n){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var y=t=c.join(a);if(y=y.trim(),!n&&1===t.split("#").length){var b=l.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=r.exec(y);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,y=y.substr(x.length)}if(n||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===y.substr(0,2);!k||x&&g[x]||(y=y.substr(2),this.slashes=!0)}if(!g[x]&&(k||x&&!_[x])){for(var S,C,E=-1,P=0;P<d.length;P++){-1!==(D=y.indexOf(d[P]))&&(-1===E||D<E)&&(E=D)}-1!==(C=-1===E?y.lastIndexOf("@"):y.lastIndexOf("@",E))&&(S=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(S)),E=-1;for(P=0;P<h.length;P++){var D;-1!==(D=y.indexOf(h[P]))&&(-1===E||D<E)&&(E=D)}-1===E&&(E=y.length),this.host=y.slice(0,E),y=y.slice(E),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var $=this.hostname.split(/\./),O=(P=0,$.length);P<O;P++){var A=$[P];if(A&&!A.match(p)){for(var N="",j=0,M=A.length;j<M;j++)A.charCodeAt(j)>127?N+="x":N+=A[j];if(!N.match(p)){var I=$.slice(0,P),L=$.slice(P+1),R=A.match(f);R&&(I.push(R[1]),L.unshift(R[2])),L.length&&(y="/"+L.join(".")+y),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=i.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[w])for(P=0,O=u.length;P<O;P++){var H=u[P];if(-1!==y.indexOf(H)){var z=encodeURIComponent(H);z===H&&(z=escape(H)),y=y.split(H).join(z)}}var W=y.indexOf("#");-1!==W&&(this.hash=y.substr(W),y=y.slice(0,W));var q=y.indexOf("?");if(-1!==q?(this.search=y.substr(q),this.query=y.substr(q+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,q)):e&&(this.search="",this.query={}),y&&(this.pathname=y),_[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,r="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(r=v.stringify(this.query));var a=this.search||r&&"?"+r||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(s.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,i=Object.keys(this),r=0;r<i.length;r++){var a=i[r];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=t[u])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!_[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var p=h[d];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||y||n.host&&t.pathname,w=x,k=n.pathname&&n.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===k[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,k=f;else if(f.length)k||(k=[]),k.pop(),k=k.concat(f),n.search=t.search,n.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(S)n.hostname=n.host=k.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=t.search,n.query=t.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=k.slice(-1)[0],E=(n.host||t.host||k.length>1)&&("."===C||".."===C)||""===C,P=0,D=k.length;D>=0;D--)"."===(C=k[D])?k.splice(D,1):".."===C?(k.splice(D,1),P++):P&&(k.splice(D,1),P--);if(!x&&!w)for(;P--;P)k.unshift("..");!x||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),E&&"/"!==k.join("/").substr(-1)&&k.push("");var T,$=""===k[0]||k[0]&&"/"===k[0].charAt(0);S&&(n.hostname=n.host=$?"":k.length?k.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(x=x||n.host&&k.length)&&!$&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},2502:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}}},e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=n(9755),e=n.n(t);n(2466);function i(t,e){const n=document.createElement("div");return n.title=t,n.innerHTML=e,n}class s{constructor(t,n,s,o){this._el=new i(t,n),this._$dialog=e()(this._el),this._$dialog.on("dialogclose",(()=>{requestAnimationFrame((()=>this._$dialog.dialog("destroy")))})),s&&(o=o||{},Object.assign(o,{buttons:[{text:s.label,class:s.class,click:()=>{s.handler&&s.handler(this),this._$dialog.dialog("close")}}]})),this._option=o}get el(){return this._el}open(){this._$dialog.dialog(Object.assign({dialogClass:"textae-editor--dialog",height:"auto",modal:!0,resizable:!1,width:550},this._option))}close(){this._$dialog.dialog("close")}}class o extends s{constructor(){super("Help (Keyboard short-cuts)",'<div class="textae-tool__key-help"></div>',null,{height:313,width:523})}}const r=new o;class a{constructor(){this.editorList=[],this.selectedEditor=null}push(t){var e;Object.assign(t,{editorId:(e=this.editorList,`editor${e.length}`)}),this.editorList.push(t),t[0].addEventListener("keyup",(t=>function(t,e){t.selected&&"h"===e.key&&t.openHelpDialog()}(this,t)))}get selected(){return this.selectedEditor}set selected(t){!function(t,e){for(const n of t)n!==e&&n.api.unselect();e.api.select()}(this.editorList,t),this.selectedEditor=t}unselect(t){this.selectedEditor===t&&(t.api.unselect(),this.selectedEditor=null)}redraw(){this.editorList.forEach((t=>t.api.redraw()))}findByHTMLelement(t){return this.editorList.filter((e=>e[0]===t))[0]}openHelpDialog(){r.open()}}var l=n(9623),c=n.n(l);const u=new Map;const h="textae-editor-veil";const d={show:function(){const t=document.querySelector(`.${h}`);if(t)t.style.display="block";else{const t=document.createElement("div");t.className=h,document.body.appendChild(t)}},hide:function(){const t=document.querySelector(`.${h}`);t&&(t.style.display="none")}};function p(t){t.forEach((t=>{return function(t){t?d.show():d.hide()}(((e=t.target).classList.contains("textae-editor--wait")?u.set(e):u.delete(e),u.size>0));var e}))}const f={attributes:!0,attributeFilter:["class"]};var m=n(1182),g=n.n(m);const _=new o;const v={read:!0,write:!0,help:!0};var y=n(9675),b=n.n(y);const x=[[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"},{type:"write-auto",title:"Upload Automatically",push:!0}],[{type:"view",title:"View Mode",push:!0},{type:"term",title:"Term Edit Mode",push:!0},{type:"block",title:"Block Edit Mode",push:!0},{type:"relation",title:"Relation Edit Mode",push:!0}],[{type:"simple",title:"Simple View",push:!0},{type:"line-height",title:"Adjust LineHeight"},{type:"line-height-auto",title:"Auto Adjust LineHeight",push:!0}],[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}],[{type:"replicate",title:"Replicate span annotation [R]",enableWhenSelecting:{span:t=>t.span.single&&t.span.single.isDenotation}},{type:"replicate-auto",title:"Auto replicate",push:!0},{type:"boundary-detection",title:"Boundary Detection [B]",push:!0}],[{type:"entity",title:"New entity [E]",enableWhenSelecting:{span:t=>t.span.contains((t=>t.isDenotation))}},{type:"pallet",title:"Show label list editor [Q]"},{type:"change-label",title:"Change label [W]",enableWhenSelecting:{entity:t=>t.entity.some,relation:t=>t.relation.some}}],[{type:"delete",title:"Delete [D]",enableWhenSelecting:{span:t=>t.span.some,entity:t=>t.entity.some,relation:t=>t.relation.some}},{type:"copy",title:"Copy [C]",enableWhenSelecting:{span:t=>t.span.contains((t=>t.isDenotation)),entity:t=>t.entity.contains((t=>t.isDenotation))}},{type:"cut",title:"Cut [X]",enableWhenSelecting:{span:t=>t.span.contains((t=>t.isDenotation)),entity:t=>t.entity.contains((t=>t.isDenotation))}},{type:"paste",title:"Paste [V]",enableWhenSelecting:{span:(t,e)=>e.hasCopyingItem&&t.span.some||e.hasCuttingItem&&Boolean(t.span.single)}}],[{type:"setting",title:"Setting"}],[{type:"help",title:"Help [H]"}]];const w=new class{get mapForControl(){return{buttonGroup:x.map((t=>({list:t.map((t=>({type:t.type,title:t.title})))})))}}get _buttons(){return x.flat()}_getEnabelButtonsWhenSelecting(t){return this._buttons.filter((e=>e.enableWhenSelecting&&e.enableWhenSelecting[t])).map((e=>({name:e.type,predicate:e.enableWhenSelecting[t]})))}get spanButtons(){return this._getEnabelButtonsWhenSelecting("span")}get entityButtons(){return this._getEnabelButtonsWhenSelecting("entity")}get relationButtons(){return this._getEnabelButtonsWhenSelecting("relation")}get pushButtons(){return this._buttons.filter((t=>t.push)).map((t=>t.type))}};class k{constructor(t,e){const n=g().create(function(t){return b().compile(t)(w.mapForControl)}(t));this._el=n,function(t,e){const n=t=>{if(t.currentTarget.classList.contains("textae-control__icon--disabled"))return;const n=t.currentTarget.dataset.buttonType;e.api.handleButtonClick(n)};for(const e of t.querySelectorAll(".textae-control__icon"))"help"===e.dataset.buttonType?e.addEventListener("click",(()=>_.open())):e.addEventListener("click",n)}(this._el,e)}get el(){return this._el}updateAllButtonEnableState(t){!function(t,e){!function(t,e){for(const n of t.querySelectorAll(".textae-control__icon"))!0===e[n.dataset.buttonType]?n.classList.remove("textae-control__icon--disabled"):n.classList.add("textae-control__icon--disabled")}(t,Object.assign({},e,v))}(this._el,t)}updateButtonPushState(t,e){!function(t,e,n){const i=t.querySelector(`.textae-control__${e}-button`);n?i.classList.add("textae-control__icon--pushed"):i.classList.remove("textae-control__icon--pushed")}(this._el,t,e)}}class S extends k{constructor(t){super('\n<div class="textae-control textae-control-bar">\n  <span class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </span>\n  {{#buttonGroup}}\n  <span class="textae-control__separator"></span>\n    {{#list}}\n  <span class="textae-control__icon textae-control__{{type}}-button" title="{{title}}" data-button-type="{{type}}"></span>\n    {{/list}}\n  {{/buttonGroup}}\n</div>\n',t)}transitWriteButtonImage(t){!function(t,e){const n=t.querySelector(".textae-control__write-button");!0===e?n.classList.add("textae-control__write-button--transit"):n.classList.remove("textae-control__write-button--transit")}(super.el,t)}}class C extends k{constructor(t){super('\n<div class="textae-control textae-context-menu">\n  <p class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </p>\n  {{#buttonGroup}}\n  <p class="textae-control__separator"></p>\n    {{#list}}\n  <p class="textae-control__icon textae-control__{{type}}-button" data-button-type="{{type}}">{{title}}</p>\n    {{/list}}\n  {{/buttonGroup}}\n</div>\n',t)}show(t,e){super.el.setAttribute("style",`top: ${t}px; left: ${e}px`),super.el.classList.remove("textae-context-menu--hide"),super.el.classList.add("textae-context-menu--show")}hide(){this._isOpen&&(super.el.classList.remove("textae-context-menu--show"),super.el.classList.add("textae-context-menu--hide"))}get _isOpen(){return super.el.classList.contains("textae-context-menu--show")}}function E(t,e){(t=t.add(".ui-dialog, .ui-widget-overlay"))[`${e}Class`]("textae-editor--wait")}class P{constructor(t){this._editor=t}startWait(){E(this._editor,"add")}endWait(){E(this._editor,"remove")}}function D(t){return!t||""===t}function T(t,e,n){const i=function(t){const e=t.status,n=t.getResponseHeader("WWW-Authenticate"),i=t.getResponseHeader("Location");return 401===e&&n&&"ServerPage"===n&&i?i:null}(t);if(i){const t=function(t){return window.open(t,"_blank","width=600, height=500")}(i),e=setInterval((()=>{t.closed&&(clearInterval(e),n())}),1e3)}else e()}function $(t,n,i,s,o,r){const a={type:t,url:n,contentType:"application/json",data:i,crossDomain:!0,xhrFields:{withCredentials:!0}},l=()=>{e().ajax(a).done(s).fail(o).always(r)};e().ajax(a).done(s).fail((t=>T(t,o,l))).always(r)}function O(t,e,n,i,s,o){D(t)||(n(),$("post",t,e,i,s,o))}class A{constructor(t,e,n){this.beforeSend=t,this.failHandler=e,this.finishHandler=n}post(t,e,n){O(t,e,this.beforeSend,n,this.failHandler,this.finishHandler)}patch(t,e,n){!function(t,e,n,i,s,o){if(D(t))return;n(),console.log("PATCH data",e),$("patch",t,e,i,(()=>O(t,e,n,i,s,o)),o)}(t,e,this.beforeSend,n,this.failHandler,this.finishHandler)}}var N=n(8307),j=n.n(N);function M(t,n,i){i.startWait(),function(t,n,i){if(D(t))return;const s={type:"GET",url:t,cache:!1,xhrFields:{withCredentials:!0},timeout:3e4};e().ajax(s).done(n).fail(i)}(t,(e=>{n(t,e),i.endWait()}),(()=>{i.endWait(),j().error(`Could not load the file from the location you specified.: ${t}`)}))}class I{constructor(t){this._editor=t,this._urlOfLastRead={annotation:"",config:""},this._cursorChanger=new P(t),this._ajaxSender=new A((()=>this._cursorChanger.startWait()),(()=>this._editor.eventEmitter.emit("textae.saveError")),(()=>this._cursorChanger.endWait())),function(t,e){const n=t.eventEmitter;n.on("textae.saveAnnotationDialog.download.click",(()=>n.emit("textae.annotation.save"))).on("textae.saveAnnotationDialog.viewsource.click",(()=>n.emit("textae.annotation.save"))).on("textae.saveConfigurationDialog.download.click",(()=>n.emit("textae.configuration.save")))}(t,this._ajaxSender)}get annotationUrl(){return this._urlOfLastRead.annotation}get configurationUrl(){return this._urlOfLastRead.config}set configurationUrl(t){this._urlOfLastRead.config=t}loadAnnotation(t){M(t,((e,n)=>{n&&n.text?(this._editor.eventEmitter.emit("textae.annotation.load","url",e,n,t),this._editor.eventEmitter.emit("textae.annotation.setUrl",t),this._urlOfLastRead.annotation=t):this._editor.eventEmitter.emit("textae.annotation.loadError","url",e)}),this._cursorChanger)}loadConfigulation(t,e=null){M(t,((t,n)=>{this._editor.eventEmitter.emit("textae.configuration.load","url",t,n,e)}),this._cursorChanger)}saveAnnotation(t,e){t&&function(t,e,n,i,s){e.post(n,i,(()=>t.eventEmitter.emit(s)))}(this._editor,this._ajaxSender,t,JSON.stringify(e),"textae.annotation.save")}saveConfiguration(t,e){t&&function(t,e,n,i,s){e.patch(n,i,(()=>t.eventEmitter.emit(s)))}(this._editor,this._ajaxSender,t,JSON.stringify(e),"textae.configuration.save")}}class L{constructor(t,e){this._emitter=t,this._name=e,this._container=new Map}_toModel(t){return t}_toModels(t,e){return t.map((t=>this._toModel(t,e)))}addSource(t,e){for(const n of this._toModels(t,e))this._addToContainer(n)}add(t){const e=this._addToContainer(t);return this._emit(`textae.annotationData.${this._name}.add`,e),e}get(t){return this._container.get(t)}get all(){return Array.from(this._container.values())}findByType(t){return this.all.filter((e=>e.typeName===t))}get some(){return this._container.size}changeType(t,e){const n=this._container.get(t);return n.typeName=e,this._emit(`textae.annotationData.${this._name}.change`,n),n}remove(t){const e=this._container.get(t);return e&&(this._container.delete(t),this._emit(`textae.annotationData.${this._name}.remove`,e)),e}clear(){this._container.clear()}_addToContainer(t){return this._container.set(t.id,t),t}_emit(t,e){this._emitter.emit(t,e)}}function R(t,e){return function(t,e){return!!e&&e.begin<=t.begin&&t.end<=e.end}(t,e)?e:e.parent?R(t,e.parent):null}function B(t,e){return t.begin-e.begin||e.end-t.end}function F(t,e){e.sort(B).forEach(((e,n,i)=>{e.severTies();const s=0!==n?i[n-1]:null;if(s){const n=R(e,s);n?e.beChildOf(n):e.beChildOf(t)}else e.beChildOf(t)}))}function H(t,e,n){return`${t.editorId}__S${e}_${n}`}function z(t,e,n){return`${t.editorId}__B${e}_${n}`}function W(t,e){return`${t.editorId}__E${e.replace(/[:.]/g,"")}`}const q="ui-selected";function V(t,e){const n=0===t.children.length?0:function(t,e){return Math.max.apply(null,t.children.map((t=>V(t,e))))}(t,e);return function(t,e){const n=t.entities;return n.length*function(t){return 24*t+18}(e)+function(t){return t.map((t=>18*t.attributes.length)).reduce(((t,e)=>t+e),0)}(n)}(t,e)+n}function U(t){return Math.round(100*t)/100}const G=b().compile('\n  <div id={{id}} class="textae-editor__grid" style="{{style}}">\n  </div>\n  ');function K(t,e){return{start:t.begin-e,end:t.end-e}}function J(t,e,n){const i=n.begin<t&&t<n.end&&n.end<e,s=t<n.begin&&n.begin<e&&e<n.end;return i||s}function X(t){const e=t.bigBrother;return e?function(t,e){if(J(t.begin,t.end,e))throw new Error(`span ${t.id} is corrisng with ${e.id}`);let{start:n,end:i}=K(t,e.end),s=e.element.nextSibling;return s.length<n&&(n-=s.length,i-=s.length,s=s.nextSibling),{textNode:s,start:n,end:i}}(t,e):function(t){const{start:e,end:n}=K(t,t.parent.begin);return{textNode:t.parent.element.firstChild,start:e,end:n}}(t)}function Y(t){const{textNode:e,start:n,end:i}=X(t);if(!e)throw new Error(`The textNode on to create a span is not found. ${t.id}`);if(n<0)throw new Error(`start must be positive, but ${n} for ${t.id}.`);if(e.length<i)throw new Error(`oh my god! I cannot render ${t.id}. "${e.textContent.slice(n,i)}" at ${n}~${i} of text(${e.textContent.length}) as "${e.textContent}".`);return function(t,e,n){const i=document.createRange();return i.setStart(t,e),i.setEnd(t,n),i}(e,n,i)}function Q(t,e,n){(function(t,e,n){return!(!t.style||parseFloat(t.style.top)!==e||parseFloat(t.style.left)!==n)})(t,e,n)||(t.style.top=`${e}px`,t.style.left=`${n}px`)}function Z(t){return t[0].querySelector(".textae-editor__body__annotation-box")}function tt(t,e){return function(t,e,n){console.assert(e,"element MUST exists.");const i=t[0].querySelectorAll(`.${n}`),s=Array.from(i).indexOf(e);return i.length-s>1?i[s+1]:null}(t,document.querySelector(`#${e}`),"textae-editor__span")}class et{constructor(t,e,n,i){this._editor=t,this._begin=e,this._end=n,this._spanContainer=i,this.severTies()}get id(){return H(this._editor,this._begin,this._end)}get begin(){return this._begin}get end(){return this._end}get types(){return[]}get entities(){return[]}get bigBrother(){return function(t){const e=t.parent.children,n=e.indexOf(t);return 0===n?null:e[n-1]}(this,this._spanContainer.topLevel)}get root(){return this._spanContainer}get parent(){return this._parent}get children(){return this._children}severTies(){this._parent=null,this._children=[]}beChildOf(t){t.children.push(this),this._parent=t}traverse(t,e){t(this);for(const n of this._children)n.traverse(t,e);e&&e(this)}get element(){return document.querySelector(`#${this.id}`)}renderElement(){const t=document.createElement("span");t.setAttribute("id",this.id),t.setAttribute("title",this.id);for(const e of this.styles.values())t.classList.add("textae-editor__style"),t.classList.add(`textae-editor__style--${e}`);return Y(this).surroundContents(t),t}destroyElement(){const t=this.element,e=t.parentNode;for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t),e.normalize()}get gridElement(){return document.querySelector(`#G${this.id}`)}get isGridRendered(){return this.gridElement}renderGridElement(){const t=function(t,e){const n=tt(t,e);return n?document.querySelector(`#G${n.id}`):null}(this._editor,this.id);if(t)return t.insertAdjacentElement("beforebegin",this._createGridElement()),t.previousElementSibling;{const t=Z(this._editor);return t.insertAdjacentElement("beforeend",this._createGridElement()),t.lastElementChild}}_createGridElement(){const{width:t,top:e,left:n}=this._gridRectangle,i=function(t,e,n,i){return G({id:`G${t}`,style:`top: ${e}px; left: ${n}px; width: ${i}px;`})}(this.id,e,n,t);return g().create(i)}updateGridPosition(){const{top:t,left:e}=this._gridRectangle;Q(this.gridElement,t,e)}destroyGridElement(){this.isGridRendered&&this.gridElement.remove()}}class nt extends et{constructor(t,e,n,i,s){super(t,e,n,s),this._entityContainer=i}get entities(){return this._entityContainer.getAllOfSpan(this)}passesAllEntitiesTo(t){for(const e of this.entities)e.span=t}get hasStyle(){return this.styles.size>0}get styles(){return this._spanContainer.getStyle(this.id)}get rectangle(){const t=this.element,e=t.getBoundingClientRect(),n=t.offsetParent.offsetParent.getBoundingClientRect();return{top:e.top-n.top,left:e.left-n.left,width:e.width}}get isDenotation(){return!0}select(){const t=super.element;t.classList.add(q),t.focus()}deselect(){const t=super.element;t&&t.classList.remove(q)}renderElement(){const t=super.renderElement();this.styleOnly||(t.setAttribute("tabindex",0),t.classList.add("textae-editor__span"))}get _gridRectangle(){console.assert(this.element,"span is not renderd");const{top:t,left:e,width:n}=this.rectangle;return{width:U(n),top:U(t-V(this,this._spanContainer._entityGap.value)),left:U(e)}}}class it extends et{constructor(t,e,n,i,s){super(t,e,n,i),this.styles=new Set([s])}get styleOnly(){return!0}appendStyles(t){this.styles=new Set([...this.styles,...t])}}class st extends et{constructor(t,e,n,i,s){super(t,e,n,s),this._entityContainer=i}get isBlock(){return!0}get entities(){return this._entityContainer.getAllOfSpan(this)}passesAllEntitiesTo(t){for(const e of this.entities)e.span=t}get id(){return z(this._editor,this._begin,this._end)}select(){const t=super.element;t.classList.add(q),this._backgroundElement.classList.add(q),t.focus()}deselect(){const t=super.element;t&&t.classList.remove(q),this._backgroundElement&&this._backgroundElement.classList.remove(q)}updateSidekicksOfBlockSpanPosition(t){const{top:e,left:n,width:i,height:s}=this.getReactOfSidekicksOfBlock(t);!function(t,e,n,i,s){t.style.top=`${e}px`,t.style.left=`${n}px`,t.style.width=`${i}px`,t.style.height=`${s}px`}(this._backgroundElement,e,n,i,s),this.gridElement.style.height=`${this._rectangle.height}px`}renderElement(t){!function(t){const e=Y(t),n=document.createElement("div");n.setAttribute("id",t.id),n.setAttribute("title",t.id),n.classList.add("textae-editor__block"),e.surroundContents(n)}(this),function(t,e){const n=document.createElement("div");n.setAttribute("id",e),n.classList.add("textae-editor__block-bg"),t.insertAdjacentElement("afterbegin",n)}(t,this._backgroundId)}destroyElement(){super.destroyElement(),this._backgroundElement.remove()}_createGridElement(){const t=super._createGridElement();return t.classList.add("textae-editor__block-hit-area"),t.dataset.id=this.id,t}get _gridRectangle(){console.assert(this.element,"span is not renderd");const t=this._spanContainer._textBox.boundingClientRect;return{width:100,top:U(this.getReactOfSidekicksOfBlock(this._spanContainer._textBox).top),left:U(t.width-108)}}updateGridPosition(){super.updateGridPosition(),this._entityToFocusOn&&(this._entityToFocusOn.select(),this._entityToFocusOn=null)}get isGridPositioned(){return this.gridElement.style.top}set entityToFocusOn(t){this._entityToFocusOn=t}getReactOfSidekicksOfBlock(t){const e=this._rectangle;return{top:e.top-t.lineHeight/2+20,left:e.left-t.boundingClientRect.left-8,width:e.width+8,height:e.height}}get _backgroundId(){return`bg_of_${this.id}`}get _backgroundElement(){return document.querySelector(`#${this._backgroundId}`)}get _rectangle(){const t=this.element,e=t.getBoundingClientRect(),n=t.offsetParent.offsetParent.getBoundingClientRect();return{top:e.top-n.top,left:e.left,width:e.width,height:e.height}}}function ot(t,e,n){return t.filter((({span:t})=>J(e,n,t)))}function rt(t,e,n){let i=t.get(e),s=t.get(n);if(B(i,s)>0){const t=i;i=s,s=t}return[...t.values()].filter((t=>i.begin<=t.begin&&t.end<=s.end)).map((t=>t.id))}class at{constructor(t,e,n,i,s){this._editor=t,this._emitter=e,this._entityContainer=n,this._textBox=i,this._entityGap=s,this._denotations=new Map,this._blocks=new Map,this._styles=new Map}add(t){if(console.assert(t,"span is necessary."),t instanceof st)return this._addBlock(t);if(t instanceof nt)return this._addDenotation(t);if(t.isBlock){console.assert(!this.doesParentSpanExits(t.begin,t.end),`There are some parent spans of {begin: ${t.begin}, end: ${t.end}}.`);const e=new st(this._editor,t.begin,t.end,this._entityContainer,this);return this._addBlock(e)}{const e=new nt(this._editor,t.begin,t.end,this._entityContainer,this);return this._addDenotation(e)}}addSource(t,e){for(const n of t)this._addInstanceFromElement(e,n);this._updateSpanTree()}hasDenotationSpan(t,e){const n=H(this._editor,t,e);return this._denotations.has(n)}get(t){return this._denotations.has(t)?this._denotations.get(t):this._blocks.has(t)?this._blocks.get(t):this._styles.get(t)}getStyle(t){return this._styles.has(t)?this._styles.get(t).styles:new Set}rangeDenotationSpan(t,e){return rt(this._denotations,t,e)}rangeBlockSpan(t,e){return rt(this._blocks,t,e)}get topLevel(){return this.all.filter((t=>t.parent===this)).sort(B)}get children(){return this.topLevel}clear(){this._denotations.clear(),this._blocks.clear(),this._styles.clear()}remove(t){const e=this._blocks.get(t);if(e)return this._removeBlock(e);const n=this._denotations.get(t);return n?this._removeDenotation(n):void 0}moveDenotationSpan(t,e,n){console.assert(t!==H(this._editor,e,n),`Do not need move span:  ${t} ${e} ${n}`);const i=this._denotations.get(t);this._removeDenotation(i);const s=new nt(this._editor,e,n,this._entityContainer,this);return this._addDenotation(s,i),this._emitter.emit("textae.annotationData.span.move"),{begin:i.begin,end:i.end,id:s.id}}moveBlockSpan(t,e,n){console.assert(t!==z(this._editor,e,n),`Do not need move span:  ${t} ${e} ${n}`);const i=this._blocks.get(t);this._removeBlock(i);const s=new st(this._editor,e,n,this._entityContainer,this);return this._addBlock(s,i),this._emitter.emit("textae.annotationData.span.move"),{begin:i.begin,end:i.end,id:s.id}}_addDenotation(t,e=null){return this._addSpan(this._denotations,t,e),t}_addBlock(t,e=null){return this._addSpan(this._blocks,t,e),this._textBox.forceUpdate(),t}_addSpan(t,e,n=null){t.set(e.id,e),this._updateSpanTree(),n&&n.passesAllEntitiesTo(e),this._emitter.emit("textae.annotationData.span.add",e)}_removeDenotation(t){return this._denotations.delete(t.id),this._emitter.emit("textae.annotationData.span.remove",t),t}_removeBlock(t){return this._blocks.delete(t.id),this._emitter.emit("textae.annotationData.span.remove",t),this._textBox.forceUpdate(),t}isBoundaryCrossingWithOtherSpans(t,e){return function(t,e,n){return console.assert(void 0!==n,"end is necessary."),ot(t.map((t=>({span:t}))),e,n).length>0}(this.all,t,e)}doesParentSpanExits(t,e){const n=n=>n.begin<t&&e<n.end;return[...this._denotations.values()].some(n)||[...this._blocks.values()].some(n)||[...this._styles.values()].some(n)}get all(){const t=[...this._styles.values()].filter((t=>!this._denotations.has(t.id)));return[...this._blocks.values()].concat([...this._denotations.values()]).concat(t)}get allDenotationSpans(){return[...this._denotations.values()]}get allBlockSpans(){return[...this._blocks.values()]}get begin(){return 0}get element(){return this._editor[0].querySelector(".textae-editor__body__text-box")}_updateSpanTree(){F(this,this.all)}_addInstanceFromElement(t,e){switch(t){case"denotation":{const t=new nt(this._editor,e.span.begin,e.span.end,this._entityContainer,this);this._denotations.set(t.id,t);break}case"block":{const t=new st(this._editor,e.span.begin,e.span.end,this._entityContainer,this);this._blocks.set(t.id,t);break}case"typesetting":{const t=new it(this._editor,e.span.begin,e.span.end,this,e.style);this._styles.has(t.id)?this._styles.get(t.id).appendStyles(t.styles):this._styles.set(t.id,t);break}default:throw`${t} is unknown type span!`}}arrangeDenotationEntityPosition(){for(const t of this.allDenotationSpans)t.updateGridPosition()}arrangeBlockEntityPosition(){for(const t of this.allBlockSpans)t.updateGridPosition()}arrangeBackgroundOfBlockSpanPosition(){for(const t of this.allBlockSpans)t.updateSidekicksOfBlockSpanPosition(this._textBox)}get maxHeight(){return t=this,e=this._entityGap.value,Math.max(...t.allDenotationSpans.map((t=>V(t,e))))+23+30;var t,e}}class lt{constructor({id:t,subj:e,pred:n,obj:i},s){this.id=t,this.subj=e,this.pred=n,this.obj=i,this._entityContainer=s}get entity(){return this._entityContainer.get(this.subj)}}function ct(t){return t.slice(1)}function ut(t,e){return t.filter((t=>function(t,e){return new RegExp(`^${t}\\d+$`).test(e)}(e,t))).map(ct)}function ht(t,e){return t+function(t){return(0===t.length?0:Math.max(...t))+1}(ut(e,t))}class dt extends L{constructor(t,e,n){super(t,e),this._prefix=n}_toModels(t,e){const n=super._toModels(t,e);return n.sort(((t,e)=>t.id?e.id?t.id<e.id?-1:t.id>e.id?1:0:-1:1)),n}_addToContainer(t){return super._addToContainer(function(t,e,n){if(!t.id){const i=ht(n,Array.from(e.keys()));t.id=i}return t}(t,this._container,this._prefix))}}class pt extends dt{constructor(t,e){super(t,"attribute","A"),this._entityContainer=e}_toModel(t){return new lt(t,this._entityContainer)}add(t){return t instanceof lt?super.add(t):super.add(this._toModel(t))}change(t,e,n){const i=this.get(t);return e&&(i.pred=e),n&&(i.obj=n),super._emit("textae.annotationData.attribute.change",i),i}remove(t){const e=super.remove(t);return console.assert(e,`There are no attribute ${t} to delete!`),super._emit("textae.annotationData.attribute.remove",e),e}getSameAttributes(t,e){return this.all.filter((n=>n.pred===t&&n.obj===e))}}function ft(t){const e=t.closest(".textae-editor__grid").style;return{top:parseFloat(e.top)+t.offsetTop,center:parseFloat(e.left)+t.offsetLeft+t.offsetWidth/2}}const mt=.3,gt=.05,_t=60;function vt(t,e){const n=ft(t),i=ft(e),s=n.center,o=i.center,r=n.top,a=i.top,l=Math.abs(s-o),c=Math.abs(r-a);return(l*mt+c*gt+_t)/2.4}function yt(t,e){const n=W(t,e);return t[0].querySelector(`#${n} .textae-editor__entity__type-values`)}const bt={normal:{width:7,length:9,location:1,id:"normal-arrow"},hover:{width:14,length:18,location:1,id:"hover-arrow"}};function xt(t){const e=t.slice(1);return`rgba(${parseInt(e.substr(0,2),16)}, ${parseInt(e.substr(2,2),16)}, ${parseInt(e.substr(4,2),16)}, 1)`}function wt(t,e,n){const i=t.relation.get(n).typeName;return{strokeStyle:xt(e.relation.getColor(i))}}function kt(t){return t.trim().startsWith("http")}function St(t,e){const n=t.all.filter((t=>"_base"!==t.prefix)).filter((t=>0===e.indexOf(`${t.prefix}:`)));return 1===n.length?n[0]:null}function Ct(t){return/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([/]?[^\s?]*[/]{1})*(?:\/?([^\s\n?[\]{}#]*(?:(?=\.)){1}|[^\s\n?[\]{}.#]*)?([.]{1}[^\s?#]*)?)?(?:\?{1}([^\s\n#[\]]*))?([#][^\s\n]*)?\)?/gi.exec(t)}function Et(t,e,n){if(n)return n;if(kt(e))return function(t){if(kt(t)){const e=Ct(t);if(e)return e[9]?e[9].slice(1):e[6]?e[6]+(e[7]||""):e[5]&&e[5].length>1?e[5].split("/").filter((t=>""!==t)).pop():e[3]}return t}(e);const i=St(t,e);return i?e.replace(`${i.prefix}:`,""):e}function Pt(t,e,n){if(kt(e))return e;if(n)return n;if(t.some){const n=St(t,e);if(n)return`${n.uri}${e.replace(`${n.prefix}:`,"")}`;const i=t.all.find((t=>"_base"===t.prefix));if(i)return`${i.uri}${e}`}return null}function Dt(t,e,n){return`[${t.id}] ${function(t,e,n){const i=Et(t,n,e.getLabel(n)),s=Pt(t,n,e.getUri(n));return s?`<a target="_blank"/ href="${s}">${i}</a>`:i}(e.namespace,n.relation,t.typeName)}`}class Tt{constructor(t,n,i,s){this._jsPlumbConnection=function(t,n,i,s){const o=n.sourceEndpoint,r=n.targetEndpoint;return t.connect({source:e()(o),target:e()(r),anchors:["TopCenter","TopCenter"],connector:["Bezier",{curviness:vt(o,r)}],paintStyle:wt(i,s,n.id),parameters:{id:n.id},cssClass:"textae-editor__relation",overlays:[["Arrow",bt.normal],["Label",{id:"textae-relation-label",label:Dt(n,i,s),cssClass:"textae-editor__relation__label"}]]})}(t,n,i,s),this._getStrokeStyle=()=>wt(i,s,n.id)}addClass(t){this._jsPlumbConnection.addClass(t),this._labelOverlay.addClass(t)}bind(t,e){return this._jsPlumbConnection.bind(t,e),this._labelOverlay.bind(t,e),this}deselect(){this.setColor(),this.removeClass("ui-selected"),this._hideBigArrow()}detach(){this._jsPlumbConnection._jsPlumb.instance.detach(this._jsPlumbConnection)}get link(){return this._labelOverlay.canvas.querySelector("a")}get relationId(){return this._jsPlumbConnection.getParameter("id")}pointdown(){this._isSelected||(this.setColor(),this.removeClass("hover"),this._hideBigArrow())}pointup(){this._isSelected||(this.setColor(),this.addClass("hover"),this._showBigArrow())}select(){this.setColor(),this.addClass("ui-selected"),this.removeClass("hover"),this._showBigArrow()}setColor(){this._jsPlumbConnection.setPaintStyle(this._getStrokeStyle())}set label(t){this._labelOverlay.setLabel(t)}removeClass(t){this._jsPlumbConnection.removeClass(t),this._labelOverlay.removeClass(t)}resetCurviness(t){this._jsPlumbConnection.connector.getCurviness()!==t&&(this._jsPlumbConnection.setConnector(["Bezier",{curviness:t}]),this._resetArrow())}get _arrowOverlays(){return this._jsPlumbConnection.getOverlays().filter((t=>"Arrow"===t.type))}get _isSelected(){return this._jsPlumbConnection.connector.canvas.classList.contains("ui-selected")}get _labelOverlay(){const t=this._jsPlumbConnection.getOverlay("textae-relation-label");if(!t)throw new Error("no label overlay");return t}_hideBigArrow(){this._jsPlumbConnection.getOverlay(bt.normal.id)||(this._jsPlumbConnection.removeOverlay(bt.hover.id),this._jsPlumbConnection.addOverlay(["Arrow",bt.normal]))}_resetArrow(){for(const t of this._arrowOverlays)this._resetOverlay(t)}_resetOverlay(t){this._jsPlumbConnection.removeOverlay(t.id),this._jsPlumbConnection.addOverlay(["Arrow",{id:t.id,width:t.width,length:t.length,location:t.loc}])}_showBigArrow(){this._jsPlumbConnection.getOverlay(bt.hover.id)||(this._jsPlumbConnection.removeOverlay(bt.normal.id),this._jsPlumbConnection.addOverlay(["Arrow",bt.hover]))}}class $t{constructor(t,{id:e,pred:n,subj:i,obj:s}){this._editor=t,this._id=e,this.typeName=n,this._subj=i,this._obj=s}get id(){return this._id}set id(t){this._id=t}get typeName(){return this._typeName}set typeName(t){this._typeName=String(t)}get subj(){return this._subj}get obj(){return this._obj}get sourceEndpoint(){return yt(this._editor,this.subj)}get targetEndpoint(){return yt(this._editor,this.obj)}get isRendered(){return void 0!==this._connect}get jsPlumbConnection(){if(!this._connect)throw new Error(`no connect for id: ${this._id}`);return this._connect}set jsPlumbConnection(t){this._connect=t}deleteJsPlumbConnection(){this._connect.detach(),this._connect=void 0}select(){setTimeout((()=>{this._connect&&this._connect.select()}),150)}deselect(){setTimeout((()=>{this._connect&&this._connect.deselect()}),150)}resetCurviness(){const t=vt(this.sourceEndpoint,this.targetEndpoint);this.jsPlumbConnection.resetCurviness(t)}renderElement(t,e,n,i){const s=new Tt(t,this,n,i);s.bind("mouseenter",(()=>s.pointup())).bind("mouseexit",(()=>s.pointdown())).bind("click",((t,n)=>{e.eventEmitter.emit("textae.editor.jsPlumbConnection.click",s,n)})),this._connect=s}destroyElement(){this.isRendered&&this.deleteJsPlumbConnection()}}class Ot extends dt{constructor(t,e){super(e,"relation","R"),this._editor=t}_toModel(t){return new $t(this._editor,t)}add(t){return t instanceof $t?super.add(t):super.add(this._toModel(t))}}class At{constructor(t,e=[]){this._typeName=t,this._attributes=e}get typeName(){return this._typeName}get attributes(){return this._attributes}toHTMLElementContext(t,e,n){return{label:this._label(t,e),href:this._href(t,e),color:e.getColor(this.typeName),attributes:this._attributesInHTMLElementContext(t,n)}}_label(t,e){return Et(t,this.typeName,e.getLabel(this.typeName))}_href(t,e){return Pt(t,this.typeName,e.getUri(this.typeName))}_attributesInHTMLElementContext(t,e){return this.attributes.map((({pred:n,obj:i})=>({pred:n,obj:i,title:`pred: ${n}, value: ${i}`,label:Et(t,"string"==typeof i?i:"",e.getLabel(n,i)),href:Pt(t,"string"==typeof i?i:""),color:e.getColor(n,i)})))}}const Nt=b().compile('\n<div class="textae-editor__entity" id="{{id}}" title="{{title}}">\n  <div class="textae-editor__entity__type-values" id="jsPlumb_{{id}}" style="background-color: {{color}}">\n    <div class="textae-editor__entity__type-label" tabindex="0">\n      {{#if href}}\n        <a target="_blank"/ href="{{href}}">{{label}}</a>\n      {{else}}\n        {{label}}\n      {{/if}}\n    </div>\n    {{#each attributes}}\n    <div class="textae-editor__entity__attribute" title="{{title}}" data-pred="{{pred}}" data-obj="{{obj}}" {{#if color}} style="background-color: {{color}}"{{/if}}>\n      <span class="textae-editor__entity__attribute-label">\n        {{#if href}}\n          <a target="_blank"/ href="{{href}}">{{label}}</a>\n        {{else}}\n          {{label}}\n        {{/if}}\n      </span>\n    </div>\n    {{/each}}\n  </div>\n</div>\n');class jt{constructor(t,e,n,i,s,o,r,a=null){this._editor=t,this._span=o,this.typeName=r,this._id=a,this._attributeContainer=e,this._relationContaier=n,this._entityGap=i,this._typeDefinition=s}static mergedTypesOf(t){return function(t){const e=t[t.length-1].typeName,n=[];for(const{typeValues:e}of t)for(const t of e.attributes)n.some((e=>e.pred===t.pred))||n.push(t);return new At(e,n)}(t)}static rejectSameType(t,e,n){return t.filter((t=>!t._isSameType(e,n)))}static filterWithSamePredicateAttribute(t,e){return t.filter((t=>t._hasSpecificPredicateAttribute(e)))}static filterWithoutSamePredicateAttribute(t,e){return t.filter((t=>!t._hasSpecificPredicateAttribute(e)))}get id(){return this._id}set id(t){this._id=t}get span(){return this._span}set span(t){this._span=t}get typeName(){return this._typeName}set typeName(t){this._typeName=String(t)}get typeValues(){return new At(this._typeName,this.attributes)}get attributes(){return this._attributeContainer.all.filter((t=>t.subj===this._id))}getDifferentAttributes(t){return this.attributes.filter((e=>!t.some((t=>e.pred===t.pred&&e.obj===t.obj))))}get relations(){return this._relationContaier.all.filter((t=>t.obj===this.id||t.subj===this.id))}_toHTMLElementContext(t,e,n){return Object.assign({id:W(this._editor,this.id),title:this.id},this.typeValues.toHTMLElementContext(t,e,n))}_isSameType(t,e){return this.typeName===t&&this._hasSameAttributes(e)}_hasSameAttributes(t){return t.length==this.attributes.length&&t.filter((t=>this.attributes.some((e=>t.pred===e.pred&&t.obj===String(e.obj))))).length==this.attributes.length}_hasSpecificPredicateAttribute(t){return this.attributes.some((e=>e.pred===t))}get element(){return document.querySelector(`#${W(this._editor,this.id)}`)}get isDenotation(){return this._span.isDenotation}get isBlock(){return this._span.isBlock}select(){const t=this.element;t.classList.add(q),this.span.isGridPositioned?t.querySelector(".textae-editor__entity__type-label").focus():this.span.entityToFocusOn=this}deselect(){this.element.classList.remove(q)}renderElement(t,e){const n=this._toHTMLElementContext(t,this._typeContainerFor,e);return i=n,g().create(Nt(i));var i}updateElement(t,e,n){const i=this.renderElement(t,e);this.element.replaceWith(i),n&&this.select()}destroyElement(){this.element.remove()}reflectEntityGapInTheHeight(){if(this.isDenotation){const t=this.element;t&&t.setAttribute("style",`padding-top: ${24*this._entityGap.value}px;`)}}get _typeContainerFor(){if(this.isDenotation)return this._typeDefinition.denotation;if(this.isBlock)return this._typeDefinition.block;throw"unknown entity type"}}class Mt extends dt{constructor(t,e,n,i){super(e,"entity","T"),this._editor=t,this._parentContainer=n,this._entityGap=i}get _spanContainer(){return this._parentContainer.span}get _attributeContainer(){return this._parentContainer.attribute}get _relationContainer(){return this._parentContainer.relation}_toModel(t,e){return new jt(this._editor,this._attributeContainer,this._relationContainer,this._entityGap,this._parentContainer.typeDefinition,this._getSpan(e,t),t.obj,t.id)}add(t){if(!t.span)throw new Error(`entity has no span! ${JSON.stringify(t)}`);return t instanceof jt?super.add(t):super.add(new jt(this._editor,this._attributeContainer,this._relationContainer,this._entityGap,this._parentContainer.typeDefinition,this._spanContainer.get(t.span),t.typeName))}moveEntities(t,e){for(const n of e)n.span=t;this._emit("textae.annotationData.entity.move",e)}getAllOfSpan(t){return this.all.filter((e=>t.id===e.span.id))}get denotations(){return this.all.filter((t=>t.isDenotation))}get blocks(){return this.all.filter((t=>t.isBlock))}_getSpan(t,e){return this._spanContainer.get(this._getSpanId(t,e))}_getSpanId(t,e){switch(t){case"denotation":return H(this._editor,e.span.begin,e.span.end);case"block":return z(this._editor,e.span.begin,e.span.end);default:throw`${t} is unknown type span!`}}}function It(t,e){return 0<=t&&t<=e.length}class Lt{constructor(){this._map=new Map}set(t,e){this._map.set(t,e)}get(t){return this._map.has(t)?this._map.get(t)[0]:[]}getInhibitors(t){return this._map.has(t)?this._map.get(t)[1]:[]}get size(){return this._map.size}}class Rt{constructor(t,e="root",n=(()=>!0),i){this._candidates=t||[],this._name=e,this._predicate=n,this._prevValidation=i}and(t,e){return new Rt(this._candidates,t,e,this)}validateAll(){const t=new Lt;let e,n;for(e=this,n=this._candidates;e;e=e._prevValidation)n=e._validate(n,this._candidates,t);return[n,t]}_validate(t,e,n){return this._getRejects(e).length>0&&n.set(this._name,[this._getRejects(e),this._getInhibitors(e)]),this._getAccepts(t)}_getAccepts(t){return t.filter((t=>this._test(t)))}_getRejects(t){return t.filter((t=>!this._test(t)))}_getInhibitors(t){const e=new Map;for(const n of t){const t=this._predicate(n);Array.isArray(t)&&!t[0]&&e.set(n,t[1])}return e}_test(t){const e=this._predicate(t);return Array.isArray(e)?e[0]:e}}function Bt(t,e,n){return new Rt(t).and("hasLength",(t=>t.span.end-t.span.begin>0)).and("inText",(t=>function(t,e){return It(e.begin,t)&&It(e.end,t)}(e,t.span))).and("isNotCrossing",(t=>{const e=ot(n,t.span.begin,t.span.end);return[0===e.length,e]}))}function Ft(t,e){return t.some((t=>t.id===e))}function Ht(t,e){return void 0===e.id||1===t.filter((t=>e.id&&e.id===t.id)).length}function zt(t,e){return t.sourceProperty=e,t}function Wt(t,e){for(const[n,i]of e.getInhibitors("isNotCrossing"))console.warn(`Crossing ${t}: [${n.span.begin}:${n.span.end}](${n.id}) crosses with ${i.map((({id:t,span:e})=>`[${e.begin}:${e.end}](${t})`)).join(", ")}`)}function qt(t,e){const n=(e.typesettings||[]).concat(e.denotations||[]).concat(e.blocks||[]),[i,s]=function(t,e,n){return Bt(e,t,n).validateAll()}(t,e.typesettings,n),[o,r]=function(t,e,n){return Bt(e,t,n).and("uniqueID",(t=>Ht(n,t))).validateAll()}(t,e.denotations,n),[a,l]=function(t,e,n){return Bt(e,t,n).and("uniqueID",(t=>Ht(n,t))).and("uniqueRange",(({span:t})=>1===e.filter((({span:e})=>t.begin===e.begin&t.end===e.end)).length)).validateAll()}(t,e.blocks,n),[c,u]=(h=o.concat(a),d=e.attributes,new Rt(d).and("subject",(t=>Ft(h,t.subj))).and("unique",(t=>function(t,e){return 1===t.filter((t=>t.subj===e.subj&&t.pred===e.pred)).length}(d,t))).validateAll());var h,d;const[p,f]=function(t,e){return new Rt(e).and("object",(e=>Ft(t,e.obj))).and("subject",(e=>Ft(t,e.subj))).validateAll()}(o.concat(a),e.relations);return Wt("TypeSettings",s),Wt("Denotations",r),Wt("Blocks",l),{accept:{denotation:o,attribute:c,relation:p,typeSetting:i,block:a},reject:{wrongRangeDenotations:r.get("hasLength"),outOfTextDenotations:r.get("inText"),wrongRangeBlocks:l.get("hasLength"),outOfTextBlocks:l.get("inText"),duplicatedRangeBlocks:l.get("uniqueRange"),wrongRangeTypesettings:s.get("hasLength"),outOfTextTypesettings:s.get("inText"),duplicatedIDs:r.get("uniqueID").map((t=>zt(t,"denotations"))).concat(l.get("uniqueID").map((t=>zt(t,"blocks")))),boundaryCrossingSpans:s.get("isNotCrossing").map((t=>zt(t,"typesettings"))).concat(r.get("isNotCrossing").map((t=>zt(t,"denotations")))).concat(l.get("isNotCrossing").map((t=>zt(t,"blocks")))),referencedEntitiesDoNotExist:(m=u.get("subject"),g=f.get("object"),_=f.get("subject"),m.map((t=>(t.sourceProperty="attributes",t.alertSubj=!0,t))).concat(g.map((t=>(t.sourceProperty="relations",t.alertObj=!0,t)))).concat(_.map((t=>(t.sourceProperty="relations",t.alertSubj=!0,t))))),duplicatedAttributes:u.get("unique"),hasError:r.size||l.size||u.size||f.size||s.size}};var m,g,_}function Vt(t,e,n,i){n&&(n=n.map(e));for(const e of t)e.addSource(n,i)}function Ut(t,e){return t.id?e+t.id:null}function Gt(t){return Object.assign({},t,{begin:parseInt(t.begin),end:parseInt(t.end)})}function Kt(t,e){return t=t||"",Object.assign({},e,{id:Ut(e,t),span:Gt(e.span)})}function Jt(t,e,n,i,s,o,r){const a=qt(s,o);return Vt([t,e],(t=>Kt(r,t)),a.accept.denotation,"denotation"),Vt([n],(t=>function(t,e){return t=t||"",Object.assign({},e,{id:Ut(e,t),subj:t+e.subj,obj:e.obj})}(r,t)),a.accept.attribute),Vt([i],(t=>function(t,e){return t=t||"",Object.assign({},e,{id:Ut(e,t),subj:t+e.subj,obj:t+e.obj})}(r,t)),a.accept.relation),Vt([t],(t=>Object.assign({},t,{span:Gt(t.span)})),a.accept.typeSetting,"typesetting"),Vt([t,e],(t=>Kt(r,t)),a.accept.block,"block"),a.reject}function Xt(t,e){const[n,i]=function(t,e,n,i,s,o){if(!o.tracks)return[!1,[]];const r=o.tracks;return delete o.tracks,[!0,r.map(((o,r)=>{const a=r+1,l=Jt(t,e,n,i,s,o,`track${a}_`);return l.name=`Track ${a} annotations.`,l}))]}(t.span,t.entity,t.attribute,t.relation,e.text,e),s=Jt(t.span,t.entity,t.attribute,t.relation,e.text,e);s.name="Root annotations.",function(t,e){Vt([t],(t=>Object.assign({id:t.prefix},t)),e)}(t.namespace,e.namespaces||[]);const o=[s].concat(i);return{multitrack:n,hasError:o.some((t=>t.hasError)),rejects:o}}function Yt(t){return t.attribute.all.map((t=>({id:t.id,subj:t.subj,pred:t.pred,obj:t.obj})))}function Qt(t){return t.relation.all.map((t=>({id:t.id,pred:t.typeName,subj:t.subj,obj:t.obj})))}function Zt(t){return t.entity.blocks.map((t=>({id:t.id,span:{begin:t.span.begin,end:t.span.end},obj:t.typeName})))}class te{constructor(){this._isGapShown=!0,this._numberOfGap=2}bind(t){this._callback=t}set show(t){this._isGapShown=t,this._callback(this.value)}get show(){return this._isGapShown}get value(){return this._isGapShown?this._numberOfGap:0}set value(t){this._numberOfGap=t,this._callback(t)}}function ee(t){const e=parseInt(t,10);return isNaN(e)?0:e}function ne(t){const e=window.getComputedStyle(t);t.style.height="auto",t.style.height=t.offsetHeight-ee(e.paddingTop)+20+"px"}class ie{constructor(t,e){this._el=t,this._annotationData=e}get boundingClientRect(){return this._el.getBoundingClientRect()}get lineHeight(){return t=this._el,ee(window.getComputedStyle(t).lineHeight);var t}set lineHeight(t){var e,n;e=this._el,n=t,e.style.lineHeight=`${n}px`,e.style.paddingTop=n/2+"px",ne(this._el)}render(t){this._el.innerHTML=t}updateLineHeight(){this._annotationData.span.allDenotationSpans.length?this.lineHeight=this._annotationData.span.maxHeight:this._resetLineHeight()}_resetLineHeight(){!function(t){t.style.lineHeight=null;const e=window.getComputedStyle(t);t.style.paddingTop=ee(e.lineHeight)/2+"px"}(this._el),ne(this._el)}forceUpdate(){ne(this._el)}}var se=n(9462),oe=n.n(se);function re(t){return t.reduce(((t,e)=>{const n=e.typeName;return t.has(n)?t.set(n,t.get(n)+1):t.set(n,1),t}),new Map)}function ae(t,e,n,i){const s=re(t),o=function(t,e){const n=[];for(const i of t)e.has(i)||n.push(i);return n.sort(((t,e)=>t>e?1:t<e?-1:0)),n}(e.ids(),s);return function(t){const e=Array.from(t.keys());return e.sort(((e,n)=>{const i=t.get(n)-t.get(e);return 0!==i?i:e>n?1:e<n?-1:0})),e}(s).concat(o).map((t=>({id:t,label:e.has(t)&&e.get(t).label||void 0,defaultType:t===n,uri:Ct(t)?t:void 0,color:e.has(t)&&e.get(t).color||i,useNumber:s.get(t)})))}class le{constructor(t){this._map=t.reduce(((t,e)=>t.set(e.id,e)),new Map)}has(t){return this._map.has(t)}get(t){return Object.assign({},this._map.get(t))}set(t,e){t!==e.id&&this._map.delete(t),this._map.set(e.id,e)}delete(t){this._map.delete(t)}ids(){return this._map.keys()}getConfig(t){return function(t,e){return t.has(e)?t.get(e):function(t,e){const n=function(t,e){const n=[];for(const i of t)-1!==i.indexOf("*")&&0===e.indexOf(i.slice(0,-1))&&n.push(i);return n}(t.ids(),e);return 0===n.length?null:t.get(function(t){let e="";for(const n of t)n.length>e.length&&(e=n);return e}(n))}(t,e)}(this,t)}labelIncludes(t){return[...this._map.values()].filter((t=>t.label)).filter((e=>e.label.includes(t)))}clone(){return new Map(this._map)}}class ce{constructor(t,e,n,i,s="#555555"){this._editor=t,this._annotationType=e,this._definedTypes=null,this._getAllInstanceFunc=n,this._defaultColor=s,this._lockStateObservable=i}set definedTypes(t){this._definedTypes=new le(t);const e=t.find((t=>!0===t.default));e?(delete e.default,this._defaultType=e.id):this._defaultType=null}has(t){return this._definedTypes.has(t)}get(t){return this._definedTypes.get(t)}set(t,e){this._definedTypes.set(t,e),this._editor.eventEmitter.emit(`textae.typeDefinition.${this._annotationType}.type.change`,e.id)}addDefinedType(t){if(void 0===t.color){const e=this.getColor(t.id);e!==this._defaultColor&&(t.color=e)}if(void 0===t.label){const e=this.getLabel(t.id);e&&(t.label=e)}this.set(t.id,t)}get definedTypes(){return this._definedTypes}get config(){const t=this._definedTypes.clone();for(const{typeName:e}of this._getAllInstanceFunc())t.has(e)||t.set(e,{id:e});for(const[e,n]of t.entries()){const i=Object.assign({},n);n.id===this.defaultType?i.default=!0:delete i.default,t.set(e,i)}return[...t.values()]}get defaultType(){return this._defaultType?this._defaultType:function(t){const e=re(t);if(0===e.size)return"something";const n=[...e.entries()].sort(),{mostCommonlyUsedType:i}=n.reduce((({max:t,mostCommonlyUsedType:e},[n,i])=>(i>t&&(t=i,e=n),{max:t,mostCommonlyUsedType:e})),{max:0,mostCommonlyUsedType:[n][0]});return i}(this._getAllInstanceFunc())}set defaultType(t){console.assert(t,"id is necessary!"),this._defaultType=t,this._editor.eventEmitter.emit(`textae.typeDefinition.${this._annotationType}.type.default.change`)}get defaultColor(){return this._defaultColor}getColor(t){const e=this._definedTypes.getConfig(t);return e&&e.color||this._defaultColor}getLabel(t){const e=this._definedTypes.getConfig(t);return e&&e.label}getUri(t){return Ct(t)?t:void 0}findByLabel(t){return this.definedTypes.labelIncludes(t).map((t=>({label:`${t.label}@${t.id}`,raw:t})))}get pallet(){return ae(this._getAllInstanceFunc(),this._definedTypes,this.defaultType,this._defaultColor)}delete(t){this._definedTypes.delete(t),this._editor.eventEmitter.emit(`textae.typeDefinition.${this._annotationType}.type.change`,t)}get isLock(){return this._lockStateObservable()}}class ue extends ce{constructor(t,e,n,i){super(t,"entity",e,i,"#77DDDD"),this._attributeContainer=n}findAttribute(t){return this._attributeContainer.get(t)}get attributes(){return this._attributeContainer.attributes}hasAttributeInstance(t){return this._attributeContainer.hasInstance(t)}isSelectionAttributeIndelible(t,e){return this._attributeContainer.isSelectionAttributeValueIndelible(t,e)}get attributeContainer(){return this._attributeContainer}}var he=n(454),de=n.n(he);class pe{constructor(t){this.pred=t.pred,this.valueType=t["value type"]}get JSON(){return{pred:this.pred}}get _valuesClone(){console.assert(this._values,"this._values is necessary to clone!");const t=[];for(const e of this._values)t.push(Object.assign({},e));return t}}class fe extends pe{constructor(t){super(t),this.default=!0,this._label=t.label,this._color=t.color}getLabel(){return this._label?this._label:this.pred}getColor(){return this._color}get JSON(){return Object.assign(super.JSON,{"value type":"flag",default:this.default,label:this._label,color:this._color})}}function me(t,e){return t<=e}function ge(t,e){return t<e}function _e(t){if(t.startsWith("["))return e=>me(new Number(t.replace("[","")),e);if(t.startsWith("("))return e=>ge(new Number(t.replace("(","")),e);throw`${t} is not valid interval notation`}function ve(t){if(t.endsWith("]"))return e=>me(e,new Number(t.replace("]","")));if(t.endsWith(")"))return e=>ge(e,new Number(t.replace(")","")));throw`${t} is not valid interval notation`}class ye{constructor(t){const[e,n]=t.split(",");if(n?(this._lowwerCond=_e(e),this._upperCond=ve(n)):((e.startsWith("[")||e.startsWith("("))&&(this._lowwerCond=_e(e),this._upperCond=t=>!0),(e.endsWith("]")||e.endsWith(")"))&&(this._lowwerCond=t=>!0,this._upperCond=ve(e))),!this._lowwerCond||!this._upperCond)throw`${t} is not valid interval notation`}test(t){return this._lowwerCond(t)&&this._upperCond(t)}}class be extends pe{constructor(t){super(t),this.default=t.default,this.min=t.min,this.max=t.max,this.step=t.step,this._values=t.values||[]}getLabel(t){const e=this._getDef(t);return e&&e.label?e.label:t}getColor(t){const e=this._getDef(t);return e&&e.color?e.color:null}_getDef(t){const e=this._values.filter((t=>"default"!==t.range)).find((e=>new ye(e.range).test(t)));if(e)return e;const n=this._values.find((t=>"default"===t.range));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"numeric",default:this.default,min:this.min,max:this.max,step:this.step,values:super._valuesClone})}}class xe extends pe{constructor(t){super(t),this._values=t.values||[]}get default(){return this.values.find((t=>t.default)).id}getLabel(t){const e=this._getDef(t);if(e&&e.label)return e.label}getColor(t){const e=this._getDef(t);return e&&e.color?e.color:null}get values(){return this._values}get hasOnlyOneValue(){return 1===this._values.length}_getDef(t){return this.values.find((e=>e.id==t))}get JSON(){return Object.assign(super.JSON,{"value type":"selection",values:super._valuesClone})}}class we extends pe{constructor(t){super(t),this.autocompletionWs=t.autocompletion_ws,this.default=t.default,this._values=t.values||[]}getLabel(t){const e=this._getDef(t);if(e&&e.label)return e.label}getColor(t){const e=this._getDef(t);return e&&e.color?e.color:null}_getDef(t){const e=this._values.filter((t=>"default"!==t.pattern)).find((e=>new RegExp(e.pattern).test(t)));if(e)return e;const n=this._values.find((t=>"default"===t.pattern));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"string",autocompletion_ws:this.autocompletionWs,default:this.default,values:super._valuesClone})}}function ke(t){if(t instanceof pe)throw new Error("Give me hash object instead of an AttributeDefinition instance");switch(t["value type"]){case"flag":return new fe(t);case"numeric":return new be(t);case"selection":return new xe(t);case"string":return new we(t);default:throw new Error(`${t["value type"]} of ${JSON.stringify(t)} is Uknown Attribute`)}}class Se{constructor(t,e){this._editor=t,this._annotationDataAttribute=e}set definedTypes(t){this._definedTypes=new Map((t||[]).map((t=>[t.pred,ke(t)])))}create(t,e=null){null!==e&&this._definedTypes.size!==e?this._definedTypes=new Map(Array.from(this._definedTypes.entries()).reduce(((n,[i,s],o)=>(o===e&&n.push([t.pred,ke(t)]),n.push([i,s]),n)),[])):this._definedTypes.set(t.pred,ke(t)),this._editor.eventEmitter.emit("textae.typeDefinition.attribute.create",t.pred)}get(t){return this._definedTypes.get(t)}update(t,e){return this._definedTypes=new Map(Array.from(this._definedTypes.entries()).map((([n,i])=>n===t?[e.pred,ke(e)]:[n,i]))),this._editor.eventEmitter.emit("textae.typeDefinition.attribute.change",e.pred),this.get(e.pred)}move(t,e){this._definedTypes=new Map(de()(this.attributes,t,e).map((t=>[t.pred,t]))),this._editor.eventEmitter.emit("textae.typeDefinition.attribute.move")}delete(t){this._definedTypes.delete(t),this._editor.eventEmitter.emit("textae.typeDefinition.attribute.delete")}get attributes(){return Array.from(this._definedTypes.values())||[]}get config(){return this.attributes.map((t=>t.JSON))}hasInstance(t){return this._annotationDataAttribute.all.some((e=>e.pred===t))}isSelectionAttributeValueIndelible(t,e){return!!this.get(t).hasOnlyOneValue||!!this._annotationDataAttribute.all.some((n=>n.pred===t&&n.obj==e))}getLabel(t,e){if(this._definedTypes.has(t))return this.get(t).getLabel(e)}getColor(t,e){if(this._definedTypes.has(t))return this.get(t).getColor(e)}getIndexOf(t){return Array.from(this._definedTypes.values()).findIndex((e=>e.pred===t))}getAttributeAt(t){return Array.from(this._definedTypes.values())[t-1]}}class Ce{constructor(t,e,n,i){this._editor=t,this._lockStateObservable=new(oe())(!1),this._attributeContainer=new Se(this._editor,i),this._denotationContainer=new ue(t,(()=>e.denotations),this._attributeContainer,this._lockStateObservable),this._relationContainer=new ce(t,"relation",(()=>n.all),this._lockStateObservable),this._blockContainer=new ue(t,(()=>e.blocks),this._attributeContainer,this._lockStateObservable),this._lockStateObservable((()=>this._editor.eventEmitter.emit("textae.typeDefinition.type.lock")))}get denotation(){return this._denotationContainer}get block(){return this._blockContainer}get relation(){return this._relationContainer}get attribute(){return this._attributeContainer}get config(){const t={};return this._denotationContainer.config.length&&(t["entity types"]=this._denotationContainer.config),this._relationContainer.config.length&&(t["relation types"]=this._relationContainer.config),this._attributeContainer.config.length&&(t["attribute types"]=this._attributeContainer.config),this._blockContainer.config.length&&(t["block types"]=this._blockContainer.config),t}get isLock(){return this._lockStateObservable()}lockEdit(){this._lockStateObservable.set(!0)}unlockEdit(){this._lockStateObservable.set(!1)}setTypeConfig(t){t?(this._denotationContainer.definedTypes=t["entity types"]||[],this._relationContainer.definedTypes=t["relation types"]||[],this._attributeContainer.definedTypes=t["attribute types"]||[],this._blockContainer.definedTypes=t["block types"]||[],this.autocompletionWs=t.autocompletion_ws):(this._denotationContainer.definedTypes=[],this._relationContainer.definedTypes=[],this._attributeContainer.definedTypes=[],this._blockContainer.definedTypes=[],this.autocompletionWs=""),this._editor.eventEmitter.emit("textae.typeDefinition.reset")}}class Ee{constructor(t){this._sourceDoc="",this.namespace=new L(t.eventEmitter,"namespace"),this.relation=new Ot(t,t.eventEmitter),this._entityGap=new te,this.entity=new Mt(t,t.eventEmitter,this,this._entityGap),this.attribute=new pt(t.eventEmitter,this.entity),this._textBox=function(t,e){const n='\n    <div class="textae-editor__body">\n      <div class="textae-editor__body__annotation-box"></div>\n      <div class="textae-editor__body__text-box"></div>\n    </div>\n    ';return t[0].innerHTML=n.replace(/[\n\r]+/g,""),new ie(t[0].querySelector(".textae-editor__body__text-box"),e)}(t,this),this.span=new at(t,t.eventEmitter,this.entity,this._textBox,this._entityGap),this._editor=t,this._typeDefinition=new Ce(this._editor,this.entity,this.relation,this.attribute)}reset(t){var e;console.assert(t.text,"This is not a json file of anntations."),this._sourceDoc=t.text,this._textBox.render(t.text),(e=this).span.clear(),e.entity.clear(),e.attribute.clear(),e.relation.clear(),e.namespace.clear();const{multitrack:n,hasError:i,rejects:s}=Xt(this,t);this._editor.eventEmitter.emit("textae.annotationData.all.change",this,n,i,s)}toJson(){return{denotations:(t=this,t.entity.denotations.map((t=>({id:t.id,span:{begin:t.span.begin,end:t.span.end},obj:t.typeName})))),attributes:Yt(this),relations:Qt(this),blocks:Zt(this)};var t}getReplicationRanges(t,e){return function(t,e,n,i,s){return function(t,e,n){const i=t.substring(e,n),s=n-e,o=[];let r=0;for(let e=t.indexOf(i);-1!==e;e=t.indexOf(i,r))r=e+s,o.push({begin:e,end:r});return o}(t,e,n).filter((({begin:t})=>t!==e)).filter((({begin:e,end:n})=>function(t,e,n,i){const s=t.charAt(e-1),o=t.charAt(n);return i(s)&&i(o)}(t,e,n,s))).filter((({begin:t,end:e})=>!i.hasDenotationSpan(t,e))).filter((({begin:t,end:e})=>!i.isBoundaryCrossingWithOtherSpans(t,e)))}(this.sourceDoc,t.begin,t.end,this.span,e)}get entityGap(){return this._entityGap}get textBox(){return this._textBox}get sourceDoc(){return this._sourceDoc.replaceAll(/\r\n/g,"\n")}get typeDefinition(){return this._typeDefinition}}class Pe{constructor(t,e,n){this._emitter=t,this._kindName=e,this._selected=new Map,this._annotationData=n}add(t){if(this._selected.has(t))return;const e=this._annotationData[this._kindName].get(t);this._selected.set(t,e),e.select(),this._triggerChange()}has(t){return this._selected.has(t)}contains(t){for(const e of this._selected.values())if(t(e))return!0;return!1}get all(){return Array.from(this._selected.values())}get size(){return this._selected.size}get some(){return this.size>0}get singleId(){return 1===this._selected.size?this._selected.keys().next().value:null}get single(){const t=this.singleId;return t?this._selected.get(t):null}toggle(t){this._selected.has(t)?this.remove(t):this.add(t)}remove(t){this._selected.has(t)&&(this._selected.get(t).deselect(),this._selected.delete(t),this._triggerChange())}removeInstance(t){this.remove(t.id)}clear(){if(0!==this._selected.size){for(const[t]of this._selected)this._selected.get(t).deselect(),this._selected.delete(t);this._triggerChange()}}_triggerChange(){this._emitter.emit(`textae.selection.${this._kindName}.change`)}}const De=["span","entity","relation"];class Te{constructor(t,e){this._annotationData=e,this._map=new Map(De.map((n=>[n,new Pe(t,n,e)]))),this._map.forEach(((t,e)=>{this[e]=t})),this.entity.isSamePredAttrributeSelected=t=>this.entity.all.some((e=>e.attributes.find((e=>e.pred===t)))),this.entity.findSelectedWithSamePredicateAttribute=t=>this.entity.all.find((e=>e.attributes.find((e=>e.pred===t.pred))));const n=new Map([["textae.annotationData.span.remove",t=>this.span.removeInstance(t)],["textae.annotationData.entity.remove",t=>this.entity.removeInstance(t)],["textae.annotationData.relation.remove",t=>this.relation.removeInstance(t)]]);for(const e of n)t.on(e[0],e[1])}add(t,e){console.assert(this[t]),this[t].add(e)}clear(){this._map.forEach((t=>t.clear()))}selectSpan(t,e){e||this.clear(),this.span.add(t)}selectEntity(t,e){e||this.clear(),this.entity.add(t)}selectRelation(t,e){e||this.clear(),this.relation.add(t)}selectSpanById(t){this.span.add(t)}toggleSpanById(t){this.span.toggle(t)}selectEntityById(t){this.entity.add(t)}}class $e{constructor(){this.reset()}reset(){this._lastEdit=-1,this._lastSave=-1}save(){this._lastSave=this._lastEdit}set lastEdit(t){this._lastEdit=t}get hasAnythingToSave(){return this._lastEdit!==this._lastSave}}class Oe{constructor(t){this.commands=t}get kinds(){return this.commands.reduce(((t,e)=>new Set([...t,...e.kind])),new Set)}get hasCommands(){return this.commands&&this.commands.length>0}isExactly(t){const e=this.kinds;return e.has(t)&&1===e.size}}class Ae{constructor(t){this._resetHistory(),this._eventEmitter=t}push(t){const e=new Oe(t);this._histories.splice(this._pointer+1,this._histories.length-this._pointer,e),this._pointer++,e.kinds.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kinds.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger()}next(){this._pointer++;const t=this._histories[this._pointer];return t.kinds.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),t.kinds.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger(),t}prev(){const t=this._histories[this._pointer];return t.kinds.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._getPrevPrevCommandIndexOf("annotation_command")),t.kinds.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._getPrevPrevCommandIndexOf("configuration_command")),this._pointer--,this._trigger(),t}resetConfiguration(){this._removeConfigurationOperationsFromHistory(),this._pointerForConfiguration.reset(),this._trigger()}resetAllHistories(){this._resetHistory(),this._trigger()}annotatioSaved(){this._pointerForAnnotation.save(),this._trigger()}configurationSaved(){this._pointerForConfiguration.save(),this._trigger()}get hasAnythingToSaveAnnotation(){return this._pointerForAnnotation.hasAnythingToSave}get hasAnythingToSaveConfiguration(){return this._pointerForConfiguration.hasAnythingToSave}get hasAnythingToUndo(){return this._pointer>-1}get hasAnythingToRedo(){return this._pointer<this._histories.length-1}_getPrevPrevCommandIndexOf(t){const e=this._getPrevKindCommand(t);return void 0!==e?e:-1}_getPrevKindCommand(t){for(let e=this._pointer-1;e>=0;e--)if(this._histories[e].kinds.has(t))return e}_trigger(){this._eventEmitter.emit("textae.history.change",this)}_removeConfigurationOperationsFromHistory(){for(let t=0;t<this._histories.length;t++)this._histories[t].isExactly("configuration_command")&&(this._pointer--,this._histories.splice(t,1))}_resetHistory(){this._pointer=-1,this._histories=[],this._pointerForAnnotation=new $e,this._pointerForConfiguration=new $e}}class Ne{constructor(t){this._observable=new(oe())(!1);let e=!1;t.eventEmitter.on("textae.history.change",(t=>{this._observable.set(e||t.hasAnythingToSaveAnnotation)})),t.eventEmitter.on("textae.annotation.save",(()=>{this._observable.set(!1),e=!1})),t.eventEmitter.on("textae.annotationData.all.change",((t,n,i)=>{(n||i)&&(this._observable.set(!0),e=!0),this._observable.set(!1)}))}bind(t){this._observable(t)}get hasChange(){return this._observable()}}const je={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n",""],"non-edge characters":[" ","\n"]};class Me{constructor(){this._delimiterCharacters=[],this._blankCharacters=[]}set(t){const e=Object.assign({},je,t);return this._delimiterCharacters=e["delimiter characters"],this._blankCharacters=e["non-edge characters"],t}isDelimiter(t){return this._delimiterCharacters.indexOf("ANY")>=0?1:this._delimiterCharacters.indexOf(t)>=0}isBlankCharacter(t){return this._blankCharacters.indexOf(t)>=0}removeBlankChractors(t){for(const e of this._blankCharacters)t=t.replaceAll(e,"");return t}}function Ie(t){return t.map((t=>t.execute()))}function Le(t){Ie(function(t){return(t=Object.create(t)).reverse(),t.map((t=>t.revert()))}(t))}function Re(t,e){e?console.log("[command.invoke]",t,e):console.log("[command.invoke]",t)}class Be{get isEmpty(){return!1}}class Fe extends Be{get kind(){return new Set(["annotation_command"])}}class He extends Fe{constructor(t,e,n,i,s,o){super(),this.editor=t,this.annotationData=e,this.selectionModel=n,this.modelType=i,this.isSelectable=s,this.newModel=o}execute(){return this.newModel=this.annotationData[this.modelType].add(this.newModel),this.isSelectable&&this.selectionModel.add(this.modelType,this.newModel.id),Re(`create a new ${this.modelType}: ${this.newModel.id}`),this.newModel}revert(){return new ze(this.editor,this.annotationData,this.selectionModel,this.modelType,this.newModel.id)}}class ze extends Fe{constructor(t,e,n,i,s){super(),this.editor=t,this.annotationData=e,this.selectionModel=n,this.modelType=i,this.id=s}execute(){this.oloModel=this.annotationData[this.modelType].remove(this.id),this.oloModel?Re(`remove a ${this.modelType}: `,this.oloModel):Re(`already removed ${this.modelType}: `,this.id)}revert(){return this.oloModel?new He(this.editor,this.annotationData,this.selectionModel,this.modelType,!1,this.oloModel):{execute:()=>{}}}}class We extends Be{get kind(){return new Set(["configuration_command"])}}class qe extends We{constructor(t,e,n,i=null){super(),this._typeContainer=t,this._attrDef=e,this._index=n,this._indexThatAddDefaultTo=i}execute(){if("selection"===this._attrDef["value type"]&&this._attrDef.values[this._index].default){let t=null;this._attrDef.values.forEach(((e,n)=>{null===t&&n!=this._index&&(t=n)})),this._attrDef.values[t].default=!0}this._deletedValue=this._attrDef.values.splice(this._index,1)[0],"selection"===this._attrDef["value type"]&&null!==this._indexThatAddDefaultTo&&(this._attrDef.values[this._indexThatAddDefaultTo].default=!0),this._typeContainer.update(this._attrDef.pred,this._attrDef),Re(`remove a value from an attrribute:${this._attrDef.pred}, index:${this._index}, updated values: \n ${this._attrDef.values.map((t=>JSON.stringify(t))).join("\n ")}`)}revert(){return new Ve(this._typeContainer,this._attrDef,this._deletedValue,this._index)}}class Ve extends We{constructor(t,e,n,i=null){super(),this._typeContainer=t,"selection"===e["value type"]&&n.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=e.values.findIndex((t=>t.default))),delete e.values[this._indexThatRemoveDefaultFrom].default),e.values.splice(i||e.values.length,0,n),this._attrDef=e,this._value=n,this._index=i}execute(){this._updatedAttrDef=this._typeContainer.update(this._attrDef.pred,this._attrDef).JSON,Re(`add a new value to attrribute:${this._attrDef.pred}, value: ${JSON.stringify(this._value)}, index: ${this._index}, updated values: \n ${this._attrDef.values.map((t=>JSON.stringify(t))).join("\n ")}`)}revert(){return new qe(this._typeContainer,this._updatedAttrDef,this._updatedAttrDef.values.length-1,this._indexThatRemoveDefaultFrom)}}class Ue extends Be{execute(){console.assert(this._subCommands,"_subCommands is necessary!"),this.isEmpty?this.revert=()=>({execute(){}}):(Ie(this._subCommands),this.revert=()=>({_subCommands:this._subCommands,_logMessage:this._logMessage,execute(){Le(this._subCommands),Re(`revert: ${this._logMessage}`)}}),Re(this._logMessage))}get kind(){return this._subCommands.reduce(((t,e)=>new Set([...t,...e.kind])),new Set)}get isEmpty(){return!this._subCommands||0===this._subCommands.length}}class Ge extends Fe{constructor(t,e,n,i){super(),this._annotationData=t,this._attribute=e,this._oldPred=e.pred,this._oldObj=e.obj,this._newPred=n,this._newObj=i}execute(){this.newModel=this._annotationData.attribute.change(this._attribute.id,this._newPred,this._newObj)}revert(){return new Ge(this._annotationData,this.newModel,this._oldPred,this._oldObj)}}class Ke extends We{constructor(t,e,n){super(),this._typeContainer=t,this._attrDef=e,this._changedProperties=n}execute(){const t=this._attrDef.pred,[e,n]=function(t,e){const n=Object.assign({},t.JSON),i=new Map;for(const[s,o]of e.entries())null===o&&void 0!==t[s]?(delete n[s],i.set(s,t[s])):null!==o&&(n[s]=o,i.set(s,void 0===t[s]?null:t[s]));return[n,i]}(this._attrDef,this._changedProperties);this._revertAttrDef=this._typeContainer.update(t,e),this._revertChangedProperties=n,Re(`change old pred:${t} to new attridute definition:${JSON.stringify(e)}`)}revert(){return new Ke(this._typeContainer,this._revertAttrDef,this._revertChangedProperties)}}class Je extends Ue{constructor(t,e,n,i){super();const s=[new Ke(e,n,i)];let o=[];i.has("pred")&&(o=function(t,e,n){return t.attribute.all.filter((t=>t.pred===e)).map((e=>new Ge(t,e,n,e.obj)))}(t,n.pred,i.get("pred"))),this._subCommands=s.concat(o),this._logMessage=`set ${[...i.entries()].map((([t,e])=>`${t}:${e}`))} to attribute definition ${n.pred}`}}class Xe extends Ue{constructor(t,e,n,i,s,o=null){super();const r=e.entity.all.filter((t=>t.attributes.find((t=>t.pred===i.pred)))),a=[];for(const e of r){const n=e.attributes.find((t=>t.pred==i.pred&&t.obj!==s));n&&a.push(new Ge(t,n,null,s))}const l=[];o&&"string"===i.valueType&&!i.JSON.values.some((t=>t.pattern===s))&&l.push(new Ve(n,i.JSON,{pattern:s,label:o})),this._subCommands=a.concat(l),this._logMessage=`update obj ${s} to attributes: ${a.map((({_attribute:t})=>`{id: ${t.id}, subj: ${t.subj}, pred: ${t.pred}, obj: ${t.obj}}`)).join(",")}`}}class Ye extends We{constructor(t,e,n,i){super(),this._editor=t,this._typeContainer=e,this._removeType=n,this._revertDefaultTypeId=i}execute(){const t=this._removeType.id,e=this._typeContainer.get(t);this._typeContainer.delete(t),this._revertDefaultTypeId&&(this._typeContainer.defaultType=this._revertDefaultTypeId),e&&(this._removeType=e),Re(`remove a type:${JSON.stringify(this._removeType)}, default is ${this._typeContainer.defaultType}`)}revert(){return new Qe(this._editor,this._typeContainer,this._removeType)}}class Qe extends We{constructor(t,e,n){super(),this._editor=t,this._typeContainer=e,this._newType=n}execute(){this._typeContainer.addDefinedType(this._newType),this._newType.default&&(this.revertDefaultTypeId=this._typeContainer.defaultType,this._typeContainer.defaultType=this._newType.id),Re(`create a new type:${JSON.stringify(this._newType)}, default is ${this._typeContainer.defaultType}`)}revert(){return new Ye(this._editor,this._typeContainer,this._newType,this.revertDefaultTypeId)}}class Ze extends We{constructor(t,e,n,i,s,o,r){super(),this._editor=t,this._annotationData=e,this._typeContainer=n,this._configType=i,this._id=s,this._changedProperties=o,this._newDefaultTypeId=r}execute(){const t=this._typeContainer.get(this._id),[e,n]=function(t,e){const n=Object.assign({},e),i=new Map;for(const[s,o]of t.entries())null===o&&void 0!==e[s]?(delete n[s],i.set(s,e[s])):null!==o&&(n[s]=o,i.set(s,void 0===e[s]?null:e[s]));return[n,i]}(this._changedProperties,t);this._typeContainer.set(this._id,e),this._updateDefaultType(e),this.revertId=e.id,this.revertChangedProperties=n,Re(`change old type:${JSON.stringify(t)} to new type:${JSON.stringify(e)}, default is ${this._typeContainer.defaultType}`)}_updateDefaultType(t){t.default?(this.revertDefaultTypeId=this._typeContainer.defaultType,this._typeContainer.defaultType=t.id):this._newDefaultTypeId&&(this._typeContainer.defaultType=this._newDefaultTypeId)}revert(){return new Ze(this._editor,this._annotationData,this._typeContainer,this._configType,this.revertId,this.revertChangedProperties,this.revertDefaultTypeId)}}class tn extends Fe{constructor(t,e,n,i,s){super(),this._editor=t,this._annotationData=e,this._annotationType=n,this._id=i,this._newType=s}execute(){this.oldType=this._annotationData[this._annotationType].get(this._id).typeName;const t=this._annotationData[this._annotationType].changeType(this._id,this._newType);Re(`change type of a ${this._annotationType}. oldtype:${this.oldType} ${this._annotationType}:`,t)}revert(){return new tn(this._editor,this._annotationData,this._annotationType,this._id,this.oldType)}}class en extends Ue{constructor(t,e,n,i,s){super();const o=jt.rejectSameType(n.entity.all,i,s),r=o.map((n=>new tn(t,e,"entity",n.id,i))),a=function(t,e,n,i,s){const o=[];for(const r of t){for(const t of r.attributes){const r=e.find((e=>t.pred===e.pred));r?String(t.obj)!==r.obj&&o.push(new Ge(n,t,r.pred,r.obj)):o.push(new ze(i,n,s,"attribute",t.id))}for(const t of e)r.attributes.some((e=>t.pred===e.pred))||o.push(new He(i,n,s,"attribute",!1,{subj:r.id,pred:t.pred,obj:t.obj}))}return o}(o,s,e,t,n);this._subCommands=r.concat(a),this._logMessage=`set type ${i} and ${JSON.stringify(s)} to entities ${o}`}}class nn extends Ue{constructor(t,e,n,i,s,o,r){super();const a=[];if(i){const n=r.get(s);n.id?n.label!==i&&a.push(new Ze(t,e,r,"entity",s,new Map([["label",i]]))):a.push(new Qe(t,r,{id:s,label:i}))}const l=new en(t,e,n,s,o);l.isEmpty||a.push(l),this._subCommands=a,this._logMessage=`change entity value: ${s} attribute: ${JSON.stringify(o)}  label: ${i} `}}class sn extends Ue{constructor(t,e,n,i){super();const s=n.relation.all.filter((t=>t.typeName!==i)).map((t=>t.id));this._subCommands=s.map((n=>new tn(t,e,"relation",n,i))),this._logMessage=`set type ${i} to relations ${s}`}}class on extends Ue{constructor(t,e,n,i,s,o){super();const r=[];if(i){const n=o.get(s);n.id?n.label!==i&&r.push(new Ze(t,e,o,"relation",s,new Map([["label",i]]))):r.push(new Qe(t,o,{id:s,label:i}))}const a=new sn(t,e,n,s);a.isEmpty||r.push(a),this._subCommands=r,this._logMessage=`change relation value: ${s} label: ${i} `}}function rn(t,e,n,i,s,o){return t.has(e)?new Ze(n,i,t,s,e,o,null):new Qe(n,t,Object.assign({id:e},Object.fromEntries(o)))}class an extends Ue{constructor(t,e,n,i,s,o,r){super();const a=[rn(n,o,t,e,i,r)];let l=[];r.has("id")&&(l=function(t,e,n,i,s){return t[e].all.filter((t=>t.typeName===n)).map((n=>new tn(i,t,e,n.id,s)))}(e,s,o,t,r.get("id"))),this._subCommands=a.concat(l),this._logMessage=`set ${[...r.entries()].map((([t,e])=>`${t}:${e}`))} to type definition ${o}`}}class ln extends Ue{constructor(t,e,n,i){super();const s=n.entity.all.filter((t=>t.typeName!==i)).map((t=>t.id));this._subCommands=s.map((n=>new tn(t,e,"entity",n,i))),this._logMessage=`set type ${i} to entities ${s}`}}class cn extends Ue{constructor(t,e,n,i){super();const s=t.attribute.getSameAttributes(e,n).map((e=>new Ge(t,e,null,i)));this._subCommands=s,this._logMessage=`update obj ${i} to attributes: ${s.map((({_attribute:t})=>`{id: ${t.id}, subj: ${t.subj}, pred: ${t.pred}, obj: ${t.obj}}`)).join(",")}`}}class un extends We{constructor(t,e,n,i,s){super(),this._typeContainer=t,this._attrDef=e,this._index=n,this._value=i,this._indexThatRemoveDefaultFrom=s}execute(){if("selection"===this._attrDef["value type"]&&(!this._attrDef.values[this._index].default&&this._value.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=this._attrDef.values.findIndex((t=>t.default))),delete this._attrDef.values[this._indexThatRemoveDefaultFrom].default),this._attrDef.values[this._index].default&&!this._value.default))if(1===this._attrDef.values.length)this._value.default=!0;else{let t=null;this._attrDef.values.forEach(((e,n)=>{null===t&&n!=this._index&&(t=n)})),delete this._value.default,this._attrDef.values[t].default=!0,this._indexThatRemoveDefaultFrom=t}this._valueBeforeChange=this._attrDef.values.splice(this._index,1,this._value)[0],this._typeContainer.update(this._attrDef.pred,this._attrDef),Re(`change value of attrribute:${this._attrDef.pred}, oldValue: ${JSON.stringify(this._valueBeforeChange)}, newValue: ${JSON.stringify(this._value)}`)}revert(){return new un(this._typeContainer,this._attrDef,this._index,this._valueBeforeChange,this._indexThatRemoveDefaultFrom)}}class hn extends Ue{constructor(t,e,n,i,s,o){super(),this._subCommands=[new un(e,n,i,s,o)],"selection"===n["value type"]&&n.values[i].id!==s.id&&this._subCommands.push(new cn(t,n.pred,n.values[i].id,s.id)),this._logMessage="change attribute definition."}}class dn extends We{constructor(t,e){super(),this._typeContainer=t,this._removeAttrdef=e,this._index=t.getIndexOf(e.pred)}execute(){this._typeContainer.delete(this._removeAttrdef.pred),Re(`remove an attrribute definition:${JSON.stringify(this._removeAttrdef)}, index:${this._index}`)}revert(){return new pn(this._typeContainer,this._removeAttrdef.JSON,this._index)}}class pn extends We{constructor(t,e,n){super(),this._typeContainer=t,this._newAttrDef=e,this._index=n}execute(){"numeric"===this._newAttrDef["value type"]&&(this._newAttrDef.min=this._newAttrDef.min||0,this._newAttrDef.max=this._newAttrDef.max||0,this._newAttrDef.step=this._newAttrDef.step||0,this._newAttrDef.default=this._newAttrDef.default||0),"selection"!==this._newAttrDef["value type"]||this._newAttrDef.values||(this._newAttrDef.values=[{id:"default",default:!0}]),this._typeContainer.create(this._newAttrDef,this._index),Re(`create a new attrribute definition:${JSON.stringify(this._newAttrDef)}, index: ${this._index}`)}revert(){return new dn(this._typeContainer,this._newAttrDef)}}function fn(t,e,n,i,s){return jt.filterWithoutSamePredicateAttribute(i.entity.all,e.pred).map((o=>new He(n,t,i,"attribute",!1,{id:null,subj:o.id,pred:e.pred,obj:s||e.default})))}class mn extends Ue{constructor(t,e,n,i,s){super(),this._subCommands=fn(e,i,t,n,s),this._logMessage=`create attirbute ${i.pred}:${i.default} to entity ${n.entity.all.map((t=>t.id)).join(", ")}`}}class gn extends Ue{constructor(t,e,n,i,s){super(),this._subCommands=i.map((({obj:i,pred:o})=>new He(t,e,n,"attribute",!1,{subj:s,obj:i,pred:o}))),this._logMessage=`create attributes ${i.map((({obj:t,pred:e})=>`obj:${t} pred:${e}`))} for entity ${s}`}}class _n extends Fe{constructor(t,e,n,i,s,o){super(),this._editor=t,this._annotationData=e,this._selectionModel=n,this._spanId=i,this._typeName=s,this._attributes=o}execute(){const t=this._createEntityCommand(),e=this._createAttributesCommands(Ie([t]).pop().id);Ie([e]),this.revert=()=>({execute(){Le([t].concat(e)),Re(`revert create a type for span: ${this.id}`)}}),Re(`create a type for span: ${this._spanId}`)}_createEntityCommand(){return new He(this._editor,this._annotationData,this._selectionModel,"entity",!0,{span:this._spanId,typeName:this._typeName})}_createAttributesCommands(t){return new gn(this._editor,this._annotationData,this._selectionModel,this._attributes,t)}}class vn extends Ue{constructor(t,e,n,i,s,o){super();const r=z(t,i,s),a=new He(t,e,n,"span",!0,{begin:i,end:s,isBlock:!0}),l=new _n(t,e,n,r,o,[]);this._subCommands=[a,l],this._logMessage=`create a span ${r}`}}class yn extends Ue{constructor(t,e,n,i){super();const s=n.span.all.filter((t=>t.isDenotation)).map((t=>t.id));this._subCommands=s.map((s=>new He(t,e,n,"entity",!0,{span:s,typeName:i}))),this._logMessage=`create a ${i} type entity to ${s}`}}class bn extends Ue{constructor(t,e,n,i,s,o,r){super(),this._subCommands=[new He(t,e,n,"span",!0,{begin:s,end:o})].concat(r.map((s=>new _n(t,e,n,i,s.typeName,s.attributes)))),this._logMessage=`create a span ${i}`}}class xn extends Ue{constructor(t,e,n,i,s,o){super(),this._subCommands=e.getReplicationRanges(i,o).map((({begin:i,end:o})=>{const r=H(t,i,o);return new bn(t,e,n,r,i,o,s)})),this._logMessage=`replicate a span ${H(t,i.begin,i.end)}`}}class wn extends Ue{constructor(t,e,n,i,s,o,r){super();const a=[new At(s)],l=H(t,i.begin,i.end);this._subCommands=[new bn(t,e,n,l,i.begin,i.end,a)],this._logMessage=`create a span ${i.begin}:${i.end} with type ${a[0].name}`,o&&i.end-i.begin<=100&&(this._subCommands.push(new xn(t,e,n,{begin:i.begin,end:i.end},a,r)),this._logMessage=`${this._logMessage} and replicate auto`)}}class kn extends We{constructor(t,e,n){super(),this._typeContainer=t,this._oldIndex=e,this._newIndex=n}execute(){this._typeContainer.move(this._oldIndex,this._newIndex),Re(`move the attrribute definition: from ${this._oldIndex} to ${this._newIndex}`)}revert(){return new kn(this._typeContainer,this._newIndex,this._oldIndex)}}class Sn extends Fe{constructor(t,e,n,i){super(),this._annotationData=t,this._spanId=e,this._begin=n,this._end=i}execute(){const{id:t,begin:e,end:n}=this._annotationData.span.moveBlockSpan(this._spanId,this._begin,this._end);this._newId=t,this._oldBegin=e,this._oldEnd=n,Re(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new Sn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}class Cn extends Fe{constructor(t,e,n,i){super(),this._annotationData=t,this._spanId=e,this._begin=n,this._end=i}execute(){const{id:t,begin:e,end:n}=this._annotationData.span.moveDenotationSpan(this._spanId,this._begin,this._end);this._newId=t,this._oldBegin=e,this._oldEnd=n,Re(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new Cn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}function En(t,e){return t.entities.every((t=>e.includes(t)))}class Pn extends Ue{constructor(t,e){super(),this._subCommands=[];for(const[n,i]of e.entries())this._subCommands.push(new Dn(t,n,i));this._logMessage=`revert: move entities ${Array.from(e.values()).flat().map((t=>t.id)).join(", ")}`}}class Dn extends Fe{constructor(t,e,n){super(),this._annotationData=t,this._span=e,this._entities=n}execute(){this._moveMap=this._entities.reduce(((t,e)=>(t.has(e.span)?t.get(e.span).push(e):t.set(e.span,[e]),t)),new Map);const t=`move entities: ${Array.from(this._moveMap.entries()).map((([t,e])=>`${e.map((t=>t.id)).join(", ")} from ${e[0].span.id} to ${this._span.id}`)).join(", ")}`;this._annotationData.entity.moveEntities(this._span,this._entities),Re(t)}revert(){return new Pn(this._annotationData,this._moveMap)}}class Tn extends Ue{constructor(t,e,n,i){console.assert(n.span.single,"There must be one span to be pasted."),super();const s=[new Dn(e,n.span.single,i)];for(const o of i.map((t=>t.span)).reduce(((t,e)=>(t.add(e),t)),new Set).values())En(o,i)&&s.push(new ze(t,e,n,"span",o.id));this._subCommands=s,this._logMessage="paste cut entities"}}class $n extends Ue{constructor(t,e,n,i){super();const s=n.span.all.map((t=>t.id));this._subCommands=s.map((s=>i.map((i=>new _n(t,e,n,s,i.typeName,i.attributes))))).flat(),this._logMessage=`paste types ${i} to ${s}`}}function On(t,e,n,i){var s,o;return function(t,e,n,i){return t.map((t=>new ze(e,n,i,"attribute",t.id)))}((s=n.entity.all,o=i,s.reduce(((t,e)=>{const n=e.attributes.find((t=>t.pred===o.pred));return n&&t.push(n),t}),[])),t,e,n)}class An extends Ue{constructor(t,e,n,i){super();const s=On(t,e,n,i);this._subCommands=s,this._logMessage=`remove attirbute ${i.pred} to entity ${n.entity.all.map((t=>t.id)).join(", ")}`}}class Nn extends Ue{constructor(t,e,n,i){super();const s=new ze(t,e,n,"entity",i);const o=e.entity.get(i).relations.map((i=>new ze(t,e,n,"relation",i.id))),r=e.entity.get(i).attributes.map((i=>new ze(t,e,n,"attribute",i.id)));this._subCommands=o.concat(r).concat(s),this._logMessage=`remove an entity ${i}`}}class jn extends Ue{constructor(t,e,n,i){super();const s=e.span.get(i).entities.map((({id:i})=>new Nn(t,e,n,i))),o=new ze(t,e,n,"span",i);this._subCommands=s.concat(o),this._logMessage=`remove a span ${i}`}}function Mn(t,e){return t.filter((t=>t.span===e))}class In extends Ue{constructor(t,e,n){super();const i=n.entity.all,s=new Set(i.map((t=>t.span)));let o=[];for(const r of s.values())En(r,i)?o.push(new jn(t,e,n,r.id)):o=o.concat(Mn(i,r).map((i=>new Nn(t,e,n,i.id))));this._subCommands=o,this._logMessage=`remove entities ${i.map((t=>t.id))} from spans ${[...s.values()].map((t=>t.id))}`}}class Ln extends Ue{constructor(t,e,n){super();const i=n.span.all.map((t=>t.id)),s=n.relation.all.map((t=>t.id));this._subCommands=[].concat(s.map((i=>new ze(t,e,n,"relation",i))),n.entity.some?[new In(t,e,n)]:[],i.map((i=>new jn(t,e,n,i)))),this._logMessage=`remove selected ${i.concat(n.entity.all.map((t=>t.id))).concat(s)}`}}class Rn extends Ue{constructor(t,e,n,i){super(),this._subCommands=fn(e,i,t,n);const s=On(t,e,n,i);this._subCommands=this._subCommands.concat(s),this._logMessage=`toggle flag attirbute ${i.pred} to entity ${n.entity.all.map((t=>t.id)).join(", ")}`}}class Bn{constructor(t,e,n){this._editor=t,this._annotationData=e,this._selectionModel=n}addValueToAttributeDefinitionCommand(t,e){return new Ve(this._annotationData.typeDefinition.attribute,t.JSON,e)}changeAttributeDefinitionCommand(t,e){return new Je(this._annotationData,this._annotationData.typeDefinition.attribute,t,e)}changeAttributesOfSelectedEntitiesWithSamePred(t,e,n){return new Xe(this._annotationData,this._selectionModel,this._annotationData.typeDefinition.denotation,t,e,n)}changeEntityTypeCommand(t,e,n,i){return new nn(this._editor,this._annotationData,this._selectionModel,t,e,n,i)}changeRelationLabelCommand(t,e,n){return new on(this._editor,this._annotationData,this._selectionModel,t,e,n)}changeTypeDefinitionCommand(t,e,n,i){return new an(this._editor,this._annotationData,this._annotationData.typeDefinition[t],t,e,n,i)}changeTypeOfSelectedRelationsCommand(t,e){return new sn(this._editor,this._annotationData,this._selectionModel,t,e)}changeTypeOfSelectedEntitiesCommand(t){return new ln(this._editor,this._annotationData,this._selectionModel,t)}changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(t,e,n){return new hn(this._annotationData,this._annotationData.typeDefinition.attribute,t,e,n)}createAttributeDefinitionCommand(t){return new pn(this._annotationData.typeDefinition.attribute,t)}createAttributeToSelectedEntitiesCommand(t,e=null){return new mn(this._editor,this._annotationData,this._selectionModel,t,e)}createBlockSpanCommand(t){return new vn(this._editor,this._annotationData,this._selectionModel,t.begin,t.end,this._annotationData.typeDefinition.block.defaultType)}createDefaultTypeEntityToSelectedSpansCommand(t){return new yn(this._editor,this._annotationData,this._selectionModel,t)}createRelationCommand(t){return new He(this._editor,this._annotationData,this._selectionModel,"relation",!0,t)}createSpanAndAutoReplicateCommand(t,e,n){return new wn(this._editor,this._annotationData,this._selectionModel,t,this._annotationData.typeDefinition.denotation.defaultType,e,n)}createTypeDefinitionCommand(t,e){return new Qe(this._editor,this._annotationData.typeDefinition[t],e)}deleteAttributeDefinitionCommand(t){return new dn(this._annotationData.typeDefinition.attribute,t)}moveAttributeDefintionComannd(t,e){return new kn(this._annotationData.typeDefinition.attribute,t,e)}moveBlockSpanCommand(t,e,n){return new Sn(this._annotationData,t,e,n)}moveDenotationSpanCommand(t,e,n){return new Cn(this._annotationData,t,e,n)}moveEntitiesToSelectedSpansCommand(t){return new Tn(this._editor,this._annotationData,this._selectionModel,t)}pasteTypesToSelectedSpansCommand(t){return new $n(this._editor,this._annotationData,this._selectionModel,t)}replicateSpanCommand(t,e,n){return new xn(this._editor,this._annotationData,this._selectionModel,t,e,n)}removeAttributesOfSelectedEntitiesByPredCommand(t){return new An(this._editor,this._annotationData,this._selectionModel,t)}removeSpanCommand(t){return new jn(this._editor,this._annotationData,this._selectionModel,t)}removeSelectedComand(){return new Ln(this._editor,this._annotationData,this._selectionModel)}removeTypeDefinitionCommand(t,e){return new Ye(this._editor,this._annotationData.typeDefinition[t],e)}removeValueFromAttributeDefinitionCommand(t,e){return new qe(this._annotationData.typeDefinition.attribute,t.JSON,e)}toggleFlagAttributeToSelectedEntitiesCommand(t){return new Rn(this._editor,this._annotationData,this._selectionModel,t)}}class Fn{constructor(t,e,n,i){this._editor=t,this._annotationData=e,this._selectionModel=n,this._history=i}invoke(t){t.isEmpty||(Ie([t]),this._history.push([t]))}undo(){if(this._history.hasAnythingToUndo){this._selectionModel.clear(),this._editor.focus();const t=this._history.prev();t.kinds.has("configuration_command")&&j().success("configuration has been undone"),Le(t.commands)}}redo(){if(this._history.hasAnythingToRedo){this._selectionModel.clear();const t=this._history.next();t.kinds.has("configuration_command")&&j().success("configuration has been redo"),Ie(t.commands)}}get factory(){return new Bn(this._editor,this._annotationData,this._selectionModel,this._annotationData.typeDefinition)}}class Hn{constructor(t,e,n){this._editor=t,this._annotationData=e,this._renderer=n}async update(){this._editor.eventEmitter.emit("textae.annotationPosition.position-update.start"),this._annotationData.span.arrangeDenotationEntityPosition(),this._annotationData.span.arrangeBackgroundOfBlockSpanPosition(),this._annotationData.span.arrangeBlockEntityPosition(),this._renderer.arrangeRelationPositionAll(),this._editor.eventEmitter.emit("textae.annotationPosition.position-update.end")}}const zn="ui-to-be-cut";class Wn{constructor(t,e){this._annotationData=t,this._selectionModel=e}render(t){!function(t,e,n){if(e.element)return;const i=e.span.gridElement||e.span.renderGridElement(),s=e.renderElement(n,t);i.insertAdjacentElement("beforeend",s)}(this._annotationData.typeDefinition.attribute,t,this._annotationData.namespace),t.reflectEntityGapInTheHeight()}change(t){t.updateElement(this._annotationData.namespace,this._annotationData.typeDefinition.attribute,this._selectionModel.entity.has(t.id)),t.reflectEntityGapInTheHeight()}remove(t){!function(t){0===t.span.entities.length?t.span.destroyGridElement():t.destroyElement()}(t)}updateEntityHtmlelement(t){for(const e of this._annotationData.entity.all)(e.typeName===t||t.lastIndexOf("*")===t.length-1&&e.typeName.indexOf(0===t.slice(0,-1)))&&this.change(e)}updateAttribute(t){for(const e of jt.filterWithSamePredicateAttribute(this._annotationData.entity.all,t))this.change(e)}updateEntityHtmlelementAll(){for(const t of this._annotationData.entity.all)this.change(t)}}class qn{constructor(t,e){this._editor=t,this._entityRenderer=e}render(t){!function(t,e,n){e.traverse((t=>{null!==t.element&&t.destroyElement()})),e.traverse((e=>e.renderElement(Z(t))),(t=>{for(const e of t.entities)n.render(e)}))}(this._editor,t,this._entityRenderer)}remove(t){if(t.hasStyle){const e=t.element;e.removeAttribute("tabindex"),e.classList.remove("textae-editor__span")}else t.destroyElement()}}function Vn(t,e,n,i){const s=new qn(e,i);e.eventEmitter.on("textae.annotationData.all.change",(()=>{!function(t,e,n){Z(t).innerHTML="",function(t,e){for(const n of t.span.topLevel)e.render(n)}(e,n)}(e,t,s),n.reset()})).on("textae.annotationData.span.add",(t=>s.render(t))).on("textae.annotationData.span.remove",(t=>{s.remove(t),t.destroyGridElement()})).on("textae.annotationData.entity.add",(t=>{i.render(t)})).on("textae.annotationData.entity.change",(t=>{i.change(t)})).on("textae.annotationData.entity.remove",(t=>{i.remove(t)})).on("textae.annotationData.entity.move",(t=>{for(const e of t)i.remove(e),i.render(e)})).on("textae.annotationData.relation.change",(t=>{n.change(t)})).on("textae.annotationData.relation.remove",(t=>{n.remove(t)})).on("textae.annotationData.attribute.add",(t=>{i.change(t.entity)})).on("textae.annotationData.attribute.change",(t=>{i.change(t.entity)})).on("textae.annotationData.attribute.remove",(t=>{i.change(t.entity)}))}function Un(t,e,n){const i=n.jsPlumbConnection;i.setColor(),i.label=Dt(n,t,e)}function Gn(t,e,n,i,s){(function(t,e){if(!t.relation.get(e))return!1;const n=t.relation.get(e);return t.entity.get(n.subj).span.isGridRendered&&t.entity.get(n.obj).span.isGridRendered})(e,n.id)&&n.renderElement(i,t,e,s)}class Kn{constructor(t,n,i){var s;this._editor=t,this._annotationData=n,this._selectionModel=i,this._jsPlumbInstance=(s=Z(t),jsPlumb.getInstance({ConnectionsDetachable:!1,Container:e()(s),Endpoint:["Dot",{radius:1}]}))}arrangePositionAll(){for(const t of this._annotationData.relation.all)t.isRendered?t.resetCurviness():Gn(this._editor,this._annotationData,t,this._jsPlumbInstance,this._annotationData.typeDefinition);this._jsPlumbInstance.repaintEverything();for(const t of this._selectionModel.relation.all)t.isRendered&&t.jsPlumbConnection.select()}reset(){this._jsPlumbInstance.reset()}change(t){Un(this._annotationData,this._annotationData.typeDefinition,t)}changeType(t){for(const e of this._annotationData.relation.all)(e.typeName===t||t.lastIndexOf("*")===t.length-1&&e.typeName.indexOf(0===t.slice(0,-1)))&&Un(this._annotationData,this._annotationData.typeDefinition,e)}changeAll(){this._annotationData.relation.all.map((t=>{Un(this._annotationData,this._annotationData.typeDefinition,t)}))}remove(t){t.destroyElement()}}class Jn{constructor(t,e,n){const i=new Wn(e,n);this._relationRenderer=new Kn(t,e,n),Vn(e,t,this._relationRenderer,i),function(t,e,n){t.eventEmitter.on("textae.typeDefinition.entity.type.change",(t=>e.updateEntityHtmlelement(t))).on("textae.typeDefinition.attribute.change",(t=>e.updateAttribute(t))).on("textae.typeDefinition.relation.type.change",(t=>n.changeType(t))).on("textae.typeDefinition.reset",(()=>{e.updateEntityHtmlelementAll(),n.changeAll()}))}(t,i,this._relationRenderer),this._editor=t,this._annotationData=e}arrangeRelationPositionAll(){this._relationRenderer.arrangePositionAll()}}var Xn=n(296),Yn=n.n(Xn);class Qn{constructor(t,e){this._textBox=e,this._enable=!1,t.eventEmitter.on("textae.control.button.push",(({buttonName:t,state:e})=>{"line-height-auto"===t&&(this._enable=e)}))}updateLineHeight(){this._enable&&this._textBox.updateLineHeight()}}class Zn{constructor(t,e){this._editor=t,this._entityContainer=e}on(t){for(const e of this._getConnectsOf(t))e.pointup()}off(t){for(const e of this._getConnectsOf(t))e.pointdown()}_getConnectsOf(t){return this._entityContainer.get(t).relations.filter((t=>t.isRendered)).map((t=>t.jsPlumbConnection))}}var ti=n(9438),ei=n.n(ti);function ni(t){return t.closest(".textae-editor__entity")}class ii{constructor(t,e,n){const i=new Jn(t,e,n);this._annotationPosition=new Hn(t,e,i),this._annotationData=e,e.entityGap.bind((()=>this._applyEntityGap())),function(t){t.eventEmitter.on("textae.clipBoard.change",((t,e)=>{for(const e of t)e.element&&e.element.classList.add(zn);for(const t of e)t.element&&t.element.classList.remove(zn)}))}(t),function(t,e,n){const i=new Qn(t,n),s=Yn()((()=>{i.updateLineHeight(),e.update()}),100);t.eventEmitter.on("textae.annotationData.all.change",s).on("textae.annotationData.entity.add",s).on("textae.annotationData.entity.change",s).on("textae.annotationData.entity.remove",s).on("textae.annotationData.entity.move",s).on("textae.annotationData.relation.add",s).on("textae.annotationData.attribute.add",s).on("textae.annotationData.attribute.change",s).on("textae.annotationData.attribute.remove",s).on("textae.annotationData.span.move",(()=>{e.update()}))}(t,this._annotationPosition,this._annotationData.textBox),function(t,e){t.eventEmitter.on("textae.annotationPosition.position-update.start",(()=>e.startWait())).on("textae.annotationPosition.position-update.end",(()=>e.endWait()))}(t,new P(t)),function(t,e){const n=t[0];ei()(n,".textae-editor__entity__type-values","mouseover",(t=>e.on(ni(t.target).title))),ei()(n,".textae-editor__entity__type-values","mouseout",(t=>e.off(ni(t.target).title)))}(t,new Zn(t,e.entity))}updateDisplay(){this._annotationData.textBox.forceUpdate(),this._annotationPosition.update()}updateLineHeight(){this._annotationData.textBox.updateLineHeight(),this._annotationPosition.update()}_applyEntityGap(){for(const t of this._annotationData.entity.denotations)t.reflectEntityGapInTheHeight();this.updateLineHeight()}}const si="Init",oi="View Term",ri="View Instance",ai="Term Centric",li="Instance / Relation",ci="Block Centric",ui="Block / Relation",hi="Relation Edit";var di=n(4676),pi=n.n(di);function fi(t){return!t.relation.some}function mi(t,e){switch(t.currentState){case hi:!function(t,e){fi(e)?t.setState(ai):t.setState(li)}(t,e);break;case ri:case ui:t.setState(li);break;case oi:case ci:t.setState(ai)}}function gi(t){return`enter:${t}`}class _i{constructor(t){this._editor=t}setViewWithRelation(){this._setCssClassFor("view-with-relation")}setViewWithoutRelation(){this._setCssClassFor("view-without-relation")}setDenotationWithRelation(){this._setCssClassFor("denotation-with-relation")}setDenotationWithoutRelation(){this._setCssClassFor("denotation-without-relation")}setBlockWithRelation(){this._setCssClassFor("block-with-relation")}setBlockWithoutRelation(){this._setCssClassFor("block-without-relation")}setRelation(){this._setCssClassFor("relation")}_setCssClassFor(t){for(const t of this._editor.classList)t.startsWith("textae-editor__mode")&&this._editor.classList.remove(t);this._editor.classList.add(`textae-editor__mode--${t}`)}}class vi{constructor(t,e,n,i,s,o){this._editor=t,this._editorCSSClassForMode=new _i(t[0]),this._entityGap=e,this._noEdit=n,this._editEntity=i,this._editBlock=s,this._editRelation=o}toViewWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae.editMode.transition",oi),this._noEdit(),this._editorCSSClassForMode.setViewWithoutRelation()}toViewWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae.editMode.transition",ri),this._noEdit(),this._editorCSSClassForMode.setViewWithRelation()}toEditDenotationWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae.editMode.transition",ai),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithoutRelation()}toEditDenotationWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae.editMode.transition",li),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithRelation()}toEditBlockWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae.editMode.transition",ci),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithoutRelation()}toEditBlockWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae.editMode.transition",ui),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithRelation()}toEditRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae.editMode.transition",hi),this._noEdit(),this._editRelation(),this._editorCSSClassForMode.setRelation()}}class yi{constructor(t,e,n,i,s,o){const r=new(pi())({states:[si,ai,li,ci,ui,hi,oi,ri]});r.config(si,{to:{exclude:[hi]}}),r.config(ai,{from:{exclude:[ri]},to:{exclude:[si,ri]}}),r.config(li,{from:{exclude:[oi]},to:{exclude:[si,oi]}}),r.config(ci,{from:{exclude:[ri]},to:{exclude:[si,ri]}}),r.config(ui,{from:{exclude:[oi]},to:{exclude:[si,oi]}}),r.config(hi,{from:{exclude:[si]},to:{exclude:[si,oi]}}),r.config(oi,{from:{exclude:[li,hi]},to:{exclude:[si,li]}}),r.config(ri,{from:{exclude:[ai]},to:{exclude:[si,ai]}});!function(t,e){t.on(gi(ai),(()=>e.toEditDenotationWithoutRelation())).on(gi(li),(()=>e.toEditDenotationWithRelation())).on(gi(ci),(()=>e.toEditBlockWithoutRelation())).on(gi(ui),(()=>e.toEditBlockWithRelation())).on(gi(hi),(()=>e.toEditRelation())).on(gi(oi),(()=>e.toViewWithoutRelation())).on(gi(ri),(()=>e.toViewWithRelation()))}(r,new vi(t,e,n,i,s,o)),this._m=r}get currentState(){return this._m.currentState}setState(t){this._m.setState(t)}pushView(){!function(t){switch(t.currentState){case ai:case ci:t.setState(oi);break;case li:case ui:case hi:t.setState(ri)}}(this)}pushTerm(t){mi(this,t)}pushBlock(t){!function(t,e){switch(t.currentState){case ai:t.setState(ci);break;case li:t.setState(ui);break;case hi:fi(e)?t.setState(ci):t.setState(ui);break;case ri:t.setState(ui);break;case oi:t.setState(ci)}}(this,t)}toggleSimple(){!function(t){switch(t.currentState){case ai:t.setState(li);break;case ci:t.setState(ui);break;case oi:t.setState(ri);break;case li:t.setState(ai);break;case ui:t.setState(ci);break;case ri:t.setState(oi);break;default:throw new Error(`Invalid state: ${t.currentState}`)}}(this)}changeByShortcut(){!function(t){switch(t.currentState){case ri:t.setState(li);break;case oi:t.setState(ai);break;case ai:t.setState(ci);break;case li:t.setState(ui);break;case ci:case ui:t.setState(hi);break;case hi:t.setState(ri)}}(this)}}class bi extends s{constructor(t,e,n,i,s,o){super(t,e,{label:"OK",class:o},n),this.promise=new Promise((t=>{const e=()=>{const e=s();e&&t(e),super.close()};this._option.buttons[0].click=e,ei()(super.el,i,"keyup",(t=>{13===t.keyCode&&e()}))}))}}const xi=b().compile('\n<div class="textae-editor__create-attribute-definition-dialog__container">\n  <div class="textae-editor__create-attribute-definition-dialog__row">\n    <label>Attribute type:</label>\n    <select class="textae-editor__create-attribute-definition-dialog__value-type">\n      <option value="flag"{{#if flagSelected}} selected{{/if}}>flag</option>\n      <option value="selection"{{#if selectionSelected}} selected{{/if}}>selection</option>\n      <option value="string"{{#if stringSelected}} selected{{/if}}>string</option>\n      <option value="numeric"{{#if numericSelected}} selected{{/if}}>numeric</option>\n    </select>\n  </div>\n  <div class="textae-editor__create-attribute-definition-dialog__row">\n    <div class="textae-editor__create-attribute-definition-dialog__pred">\n      <label>Predicate:</label><br>\n      <input value="{{pred}}">\n    </div>\n    {{#if showDefault}}\n      <div class="textae-editor__create-attribute-definition-dialog__default">\n        <label>Default:</label><br>\n        <input value="{{default}}">\n      </div>\n    {{/if}}\n  </div>\n  {{#if showNumeric}}\n    <div class="textae-editor__create-attribute-definition-dialog__row">\n      <div class="textae-editor__create-attribute-definition-dialog__min">\n        <label>Min:</label><br>\n        <input type="text" value="{{min}}">\n      </div>\n      <div class="textae-editor__create-attribute-definition-dialog__max">\n        <label>Max:</label><br>\n        <input type="text" value="{{max}}">\n      </div>\n      <div class="textae-editor__create-attribute-definition-dialog__step">\n        <label>Step:</label><br>\n        <input type="text" value="{{step}}">\n      </div>\n    </div>\n  {{/if}}\n</div>');function wi(t){return xi(t)}function ki(t,e){return t.querySelector(`${e} input`)&&t.querySelector(`${e} input`).value}class Si extends bi{constructor(){super("Please enter new attribute definition",wi({}),{},".textae-editor__create-attribute-definition-dialog__pred",(()=>{const t=super.el.querySelector(".textae-editor__create-attribute-definition-dialog__value-type").value,e=ki(super.el,".textae-editor__create-attribute-definition-dialog__pred"),n=ki(super.el,".textae-editor__create-attribute-definition-dialog__default"),i=ki(super.el,".textae-editor__create-attribute-definition-dialog__min"),s=ki(super.el,".textae-editor__create-attribute-definition-dialog__max"),o=ki(super.el,".textae-editor__create-attribute-definition-dialog__step");return"numeric"===t?{"value type":t,pred:e,default:parseFloat(n),min:parseFloat(i),max:parseFloat(s),step:parseFloat(o)}:{"value type":t,pred:e,default:n,min:i,max:s,step:o}})),ei()(super.el,".textae-editor__create-attribute-definition-dialog__value-type","change",(t=>{const e=t.target.value,n={pred:ki(super.el,".textae-editor__create-attribute-definition-dialog__pred"),default:ki(super.el,".textae-editor__create-attribute-definition-dialog__default"),min:ki(super.el,".textae-editor__create-attribute-definition-dialog__min"),max:ki(super.el,".textae-editor__create-attribute-definition-dialog__max"),step:ki(super.el,".textae-editor__create-attribute-definition-dialog__step"),showDefault:"numeric"===e||"string"===e,showNumeric:"numeric"===e};n[`${e}Selected`]=!0;const i=wi(n);super.el.closest(".ui-dialog-content").innerHTML=i}))}}const Ci=b().compile('\n<div class="textae-editor__edit-attribute-definition-dialog__container">\n  <div class="textae-editor__edit-attribute-definition-dialog__row">\n    <div class="textae-editor__edit-attribute-definition-dialog__pred">\n      <label>Predicate:</label><br>\n      <input value="{{pred}}">\n    </div>\n    {{#if showDefault}}\n      <div class="textae-editor__edit-attribute-definition-dialog__default">\n        <label>Default:</label><br>\n        <input value="{{default}}">\n      </div>\n    {{/if}}\n  </div>\n  {{#if showNumeric}}\n    <div class="textae-editor__edit-attribute-definition-dialog__row">\n      <div class="textae-editor__edit-attribute-definition-dialog__min">\n        <label>Min:</label><br>\n        <input type="text" value="{{min}}">\n      </div>\n      <div class="textae-editor__edit-attribute-definition-dialog__max">\n        <label>Max:</label><br>\n        <input type="text" value="{{max}}">\n      </div>\n      <div class="textae-editor__edit-attribute-definition-dialog__step">\n        <label>Step:</label><br>\n        <input type="text" value="{{step}}">\n      </div>\n    </div>\n  {{/if}}\n</div>');function Ei(t,e){return!Number.isNaN(parseFloat(e))&&t!==parseFloat(e)}class Pi extends bi{constructor(t){const e=t.JSON;var n;super("Please enter new values",(n={pred:e.pred,default:e.default,min:e.min,max:e.max,step:e.step,showDefault:"numeric"===t.valueType||"string"===t.valueType,showNumeric:"numeric"===t.valueType},Ci(n)),{},".textae-editor__edit-attribute-definition-dialog__pred",(()=>{const n=ki(super.el,".textae-editor__edit-attribute-definition-dialog__pred"),i=ki(super.el,".textae-editor__edit-attribute-definition-dialog__default"),s=ki(super.el,".textae-editor__edit-attribute-definition-dialog__min"),o=ki(super.el,".textae-editor__edit-attribute-definition-dialog__max"),r=ki(super.el,".textae-editor__edit-attribute-definition-dialog__step"),a=new Map;return e.pred!==n&&a.set("pred",n),"string"===t.valueType&&e.default!==i&&a.set("default",i),"numeric"===t.valueType&&(Ei(e.default,i)&&a.set("default",parseFloat(i)),Ei(e.min,s)&&a.set("min",parseFloat(s)),Ei(e.max,o)&&a.set("max",parseFloat(o)),Ei(e.step,r)&&a.set("step",parseFloat(r))),a}))}}const Di=b().compile('\n<div class="textae-editor__add-value-to-attribute-dialog__container">\n  <div class="textae-editor__add-value-to-attribute-dialog__row">\n    <div class="textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern">\n      <label>{{labelForRangeOrIdOrPattern}}:</label><br>\n      <input value="{{rangeOrIdOrPattern}}">\n    </div>\n    {{#if showDefault}}\n    <div class="textae-editor__add-value-to-attribute-dialog__default">\n      <label>default:</label><br>\n      <input type="checkbox" {{#if default}}checked="checked"{{/if}}>\n    </div>\n    {{/if}}\n    <div class="textae-editor__add-value-to-attribute-dialog__label">\n      <label>label:</label><br>\n      <input value="{{label}}">\n    </div>\n    <div class="textae-editor__add-value-to-attribute-dialog__color">\n      <label>color:</label><br>\n      <input value="{{color}}">\n    </div>\n  </div>\n</div>');function Ti(t){return t.closest(".ui-dialog").querySelector(".textae-editor__add-value-to-attribute-dialog__ok-button")}class $i extends bi{constructor(t,e={}){const n={label:e.label,color:e.color};switch(t){case"numeric":n.labelForRangeOrIdOrPattern="range",n.rangeOrIdOrPattern=e.range;break;case"selection":n.labelForRangeOrIdOrPattern="id",n.rangeOrIdOrPattern=e.id,n.showDefault=!0,n.default=e.default;break;case"string":n.labelForRangeOrIdOrPattern="pattern",n.rangeOrIdOrPattern=e.pattern;break;default:throw new Error(`${t} is Uknown Attribute`)}super("Please enter new values",Di(n),{},".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern",(()=>{const e=ki(super.el,".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern"),n=ki(super.el,".textae-editor__add-value-to-attribute-dialog__label"),i=ki(super.el,".textae-editor__add-value-to-attribute-dialog__color"),s={};switch(n&&(s.label=n),i&&(s.color=i),t){case"numeric":s.range=e;break;case"selection":s.id=e,s.default=super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__default input").checked;break;case"string":s.pattern=e}return s}),"textae-editor__add-value-to-attribute-dialog__ok-button"),"numeric"===t&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(t=>{const e=t.target.value;try{new ye(e),Ti(super.el).removeAttribute("disabled")}catch(t){Ti(super.el).setAttribute("disabled","disabled")}})),"string"===t&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(t=>{const e=t.target.value;try{new RegExp(e),Ti(super.el).removeAttribute("disabled")}catch(t){Ti(super.el).setAttribute("disabled","disabled")}})),super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__color").addEventListener("input",(t=>{const e=t.target.value;!e||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?Ti(super.el).removeAttribute("disabled"):Ti(super.el).setAttribute("disabled","disabled")}))}}const Oi=b().compile('\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--predicate" value="{{pred}}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--value" type="number" min="{{min}}" max="{{max}}" step="{{step}}" value="{{value}}">\n  </div>\n</div>');class Ai extends bi{constructor(t,e){var n;super("Please edit number",(n={pred:e.pred,value:e.obj,min:t.min,max:t.max,step:t.step},Oi(n)),{},".textae-editor__edit-value-and-pred-dialog--value",(()=>{const t=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value");return{newObj:parseFloat(t.value)}}))}}function Ni(t,e,n){const i=new Ai(t,e);i.promise.then((({newObj:e})=>{const i=n.factory.changeAttributesOfSelectedEntitiesWithSamePred(t,e);n.invoke(i)})),i.open()}const ji=b().compile('\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--predicate" value="{{pred}}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><span></span><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--value" value="{{value}}">\n  </div>\n</div>');function Mi(t,e,n,i){if(!t)return void i(e);const s=new XMLHttpRequest,o=new URL(t,location);o.searchParams.append("term",n),s.open("GET",o.href,!0),s.onload=function(){if(this.status>=200&&this.status<400){const t=JSON.parse(this.response).filter((t=>0===e.filter((e=>t.id===e.raw.id)).length)).map((t=>({label:`${t.label}@${t.id}`,raw:t})));i(e.concat(t))}},s.send()}n(2993);function Ii(){e().ui.autocomplete.prototype._renderItem=function(t,n){const[i,s]=n.label.split("@");return e()("<li>").append(e()(`<div>${i} <i class="fa fa-globe"></i>${s}</div>`)).appendTo(t)},e().ui.autocomplete.prototype._resizeMenu=function(){}}function Li(t,n,i,s){e()(t).autocomplete({source:(t,e)=>{n&&(n.innerText=""),Mi(i,s(t.term),t.term,e)},minLength:3,select:(e,i)=>function(t,e,n){return t.value=n.item.raw.id,e&&(e.innerText=n.item.raw.label),!1}(t,n,i)})}Ii();class Ri extends bi{constructor(t,e){var n;super("Please edit string",(n={pred:t.pred,value:t.obj},ji(n)),{height:250},".textae-editor__edit-value-and-pred-dialog--value",(()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value,newLabel:super.el.querySelector("span").innerText}))),Li(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector("span"),e.autocompletionWs,(()=>[]))}}function Bi(t,e,n){const i=new Ri(t,n);i.promise.then((({newObj:t,newLabel:i})=>{e.invoke(function(t,e,n,i){return t?e.factory.changeAttributesOfSelectedEntitiesWithSamePred(n,t,i):e.factory.removeAttributesOfSelectedEntitiesByPredCommand(n)}(t,e,n,i))})),i.open()}b().registerPartial("attributePartialTemplate",'\n<div class="textae-editor__edit-type-dialog__attribute">\n<div class="textae-editor__edit-type-dialog__attribute__predicate">\n  <label>Predicate:</label><br>\n  <input class="textae-editor__edit-type-dialog__attribute__predicate__value" value="{{this.pred}}" disabled="disabled">\n</div>\n<div class="textae-editor__edit-type-dialog__attribute__value">\n  <label>Value:</label><br>\n  <input class="textae-editor__edit-type-dialog__attribute__value__value" value="{{this.obj}}" disabled="disabled">\n</div>\n<div class="textae-editor__edit-type-dialog__attribute__edit">\n  <button type="button" class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__edit__value" data-predicate="{{this.pred}}"{{#if this.editDisabled}} disabled="disabled"{{/if}}>edit</button>\n</div>\n<div class="textae-editor__edit-type-dialog__attribute__remove">\n  <button type="button" class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__remove__value">remove</button>\n</div>\n</div>');const Fi=b().compile('\n<div class="textae-editor__edit-type-dialog__container">\n  <div class="textae-editor__edit-type-dialog__type">\n    <div class="textae-editor__edit-type-dialog__type__predicate">\n      <label>Predicate:</label><br>\n      <span class="textae-editor__edit-type-dialog__type__predicate__value">type</span>\n    </div>\n    <div class="textae-editor__edit-type-dialog__type__value ui-front">\n      <label>Value:</label><br>\n      <input class="textae-editor__edit-type-dialog__type__value__value" value="{{value}}">\n    </div>\n    <div class="textae-editor__edit-type-dialog__type__label">\n      <label>Label:</label><br>\n      <span class="textae-editor__edit-type-dialog__type__label__value">{{label}}</span>\n    </div>\n  </div>\n  <div class="textae-editor__edit-type-dialog__attributes">\n    {{#each attributes}}\n    {{> attributePartialTemplate}}\n    {{/each}}\n  </div>\n</div>');b().compile("\n{{> attributePartialTemplate}}\n");function Hi(t,e,n){!function(t){ei()(t,".textae-editor__edit-type-dialog__attribute__remove__value","click",(t=>{const e=t.target.closest(".textae-editor__edit-type-dialog__attribute");e.parentElement.removeChild(e)}))}(n)}class zi extends bi{constructor(t,e,n,i){var s;super("Please edit type and attributes",(s={value:i.typeName,label:e.getLabel(i.typeName),attributes:i.attributes.map((t=>({pred:t.pred,obj:t.obj,editDisabled:!0===t.obj})))},Fi(s)),{minHeight:300,width:800},".textae-editor__edit-type-dialog__type__value__value",(()=>function(t){const e=t.querySelector(".textae-editor__edit-type-dialog__type__value__value").value,n=t.querySelector(".textae-editor__edit-type-dialog__type__label__value").innerHTML,i=[];for(const e of t.querySelectorAll(".textae-editor__edit-type-dialog__attribute"))i.push({pred:e.querySelector(".textae-editor__edit-type-dialog__attribute__predicate__value").value,obj:e.querySelector(".textae-editor__edit-type-dialog__attribute__value__value").value});return{typeName:e,label:n,attributes:i}}(super.el)),"textae-editor__edit-type-dialog__ok-button"),Hi(0,0,super.el),ei()(super.el,".textae-editor__edit-type-dialog__attribute__edit__value","click",(n=>{super.close();const i=n.target.dataset.predicate,s=e.findAttribute(i);t.eventEmitter.emit("textae.editTypeDialog.attribute.value.edit",s)}));Li(super.el.querySelector(".textae-editor__edit-type-dialog__type__value__value"),super.el.querySelector(".textae-editor__edit-type-dialog__type__label__value"),n,(t=>e.findByLabel(t)))}}class Wi{constructor(t,e,n,i){this._configType=t,this._annotationType=e,this._typeContainer=n,this._commander=i}addType(t){return console.assert(t.id,"id is necessary!"),this._commander.factory.createTypeDefinitionCommand(this._configType,t)}changeType(t,e){return this._commander.factory.changeTypeDefinitionCommand(this._configType,this._annotationType,t,e)}jsPlumbConnectionClicked(t){const e=t.link;if(e){const t=e.getAttribute("href");window.open(t,"_blank")}}removeType(t,e){const n={id:t,label:e||""};if(void 0===t)throw new Error("You must set the type id to remove.");return this._commander.factory.removeTypeDefinitionCommand(this._configType,n)}changeLabelHandler(){}manipulateAttribute(){}}class qi extends Wi{constructor(t,e,n,i,s,o){super("denotation","entity",e,n),this._editor=t,this._annotationData=i,this._selectionModel=s,this._attributeEditor=o}changeTypeOfSelectedElement(t){return this._commander.factory.changeTypeOfSelectedEntitiesCommand(t)}changeLabelHandler(t){if(this._selectionModel.entity.some){const e=({typeName:t,label:e,attributes:n})=>{const i=this._commander.factory.changeEntityTypeCommand(e,t,n,this._typeContainer);t&&this._commander.invoke(i)},n=new zi(this._editor,this._typeContainer,t,jt.mergedTypesOf(this._selectionModel.entity.all));n.promise.then(e),n.open()}}manipulateAttribute(t,e){e?this._attributeEditor.deleteAt(t):this._attributeEditor.addOrEditAt(t)}selectAll(t){this._selectionModel.entity.clear();for(const{id:e}of this._annotationData.entity.findByType(t))this._selectionModel.entity.add(e)}}function Vi(){window.getSelection().removeAllRanges()}function Ui(t,e,n,i){const s=t.span.singleId;if(e.shiftKey&&s){t.clear();for(const e of i(s,n))t.selectSpanById(e)}else e.ctrlKey||e.metaKey?t.toggleSpanById(n):(t.clear(),t.selectSpanById(n))}function Gi(t){return t.classList.contains("textae-editor__span")}function Ki(t){return t.classList.contains("textae-editor__body__text-box")}function Ji(t){return t.classList.contains("textae-editor__style")}function Xi(t){return t.classList.contains("textae-editor__block")}class Yi{constructor(){this.selection=window.getSelection()}get isParentOfAnchorNodeTextBox(){return Ki(this.parentOfAnchorNode)}get isParentOfAnchorNodeDenotationSpan(){return Gi(this.parentOfAnchorNode)}get isParentOfAnchorNodeBlockSpan(){return Xi(this.parentOfAnchorNode)}get isParentOfAnchorNodeStyleSpan(){return Ji(this.parentOfAnchorNode)}get isParentOfFocusNodeTextBox(){return Ki(this.parentOfFocusNode)}get isParentOfFocusNodeDenotationSpan(){return Gi(this.parentOfFocusNode)}get isParentOfFocusNodeBlockSpan(){return Xi(this.parentOfFocusNode)}get isParentOfFocusNodeStyleSpan(){return Ji(this.parentOfFocusNode)}get isParentOfBothNodesSame(){return this.parentOfAnchorNode===this.parentOfFocusNode}get isParentsParentOfAnchorNodeAndFocusedNodeSame(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode.parentElement}get isAnchorNodeParentIsDescendantOfSelectedSpan(){return this.parentOfAnchorNode.closest(".ui-selected")}get isFocusOneDownUnderAnchor(){return this.parentOfAnchorNode===this.parentOfFocusNode.parentElement}get ancestorDenotationSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__span")}get ancestorDenotationSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__span")}get ancestorBlockSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__block")}get ancestorBlockSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__block")}get doesFitInOneBlockSpan(){return this.ancestorBlockSpanOfAnchorNode===this.ancestorBlockSpanOfFocusNode}get isAnchorOneDownUnderFocus(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode}get parentOfAnchorNode(){return this.selection.anchorNode.parentElement}get parentOfFocusNode(){return this.selection.focusNode.parentElement}}class Qi{constructor(t,e,n,i,s){this._annotationData=e,this._selectionModel=n,this._spanEditor=s,this._editor=t,this._pallet=i}bodyClicked(){this._pallet.hide(),this._selectionModel.clear()}textBoxClicked(t){this._pallet.hide();"Range"===window.getSelection().type?(this._spanEditor.editFor(new Yi),t.stopPropagation()):this._selectionModel.clear()}denotationSpanClicked(t){2===t.button&&Vi();const e=window.getSelection();"Caret"!==e.type&&"None"!==e.type||this._selectSpan(t,t.target.id),"Range"===e.type&&this._spanEditor.editFor(new Yi)}blockSpanClicked(t){2===t.button&&Vi();const e=window.getSelection();"Caret"===e.type&&this._selectionModel.clear(),"Range"===e.type&&this._spanEditor.editFor(new Yi)}styleSpanClicked(t){2===t.button&&Vi();const e=window.getSelection();if("Caret"===e.type){const e=t.target.closest(".textae-editor__span");e?this._selectSpan(t,e.id):this._selectionModel.clear()}"Range"===e.type&&this._spanEditor.editFor(new Yi)}entityClicked(){this._editor.focus()}typeValuesClicked(t){const e=ni(t.target).title;this._annotationData.entity.get(e).isDenotation&&this._selectionModel.selectEntity(e,t.ctrlKey||t.metaKey)}_selectSpan(t,e){Ui(this._selectionModel,t,e,((t,e)=>this._annotationData.span.rangeDenotationSpan(t,e)))}}function Zi(t,e){return function(t,e){const n=e.parentElement;if(Ki(n))return 0;if(Gi(n)||Xi(n)||Ji(n))return t.get(n.id).begin;throw new Error(`Can not get position of a node : ${e} ${e.data}`)}(t,e)+function(t){let e=0;for(const n of t.parentElement.childNodes){if(n==t)break;"#text"===n.nodeName?e+=n.nodeValue.length:e+=n.textContent.length}return e}(e)}class ts{constructor(t,e){this._spanContainer=t,this._selection=e.selection}get anchor(){return Zi(this._spanContainer,this._selection.anchorNode)+this._selection.anchorOffset}get focus(){return Zi(this._spanContainer,this._selection.focusNode)+this._selection.focusOffset}}function es(t,e,n,i,s){for(;s(t(n,i));)i+=e;return i}const ns=function(t,e){return t.charAt(e)},is=function(t,e,n){return es(ns,1,t,e,n)},ss=function(t,e,n){return es(ns,-1,t,e,n)};class os{backFromBegin(t,e,n){}forwardFromEnd(t,e,n){}forwardFromBegin(t,e,n){}backFromEnd(t,e,n){}}function rs(t,e){return[t.charAt(e),t.charAt(e-1)]}function as(t,e){return[t.charAt(e),t.charAt(e+1)]}function ls(t,e,n){return""!==n[0]&&!t(n[1])&&!e(n[1])||e(n[0])}class cs extends os{backFromBegin(t,e,n){return function(t,e,n){return es(rs,-1,t,e,(t=>t[1]&&!n(t[0])&&!n(t[1])))}(t,is(t,e,(t=>n.isBlankCharacter(t))),(t=>n.isDelimiter(t)))}forwardFromEnd(t,e,n){return function(t,e,n){return es(as,1,t,e,(t=>t[1]&&!n(t[0])&&!n(t[1])))}(t,ss(t,e,(t=>n.isBlankCharacter(t))),(t=>n.isDelimiter(t)))}forwardFromBegin(t,e,n){return function(t,e,n){return es(rs,1,t,e,n)}(t,e,(t=>ls((t=>n.isBlankCharacter(t)),(t=>n.isDelimiter(t)),t)))}backFromEnd(t,e,n){return function(t,e,n){return es(as,-1,t,e,n)}(t,e,(t=>ls((t=>n.isBlankCharacter(t)),(t=>n.isDelimiter(t)),t)))}}class us extends os{backFromBegin(t,e,n){return is(t,e,(t=>n.isBlankCharacter(t)))}forwardFromEnd(t,e,n){return ss(t,e,(t=>n.isBlankCharacter(t)))}forwardFromBegin(t,e,n){return is(t,e,(t=>n.isBlankCharacter(t)))}backFromEnd(t,e,n){return ss(t,e,(t=>n.isBlankCharacter(t)))}}class hs{constructor(t){this._positions=t}get begin(){return this._positions.anchor<this._positions.focus?this._positions.anchor:this._positions.focus}get end(){return this._positions.anchor<this._positions.focus?this._positions.focus:this._positions.anchor}}function ds(t,e,n,i){const s=new ts(t.span,n),o=new hs(s);return{begin:e.backFromBegin(t.sourceDoc,o.begin,i),end:e.forwardFromEnd(t.sourceDoc,o.end-1,i)+1}}function ps(t){Vi(),setTimeout((()=>alert(t)),10)}function fs(t,e,n,i,s,o,r){const{begin:a,end:l}=function(t,e,n,i,s){const{anchor:o,focus:r}=new ts(t.span,n),a=t.span.get(s);return o<r?a.end===r?{begin:a.end,end:a.end}:{begin:e.forwardFromBegin(t.sourceDoc,r,i),end:a.end}:a.begin===r?{begin:a.begin,end:a.begin}:{begin:a.begin,end:e.backFromEnd(t.sourceDoc,r-1,i)+1}}(t,n,s,o,i);if(t.span.isBoundaryCrossingWithOtherSpans(a,l))return ps("A span cannot be shrinked to make a boundary crossing."),!1;const c=t.span.hasDenotationSpan(a,l);return a<l&&!c?(r(a,l),!1):(e.invoke(e.factory.removeSpanCommand(i)),!0)}function ms(t,e,n,i,s,o,r,a,l){if(o){n.clear();const c=tt(t,o);fs(e,i,s,o,r,a,l)&&c&&n.selectSpan(c.id)}}function gs(t,e){return e.isAnchorNodeParentIsDescendantOfSelectedSpan?t.span.singleId:e.isAnchorOneDownUnderFocus?e.selection.anchorNode.parentNode.id:null}function _s(t,e,n,i,s,o,r){t.clear();const{begin:a,end:l}=function(t,e,n,i,s){const o=new ts(t.span,i);return function(t,e,n,i,s,o){const r=t.span.get(n);return i>s?{begin:e.backFromBegin(t.sourceDoc,s,o),end:r.end}:{begin:r.begin,end:e.forwardFromEnd(t.sourceDoc,s-1,o)+1}}(t,e,n,o.anchor,o.focus,s)}(e,n,i,s,o);e.span.isBoundaryCrossingWithOtherSpans(a,l)?ps("A span cannot be expanded to make a boundary crossing."):e.span.hasDenotationSpan(a,l)||r(a,l)}function vs(t,e,n){const i=new ts(t.span,n),s=new hs(i),o=t.sourceDoc.substring(s.begin,s.end);return e.removeBlankChractors(o).length>0}function ys(t,e){return t.valueOf("boundary-detection")?t=>e.isDelimiter(t):()=>!0}class bs{constructor(t,e,n,i,s,o){this._editor=t,this._annotationData=e,this._selectionModel=n,this._commander=i,this._buttonController=s,this._spanConfig=o}editFor(t){if(t.isParentOfAnchorNodeTextBox){if(t.isParentOfFocusNodeTextBox)return void this._anchorNodeInTextBoxFocusNodeInTextBox(t);if(t.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInTextBoxFocusNodeInDenotationSpan(t);if(t.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInTextBoxFocusNodeInBlockSpan(t);if(t.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInTextBoxFocusNodeInStyleSpan(t)}if(t.isParentOfAnchorNodeDenotationSpan){if(t.isParentOfFocusNodeTextBox)return void this._anchorNodeInDenotationSpanFocusNodeInTextBox(t);if(t.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInDenotationSpanFocusNodeInDenotationSpan(t);if(t.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInDenotationSpanFocusNodeInBlockSpan(t);if(t.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInDenotationSpanFocusNodeInStyleSpan(t)}if(t.isParentOfAnchorNodeBlockSpan){if(t.isParentOfFocusNodeTextBox)return void this._anchorNodeInBlockSpanFocusNodeInTextBox(t);if(t.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInBlockSpanFocusNodeInDenotationSpan(t);if(t.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInBlockSpanFocusNodeInBlockSpan(t);if(t.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInBlockSpanFocusNodeInStyleSpan(t)}if(t.isParentOfAnchorNodeStyleSpan){if(t.isParentOfFocusNodeTextBox)return void this._anchorNodeInStyleSpanFocusNodeInTextBox(t);if(t.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInStyleSpanFocusNodeInDenotationSpan(t);if(t.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInStyleSpanFocusNodeInBlockSpan(t);if(t.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInStyleSpanFocusNodeInStyleSpan(t)}}_anchorNodeInTextBoxFocusNodeInTextBox(t){this._create(t)}_anchorNodeInTextBoxFocusNodeInDenotationSpan(t){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(t)}_anchorNodeInTextBoxFocusNodeInBlockSpan(){Vi()}_anchorNodeInTextBoxFocusNodeInStyleSpan(t){if(t.ancestorDenotationSpanOfFocusNode){const e=t.ancestorDenotationSpanOfFocusNode.id;this._shrink(t,e)}else this._create(t)}_anchorNodeInDenotationSpanFocusNodeInTextBox(t){const e=gs(this._selectionModel,t);this._expand(t,e)}_anchorNodeInDenotationSpanFocusNodeInDenotationSpan(t){if(t.isParentOfBothNodesSame){const e=this._annotationData.span.get(t.parentOfAnchorNode.id),n=new ts(this._annotationData.span,t);n.anchor===e.begin||n.anchor===e.end?this._isFocusInSelectedSpan(t)?this._shrinkSelectedSpan(t):this._shrink(t,e.id):this._create(t)}else if(t.parentOfFocusNode.closest(`#${t.parentOfAnchorNode.id}`))this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(t);else if(t.parentOfAnchorNode.closest(`#${t.parentOfFocusNode.id}`))if(this._isFocusInSelectedSpan(t))this._shrinkSelectedSpan(t);else{const e=gs(this._selectionModel,t);this._expand(t,e)}else Vi()}_anchorNodeInDenotationSpanFocusNodeInBlockSpan(t){const e=gs(this._selectionModel,t);this._expand(t,e)}_anchorNodeInDenotationSpanFocusNodeInStyleSpan(t){if(t.isParentsParentOfAnchorNodeAndFocusedNodeSame){const e=t.parentOfAnchorNode.id;this._expand(t,e)}else if(t.ancestorDenotationSpanOfFocusNode){const e=t.ancestorDenotationSpanOfFocusNode.id;this._shrink(t,e)}else;}_anchorNodeInBlockSpanFocusNodeInTextBox(){Vi()}_anchorNodeInBlockSpanFocusNodeInDenotationSpan(t){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(t)}_anchorNodeInBlockSpanFocusNodeInBlockSpan(t){this._create(t)}_anchorNodeInBlockSpanFocusNodeInStyleSpan(){Vi()}_anchorNodeInStyleSpanFocusNodeInTextBox(t){if(t.ancestorDenotationSpanOfAnchorNode){const e=t.ancestorDenotationSpanOfAnchorNode.id;this._expand(t,e)}else this._create(t)}_anchorNodeInStyleSpanFocusNodeInDenotationSpan(t){if(this._isFocusInSelectedSpan(t))this._shrinkSelectedSpan(t);else if(t.ancestorDenotationSpanOfAnchorNode&&t.ancestorDenotationSpanOfAnchorNode.parentElement===t.parentOfFocusNode){const e=t.ancestorDenotationSpanOfAnchorNode.id;this._expand(t,e)}else t.isFocusOneDownUnderAnchor||t.isAnchorOneDownUnderFocus?this._shrink(t,t.parentOfFocusNode.id):Vi()}_anchorNodeInStyleSpanFocusNodeInBlockSpan(){Vi()}_anchorNodeInStyleSpanFocusNodeInStyleSpan(t){(t.isParentOfBothNodesSame||t.isParentsParentOfAnchorNodeAndFocusedNodeSame)&&this._create(t),Vi()}_isFocusInSelectedSpan(t){const e=this._selectionModel.span.single;if(!e)return!1;const n=new ts(this._annotationData.span,t).focus;return e.begin<n&&n<e.end}_create(t){vs(this._annotationData,this._spanConfig,t)&&(this._selectionModel.clear(),function(t,e,n,i,s,o,r){const{begin:a,end:l}=ds(t,n,s,o);if(t.span.isBoundaryCrossingWithOtherSpans(a,l))return;if(t.span.hasDenotationSpan(a,l))return;const c=function(t,e,n,i){return t.factory.createSpanAndAutoReplicateCommand({begin:e.begin,end:e.end},n,i)}(e,{begin:a,end:l},i,r);e.invoke(c)}(this._annotationData,this._commander,this._spanAdjuster,this._isReplicateAuto,t,this._spanConfig,ys(this._buttonController,this._spanConfig))),Vi()}_expand(t,e){e&&_s(this._selectionModel,this._annotationData,this._spanAdjuster,e,t,this._spanConfig,((t,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(e,t,n))})),Vi()}_shrinkSelectSpanOrOneUpFocusParentDenotationSpan(t){this._isFocusInSelectedSpan(t)?this._shrinkSelectedSpan(t):t.isFocusOneDownUnderAnchor&&this._shrink(t,t.parentOfFocusNode.id),Vi()}_shrinkSelectedSpan(t){this._shrink(t,this._selectionModel.span.singleId)}_shrink(t,e){ms(this._editor,this._annotationData,this._selectionModel,this._commander,this._spanAdjuster,e,t,this._spanConfig,((t,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(e,t,n))})),Vi()}get _isReplicateAuto(){return this._buttonController.valueOf("replicate-auto")}get _spanAdjuster(){return this._buttonController.valueOf("boundary-detection")?new cs:new us}}const xs=b().compile('\n<div class="textae-editor__edit-type-definition-dialog__container">\n  <div class="textae-editor__edit-type-definition-dialog__input-box">\n  <label>Id:</label><br>\n  <input class="textae-editor__edit-type-definition-dialog--id" value={{id}}>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__input-box">\n  <label>Label:<span></span></label><br>\n  <input value="{{label}}">\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__color-picker">\n  <label>Color:<input class="textae-editor__edit-type-definition-dialog__color-picker__input" type="color" value="{{color}}"></label>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__set-default">\n  <label>Default type:<input class="textae-editor__edit-type-definition-dialog__set-default__input" type="checkbox" {{#if isDefault}}checked="checked" disabled="disabled"{{/if}}></label>\n  </div>\n</div>');function ws(t,e,n){return t.value=n.item.raw.id,e.value=n.item.raw.label,!1}Ii();class ks extends bi{constructor(t,n,i,s,o){super(t,function(t){return xs(t)}(n),{height:250},".textae-editor__edit-type-definition-dialog--id",(()=>{const t=super.el.querySelectorAll("input");return o(t[0].value,t[1].value,t[2].value,t[3].checked)})),function(t,n,i){const s=t.querySelectorAll("input");e()(s[0]).autocomplete({source:(t,e)=>Mi(n,i(t.term),t.term,e),minLength:3,select:(t,e)=>ws(s[0],s[1],e)}),e()(s[1]).autocomplete({source:(t,e)=>Mi(n,i(t.term),t.term,e),minLength:3,select:(t,e)=>ws(s[0],s[1],e)})}(super.el,s,(t=>i.findByLabel(t)))}}class Ss extends ks{constructor(t,e){super("Please create a new type",{id:null,label:"",color:t.defaultColor,isDefault:!1},t,e,((t,e,n,i)=>{if(""===t)return;const s={id:t,color:n};return""!==e&&(s.label=e),i&&(s.default=i),{newType:s}}))}}class Cs extends ks{constructor(t,e,n,i,s){const o=t.getLabel(e)||"",r={id:e,label:o,color:n,isDefault:i};super("Please edit the type",r,t,s,((t,n,i,s)=>{const o=function(t,e){const n=new Map;return t.id!==e.id&&n.set("id",e.id),t.label!==e.label&&n.set("label",""===e.label?null:e.label),t.color!==e.color&&n.set("color",""===e.color?null:e.color),t.isDefault!==e.isDefault&&n.set("default",!!e.isDefault||null),n}(r,{id:t,label:n,color:i,isDefault:s});return{id:e,changedProperties:o}}))}}function Es(t){return!t.classList.contains("textae-editor__type-pallet__table-button--disabled")}class Ps{constructor(t,e,n,i,s,o,r,a){this._editor=t,this._bindMouseEvents=e,this._mouseEventHandler=n,this._handler=i,this._pallet=s,function(t,e,n,i,s,o){ei()(t.el,".textae-editor__type-pallet__add-button","click",(()=>{const t=new Ss(o,s());t.promise.then((({newType:t})=>n.invoke(i.addType(t)))),t.open()})),ei()(t.el,".textae-editor__type-pallet__label","click",(t=>n.invoke(i.changeTypeOfSelectedElement(t.delegateTarget.dataset.id)))),ei()(t.el,".textae-editor__type-pallet__select-all","click",(t=>{Es(t.target)&&i.selectAll(t.delegateTarget.dataset.id)})),ei()(t.el,".textae-editor__type-pallet__edit-type","click",(t=>{const e=new Cs(o,t.target.dataset.id,t.target.dataset.color.toLowerCase(),"true"===t.target.dataset.isDefault,s());e.promise.then((({id:t,changedProperties:e})=>{e.size&&n.invoke(i.changeType(t,e))})),e.open()})),ei()(t.el,".textae-editor__type-pallet__remove","click",(t=>{Es(t.target)&&n.invoke(i.removeType(t.delegateTarget.dataset.id,t.delegateTarget.dataset.label))}))}(s,0,o,i,r,a),t.eventEmitter.on("textae.editor.unselect",(()=>s.hide())).on("textae.history.change",(()=>s.updateDisplay())).on("textae.configuration.save",(()=>s.updateDisplay())).on("textae.typeDefinition.type.lock",(()=>s.updateDisplay())),t[0].appendChild(s.el)}init(){return this._bindMouseEvents(this._editor,this._mouseEventHandler)}get handler(){return this._handler}get pallet(){return this._pallet}}function Ds(t,e){const n=[];let i=!1;return n.push(ei()(t[0],".textae-editor__body__text-box","click",(t=>{t.target.classList.contains("textae-editor__body__text-box")&&!i&&e.textBoxClicked(t)}))),n.push(ei()(t[0],".textae-editor","click",(t=>{t.target.classList.contains("textae-editor")&&e.bodyClicked()}))),n.push(ei()(t[0],".textae-editor__entity","click",(()=>e.entityClicked()))),n.push(ei()(t[0],".textae-editor__entity__type-values","click",(t=>e.typeValuesClicked(t)))),n.push(ei()(t[0],".textae-editor__span","mouseup",(t=>{t.target.classList.contains("textae-editor__span")&&(e.denotationSpanClicked(t),i=!0,setTimeout((()=>i=!1),0))}))),n.push(ei()(t[0],".textae-editor__block","mouseup",(t=>{t.target.classList.contains("textae-editor__block")&&e.blockSpanClicked(t)}))),n.push(ei()(t[0],".textae-editor__style","mouseup",(t=>{t.target.classList.contains("textae-editor__style")&&e.styleSpanClicked(t)}))),n}class Ts{constructor(t,e,n,i,s,o){this._commander=t,this._annotationData=n,this._selectionModel=i,this._pallet=s,this._typeDefinition=o,function(t,e,n){t.eventEmitter.on("textae.entityAndAttributePallet.attribute.selection-attribute-label.click",((t,i)=>{if(e.entity.isSamePredAttrributeSelected(t.pred)){const e=n.factory.changeAttributesOfSelectedEntitiesWithSamePred(t,i);n.invoke(e)}else{const e=n.factory.createAttributeToSelectedEntitiesCommand(t,i);n.invoke(e)}})).on("textae.selecionAttributePallet.remove-button.click",(t=>{const e=n.factory.removeAttributesOfSelectedEntitiesByPredCommand(t);n.invoke(e)}))}(e,i,t)}addOrEditAt(t){this._pallet.hide();const e=this._typeDefinition.attribute.getAttributeAt(t);if(e)switch(e.valueType){case"flag":!function(t,e){const n=e.factory.toggleFlagAttributeToSelectedEntitiesCommand(t);e.invoke(n)}(e,this._commander);break;case"numeric":!function(t,e,n){const i=t.entity.findSelectedWithSamePredicateAttribute(e);if(i){const t=i.attributes.find((t=>t.pred===e.pred));Ni(e,t,n)}else{const t=n.factory.createAttributeToSelectedEntitiesCommand(e);n.invoke(t)}}(this._selectionModel,e,this._commander);break;case"selection":!function(t,e,n,i){if(t.entity.findSelectedWithSamePredicateAttribute(e))i.show(),i.showAttribute(e.pred);else{const t=n.factory.createAttributeToSelectedEntitiesCommand(e);n.invoke(t)}}(this._selectionModel,e,this._commander,this._pallet);break;case"string":!function(t,e,n){const i=t.entity.findSelectedWithSamePredicateAttribute(e);if(i)Bi(i.attributes.find((t=>t.pred===e.pred)),n,e);else{const t=n.factory.createAttributeToSelectedEntitiesCommand(e);n.invoke(t)}}(this._selectionModel,e,this._commander);break;default:throw`${e.valueType} is unknown attribute`}else j().warning(`Attribute No.${t} is not defined`)}deleteAt(t){const e=this._typeDefinition.attribute.getAttributeAt(t),n=this._commander.factory.removeAttributesOfSelectedEntitiesByPredCommand(e);this._commander.invoke(n)}}var $s=n(5311);n(7285);function Os(t,e){t.innerHTML=`<div class="textae-editor__type-pallet__content">${e}</div>`,function(t){if(t.style.width="auto",window.innerWidth-2<=t.offsetWidth){const e=window.innerWidth-4;t.style.width=`${e}px`}}(t),function(t){if(window.innerHeight-2<=t.offsetHeight){const e=window.innerHeight-2;t.style.height=`${e}px`}}(t)}const As={};document.querySelector("html").addEventListener("mousemove",(t=>{As.top=t.clientY,As.left=t.clientX}));class Ns{constructor(t,n){this._el=n,function(t,n){e()(t).draggable({containment:n})}(n,t),ei()(n,'[type="button"]',"click",(()=>t.focus())),ei()(n,".textae-editor__type-pallet__read-button","click",(()=>t.eventEmitter.emit("textae.pallet.read-button.click"))),ei()(n,".textae-editor__type-pallet__write-button","click",(()=>t.eventEmitter.emit("textae.pallet.write-button.click"))),this.hide()}updateDisplay(){this.visibly&&Os(this._el,this._content)}get el(){return this._el}show(){const t=As;this._el.style.display="block",Os(this._el,this._content),function(t,e){t.offsetWidth+e.left>window.innerWidth&&(e.left=window.innerWidth-t.offsetWidth-2),t.offsetHeight+e.top>window.innerHeight&&(e.top=window.innerHeight-t.offsetHeight-1),t.style.top=`${e.top}px`,t.style.left=`${e.left}px`}(this._el,t)}hide(){this._el.style.display="none"}get visibly(){return"none"!==this._el.style.display}}function js(t){const e=`<div class="textae-editor__type-pallet textae-editor__type-pallet--${t}"></div>`;return g().create(e)}function Ms(t,e,n){!function(t){ei()(t,".textae-editor__type-pallet__attribute","dragstart",(t=>{t.dataTransfer.setData("application/x-textae-attribute-tab-old-index",t.target.dataset.index),function(t){t.target.closest(".textae-editor__type-pallet__content").classList.add("textae-editor__type-pallet__content--dragging")}(t)})),ei()(t,".textae-editor__type-pallet__attribute","dragend",(t=>{!function(t){t.target.closest(".textae-editor__type-pallet__content").classList.remove("textae-editor__type-pallet__content--dragging")}(t)}))}(e),function(t,e){ei()(t,".textae-editor__type-pallet__drop-target","dragover",(t=>{const e=t.target.closest(".textae-editor__type-pallet__content").querySelector(".textae-editor__type-pallet__attribute").offsetWidth;t.target.innerHTML=`<div style="width: ${e}px;"></div>`,t.preventDefault()})),ei()(t,".textae-editor__type-pallet__drop-target","dragleave",(t=>{t.target.innerHTML=""})),ei()(t,".textae-editor__type-pallet__drop-target","drop",(t=>{const n=parseInt(t.dataTransfer.getData("application/x-textae-attribute-tab-old-index")),i=parseInt(t.target.dataset.index);e.emit("textae.entityAndAttributePallet.attribute.tab.drop",n,n<i?i-1:i)}))}(e,n),ei()(e,".textae-editor__type-pallet__attribute","click",(e=>{t.showAttribute(e.target.dataset.attribute)})),ei()(e,".textae-editor__type-pallet__create-predicate","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.create-predicate-button.click"))),ei()(e,".textae-editor__type-pallet__edit-predicate","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.edit-predicate-button.click",t.attrDef))),ei()(e,".textae-editor__type-pallet__delete-predicate","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.delete-predicate-button.click",t.attrDef))),ei()(e,".textae-editor__type-pallet__add-attribute-value-button","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.add-value-button.click",t.attrDef))),ei()(e,".textae-editor__type-pallet__edit-value","click",(e=>n.emit("textae.entityAndAttributePallet.attribute.edit-value-button.click",t.attrDef,e.target.dataset.index))),ei()(e,".textae-editor__type-pallet__remove-value","click",(e=>n.emit("textae.entityAndAttributePallet.attribute.remove-value-button.click",t.attrDef,e.target.dataset.index))),ei()(e,".textae-editor__type-pallet__selection-attribute-label","click",(e=>n.emit("textae.entityAndAttributePallet.attribute.selection-attribute-label.click",t.attrDef,e.target.dataset.id))),ei()(e,".textae-editor__type-pallet__add-attribute","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.add-button.click",t.attrDef))),ei()(e,".textae-editor__type-pallet__edit-object","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.object.edit",t.attrDef))),ei()(e,".textae-editor__type-pallet__remove-attribute","click",(()=>n.emit("textae.entityAndAttributePallet.attribute.remove-button.click",t.attrDef)))}function Is(t){return 1===t?"1 entity selected":t>1?`${t} entities selected`:""}b().registerPartial("header",'\n  <div style="display: flex;">\n    <p class="textae-editor__type-pallet__title">\n      <span>Entity configuration</span>\n      <span class="textae-editor__type-pallet__lock-icon" style="display: {{#if isLock}}inline-block{{else}}none{{/if}};">locked</span>\n      <br>\n      <span class="textae-editor__type-pallet__selected-entity-label">{{selectedEntityLabel}}</span>\n    </p>\n    <p class="textae-editor__type-pallet__attribute {{#unless selectedPred}}textae-editor__type-pallet__attribute--selected{{/unless}}" data-attribute="">\n      Type\n    </p>\n    {{#each attributes}}\n      {{#if droppable}}\n      <span class="textae-editor__type-pallet__drop-target" data-index="{{@index}}"></span>\n      {{/if}}\n      <p \n        class="textae-editor__type-pallet__attribute{{#if selectedPred}} textae-editor__type-pallet__attribute--selected{{/if}}"\n        data-attribute="{{pred}}"\n        data-index="{{@index}}"\n        {{#if selectedPred}}draggable="true"{{/if}}>\n        {{#if shortcutKey}}{{shortcutKey}}:{{/if}}{{pred}}\n      </p>\n    {{/each}}\n    {{#unless isLock}}\n    {{#if addAttribute}}\n      {{#unless lastAttributeSelected}}<span class="textae-editor__type-pallet__drop-target" data-index="-1"></span>{{/unless}}\n      <p class="textae-editor__type-pallet__attribute textae-editor__type-pallet__create-predicate">\n        <span class="textae-editor__type-pallet__create-predicate__button" title="Add new attribute"></span>\n      </p>\n    {{/if}}\n    {{/unless}}\n    <div class="textae-editor__type-pallet__buttons">\n      {{#unless isLock}}\n      {{#if addTypeButton}}\n        <span class="textae-editor__type-pallet__button textae-editor__type-pallet__add-button" title="Add new type"></span>\n      {{/if}}\n      {{#if addAttributeValueButton}}\n        <span class="textae-editor__type-pallet__button textae-editor__type-pallet__add-attribute-value-button" title="Add new value"></span>\n      {{/if}}\n      {{/unless}}\n      <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n      <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button {{#if hasDiff}}textae-editor__type-pallet__write-button--transit{{/if}}" title="Upload"></span>\n    </div>\n  </div>\n'),b().registerPartial("predicate",'\n  <div class="textae-editor__type-pallet__predicate">\n    {{> @partial-block }}\n    <div>\n    {{#if hasInstance}}\n      Attribute definitions with instances cannot be deleted.\n    {{else}}\n      <button type="button" class="textae-editor__type-pallet__delete-predicate">delete attribute</button>\n    {{/if}}\n    </div>\n  </div>\n  ');b().registerPartial("add-attribute-button",'\n  {{#unless @root.isEntityWithSamePredSelected}}\n  <button\n    type="button"\n    class="textae-editor__type-pallet__add-attribute"\n  >Add to selected entity</button>\n  {{/unless}}\n'),b().registerPartial("remove-attribute-button",'\n  {{#if @root.isEntityWithSamePredSelected}}\n  <button\n    type="button"\n    class="textae-editor__type-pallet__remove-attribute"\n  >Remove from selected entity</button>\n  {{/if}}\n');b().registerPartial("edit-object-button",'\n  {{#if @root.isEntityWithSamePredSelected}}\n  <button\n    type="button"\n    class="textae-editor__type-pallet__edit-object"\n  >Edit object of selected entity</button>\n  {{/if}}\n'),b().registerPartial("valueButton",'\n  {{#unless @root.isLock}}\n  <td class="textae-editor__type-pallet__table-attribute-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-value"\n      title="Edit this value." data-index="{{@index}}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove-value {{#if indelible}}textae-editor__type-pallet__table-button--disabled{{/if}}"\n      title="{{#if indelible}}To activate this button, remove all the annotations of this type.{{/if}}{{#unless indelible}}Remove this value.{{/unless}}"\n      {{#if indelible}}disabled="disabled"{{/if}}\n      data-index="{{@index}}">\n    </button>\n  </td>\n  {{/unless}}\n');const Ls=b().compile('\n{{>header}}\n<table>\n  <tbody>\n    <tr>\n      <th>id</th>\n      <th>label</th>\n      <th title="Number of annotations.">#</th>\n      <th></th>\n    </tr>\n    {{#if types}}\n    {{#each types}}\n    <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n      <td class="textae-editor__type-pallet__label" data-id="{{id}}">\n        <span title={{id}}>\n          {{id}}\n        </span>\n        {{#if uri}}\n          <a href="{{uri}}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>\n        {{/if}}\n        {{#if defaultType}}\n          <span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>\n        {{/if}}\n      </td>\n      <td class="textae-editor__type-pallet__short-label">\n        {{label}}\n      </td>\n      <td class="textae-editor__type-pallet__use-number">\n        {{#if useNumber}}{{useNumber}}{{/if}}\n        {{#unless useNumber}}0{{/unless}}\n      </td>\n      <td class="textae-editor__type-pallet__table-buttons">\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all {{#unless useNumber}}textae-editor__type-pallet__table-button--disabled{{/unless}}"\n          title="Select all the cases of this type."\n          data-id="{{id}}"\n          data-use-number="{{useNumber}}">\n        </button>\n        {{#unless ../isLock}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n          title="Edit this type." data-id="{{id}}"\n          data-color="{{color}}"\n          data-is-default="{{defaultType}}">\n        </button>\n        <button \n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove {{#if useNumber}}textae-editor__type-pallet__table-button--disabled{{/if}}"\n          title="{{#if useNumber}}To activate this button, remove all the annotations of this type.{{/if}}{{#unless useNumber}}Remove this type.{{/unless}}"\n          data-id="{{id}}"\n          data-label="{{label}}">\n        </button>\n        {{/unless}}\n      </td>\n    </tr>\n    {{/each}}\n    {{else}}\n    <tr class="textae-editor__type-pallet__row">\n      <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Entity definition.</td>\n    </tr>\n    {{/if}}\n  </tbody>\n</table>\n'),Rs=b().compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        flag attribute: {{pred}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n          title="Edit this predicate.">\n        </button>\n        {{> add-attribute-button}}\n        {{> remove-attribute-button}}\n      </div>\n    {{/predicate}}\n  {{/ attrDef}}\n</div>\n'),Bs=b().compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        <div>\n          numeric attribute: {{pred}}\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n            title="Edit this predicate.">\n          </button>\n          {{> add-attribute-button}}\n          {{> edit-object-button}}\n          {{> remove-attribute-button}}\n        </div>\n        min: {{min}}\n        max: {{max}}\n        step: {{step}}\n        default: {{default}}\n      </div>\n    {{/predicate}}\n    <table>\n      <tbody>\n        <tr>\n          <th>range</th>\n          <th>label</th>\n          <th>color</th>\n          {{#unless @root.isLock}}\n          <th></th>\n          {{/unless}}\n        </tr>\n        {{#each values}}\n        <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            {{range}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{label}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{color}}\n          </td>\n          {{>valueButton}}\n        </tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/ attrDef}}\n</div>\n'),Fs=b().compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        selection attribute: {{pred}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n          title="Edit this predicate.">\n        </button>\n        {{> add-attribute-button}}\n        {{> remove-attribute-button}}\n      </div>\n    {{/predicate}}\n    </div>\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n          {{#unless @root.isLock}}\n          <th></th>\n          {{/unless}}\n        </tr>\n        {{#each values}}\n        <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="{{id}}">\n            {{id}}\n            {{#if default}}\n              <span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>\n            {{/if}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{label}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{color}}\n          </td>\n          {{>valueButton}}\n        </tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/ attrDef}}\n</div>\n'),Hs=b().compile('\n{{>header}}\n<div>\n  {{# attrDef}}\n    {{#>predicate}}\n      <div>\n        <div>\n          string attribute: {{pred}}\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n            title="Edit this predicate.">\n          </button>\n          {{> add-attribute-button}}\n          {{> edit-object-button}}\n          {{> remove-attribute-button}}\n        </div>\n        default: {{default}}\n      </div>\n    {{/predicate}}\n    <table>\n      <tbody>\n        <tr>\n          <th>pattern</th>\n          <th>label</th>\n          <th>color</th>\n          {{#unless @root.isLock}}\n          <th></th>\n          {{/unless}}\n        </tr>\n        {{#each values}}\n        <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            {{pattern}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{label}}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            {{color}}\n          </td>\n          {{>valueButton}}\n        </tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/ attrDef}}\n</div>\n');function zs(t){for(const e of t.querySelectorAll(".textae-editor__type-pallet__attribute"))e.addEventListener("mousedown",(t=>{t.stopPropagation()}))}class Ws extends Ns{constructor(t,e,n,i,s){super(t,js("entity")),this._eventEmitter=t.eventEmitter,this._originalData=e,this._typeDefinition=n,this._typeContainer=i,this._selectionModelEntity=s,Ms(this,this._el,t.eventEmitter),t.eventEmitter.on("textae.typeDefinition.attribute.create",(t=>{this.showAttribute(t)})).on("textae.typeDefinition.attribute.change",(t=>{this.showAttribute(t)})).on("textae.typeDefinition.attribute.delete",(()=>{this.showAttribute(null)})).on("textae.typeDefinition.attribute.move",(()=>{this.updateDisplay()})),t.eventEmitter.on("textae.annotationData.attribute.add",(()=>this.updateDisplay())).on("textae.annotationData.attribute.remove",(()=>this.updateDisplay())),t.eventEmitter.on("textae.selection.entity.change",(()=>this.updateDisplay()))}updateDisplay(){super.updateDisplay(),zs(this._el)}show(){this._selectedPred=null,super.show(),zs(this._el)}showAttribute(t){this._selectedPred=t,this.updateDisplay()}selectLeftTab(){this._selectedPred&&(0===this._selectedIndex?this.showAttribute():this.showAttribute(this._typeContainer.attributes[this._selectedIndex-1].pred))}selectRightTab(){if(this._selectedPred){if(this._selectedIndex===this._typeContainer.attributes.length-1)return;this.showAttribute(this._typeContainer.attributes[this._selectedIndex+1].pred)}else this._typeContainer.attributes.length&&this.showAttribute(this._typeContainer.attributes[0].pred)}get _selectedIndex(){return this._typeContainer.attributes.findIndex((t=>t.pred===this._selectedPred))}get _content(){return function(t,e,n,i){const s=t.attributes.length<30,o=function(t,e){let n;return n=e?function(t,e){const n=[];let i;for(const s of t.attributes)n.push({pred:s.pred,selectedPred:e===s.pred,droppable:e!==s.pred&&!i}),i=e===s.pred;return n}(t,e):t.attributes,function(t){return t.map(((t,e)=>(e<9&&(t.shortcutKey=e+1),t)))}(n)}(t,n);if(n){const r=t.attributes.find((t=>t.pred===n)),a={isLock:t.isLock,attributes:o,hasDiff:e,attrDef:Object.assign(r.JSON,{hasInstance:t.hasAttributeInstance(n)}),selectedPred:n,lastAttributeSelected:t.attributes.indexOf(r)===t.attributes.length-1,addAttribute:s,selectedEntityLabel:Is(i.size),isEntityWithSamePredSelected:i.isSamePredAttrributeSelected(n)};switch(r.valueType){case"flag":return Rs(a);case"numeric":return Bs(Object.assign(a,{addAttributeValueButton:!0}));case"selection":for(const e of a.attrDef.values)e.indelible=t.isSelectionAttributeIndelible(n,e.id);return Fs(Object.assign(a,{addAttributeValueButton:!0}));case"string":return Hs(Object.assign(a,{addAttributeValueButton:!0}));default:throw"attrDef.valueType is unknown attribute"}}return Ls({isLock:t.isLock,attributes:o,hasDiff:e,types:t.pallet,addAttribute:s,addTypeButton:!0,selectedEntityLabel:Is(i.size)})}(this._typeContainer,(0,$s.diff)(this._originalData.configuration,Object.assign({},this._originalData.configuration,this._typeDefinition.config)),this._selectedPred,this._selectionModelEntity)}get attrDef(){return this._typeContainer.findAttribute(this._selectedPred)}}class qs extends Ps{constructor(t,e,n,i,s,o,r,a){const l=new bs(t,e,n,i,s,o),c=new Ws(t,r,e.typeDefinition,e.typeDefinition.denotation,n.entity),u=new Ts(i,t,e,n,c,e.typeDefinition),h=new qi(t,e.typeDefinition.denotation,i,e,n,u);super(t,Ds,new Qi(t,e,n,c,l),h,c,i,(()=>a||e.typeDefinition.autocompletionWs),e.typeDefinition.denotation),t.eventEmitter.on("textae.typeDefinition.denotation.type.change",(()=>c.updateDisplay())).on("textae.typeDefinition.denotation.type.default.change",(()=>c.updateDisplay()))}}class Vs{constructor(t,e,n,i,s,o){this._editor=t,this._annotationData=e,this._spanConfig=n,this._commander=i,this._buttonController=s,this._selectionModel=o}editFor(t){if(t.isParentOfAnchorNodeTextBox){if(t.isParentOfFocusNodeTextBox)return void this._create(t);if(t.isParentOfFocusNodeDenotationSpan||t.isParentOfFocusNodeStyleSpan)return void(t.ancestorBlockSpanOfFocusNode?this._shrink(t):this._create(t));if(t.isParentOfFocusNodeBlockSpan)return void this._shrink(t)}if(t.isParentOfAnchorNodeDenotationSpan||t.isParentOfAnchorNodeStyleSpan){if(t.isParentOfFocusNodeTextBox||t.isParentOfFocusNodeDenotationSpan||t.isParentOfFocusNodeStyleSpan)return void(t.ancestorBlockSpanOfAnchorNode?t.doesFitInOneBlockSpan?this._shrink(t):this._expand(t):t.ancestorBlockSpanOfFocusNode?this._shrink(t):this._create(t));if(t.isParentOfFocusNodeBlockSpan)return void this._shrink(t)}if(t.isParentOfAnchorNodeBlockSpan){if(t.isParentOfFocusNodeTextBox||t.isParentOfFocusNodeDenotationSpan||t.isParentOfFocusNodeStyleSpan)return void this._expand(t);if(t.isParentOfFocusNodeBlockSpan){const{anchor:e}=new ts(this._annotationData.span,t),n=this._annotationData.span.get(t.parentOfFocusNode.id);if(e===n.begin||e===n.end)return void this._shrink(t)}}Vi()}_create(t){if(vs(this._annotationData,this._spanConfig,t)){this._selectionModel.clear();const{begin:e,end:n}=ds(this._annotationData,new cs,t,this._spanConfig);if(this._annotationData.span.isBoundaryCrossingWithOtherSpans(e,n))return;if(this._annotationData.span.doesParentSpanExits(e,n))return;const i=this._commander.factory.createBlockSpanCommand({begin:e,end:n});this._commander.invoke(i)}Vi()}_expand(t){const e=t.ancestorBlockSpanOfAnchorNode.id;_s(this._selectionModel,this._annotationData,new cs,e,t,this._spanConfig,((t,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(e,t,n))})),Vi()}_shrink(t){const e=t.ancestorBlockSpanOfFocusNode.id;ms(this._editor,this._annotationData,this._selectionModel,this._commander,new cs,e,t,this._spanConfig,((t,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(e,t,n))})),Vi()}}function Us(t,e){const n=[];return n.push(ei()(t[0],".textae-editor__body__text-box","click",(t=>{t.target.classList.contains("textae-editor__body__text-box")&&e.textBoxClicked(t)}))),n.push(ei()(t[0],".textae-editor","click",(t=>{t.target.classList.contains("textae-editor")&&e.bodyClicked()}))),n.push(ei()(t[0],".textae-editor__entity","click",(()=>e.entityClicked()))),n.push(ei()(t[0],".textae-editor__entity__type-values","click",(t=>e.typeValuesClicked(t)))),n.push(ei()(t[0],".textae-editor__block","mouseup",(t=>{t.target.classList.contains("textae-editor__block")&&e.blockSpanClicked()}))),n.push(ei()(t[0],".textae-editor__block-hit-area","mouseup",(t=>{t.target.classList.contains("textae-editor__block-hit-area")&&e.blockHitAreaClicked(t)}))),n.push(ei()(t[0],".textae-editor__style","mouseup",(t=>{t.target.classList.contains("textae-editor__style")&&e.styleSpanClicked(t)}))),n.push(ei()(t[0],".textae-editor__span","mouseup",(t=>{t.target.classList.contains("textae-editor__span")&&e.denotationSpanClicked(t)}))),n}class Gs{constructor(t,e,n,i,s){this._editor=t,this._annotationData=e,this._selectionModel=n,this._spanEditor=i,this._pallet=s}bodyClicked(){this._pallet.hide(),this._selectionModel.clear()}textBoxClicked(t){const e=window.getSelection();"Caret"===e.type&&(this._pallet.hide(),this._selectionModel.clear()),"Range"===e.type&&(this._spanEditor.editFor(new Yi),t.stopPropagation())}blockSpanClicked(){const t=window.getSelection();"Caret"===t.type&&(Vi(),this._selectionModel.clear()),"Range"===t.type&&this._spanEditor.editFor(new Yi)}blockHitAreaClicked(t){2===t.button&&Vi();const e=window.getSelection();if("Caret"===e.type||"None"===e.type){const e=t.target.dataset.id;this._selectSpanAndEntity(t,e)}}styleSpanClicked(t){const e=window.getSelection();"Caret"===e.type&&this._selectionModel.clear(),"Range"===e.type&&(this._spanEditor.editFor(new Yi),t.stopPropagation())}denotationSpanClicked(t){const e=window.getSelection();"Caret"===e.type&&this._selectionModel.clear(),"Range"===e.type&&(this._spanEditor.editFor(new Yi),t.stopPropagation())}entityClicked(){this._editor.focus()}typeValuesClicked(t){const e=ni(t.target).title;if(this._annotationData.entity.get(e).isBlock){this._selectionModel.selectEntity(e,t.ctrlKey||t.metaKey);for(const{span:t}of this._selectionModel.entity.all)this._selectionModel.selectSpanById(t.id)}}_selectSpanAndEntity(t,e){Ui(this._selectionModel,t,e,((t,e)=>this._annotationData.span.rangeBlockSpan(t,e)));for(const{entities:t}of this._selectionModel.span.all)this._selectionModel.selectEntityById(t[0].id)}}class Ks extends Wi{constructor(t,e,n,i,s,o){super("block","entity",e,n),this._editor=t,this._selectionModel=s,this._annotationData=i,this._attributeEditor=o}jsPlumbConnectionClicked(t,e){e.originalEvent.preventDefault()}changeTypeOfSelectedElement(t){return this._commander.factory.changeTypeOfSelectedEntitiesCommand(t)}changeLabelHandler(t){if(this._selectionModel.entity.some){const e=({typeName:t,label:e,attributes:n})=>{const i=this._commander.factory.changeEntityTypeCommand(e,t,n,this._typeContainer);t&&this._commander.invoke(i)},n=new zi(this._editor,this._typeContainer,t,jt.mergedTypesOf(this._selectionModel.entity.all));n.promise.then(e),n.open()}}manipulateAttribute(t,e){e?this._attributeEditor.deleteAt(t):this._attributeEditor.addOrEditAt(t)}selectAll(t){this._selectionModel.entity.clear();for(const{id:e}of this._annotationData.entity.findByType(t))this._selectionModel.entity.add(e)}}class Js extends Ps{constructor(t,e,n,i,s,o,r,a){const l=new Ws(t,r,e.typeDefinition,e.typeDefinition.block,n.entity),c=new Ts(s,t,e,n,l,e.typeDefinition),u=new Ks(t,e.typeDefinition.block,s,e,n,c),h=new Vs(t,e,i,s,o,n);super(t,Us,new Gs(t,e,n,h,l),u,l,s,(()=>a||e.typeDefinition.autocompletionWs),e.typeDefinition.block),t.eventEmitter.on("textae.typeDefinition.block.type.change",(()=>l.updateDisplay())).on("textae.typeDefinition.block.type.default.change",(()=>l.updateDisplay()))}}const Xs=b().compile('\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--predicate" value="type" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Value:<span>{{label}}</span></label><br>\n    <input class="textae-editor__edit-value-and-pred-dialog--value" value="{{value}}">\n  </div>\n</div>');class Ys extends bi{constructor(t,e,n){var i;super("Please enter new values",(i={value:t,label:e.getLabel(t)},Xs(i)),{height:250},".textae-editor__edit-value-and-pred-dialog--value",(()=>{const t=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),e=super.el.querySelector("span");return{value:t.value,label:e.innerText}}));Li(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--label span"),n,(t=>e.findByLabel(t)))}}class Qs extends Wi{constructor(t,e,n,i){super("relation","relation",t,e),this._annotationData=n,this._selectionModel=i}changeTypeOfSelectedElement(t){return this._commander.factory.changeTypeOfSelectedRelationsCommand(t)}changeLabelHandler(t){if(this._selectionModel.relation.some){const e=({value:t,label:e})=>{const n=this._commander.factory.changeRelationLabelCommand(e,t,this._typeContainer);t&&this._commander.invoke(n)},n=this._getSelectedType(),i=new Ys(n,this._typeContainer,t);i.promise.then(e),i.open()}}jsPlumbConnectionClicked(t,e){const n=t.relationId;this._selectionModel.selectRelation(n,e.ctrlKey||e.metaKey)}_getSelectedType(){const t=this._selectionModel.relation.single;return t?t.typeName:""}selectAll(t){this._selectionModel.relation.clear();for(const{id:e}of this._annotationData.relation.findByType(t))this._selectionModel.relation.add(e)}}function Zs(t,e){const n=[];return n.push(ei()(t[0],".textae-editor__body__text-box","click",(()=>e.textBoxClicked()))),n.push(ei()(t[0],".textae-editor","click",(t=>{t.target.classList.contains("textae-editor")&&e.bodyClicked()}))),n.push(ei()(t[0],".textae-editor__entity","click",(()=>e.entityClicked()))),n.push(ei()(t[0],".textae-editor__entity__type-values","click",(t=>e.typeValuesClicked(t)))),n}class to{constructor(t,e,n,i,s){this._editor=t,this._selectionModel=e,this._commander=n,this._typeDefinition=i,this._pallet=s}bodyClicked(){this._pallet.hide(),this._selectionModel.clear()}textBoxClicked(){this._pallet.hide(),this._selectionModel.clear()}entityClicked(){this._editor.focus()}typeValuesClicked(t){const e=ni(t.target).title;var n,i,s,o,r;n=this._selectionModel,i=e,s=this._commander,o=this._typeDefinition,r=t,n.entity.some?function(t,e,n,i,s){const o=t.entity.all[0].id,r=s;o===r?t.entity.remove(o):(function(t,e,n,i){t.invoke(t.factory.createRelationCommand({subj:e,obj:n,pred:i.relation.defaultType}))}(e,o,r,n),function(t,e,n,i){t.ctrlKey||t.metaKey?e.remove(i):t.shiftKey?(e.remove(n),e.add(i)):(e.remove(n),e.remove(i))}(i,t.entity,o,r))}(n,s,o,r,i):(n.clear(),n.entity.add(i))}}const eo=b().compile('\n<p class="textae-editor__type-pallet__title">\n  <span>Relation configuration</span>\n  <span class="textae-editor__type-pallet__lock-icon" style="display: {{#if isLock}}inline-block{{else}}none{{/if}};">locked</span>\n</p>\n<div class="textae-editor__type-pallet__buttons">\n  {{#unless isLock}}\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__add-button" title="Add new type"></span>\n  {{/unless}}\n  <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n  <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button {{#if hasDiff}}textae-editor__type-pallet__write-button--transit{{/if}}" title="Upload"></span>\n</div>\n<table>\n  <tbody>\n    <tr>\n      <th>id</th>\n      <th>label</th>\n      <th title="Number of annotations.">#</th>\n      <th></th>\n    </tr>\n    {{#if types}}\n    {{#each types}}\n    <tr class="textae-editor__type-pallet__row" style="background-color: {{color}};">\n      <td class="textae-editor__type-pallet__label" data-id="{{id}}">\n        <span title={{id}}>\n          {{id}}\n        </span>\n        {{#if uri}}\n          <a href="{{uri}}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>\n        {{/if}}\n        {{#if defaultType}}\n          <span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>\n        {{/if}}\n      </td>\n      <td class="textae-editor__type-pallet__short-label">\n        {{label}}\n      </td>\n      <td class="textae-editor__type-pallet__use-number">\n        {{#if useNumber}}{{useNumber}}{{/if}}\n        {{#unless useNumber}}0{{/unless}}\n      </td>\n      <td class="textae-editor__type-pallet__table-buttons">\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all {{#unless useNumber}}textae-editor__type-pallet__table-button--disabled{{/unless}}"\n          title="Select all the cases of this type."\n          data-id="{{id}}"\n          data-use-number="{{useNumber}}">\n        </button>\n        {{#unless ../isLock}}\n        <button\n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n          title="Edit this type." data-id="{{id}}"\n          data-color="{{color}}"\n          data-is-default="{{defaultType}}">\n        </button>\n        <button \n          type="button"\n          class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove {{#if useNumber}}textae-editor__type-pallet__table-button--disabled{{/if}}"\n          title="{{#if useNumber}}To activate this button, remove all the annotations of this type.{{/if}}{{#unless useNumber}}Remove this type.{{/unless}}"\n          data-id="{{id}}"\n          data-label="{{label}}">\n        </button>\n        {{/unless}}\n      </td>\n    </tr>\n    {{/each}}\n    {{else}}\n    <tr class="textae-editor__type-pallet__row">\n      <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Relation definition.</td>\n    </tr>\n    {{/if}}\n  </tbody>\n</table>\n');class no extends Ns{constructor(t,e,n){super(t,js("relation")),this._originalData=e,this._typeDefinition=n,this._typeContainer=n.relation}get _content(){return t=this._typeContainer,e=(0,$s.diff)(this._originalData.configuration,Object.assign({},this._originalData.configuration,this._typeDefinition.config)),eo({isLock:t.isLock,hasDiff:e,types:t.pallet});var t,e}}class io extends Ps{constructor(t,e,n,i,s,o){const r=new no(t,s,e.typeDefinition),a=new Qs(e.typeDefinition.relation,i,e,n);super(t,Zs,new to(t,n,i,e.typeDefinition,r),a,r,i,(()=>o||e.typeDefinition.autocompletionWs),e.typeDefinition.relation),t.eventEmitter.on("textae.typeDefinition.relation.type.change",(()=>r.updateDisplay())).on("textae.typeDefinition.relation.type.default.change",(()=>r.updateDisplay()))}}class so{constructor(t,e,n,i,s,o,r,a){this._annotationData=e,this._editDenotation=new qs(t,e,n,s,o,i,r,a),this._editBlock=new Js(t,e,n,i,s,o,r,a),this._editRelation=new io(t,e,n,s,r,a),this._listeners=[],function(t,e,n){t.on("textae.entityAndAttributePallet.attribute.create-predicate-button.click",(()=>{const t=new Si;t.promise.then((t=>{t.pred&&e.invoke(e.factory.createAttributeDefinitionCommand(t))})),t.open()})).on("textae.entityAndAttributePallet.attribute.edit-predicate-button.click",(t=>{const n=new Pi(t);n.promise.then((n=>{n.size&&""!==n.get("pred")&&e.invoke(e.factory.changeAttributeDefinitionCommand(t,n))})),n.open()})).on("textae.entityAndAttributePallet.attribute.delete-predicate-button.click",(t=>e.invoke(e.factory.deleteAttributeDefinitionCommand(t)))).on("textae.entityAndAttributePallet.attribute.add-value-button.click",(t=>{const n=new $i(t.valueType);n.promise.then((n=>{(n.range||n.id||n.pattern)&&e.invoke(e.factory.addValueToAttributeDefinitionCommand(t,n))})),n.open()})).on("textae.entityAndAttributePallet.attribute.edit-value-button.click",((t,n)=>{const i=t.JSON.values[n],s=new $i(t.valueType,i);s.promise.then((s=>{if(s.range||s.id||s.pattern){if(!Object.keys(s).reduce(((t,e)=>t||s[e]!==i[e]),!1)&&!Object.keys(i).reduce(((t,e)=>t||s[e]!==i[e]),!1))return;e.invoke(e.factory.changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(t.JSON,n,s))}})),s.open()})).on("textae.entityAndAttributePallet.attribute.remove-value-button.click",((t,n)=>e.invoke(e.factory.removeValueFromAttributeDefinitionCommand(t,n)))).on("textae.entityAndAttributePallet.attribute.add-button.click",(t=>e.invoke(e.factory.createAttributeToSelectedEntitiesCommand(t)))).on("textae.entityAndAttributePallet.attribute.object.edit",(t=>{const i=n.findSelectedWithSamePredicateAttribute(t).attributes.find((e=>e.pred===t.pred));switch(t.valueType){case"numeric":Ni(t,i,e);break;case"string":Bi(i,e,t);break;default:throw new Error(`Invalid attribute valueType: ${t.valueType}`)}})).on("textae.entityAndAttributePallet.attribute.remove-button.click",(t=>e.invoke(e.factory.removeAttributesOfSelectedEntitiesByPredCommand(t)))).on("textae.entityAndAttributePallet.attribute.tab.drop",((t,n)=>{e.invoke(e.factory.moveAttributeDefintionComannd(t,n))}))}(t.eventEmitter,s,n.entity),this._stateMachine=new yi(t,e.entityGap,(()=>{this.cancelSelect(),this._unbindAllMouseEventhandler()}),(()=>this._listeners=this._editDenotation.init()),(()=>this._listeners=this._editBlock.init()),(()=>this._listeners=this._editRelation.init())),this._autocompletionWsFromParams=a,this._selectionModel=n,t.eventEmitter.on("textae.editor.jsPlumbConnection.click",((t,e)=>{this._getHandler().jsPlumbConnectionClicked(t,e)})),t.eventEmitter.on("textae.editTypeDialog.attribute.value.edit",(t=>{switch(this._stateMachine.currentState){case ai:case li:this._editDenotation.pallet.show(),this._editDenotation.pallet.showAttribute(t.pred);break;case ci:case ui:this._editBlock.pallet.show(),this._editBlock.pallet.showAttribute(t.pred)}}))}get isEditDenotation(){return this._stateMachine.currentState===li}toEditDenotationWithoutRelation(){this._stateMachine.setState(ai)}toEditDenotationWithRelation(){this._stateMachine.setState(li)}toViewWithoutRelation(){this._stateMachine.setState(oi)}toViewWithRelation(){this._stateMachine.setState(ri)}pushView(){this._stateMachine.pushView()}pushTerm(){this._stateMachine.pushTerm(this._annotationData)}pushBlock(){this._stateMachine.pushBlock(this._annotationData)}pushRelation(){this._stateMachine.setState(hi)}toggleSimple(){this._stateMachine.toggleSimple()}changeByShortcut(){this._stateMachine.changeByShortcut()}showPallet(){switch(this._stateMachine.currentState){case ai:case li:this._editDenotation.pallet.show();break;case ci:case ui:this._editBlock.pallet.show();break;case hi:this._editRelation.pallet.show()}}changeLabel(){this._getHandler().changeLabelHandler(this._autocompletionWsFromParams||this._annotationData.typeDefinition.autocompletionWs)}manipulateAttribute(t,e){this._getHandler().manipulateAttribute(t,e)}cancelSelect(){this._editDenotation.pallet.hide(),this._editBlock.pallet.hide(),this._editRelation.pallet.hide(),this._selectionModel.clear()}get isEntityAndAttributePalletShown(){return this._editDenotation.pallet.visibly||this._editBlock.pallet.visibly}selectLeftAttributeTab(){switch(this._stateMachine.currentState){case ai:case li:this._editDenotation.pallet.selectLeftTab();break;case ci:case ui:this._editBlock.pallet.selectLeftTab()}}selectRightAttributeTab(){switch(this._stateMachine.currentState){case ai:case li:this._editDenotation.pallet.selectRightTab();break;case ci:case ui:this._editBlock.pallet.selectRightTab()}}_getHandler(){switch(this._stateMachine.currentState){case ai:case li:return this._editDenotation.handler;case ci:case ui:return this._editBlock.handler;case hi:return this._editRelation.handler;default:return new Wi}}_unbindAllMouseEventhandler(){for(const t of this._listeners)t.destroy();this._listeners=[]}}function oo(t,e,n){t.eventEmitter.on("textae.annotationData.all.change",((t,i)=>{"edit"!==n?function(t,e){fi(e)?t.toViewWithoutRelation():t.toViewWithRelation()}(e,t):(function(t){t&&j().success("track annotations have been merged to root annotations.")}(i),function(t,e){fi(e)?t.toEditDenotationWithoutRelation():t.toEditDenotationWithRelation()}(e,t))}))}const ro=b().compile('\n  <div class="textae-editor__setting-dialog">\n      <div>\n          <label class="textae-editor__setting-dialog__label">Type Gap</label>\n          <input type="number" class="textae-editor__setting-dialog__type-gap type-gap" step="1" min="0" max="5" value="{{typeGap}}" {{#if typeGapDisabled}}disabled="disabled"{{/if}}>\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Line Height</label>\n          <input type="number" class="textae-editor__setting-dialog__line-height line-height" step="1" min="50" max="500" value="{{lineHeight}}">\n          px\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Lock Edit Config</label>\n          <input type="checkbox" class="textae-editor__setting-dialog__lock-config lock-config" {{#if typeDefinitionLocked}}checked="checked"{{/if}}>\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Reset Hidden Message Boxes</label>\n          <input type="button" class="textae-editor__setting-dialog__reset-hidden-message-boxes reset-hidden-message-boxes" value="Reset">\n      </div>\n      <div>\n          <label class="textae-editor__setting-dialog__label">Version</label>\n          {{version}}\n      </div>\n  </div>\n');function ao(t){return Yn()(t,300)}function lo(t,e){ei()(t,".line-height","change",ao((t=>{e.lineHeight=t.target.value,function(){const t=new Event("resize");window.dispatchEvent(t)}()})))}function co(t,e,n,i,s){!function(t,e,n){ei()(t,".type-gap","change",ao((i=>{e.value=Number(i.target.value),t.querySelector(".line-height").value=n.lineHeight})))}(t,n,s),lo(t,s),function(t,e){ei()(t,".lock-config","change",ao((t=>{t.target.checked?e.lockEdit():e.unlockEdit()})))}(t,i),function(t,e){ei()(t,".reset-hidden-message-boxes","click",(()=>e.eventEmitter.emit("textae.message-box.show")))}(t,e)}const uo="6.3.26";class ho extends s{constructor(t,e,n,i){var s;super("Setting",(s={typeGapDisabled:!n.show,typeGap:n.value,lineHeight:i.lineHeight,typeDefinitionLocked:e.isLock,version:uo},ro(s)),{label:"OK"}),co(super.el,t,n,e,i),ei()(super.el,".textae-editor--dialog","keyup",(t=>{13===t.keyCode&&super.close()}))}}class po{constructor(t,e){this._editor=t,this._selectionModel=e}left(t){const e=this._searchLeft("textae-editor__span");if(e)return void this._selectionModel.selectSpan(e.id,t);const n=this._searchLeft("textae-editor__entity");n&&this._selectionModel.selectEntity(n.title,t)}right(t){const e=this._searchRight("textae-editor__span");if(e)return void this._selectionModel.selectSpan(e.id,t);const n=this._searchRight("textae-editor__entity");n&&this._selectionModel.selectEntity(n.title,t)}_searchLeft(t){const e=this._getAllElementsOf(t),n=[...e].findIndex((t=>t.classList.contains("ui-selected")));if(n>0)return e[n-1]}_searchRight(t){const e=this._getAllElementsOf(t),n=[...e].reverse().findIndex((t=>t.classList.contains("ui-selected")));if(e.length-n>0)return e[e.length-n]}_getAllElementsOf(t){return this._editor[0].querySelectorAll(`.${t}`)}}class fo{constructor(t,e){this._editor=t,this._selectionModel=e}up(){if(this._selectionModel.span.single){const t=this._selectionModel.span.single.gridElement.querySelector(".textae-editor__entity");this._selectionModel.selectEntity(t.title)}}down(){const t=this._editor[0].querySelector(".textae-editor__entity.ui-selected");if(t){const e=t.closest(".textae-editor__grid").id.substring(1);this._selectionModel.selectSpan(e)}}}class mo{constructor(t,e,n,i,s,o,r,a,l){this._editor=t,this._commander=e,this._selectionModel=n,this._annotationData=i,this._buttonController=s,this._spanConfig=o,this._clipBoard=r,this._view=a,this._editMode=l,this._horizontal=new po(t,n),this._vertical=new fo(t,n)}copyEntities(){this._clipBoard.copyEntities()}cutEntities(){this._clipBoard.cutEntities()}removeSelectedElements(){const t=this._commander.factory.removeSelectedComand();this._horizontal.right(null),this._commander.invoke(t)}createEntity(){!function(t,e){const n=t.factory.createDefaultTypeEntityToSelectedSpansCommand(e.denotation.defaultType);n.isEmpty||t.invoke(n)}(this._commander,this._annotationData.typeDefinition)}showPallet(){this._editMode.showPallet()}replicate(){!function(t,e,n,i){const s=ys(e,n);i?t.invoke(t.factory.replicateSpanCommand(i,i.entities.map((t=>t.typeValues)),s)):alert("You can replicate span annotation when there is only span selected.")}(this._commander,this._buttonController,this._spanConfig,this._selectionModel.span.single)}pasteEntities(){this._clipBoard.pasteEntities()}changeLabel(){this._editMode.changeLabel()}manipulateAttribute(t,e){this._editMode.manipulateAttribute(t,e)}cancelSelect(){this._editMode.cancelSelect(),this._editor.focus()}showSettingDialog(){new ho(this._editor,this._annotationData.typeDefinition,this._annotationData.entityGap,this._annotationData.textBox).open()}select(){this._editor[0].classList.add("textae-editor--active")}unselect(){this._editor[0].classList.remove("textae-editor--active"),this._editor.eventEmitter.emit("textae.editor.unselect")}selectLeft(t){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectLeftAttributeTab():this._horizontal.left(t)}selectRight(t){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectRightAttributeTab():this._horizontal.right(t)}selectUp(){this._editMode.isEditDenotation&&this._vertical.up()}selectDown(){this._editMode.isEditDenotation&&this._vertical.down()}toggleSimpleMode(){this._editMode.toggleSimple()}toggleButton(t){this._buttonController.toggle(t)}changeMode(){this._editMode.changeByShortcut()}toViewMode(){this._editMode.pushView()}toTermMode(){this._editMode.pushTerm()}toBlockMode(){this._editMode.pushBlock()}toRelationMode(){this._editMode.pushRelation()}}class go{constructor(t,e,n,i,s,o,r,a,l,c,u){const h=new so(t,e,n,s,i,r,l,c);oo(t,h,u),this.event=new mo(t,i,n,e,r,s,o,a,h)}}const _o=b().compile('<div>\n<div class="textae-editor__load-dialog__row">\n  <label class="textae-editor__load-dialog__label">URL</label>\n  <input type="text" value="{{url}}" class="textae-editor__load-dialog__file-name url">\n  <input type="button" class="url" {{#unless url}}disabled="disabled"{{/unless}} value="Open">\n</div>\n<div class="textae-editor__load-dialog__row">\n  <label class="textae-editor__load-dialog__label">Local</label>\n  <input class="textae-editor__load-dialog__file" type="file">\n  <input type="button" class="local" disabled="disabled" value="Open">\n</div>\n</div>');function vo(t,e){e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}class yo extends s{constructor(t,e,n,i,s){super(t,_o({url:e}),{label:"Cancel"}),ei()(super.el,'[type="text"].url',"input",(t=>{vo(t.target.nextElementSibling,t.target.value)})),ei()(super.el,".textae-editor__load-dialog__file","change",(t=>{vo(t.target.nextElementSibling,t.target.files.length>0)}));const o=()=>!s||window.confirm("There is a change that has not been saved. If you procceed now, you will lose it.");ei()(super.el,'[type="button"].url',"click",(t=>{o()&&n(t.target.previousElementSibling.value),super.close()})),ei()(super.el,'[type="button"].local',"click",(t=>{const e=t.target.previousElementSibling;o()&&i(e),super.close()}))}}const bo=b().compile('<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input type="text" value="{{url}}" class="textae-editor__save-dialog__server-file-name url">\n    <input type="button" class="url" {{#unless url}}disabled="disabled"{{/unless}} value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input type="text" value="{{filename}}" class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label"></label>\n    <a class="viewsource" href="#">Click to see the json source in a new window.</a>\n  </div>\n</div>\n');function xo(t){const e=new Blob([JSON.stringify(t)],{type:"application/json"});return URL.createObjectURL(e)}class wo extends s{constructor(t,e,n,i,s){super("Save Annotations",bo({filename:n,url:e}),{label:"Cancel"}),function(t,e,n,i,s){ei()(e,'[type="text"].url',"input",(t=>{vo(t.target.nextElementSibling,t.target.value)})),ei()(e,'[type="button"].url',"click",(t=>{s(t.target.previousElementSibling.value),i()})),ei()(e,"a.download","click",(e=>{const s=e.target,o=xo(n);s.setAttribute("href",o),s.setAttribute("download",s.previousElementSibling.value),t.eventEmitter.emit("textae.saveAnnotationDialog.download.click"),i()})),ei()(e,"a.viewsource","click",(()=>{window.open(xo(n),"_blank"),t.eventEmitter.emit("textae.saveAnnotationDialog.viewsource.click"),i()}))}(t,super.el,i,(()=>super.close()),s)}}const ko=b().compile('<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input type="text" value="{{url}}" class="textae-editor__save-dialog__server-file-name url">\n    <input type="button" class="url" {{#unless url}}disabled="disabled"{{/unless}} value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input type="text" value="{{filename}}" class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row"><p class="textae-editor__save-dialog__diff-title">Configuration differences<span class="diff-info diff-info--add">added</span><span class="diff-info diff-info--remove">removed</span></p></div>\n  <div class="textae-editor__save-dialog__diff-viewer">{{{diff}}}</div>\n</div>');const So=(0,$s.create)({objectHash:(t,e)=>t.id||`$$index:${e}`});function Co(t,e){const n=So.diff(t,e);return $s.formatters.html.format(n,t)}class Eo extends s{constructor(t,e,n,i,s,o){var r;super("Save Configurations",(r={filename:n,url:e,diff:Co(i,s)||"nothing."},ko(r)),{label:"Cancel"},{width:550}),this._$dialog.on("dialogopen",(()=>$s.formatters.html.hideUnchanged())),function(t,e,n,i,s){ei()(e,'[type="text"].url',"input",(t=>{vo(t.target.nextElementSibling,t.target.value)})),ei()(e,'[type="button"].url',"click",(t=>{s(t.target.previousElementSibling.value),i()})),ei()(e,"a.download","click",(e=>{const s=e.target,o=xo(n);s.setAttribute("href",o),s.setAttribute("download",s.previousElementSibling.value),t.eventEmitter.emit("textae.saveConfigurationDialog.download.click"),i()}))}(t,super.el,s,(()=>super.close()),o)}}async function Po(t){return new Promise((e=>{const n=new FileReader;n.onload=t=>e(t),n.readAsText(t)}))}function Do(t){if("string"!=typeof t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0}var To=n(6470),$o=n.n(To);async function Oo(t,e){const n=t[0],i=(await Po(n)).target.result;if(s=n.name,".txt"!==$o().extname(s)){var s;if(Do(i)){const t=JSON.parse(i);if(t.text)return void e.eventEmitter.emit("textae.annotation.load","local file",n.name,t)}e.eventEmitter.emit("textae.annotation.loadError","local file",n.name)}else e.eventEmitter.emit("textae.annotation.load","local file",n.name,{text:i})}class Ao{constructor(t,e,n,i,s,o,r){this._editor=t,this._dataAccessObject=e,this._history=n,this._annotationData=i,this._getOriginalAnnotation=s,this._getOriginalConfig=o,this._saveToParameter=r,this._filenameOfLastRead={annotation:"",configuration:""}}importAnnotation(){new yo("Load Annotations",this._dataAccessObject.annotationUrl,(t=>this._dataAccessObject.loadAnnotation(t)),(({files:t})=>{Oo(t,this._editor),this._filenameOfLastRead.annotation=t[0].name}),this._history.hasAnythingToSaveAnnotation).open()}uploadAnnotation(){new wo(this._editor,this._saveToParameter||this._dataAccessObject.annotationUrl,this._filenameOfLastRead.annotation,this._editedAnnotation,(t=>this._dataAccessObject.saveAnnotation(t,this._editedAnnotation))).open()}saveAnnotation(){this._dataAccessObject.saveAnnotation(this._saveToParameter||this._dataAccessObject.annotationUrl,this._editedAnnotation)}importConfiguration(){new yo("Load Configurations",this._dataAccessObject.configurationUrl,(t=>this._dataAccessObject.loadConfigulation(t)),(({files:t})=>{!function(t,e){const n=t[0];Po(n).then((t=>{Do(t.target.result)?e.eventEmitter.emit("textae.configuration.load","local file",n.name,JSON.parse(t.target.result)):e.eventEmitter.emit("textae.configuration.loadError","local file",n.name)}))}(t,this._editor),this._filenameOfLastRead.configuration=t[0].name}),this._history.hasAnythingToSaveConfiguration).open()}uploadConfiguration(){const t=Object.assign({},this._getOriginalConfig(),this._annotationData.typeDefinition.config);new Eo(this._editor,this._dataAccessObject.configurationUrl,this._filenameOfLastRead.configuration,this._getOriginalConfig(),t,(e=>this._dataAccessObject.saveConfiguration(e,t))).open()}get _editedAnnotation(){return function(t,e,n){return Object.assign(t,e.toJson(),{config:n})}(this._getOriginalAnnotation(),this._annotationData,this._annotationData.typeDefinition.config)}}function No(t,e,...n){t.has(e)&&t.get(e)(...n)}function jo(t,e,n){return new Map([["1",t=>e.event.manipulateAttribute(1,t)],["2",t=>e.event.manipulateAttribute(2,t)],["3",t=>e.event.manipulateAttribute(3,t)],["4",t=>e.event.manipulateAttribute(4,t)],["5",t=>e.event.manipulateAttribute(5,t)],["6",t=>e.event.manipulateAttribute(6,t)],["7",t=>e.event.manipulateAttribute(7,t)],["8",t=>e.event.manipulateAttribute(8,t)],["9",t=>e.event.manipulateAttribute(9,t)],["a",()=>t.redo()],["b",()=>e.event.toggleButton("boundary-detection")],["c",()=>e.event.copyEntities()],["d",()=>e.event.removeSelectedElements()],["e",()=>e.event.createEntity()],["f",()=>e.event.changeMode()],["i",()=>n.importAnnotation()],["m",()=>e.event.changeMode()],["q",()=>e.event.showPallet()],["r",()=>e.event.replicate()],["u",()=>n.uploadAnnotation()],["v",()=>e.event.pasteEntities()],["w",()=>e.event.changeLabel()],["x",()=>e.event.cutEntities()],["y",()=>t.redo()],["z",()=>t.undo()],["ArrowDown",()=>e.event.selectDown()],["ArrowLeft",t=>e.event.selectLeft(t)],["ArrowRight",t=>e.event.selectRight(t)],["ArrowUp",()=>e.event.selectUp()],["Backspace",()=>e.event.removeSelectedElements()],["Delete",()=>e.event.removeSelectedElements()],["Escape",()=>e.event.cancelSelect()]])}function Mo(t,e,n,i,s){const o=new Map([["view",()=>e.event.toViewMode()],["term",()=>e.event.toTermMode()],["block",()=>e.event.toBlockMode()],["relation",()=>e.event.toRelationMode()],["simple",()=>e.event.toggleSimpleMode()],["read",()=>n.importAnnotation()],["write",()=>n.uploadAnnotation()],["undo",()=>t.undo()],["redo",()=>t.redo()],["replicate",()=>e.event.replicate()],["entity",()=>e.event.createEntity()],["change-label",()=>e.event.changeLabel()],["pallet",()=>e.event.showPallet()],["delete",()=>e.event.removeSelectedElements()],["copy",()=>e.event.copyEntities()],["cut",()=>e.event.cutEntities()],["paste",()=>e.event.pasteEntities()],["setting",()=>e.event.showSettingDialog()],["line-height",()=>i.updateLineHeight()]]);for(const t of s.pushButtonNames)o.has(t)||o.set(t,(()=>e.event.toggleButton(t)));return o}class Io{constructor(t,e,n,i,s){this._keyApiMap=new jo(t,e,n),this._iconApiMap=new Mo(t,e,n,s,i),this._view=s,this._buttonController=i,this._presenter=e,this._isSelected=!1}handleKeyInput(t){if(this._isSelected){const e=t.shiftKey&&48<=t.keyCode&&t.keyCode<=57?String.fromCharCode(t.keyCode):t.key;No(this._keyApiMap,e,t.shiftKey)}}handleButtonClick(t){No(this._iconApiMap,t,{})}redraw(){this._view.updateDisplay()}updateButtons(){this._buttonController.propagate()}select(){this._presenter.event.select(),this._isSelected=!0}unselect(){this._presenter.event.unselect(),this._isSelected=!1}}const Lo='\n<div class="textae-editor__footer">\n  <div class="textae-editor__footer__message"></div>\n</div>\n';class Ro{constructor(t){this._container=t[0]}status(t){var e;""!==t&&((e=this._container,e.querySelector(".textae-editor__footer__message")||(e.insertAdjacentHTML("beforeend",Lo.replace(/[\n\r]+/g,"")),e.querySelector(".textae-editor__footer__message"))).innerHTML=kt(t)?`Source: <a class="textae-editor__footer__message__link" href="${t}">${decodeURI(t)}</a>`:`Source: ${t}`)}}function Bo(t){return function(t){if(t.denotations)for(const e of t.denotations){if(e.span.begin!==parseInt(e.span.begin))return!0;if(e.span.end!==parseInt(e.span.end))return!0}}(t)&&j().warning("In the annotation file, some of the begin and end offsets of denotations were not integer values.\n      TextAE converted them to integer values.\n      However, to avoid a chance of unexpected rendering, please fix them.",15),!0}function Fo(t){if(!0===t)return"flag";if("number"==typeof t)return"numeric";if("string"==typeof t)return"string";throw`${JSON.stringify(t)} is an unexpected value for an Attribute.`}function Ho(t){const e=t.reduce(((t,e)=>t.has(e)?t.set(e,t.get(e)+1):t.set(e,1)),new Map),n=Math.max(...e.values());for(const[t,i]of e.entries())if(i===n)return t}function zo(t){const e=Math.max(...t.map((t=>{const[e,n]=String(t).split(".");return n?n.length:0})));return Number(Array.from(Array(e)).reduce(((t,e)=>.1*t),1).toFixed(e))}class Wo{constructor({pred:t,obj:e}){this._pred=t,this._objects=[e]}push(t){this._objects.push(t)}get definition(){switch(Fo(this._objects[0])){case"flag":return this._prototype;case"numeric":return this._numericAttribute;case"string":return this._stringAttribute;default:throw new Error(`prototype: ${JSON.stringify(this._prototype)}`)}}get mostFrequentObject(){return Ho(this._objects)}get _prototype(){return{pred:this._pred,"value type":Fo(this._objects[0])}}get _numericAttribute(){return Object.assign({min:Math.min(...this._objects),max:Math.max(...this._objects),step:zo(this._objects),default:Ho(this._objects)},this._prototype)}get _stringAttribute(){return Object.assign({default:Ho(this._objects)},this._prototype)}}function qo(t){return t.reduce(((t,e)=>(t.has(e.pred)?t.get(e.pred).push(e.obj):t.set(e.pred,new Wo(e)),t)),new Map)}function Vo(t,e){return function(t,e){for(const n of e){const e=t.findIndex((t=>t.pred===n.pred));-1!==e?t[e]=Object.assign(n,t[e]):t.push(n)}return t}(t,function(t){return[...qo(t).values()].map((t=>t.definition))}(e))}function Uo(t){return t?JSON.parse(JSON.stringify(t)):{}}class Go{constructor(t=[],e=[]){this._annotations=e,this._config=t}get configuration(){return function(t,e){t=Uo(t);const n=qo(e);for(const e of function(t){return t.filter((t=>"selection"===t["value type"]))}(t))if(e.values&&0!==e.values.length)if(e.values.find((t=>!0===t.default)));else if(n.has(e.pred)){const t=n.get(e.pred);e.values.find((e=>e.id===t.mostFrequentObject)).default=!0}else e.values[0].default=!0;else e.values=[{id:"default",default:!0}];return t}(Vo(this._config,this._annotations),this._annotations)}}function Ko(t,e){return console.assert(t),(e=Uo(e))["attribute types"]=new Go(e["attribute types"],t.attributes).configuration,e}var Jo=n(1581),Xo=n(5477),Yo=n.n(Xo);const Qo=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"JSON schema for texta configuration files","definitions":{"characters":{"type":"array","items":{"type":"string","minLength":1,"maxLength":1}},"color":{"pattern":"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$","type":"string"},"default":{"type":"boolean"},"denote":{"type":"object","required":["id"],"properties":{"id":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"},"default":{"$ref":"#/definitions/default"}}},"types":{"type":"array","items":{"$ref":"#/definitions/denote"}},"autocompletion_ws":{"type":"string","format":"uri-reference"}},"type":"object","properties":{"delimiter characters":{"$ref":"#/definitions/characters"},"non-edge characters":{"$ref":"#/definitions/characters"},"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"autosave":{"type":"boolean"},"autolineheight":{"type":"boolean"},"boundarydetection":{"type":"boolean"},"entity types":{"$ref":"#/definitions/types"},"relation types":{"$ref":"#/definitions/types"},"attribute types":{"type":"array","items":{"type":"object","required":["pred","value type"],"properties":{"pred":{"type":"string"},"value type":{"enum":["flag","selection","string","numeric"]}},"allOf":[{"if":{"properties":{"value type":{"const":"flag"}}},"then":{"properties":{"color":{"$ref":"#/definitions/color"},"label":{"type":"string"}}}},{"if":{"properties":{"value type":{"const":"selection"}}},"then":{"required":["values"],"properties":{"values":{"type":"array","items":{"$ref":"#/definitions/denote"}}}}},{"if":{"properties":{"value type":{"const":"string"}}},"then":{"required":["default"],"properties":{"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"default":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["pattern"],"properties":{"pattern":{"type":"string","format":"regex"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}},{"if":{"properties":{"value type":{"const":"numeric"}}},"then":{"required":["default","min","max","step"],"properties":{"default":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"values":{"type":"array","items":{"type":"object","required":["range"],"properties":{"range":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}}]}}}}');const Zo=new Jo.ZP({verbose:!0});Yo()(Zo,["uri-reference","regex"]);const tr=Zo.compile(Qo);function er(t,e){const n=function(t,e){if(console.assert(e,"If you don't have a configuration, generate a configuration from the annotation."),t.attributes){const n=e["attribute types"],i=t.attributes.filter((t=>n.some((e=>e.pred===t.pred&&"selection"===e["value type"])))).filter((t=>!n.some((e=>e.pred===t.pred&&e.values.some((e=>e.id===t.obj))))));if(i.length)return console.warn("selection attribute values without definition",i),`selection attribute value definition for "${i.map((t=>t.obj)).join(", ")}" in configuration is missing. `}}(t,e);if(!n)return e;j().error(n)}function nr(t,e,n){if(console.assert(e,"config is necessary"),"object"!=typeof e)return void j().error(n);const i=Ko(t,e),s=function(t){return console.assert(t,"config is required."),tr(t)?null:(console.warn(tr.errors),function(t){for(const e of t)if("required"===e.keyword)return`Invalid configuration: The attribute type whose predicate is '${e.data.pred}' misses a mandatory property, '${e.params.missingProperty}'.`}(tr.errors))}(i);if(!s)return er(t,i);j().error(s)}function ir(t,e,n){t.set(n),e.setTypeConfig(n)}function sr(t,e,n,i,s,o){console.assert(e,"config is necessary");const r=nr(t,e,n);return!!r&&(function(t,e){!0===t.autosave?e.push("write-auto"):e.release("write-auto"),!0===t.autolineheight?e.push("line-height-auto"):e.release("line-height-auto"),!0===t.boundarydetection?e.push("boundary-detection"):e.release("boundary-detection")}(r,o),ir(i,s.typeDefinition,r),s.reset(t),!0)}function or(t,e,n,i,s,o){const r=e.typeDefinition;if(Bo(n),n.config)sr(n,n.config,"configuration in anntotaion file is invalid.",t,e,o);else if(i)s.loadConfigulation(i,n);else{const i=er(n,Ko(n));i&&(ir(t,r,i),e.reset(n))}}function rr(t){if(t){const e=function(t){const e=new Map,n=t.split("?")[1];if(n){const t=n.split("&");for(let n=0;n<t.length;n++){const i=t[n].split("="),s=decodeURIComponent(i[0]),o=decodeURIComponent(i[1]);e.set(s,decodeURIComponent(o))}}return e}(t);if(e.has("config_lock"))return e.get("config_lock")}return null}class ar{constructor(){this._map=new Map}get annotation(){return this._map.get("annotation")||{}}set annotation(t){this._map.set("annotation",t)}get configuration(){return this._map.get("configuration")||{}}set configuration(t){this._map.set("configuration",t)}}class lr{constructor(t,e){this._editor=t,this.name=e,this.state=!1}value(t){return void 0===t?this.state:(this.state=t,this.propagate(),null)}toggle(){this.state=!this.state,this.propagate()}propagate(){this._editor.eventEmitter.emit("textae.control.button.push",{buttonName:this.name,state:this.state})}}class cr{constructor(t){this._buttonMap=w.pushButtons.reduce(((e,n)=>(e.set(n,new lr(t,n)),e)),new Map),t.eventEmitter.on("textae.editMode.transition",(t=>this._setMode(t))),this._buttonMap.get("boundary-detection").value(!0)}propagate(){for(const t of this._buttonMap.values())t.propagate()}getButton(t){return this._buttonMap.get(t)}get names(){return this._buttonMap.keys()}_setMode(t){switch(t){case oi:this._updateModeButtons(!0,!1,!1,!1,!0);break;case ri:this._updateModeButtons(!0,!1,!1,!1,!1);break;case ai:this._updateModeButtons(!1,!0,!1,!1,!0);break;case li:this._updateModeButtons(!1,!0,!1,!1,!1);break;case ci:this._updateModeButtons(!1,!1,!0,!1,!0);break;case ui:this._updateModeButtons(!1,!1,!0,!1,!1);break;case hi:this._updateModeButtons(!1,!1,!1,!0,!1);break;default:throw`unknown edit mode!${t}`}}_updateModeButtons(t,e,n,i,s){this._buttonMap.get("view").value(t),this._buttonMap.get("term").value(e),this._buttonMap.get("block").value(n),this._buttonMap.get("relation").value(i),this._buttonMap.get("simple").value(s)}}class ur{constructor(t,e,n){this._states={},this._editor=t,this._selectionModel=e,this._clipBoard=n,this.enable("view",!0),this.enable("term",!0),this.enable("block",!0),this.enable("relation",!0),this.enable("simple",!0),this.enable("setting",!0),function(t,e){t.eventEmitter.on("textae.history.change",(t=>{e.enable("undo",t.hasAnythingToUndo),e.enable("redo",t.hasAnythingToRedo)})).on("textae.selection.span.change",(()=>e.updateBySpan())).on("textae.selection.relation.change",(()=>e.updateByRelation())).on("textae.selection.entity.change",(()=>e.updateByEntity())).on("textae.editMode.transition",(t=>e.setForMode(t))).on("textae.clipBoard.change",(()=>e.updateByClipboard)).on("textae.annotationAutoSaver.enable",(t=>e.enable("write-auto",t)))}(t,this)}propagate(){this._editor.eventEmitter.emit("textae.control.buttons.change",this._states)}enable(t,e){this._states[t]=e,this.propagate()}updateBySpan(){this._updateButtons(w.spanButtons),this.propagate()}updateByEntity(){this._updateButtons(w.entityButtons),this.propagate()}updateByRelation(){this._updateButtons(w.relationButtons),this.propagate()}_updateButtons(t){for(const{name:e,predicate:n}of t){const t=n(this._selectionModel,this._clipBoard);this.enable(e,t)}}updateByClipboard(){this.enable("paste",this._enablePaste)}get _enablePaste(){return w.spanButtons.find((({name:t})=>"copy"===t)).predicate(this._selectionModel,this._clipBoard)}setForMode(t){switch(t){case oi:case ri:this._updateButtonsForMode(!0,!1,!1,!1,!1,!1);break;case ai:case li:this._updateButtonsForMode(!0,!0,!0,!0,!0,!0);break;case ci:case ui:this._updateButtonsForMode(!0,!1,!0,!0,!0,!0);break;case hi:this._updateButtonsForMode(!1,!1,!1,!0,!0,!0);break;default:throw`unknown edit mode!${t}`}this.propagate()}_updateButtonsForMode(t,e,n,i,s,o){this._states.simple=t,this._states["replicate-auto"]=e,this._states["boundary-detection"]=n,this._states["line-height"]=i,this._states["line-height-auto"]=s,this._states.pallet=o}}class hr{constructor(t,e,n){this._enableState=new ur(t,e,n),this._pushButtons=new cr(t)}propagate(){this._enableState.propagate(),this._pushButtons.propagate()}get pushButtonNames(){return this._pushButtons.names}valueOf(t){return this._getPushButton(t).value()}push(t){this._getPushButton(t).value(!0)}release(t){this._getPushButton(t).value(!1)}toggle(t){return this._getPushButton(t).toggle()}_getPushButton(t){return this._pushButtons.getButton(t)}}function dr(t){return new Set(function(t){return t.span.all.map((t=>t.entities)).flat()}(t).concat(t.entity.all))}class pr{constructor(t,e,n){this._editor=t,this._commander=e,this._selectionModel=n,this._items=[],t.eventEmitter.on("textae.annotationData.entity.remove",(t=>{this.hasCuttingItem&&(this._items=this._items.filter((e=>e!=t)))}))}get hasCopyingItem(){return this._items[0]instanceof At}get hasCuttingItem(){return this._items[0]instanceof jt}copyEntities(){const t=[...dr(this._selectionModel)].reduce(((t,e)=>t.add(e.typeValues)),new Set);this._updateItems(t)}cutEntities(){const t=dr(this._selectionModel);this._cuttingItems.length&&this._cuttingItems.every((e=>t.has(e)))&&[...t].every((t=>this._cuttingItems.includes(t)))?this._updateItems(new Set):this._updateItems(t)}pasteEntities(){this.hasCopyingItem&&this._commander.invoke(this._pasteCommand),this._itemsWillBeCutAndPaste.length&&this._selectionModel.span.single&&(this._commander.invoke(this._pasteCommand),this._updateItems(new Set))}_updateItems(t){const e=this._cuttingItems.filter((e=>!t.has(e)));this._items=[...t],this._editor.eventEmitter.emit("textae.clipBoard.change",this._cuttingItems,e)}get _itemsWillBeCutAndPaste(){return this._cuttingItems.filter((t=>t.span.id!==(this._selectionModel.span.single&&this._selectionModel.span.single.id)))}get _cuttingItems(){return this.hasCuttingItem?this._items:[]}get _pasteCommand(){if(this.hasCopyingItem)return this._commander.factory.pasteTypesToSelectedSpansCommand(this._items);if(this._itemsWillBeCutAndPaste.length)return this._commander.factory.moveEntitiesToSelectedSpansCommand(this._itemsWillBeCutAndPaste);throw"There is no item to be copied or to be cut"}}class fr{constructor(t,e,n,i,s){this._buttonController=e;const o=Yn()((()=>n.saveAnnotation()),5e3);s.bind((t=>{t&&e.valueOf("write-auto")&&o()})),t.eventEmitter.on("textae.annotation.load",(()=>this._disabled())).on("textae.saveError",(()=>this._disabled())).on("textae.annotation.setUrl",(e=>t.eventEmitter.emit("textae.annotationAutoSaver.enable",Boolean(i||e)))).on("textae.control.button.push",(({buttonName:t,state:e})=>{"write-auto"===t&&!0===e&&s.hasChange&&n.saveAnnotation()}))}_disabled(){this._buttonController.valueOf("write-auto")&&this._buttonController.toggle("write-auto")}}var mr=n(8575);function gr(t,e){switch(t){case"url":return mr.DB(location.href,e);case"local file":return`${e}(local file)`;default:throw`unknown source type: ${t}.`}}function _r(t,e,n,i,s,o,r,a,l){!function(t,e){t.eventEmitter.on("textae.typeDefinition.reset",(()=>e.resetConfiguration()))}(t,e),function(t){t.eventEmitter.on("textae.history.change",(t=>{window.onbeforeunload=t.hasAnythingToSaveAnnotation?()=>!0:null}))}(t),function(t,e,n,i,s,o,r,a){t.eventEmitter.on("textae.annotation.load",((l,c,u)=>{or(e,n,u,i.get("config"),r,a),s.status(gr(l,c)),o.annotation=u,u.config&&(o.configuration=u.config),t.eventEmitter.emit("textae.pallet.update")})).on("textae.annotation.loadError",((t,e)=>j().error(`${gr(t,e)} is not a annotation file or its format is invalid.`))).on("textae.configuration.load",((t,i,s,l=null)=>{sr(l||Object.assign(o.annotation,n.toJson()),s,`${gr(t,i)} is not a configuration file or its format is invalid.`,e,n,a)&&"url"===t&&(r.configurationUrl=i)})).on("textae.configuration.loadError",((t,e)=>j().error(`${gr(t,e)} is not a configuration file or its format is invalid.`))).on("textae.configuration.save",(()=>{o.configuration=Object.assign(o.configuration,n.typeDefinition.config)}))}(t,i,n,s,o,r,a,l),function(t){const e=t[0];e.addEventListener("mousedown",(t=>{t.shiftKey&&t.preventDefault()})),ei()(e,".textae-editor__entity","mousedown",(t=>t.preventDefault()))}(t),function(t){t[0].addEventListener("keyup",(e=>{t.eventEmitter.emit("textae.editor.key.input"),t.api.handleKeyInput(e)}))}(t)}function vr(t,e,n,i,s,o,r){const a=new Me,l=new Fn(t,i,s,n),c=new pr(t,l,s),u=new hr(t,s,c),h=new ii(t,i,s),d=new ar,p=new go(t,i,s,l,a,c,u,h,d,r.get("autocompletion_ws"),r.get("mode"));!function(t){new MutationObserver((e=>{e.forEach((e=>{e.removedNodes.length&&1===e.removedNodes[0].nodeType&&(e.removedNodes[0].classList.contains("textae-editor__span")||e.removedNodes[0].classList.contains("textae-editor__type"))&&"BODY"===document.activeElement.tagName&&t.focus()}))})).observe(t[0].querySelector(".textae-editor__body"),{childList:!0,subtree:!0})}(t);const f=function(t,e){return"on"===e?new Ro(t):{status(){}}}(t,r.get("status_bar"));"visible"===r.get("control")&&t[0].classList.add("textae-editor--control-visible"),"hidden"===r.get("control")&&t[0].classList.add("textae-editor--control-hidden");const m=rr(r.get("source"));null!==m&&r.set("config_lock",m),r.has("config_lock")&&"true"===r.get("config_lock")?i.typeDefinition.lockEdit():i.typeDefinition.unlockEdit(),d.annotation=function(t,e,n,i,s,o){const r=i.get("annotation"),a=i.get("config");if(r){if(r.has("inlineAnnotation")){const i=JSON.parse(r.get("inlineAnnotation"));return or(t,e,i,a,s,o),n.status("inline"),i}if(!r.has("url"))throw new Error("annotation text is empty.");s.loadAnnotation(r.get("url"))}else a&&s.loadConfigulation(a);return null}(a,i,f,r,e,u);const g=new Ao(t,e,n,i,(()=>d.annotation),(()=>d.configuration),r.get("annotation").get("save_to"));new fr(t,u,g,r.get("annotation").get("save_to"),o),t.api=new Io(l,p,g,u,h),_r(t,n,i,a,r,f,d,e,u),t.eventEmitter.on("textae.pallet.read-button.click",(()=>g.importConfiguration())).on("textae.pallet.write-button.click",(()=>g.uploadConfiguration())),t[0].tabIndex=-1,j().set("notifier","position","top-right")}var yr=n(7187);b().registerHelper("ifSecond",(function(t,e){return 1==t?e.fn(this):e.inverse(this)}));const br=b().compile('\n{{#each this}}\n  {{#ifSecond @index}}\n  <div class="textae-editor__valiondate-dialog__content">\n      <h1>Track annatations will be merged to the root anntations.</h1>\n    </div>\n  {{/ifSecond}}\n  <div class="textae-editor__valiondate-dialog__content">\n    <h2>{{name}}</h2>\n\n    {{#if wrongRangeDenotations}}\n      <table>\n        <caption>Wrong range denotations.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#wrongRangeDenotations}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/wrongRangeDenotations}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if outOfTextDenotations}}\n      <table>\n        <caption>Out of text denotations.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#outOfTextDenotations}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/outOfTextDenotations}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if wrongRangeBlocks}}\n      <table>\n        <caption>Wrong range blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#wrongRangeBlocks}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/wrongRangeBlocks}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if outOfTextBlocks}}\n      <table>\n        <caption>Out of text blokcs.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#outOfTextBlocks}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/outOfTextBlocks}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if duplicatedRangeBlocks}}\n      <table>\n        <caption>Duplicated range blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#duplicatedRangeBlocks}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/duplicatedRangeBlocks}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if wrongRangeTypesettings}}\n      <table>\n        <caption>Wrong range typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#wrongRangeTypesettings}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{style}}</td>\n          </tr>\n          {{/wrongRangeTypesettings}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if outOfTextTypesettings}}\n      <table>\n        <caption>Out of text typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#outOfTextTypesettings}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{style}}</td>\n          </tr>\n          {{/outOfTextTypesettings}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if duplicatedIDs}}\n      <table>\n        <caption>Duplicated IDs in Denotations and Blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#duplicatedIDs}}\n          <tr>\n            <td>{{id}}</td>\n            <td>{{sourceProperty}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{obj}}</td>\n          </tr>\n          {{/duplicatedIDs}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if boundaryCrossingSpans}}\n      <table>\n        <caption>Denotations or Blocks or Typesettings with boundary-cross.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style/obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#boundaryCrossingSpans}}\n          <tr>\n            <td>{{id}}</td>\n            <td>{{sourceProperty}}</td>\n            <td class="alert">{{span.begin}}</td>\n            <td class="alert">{{span.end}}</td>\n            <td>{{style}}{{obj}}</td>\n          </tr>\n          {{/boundaryCrossingSpans}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if referencedEntitiesDoNotExist}}\n      <table>\n        <caption>Referenced entities do not exist.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#referencedEntitiesDoNotExist}}\n          <tr>\n            <td>{{id}}</td>\n            <td>{{sourceProperty}}</td>\n            <td{{#if alertSubj}} class="alert"{{/if}}>{{subj}}</td>\n            <td>{{pred}}</td>\n            <td{{#if alertObj}} class="alert"{{/if}}>{{obj}}</td>\n          </tr>\n          {{/referencedEntitiesDoNotExist}}\n        </tbody>\n      </table>\n    {{/if}}\n\n    {{#if duplicatedAttributes}}\n      <table>\n        <caption>Duplicated attributes.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#duplicatedAttributes}}\n          <tr>\n            <td>{{id}}</td>\n            <td class="alert">{{subj}}</td>\n            <td>{{pred}}</td>\n            <td class="alert">{{obj}}</td>\n          </tr>\n          {{/duplicatedAttributes}}\n        </tbody>\n      </table>\n    {{/if}}\n  </div>\n{{/each}}\n');function xr(t){return br(t)}class wr extends s{constructor(t){super("The following erroneous annotations ignored",xr(t),null,{height:600,width:900})}}function kr(t){const e=t.getAttribute("save_to");return e?decodeURIComponent(e):""}function Sr(t,e){const n=new Map,i=t.innerText;t.innerHTML="",i&&n.set("inlineAnnotation",i);const s=function(t){return t?decodeURIComponent(t):""}(e);s&&n.set("url",s);if(kr(t)&&n.set("save_to",kr(t)),!i&&!s){const t='{"text": "Currently, the document is empty. Use the `import` button or press the key `i` to open a document with annotation."}';n.set("inlineAnnotation",t)}return n}function Cr(t,e){t.has(e)&&t.set(e,decodeURIComponent(t.get(e)))}function Er(t,e,n){e.getAttribute(n)&&t.set(n,e.getAttribute(n))}function Pr(){this.eventEmitter=new yr.EventEmitter;const t=function(t){const e=new Map;return Er(e,t,"mode"),Er(e,t,"control"),Er(e,t,"status_bar"),Er(e,t,"config"),Er(e,t,"config_lock"),Er(e,t,"autocompletion_ws"),Cr(e,"config"),Cr(e,"autocompletion_ws"),e.set("source",function(t){return t.getAttribute("source")||t.getAttribute("target")}(t)),e.set("annotation",Sr(t,e.get("source"))),e}(this[0]),e=new Ee(this),n=new Te(this.eventEmitter,e),i=new Ae(this.eventEmitter),s=new I(this),o=new Ne(this);return o.bind((t=>this.eventEmitter.emit("textae.control.writeButton.transit",t))),function(t,e){t.eventEmitter.on("textae.annotation.save",(()=>{e.annotatioSaved(),j().success("annotation saved")})).on("textae.configuration.save",(()=>{e.configurationSaved(),j().success("configuration saved")})).on("textae.saveError",(()=>{j().error("could not save")}))}(this,i),function(t,e){t.eventEmitter.on("textae.annotationData.all.change",((t,n,i,s)=>{e.resetAllHistories(),i&&new wr(s).open()}))}(this,i),this.api={start:r=>vr(r,s,i,e,n,o,t)},this}n(9293);const Dr=n.g.jQuery.noConflict(!0);function Tr(t,e){var n;t[0].insertBefore(e.el,t[0].childNodes[0]),n=e.el,Dr(n).stick_in_parent(),t.eventEmitter.on("textae.control.button.push",(t=>e.updateButtonPushState(t.buttonName,t.state))).on("textae.control.buttons.change",(t=>e.updateAllButtonEnableState(t))).on("textae.control.writeButton.transit",(t=>e.transitWriteButtonImage(t)))}function $r(t,e,n){Tr(t,e),function(t,e){t[0].appendChild(e.el),t.eventEmitter.on("textae.control.button.push",(t=>e.updateButtonPushState(t.buttonName,t.state))).on("textae.control.buttons.change",(t=>e.updateAllButtonEnableState(t))).on("textae.editor.key.input",(()=>e.hide())),window.addEventListener("click",(t=>{3!==t.which&&e.hide()})),window.addEventListener("contextmenu",(n=>{e.hide();const i=n.target.closest(".textae-editor");if(i===t[0]){if(i.classList.contains("textae-editor__mode--view-with-relation")||i.classList.contains("textae-editor__mode--view-without-relation"))return;n.preventDefault(),e.show(n.pageY-t[0].offsetTop,n.pageX)}}))}(t,n),t.eventEmitter.on("textae.control.button.click",(e=>t.api.handleButtonClick(e))),t.api.updateButtons()}const Or=new class{constructor(){var t;this._editors=new a,t=this._editors,window.addEventListener("resize",c()((()=>t.redraw()),500)),window.addEventListener("load",(()=>{!function(t){document.body.addEventListener("focus",(e=>{const n=t.findByHTMLelement(e.target.closest(".textae-editor"));!function(t,e){e&&(t.selected&&e[0]!==t.selected[0]&&t.unselect(t.selected),t.selected=e)}(t,n)}),!0),document.body.addEventListener("click",(e=>{null===e.target.closest(".textae-editor--dialog")&&null===e.target.closest(".ui-autocomplete")&&null===e.target.closest(".ui-widget-overlay")&&null===e.target.closest(".textae-editor__type-pallet__content")&&(t.findByHTMLelement(e.target.closest(".textae-editor"))||t.selected&&t.unselect(t.selected))}))}(this._editors)}))}registerEditor(t){this._editors.push(t),function(t){new MutationObserver(p).observe(t[0],f)}(t)}};document.addEventListener("DOMContentLoaded",(function(){for(const t of document.querySelectorAll(".textae-editor")){const n=e()(t);Pr.call(n),Or.registerEditor(n),n.api.start(n),$r(n,new S(n),new C(n))}}))})()})();