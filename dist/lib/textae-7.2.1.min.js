!function(){var e={6870:function(e,t){"use strict";function n(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:n(o,s),time:n(l,c),"date-time":n((function(e){const t=e.split(u);return 2===t.length&&o(t[0])&&l(t[1],!0)}),d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&f.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(p.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/},t.fastFormats={...t.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=i.exec(e);if(!t)return!1;const n=+t[1],o=+t[2],s=+t[3];return o>=1&&o<=12&&s>=1&&s<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:r[o])}function s(e,t){if(e&&t)return e>t?1:e<t?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const n=a.exec(e);if(!n)return!1;const i=+n[1],r=+n[2],o=+n[3],s=n[5];return(i<=23&&r<=59&&o<=59||23===i&&59===r&&60===o)&&(!t||""!==s)}function c(e,t){if(!e||!t)return;const n=a.exec(e),i=a.exec(t);return n&&i?(e=n[1]+n[2]+n[3]+(n[4]||""))>(t=i[1]+i[2]+i[3]+(i[4]||""))?1:e<t?-1:0:void 0}const u=/t|\s/i;function d(e,t){if(!e||!t)return;const[n,i]=e.split(u),[r,o]=t.split(u),a=s(n,r);return void 0!==a?a||c(i,o):void 0}const h=/\/|:/,f=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const p=/[^\\]\\Z/},5477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6870),r=n(7963),o=n(3487),s=new o.Name("fullFormats"),a=new o.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,i.fullFormats,s),e;const[n,o]="fast"===t.mode?[i.fastFormats,a]:[i.fullFormats,s];return c(e,t.formats||i.formatNames,n,o),t.keywords&&r.default(e),e};function c(e,t,n,i){var r,s;null!==(r=(s=e.opts.code).formats)&&void 0!==r||(s.formats=o._`require("ajv-formats/dist/formats").${i}`);for(const i of t)e.addFormat(i,n[i])}l.get=(e,t="full")=>{const n=("fast"===t?i.fastFormats:i.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},7963:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const i=n(1581),r=n(3487),o=r.operators,s={formatMaximum:{okStr:"<=",ok:o.LTE,fail:o.GT},formatMinimum:{okStr:">=",ok:o.GTE,fail:o.LT},formatExclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},formatExclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},a={message:({keyword:e,schemaCode:t})=>r.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${s[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:n,schemaCode:o,keyword:a,it:l}=e,{opts:c,self:u}=l;if(!c.validateFormats)return;const d=new i.KeywordCxt(l,u.RULES.all.format.definition,"format");function h(e){return r._`${e}.compare(${n}, ${o}) ${s[a].fail} 0`}d.$data?function(){const n=t.scopeValue("formats",{ref:u.formats,code:c.code.formats}),i=t.const("fmt",r._`${n}[${d.schemaCode}]`);e.fail$data(r.or(r._`typeof ${i} != "object"`,r._`${i} instanceof RegExp`,r._`typeof ${i}.compare != "function"`,h(i)))}():function(){const n=d.schema,i=u.formats[n];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error(`"${a}": format "${n}" does not define "compare" function`);const o=t.scopeValue("formats",{key:n,ref:i,code:c.code.formats?r._`${c.code.formats}${r.getProperty(n)}`:void 0});e.fail$data(h(o))}()},dependencies:["format"]};t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},1581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const i=n(7159),r=n(3924),o=n(1240),s=n(278),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends i.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var u=n(4815);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=n(3487);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}})},7023:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=i;class r extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function o(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)l(n,t[i]),n.push(e[++i]);return new r(n)}t._Code=r,t.nil=new r(""),t._=o;const s=new r("+");function a(e,...t){const n=[u(e[0])];let i=0;for(;i<t.length;)n.push(s),l(n,t[i]),n.push(s,u(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===s){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function l(e,t){var n;t instanceof r?e.push(...t._items):t instanceof i?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new r(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new r(`.${e}`):o`[${e}]`},t.regexpCode=function(e){return new r(e.toString())}},3487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const i=n(7023),r=n(8490);var o=n(7023);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var s=n(8490);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&"),ADD:new i._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?r.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,e,t)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof i.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=O(this.rhs,e,t),this}get names(){return D(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,n,i){super(e,n,i),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class f extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=O(this.code,e,t),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let i=n.length;for(;i--;){const r=n[i];r.optimizeNames(e,t)||(N(e,r.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>$(e,t.names)),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class y extends g{}y.kind="else";class _ extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(M(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=O(this.condition,e,t),this}get names(){const e=super.names;return D(e,this.condition),this.else&&$(e,this.else.names),e}}_.kind="if";class b extends g{}b.kind="for";class x extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=O(this.iteration,e,t),this}get names(){return $(super.names,this.iteration.names)}}class w extends b{constructor(e,t,n,i){super(),this.varKind=e,this.name=t,this.from=n,this.to=i}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${t} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=D(super.names,this.from);return D(e,this.to)}}class k extends b{constructor(e,t,n,i){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=O(this.iterable,e,t),this}get names(){return $(super.names,this.iterable.names)}}class C extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class S extends m{render(e){return"return "+super.render(e)}}S.kind="return";class T extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,i;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&$(e,this.catch.names),this.finally&&$(e,this.finally.names),e}}class E extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}E.kind="catch";class A extends g{render(e){return"finally"+super.render(e)}}A.kind="finally";function $(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function D(e,t){return t instanceof i._CodeOrName?$(e,t.names):e}function O(e,t,n){return e instanceof i.Name?o(e):(r=e)instanceof i._Code&&r._items.some((e=>e instanceof i.Name&&1===t[e.str]&&void 0!==n[e.str]))?new i._Code(e._items.reduce(((e,t)=>(t instanceof i.Name&&(t=o(t)),t instanceof i._Code?e.push(...t._items):e.push(t),e)),[])):e;var r;function o(e){const i=n[e.str];return void 0===i||1!==t[e.str]?e:(delete t[e.str],i)}}function N(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function M(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:i._`!${I(e)}`}t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,i){const r=this._scope.toName(t);return void 0!==n&&i&&(this._constants[r.str]=n),this._leafNode(new l(e,r,n)),r}const(e,t,n){return this._def(r.varKinds.const,e,t,n)}let(e,t,n){return this._def(r.varKinds.let,e,t,n)}var(e,t,n){return this._def(r.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,n){return this._leafNode(new u(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==i.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[n,r]of e)t.length>1&&t.push(","),t.push(n),(n!==r||this.opts.es5)&&(t.push(":"),i.addCodeArg(t,r));return t.push("}"),new i._Code(t)}if(e,t,n){if(this._blockNode(new _(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(_,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new x(e),t)}forRange(e,t,n,i,o=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const s=this._scope.toName(e);return this._for(new w(o,s,t,n),(()=>i(s)))}forOf(e,t,n,o=r.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof i.Name?t:this.var("_arr",t);return this.forRange("_i",0,i._`${e}.length`,(t=>{this.var(s,i._`${e}[${t}]`),n(s)}))}return this._for(new k("of",o,s,t),(()=>n(s)))}forIn(e,t,n,o=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,i._`Object.keys(${t})`,n);const s=this._scope.toName(e);return this._for(new k("in",o,s,t),(()=>n(s)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new S;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new T;if(this._blockNode(i),this.code(e),t){const e=this.name("e");this._currNode=i.catch=new E(e),t(e)}return n&&(this._currNode=i.finally=new A,this.code(n)),this._endBlockNode(E,A)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=i.nil,n,r){return this._blockNode(new C(e,t,n)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=M;const P=j(t.operators.AND);t.and=function(...e){return e.reduce(P)};const L=j(t.operators.OR);function j(e){return(t,n)=>t===i.nil?n:n===i.nil?t:i._`${I(t)} ${e} ${I(n)}`}function I(e){return e instanceof i.Name?e:i._`(${e})`}t.or=function(...e){return e.reduce(L)}},8490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const i=n(7023);class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof i.Name?e:this.name(e)}name(e){return new i.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=s;class a extends i.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=i._`.${new i.Name(t)}[${n}]`}}t.ValueScopeName=a;const l=i._`\n`;t.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:i.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(e),{prefix:r}=i,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[r];if(s){const e=s.get(o);if(e)return e}else s=this._values[r]=new Map;s.set(o,i);const a=this._scope[r]||(this._scope[r]=[]),l=a.length;return a[l]=t.ref,i.setValue(t,{property:r,itemIndex:l}),i}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return i._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,n,s={},a){let l=i.nil;for(const c in e){const u=e[c];if(!u)continue;const d=s[c]=s[c]||new Map;u.forEach((e=>{if(d.has(e))return;d.set(e,o.Started);let s=n(e);if(s){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=i._`${l}${n} ${e} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(e)))throw new r(e);l=i._`${l}${s}${this.opts._n}`}d.set(e,o.Completed)}))}return l}}},4181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const i=n(3487),r=n(6776),o=n(2141);function s(e,t){const n=e.const("err",t);e.if(i._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,i._`[${n}]`)),i._`${o.default.vErrors}.push(${n})`),e.code(i._`${o.default.errors}++`)}function a(e,t){const{gen:n,validateName:r,schemaEnv:o}=e;o.$async?n.throw(i._`new ${e.ValidationError}(${t})`):(n.assign(i._`${r}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>i.str`should pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?i.str`"${e}" keyword must be ${t} ($data)`:i.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,r,o){const{it:l}=e,{gen:u,compositeRule:d,allErrors:h}=l,f=c(e,n,r);(null!=o?o:d||h)?s(u,f):a(l,i._`[${f}]`)},t.reportExtraError=function(e,n=t.keywordError,i){const{it:r}=e,{gen:l,compositeRule:u,allErrors:d}=r;s(l,c(e,n,i)),u||d||a(r,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(i._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(i._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:r,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,o.default.errors,(s=>{e.const(l,i._`${o.default.vErrors}[${s}]`),e.if(i._`${l}.instancePath === undefined`,(()=>e.assign(i._`${l}.instancePath`,i.strConcat(o.default.instancePath,a.errorPath)))),e.assign(i._`${l}.schemaPath`,i.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(i._`${l}.schema`,n),e.assign(i._`${l}.data`,r))}))};const l={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema")};function c(e,t,n){const{createErrors:r}=e.it;return!1===r?i._`{}`:function(e,t,n={}){const{gen:r,it:s}=e,a=[u(s,n),d(e,n)];return function(e,{params:t,message:n},r){const{keyword:s,data:a,schemaValue:c,it:u}=e,{opts:d,propertyName:h,topSchemaRef:f,schemaPath:p}=u;r.push([l.keyword,s],[l.params,"function"==typeof t?t(e):t||i._`{}`]),d.messages&&r.push([l.message,"function"==typeof n?n(e):n]);d.verbose&&r.push([l.schema,c],[l.parentSchema,i._`${f}${p}`],[o.default.data,a]);h&&r.push([l.propertyName,h])}(e,t,a),r.object(...a)}(e,t,n)}function u({errorPath:e},{instancePath:t}){const n=t?i.str`${e}${r.getErrorPath(t,r.Type.Str)}`:e;return[o.default.instancePath,i.strConcat(o.default.instancePath,n)]}function d({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let s=o?t:i.str`${t}/${e}`;return n&&(s=i.str`${s}${r.getErrorPath(n,r.Type.Str)}`),[l.schemaPath,s]}},5173:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const i=n(3487),r=n(7426),o=n(2141),s=n(2531),a=n(6776),l=n(4815),c=n(540);class u{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:s.normalizeId(null==n?void 0:n.$id),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function d(e){const t=f.call(this,e);if(t)return t;const n=s.getFullPath(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,d=new i.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let h;e.$async&&(h=d.scopeValue("Error",{ref:r.default,code:i._`require("ajv/dist/runtime/validation_error").default`}));const p=d.scopeName("validate");e.validateName=p;const m={gen:d,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:d.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:i.stringify(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:i.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:i._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),l.validateFunctionCode(m),d.optimize(this.opts.code.optimize);const t=d.toString();g=`${d.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:t,scopeValues:d._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof i.Name?void 0:e,items:t instanceof i.Name?void 0:t,dynamicProps:e instanceof i.Name,dynamicItems:t instanceof i.Name},n.source&&(n.source.evaluated=i.stringify(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return s.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function f(e){for(const i of this._compilations)if(n=e,(t=i).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return i;var t,n}function p(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||m.call(this,e,t)}function m(e,t){const n=c.parse(t),i=s._getFullPath(n);let r=s.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&i===r)return v.call(this,n,e);const o=s.normalizeId(i),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return v.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||d.call(this,a),o===s.normalizeId(t)){const{schema:t}=a;return t.$id&&(r=s.resolveUrl(r,t.$id)),new u({schema:t,root:e,baseId:r})}return v.call(this,n,a)}}t.SchemaEnv=u,t.compileSchema=d,t.resolveRef=function(e,t,n){var i;n=s.resolveUrl(t,n);const r=e.refs[n];if(r)return r;let o=p.call(this,e,n);if(void 0===o){const r=null===(i=e.localRefs)||void 0===i?void 0:i[n];r&&(o=new u({schema:r,root:e,baseId:t}))}return void 0!==o?e.refs[n]=h.call(this,o):void 0},t.getCompilingSchema=f,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(e,{baseId:t,schema:n,root:i}){var r;if("/"!==(null===(r=e.fragment)||void 0===r?void 0:r[0]))return;for(const i of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;if(void 0===(n=n[a.unescapeFragment(i)]))return;!g.has(i)&&"object"==typeof n&&n.$id&&(t=s.resolveUrl(t,n.$id))}let o;if("boolean"!=typeof n&&n.$ref&&!a.schemaHasRulesButRef(n,this.RULES)){const e=s.resolveUrl(t,n.$ref);o=m.call(this,i,e)}return o=o||new u({schema:n,root:i,baseId:t}),o.schema!==o.root.schema?o:void 0}},2141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r={data:new i.Name("data"),valCxt:new i.Name("valCxt"),instancePath:new i.Name("instancePath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};t.default=r},6646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2531);class r extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=i.resolveUrl(e,t),this.missingSchema=i.normalizeId(i.getFullPath(this.missingRef))}}t.default=r},2531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const i=n(6776),r=n(4063),o=n(9461),s=n(540),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&u(e)<=t)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(l.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function u(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&i.eachItem(e[n],(e=>t+=u(e))),t===1/0))return 1/0}return t}function d(e="",t){!1!==t&&(e=p(e));return h(s.parse(e))}function h(e){return s.serialize(e).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=h;const f=/#\/?$/;function p(e){return e?e.replace(f,""):""}t.normalizeId=p,t.resolveUrl=function(e,t){return t=p(t),s.resolve(e,t)};const m=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const t=p(e.$id),n={"":t},i=d(t,!1),a={},l=new Set;return o(e,{allKeys:!0},((e,t,r,o)=>{if(void 0===o)return;const d=i+t;let h=n[o];function f(t){if(t=p(h?s.resolve(h,t):t),l.has(t))throw u(t);l.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?c(e,n.schema,t):t!==p(d)&&("#"===t[0]?(c(e,a[t],t),a[t]=e):this.refs[t]=d),t}function g(e){if("string"==typeof e){if(!m.test(e))throw new Error(`invalid anchor "${e}"`);f.call(this,`#${e}`)}}"string"==typeof e.$id&&(h=f.call(this,e.$id)),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),n[t]=h})),a;function c(e,t,n){if(void 0!==t&&!r(e,t))throw u(n)}function u(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},3141:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},6776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const i=n(3487),r=n(7023);function o(e,t=e.schema){const{opts:n,self:i}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const r=i.RULES.keywords;for(const n in t)r[n]||p(e,`unknown keyword: "${n}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(o,s,a,l)=>{const c=void 0===a?s:a instanceof i.Name?(s instanceof i.Name?e(o,s,a):t(o,s,a),a):s instanceof i.Name?(t(o,a,s),s):n(s,a);return l!==i.Name||c instanceof i.Name?c:r(o,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",i._`{}`);return void 0!==t&&d(e,n,t),n}function d(e,t,n){Object.keys(n).forEach((n=>e.assign(i._`${t}${i.getProperty(n)}`,!0)))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!s(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=s,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,r,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${e}${t}${i.getProperty(r)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>{e.if(i._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,i._`${n} || {}`).code(i._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,i._`${n} || {}`),d(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,i._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>e.assign(n,!0===t||i._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=d;const h={};var f;function p(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new r._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(f=t.Type||(t.Type={})),t.getErrorPath=function(e,t,n){if(e instanceof i.Name){const r=t===f.Num;return n?r?i._`"[" + ${e} + "]"`:i._`"['" + ${e} + "']"`:r?i._`"/" + ${e}`:i._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?i.getProperty(e).toString():"/"+a(e)},t.checkStrictMode=p},8876:function(e,t){"use strict";function n(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},i){const r=t.RULES.types[i];return r&&!0!==r&&n(e,r)},t.shouldUseGroup=n,t.shouldUseRule=i},5667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const i=n(4181),r=n(3487),o=n(2141),s={message:"boolean schema is false"};function a(e,t){const{gen:n,data:r}=e,o={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};i.reportError(o,s,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:i}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(r._`${i}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:i}=e;!1===i?(n.var(t,!1),a(e)):n.var(t,!0)}},453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const i=n(3141),r=n(8876),o=n(4181),s=n(3487),a=n(6776);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(i.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:i,opts:o}=e,a=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,o.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&r.schemaHasRulesForType(e,t[0]));if(c){const r=h(t,i,o.strictNumbers,l.Wrong);n.if(r,(()=>{a.length?function(e,t,n){const{gen:i,data:r,opts:o}=e,a=i.let("dataType",s._`typeof ${r}`),l=i.let("coerced",s._`undefined`);"array"===o.coerceTypes&&i.if(s._`${a} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,(()=>i.assign(r,s._`${r}[0]`).assign(a,s._`typeof ${r}`).if(h(t,r,o.strictNumbers),(()=>i.assign(l,r)))));i.if(s._`${l} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===o.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void i.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${r}`).elseIf(s._`${r} === null`).assign(l,s._`""`);case"number":return void i.elseIf(s._`${a} == "boolean" || ${r} === null
              || (${a} == "string" && ${r} && ${r} == +${r})`).assign(l,s._`+${r}`);case"integer":return void i.elseIf(s._`${a} === "boolean" || ${r} === null
              || (${a} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(l,s._`+${r}`);case"boolean":return void i.elseIf(s._`${r} === "false" || ${r} === 0 || ${r} === null`).assign(l,!1).elseIf(s._`${r} === "true" || ${r} === 1`).assign(l,!0);case"null":return i.elseIf(s._`${r} === "" || ${r} === 0 || ${r} === false`),void i.assign(l,null);case"array":i.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${r} === null`).assign(l,s._`[${r}]`)}}i.else(),p(e),i.endIf(),i.if(s._`${l} !== undefined`,(()=>{i.assign(r,l),function({gen:e,parentData:t,parentDataProperty:n},i){e.if(s._`${t} !== undefined`,(()=>e.assign(s._`${t}[${n}]`,i)))}(e,l)}))}(e,t,a):p(e)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function d(e,t,n,i=l.Correct){const r=i===l.Correct?s.operators.EQ:s.operators.NEQ;let o;switch(e){case"null":return s._`${t} ${r} null`;case"array":o=s._`Array.isArray(${t})`;break;case"object":o=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return s._`typeof ${t} ${r} ${e}`}return i===l.Correct?o:s.not(o);function a(e=s.nil){return s.and(s._`typeof ${t} == "number"`,e,n?s._`isFinite(${t})`:s.nil)}}function h(e,t,n,i){if(1===e.length)return d(e[0],t,n,i);let r;const o=a.toHash(e);if(o.array&&o.object){const e=s._`typeof ${t} != "object"`;r=o.null?e:s._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else r=s.nil;o.number&&delete o.integer;for(const e in o)r=s.and(r,d(e,t,n,i));return r}t.checkDataType=d,t.checkDataTypes=h;const f={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:n,schema:i}=e,r=a.schemaRefOrVal(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:r,schemaValue:r,parentSchema:i,params:{},it:e}}(e);o.reportError(t,f)}t.reportTypeError=p},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const i=n(3487),r=n(6776);function o(e,t,n){const{gen:o,compositeRule:s,data:a,opts:l}=e;if(void 0===n)return;const c=i._`${a}${i.getProperty(t)}`;if(s)return void r.checkStrictMode(e,`default is ignored for: ${c}`);let u=i._`${c} === undefined`;"empty"===l.useDefaults&&(u=i._`${u} || ${c} === null || ${c} === ""`),o.if(u,i._`${c} = ${i.stringify(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:i}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(i)&&i.forEach(((t,n)=>o(e,n,t.default)))}},4815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const i=n(5667),r=n(453),o=n(8876),s=n(453),a=n(313),l=n(5005),c=n(3099),u=n(3487),d=n(2141),h=n(2531),f=n(6776),p=n(4181);function m({gen:e,validateName:t,schema:n,schemaEnv:i,opts:r},o){r.code.es5?e.func(t,u._`${d.default.data}, ${d.default.valCxt}`,i.$async,(()=>{e.code(u._`"use strict"; ${g(n,r)}`),function(e,t){e.if(d.default.valCxt,(()=>{e.var(d.default.instancePath,u._`${d.default.valCxt}.${d.default.instancePath}`),e.var(d.default.parentData,u._`${d.default.valCxt}.${d.default.parentData}`),e.var(d.default.parentDataProperty,u._`${d.default.valCxt}.${d.default.parentDataProperty}`),e.var(d.default.rootData,u._`${d.default.valCxt}.${d.default.rootData}`),t.dynamicRef&&e.var(d.default.dynamicAnchors,u._`${d.default.valCxt}.${d.default.dynamicAnchors}`)}),(()=>{e.var(d.default.instancePath,u._`""`),e.var(d.default.parentData,u._`undefined`),e.var(d.default.parentDataProperty,u._`undefined`),e.var(d.default.rootData,d.default.data),t.dynamicRef&&e.var(d.default.dynamicAnchors,u._`{}`)}))}(e,r),e.code(o)})):e.func(t,u._`${d.default.data}, ${function(e){return u._`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${e.dynamicRef?u._`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}(r)}`,i.$async,(()=>e.code(g(n,r)).code(o)))}function g(e,t){return"object"==typeof e&&e.$id&&(t.code.source||t.code.process)?u._`/*# sourceURL=${e.$id} */`:u.nil}function v(e,t){_(e)&&(b(e),y(e))?function(e,t){const{schema:n,gen:i,opts:r}=e;r.$comment&&n.$comment&&w(e);(function(e){e.schema.$id&&(e.baseId=h.resolveUrl(e.baseId,e.schema.$id))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=i.const("_errs",d.default.errors);x(e,o),i.var(t,u._`${o} === ${d.default.errors}`)}(e,t):i.boolOrEmptySchema(e,t)}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function _(e){return"boolean"!=typeof e.schema}function b(e){f.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:n,opts:i,self:r}=e;t.$ref&&i.ignoreKeywordsWithRef&&f.schemaHasRulesButRef(t,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function x(e,t){if(e.opts.jtd)return k(e,[],!1,t);const n=r.getSchemaTypes(e.schema);k(e,n,!r.coerceAndCheckDataType(e,n),t)}function w({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:r}){const o=n.$comment;if(!0===r.$comment)e.code(u._`${d.default.self}.logger.log(${o})`);else if("function"==typeof r.$comment){const n=u.str`${i}/$comment`,r=e.scopeValue("root",{ref:t.root});e.code(u._`${d.default.self}.opts.$comment(${o}, ${n}, ${r}.schema)`)}}function k(e,t,n,i){const{gen:r,schema:a,data:l,allErrors:c,opts:h,self:p}=e,{RULES:m}=p;function g(f){o.shouldUseGroup(a,f)&&(f.type?(r.if(s.checkDataType(f.type,l,h.strictNumbers)),C(e,f),1===t.length&&t[0]===f.type&&n&&(r.else(),s.reportTypeError(e)),r.endIf()):C(e,f),c||r.if(u._`${d.default.errors} === ${i||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&f.schemaHasRulesButRef(a,m)?(h.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{T(e.dataTypes,t)||E(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>T(t,e)))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&E(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const i in n){const r=n[i];if("object"==typeof r&&o.shouldUseRule(e.schema,r)){const{type:n}=r.definition;n.length&&!n.some((e=>S(t,e)))&&E(e,`missing type "${n.join(",")}" for keyword "${i}"`)}}}(e,e.dataTypes)}(e,t),r.block((()=>{for(const e of m.rules)g(e);g(m.post)}))):r.block((()=>$(e,"$ref",m.all.$ref.definition)))}function C(e,t){const{gen:n,schema:i,opts:{useDefaults:r}}=e;r&&a.assignDefaults(e,t.type),n.block((()=>{for(const n of t.rules)o.shouldUseRule(i,n)&&$(e,n.keyword,n.definition,t.type)}))}function S(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function T(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function E(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,f.checkStrictMode(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){_(e)&&(b(e),y(e))?function(e){const{schema:t,opts:n,gen:i}=e;m(e,(()=>{n.$comment&&t.$comment&&w(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&f.checkStrictMode(e,"default is ignored in the schema root")}(e),i.let(d.default.vErrors,null),i.let(d.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",u._`${n}.evaluated`),t.if(u._`${e.evaluated}.dynamicProps`,(()=>t.assign(u._`${e.evaluated}.props`,u._`undefined`))),t.if(u._`${e.evaluated}.dynamicItems`,(()=>t.assign(u._`${e.evaluated}.items`,u._`undefined`)))}(e),x(e),function(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:r,opts:o}=e;n.$async?t.if(u._`${d.default.errors} === 0`,(()=>t.return(d.default.data)),(()=>t.throw(u._`new ${r}(${d.default.vErrors})`))):(t.assign(u._`${i}.errors`,d.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:i}){n instanceof u.Name&&e.assign(u._`${t}.props`,n);i instanceof u.Name&&e.assign(u._`${t}.items`,i)}(e),t.return(u._`${d.default.errors} === 0`))}(e)}))}(e):m(e,(()=>i.topBoolOrEmptySchema(e)))};class A{constructor(e,t,n){if(l.validateKeywordUsage(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=f.schemaRefOrVal(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",N(this.$data,e));else if(this.schemaCode=this.schemaValue,!l.validSchemaType(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",d.default.errors))}result(e,t,n){this.gen.if(u.not(e)),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.result(e,void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(u._`${t} !== undefined && (${u.or(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){p.reportError(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');p.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=u.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=u.nil,t=u.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:r,def:o}=this;n.if(u.or(u._`${i} === undefined`,t)),e!==u.nil&&n.assign(e,!0),(r.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:i,it:r}=this;return u.or(function(){if(n.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return u._`${s.checkDataTypes(e,t,r.opts.strictNumbers,s.DataType.Wrong)}`}return u.nil}(),function(){if(i.validateSchema){const n=e.scopeValue("validate$data",{ref:i.validateSchema});return u._`!${n}(${t})`}return u.nil}())}subschema(e,t){const n=c.getSubschema(this.it,e);c.extendSubschemaData(n,this.it,e),c.extendSubschemaMode(n,e);const i={...this.it,...n,items:void 0,props:void 0};return v(i,t),i}mergeEvaluated(e,t){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=f.mergeEvaluated.props(i,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=f.mergeEvaluated.items(i,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(t,(()=>this.mergeEvaluated(e,u.Name))),!0}}function $(e,t,n,i){const r=new A(e,n,t);"code"in n?n.code(r,i):r.$data&&n.validate?l.funcKeywordCode(r,n):"macro"in n?l.macroKeywordCode(r,n):(n.compile||n.validate)&&l.funcKeywordCode(r,n)}t.KeywordCxt=A;const D=/^\/(?:[^~]|~0|~1)*$/,O=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function N(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let r,o;if(""===e)return d.default.rootData;if("/"===e[0]){if(!D.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);r=e,o=d.default.rootData}else{const s=O.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(r=s[2],"#"===r){if(a>=t)throw new Error(l("property/index",a));return i[t-a]}if(a>t)throw new Error(l("data",a));if(o=n[t-a],!r)return o}let s=o;const a=r.split("/");for(const e of a)e&&(o=u._`${o}${u.getProperty(f.unescapeJsonPointer(e))}`,s=u._`${s} && ${o}`);return s;function l(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=N},5005:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const i=n(3487),r=n(2141),o=n(412),s=n(4181);function a(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,(()=>t.assign(n,i._`${r.parentData}[${r.parentDataProperty}]`)))}function l(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:i.stringify(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:r,schema:o,parentSchema:s,it:a}=e,c=t.macro.call(a.self,o,s,a),u=l(n,r,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const d=n.name("valid");e.subschema({schema:c,schemaPath:i.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},d),e.pass(d,(()=>e.error(!0)))},t.funcKeywordCode=function(e,t){var n;const{gen:c,keyword:u,schema:d,parentSchema:h,$data:f,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const m=!f&&t.compile?t.compile.call(p.self,d,h,p):t.validate,g=l(c,u,m),v=c.let("valid");function y(n=(t.async?i._`await `:i.nil)){const s=p.opts.passContext?r.default.this:r.default.self,a=!("compile"in t&&!f||!1===t.schema);c.assign(v,i._`${n}${o.callValidateCode(e,g,s,a)}`,t.modifying)}function _(e){var n;c.if(i.not(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,(function(){if(!1===t.errors)y(),t.modifying&&a(e),_((()=>e.error()));else{const n=t.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>y(i._`await `)),(t=>c.assign(v,!1).if(i._`${t} instanceof ${p.ValidationError}`,(()=>c.assign(e,i._`${t}.errors`)),(()=>c.throw(t))))),e}():function(){const e=i._`${g}.errors`;return c.assign(e,null),y(i.nil),e}();t.modifying&&a(e),_((()=>function(e,t){const{gen:n}=e;n.if(i._`Array.isArray(${t})`,(()=>{n.assign(r.default.vErrors,i._`${r.default.vErrors} === null ? ${t} : ${r.default.vErrors}.concat(${t})`).assign(r.default.errors,i._`${r.default.vErrors}.length`),s.extendErrors(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)},t.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},t.validateKeywordUsage=function({schema:e,opts:t,self:n},i,r){if(Array.isArray(i.keyword)?!i.keyword.includes(r):i.keyword!==r)throw new Error("ajv implementation error");const o=i.dependencies;if(null==o?void 0:o.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${r}: ${o.join(",")}`);if(i.validateSchema){if(!i.validateSchema(e[r])){const e="keyword value is invalid: "+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}}},3099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const i=n(3487),r=n(6776);t.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:i._`${e.schemaPath}${i.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:i._`${e.schemaPath}${i.getProperty(t)}${i.getProperty(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${r.escapeFragment(n)}`}}if(void 0!==o){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:s,dataTypes:a,propertyName:l}){if(void 0!==s&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==n){const{errorPath:s,dataPathArr:a,opts:l}=t;u(c.let("data",i._`${t.data}${i.getProperty(n)}`,!0)),e.errorPath=i.str`${s}${r.getErrorPath(n,o,l.jsPropertySyntax)}`,e.parentDataProperty=i._`${n}`,e.dataPathArr=[...a,e.parentDataProperty]}if(void 0!==s){u(s instanceof i.Name?s:c.let("data",s,!0)),void 0!==l&&(e.propertyName=l)}function u(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:r,allErrors:o}){void 0!==i&&(e.compositeRule=i),void 0!==r&&(e.createErrors=r),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},7159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var i=n(4815);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return i.KeywordCxt}});var r=n(3487);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const o=n(7426),s=n(6646),a=n(3141),l=n(5173),c=n(3487),u=n(2531),d=n(453),h=n(6776),f=n(2228),p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7/8.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now, see option `strict`."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function y(e){var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y,_;const b=e.strict,x=null===(t=e.code)||void 0===t?void 0:t.optimize,w=!0===x||void 0===x?1:x||0;return{strictSchema:null===(i=null!==(n=e.strictSchema)&&void 0!==n?n:b)||void 0===i||i,strictNumbers:null===(o=null!==(r=e.strictNumbers)&&void 0!==r?r:b)||void 0===o||o,strictTypes:null!==(a=null!==(s=e.strictTypes)&&void 0!==s?s:b)&&void 0!==a?a:"log",strictTuples:null!==(c=null!==(l=e.strictTuples)&&void 0!==l?l:b)&&void 0!==c?c:"log",strictRequired:null!==(d=null!==(u=e.strictRequired)&&void 0!==u?u:b)&&void 0!==d&&d,code:e.code?{...e.code,optimize:w}:{optimize:w},loopRequired:null!==(h=e.loopRequired)&&void 0!==h?h:200,loopEnum:null!==(f=e.loopEnum)&&void 0!==f?f:200,meta:null===(p=e.meta)||void 0===p||p,messages:null===(m=e.messages)||void 0===m||m,inlineRefs:null===(g=e.inlineRefs)||void 0===g||g,addUsedSchema:null===(v=e.addUsedSchema)||void 0===v||v,validateSchema:null===(y=e.validateSchema)||void 0===y||y,validateFormats:null===(_=e.validateFormats)||void 0===_||_}}class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...y(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:m,es5:t,lines:n}),this.logger=function(e){if(!1===e)return T;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const i=e.validateFormats;e.validateFormats=!1,this.RULES=a.getRules(),b.call(this,g,e,"NOT SUPPORTED"),b.call(this,v,e,"DEPRECATED","warn"),this._metaOpts=S.call(this),e.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&C.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),w.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t}=this.opts;t&&e&&this.addMetaSchema(f,f.$id,!1)}defaultMeta(){const{meta:e}=this.opts;return this.opts.defaultMeta="object"==typeof e?e.$id||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const i=n(t);return"$async"in n||(this.errors=n.errors),i}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,e,t);async function i(e,t){await r.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function r(e){e&&!this.getSchema(e)&&await i.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await r.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,i);return this}let r;if("object"==typeof e&&(r=e.$id,void 0!==r&&"string"!=typeof r))throw new Error("schema $id must be string");return t=u.normalizeId(t||r),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,i,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,e);if(!i&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return i}getSchema(e){let t;for(;"string"==typeof(t=x.call(this,e));)e=t;if(void 0===t){const n=new l.SchemaEnv({schema:{}});if(t=l.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=x.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e.$id;return n&&(n=u.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(A.call(this,n,t),!t)return h.eachItem(n,(e=>$.call(this,e))),this;O.call(this,t);const i={...t,type:d.getJSONTypes(t.type),schemaType:d.getJSONTypes(t.schemaType)};return h.eachItem(n,0===i.type.length?e=>$.call(this,e,i):e=>i.type.forEach((t=>$.call(this,e,i,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const i of t){const t=i.split("/").slice(1);let r=e;for(const e of t)r=r[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:i}=t.definition,o=r[e];i&&o&&(r[e]=M(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const i=e[n];t&&!t.test(n)||("string"==typeof i?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,t,n,i=this.opts.validateSchema,r=this.opts.addUsedSchema){let o;if("object"==typeof e)o=e.$id;else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let s=this._cache.get(e);if(void 0!==s)return s;const a=u.getSchemaRefs.call(this,e);return n=u.normalizeId(o||n),s=new l.SchemaEnv({schema:e,meta:t,baseId:n,localRefs:a}),this._cache.set(s.schema,s),r&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=s),i&&this.validateSchema(e,!0),s}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function b(e,t,n,i="error"){for(const r in e){const o=r;o in t&&this.logger[i](`${n}: option ${r}. ${e[o]}`)}}function x(e){return e=u.normalizeId(e),this.schemas[e]||this.refs[e]}function w(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function k(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function C(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function S(){const e={...this.opts};for(const t of p)delete e[t];return e}t.default=_,_.ValidationError=o.default,_.MissingRefError=s.default;const T={log(){},warn(){},error(){}};const E=/^[a-z_$][a-z0-9_$:-]*$/i;function A(e,t){const{RULES:n}=this;if(h.eachItem(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!E.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function $(e,t,n){var i;const r=null==t?void 0:t.post;if(n&&r)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=r?o.post:o.rules.find((({type:e})=>e===n));if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:d.getJSONTypes(t.type),schemaType:d.getJSONTypes(t.schemaType)}};t.before?D.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(i=t.implements)||void 0===i||i.forEach((e=>this.addKeyword(e)))}function D(e,t,n){const i=e.rules.findIndex((e=>e.keyword===n));i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function O(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=M(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function M(e){return{anyOf:[e,N]}}},2228:function(e){"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},278:function(e){"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},3510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4063);i.code='require("ajv/dist/runtime/equal").default',t.default=i},4499:function(e,t){"use strict";function n(e){const t=e.length;let n,i=0,r=0;for(;r<t;)i++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<t&&(n=e.charCodeAt(r),56320==(64512&n)&&r++);return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},7426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},4783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const i=n(3487),r=n(6776),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:i}=t;Array.isArray(i)?s(e,i):r.checkStrictMode(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function s(e,t){const{gen:n,schema:o,data:s,keyword:a,it:l}=e;l.items=!0;const c=n.const("len",i._`${s}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(i._`${c} <= ${t.length}`);else if("object"==typeof o&&!r.alwaysValidSchema(l,o)){const o=n.var("valid",i._`${c} <= ${t.length}`);n.if(i.not(o),(()=>function(o){n.forRange("i",t.length,c,(t=>{e.subschema({keyword:a,dataProp:t,dataPropType:r.Type.Num},o),l.allErrors||n.if(i.not(o),(()=>n.break()))}))}(o))),e.ok(o)}}t.validateAdditionalItems=s,t.default=o},9351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),r=n(3487),o=n(2141),s=n(6776),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>r._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,errsCount:c,it:u}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:d,opts:h}=u;if(u.props=!0,"all"!==h.removeAdditional&&s.alwaysValidSchema(u,n))return;const f=i.allSchemaProperties(a.properties),p=i.allSchemaProperties(a.patternProperties);function m(e){t.code(r._`delete ${l}[${e}]`)}function g(i){if("all"===h.removeAdditional||h.removeAdditional&&!1===n)m(i);else{if(!1===n)return e.setParams({additionalProperty:i}),e.error(),void(d||t.break());if("object"==typeof n&&!s.alwaysValidSchema(u,n)){const n=t.name("valid");"failing"===h.removeAdditional?(v(i,n,!1),t.if(r.not(n),(()=>{e.reset(),m(i)}))):(v(i,n),d||t.if(r.not(n),(()=>t.break())))}}}function v(t,n,i){const r={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===i&&Object.assign(r,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(r,n)}t.forIn("key",l,(e=>{f.length||p.length?t.if(function(e){let n;if(f.length>8){const r=s.schemaRefOrVal(u,a.properties,"properties");n=i.isOwnProperty(t,r,e)}else n=f.length?r.or(...f.map((t=>r._`${e} === ${t}`))):r.nil;return p.length&&(n=r.or(n,...p.map((n=>r._`${i.usePattern(t,n)}.test(${e})`)))),r.not(n)}(e),(()=>g(e))):g(e)})),e.ok(r._`${c} === ${o.default.errors}`)}};t.default=a},1125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),r={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach(((t,n)=>{if(i.alwaysValidSchema(r,t))return;const s=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(s)}))}};t.default=r},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(412).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=i},9864:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?i.str`must contain at least ${e} valid item(s)`:i.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?i._`{minContains: ${e}}`:i._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:s,it:a}=e;let l,c;const{minContains:u,maxContains:d}=o;a.opts.next?(l=void 0===u?1:u,c=d):l=1;const h=t.const("len",i._`${s}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void r.checkStrictMode(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return r.checkStrictMode(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if(r.alwaysValidSchema(a,n)){let t=i._`${h} >= ${l}`;return void 0!==c&&(t=i._`${t} && ${h} <= ${c}`),void e.pass(t)}a.items=!0;const f=t.name("valid");if(void 0===c&&1===l)p(f,(()=>t.if(f,(()=>t.break()))));else{t.let(f,!1);const e=t.name("_valid"),n=t.let("count",0);p(e,(()=>t.if(e,(()=>function(e){t.code(i._`${e}++`),void 0===c?t.if(i._`${e} >= ${l}`,(()=>t.assign(f,!0).break())):(t.if(i._`${e} > ${c}`,(()=>t.assign(f,!1).break())),1===l?t.assign(f,!0):t.if(i._`${e} >= ${l}`,(()=>t.assign(f,!0))))}(n)))))}function p(n,i){t.forRange("i",0,h,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:r.Type.Num,compositeRule:!0},n),i()}))}e.result(f,(()=>e.reset()))}};t.default=o},7772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const i=n(3487),r=n(6776),o=n(412);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const r=1===t?"property":"properties";return i.str`must have ${r} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:r}})=>i._`{property: ${e},
    missingProperty: ${r},
    depsCount: ${t},
    deps: ${n}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const i in e){if("__proto__"===i)continue;(Array.isArray(e[i])?t:n)[i]=e[i]}return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:r,it:s}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=o.propertyInData(n,r,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?n.if(u,(()=>{for(const t of c)o.checkReportMissingProp(e,t)})):(n.if(i._`${u} && (${o.checkMissingProp(e,c,a)})`),o.reportMissingProp(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:i,keyword:s,it:a}=e,l=n.name("valid");for(const c in t)r.alwaysValidSchema(a,t[c])||(n.if(o.propertyInData(n,i,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=s},9434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>i.str`must match "${e.ifClause}" schema`,params:({params:e})=>i._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&r.checkStrictMode(o,'"if" without "then" and "else" is ignored');const a=s(o,"then"),l=s(o,"else");if(!a&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),a&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,d("then",n),d("else",n))}else a?t.if(u,d("then")):t.if(i.not(u),d("else"));function d(n,r){return()=>{const o=e.subschema({keyword:n},u);t.assign(c,u),e.mergeValidEvaluated(o,c),r?t.assign(r,i._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}};function s(e,t){const n=e.schema[t];return void 0!==n&&!r.alwaysValidSchema(e,n)}t.default=o},8200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4783),r=n(2924),o=n(4665),s=n(1119),a=n(9864),l=n(7772),c=n(3708),u=n(9351),d=n(6239),h=n(2296),f=n(5697),p=n(19),m=n(4200),g=n(1125),v=n(9434),y=n(6552);t.default=function(e=!1){const t=[f.default,p.default,m.default,g.default,v.default,y.default,c.default,u.default,l.default,d.default,h.default];return e?t.push(r.default,s.default):t.push(i.default,o.default),t.push(a.default),t}},4665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const i=n(3487),r=n(6776),o=n(412),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return a(e,"additionalItems",t);n.items=!0,r.alwaysValidSchema(n,t)||e.ok(o.validateArray(e))}};function a(e,t,n=e.schema){const{gen:o,parentSchema:s,data:a,keyword:l,it:c}=e;!function(e){const{opts:i,errSchemaPath:o}=c,s=n.length,a=s===e.minItems&&(s===e.maxItems||!1===e[t]);if(i.strictTuples&&!a){const e=`"${l}" is ${s}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;r.checkStrictMode(c,e,i.strictTuples)}}(s),c.opts.unevaluated&&n.length&&!0!==c.items&&(c.items=r.mergeEvaluated.items(o,n.length,c.items));const u=o.name("valid"),d=o.const("len",i._`${a}.length`);n.forEach(((t,n)=>{r.alwaysValidSchema(c,t)||(o.if(i._`${d} > ${n}`,(()=>e.subschema({keyword:l,schemaProp:n,dataProp:n},u))),e.ok(u))}))}t.validateTuple=a,t.default=s},1119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(412),s=n(4783),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:i}=e,{prefixItems:a}=n;i.items=!0,r.alwaysValidSchema(i,t)||(a?s.validateAdditionalItems(e,a):e.ok(o.validateArray(e)))}};t.default=a},5697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if(i.alwaysValidSchema(r,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.result(o,(()=>e.error()),(()=>e.reset()))},error:{message:"must NOT be valid"}};t.default=r},4200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>i._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&o.discriminator)return;const a=n,l=t.let("valid",!1),c=t.let("passing",null),u=t.name("_valid");e.setParams({passing:c}),t.block((function(){a.forEach(((n,o)=>{let a;r.alwaysValidSchema(s,n)?t.var(u,!0):a=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},u),o>0&&t.if(i._`${u} && ${l}`).assign(l,!1).assign(c,i._`[${c}, ${o}]`).else(),t.if(u,(()=>{t.assign(l,!0),t.assign(c,o),a&&e.mergeEvaluated(a,i.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}};t.default=o},2296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),r=n(3487),o=n(6776),s=n(6776),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:a,parentSchema:l,it:c}=e,{opts:u}=c,d=i.schemaProperties(c,n);if(0===d.length)return;const h=u.strictSchema&&!u.allowMatchingProperties&&l.properties,f=t.name("valid");!0===c.props||c.props instanceof r.Name||(c.props=s.evaluatedPropsToName(t,c.props));const{props:p}=c;function m(e){for(const t in h)new RegExp(e).test(t)&&o.checkStrictMode(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function g(n){t.forIn("key",a,(o=>{t.if(r._`${i.usePattern(t,n)}.test(${o})`,(()=>{e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:s.Type.Str},f),c.opts.unevaluated&&!0!==p?t.assign(r._`${p}[${o}]`,!0):c.allErrors||t.if(r.not(f),(()=>t.break()))}))}))}!function(){for(const e of d)h&&m(e),c.allErrors?g(e):(t.var(f,!0),g(e),t.if(f))}()}};t.default=a},2924:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4665),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>i.validateTuple(e,"items")};t.default=r},6239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4815),r=n(412),o=n(6776),s=n(9351),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new i.KeywordCxt(c,s.default,"additionalProperties"));const u=r.allSchemaProperties(n);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=o.mergeEvaluated.props(t,o.toHash(u),c.props));const d=u.filter((e=>!o.alwaysValidSchema(c,n[e])));if(0===d.length)return;const h=t.name("valid");for(const n of d)f(n)?p(n):(t.if(r.propertyInData(t,l,n,c.opts.ownProperties)),p(n),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(h);function f(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},3708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>i._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:s}=e;if(r.alwaysValidSchema(s,n))return;const a=t.name("valid");t.forIn("key",o,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if(i.not(a),(()=>{e.error(!0),s.allErrors||t.break()}))})),e.ok(a)}};t.default=o},6552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&i.checkStrictMode(n,`"${e}" without "if" is ignored`)}};t.default=r},412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const i=n(3487),r=n(6776),o=n(2141);function s(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:i._`Object.prototype.hasOwnProperty`})}function a(e,t,n){return i._`${s(e)}.call(${t}, ${n})`}function l(e,t,n,r){const o=i._`${t}${i.getProperty(n)} === undefined`;return r?i.or(o,i.not(a(e,t,n))):o}function c(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:r,it:o}=e;n.if(l(n,r,t,o.opts.ownProperties),(()=>{e.setParams({missingProperty:i._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},r,o){return i.or(...r.map((r=>i.and(l(e,t,r,n.ownProperties),i._`${o} = ${r}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=s,t.isOwnProperty=a,t.propertyInData=function(e,t,n,r){const o=i._`${t}${i.getProperty(n)} !== undefined`;return r?i._`${o} && ${a(e,t,n)}`:o},t.noPropertyInData=l,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter((n=>!r.alwaysValidSchema(e,t[n])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:a},it:l},c,u,d){const h=d?i._`${e}, ${t}, ${r}${s}`:t,f=[[o.default.instancePath,i.strConcat(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&f.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const p=i._`${h}, ${n.object(...f)}`;return u!==i.nil?i._`${c}.call(${u}, ${p})`:i._`${c}(${p})`},t.usePattern=function(e,t){return e.scopeValue("pattern",{key:t,ref:new RegExp(t,"u"),code:i._`new RegExp(${t}, "u")`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(s){const l=t.const("len",i._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:o,dataProp:n,dataPropType:r.Type.Num},a),t.if(i.not(a),s)}))}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>r.alwaysValidSchema(s,e)))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,r)=>{const s=e.subschema({keyword:o,schemaProp:r,compositeRule:!0},l);t.assign(a,i._`${a} || ${l}`);e.mergeValidEvaluated(s,l)||t.if(i.not(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},8386:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},5684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8386),r=n(8280),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,r.default];t.default=o},8280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const i=n(6646),r=n(412),o=n(3487),s=n(2141),a=n(5173),l=n(6776),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:s,schemaEnv:l,validateName:c,opts:h,self:f}=r,{root:p}=l;if(("#"===n||"#/"===n)&&s===p.baseId)return function(){if(l===p)return d(e,c,l,l.$async);const n=t.scopeValue("root",{ref:p});return d(e,o._`${n}.validate`,p,p.$async)}();const m=a.resolveRef.call(f,p,s,n);if(void 0===m)throw new i.default(s,n);return m instanceof a.SchemaEnv?function(t){const n=u(e,t);d(e,n,t,t.$async)}(m):function(i){const r=t.scopeValue("schema",!0===h.code.source?{ref:i,code:o.stringify(i)}:{ref:i}),s=t.name("valid"),a=e.subschema({schema:i,dataTypes:[],schemaPath:o.nil,topSchemaRef:r,errSchemaPath:n},s);e.mergeEvaluated(a),e.ok(s)}(m)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function d(e,t,n,i){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:d,opts:h}=c,f=h.passContext?s.default.this:o.nil;function p(e){const t=o._`${e}.errors`;a.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,o._`${s.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const i=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(i&&!i.dynamicProps)void 0!==i.props&&(c.props=l.mergeEvaluated.props(a,i.props,c.props));else{const t=a.var("props",o._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,o.Name)}if(!0!==c.items)if(i&&!i.dynamicItems)void 0!==i.items&&(c.items=l.mergeEvaluated.items(a,i.items,c.items));else{const t=a.var("items",o._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,o.Name)}}i?function(){if(!d.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(o._`await ${r.callValidateCode(e,t,f)}`),m(t),u||a.assign(n,!0)}),(e=>{a.if(o._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),p(e),u||a.assign(n,!1)})),e.ok(n)}():e.result(r.callValidateCode(e,t,f),(()=>m(t)),(()=>p(t)))}t.getValidate=u,t.callRef=d,t.default=c},1240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(9306),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===r.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>i._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:o,parentSchema:s,it:a}=e,{oneOf:l}=s;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const c=o.propertyName;if("string"!=typeof c)throw new Error("discriminator: requires propertyName");if(o.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),d=t.const("tag",i._`${n}${i.getProperty(c)}`);function h(n){const r=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(o,i.Name),r}t.if(i._`typeof ${d} == "string"`,(()=>function(){const n=function(){var e;const t={},n=r(s);let i=!0;for(let t=0;t<l.length;t++){const s=l[t],a=null===(e=s.properties)||void 0===e?void 0:e[c];if("object"!=typeof a)throw new Error(`discriminator: oneOf schemas must have "properties/${c}"`);i=i&&(n||r(s)),o(a,t)}if(!i)throw new Error(`discriminator: "${c}" must be required`);return t;function r({required:e}){return Array.isArray(e)&&e.includes(c)}function o(e,t){if(e.const)a(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`);for(const n of e.enum)a(n,t)}}function a(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${c}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(i._`${d} === ${e}`),t.assign(u,h(n[e]));t.else(),e.error(!1,{discrError:r.DiscrError.Mapping,tag:d,tagName:c}),t.endIf()}()),(()=>e.error(!1,{discrError:r.DiscrError.Tag,tag:d,tagName:c}))),e.ok(u)}};t.default=o},9306:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))},3924:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5684),r=n(2649),o=n(8200),s=n(9502),a=n(6167),l=[i.default,r.default,o.default(),s.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},9651:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`must match format "${e}"`,params:({schemaCode:e})=>i._`{format: ${e}}`},code(e,t){const{gen:n,data:r,$data:o,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:h}=l;c.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:h.formats,code:c.code.formats}),s=n.const("fDef",i._`${o}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(i._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,(()=>n.assign(l,i._`${s}.type || "string"`).assign(u,i._`${s}.validate`)),(()=>n.assign(l,i._`"string"`).assign(u,s))),e.fail$data(i.or(!1===c.strictSchema?i.nil:i._`${a} && !${u}`,function(){const e=d.$async?i._`(${s}.async ? await ${u}(${r}) : ${u}(${r}))`:i._`${u}(${r})`,n=i._`(typeof ${u} == "function" ? ${e} : ${u}.test(${r}))`;return i._`${u} && ${u} !== true && ${l} === ${t} && !${n}`}()))}():function(){const o=h.formats[s];if(!o)return void function(){if(!1===c.strictSchema)return void h.logger.warn(e());throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${u}"`}}();if(!0===o)return;const[a,l,f]=function(e){const t=e instanceof RegExp?i.regexpCode(e):c.code.formats?i._`${c.code.formats}${i.getProperty(s)}`:void 0,r=n.scopeValue("formats",{key:s,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,i._`${r}.validate`];return["string",e,r]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!d.$async)throw new Error("async format in sync schema");return i._`await ${f}(${r})`}return"function"==typeof l?i._`${f}(${r})`:i._`${f}.test(${r})`}())}())}};t.default=r},9502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=[n(9651).default];t.default=i},6167:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},4693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(3510),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>i._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,schemaCode:s}=e;e.fail$data(i._`!${r.useFunc(t,o.default)}(${n}, ${s})`)}};t.default=s},966:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(3510),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>i._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:a,schemaCode:l,it:c}=e;if(!s&&0===a.length)throw new Error("enum must have non-empty array");const u=a.length>=c.opts.loopEnum,d=r.useFunc(t,o.default);let h;if(u||s)h=t.let("valid"),e.block$data(h,(function(){t.assign(h,!1),t.forOf("v",l,(e=>t.if(i._`${d}(${n}, ${e})`,(()=>t.assign(h,!0).break()))))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);h=i.or(...a.map(((t,r)=>function(e,t){const r=a[t];return r&&"object"==typeof r?i._`${d}(${n}, ${e}[${t}])`:i._`${n} === ${r}`}(e,r))))}e.pass(h)}};t.default=s},2649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3983),r=n(430),o=n(3229),s=n(4336),a=n(498),l=n(3301),c=n(1687),u=n(2958),d=n(4693),h=n(966),f=[i.default,r.default,o.default,s.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,h.default];t.default=f},1687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return i.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,o="maxItems"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`${n}.length ${o} ${r}`)}};t.default=r},3229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=n(6776),o=n(4499),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return i.str`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s,it:a}=e,l="maxLength"===t?i.operators.GT:i.operators.LT,c=!1===a.opts.unicode?i._`${n}.length`:i._`${r.useFunc(e.gen,o.default)}(${n})`;e.fail$data(i._`${c} ${l} ${s}`)}};t.default=s},3983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r=i.operators,o={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},s={message:({keyword:e,schemaCode:t})=>i.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${o[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(i._`${n} ${o[t].fail} ${r} || isNaN(${n})`)}};t.default=a},498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return i.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,o="maxProperties"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`Object.keys(${n}).length ${o} ${r}`)}};t.default=r},430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>i.str`must be multiple of ${e}`,params:({schemaCode:e})=>i._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:r,it:o}=e,s=o.opts.multipleOfPrecision,a=t.let("res"),l=s?i._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:i._`${a} !== parseInt(${a})`;e.fail$data(i._`(${r} === 0 || (${a} = ${n}/${r}, ${l}))`)}};t.default=r},4336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),r=n(3487),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match pattern "${e}"`,params:({schemaCode:e})=>r._`{pattern: ${e}}`},code(e){const{gen:t,data:n,$data:o,schema:s,schemaCode:a}=e,l=o?r._`(new RegExp(${a}, "u"))`:i.usePattern(t,s);e.fail$data(r._`!${l}.test(${n})`)}};t.default=o},3301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),r=n(3487),o=n(6776),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>r.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>r._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:s,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===n.length)return;const d=n.length>=u.loopRequired;if(c.allErrors?function(){if(d||l)e.block$data(r.nil,h);else for(const t of n)i.checkReportMissingProp(e,t)}():function(){const o=t.let("missing");if(d||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,s,(()=>{t.assign(o,i.propertyInData(t,a,n,u.ownProperties)),t.if(r.not(o),(()=>{e.error(),t.break()}))}),r.nil)}(o,n))),e.ok(n)}else t.if(i.checkMissingProp(e,n,o)),i.reportMissingProp(e,o),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:i}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!i.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;o.checkStrictMode(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",s,(n=>{e.setParams({missingProperty:n}),t.if(i.noPropertyInData(t,a,n,u.ownProperties),(()=>e.error()))}))}}};t.default=s},2958:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(453),r=n(3487),o=n(6776),s=n(3510),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>r.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>r._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:a,schema:l,parentSchema:c,schemaCode:u,it:d}=e;if(!a&&!l)return;const h=t.let("valid"),f=c.items?i.getSchemaTypes(c.items):[];function p(o,s){const a=t.name("item"),l=i.checkDataTypes(f,a,d.opts.strictNumbers,i.DataType.Wrong),c=t.const("indices",r._`{}`);t.for(r._`;${o}--;`,(()=>{t.let(a,r._`${n}[${o}]`),t.if(l,r._`continue`),f.length>1&&t.if(r._`typeof ${a} == "string"`,r._`${a} += "_"`),t.if(r._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(s,r._`${c}[${a}]`),e.error(),t.assign(h,!1).break()})).code(r._`${c}[${a}] = ${o}`)}))}function m(i,a){const l=o.useFunc(t,s.default),c=t.name("outer");t.label(c).for(r._`;${i}--;`,(()=>t.for(r._`${a} = ${i}; ${a}--;`,(()=>t.if(r._`${l}(${n}[${i}], ${n}[${a}])`,(()=>{e.error(),t.assign(h,!1).break(c)}))))))}e.block$data(h,(function(){const i=t.let("i",r._`${n}.length`),o=t.let("j");e.setParams({i:i,j:o}),t.assign(h,!0),t.if(r._`${i} > 1`,(()=>(f.length>0&&!f.some((e=>"object"===e||"array"===e))?p:m)(i,o)))}),r._`${u} === false`),e.ok(h)}};t.default=a},8307:function(e,t){var n;!function(i){"use strict";var r=":not(:disabled):not(.ajs-reset)",o=13,s=27,a=112,l=123,c=37,u=39,d=9,h={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+r].join(r+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},f=[];function p(e,t){e.className+=" "+t}function m(e,t){for(var n=e.className.split(" "),i=t.split(" "),r=0;r<i.length;r+=1){var o=n.indexOf(i[r]);o>-1&&n.splice(o,1)}e.className=n.join(" ")}function g(){return"rtl"===i.getComputedStyle(document.body).direction}function v(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function y(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function _(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function b(e){if(null===e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n+=1)t.push(b(e[n]));return t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return(t=new RegExp(e.source)).global=e.global,t.ignoreCase=e.ignoreCase,t.multiline=e.multiline,t.lastIndex=e.lastIndex,t;if("object"==typeof e){for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=b(e[i]));return t}return e}function x(e,t){if(e.elements){var n=e.elements.root;n.parentNode.removeChild(n),delete e.elements,e.settings=b(e.__settings),e.__init=t,delete e.__internal}}var w=!1;try{var k=Object.defineProperty({},"passive",{get:function(){w=!0}});i.addEventListener("test",k,k),i.removeEventListener("test",k,k)}catch(e){}var C=function(e,t,n,i,r){e.addEventListener(t,n,w?{capture:i,passive:r}:!0===i)},S=function(e,t,n,i,r){e.removeEventListener(t,n,w?{capture:i,passive:r}:!0===i)},T=function(){var e,t,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==document.documentElement.style[e]){t=i[e],n=!0;break}return{type:t,supported:n}}();function E(e,t){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(e),t.apply(e,n)}return t.apply(e,[null,e])}}function A(e,t){return{index:e,button:t,cancel:!1}}function $(e,t){if("function"==typeof t.get(e))return t.get(e).call(t)}var D=function(){var e,t,n=[],r=!1,o=i.navigator.userAgent.indexOf("Safari")>-1&&i.navigator.userAgent.indexOf("Chrome")<0,w='<div class="ajs-dimmer"></div>',k='<div class="ajs-modal" tabindex="0"></div>',D='<div class="ajs-dialog" tabindex="0"></div>',O='<button class="ajs-reset"></button>',M='<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',P='<div class="ajs-header"></div>',L='<div class="ajs-body"></div>',j='<div class="ajs-content"></div>',I='<div class="ajs-footer"></div>',R={primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},F='<button class="ajs-button"></button>',z='<div class="ajs-handle"></div>',H="ajs-in",B="ajs-out",W="alertify",U="ajs-basic",q="ajs-capture",V="ajs-closable",G="ajs-fixed",K="ajs-frameless",Y="ajs-hidden",X="ajs-maximized",J="ajs-maximizable",Q="ajs-modeless",Z="ajs-movable",ee="ajs-no-selection",te="ajs-no-overflow",ne="ajs-no-padding",ie="ajs-pinnable",re="ajs-",oe="ajs-resizable",se="ajs-shake",ae="ajs-unpinned",le="ajs-no-transition";function ce(e){if(!e.__internal){var t;N.defaults.hooks.preinit(e),delete e.__init,e.__settings||(e.__settings=b(e.settings)),"function"==typeof e.setup?((t=e.setup()).options=t.options||{},t.focus=t.focus||{}):t={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof e.hooks&&(e.hooks={});var i=[];if(Array.isArray(t.buttons))for(var r=0;r<t.buttons.length;r+=1){var o=t.buttons[r],s={};for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);i.push(s)}var l=e.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:i,focus:t.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};c.root=document.createElement("div"),c.root.style.display="none",c.root.className=W+" "+Y+" ",c.root.innerHTML=w+k,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=D,c.dialog=c.modal.firstChild,c.dialog.innerHTML=O+M+P+L+I+z+O,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=j,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=R.auxiliary+R.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=F,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<e.__internal.buttons.length;u+=1){var d=e.__internal.buttons[u];for(var h in n.indexOf(d.key)<0&&n.push(d.key),d.element=c.buttonTemplate.cloneNode(),d.element.innerHTML=d.text,"string"==typeof d.className&&""!==d.className&&p(d.element,d.className),d.attrs)"className"!==h&&d.attrs.hasOwnProperty(h)&&d.element.setAttribute(h,d.attrs[h]);"auxiliary"===d.scope?c.buttons.auxiliary.appendChild(d.element):c.buttons.primary.appendChild(d.element)}for(var f in e.elements=c,l.resetHandler=E(e,Ie),l.beginMoveHandler=E(e,Qe),l.beginResizeHandler=E(e,at),l.bringToFrontHandler=E(e,me),l.modalClickHandler=E(e,$e),l.buttonsClickHandler=E(e,Me),l.commandsClickHandler=E(e,_e),l.transitionInHandler=E(e,ze),l.transitionOutHandler=E(e,He),l.options)void 0!==t.options[f]?e.set(f,t.options[f]):N.defaults.hasOwnProperty(f)?e.set(f,N.defaults[f]):"title"===f&&e.set(f,N.defaults.glossary[f]);"function"==typeof e.build&&e.build(),N.defaults.hooks.postinit(e)}document.body.appendChild(e.elements.root)}function ue(){i.scrollTo(e,t)}function de(){for(var e=0,t=0;t<f.length;t+=1){var n=f[t];(n.isModal()||n.isMaximized())&&(e+=1)}0===e&&document.body.className.indexOf(te)>=0?(m(document.body,te),pe(!1)):e>0&&document.body.className.indexOf(te)<0&&(pe(!0),p(document.body,te))}var he="",fe=0;function pe(e){N.defaults.preventBodyShift&&(e&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(fe=t,he=i.getComputedStyle(document.body).top,p(document.body,G),document.body.style.top=-t+"px"):e||(t=fe,document.body.style.top=he,m(document.body,G),ue()))}function me(e,t){for(var n=f.indexOf(t)+1;n<f.length;n+=1)if(f[n].isModal())return;return document.body.lastChild!==t.elements.root&&(document.body.appendChild(t.elements.root),f.splice(f.indexOf(t),1),f.push(t),je(t)),!1}function ge(e,t,n,i){switch(t){case"title":e.setHeader(i);break;case"modal":!function(e){e.get("modal")?(m(e.elements.root,Q),e.isOpen()&&(ft(e),Te(e),de())):(p(e.elements.root,Q),e.isOpen()&&(ht(e),Te(e),de()))}(e);break;case"basic":!function(e){e.get("basic")?p(e.elements.root,U):m(e.elements.root,U)}(e);break;case"frameless":!function(e){e.get("frameless")?p(e.elements.root,K):m(e.elements.root,K)}(e);break;case"pinned":!function(e){e.get("pinned")?(m(e.elements.root,ae),e.isOpen()&&Se(e)):(p(e.elements.root,ae),e.isOpen()&&!e.isModal()&&Ce(e))}(e);break;case"closable":!function(e){e.get("closable")?(p(e.elements.root,V),function(e){C(e.elements.modal,"click",e.__internal.modalClickHandler)}(e)):(m(e.elements.root,V),function(e){S(e.elements.modal,"click",e.__internal.modalClickHandler)}(e))}(e);break;case"maximizable":!function(e){e.get("maximizable")?p(e.elements.root,J):m(e.elements.root,J)}(e);break;case"pinnable":!function(e){e.get("pinnable")?p(e.elements.root,ie):m(e.elements.root,ie)}(e);break;case"movable":!function(e){e.get("movable")?(p(e.elements.root,Z),e.isOpen()&&pt(e)):(tt(e),m(e.elements.root,Z),e.isOpen()&&mt(e))}(e);break;case"resizable":!function(e){e.get("resizable")?(p(e.elements.root,oe),e.isOpen()&&gt(e)):(ut(e),m(e.elements.root,oe),e.isOpen()&&vt(e))}(e);break;case"padding":i?m(e.elements.root,ne):e.elements.root.className.indexOf(ne)<0&&p(e.elements.root,ne);break;case"overflow":i?m(e.elements.root,te):e.elements.root.className.indexOf(te)<0&&p(e.elements.root,te);break;case"transition":!function(e,t,n){"string"==typeof n&&m(e.elements.root,re+n),p(e.elements.root,re+t),e.elements.root.offsetWidth}(e,i,n);break;case"transitionOff":!function(e){e.get("transitionOff")?p(e.elements.root,le):m(e.elements.root,le)}(e)}"function"==typeof e.hooks.onupdate&&e.hooks.onupdate.call(e,t,n,i)}function ve(e,t,n,i,r){var o,s={op:void 0,items:[]};if(void 0===r&&"string"==typeof i)s.op="get",t.hasOwnProperty(i)?(s.found=!0,s.value=t[i]):(s.found=!1,s.value=void 0);else if(s.op="set","object"==typeof i){var a=i;for(var l in a)t.hasOwnProperty(l)?(t[l]!==a[l]&&(o=t[l],t[l]=a[l],n.call(e,l,o,a[l])),s.items.push({key:l,value:a[l],found:!0})):s.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof i)throw new Error("args must be a string or object");t.hasOwnProperty(i)?(t[i]!==r&&(o=t[i],t[i]=r,n.call(e,i,o,r)),s.items.push({key:i,value:r,found:!0})):s.items.push({key:i,value:r,found:!1})}return s}function ye(e){var t;Ne(e,(function(n){return t=!0!==e.get("invokeOnCloseOff")&&!0===n.invokeOnClose})),!t&&e.isOpen()&&e.close()}function _e(e,t){switch(e.srcElement||e.target){case t.elements.commands.pin:t.isPinned()?xe(t):be(t);break;case t.elements.commands.maximize:t.isMaximized()?ke(t):we(t);break;case t.elements.commands.close:ye(t)}return!1}function be(e){e.set("pinned",!0)}function xe(e){e.set("pinned",!1)}function we(e){$("onmaximize",e),p(e.elements.root,X),e.isOpen()&&de(),$("onmaximized",e)}function ke(e){$("onrestore",e),m(e.elements.root,X),e.isOpen()&&de(),$("onrestored",e)}function Ce(e){var t=y();e.elements.modal.style.marginTop=v()+"px",e.elements.modal.style.marginLeft=t+"px",e.elements.modal.style.marginRight=-t+"px"}function Se(e){var t=parseInt(e.elements.modal.style.marginTop,10),n=parseInt(e.elements.modal.style.marginLeft,10);if(e.elements.modal.style.marginTop="",e.elements.modal.style.marginLeft="",e.elements.modal.style.marginRight="",e.isOpen()){var i=0,r=0;""!==e.elements.dialog.style.top&&(i=parseInt(e.elements.dialog.style.top,10)),e.elements.dialog.style.top=i+(t-v())+"px",""!==e.elements.dialog.style.left&&(r=parseInt(e.elements.dialog.style.left,10)),e.elements.dialog.style.left=r+(n-y())+"px"}}function Te(e){e.get("modal")||e.get("pinned")?Se(e):Ce(e)}var Ee=!1,Ae=0;function $e(e,t){if(e.timeStamp-Ae>200&&(Ae=e.timeStamp)&&!Ee){var n=e.srcElement||e.target;!0===t.get("closableByDimmer")&&n===t.elements.modal&&ye(t)}Ee=!1}var De=0,Oe=!1;function Ne(e,t){if(Date.now()-De>200&&(De=Date.now()))for(var n=0;n<e.__internal.buttons.length;n+=1){var i=e.__internal.buttons[n];if(!i.element.disabled&&t(i)){var r=A(n,i);"function"==typeof e.callback&&e.callback.apply(e,[r]),!1===r.cancel&&e.close();break}}}function Me(e,t){var n=e.srcElement||e.target;Ne(t,(function(e){return e.element===n&&(Oe=!0)}))}function Pe(e){if(!Oe){var t=f[f.length-1],i=e.keyCode;return 0===t.__internal.buttons.length&&i===s&&!0===t.get("closable")?(ye(t),!1):n.indexOf(i)>-1?(Ne(t,(function(e){return e.key===i})),!1):void 0}Oe=!1}function Le(e){var t=f[f.length-1],i=e.keyCode;if(i===c||i===u){for(var r=t.__internal.buttons,o=0;o<r.length;o+=1)if(document.activeElement===r[o].element)switch(i){case c:return void r[(o||r.length)-1].element.focus();case u:return void r[(o+1)%r.length].element.focus()}}else if(i<l+1&&i>a-1&&n.indexOf(i)>-1)return e.preventDefault(),e.stopPropagation(),Ne(t,(function(e){return e.key===i})),!1}function je(e,t){if(t)t.focus();else{var n=e.__internal.focus,i=n.element;switch(typeof n.element){case"number":e.__internal.buttons.length>n.element&&(i=!0===e.get("basic")?e.elements.reset[0]:e.__internal.buttons[n.element].element);break;case"string":i=e.elements.body.querySelector(n.element);break;case"function":i=n.element.call(e)}(!0===e.get("defaultFocusOff")||null==i&&0===e.__internal.buttons.length)&&(i=e.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}function Ie(e,t){if(!t)for(var n=f.length-1;n>-1;n-=1)if(f[n].isModal()){t=f[n];break}if(t&&t.isModal()){var i,r=t.elements.reset[0],o=t.elements.reset[1],s=e.relatedTarget,a=t.elements.root.contains(s),l=e.srcElement||e.target;if(l===r&&!a||l===o&&s===r)return;l===o||l===document.body?i=r:l===r&&s===o?i=Re(t):l===r&&a&&(i=Re(t,!0)),je(t,i)}}function Re(e,t){var n=[].slice.call(e.elements.dialog.querySelectorAll(h.tabbable));t&&n.reverse();for(var i=0;i<n.length;i+=1){var r=n[i];if(r.offsetParent||r.offsetWidth||r.offsetHeight||r.getClientRects().length)return r}}function Fe(e){var t=f[f.length-1];t&&e.shiftKey&&e.keyCode===d&&t.elements.reset[1].focus()}function ze(e,t){clearTimeout(t.__internal.timerIn),je(t),Oe=!1,$("onfocus",t),S(t.elements.dialog,T.type,t.__internal.transitionInHandler),m(t.elements.root,H)}function He(e,t){clearTimeout(t.__internal.timerOut),S(t.elements.dialog,T.type,t.__internal.transitionOutHandler),tt(t),ut(t),t.isMaximized()&&!t.get("startMaximized")&&ke(t),"function"==typeof t.__internal.destroy&&t.__internal.destroy.apply(t)}var Be=null,We=0,Ue=0,qe="pageX",Ve="pageY",Ge=null,Ke=!1,Ye=null;function Xe(e,t){var n=e[qe]-We,i=e[Ve]-Ue;Ke&&(i-=document.body.scrollTop),t.style.left=n+"px",t.style.top=i+"px"}function Je(e,t){var n=e[qe]-We,i=e[Ve]-Ue;Ke&&(i-=document.body.scrollTop),t.style.left=Math.min(Ge.maxLeft,Math.max(Ge.minLeft,n))+"px",t.style.top=Ke?Math.min(Ge.maxTop,Math.max(Ge.minTop,i))+"px":Math.max(Ge.minTop,i)+"px"}function Qe(e,t){if(null===nt&&!t.isMaximized()&&t.get("movable")){var n,i=0,r=0;if("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0],qe="clientX",Ve="clientY"):0===e.button&&(n=e),n){var o=t.elements.dialog;if(p(o,q),o.style.left&&(i=parseInt(o.style.left,10)),o.style.top&&(r=parseInt(o.style.top,10)),We=n[qe]-i,Ue=n[Ve]-r,t.isModal()?Ue+=t.elements.modal.scrollTop:t.isPinned()&&(Ue-=document.body.scrollTop),t.get("moveBounded")){var s=o,a=-i,l=-r;do{a+=s.offsetLeft,l+=s.offsetTop}while(s=s.offsetParent);Ge={maxLeft:a,minLeft:-a,maxTop:document.documentElement.clientHeight-o.clientHeight-l,minTop:-l},Ye=Je}else Ge=null,Ye=Xe;return $("onmove",t),Ke=!t.isModal()&&t.isPinned(),Be=t,Ye(n,o),p(document.body,ee),!1}}}function Ze(e){var t;Be&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&Ye(t,Be.elements.dialog))}function et(){if(Be){var e=Be;Be=Ge=null,m(document.body,ee),m(e.elements.dialog,q),$("onmoved",e)}}function tt(e){Be=null;var t=e.elements.dialog;t.style.left=t.style.top=""}var nt=null,it=Number.Nan,rt=0,ot=0,st=0;function at(e,t){var n;if(!t.isMaximized()&&("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0]):0===e.button&&(n=e),n)){$("onresize",t),nt=t,st=t.elements.resizeHandle.offsetHeight/2;var i=t.elements.dialog;return p(i,q),it=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=t.elements.header.offsetHeight+t.elements.footer.offsetHeight+"px",i.style.width=(rt=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(ot=i.offsetWidth)+"px"),i.style.maxWidth="none",p(document.body,ee),!1}}function lt(e){var t;nt&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&function(e,t,n){var i,r,o=t,s=0,a=0;do{s+=o.offsetLeft,a+=o.offsetTop}while(o=o.offsetParent);!0===n?(i=e.pageX,r=e.pageY):(i=e.clientX,r=e.clientY);var l=g();if(l&&(i=document.body.offsetWidth-i,isNaN(it)||(s=document.body.offsetWidth-s-t.offsetWidth)),t.style.height=r-a+st+"px",t.style.width=i-s+st+"px",!isNaN(it)){var c=.5*Math.abs(t.offsetWidth-rt);l&&(c*=-1),t.offsetWidth>rt?t.style.left=it+c+"px":t.offsetWidth>=ot&&(t.style.left=it-c+"px")}}(t,nt.elements.dialog,!nt.get("modal")&&!nt.get("pinned")))}function ct(){if(nt){var e=nt;nt=null,m(document.body,ee),m(e.elements.dialog,q),Ee=!0,$("onresized",e)}}function ut(e){nt=null;var t=e.elements.dialog;"none"===t.style.maxWidth&&(t.style.maxWidth=t.style.minWidth=t.style.width=t.style.height=t.style.minHeight=t.style.left="",it=Number.Nan,rt=ot=st=0)}function dt(){for(var e=0;e<f.length;e+=1){var t=f[e];t.get("autoReset")&&(tt(t),ut(t))}}function ht(e){C(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function ft(e){S(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function pt(e){C(e.elements.header,"mousedown",e.__internal.beginMoveHandler),C(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function mt(e){S(e.elements.header,"mousedown",e.__internal.beginMoveHandler),S(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function gt(e){C(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),C(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}function vt(e){S(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),S(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}return{__init:ce,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(Q)<0},isMaximized:function(){return this.elements.root.className.indexOf(X)>-1},isPinned:function(){return this.elements.root.className.indexOf(ae)<0},maximize:function(){return this.isMaximized()||we(this),this},restore:function(){return this.isMaximized()&&ke(this),this},pin:function(){return this.isPinned()||be(this),this},unpin:function(){return this.isPinned()&&xe(this),this},bringToFront:function(){return me(0,this),this},moveTo:function(e,t){if(!isNaN(e)&&!isNaN(t)){$("onmove",this);var n=this.elements.dialog,i=n,r=0,o=0;n.style.left&&(r-=parseInt(n.style.left,10)),n.style.top&&(o-=parseInt(n.style.top,10));do{r+=i.offsetLeft,o+=i.offsetTop}while(i=i.offsetParent);var s=e-r,a=t-o;g()&&(s*=-1),n.style.left=s+"px",n.style.top=a+"px",$("onmoved",this)}return this},resizeTo:function(e,t){var n=parseFloat(e),i=parseFloat(t),r=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){$("onresize",this),(""+e).match(r)&&(n=n/100*document.documentElement.clientWidth),(""+t).match(r)&&(i=i/100*document.documentElement.clientHeight);var o=this.elements.dialog;"none"!==o.style.maxWidth&&(o.style.minWidth=(ot=o.offsetWidth)+"px"),o.style.maxWidth="none",o.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",o.style.width=n+"px",o.style.height=i+"px",$("onresized",this)}return this},setting:function(e,t){var n=this,i=ve(this,this.__internal.options,(function(e,t,i){ge(n,e,t,i)}),e,t);if("get"===i.op)return i.found?i.value:void 0!==this.settings?ve(this,this.settings,this.settingUpdated||function(){},e,t).value:void 0;if("set"===i.op){if(i.items.length>0)for(var r=this.settingUpdated||function(){},o=0;o<i.items.length;o+=1){var s=i.items[o];s.found||void 0===this.settings||ve(this,this.settings,r,s.key,s.value)}return this}},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},setHeader:function(e){return"string"==typeof e?(_(this.elements.header),this.elements.header.innerHTML=e):e instanceof i.HTMLElement&&this.elements.header.firstChild!==e&&(_(this.elements.header),this.elements.header.appendChild(e)),this},setContent:function(e){return"string"==typeof e?(_(this.elements.content),this.elements.content.innerHTML=e):e instanceof i.HTMLElement&&this.elements.content.firstChild!==e&&(_(this.elements.content),this.elements.content.appendChild(e)),this},showModal:function(e){return this.show(!0,e)},show:function(n,s){if(ce(this),this.__internal.isOpen){tt(this),ut(this),p(this.elements.dialog,se);var a=this;setTimeout((function(){m(a.elements.dialog,se)}),200)}else{if(this.__internal.isOpen=!0,f.push(this),N.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",r="0"),"function"==typeof this.prepare&&this.prepare(),c=this,1===f.length&&(C(i,"resize",dt),C(document.body,"keyup",Pe),C(document.body,"keydown",Le),C(document.body,"focus",Ie),C(document.documentElement,"mousemove",Ze),C(document.documentElement,"touchmove",Ze,!1,!1),C(document.documentElement,"mouseup",et),C(document.documentElement,"touchend",et),C(document.documentElement,"mousemove",lt),C(document.documentElement,"touchmove",lt,!1,!1),C(document.documentElement,"mouseup",ct),C(document.documentElement,"touchend",ct)),C(c.elements.commands.container,"click",c.__internal.commandsClickHandler),C(c.elements.footer,"click",c.__internal.buttonsClickHandler),C(c.elements.reset[0],"focusin",c.__internal.resetHandler),C(c.elements.reset[0],"keydown",Fe),C(c.elements.reset[1],"focusin",c.__internal.resetHandler),Oe=!0,C(c.elements.dialog,T.type,c.__internal.transitionInHandler),c.get("modal")||ht(c),c.get("resizable")&&gt(c),c.get("movable")&&pt(c),void 0!==n&&this.set("modal",n),e=y(),t=v(),de(),"string"==typeof s&&""!==s&&(this.__internal.className=s,p(this.elements.root,s)),this.get("startMaximized")?this.maximize():this.isMaximized()&&ke(this),Te(this),this.elements.root.removeAttribute("style"),m(this.elements.root,B),p(this.elements.root,H),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,T.supported?1e3:100),o){var l=this.elements.root;l.style.display="none",setTimeout((function(){l.style.display="block"}),0)}this.elements.root.offsetWidth,m(this.elements.root,Y),ue(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),$("onshow",this)}var c;return this},close:function(){var e;return this.__internal.isOpen&&!1!==$("onclosing",this)&&(e=this,1===f.length&&(S(i,"resize",dt),S(document.body,"keyup",Pe),S(document.body,"keydown",Le),S(document.body,"focus",Ie),S(document.documentElement,"mousemove",Ze),S(document.documentElement,"mouseup",et),S(document.documentElement,"mousemove",lt),S(document.documentElement,"mouseup",ct)),S(e.elements.commands.container,"click",e.__internal.commandsClickHandler),S(e.elements.footer,"click",e.__internal.buttonsClickHandler),S(e.elements.reset[0],"focusin",e.__internal.resetHandler),S(e.elements.reset[0],"keydown",Fe),S(e.elements.reset[1],"focusin",e.__internal.resetHandler),C(e.elements.dialog,T.type,e.__internal.transitionOutHandler),e.get("modal")||ft(e),e.get("movable")&&mt(e),e.get("resizable")&&vt(e),m(this.elements.root,H),p(this.elements.root,B),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,T.supported?1e3:100),p(this.elements.root,Y),this.elements.modal.offsetWidth,N.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&m(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),$("onclose",this),f.splice(f.indexOf(this),1),this.__internal.isOpen=!1,de()),f.length||"0"!==r||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return N.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){x(this,ce)},this.close()):this.__internal.destroy||x(this,ce)),this}}}(),O=function(){var e,t=[],n=h.notifier.classes,r=n.base;function o(t){t.__internal||(t.__internal={position:N.defaults.notifier.position,delay:N.defaults.notifier.delay},e=document.createElement("DIV"),("transitionOff"in h.notifier?h.notifier.transitionOff:h.transitionOff)&&(r=n.base+" ajs-no-transition"),a(t));e.parentNode!==document.body&&document.body.appendChild(e)}function s(e){e.__internal.pushed=!0,t.push(e)}function a(t){switch(e.className=r,t.__internal.position){case"top-right":p(e,n.top+" "+n.right);break;case"top-left":p(e,n.top+" "+n.left);break;case"top-center":p(e,n.top+" "+n.center);break;case"bottom-left":p(e,n.bottom+" "+n.left);break;case"bottom-center":p(e,n.bottom+" "+n.center);break;default:case"bottom-right":p(e,n.bottom+" "+n.right)}}function l(r,o){function a(e,t){t.__internal.closeButton&&"true"!==e.target.getAttribute("data-close")||t.dismiss(!0)}function l(t,n){S(n.element,T.type,l),e.removeChild(n.element)}function c(e){clearTimeout(e.__internal.timer),clearTimeout(e.__internal.transitionTimeout)}return(u={element:r,push:function(t,i){if(!this.__internal.pushed){var r,o;switch(s(this),c(this),arguments.length){case 0:o=this.__internal.delay;break;case 1:"number"==typeof t?o=t:(r=t,o=this.__internal.delay);break;case 2:r=t,o=i}return this.__internal.closeButton=N.defaults.notifier.closeButton,void 0!==r&&this.setContent(r),O.__internal.position.indexOf("top")<0?e.appendChild(this.element):e.insertBefore(this.element,e.firstChild),this.element.offsetWidth,p(this.element,n.visible),C(this.element,"click",this.__internal.clickHandler),this.delay(o)}return this},ondismiss:function(){},callback:o,dismiss:function(i){var r;return this.__internal.pushed&&(c(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(S(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===e&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,T.supported?1e3:100),m(this.element,n.visible),"function"==typeof this.callback&&this.callback.call(this,i)),r=this,t.splice(t.indexOf(r),1),r.__internal.pushed=!1)),this},delay:function(e){if(c(this),this.__internal.delay=void 0===e||isNaN(+e)?O.__internal.delay:+e,this.__internal.delay>0){var t=this;this.__internal.timer=setTimeout((function(){t.dismiss()}),1e3*this.__internal.delay)}return this},setContent:function(e){if("string"==typeof e?(_(this.element),this.element.innerHTML=e):e instanceof i.HTMLElement&&this.element.firstChild!==e&&(_(this.element),this.element.appendChild(e)),this.__internal.closeButton){var t=document.createElement("span");p(t,n.close),t.setAttribute("data-close",!0),this.element.appendChild(t)}return this},dismissOthers:function(){return O.dismissAll(this),this}}).__internal||(u.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},u.__internal.clickHandler=E(u,a),u.__internal.transitionEndHandler=E(u,l)),u;var u}return{setting:function(e,t){if(o(this),void 0===t)return this.__internal[e];switch(e){case"position":this.__internal.position=t,a(this);break;case"delay":this.__internal.delay=t}return this},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},create:function(e,t){o(this);var i=document.createElement("div");return i.className=n.message+("string"==typeof e&&""!==e?" "+n.prefix+e:""),l(i,t)},dismissAll:function(e){for(var n=t.slice(0),i=0;i<n.length;i+=1){var r=n[i];void 0!==e&&e===r||r.dismiss()}}}}();var N=new function(){var e={};function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(t){var n=e[t].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}return{defaults:h,dialog:function(i,r,o,s){if("function"!=typeof r)return n(i);if(this.hasOwnProperty(i))throw new Error("alertify.dialog: name already exists");var a=function(n,i,r,o){var s={dialog:null,factory:i};return void 0!==o&&(s.factory=function(){return t(new e[o].factory,new i)}),r||(s.dialog=t(new s.factory,D)),e[n]=s}(i,r,o,s);this[i]=o?function(){if(0===arguments.length)return a.dialog;var e=t(new a.factory,D);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var e=a.dialog;return e.main.apply(a.dialog,arguments),e.show.apply(a.dialog)}},closeAll:function(e){for(var t=f.slice(0),n=0;n<t.length;n+=1){var i=t[n];void 0!==e&&e===i||i.close()}},setting:function(e,t,i){if("notifier"===e)return O.setting(t,i);var r=n(e);return r?r.setting(t,i):void 0},set:function(e,t,n){return this.setting(e,t,n)},get:function(e,t){return this.setting(e,t)},notify:function(e,t,n,i){return O.create(t,i).push(e,n)},message:function(e,t,n){return O.create(null,n).push(e,t)},success:function(e,t,n){return O.create("success",n).push(e,t)},error:function(e,t,n){return O.create("error",n).push(e,t)},warning:function(e,t,n){return O.create("warning",n).push(e,t)},dismissAll:function(){O.dismissAll()}}};N.dialog("alert",(function(){return{main:function(e,t,n){var i,r,o;switch(arguments.length){case 1:r=e;break;case 2:"function"==typeof t?(r=e,o=t):(i=e,r=t);break;case 3:i=e,r=t,o=n}return this.set("title",i),this.set("message",r),this.set("onok",o),this},setup:function(){return{buttons:[{text:N.defaults.glossary.ok,key:s,invokeOnClose:!0,className:N.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(e){if("function"==typeof this.get("onok")){var t=this.get("onok").call(this,e);void 0!==t&&(e.cancel=!t)}}}})),N.dialog("confirm",(function(){var e={timer:null,index:null,text:null,duration:null,task:function(n,i){if(i.isOpen()){if(i.__internal.buttons[e.index].element.innerHTML=e.text+" (&#8207;"+e.duration+"&#8207;) ",e.duration-=1,-1===e.duration){t(i);var r=i.__internal.buttons[e.index],o=A(e.index,r);"function"==typeof i.callback&&i.callback.apply(i,[o]),!1!==o.close&&i.close()}}else t(i)}};function t(t){null!==e.timer&&(clearInterval(e.timer),e.timer=null,t.__internal.buttons[e.index].element.innerHTML=e.text)}function n(n,i,r){t(n),e.duration=r,e.index=i,e.text=n.__internal.buttons[i].element.innerHTML,e.timer=setInterval(E(n,e.task),1e3),e.task(null,n)}return{main:function(e,t,n,i){var r,o,s,a;switch(arguments.length){case 1:o=e;break;case 2:o=e,s=t;break;case 3:o=e,s=t,a=n;break;case 4:r=e,o=t,s=n,a=i}return this.set("title",r),this.set("message",o),this.set("onok",s),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:N.defaults.glossary.ok,key:o,className:N.defaults.theme.ok},{text:N.defaults.glossary.cancel,key:s,invokeOnClose:!0,className:N.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){var n;switch(t(this),e.index){case 0:"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,e))&&(e.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,e))&&(e.cancel=!n)}},autoOk:function(e){return n(this,0,e),this},autoCancel:function(e){return n(this,1,e),this}}})),N.dialog("prompt",(function(){var e=document.createElement("INPUT"),t=document.createElement("P");return{main:function(e,t,n,i,r){var o,s,a,l,c;switch(arguments.length){case 1:s=e;break;case 2:s=e,a=t;break;case 3:s=e,a=t,l=n;break;case 4:s=e,a=t,l=n,c=i;break;case 5:o=e,s=t,a=n,l=i,c=r}return this.set("title",o),this.set("message",s),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:N.defaults.glossary.ok,key:o,className:N.defaults.theme.ok},{text:N.defaults.glossary.cancel,key:s,invokeOnClose:!0,className:N.defaults.theme.cancel}],focus:{element:e,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){e.className=N.defaults.theme.input,e.setAttribute("type","text"),e.value=this.get("value"),this.elements.content.appendChild(t),this.elements.content.appendChild(e)},prepare:function(){},setMessage:function(e){"string"==typeof e?(_(t),t.innerHTML=e):e instanceof i.HTMLElement&&t.firstChild!==e&&(_(t),t.appendChild(e))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(t,n,i){switch(t){case"message":this.setMessage(i);break;case"value":e.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":e.type=i;break;default:e.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(t){var n;switch(t.index){case 0:this.settings.value=e.value,"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,t,this.settings.value))&&(t.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,t))&&(t.cancel=!n),t.cancel||(e.value=this.settings.value)}}}})),"object"==typeof e.exports?e.exports=N:void 0===(n=function(){return N}.apply(t,[]))||(e.exports=n)}("undefined"!=typeof window?window:this)},454:function(e){"use strict";const t=(e,t,n)=>{const i=t<0?e.length+t:t;if(i>=0&&i<e.length){const i=n<0?e.length+n:n,[r]=e.splice(t,1);e.splice(i,0,r)}};e.exports=(e,n,i)=>(e=[...e],t(e,n,i),e),e.exports.mutate=t},4631:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=i||r||o,a=s&&(i?document.documentMode||6:+(o||r)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),m=h&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=m||/Mac/.test(t),_=/\bCrOS\b/.test(e),b=/win/i.test(t),x=d&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(d=!1,l=!0);var w=y&&(c||d&&(null==x||x<12.11)),k=n||s&&a>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,T=function(e,t){var n=e.className,i=C(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function E(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function A(e,t){return E(e).appendChild(t)}function $(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function D(e,t,n,i){var r=$(e,t,n,i);return r.setAttribute("role","presentation"),r}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function N(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function M(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function P(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!C(n[i]).test(t)&&(t+=" "+n[i]);return t}S=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var L=function(e){e.select()};function j(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function I(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function R(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=r||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}m?L=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(L=function(e){try{e.select()}catch(e){}});var F=function(){this.id=null,this.f=null,this.time=0,this.handler=j(this.onTimeout,this)};function z(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}F.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},F.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var H=50,B={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},U={origin:"*mouse"},q={origin:"+move"};function V(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||r+s>=t)return i+Math.min(s,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var G=[""];function K(e){for(;G.length<=e;)G.push(Y(G)+" ");return G[e]}function Y(e){return e[e.length-1]}function X(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function J(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}function Q(){}function Z(e,t){var n;return Object.create?n=Object.create(e):(Q.prototype=e,n=new Q),t&&I(t,n),n}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function ne(e,t){return t?!!(t.source.indexOf("\\w")>-1&&te(e))||t.test(e):te(e)}function ie(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&re.test(e)}function se(e,t,n){for(;(n<0?t>0:t<e.length)&&oe(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}function le(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}var ce=null;function ue(e,t,n){var i;ce=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:ce=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:ce=r)}return null!=i?i:ce}var de=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/;function l(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var c="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!i.test(e))return!1;for(var u=e.length,d=[],h=0;h<u;++h)d.push(n(e.charCodeAt(h)));for(var f=0,p=c;f<u;++f){var m=d[f];"m"==m?d[f]=p:p=m}for(var g=0,v=c;g<u;++g){var y=d[g];"1"==y&&"r"==v?d[g]="n":o.test(y)&&(v=y,"r"==y&&(d[g]="R"))}for(var _=1,b=d[0];_<u-1;++_){var x=d[_];"+"==x&&"1"==b&&"1"==d[_+1]?d[_]="1":","!=x||b!=d[_+1]||"1"!=b&&"n"!=b||(d[_]=b),b=x}for(var w=0;w<u;++w){var k=d[w];if(","==k)d[w]="N";else if("%"==k){var C=void 0;for(C=w+1;C<u&&"%"==d[C];++C);for(var S=w&&"!"==d[w-1]||C<u&&"1"==d[C]?"1":"N",T=w;T<C;++T)d[T]=S;w=C-1}}for(var E=0,A=c;E<u;++E){var $=d[E];"L"==A&&"1"==$?d[E]="L":o.test($)&&(A=$)}for(var D=0;D<u;++D)if(r.test(d[D])){var O=void 0;for(O=D+1;O<u&&r.test(d[O]);++O);for(var N="L"==(D?d[D-1]:c),M=N==("L"==(O<u?d[O]:c))?N?"L":"R":c,P=D;P<O;++P)d[P]=M;D=O-1}for(var L,j=[],I=0;I<u;)if(s.test(d[I])){var R=I;for(++I;I<u&&s.test(d[I]);++I);j.push(new l(0,R,I))}else{var F=I,z=j.length,H="rtl"==t?1:0;for(++I;I<u&&"L"!=d[I];++I);for(var B=F;B<I;)if(a.test(d[B])){F<B&&(j.splice(z,0,new l(1,F,B)),z+=H);var W=B;for(++B;B<I&&a.test(d[B]);++B);j.splice(z,0,new l(2,W,B)),z+=H,F=B}else++B;F<I&&j.splice(z,0,new l(1,F,I))}return"ltr"==t&&(1==j[0].level&&(L=e.match(/^\s+/))&&(j[0].from=L[0].length,j.unshift(new l(0,0,L[0].length))),1==Y(j).level&&(L=e.match(/\s+$/))&&(Y(j).to-=L[0].length,j.push(new l(0,u-L[0].length,u)))),"rtl"==t?j.reverse():j}}();function he(e,t){var n=e.order;return null==n&&(n=e.order=de(e.text,t)),n}var fe=[],pe=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||fe).concat(n)}};function me(e,t){return e._handlers&&e._handlers[t]||fe}function ge(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=z(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function ve(e,t){var n=me(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function ye(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ve(e,n||t.type,e,t),Ce(t)||t.codemirrorIgnore}function _e(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==z(n,t[i])&&n.push(t[i])}function be(e,t){return me(e,t).length>0}function xe(e){e.prototype.on=function(e,t){pe(this,e,t)},e.prototype.off=function(e,t){ge(this,e,t)}}function we(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ke(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ce(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Se(e){we(e),ke(e)}function Te(e){return e.target||e.srcElement}function Ee(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var Ae,$e,De=function(){if(s&&a<9)return!1;var e=$("div");return"draggable"in e||"dragDrop"in e}();function Oe(e){if(null==Ae){var t=$("span","​");A(e,$("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ae=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Ae?$("span","​"):$("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ne(e){if(null!=$e)return $e;var t=A(e,document.createTextNode("AخA")),n=S(t,0,1).getBoundingClientRect(),i=S(t,1,2).getBoundingClientRect();return E(e),!(!n||n.left==n.right)&&($e=i.right-n.right<3)}var Me,Pe=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Le=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},je="oncopy"in(Me=$("div"))||(Me.setAttribute("oncopy","return;"),"function"==typeof Me.oncopy),Ie=null;function Re(e){if(null!=Ie)return Ie;var t=A(e,$("span","x")),n=t.getBoundingClientRect(),i=S(t,0,1).getBoundingClientRect();return Ie=Math.abs(n.left-i.left)>1}var Fe={},ze={};function He(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Fe[e]=t}function Be(e,t){ze[e]=t}function We(e){if("string"==typeof e&&ze.hasOwnProperty(e))e=ze[e];else if(e&&"string"==typeof e.name&&ze.hasOwnProperty(e.name)){var t=ze[e.name];"string"==typeof t&&(t={name:t}),(e=Z(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return We("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return We("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ue(e,t){t=We(t);var n=Fe[t.name];if(!n)return Ue(e,"text/plain");var i=n(e,t);if(qe.hasOwnProperty(t.name)){var r=qe[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var qe={};function Ve(e,t){I(t,qe.hasOwnProperty(e)?qe[e]:qe[e]={})}function Ge(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ke(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ye(e,t,n){return!e.startState||e.startState(t,n)}var Xe=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Je(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function Qe(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function Ze(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function et(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function tt(e){if(null==e.parent)return null;for(var t=e.parent,n=z(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function nt(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function it(e,t){return t>=e.first&&t<e.first+e.size}function rt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ot(e,t,n){if(void 0===n&&(n=null),!(this instanceof ot))return new ot(e,t,n);this.line=e,this.ch=t,this.sticky=n}function st(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==st(e,t)}function lt(e){return ot(e.line,e.ch)}function ct(e,t){return st(e,t)<0?t:e}function ut(e,t){return st(e,t)<0?e:t}function dt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ht(e,t){if(t.line<e.first)return ot(e.first,0);var n=e.first+e.size-1;return t.line>n?ot(n,Je(e,n).text.length):ft(t,Je(e,t.line).text.length)}function ft(e,t){var n=e.ch;return null==n||n>t?ot(e.line,t):n<0?ot(e.line,0):e}function pt(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ht(e,t[i]);return n}Xe.prototype.eol=function(){return this.pos>=this.string.length},Xe.prototype.sol=function(){return this.pos==this.lineStart},Xe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xe.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Xe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Xe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Xe.prototype.skipToEnd=function(){this.pos=this.string.length},Xe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Xe.prototype.backUp=function(e){this.pos-=e},Xe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Xe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Xe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Xe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var mt=function(e,t){this.state=e,this.lookAhead=t},gt=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function vt(e,t,n,i){var r=[e.state.modeGen],o={};Tt(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var s=n.state,a=function(i){n.baseTokens=r;var a=e.state.overlays[i],l=1,c=0;n.state=!0,Tt(e,t.text,a.mode,n,(function(e,t){for(var n=l;c<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(a.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function yt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=_t(e,tt(t)),r=t.text.length>e.options.maxHighlightLength&&Ge(e.doc.mode,i.state),o=vt(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function _t(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new gt(i,!0,t);var o=Et(e,t,n),s=o>i.first&&Je(i,o-1).stateAfter,a=s?gt.fromSaved(i,s,o):new gt(i,Ye(i.mode),o);return i.iter(o,t,(function(n){bt(e,n.text,a);var i=a.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()})),n&&(i.modeFrontier=a.line),a}function bt(e,t,n,i){var r=e.doc.mode,o=new Xe(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&xt(r,n.state);!o.eol();)wt(r,o,n.state),o.start=o.pos}function xt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ke(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function wt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Ke(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}gt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},gt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},gt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},gt.fromSaved=function(e,t,n){return t instanceof mt?new gt(e,Ge(e.mode,t.state),n,t.lookAhead):new gt(e,Ge(e.mode,t),n)},gt.prototype.save=function(e){var t=!1!==e?Ge(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new mt(t,this.maxLookAhead):t};var kt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ct(e,t,n,i){var r,o,s=e.doc,a=s.mode,l=Je(s,(t=ht(s,t)).line),c=_t(e,t.line,n),u=new Xe(l.text,e.options.tabSize,c);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=wt(a,u,c.state),i&&o.push(new kt(u,r,Ge(s.mode,c.state)));return i?o:new kt(u,r,c.state)}function St(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Tt(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new Xe(t,e.options.tabSize,i),h=e.options.addModeClass&&[null];for(""==t&&St(xt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&bt(e,t,i,d.pos),d.pos=t.length,l=null):l=St(wt(n,d,i.state,h),o),h){var f=h[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<d.start;)r(c=Math.min(d.start,c+5e3),u);u=l}d.start=d.pos}for(;c<d.pos;){var p=Math.min(d.pos,c+5e3);r(p,u),c=p}}function Et(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=Je(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof mt?c.lookAhead:0)<=o.modeFrontier))return a;var u=R(l.text,null,e.options.tabSize);(null==r||i>u)&&(r=a-1,i=u)}return r}function At(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Je(e,i).stateAfter;if(r&&(!(r instanceof mt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var $t=!1,Dt=!1;function Ot(){$t=!0}function Nt(){Dt=!0}function Mt(e,t,n){this.marker=e,this.from=t,this.to=n}function Pt(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Lt(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function jt(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function It(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new Mt(s,o.from,a?null:o.to))}}return i}function Rt(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new Mt(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return i}function Ft(e,t){if(t.full)return null;var n=it(e,t.from.line)&&Je(e,t.from.line).markedSpans,i=it(e,t.to.line)&&Je(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=0==st(t.from,t.to),a=It(n,r,s),l=Rt(i,o,s),c=1==t.text.length,u=Y(t.text).length+(c?r:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=Pt(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=r}}if(l)for(var p=0;p<l.length;++p){var m=l[p];null!=m.to&&(m.to+=u),null==m.from?Pt(a,m.marker)||(m.from=u,c&&(a||(a=[])).push(m)):(m.from+=u,c&&(a||(a=[])).push(m))}a&&(a=zt(a)),l&&l!=a&&(l=zt(l));var g=[a];if(!c){var v,y=t.text.length-2;if(y>0&&a)for(var _=0;_<a.length;++_)null==a[_].to&&(v||(v=[])).push(new Mt(a[_].marker,null,null));for(var b=0;b<y;++b)g.push(v);g.push(l)}return g}function zt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ht(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=z(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var c=r[l];if(!(st(c.to,a.from)<0||st(c.from,a.to)>0)){var u=[l,1],d=st(c.from,a.from),h=st(c.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-3}}return r}function Bt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Wt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ut(e){return e.inclusiveLeft?-1:0}function qt(e){return e.inclusiveRight?1:0}function Vt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=st(i.from,r.from)||Ut(e)-Ut(t);if(o)return-o;var s=st(i.to,r.to)||qt(e)-qt(t);return s||t.id-e.id}function Gt(e,t){var n,i=Dt&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Vt(n,r.marker)<0)&&(n=r.marker);return n}function Kt(e){return Gt(e,!0)}function Yt(e){return Gt(e,!1)}function Xt(e,t){var n,i=Dt&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Vt(n,o.marker)<0)&&(n=o.marker)}return n}function Jt(e,t,n,i,r){var o=Je(e,t),s=Dt&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=st(c.from,n)||Ut(l.marker)-Ut(r),d=st(c.to,i)||qt(l.marker)-qt(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?st(c.to,n)>=0:st(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?st(c.from,i)<=0:st(c.from,i)<0)))return!0}}}function Qt(e){for(var t;t=Kt(e);)e=t.find(-1,!0).line;return e}function Zt(e){for(var t;t=Yt(e);)e=t.find(1,!0).line;return e}function en(e){for(var t,n;t=Yt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function tn(e,t){var n=Je(e,t),i=Qt(n);return n==i?t:tt(i)}function nn(e,t){if(t>e.lastLine())return t;var n,i=Je(e,t);if(!rn(e,i))return t;for(;n=Yt(i);)i=n.find(1,!0).line;return tt(i)+1}function rn(e,t){var n=Dt&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&on(e,t,i))return!0}}function on(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return on(e,i.line,Pt(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&on(e,t,r))return!0}function sn(e){for(var t=0,n=(e=Qt(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function an(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Kt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Yt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function ln(e){var t=e.display,n=e.doc;t.maxLine=Je(n,n.first),t.maxLineLength=an(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=an(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var cn=function(e,t,n){this.text=e,Wt(this,t),this.height=n?n(this):1};function un(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Bt(e),Wt(e,n);var r=i?i(e):1;r!=e.height&&et(e,r)}function dn(e){e.parent=null,Bt(e)}cn.prototype.lineNo=function(){return tt(this)},xe(cn);var hn={},fn={};function pn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?fn:hn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function mn(e,t){var n=D("span",null,null,l?"padding-right: .1px":null),i={pre:D("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,s=void 0;i.pos=0,i.addToken=vn,Ne(e.display.measure)&&(s=he(o,e.doc.direction))&&(i.addToken=_n(i.addToken,s)),i.map=[],xn(o,i,yt(e,o,t!=e.display.externalMeasured&&tt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=P(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=P(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Oe(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return ve(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=P(i.pre.className,i.textClass||"")),i}function gn(e){var t=$("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function vn(e,t,n,i,r,o,l){if(t){var c,u=e.splitSpaces?yn(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){c=document.createDocumentFragment();for(var f=0;;){d.lastIndex=f;var p=d.exec(t),m=p?p.index-f:t.length-f;if(m){var g=document.createTextNode(u.slice(f,f+m));s&&a<9?c.appendChild($("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!p)break;f+=m+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,_=y-e.col%y;(v=c.appendChild($("span",K(_),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=_}else"\r"==p[0]||"\n"==p[0]?((v=c.appendChild($("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&a<9?c.appendChild($("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||r||h||o||l){var b=n||"";i&&(b+=i),r&&(b+=r);var x=$("span",[c],b,o);if(l)for(var w in l)l.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&x.setAttribute(w,l[w]);return e.content.appendChild(x)}e.content.appendChild(c)}}function yn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=" "),i+=o,n=" "==o}return i}function _n(e,t){return function(n,i,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>c&&d.from<=c);h++);if(d.to>=u)return e(n,i,r,o,s,a,l);e(n,i.slice(0,d.to-c),r,o,null,a,l),o=null,i=i.slice(d.to-c),c=d.to}}}function bn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function xn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,l,c,u,d,h,f=r.length,p=0,m=1,g="",v=0;;){if(v==p){l=c=u=a="",h=null,d=null,v=1/0;for(var y=[],_=void 0,b=0;b<i.length;++b){var x=i[b],w=x.marker;if("bookmark"==w.type&&x.from==p&&w.widgetNode)y.push(w);else if(x.from<=p&&(null==x.to||x.to>p||w.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),w.className&&(l+=" "+w.className),w.css&&(a=(a?a+";":"")+w.css),w.startStyle&&x.from==p&&(u+=" "+w.startStyle),w.endStyle&&x.to==v&&(_||(_=[])).push(w.endStyle,x.to),w.title&&((h||(h={})).title=w.title),w.attributes)for(var k in w.attributes)(h||(h={}))[k]=w.attributes[k];w.collapsed&&(!d||Vt(d.marker,w)<0)&&(d=x)}else x.from>p&&v>x.from&&(v=x.from)}if(_)for(var C=0;C<_.length;C+=2)_[C+1]==v&&(c+=" "+_[C]);if(!d||d.from==p)for(var S=0;S<y.length;++S)bn(t,0,y[S]);if(d&&(d.from||0)==p){if(bn(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var T=Math.min(f,v);;){if(g){var E=p+g.length;if(!d){var A=E>T?g.slice(0,T-p):g;t.addToken(t,A,s?s+l:l,u,p+A.length==v?c:"",a,h)}if(E>=T){g=g.slice(T-p),p=T;break}p=E,u=""}g=r.slice(o,o=n[m++]),s=pn(n[m++],t.cm.options)}}else for(var $=1;$<n.length;$+=2)t.addToken(t,r.slice(o,o=n[$]),pn(n[$+1],t.cm.options))}function wn(e,t,n){this.line=t,this.rest=en(t),this.size=this.rest?tt(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=rn(e,t)}function kn(e,t,n){for(var i,r=[],o=t;o<n;o=i){var s=new wn(e.doc,Je(e.doc,o),o);i=o+s.size,r.push(s)}return r}var Cn=null;function Sn(e){Cn?Cn.ops.push(e):e.ownsGroup=Cn={ops:[e],delayedCallbacks:[]}}function Tn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}function En(e,t){var n=e.ownsGroup;if(n)try{Tn(n)}finally{Cn=null,t(n)}}var An=null;function $n(e,t){var n=me(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Cn?i=Cn.delayedCallbacks:An?i=An:(i=An=[],setTimeout(Dn,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function Dn(){var e=An;An=null;for(var t=0;t<e.length;++t)e[t]()}function On(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?Ln(e,t):"gutter"==o?In(e,t,n,i):"class"==o?jn(e,t):"widget"==o&&Rn(e,t,i)}t.changes=null}function Nn(e){return e.node==e.text&&(e.node=$("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function Mn(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Nn(t);t.background=i.insertBefore($("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}function Pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):mn(e,t)}function Ln(e,t){var n=t.text.className,i=Pn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,jn(e,t)):n&&(t.text.className=n)}function jn(e,t){Mn(e,t),t.line.wrapClass?Nn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function In(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=Nn(t);t.gutterBackground=$("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=Nn(t),a=t.gutter=$("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild($("div",rt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild($("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function Rn(e,t,n){t.alignable&&(t.alignable=null);for(var i=C("CodeMirror-linewidget"),r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);zn(e,t,n)}function Fn(e,t,n,i){var r=Pn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),jn(e,t),In(e,t,n,i),zn(e,t,i),t.node}function zn(e,t,n){if(Hn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)Hn(e,t.rest[i],t,n,!1)}function Hn(e,t,n,i,r){if(t.widgets)for(var o=Nn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=$("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Bn(l,c,n,i),e.display.input.setUneditable(c),r&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),$n(l,"redraw")}}function Bn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function Wn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),A(t.display.measure,$("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Un(e,t){for(var n=Te(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function qn(e){return e.lineSpace.offsetTop}function Vn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Gn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=A(e.measure,$("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Kn(e){return H-e.display.nativeBarWidth}function Yn(e){return e.display.scroller.clientWidth-Kn(e)-e.display.barWidth}function Xn(e){return e.display.scroller.clientHeight-Kn(e)-e.display.barHeight}function Jn(e,t,n){var i=e.options.lineWrapping,r=i&&Yn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Qn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(tt(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Zn(e,t){var n=tt(t=Qt(t)),i=e.display.externalMeasured=new wn(e.doc,t,n);i.lineN=n;var r=i.built=mn(e,i);return i.text=r.pre,A(e.display.lineMeasure,r.pre),i}function ei(e,t,n,i){return ii(e,ni(e,t),n,i)}function ti(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ji(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function ni(e,t){var n=tt(t),i=ti(e,n);i&&!i.text?i=null:i&&i.changes&&(On(e,i,n,Oi(e)),e.curOp.forceUpdate=!0),i||(i=Zn(e,t));var r=Qn(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function ii(e,t,n,i,r){t.before&&(n=-1);var o,s=n+(i||"");return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Jn(e,t.view,t.rect),t.hasHeights=!0),(o=li(e,t,n,i)).bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var ri,oi={left:0,right:0,top:0,bottom:0};function si(e,t,n){for(var i,r,o,s,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(r=0,o=1,s="left"):t<l?o=1+(r=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(r=(o=l-a)-1,t>=l&&(s="right")),null!=r){if(i=e[c+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],s="left";if("right"==n&&r==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:l}}function ai(e,t){var n=oi;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function li(e,t,n,i){var r,o=si(t.map,n,i),l=o.node,c=o.start,u=o.end,d=o.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;c&&oe(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&oe(t.line.text.charAt(o.coverStart+u));)++u;if((r=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():ai(S(l,c,u).getClientRects(),i)).left||r.right||0==c)break;u=c,c-=1,d="right"}s&&a<11&&(r=ci(e.display.measure,r))}else{var f;c>0&&(d=i="right"),r=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==i?f.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!r||!r.left&&!r.right)){var p=l.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+Di(e.display),top:p.top,bottom:p.bottom}:oi}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,_=0;_<y.length-1&&!(v<y[_]);_++);var b=_?y[_-1]:0,x=y[_],w={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:b,bottom:x};return r.left||r.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}function ci(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Re(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function ui(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function di(e){e.display.externalMeasure=null,E(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ui(e.display.view[t])}function hi(e){di(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function fi(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pi(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function mi(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Wn(e.widgets[n]));return t}function gi(e,t,n,i,r){if(!r){var o=mi(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=sn(t);if("local"==i?s+=qn(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:pi());var l=a.left+("window"==i?0:fi());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function vi(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=fi(),r-=pi();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function yi(e,t,n,i,r){return i||(i=Je(e.doc,t.line)),gi(e,i,ei(e,i,t.ch,r),n)}function _i(e,t,n,i,r,o){function s(t,s){var a=ii(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,gi(e,i,a,n)}i=i||Je(e.doc,t.line),r||(r=ni(e,i));var a=he(i,e.doc.direction),l=t.ch,c=t.sticky;if(l>=i.text.length?(l=i.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var d=ue(a,l,c),h=ce,f=u(l,d,"before"==c);return null!=h&&(f.other=u(l,h,"before"!=c)),f}function bi(e,t){var n=0;t=ht(e.doc,t),e.options.lineWrapping||(n=Di(e.display)*t.ch);var i=Je(e.doc,t.line),r=sn(i)+qn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function xi(e,t,n,i,r){var o=ot(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function wi(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return xi(i.first,0,null,-1,-1);var r=nt(i,n),o=i.first+i.size-1;if(r>o)return xi(i.first+i.size-1,Je(i,o).text.length,null,1,1);t<0&&(t=0);for(var s=Je(i,r);;){var a=Ti(e,s,r,t,n),l=Xt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==r)return c;s=Je(i,r=c.line)}}function ki(e,t,n,i){i-=mi(t);var r=t.text.length,o=ae((function(t){return ii(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=ae((function(t){return ii(e,n,t).top>i}),o,r)}}function Ci(e,t,n,i){return n||(n=ni(e,t)),ki(e,t,n,gi(e,t,ii(e,n,i),"line").top)}function Si(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function Ti(e,t,n,i,r){r-=sn(t);var o=ni(e,t),s=mi(t),a=0,l=t.text.length,c=!0,u=he(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?Ai:Ei)(e,t,n,o,u,i,r);a=(c=1!=d.level)?d.from:d.to-1,l=c?d.to:d.from-1}var h,f,p=null,m=null,g=ae((function(t){var n=ii(e,o,t);return n.top+=s,n.bottom+=s,!!Si(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,m=n),!0)}),a,l),v=!1;if(m){var y=i-m.left<m.right-i,_=y==c;g=p+(_?0:1),f=_?"after":"before",h=y?m.left:m.right}else{c||g!=l&&g!=a||g++,f=0==g?"after":g==t.text.length?"before":ii(e,o,g-(c?1:0)).bottom+s<=r==c?"after":"before";var b=_i(e,ot(n,g,f),"line",t,o);h=b.left,v=r<b.top?-1:r>=b.bottom?1:0}return xi(n,g=se(t.text,g,1),f,v,i-h)}function Ei(e,t,n,i,r,o,s){var a=ae((function(a){var l=r[a],c=1!=l.level;return Si(_i(e,ot(n,c?l.to:l.from,c?"before":"after"),"line",t,i),o,s,!0)}),0,r.length-1),l=r[a];if(a>0){var c=1!=l.level,u=_i(e,ot(n,c?l.from:l.to,c?"after":"before"),"line",t,i);Si(u,o,s,!0)&&u.top>s&&(l=r[a-1])}return l}function Ai(e,t,n,i,r,o,s){var a=ki(e,t,i,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,d=null,h=0;h<r.length;h++){var f=r[h];if(!(f.from>=c||f.to<=l)){var p=ii(e,i,1!=f.level?Math.min(c,f.to)-1:Math.max(l,f.from)).right,m=p<o?o-p+1e9:p-o;(!u||d>m)&&(u=f,d=m)}}return u||(u=r[r.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function $i(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ri){ri=$("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)ri.appendChild(document.createTextNode("x")),ri.appendChild($("br"));ri.appendChild(document.createTextNode("x"))}A(e.measure,ri);var n=ri.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),E(e.measure),n||1}function Di(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=$("span","xxxxxxxxxx"),n=$("pre",[t],"CodeMirror-line-like");A(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function Oi(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:Ni(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Ni(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Mi(e){var t=$i(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Di(e.display)-3);return function(r){if(rn(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function Pi(e){var t=e.doc,n=Mi(e);t.iter((function(e){var t=n(e);t!=e.height&&et(e,t)}))}function Li(e,t,n,i){var r=e.display;if(!n&&"true"==Te(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(e){return null}var l,c=wi(e,o,s);if(i&&c.xRel>0&&(l=Je(e.doc,c.line).text).length==c.ch){var u=R(l,l.length,e.options.tabSize)-l.length;c=ot(c.line,Math.max(0,Math.round((o-Gn(e.display).left)/Di(e.display))-u))}return c}function ji(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function Ii(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Dt&&tn(e.doc,t)<r.viewTo&&Fi(e);else if(n<=r.viewFrom)Dt&&nn(e.doc,n+i)>r.viewFrom?Fi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Fi(e);else if(t<=r.viewFrom){var o=zi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):Fi(e)}else if(n>=r.viewTo){var s=zi(e,t,t,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):Fi(e)}else{var a=zi(e,t,t,-1),l=zi(e,n,n+i,1);a&&l?(r.view=r.view.slice(0,a.index).concat(kn(e,a.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):Fi(e)}var c=r.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(r.externalMeasured=null))}function Ri(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[ji(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==z(s,n)&&s.push(n)}}}function Fi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function zi(e,t,n,i){var r,o=ji(e,t),s=e.display.view;if(!Dt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-t,o++}else r=a-t;t+=r,n+=r}for(;tn(e.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function Hi(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=kn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=kn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(ji(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(kn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ji(e,n)))),i.viewTo=n}function Bi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Wi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ui(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&qi(e,a.head,r),l||Gi(e,a,o)}}return i}function qi(e,t,n){var i=_i(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild($("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild($("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Vi(e,t){return e.top-t.top||e.left-t.left}function Gi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),s=Gn(e.display),a=s.left,l=Math.max(i.sizerWidth,Yn(e)-i.sizer.offsetLeft)-s.right,c="ltr"==r.direction;function u(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild($("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,s,d=Je(r,t),h=d.text.length;function f(n,i){return yi(e,ot(t,n),"div",d,i)}function p(t,n,i){var r=Ci(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right";return f("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var m=he(d,r.direction);return le(m,n||0,null==i?h:i,(function(e,t,r,d){var g="ltr"==r,v=f(e,g?"left":"right"),y=f(t-1,g?"right":"left"),_=null==n&&0==e,b=null==i&&t==h,x=0==d,w=!m||d==m.length-1;if(y.top-v.top<=3){var k=(c?b:_)&&w,C=(c?_:b)&&x?a:(g?v:y).left,S=k?l:(g?y:v).right;u(C,v.top,S-C,v.bottom)}else{var T,E,A,$;g?(T=c&&_&&x?a:v.left,E=c?l:p(e,r,"before"),A=c?a:p(t,r,"after"),$=c&&b&&w?l:y.right):(T=c?p(e,r,"before"):a,E=!c&&_&&x?l:v.right,A=!c&&b&&w?a:y.left,$=c?p(t,r,"after"):l),u(T,v.top,E-T,v.bottom),v.bottom<y.top&&u(a,v.bottom,null,y.top),u(A,y.top,$-A,y.bottom)}(!o||Vi(v,o)<0)&&(o=v),Vi(y,o)<0&&(o=y),(!s||Vi(v,s)<0)&&(s=v),Vi(y,s)<0&&(s=y)})),{start:o,end:s}}var h=t.from(),f=t.to();if(h.line==f.line)d(h.line,h.ch,f.ch);else{var p=Je(r,h.line),m=Je(r,f.line),g=Qt(p)==Qt(m),v=d(h.line,h.ch,g?p.text.length+1:null).end,y=d(f.line,g?0:null,f.ch).start;g&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(a,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(a,v.bottom,null,y.top)}n.appendChild(o)}function Ki(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Qi(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Yi(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ji(e))}function Xi(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Qi(e))}),100)}function Ji(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ve(e,"focus",e,t),e.state.focused=!0,M(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Ki(e))}function Qi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ve(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Zi(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,l=void 0,c=0;if(!r.hidden){if(s&&a<8){var u=r.node.offsetTop+r.node.offsetHeight;l=u-n,n=u}else{var d=r.node.getBoundingClientRect();l=d.bottom-d.top,!o&&r.text.firstChild&&(c=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var h=r.line.height-l;if((h>.005||h<-.005)&&(et(r.line,l),er(r.line),r.rest))for(var f=0;f<r.rest.length;f++)er(r.rest[f]);if(c>e.display.sizerWidth){var p=Math.ceil(c/Di(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function er(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function tr(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-qn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=nt(t,i),s=nt(t,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=nt(t,sn(Je(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=nt(t,sn(Je(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function nr(e,t){if(!ye(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!p){var o=$("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-qn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Kn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}function ir(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?ot(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ot(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=_i(e,t),l=n&&n!=t?_i(e,n):a,c=or(e,r={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(hr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(pr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return r}function rr(e,t){var n=or(e,t);null!=n.scrollTop&&hr(e,n.scrollTop),null!=n.scrollLeft&&pr(e,n.scrollLeft)}function or(e,t){var n=e.display,i=$i(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Xn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Vn(n),l=t.top<i,c=t.bottom>a-i;if(t.top<r)s.scrollTop=l?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(c?a:t.bottom)-o);u!=r&&(s.scrollTop=u)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,f=Yn(e)-n.gutters.offsetWidth,p=t.right-t.left>f;return p&&(t.right=t.left+f),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left+d-(p?0:10)):t.right>f+h-3&&(s.scrollLeft=t.right+(p?0:10)-f),s}function sr(e,t){null!=t&&(ur(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function ar(e){ur(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function lr(e,t,n){null==t&&null==n||ur(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function cr(e,t){ur(e),e.curOp.scrollToPos=t}function ur(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,dr(e,bi(e,t.from),bi(e,t.to),t.margin))}function dr(e,t,n,i){var r=or(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});lr(e,r.scrollLeft,r.scrollTop)}function hr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||Wr(e,{top:t}),fr(e,t,!0),n&&Wr(e),Lr(e,100))}function fr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function pr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,Gr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function mr(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Vn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Kn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var gr=function(e,t,n){this.cm=n;var i=this.vert=$("div",[$("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=$("div",[$("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),pe(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),pe(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};gr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},gr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},gr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},gr.prototype.zeroWidthHack=function(){var e=y&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F},gr.prototype.enableZeroWidthBar=function(e,t,n){function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}e.style.pointerEvents="auto",t.set(1e3,i)},gr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var vr=function(){};function yr(e,t){t||(t=mr(e));var n=e.display.barWidth,i=e.display.barHeight;_r(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Zi(e),_r(e,mr(e)),n=e.display.barWidth,i=e.display.barHeight}function _r(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}vr.prototype.update=function(){return{bottom:0,right:0}},vr.prototype.setScrollLeft=function(){},vr.prototype.setScrollTop=function(){},vr.prototype.clear=function(){};var br={native:gr,null:vr};function xr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new br[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),pe(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?pr(e,t):hr(e,t)}),e),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)}var wr=0;function kr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++wr},Sn(e.curOp)}function Cr(e){var t=e.curOp;t&&En(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Sr(e)}))}function Sr(e){for(var t=e.ops,n=0;n<t.length;n++)Tr(t[n]);for(var i=0;i<t.length;i++)Er(t[i]);for(var r=0;r<t.length;r++)Ar(t[r]);for(var o=0;o<t.length;o++)$r(t[o]);for(var s=0;s<t.length;s++)Dr(t[s])}function Tr(e){var t=e.cm,n=t.display;Rr(t),e.updateMaxLine&&ln(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Ir(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Er(e){e.updatedDisplay=e.mustUpdate&&Hr(e.cm,e.update)}function Ar(e){var t=e.cm,n=t.display;e.updatedDisplay&&Zi(t),e.barMeasure=mr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ei(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Kn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Yn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function $r(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&pr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==N();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&yr(t,e.barMeasure),e.updatedDisplay&&Vr(t,e.barMeasure),e.selectionChanged&&Ki(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Yi(e.cm)}function Dr(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&Br(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&fr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&pr(t,e.scrollLeft,!0,!0),e.scrollToPos&&nr(t,ir(t,ht(i,e.scrollToPos.from),ht(i,e.scrollToPos.to),e.scrollToPos.margin));var r=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||ve(r[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&ve(o[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ve(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Or(e,t){if(e.curOp)return t();kr(e);try{return t()}finally{Cr(e)}}function Nr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);kr(e);try{return t.apply(e,arguments)}finally{Cr(e)}}}function Mr(e){return function(){if(this.curOp)return e.apply(this,arguments);kr(this);try{return e.apply(this,arguments)}finally{Cr(this)}}}function Pr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);kr(t);try{return e.apply(this,arguments)}finally{Cr(t)}}}function Lr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,j(jr,e))}function jr(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=_t(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?Ge(t.mode,i.state):null,l=vt(e,o,i,!0);a&&(i.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&bt(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Lr(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Or(e,(function(){for(var t=0;t<r.length;t++)Ri(e,r[t],"text")}))}}var Ir=function(e,t,n){var i=e.display;this.viewport=t,this.visible=tr(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Yn(e),this.force=n,this.dims=Oi(e),this.events=[]};function Rr(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Kn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Kn(e)+"px",t.scrollbarsClipped=!0)}function Fr(e){if(e.hasFocus())return null;var t=N();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&O(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function zr(e){if(e&&e.activeElt&&e.activeElt!=N()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}function Hr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Fi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Bi(e))return!1;Kr(e)&&(Fi(e),t.dims=Oi(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),Dt&&(o=tn(e.doc,o),s=nn(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Hi(e,o,s),n.viewOffset=sn(Je(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=Bi(e);if(!a&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Fr(e);return l>4&&(n.lineDiv.style.display="none"),Ur(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,zr(c),E(n.cursorDiv),E(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Lr(e,400)),n.updateLineNumbers=null,!0}function Br(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Yn(e))i&&(t.visible=tr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Vn(e.display)-Xn(e),n.top)}),t.visible=tr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Hr(e,t))break;Zi(e);var r=mr(e);Wi(e),yr(e,r),Vr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Wr(e,t){var n=new Ir(e,t);if(Hr(e,n)){Zi(e),Br(e,n);var i=mr(e);Wi(e),yr(e,i),Vr(e,i),n.finish()}}function Ur(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=i.view,u=i.viewFrom,d=0;d<c.length;d++){var h=c[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var f=r&&null!=t&&t<=u&&h.lineNumber;h.changes&&(z(h.changes,"gutter")>-1&&(f=!1),On(e,h,u,n)),f&&(E(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(rt(e.options,u)))),s=h.node.nextSibling}else{var p=Fn(e,h,u,n);o.insertBefore(p,s)}u+=h.size}for(;s;)s=a(s)}function qr(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function Vr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Kn(e)+"px"}function Gr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=Ni(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function Kr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=rt(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild($("div",[$("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",qr(e.display),!0}return!1}function Yr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Xr(e){var t=e.gutters,n=e.gutterSpecs;E(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,a=t.appendChild($("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",qr(e)}function Jr(e){Xr(e.display),Ii(e),Gr(e)}function Qr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=$("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=$("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=D("div",null,"CodeMirror-code"),o.selectionDiv=$("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=$("div",null,"CodeMirror-cursors"),o.measure=$("div",null,"CodeMirror-measure"),o.lineMeasure=$("div",null,"CodeMirror-measure"),o.lineSpace=D("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=D("div",[o.lineSpace],"CodeMirror-lines");o.mover=$("div",[c],null,"position: relative"),o.sizer=$("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=$("div",null,null,"position: absolute; height: "+H+"px; width: 1px;"),o.gutters=$("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=$("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=$("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Yr(r.gutters,r.lineNumbers),Xr(o),i.init(o)}Ir.prototype.signal=function(e,t){be(e,t)&&this.events.push(arguments)},Ir.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ve.apply(null,this.events[e])};var Zr=0,eo=null;function to(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function no(e){var t=to(e);return t.x*=eo,t.y*=eo,t}function io(e,t){var i=to(t),r=i.x,o=i.y,s=e.display,a=s.scroller,c=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(r&&c||o&&u){if(o&&y&&l)e:for(var h=t.target,f=s.view;h!=a;h=h.parentNode)for(var p=0;p<f.length;p++)if(f[p].node==h){e.display.currentWheelTarget=h;break e}if(r&&!n&&!d&&null!=eo)return o&&u&&hr(e,Math.max(0,a.scrollTop+o*eo)),pr(e,Math.max(0,a.scrollLeft+r*eo)),(!o||o&&u)&&we(t),void(s.wheelStartX=null);if(o&&null!=eo){var m=o*eo,g=e.doc.scrollTop,v=g+s.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),Wr(e,{top:g,bottom:v})}Zr<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(eo=(eo*Zr+n)/(Zr+1),++Zr)}}),200)):(s.wheelDX+=r,s.wheelDY+=o))}}s?eo=-.53:n?eo=15:u?eo=-.7:h&&(eo=-1/3);var ro=function(e,t){this.ranges=e,this.primIndex=t};ro.prototype.primary=function(){return this.ranges[this.primIndex]},ro.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!at(n.anchor,i.anchor)||!at(n.head,i.head))return!1}return!0},ro.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new oo(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new ro(e,this.primIndex)},ro.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ro.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(st(t,i.from())>=0&&st(e,i.to())<=0)return n}return-1};var oo=function(e,t){this.anchor=e,this.head=t};function so(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return st(e.from(),t.from())})),n=z(t,r);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=st(a.to(),s.from());if(i&&!s.empty()?l>0:l>=0){var c=ut(a.from(),s.from()),u=ct(a.to(),s.to()),d=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new oo(d?u:c,d?c:u))}}return new ro(t,n)}function ao(e,t){return new ro([new oo(e,t||e)],0)}function lo(e){return e.text?ot(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function co(e,t){if(st(e,t.from)<0)return e;if(st(e,t.to)<=0)return lo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=lo(t).ch-t.to.ch),ot(n,i)}function uo(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new oo(co(r.anchor,t),co(r.head,t)))}return so(e.cm,n,e.sel.primIndex)}function ho(e,t,n){return e.line==t.line?ot(n.line,e.ch-t.ch+n.ch):ot(n.line+(e.line-t.line),e.ch)}function fo(e,t,n){for(var i=[],r=ot(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],l=ho(a.from,r,o),c=ho(lo(a),r,o);if(r=a.to,o=c,"around"==n){var u=e.sel.ranges[s],d=st(u.head,u.anchor)<0;i[s]=new oo(d?c:l,d?l:c)}else i[s]=new oo(l,l)}return new ro(i,e.sel.primIndex)}function po(e){e.doc.mode=Ue(e.options,e.doc.modeOption),mo(e)}function mo(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Lr(e,100),e.state.modeGen++,e.curOp&&Ii(e)}function go(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function vo(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){un(e,n,r,i),$n(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new cn(c[o],r(o),i));return n}var a=t.from,l=t.to,c=t.text,u=Je(e,a.line),d=Je(e,l.line),h=Y(c),f=r(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(go(e,t)){var m=s(0,c.length-1);o(d,d.text,f),p&&e.remove(a.line,p),m.length&&e.insert(a.line,m)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{var g=s(1,c.length-1);g.push(new cn(h+u.text.slice(l.ch),f,i)),o(u,u.text.slice(0,a.ch)+c[0],r(0)),e.insert(a.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),r(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],r(0)),o(d,h+d.text.slice(l.ch),f);var v=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}$n(e,"change",e,t)}function yo(e,t,n){function i(e,r,o){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),i(a.doc,e,l))}}}i(e,null,!0)}function _o(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Pi(e),po(e),bo(e),e.options.lineWrapping||ln(e),e.options.mode=t.modeOption,Ii(e)}function bo(e){("rtl"==e.doc.direction?M:T)(e.display.lineDiv,"CodeMirror-rtl")}function xo(e){Or(e,(function(){bo(e),Ii(e)}))}function wo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ko(e,t){var n={from:lt(t.from),to:lo(t),text:Qe(e,t.from,t.to)};return Do(e,n,t.from.line,t.to.line+1),yo(e,(function(e){return Do(e,n,t.from.line,t.to.line+1)}),!0),n}function Co(e){for(;e.length&&Y(e).ranges;)e.pop()}function So(e,t){return t?(Co(e.done),Y(e.done)):e.done.length&&!Y(e.done).ranges?Y(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Y(e.done)):void 0}function To(e,t,n,i){var r=e.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=So(r,r.lastOp==i)))s=Y(o.changes),0==st(t.from,t.to)&&0==st(t.from,s.to)?s.to=lo(t):o.changes.push(ko(e,t));else{var l=Y(r.done);for(l&&l.ranges||$o(e.sel,r.done),o={changes:[ko(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,s||ve(e,"historyAdded")}function Eo(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ao(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||Eo(e,o,Y(r.done),t))?r.done[r.done.length-1]=t:$o(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Co(r.undone)}function $o(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Do(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Oo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function No(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Oo(n[r]));return i}function Mo(e,t){var n=No(e,t),i=Ft(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[r]=s)}return n}function Po(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?ro.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&z(t,Number(u[1]))>-1&&(Y(a)[d]=c[d],delete c[d])}}}return i}function Lo(e,t,n,i){if(i){var r=e.anchor;if(n){var o=st(t,r)<0;o!=st(n,r)<0?(r=t,t=n):o!=st(t,n)<0&&(t=n)}return new oo(r,t)}return new oo(n||t,t)}function jo(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Bo(e,new ro([Lo(e.sel.primary(),t,n,r)],0),i)}function Io(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Lo(e.sel.ranges[o],t[o],null,r);Bo(e,so(e.cm,i,e.sel.primIndex),n)}function Ro(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Bo(e,so(e.cm,r,e.sel.primIndex),i)}function Fo(e,t,n,i){Bo(e,ao(t,n),i)}function zo(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new oo(ht(e,t[n].anchor),ht(e,t[n].head))},origin:n&&n.origin};return ve(e,"beforeSelectionChange",e,i),e.cm&&ve(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?so(e.cm,i.ranges,i.ranges.length-1):t}function Ho(e,t,n){var i=e.history.done,r=Y(i);r&&r.ranges?(i[i.length-1]=t,Wo(e,t,n)):Bo(e,t,n)}function Bo(e,t,n){Wo(e,t,n),Ao(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Wo(e,t,n){(be(e,"beforeSelectionChange")||e.cm&&be(e.cm,"beforeSelectionChange"))&&(t=zo(e,t,n));var i=n&&n.bias||(st(t.primary().head,e.sel.primary().head)<0?-1:1);Uo(e,Vo(e,t,i,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||ar(e.cm)}function Uo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,_e(e.cm)),$n(e,"cursorActivity",e))}function qo(e){Uo(e,Vo(e,e.sel,null,!1))}function Vo(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Ko(e,s.anchor,a&&a.anchor,n,i),c=Ko(e,s.head,a&&a.head,n,i);(r||l!=s.anchor||c!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new oo(l,c))}return r?so(e.cm,r,t.primIndex):t}function Go(e,t,n,i,r){var o=Je(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(r&&(ve(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var d=l.find(i<0?1:-1),h=void 0;if((i<0?u:c)&&(d=Yo(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=st(d,n))&&(i<0?h<0:h>0))return Go(e,d,t,i,r)}var f=l.find(i<0?-1:1);return(i<0?c:u)&&(f=Yo(e,f,i,f.line==t.line?o:null)),f?Go(e,f,t,i,r):null}}return t}function Ko(e,t,n,i,r){var o=i||1,s=Go(e,t,n,o,r)||!r&&Go(e,t,n,o,!0)||Go(e,t,n,-o,r)||!r&&Go(e,t,n,-o,!0);return s||(e.cantEdit=!0,ot(e.first,0))}function Yo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?ht(e,ot(t.line-1)):null:n>0&&t.ch==(i||Je(e,t.line)).text.length?t.line<e.first+e.size-1?ot(t.line+1,0):null:new ot(t.line,t.ch+n)}function Xo(e){e.setSelection(ot(e.firstLine(),0),ot(e.lastLine()),W)}function Jo(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=ht(e,t)),n&&(i.to=ht(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),ve(e,"beforeChange",e,i),e.cm&&ve(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Qo(e,t,n){if(e.cm){if(!e.cm.curOp)return Nr(e.cm,Qo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(be(e,"beforeChange")||e.cm&&be(e.cm,"beforeChange"))||(t=Jo(e,t,!0))){var i=$t&&!n&&Ht(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Zo(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else Zo(e,t)}}function Zo(e,t){if(1!=t.text.length||""!=t.text[0]||0!=st(t.from,t.to)){var n=uo(e,t);To(e,t,n,e.cm?e.cm.curOp.id:NaN),ns(e,t,n,Ft(e,t));var i=[];yo(e,(function(e,n){n||-1!=z(i,e.history)||(as(e.history,t),i.push(e.history)),ns(e,t,null,Ft(e,t))}))}}function es(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(r=a[c],n?!r.ranges||r.equals(e.sel):r.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(i)return void a.push(r);break}if($o(r,l),n&&!r.equals(e.sel))return void Bo(e,r,{clearRedo:!1});s=r}var u=[];$o(s,l),l.push({changes:u,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=be(e,"beforeChange")||e.cm&&be(e.cm,"beforeChange"),h=function(n){var i=r.changes[n];if(i.origin=t,d&&!Jo(e,i,!1))return a.length=0,{};u.push(ko(e,i));var o=n?uo(e,i):Y(a);ns(e,i,o,Mo(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:lo(i)});var s=[];yo(e,(function(e,t){t||-1!=z(s,e.history)||(as(e.history,i),s.push(e.history)),ns(e,i,null,Mo(e,i))}))},f=r.changes.length-1;f>=0;--f){var p=h(f);if(p)return p.v}}}}function ts(e,t){if(0!=t&&(e.first+=t,e.sel=new ro(X(e.sel.ranges,(function(e){return new oo(ot(e.anchor.line+t,e.anchor.ch),ot(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Ii(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Ri(e.cm,i,"gutter")}}function ns(e,t,n,i){if(e.cm&&!e.cm.curOp)return Nr(e.cm,ns)(e,t,n,i);if(t.to.line<e.first)ts(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);ts(e,r),t={from:ot(e.first,0),to:ot(t.to.line+r,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ot(o,Je(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Qe(e,t.from,t.to),n||(n=uo(e,t)),e.cm?is(e.cm,t,i):vo(e,t,i),Wo(e,n,W),e.cantEdit&&Ko(e,ot(e.firstLine(),0))&&(e.cantEdit=!1)}}function is(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=tt(Qt(Je(i,o.line))),i.iter(l,s.line+1,(function(e){if(e==r.maxLine)return a=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&_e(e),vo(i,t,n,Mi(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,(function(e){var t=an(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),At(i,o.line),Lr(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?Ii(e):o.line!=s.line||1!=t.text.length||go(e.doc,t)?Ii(e,o.line,s.line+1,c):Ri(e,o.line,"text");var u=be(e,"changes"),d=be(e,"change");if(d||u){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&$n(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function rs(e,t,n,i,r){var o;i||(i=n),st(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),Qo(e,{from:n,to:i,text:t,origin:r})}function os(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function ss(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)os(o.ranges[a].anchor,t,n,i),os(o.ranges[a].head,t,n,i)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=ot(c.from.line+i,c.from.ch),c.to=ot(c.to.line+i,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function as(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;ss(e.done,n,i,r),ss(e.undone,n,i,r)}function ls(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Je(e,dt(e,t)):r=tt(t),null==r?null:(i(o,r)&&e.cm&&Ri(e.cm,r,n),o)}function cs(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function us(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}oo.prototype.from=function(){return ut(this.anchor,this.head)},oo.prototype.to=function(){return ct(this.anchor,this.head)},oo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},cs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,dn(r),$n(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},us.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof cs))){var a=[];this.collapse(a),this.children=[new cs(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var l=new cs(r.lines.slice(a,a+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new us(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=z(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new us(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var s=Math.min(t,o-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var ds=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function hs(e,t,n){sn(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&sr(e,n)}function fs(e,t,n,i){var r=new ds(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),ls(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!rn(e,t)){var i=sn(t)<e.scrollTop;et(t,t.height+Wn(r)),i&&sr(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&$n(o,"lineWidgetAdded",o,r,"number"==typeof t?t:tt(t)),r}ds.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=tt(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=Wn(this);et(n,Math.max(0,n.height-o)),e&&(Or(e,(function(){hs(e,n,-o),Ri(e,i,"widget")})),$n(e,"lineWidgetCleared",e,this,i))}},ds.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Wn(this)-t;r&&(rn(this.doc,i)||et(i,i.height+r),n&&Or(n,(function(){n.curOp.forceUpdate=!0,hs(n,i,r),$n(n,"lineWidgetChanged",n,e,tt(i))})))},xe(ds);var ps=0,ms=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ps};function gs(e,t,n,i,r){if(i&&i.shared)return ys(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Nr(e.cm,gs)(e,t,n,i,r);var o=new ms(e,r),s=st(t,n);if(i&&I(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=D("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Jt(e,t.line,t,n,o)||t.line!=n.line&&Jt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Nt()}o.addToHistory&&To(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(e){c&&o.collapsed&&!c.options.lineWrapping&&Qt(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&et(e,0),jt(e,new Mt(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){rn(e,t)&&et(t,0)})),o.clearOnEnter&&pe(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Ot(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ps,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)Ii(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)Ri(c,u,"text");o.atomic&&qo(c.doc),$n(c,"markerAdded",c,o)}return o}ms.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&kr(e),be(this,"clear")){var n=this.find();n&&$n(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Pt(s.markedSpans,this);e&&!this.collapsed?Ri(e,tt(s),"text"):e&&(null!=a.to&&(r=tt(s)),null!=a.from&&(i=tt(s))),s.markedSpans=Lt(s.markedSpans,a),null==a.from&&this.collapsed&&!rn(this.doc,s)&&e&&et(s,$i(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Qt(this.lines[l]),u=an(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&Ii(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&qo(e.doc)),e&&$n(e,"markerCleared",e,this,i,r),t&&Cr(e),this.parent&&this.parent.clear()}},ms.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Pt(o.markedSpans,this);if(null!=s.from&&(n=ot(t?o:tt(o),s.from),-1==e))return n;if(null!=s.to&&(i=ot(t?o:tt(o),s.to),1==e))return i}return n&&{from:n,to:i}},ms.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Or(i,(function(){var r=t.line,o=tt(t.line),s=ti(i,o);if(s&&(ui(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!rn(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var l=Wn(n)-a;l&&et(r,r.height+l)}$n(i,"markerChanged",i,e)}))},ms.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=z(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ms.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},xe(ms);var vs=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ys(e,t,n,i,r){(i=I(i)).shared=!1;var o=[gs(e,t,n,i,r)],s=o[0],a=i.widgetNode;return yo(e,(function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(gs(e,ht(e,t),ht(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Y(o)})),new vs(o,s)}function _s(e){return e.findMarks(ot(e.first,0),e.clipPos(ot(e.lastLine())),(function(e){return e.parent}))}function bs(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(st(o,s)){var a=gs(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function xs(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];yo(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==z(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}vs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();$n(this,"clear")}},vs.prototype.find=function(e,t){return this.primary.find(e,t)},xe(vs);var ws=0,ks=function(e,t,n,i,r){if(!(this instanceof ks))return new ks(e,t,n,i,r);null==n&&(n=0),us.call(this,[new cs([new cn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ot(n,0);this.sel=ao(o),this.history=new wo(null),this.id=++ws,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),vo(this,{from:o,to:o,text:e}),Bo(this,ao(o),W)};ks.prototype=Z(us.prototype,{constructor:ks,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ze(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Pr((function(e){var t=ot(this.first,0),n=this.first+this.size-1;Qo(this,{from:t,to:ot(n,Je(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&lr(this.cm,0,0),Bo(this,ao(t),W)})),replaceRange:function(e,t,n,i){rs(this,e,t=ht(this,t),n=n?ht(this,n):t,i)},getRange:function(e,t,n){var i=Qe(this,ht(this,e),ht(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(it(this,e))return Je(this,e)},getLineNumber:function(e){return tt(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Je(this,e)),Qt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ht(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Pr((function(e,t,n){Fo(this,ht(this,"number"==typeof e?ot(e,t||0):e),null,n)})),setSelection:Pr((function(e,t,n){Fo(this,ht(this,e),ht(this,t||e),n)})),extendSelection:Pr((function(e,t,n){jo(this,ht(this,e),t&&ht(this,t),n)})),extendSelections:Pr((function(e,t){Io(this,pt(this,e),t)})),extendSelectionsBy:Pr((function(e,t){Io(this,pt(this,X(this.sel.ranges,e)),t)})),setSelections:Pr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new oo(ht(this,e[r].anchor),ht(this,e[r].head||e[r].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Bo(this,so(this.cm,i,t),n)}})),addSelection:Pr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new oo(ht(this,e),ht(this,t||e))),Bo(this,so(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Qe(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Qe(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Pr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&fo(this,i,t),l=i.length-1;l>=0;l--)Qo(this,i[l]);a?Ho(this,a):this.cm&&ar(this.cm)})),undo:Pr((function(){es(this,"undo")})),redo:Pr((function(){es(this,"redo")})),undoSelection:Pr((function(){es(this,"undo",!0)})),redoSelection:Pr((function(){es(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new wo(this.history),yo(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Po(this.history.done),undone:Po(this.history.undone)}},setHistory:function(e){var t=this.history=new wo(this.history);t.done=Po(e.done.slice(0),null,!0),t.undone=Po(e.undone.slice(0),null,!0)},setGutterMarker:Pr((function(e,t,n){return ls(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&ie(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:Pr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ls(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,ie(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!it(this,e))return null;if(t=e,!(e=Je(this,e)))return null}else if(null==(t=tt(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Pr((function(e,t,n){return ls(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(C(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:Pr((function(e,t,n){return ls(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(C(n));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:Pr((function(e,t,n){return fs(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return gs(this,ht(this,e),ht(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return gs(this,e=ht(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Je(this,(e=ht(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=ht(this,e),t=ht(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),ht(this,ot(n,t))},indexFromPos:function(e){var t=(e=ht(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new ks(Ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new ks(Ze(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],bs(i,_s(this)),i},unlinkDoc:function(e){if(e instanceof Ia&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),xs(_s(this));break}if(e.history==this.history){var n=[e.id];yo(e,(function(e){return n.push(e.id)}),!0),e.history=new wo(null),e.history.done=Po(this.history.done,n),e.history.undone=Po(this.history.undone,n)}},iterLinkedDocs:function(e){yo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Pe(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Pr((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&xo(this.cm))}))}),ks.prototype.eachLine=ks.prototype.iter;var Cs=0;function Ss(e){var t=this;if(As(t),!ye(t,e)&&!Un(t.display,e)){we(e),s&&(Cs=+new Date);var n=Li(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,l=function(){++a==r&&Nr(t,(function(){var e={from:n=ht(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};Qo(t.doc,e),Ho(t.doc,ao(ht(t.doc,n),ht(t.doc,lo(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==z(t.options.allowDropFileTypes,e.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},i.readAsText(e)}},u=0;u<i.length;u++)c(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Wo(t.doc,ao(n,n)),h)for(var f=0;f<h.length;++f)rs(t.doc,"",h[f].anchor,h[f].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ts(e,t){if(s&&(!e.state.draggingText||+new Date-Cs<100))Se(t);else if(!ye(e,t)&&!Un(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var n=$("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}function Es(e,t){var n=Li(e,t);if(n){var i=document.createDocumentFragment();qi(e,n,i),e.display.dragCursor||(e.display.dragCursor=$("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),A(e.display.dragCursor,i)}}function As(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function $s(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Ds=!1;function Os(){Ds||(Ns(),Ds=!0)}function Ns(){var e;pe(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,$s(Ms)}),100))})),pe(window,"blur",(function(){return $s(Qi)}))}function Ms(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ps={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ls=0;Ls<10;Ls++)Ps[Ls+48]=Ps[Ls+96]=String(Ls);for(var js=65;js<=90;js++)Ps[js]=String.fromCharCode(js);for(var Is=1;Is<=12;Is++)Ps[Is+111]=Ps[Is+63235]="F"+Is;var Rs={};function Fs(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function zs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=X(n.split(" "),Fs),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function Hs(e,t,n,i){var r=(t=qs(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Hs(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var s=Hs(e,t.fallthrough[o],n,i);if(s)return s}}}function Bs(e){var t="string"==typeof e?e:Ps[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ws(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(w?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(w?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Us(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Ps[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ws(n,e,t))}function qs(e){return"string"==typeof e?Rs[e]:e}function Vs(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&st(o.from,Y(i).to)<=0;){var s=i.pop();if(st(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Or(e,(function(){for(var t=i.length-1;t>=0;t--)rs(e.doc,"",i[t].from,i[t].to,"+delete");ar(e)}))}function Gs(e,t,n){var i=se(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Ks(e,t,n){var i=Gs(e,t.ch,n);return null==i?null:new ot(t.line,i,n<0?"after":"before")}function Ys(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var o=he(n,t.doc.direction);if(o){var s,a=r<0?Y(o):o[0],l=r<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var c=ni(t,n);s=r<0?n.text.length-1:0;var u=ii(t,c,s).top;s=ae((function(e){return ii(t,c,e).top==u}),r<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Gs(n,s,1))}else s=r<0?a.to:a.from;return new ot(i,s,l)}}return new ot(i,r<0?n.text.length:0,r<0?"before":"after")}function Xs(e,t,n,i){var r=he(t,e.doc.direction);if(!r)return Ks(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ue(r,n.ch,n.sticky),s=r[o];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return Ks(t,n,i);var a,l=function(e,n){return Gs(t,e instanceof ot?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||ni(e,t),Ci(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,h=l(n,d?1:-1);if(null!=h&&(d?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin)){var f=d?"before":"after";return new ot(n.line,h,f)}}var p=function(e,t,i){for(var o=function(e,t){return t?new ot(n.line,l(e,1),"before"):new ot(n.line,e,"after")};e>=0&&e<r.length;e+=t){var s=r[e],a=t>0==(1!=s.level),c=a?i.begin:l(i.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),i.begin<=c&&c<i.end)return o(c,a)}},m=p(o+i,i,u);if(m)return m;var g=i>0?u.end:l(u.begin,-1);return null==g||i>0&&g==t.text.length||!(m=p(i>0?0:r.length-1,i,c(g)))?null:m}Rs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Rs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Rs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Rs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Rs.default=y?Rs.macDefault:Rs.pcDefault;var Js={selectAll:Xo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return Vs(e,(function(t){if(t.empty()){var n=Je(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ot(t.head.line+1,0)}:{from:t.head,to:ot(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Vs(e,(function(t){return{from:ot(t.from().line,0),to:ht(e.doc,ot(t.to().line+1,0))}}))},delLineLeft:function(e){return Vs(e,(function(e){return{from:ot(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Vs(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Vs(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ot(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ot(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Qs(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ea(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return Zs(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ea(e,t.head):i}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=R(e.getLine(o.line),o.ch,i);t.push(K(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Or(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Je(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new ot(r.line,r.ch-1)),r.ch>0)r=new ot(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),ot(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=Je(e.doc,r.line-1).text;s&&(r=new ot(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),ot(r.line-1,s.length-1),r,"+transpose"))}n.push(new oo(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Or(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);ar(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qs(e,t){var n=Je(e.doc,t),i=Qt(n);return i!=n&&(t=tt(i)),Ys(!0,e,i,t,1)}function Zs(e,t){var n=Je(e.doc,t),i=Zt(n);return i!=n&&(t=tt(i)),Ys(!0,e,n,t,-1)}function ea(e,t){var n=Qs(e,t.line),i=Je(e.doc,n.line),r=he(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return ot(n.line,s?0:o,n.sticky)}return n}function ta(e,t,n){if("string"==typeof t&&!(t=Js[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=B}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function na(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Hs(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Hs(t,e.options.extraKeys,n,e)||Hs(t,e.options.keyMap,n,e)}var ia=new F;function ra(e,t,n,i){var r=e.state.keySeq;if(r){if(Bs(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ia.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),oa(e,r+" "+t,n,i))return!0}return oa(e,t,n,i)}function oa(e,t,n,i){var r=na(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&$n(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(we(n),Ki(e)),!!r}function sa(e,t){var n=Us(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ra(e,"Shift-"+n,t,(function(t){return ta(e,t,!0)}))||ra(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ta(e,t)})):ra(e,n,t,(function(t){return ta(e,t)})))}function aa(e,t,n){return ra(e,"'"+n+"'",t,(function(t){return ta(e,t,!0)}))}var la=null;function ca(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=N(),ye(t,e)))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=sa(t,e);d&&(la=r?i:null,r||88!=i||je||!(y?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!y&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||ua(t)}}function ua(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),ge(document,"keyup",n),ge(document,"mouseover",n))}M(t,"CodeMirror-crosshair"),pe(document,"keyup",n),pe(document,"mouseover",n)}function da(e){16==e.keyCode&&(this.doc.sel.shift=!1),ye(this,e)}function ha(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Un(t.display,e)||ye(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(d&&n==la)return la=null,void we(e);if(!d||e.which&&!(e.which<10)||!sa(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(aa(t,e,r)||t.display.input.onKeyPress(e))}}}var fa,pa,ma=400,ga=function(e,t,n){this.time=e,this.pos=t,this.button=n};function va(e,t){var n=+new Date;return pa&&pa.compare(n,e,t)?(fa=pa=null,"triple"):fa&&fa.compare(n,e,t)?(pa=new ga(n,e,t),fa=null,"double"):(fa=new ga(n,e,t),pa=null,"single")}function ya(e){var t=this,n=t.display;if(!(ye(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,Un(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Ea(t,e)){var i=Li(t,e),r=Ee(e),o=i?va(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&_a(t,r,i,o,e)||(1==r?i?xa(t,i,o,e):Te(e)==n.scroller&&we(e):2==r?(i&&jo(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(k?t.display.input.onContextMenu(e):Xi(t)))}}function _a(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),ra(e,Ws(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,(function(t){if("string"==typeof t&&(t=Js[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=B}finally{e.state.suppressEdits=!1}return i}))}function ba(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=_?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}function xa(e,t,n,i){s?setTimeout(j(Yi,e),0):e.curOp.focus=N();var r,o=ba(e,n,i),a=e.doc.sel;e.options.dragDrop&&De&&!e.isReadOnly()&&"single"==n&&(r=a.contains(t))>-1&&(st((r=a.ranges[r]).from(),t)<0||t.xRel>0)&&(st(r.to(),t)>0||t.xRel<0)?wa(e,i,t,o):Ca(e,i,t,o)}function wa(e,t,n,i){var r=e.display,o=!1,c=Nr(e,(function(t){l&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Xi(e)),ge(r.wrapper.ownerDocument,"mouseup",c),ge(r.wrapper.ownerDocument,"mousemove",u),ge(r.scroller,"dragstart",d),ge(r.scroller,"drop",c),o||(we(t),i.addNew||jo(e.doc,n,null,null,i.extend),l&&!h||s&&9==a?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};l&&(r.scroller.draggable=!0),e.state.draggingText=c,c.copy=!i.moveOnDrag,pe(r.wrapper.ownerDocument,"mouseup",c),pe(r.wrapper.ownerDocument,"mousemove",u),pe(r.scroller,"dragstart",d),pe(r.scroller,"drop",c),e.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function ka(e,t,n){if("char"==n)return new oo(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new oo(ot(t.line,0),ht(e.doc,ot(t.line+1,0)));var i=n(e,t);return new oo(i.from,i.to)}function Ca(e,t,n,i){s&&Xi(e);var r=e.display,o=e.doc;we(t);var a,l,c=o.sel,u=c.ranges;if(i.addNew&&!i.extend?(l=o.sel.contains(n),a=l>-1?u[l]:new oo(n,n)):(a=o.sel.primary(),l=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(a=new oo(n,n)),n=Li(e,t,!0,!0),l=-1;else{var d=ka(e,n,i.unit);a=i.extend?Lo(a,d.anchor,d.head,i.extend):d}i.addNew?-1==l?(l=u.length,Bo(o,so(e,u.concat([a]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"char"==i.unit&&!i.extend?(Bo(o,so(e,u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=o.sel):Ro(o,l,a,U):(l=0,Bo(o,new ro([a],0),U),c=o.sel);var h=n;function f(t){if(0!=st(h,t))if(h=t,"rectangle"==i.unit){for(var r=[],s=e.options.tabSize,u=R(Je(o,n.line).text,n.ch,s),d=R(Je(o,t.line).text,t.ch,s),f=Math.min(u,d),p=Math.max(u,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=Je(o,m).text,y=V(v,f,s);f==p?r.push(new oo(ot(m,y),ot(m,y))):v.length>y&&r.push(new oo(ot(m,y),ot(m,V(v,p,s))))}r.length||r.push(new oo(n,n)),Bo(o,so(e,c.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var _,b=a,x=ka(e,t,i.unit),w=b.anchor;st(x.anchor,w)>0?(_=x.head,w=ut(b.from(),x.anchor)):(_=x.anchor,w=ct(b.to(),x.head));var k=c.ranges.slice(0);k[l]=Sa(e,new oo(ht(o,w),_)),Bo(o,so(e,k,l),U)}}var p=r.wrapper.getBoundingClientRect(),m=0;function g(t){var n=++m,s=Li(e,t,!0,"rectangle"==i.unit);if(s)if(0!=st(s,h)){e.curOp.focus=N(),f(s);var a=tr(r,o);(s.line>=a.to||s.line<a.from)&&setTimeout(Nr(e,(function(){m==n&&g(t)})),150)}else{var l=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;l&&setTimeout(Nr(e,(function(){m==n&&(r.scroller.scrollTop+=l,g(t))})),50)}}function v(t){e.state.selectingText=!1,m=1/0,t&&(we(t),r.input.focus()),ge(r.wrapper.ownerDocument,"mousemove",y),ge(r.wrapper.ownerDocument,"mouseup",_),o.history.lastSelOrigin=null}var y=Nr(e,(function(e){0!==e.buttons&&Ee(e)?g(e):v(e)})),_=Nr(e,v);e.state.selectingText=_,pe(r.wrapper.ownerDocument,"mousemove",y),pe(r.wrapper.ownerDocument,"mouseup",_)}function Sa(e,t){var n=t.anchor,i=t.head,r=Je(e.doc,n.line);if(0==st(n,i)&&n.sticky==i.sticky)return t;var o=he(r);if(!o)return t;var s=ue(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=ue(o,i.ch,i.sticky),d=u-s||(i.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?d<0:d>0}var h=o[c+(l?-1:0)],f=l==(1==h.level),p=f?h.from:h.to,m=f?"after":"before";return n.ch==p&&n.sticky==m?t:new oo(new ot(n.line,p,m),i)}function Ta(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(e){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&we(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!be(e,n))return Ce(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r)return ve(e,n,e,nt(e.doc,o),e.display.gutterSpecs[l].className,t),Ce(t)}}function Ea(e,t){return Ta(e,t,"gutterClick",!0)}function Aa(e,t){Un(e.display,t)||$a(e,t)||ye(e,t,"contextmenu")||k||e.display.input.onContextMenu(t)}function $a(e,t){return!!be(e,"gutterContextMenu")&&Ta(e,t,"gutterContextMenu",!1)}function Da(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hi(e)}ga.prototype.compare=function(e,t,n){return this.time+ma>e&&0==st(t,this.pos)&&n==this.button};var Oa={toString:function(){return"CodeMirror.Init"}},Na={},Ma={};function Pa(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=Oa&&r(e,t,n)}:r)}e.defineOption=n,e.Init=Oa,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,po(e)}),!0),n("indentUnit",2,po,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){mo(e),hi(e),Ii(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(ot(i,o))}i++}));for(var r=n.length-1;r>=0;r--)rs(e.doc,t,n[r],ot(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Oa&&e.refresh()})),n("specialCharPlaceholder",gn,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!b),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Da(e),Jr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=qs(t),r=n!=Oa&&qs(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ja,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=Yr(t,e.options.lineNumbers),Jr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?Ni(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return yr(e)}),!0),n("scrollbarStyle","native",(function(e){xr(e),yr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=Yr(e.options.gutters,t),Jr(e)}),!0),n("firstLineNumber",1,Jr,!0),n("lineNumberFormatter",(function(e){return e}),Jr,!0),n("showCursorWhenSelecting",!1,Wi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Qi(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,La),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Wi,!0),n("singleCursorHeightPerLine",!0,Wi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,mo,!0),n("addModeClass",!1,mo,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,mo,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}function La(e,t,n){if(!t!=!(n&&n!=Oa)){var i=e.display.dragFunctions,r=t?pe:ge;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function ja(e){e.options.lineWrapping?(M(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),ln(e)),Pi(e),Ii(e),hi(e),setTimeout((function(){return yr(e)}),100)}function Ia(e,t){var n=this;if(!(this instanceof Ia))return new Ia(e,t);this.options=t=t?I(t):{},I(Na,t,!1);var i=t.value;"string"==typeof i?i=new ks(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new Ia.inputStyles[t.inputStyle](this),o=this.display=new Qr(e,i,r,t);for(var c in o.wrapper.CodeMirror=this,Da(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),xr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),Ra(this),Os(),kr(this),this.curOp.forceUpdate=!0,_o(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Ji(n)}),20):Qi(this),Ma)Ma.hasOwnProperty(c)&&Ma[c](this,t[c],Oa);Kr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Fa.length;++u)Fa[u](this);Cr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function Ra(e){var t=e.display;pe(t.scroller,"mousedown",Nr(e,ya)),pe(t.scroller,"dblclick",s&&a<11?Nr(e,(function(t){if(!ye(e,t)){var n=Li(e,t);if(n&&!Ea(e,t)&&!Un(e.display,t)){we(t);var i=e.findWordAt(n);jo(e.doc,i.anchor,i.head)}}})):function(t){return ye(e,t)||we(t)}),pe(t.scroller,"contextmenu",(function(t){return Aa(e,t)})),pe(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||Aa(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}pe(t.scroller,"touchstart",(function(r){if(!ye(e,r)&&!o(r)&&!Ea(e,r)){t.input.ensurePolled(),clearTimeout(n);var s=+new Date;t.activeTouch={start:s,moved:!1,prev:s-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),pe(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),pe(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!Un(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!i.prev||l(i,i.prev)?new oo(s,s):!i.prev.prev||l(i,i.prev.prev)?e.findWordAt(s):new oo(ot(s.line,0),ht(e.doc,ot(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),we(n)}r()})),pe(t.scroller,"touchcancel",r),pe(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(hr(e,t.scroller.scrollTop),pr(e,t.scroller.scrollLeft,!0),ve(e,"scroll",e))})),pe(t.scroller,"mousewheel",(function(t){return io(e,t)})),pe(t.scroller,"DOMMouseScroll",(function(t){return io(e,t)})),pe(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ye(e,t)||Se(t)},over:function(t){ye(e,t)||(Es(e,t),Se(t))},start:function(t){return Ts(e,t)},drop:Nr(e,Ss),leave:function(t){ye(e,t)||As(e)}};var c=t.input.getField();pe(c,"keyup",(function(t){return da.call(e,t)})),pe(c,"keydown",Nr(e,ca)),pe(c,"keypress",Nr(e,ha)),pe(c,"focus",(function(t){return Ji(e,t)})),pe(c,"blur",(function(t){return Qi(e,t)}))}Ia.defaults=Na,Ia.optionHandlers=Ma;var Fa=[];function za(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=_t(e,t).state:n="prev");var s=e.options.tabSize,a=Je(o,t),l=R(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(r,a.text.slice(u.length),a.text))==B||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?R(Je(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/s);f;--f)h+=s,d+="\t";if(h<c&&(d+=K(c-h)),d!=u)return rs(o,d,ot(t,0),ot(t,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==t&&m.head.ch<u.length){var g=ot(t,u.length);Ro(o,p,new oo(g,g));break}}}Ia.defineInitHook=function(e){return Fa.push(e)};var Ha=null;function Ba(e){Ha=e}function Wa(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||e.state.pasteIncoming>s,l=Pe(t),c=null;if(a&&i.ranges.length>1)if(Ha&&Ha.text.join("\n")==t){if(i.ranges.length%Ha.text.length==0){c=[];for(var u=0;u<Ha.text.length;u++)c.push(o.splitLines(Ha.text[u]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=i.ranges.length-1;h>=0;h--){var f=i.ranges[h],p=f.from(),m=f.to();f.empty()&&(n&&n>0?p=ot(p.line,p.ch-n):e.state.overwrite&&!a?m=ot(m.line,Math.min(Je(o,m.line).text.length,m.ch+Y(l).length)):a&&Ha&&Ha.lineWise&&Ha.text.join("\n")==l.join("\n")&&(p=m=ot(p.line,0)));var g={from:p,to:m,text:c?c[h%c.length]:l,origin:r||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};Qo(e.doc,g),$n(e,"inputRead",e,g)}t&&!a&&qa(e,t),ar(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ua(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Or(t,(function(){return Wa(t,n,0,null,"paste")})),!0}function qa(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=za(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Je(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=za(e,r.head.line,"smart"));s&&$n(e,"electricInput",e,r.head.line)}}}function Va(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:ot(r,0),head:ot(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ga(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Ka(){var e=$("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=$("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ga(e),t}function Ya(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&Nr(this,t[e])(this,n,r),ve(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qs(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Mr((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");J(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,Ii(this)})),removeOverlay:Mr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void Ii(this)}})),indentLine:Mr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),it(this.doc,e)&&za(this,e,t,n)})),indentSelection:Mr((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(za(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&ar(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)za(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[i].from().ch>0&&Ro(this.doc,i,new oo(o,c[i].to()),W)}}})),getTokenAt:function(e,t){return Ct(this,e,t)},getLineTokens:function(e,t){return Ct(this,ot(e),t,!0)},getTokenTypeAt:function(e){e=ht(this.doc,e);var t,n=yt(this,Je(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=r[o[t][s]];a&&i.push(a)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var l=0;l<r._global.length;l++){var c=r._global[l];c.pred(o,this)&&-1==z(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var n=this.doc;return _t(this,(e=dt(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return _i(this,null==e?n.head:"object"==typeof e?ht(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return yi(this,ht(this.doc,e),t||"page")},coordsChar:function(e,t){return wi(this,(e=vi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=vi(this,{top:e,left:0},t||"page").top,nt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Je(this.doc,e)}else i=e;return gi(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-sn(i):0)},defaultTextHeight:function(){return $i(this.display)},defaultCharWidth:function(){return Di(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,s=(e=_i(this,ht(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&rr(this,{left:a,top:s,right:a+t.offsetWidth,bottom:s+t.offsetHeight})},triggerOnKeyDown:Mr(ca),triggerOnKeyPress:Mr(ha),triggerOnKeyUp:da,triggerOnMouseDown:Mr(ya),execCommand:function(e){if(Js.hasOwnProperty(e))return Js[e].call(null,this)},triggerElectric:Mr((function(e){qa(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=ht(this.doc,e),s=0;s<t&&!(o=Xa(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:Mr((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Xa(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),q)})),deleteH:Mr((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Vs(this,(function(n){var r=Xa(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var s=ht(this.doc,e),a=0;a<t;++a){var l=_i(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Ja(this,l,r,n)).hitSide)break}return s},moveV:Mr((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=_i(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Ja(n,a,e,t);return"page"==t&&s==i.sel.primary()&&sr(n,yi(n,l,"div").top-a.top),l}),q),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(e){var t=Je(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),s=ne(o,r)?function(e){return ne(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ne(e)};n>0&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return new oo(ot(e.line,n),ot(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?M(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),ve(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==N()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Mr((function(e,t){lr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Kn(this)-this.display.barHeight,width:e.scrollWidth-Kn(this)-this.display.barWidth,clientHeight:Xn(this),clientWidth:Yn(this)}},scrollIntoView:Mr((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ot(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?cr(this,e):dr(this,e.from,e.to,e.margin)})),setSize:Mr((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&di(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Ri(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,ve(this,"refresh",this)})),operation:function(e){return Or(this,e)},startOperation:function(){return kr(this)},endOperation:function(){return Cr(this)},refresh:Mr((function(){var e=this.display.cachedTextHeight;Ii(this),this.curOp.forceUpdate=!0,hi(this),lr(this,this.doc.scrollLeft,this.doc.scrollTop),qr(this.display),(null==e||Math.abs(e-$i(this.display))>.5||this.options.lineWrapping)&&Pi(this),ve(this,"refresh",this)})),swapDoc:Mr((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),_o(this,e),hi(this),this.display.input.reset(),lr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,$n(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},xe(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}function Xa(e,t,n,i,r){var o=t,s=n,a=Je(e,t.line),l=r&&"rtl"==e.direction?-n:n;function c(){var n=t.line+l;return!(n<e.first||n>=e.first+e.size)&&(t=new ot(n,t.ch,t.sticky),a=Je(e,n))}function u(o){var s;if("codepoint"==i){var u=a.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))s=null;else{var d=n>0?u>=55296&&u<56320:u>=56320&&u<57343;s=new ot(t.line,Math.max(0,Math.min(a.text.length,t.ch+n*(d?2:1))),-n)}}else s=r?Xs(e.cm,a,t,n):Ks(a,t,n);if(null==s){if(o||!c())return!1;t=Ys(r,e.cm,a,t.line,l)}else t=s;return!0}if("char"==i||"codepoint"==i)u();else if("column"==i)u(!0);else if("word"==i||"group"==i)for(var d=null,h="group"==i,f=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||u(!p);p=!1){var m=a.text.charAt(t.ch)||"\n",g=ne(m,f)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||p||g||(g="s"),d&&d!=g){n<0&&(n=1,u(),t.sticky="after");break}if(g&&(d=g),n>0&&!u(!p))break}var v=Ko(e,t,o,s,!0);return at(o,v)&&(v.hitSide=!0),v}function Ja(e,t,n,i){var r,o,s=e.doc,a=t.left;if("page"==i){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*$i(e.display),3);r=(n>0?t.bottom:t.top)+n*c}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=wi(e,a,r)).outside;){if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var Qa=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Za(e,t){var n=ti(e,t.line);if(!n||n.hidden)return null;var i=Je(e.doc,t.line),r=Qn(n,i,t.line),o=he(i,e.doc.direction),s="left";o&&(s=ue(o,t.ch)%2?"right":"left");var a=si(r.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function el(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function tl(e,t){return t&&(e.bad=!0),e}function nl(e,t,n,i,r){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(e){return function(t){return t.id==e}}function u(){s&&(o+=a,l&&(o+=a),s=l=!1)}function d(e){e&&(u(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void d(n);var o,f=t.getAttribute("cm-marker");if(f){var p=e.findMarks(ot(i,0),ot(r+1,0),c(+f));return void(p.length&&(o=p[0].find(0))&&d(Qe(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&u();for(var g=0;g<t.childNodes.length;g++)h(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),m&&(s=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return o}function il(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return tl(e.clipPos(ot(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return rl(o,t,n)}}function rl(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!O(i,t))return tl(ot(tt(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?Y(e.rest):e.line;return tl(ot(tt(o),o.text.length),r)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,i){for(var r=-1;r<(c?c.length:0);r++)for(var o=r<0?l.map:c[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=tt(r<0?e.line:e.rest[r]),d=o[s]+i;return(i<0||a!=t)&&(d=o[s+(i?1:0)]),ot(u,d)}}}var d=u(s,a,n);if(d)return tl(d,r);for(var h=a.nextSibling,f=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(d=u(h,h.firstChild,0))return tl(ot(d.line,d.ch-f),r);f+=h.textContent.length}for(var p=a.previousSibling,m=n;p;p=p.previousSibling){if(d=u(p,p.firstChild,-1))return tl(ot(d.line,d.ch+m),r);m+=p.textContent.length}}Qa.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!ye(i,e)){if(i.somethingSelected())Ba({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Va(i);Ba({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,W),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=Ha.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ka(),l=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),l.value=Ha.text.join("\n");var c=document.activeElement;L(l),setTimeout((function(){i.display.lineSpace.removeChild(a),c.focus(),c==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Ga(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),pe(r,"paste",(function(e){!o(e)||ye(i,e)||Ua(e,i)||a<=11&&setTimeout(Nr(i,(function(){return t.updateFromDOM()})),20)})),pe(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),pe(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),pe(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),pe(r,"touchstart",(function(){return n.forceCompositionEnd()})),pe(r,"input",(function(){t.composing||t.readFromDOMSoon()})),pe(r,"copy",s),pe(r,"cut",s)},Qa.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Qa.prototype.prepareSelection=function(){var e=Ui(this.cm,!1);return e.focus=document.activeElement==this.div,e},Qa.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Qa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qa.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=il(t,e.anchorNode,e.anchorOffset),a=il(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=st(ut(s,a),r)||0!=st(ct(s,a),o)){var l=t.display.view,c=r.line>=t.display.viewFrom&&Za(t,r)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Za(t,o);if(!u){var d=l[l.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(c&&u){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=S(c.node,c.offset,u.offset,u.node)}catch(e){}f&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Qa.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Qa.prototype.showMultipleSelections=function(e){A(this.cm.display.cursorDiv,e.cursors),A(this.cm.display.selectionDiv,e.selection)},Qa.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Qa.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Qa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qa.prototype.blur=function(){this.div.blur()},Qa.prototype.getField=function(){return this.div},Qa.prototype.supportsTouch=function(){return!0},Qa.prototype.receivedFocus=function(){var e=this;function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}this.selectionInEditor()?this.pollSelection():Or(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,t)},Qa.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Qa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.display.gutterSpecs.length&&el(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=il(t,e.anchorNode,e.anchorOffset),i=il(t,e.focusNode,e.focusOffset);n&&i&&Or(t,(function(){Bo(t.doc,ao(n,i),W),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},Qa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=ot(s.line-1,Je(i.doc,s.line-1).length)),a.ch==Je(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=ot(a.line+1,0)),s.line<r.viewFrom||a.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(e=ji(i,s.line))?(t=tt(r.view[0].line),n=r.view[0].node):(t=tt(r.view[e].line),n=r.view[e-1].node.nextSibling);var l,c,u=ji(i,a.line);if(u==r.view.length-1?(l=r.viewTo-1,c=r.lineDiv.lastChild):(l=tt(r.view[u+1].line)-1,c=r.view[u+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(nl(i,n,c,t,l)),h=Qe(i.doc,ot(t,0),ot(l,Je(i.doc,l).text.length));d.length>1&&h.length>1;)if(Y(d)==Y(h))d.pop(),h.pop(),l--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var f=0,p=0,m=d[0],g=h[0],v=Math.min(m.length,g.length);f<v&&m.charCodeAt(f)==g.charCodeAt(f);)++f;for(var y=Y(d),_=Y(h),b=Math.min(y.length-(1==d.length?f:0),_.length-(1==h.length?f:0));p<b&&y.charCodeAt(y.length-p-1)==_.charCodeAt(_.length-p-1);)++p;if(1==d.length&&1==h.length&&t==s.line)for(;f&&f>s.ch&&y.charCodeAt(y.length-p-1)==_.charCodeAt(_.length-p-1);)f--,p++;d[d.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(f).replace(/\u200b+$/,"");var x=ot(t,f),w=ot(l,h.length?Y(h).length-p:0);return d.length>1||d[0]||st(x,w)?(rs(i.doc,d,x,w,"+input"),!0):void 0},Qa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qa.prototype.reset=function(){this.forceCompositionEnd()},Qa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qa.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Qa.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Or(this.cm,(function(){return Ii(e.cm)}))},Qa.prototype.setUneditable=function(e){e.contentEditable="false"},Qa.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Nr(this.cm,Wa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Qa.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Qa.prototype.onContextMenu=function(){},Qa.prototype.resetPosition=function(){},Qa.prototype.needsContentAttribute=!0;var ol=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null};function sl(e,t){if((t=t?I(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=N();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}var r;if(e.form&&(pe(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(ge(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var a=Ia((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a}function al(e){e.off=ge,e.on=pe,e.wheelEventPixels=no,e.Doc=ks,e.splitLines=Pe,e.countColumn=R,e.findColumn=V,e.isWordChar=te,e.Pass=B,e.signal=ve,e.Line=cn,e.changeEnd=lo,e.scrollbarModel=br,e.Pos=ot,e.cmpPos=st,e.modes=Fe,e.mimeModes=ze,e.resolveMode=We,e.getMode=Ue,e.modeExtensions=qe,e.extendMode=Ve,e.copyState=Ge,e.startState=Ye,e.innerMode=Ke,e.commands=Js,e.keyMap=Rs,e.keyName=Us,e.isModifierKey=Bs,e.lookupKey=Hs,e.normalizeKeyMap=zs,e.StringStream=Xe,e.SharedTextMarker=vs,e.TextMarker=ms,e.LineWidget=ds,e.e_preventDefault=we,e.e_stopPropagation=ke,e.e_stop=Se,e.addClass=M,e.contains=O,e.rmClass=T,e.keyNames=Ps}ol.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!ye(i,e)){if(i.somethingSelected())Ba({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Va(i);Ba({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,W):(n.prevInput="",r.value=t.text.join("\n"),L(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(r.style.width="0px"),pe(r,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),pe(r,"paste",(function(e){ye(i,e)||Ua(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),pe(r,"cut",o),pe(r,"copy",o),pe(e.scroller,"paste",(function(t){if(!Un(e,t)&&!ye(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),pe(e.lineSpace,"selectstart",(function(t){Un(e,t)||we(t)})),pe(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),pe(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},ol.prototype.createField=function(e){this.wrapper=Ka(),this.textarea=this.wrapper.firstChild},ol.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ol.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=Ui(e);if(e.options.moveInputWithCursor){var r=_i(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},ol.prototype.showSelection=function(e){var t=this.cm.display;A(t.cursorDiv,e.cursors),A(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ol.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&L(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},ol.prototype.getField=function(){return this.textarea},ol.prototype.supportsTouch=function(){return!1},ol.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||N()!=this.textarea))try{this.textarea.focus()}catch(e){}},ol.prototype.blur=function(){this.textarea.blur()},ol.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ol.prototype.receivedFocus=function(){this.slowPoll()},ol.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},ol.prototype.fastPoll=function(){var e=!1,t=this;function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}t.pollingFast=!0,t.polling.set(20,n)},ol.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Le(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(i.length,r.length);l<c&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return Or(t,(function(){Wa(t,r.slice(l),i.length-l,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ol.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ol.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},ol.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=Li(n,e),c=i.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Nr(n,Bo)(n.doc,ao(o),W);var u,h=r.style.cssText,f=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=window.scrollY),i.input.focus(),l&&window.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&a>=9&&g(),k){Se(e);var m=function(){ge(window,"mouseup",m),setTimeout(v,20)};pe(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=r.selectionStart){var e=n.somethingSelected(),o="​"+(e?r.value:"");r.value="⇚",r.value=o,t.prevInput=e?"":"​",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=f,r.style.cssText=h,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=c),null!=r.selectionStart)){(!s||s&&a<9)&&g();var e=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==t.prevInput?Nr(n,Xo)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},ol.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},ol.prototype.setUneditable=function(){},ol.prototype.needsContentAttribute=!1,Pa(Ia),Ya(Ia);var ll="iter insert remove copy getEditor constructor".split(" ");for(var cl in ks.prototype)ks.prototype.hasOwnProperty(cl)&&z(ll,cl)<0&&(Ia.prototype[cl]=function(e){return function(){return e.apply(this.doc,arguments)}}(ks.prototype[cl]));return xe(ks),Ia.inputStyles={textarea:ol,contenteditable:Qa},Ia.defineMode=function(e){Ia.defaults.mode||"null"==e||(Ia.defaults.mode=e),He.apply(this,arguments)},Ia.defineMIME=Be,Ia.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ia.defineMIME("text/plain","null"),Ia.defineExtension=function(e,t){Ia.prototype[e]=t},Ia.defineDocExtension=function(e,t){ks.prototype[e]=t},Ia.fromTextArea=sl,al(Ia),Ia.version="5.60.0",Ia}()},6876:function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var i,r,o=t.indentUnit,s=n.statementIndent,a=n.jsonld,l=n.json||a,c=n.typescript,u=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("keyword d"),o=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),h=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}function m(e,t,n){return i=e,r=n,t}function g(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=v(n),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==n&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return m(n);if("="==n&&e.eat(">"))return m("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==n)return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):tt(e,t,1)?(p(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(e.eat("="),m("operator","operator",e.current()));if("`"==n)return t.tokenize=_,_(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),m("meta","meta");if("#"==n&&e.eatWhile(u))return m("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),m("comment","comment");if(h.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?m("."):m("operator","operator",e.current());if(u.test(n)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(d.propertyIsEnumerable(i)){var r=d[i];return m(r.type,r.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function v(e){return function(t,n){var i,r=!1;if(a&&"@"==t.peek()&&t.match(f))return n.tokenize=g,m("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||r);)r=!r&&"\\"==i;return r||(n.tokenize=g),m("string","string")}}function y(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=g;break}i="*"==n}return m("comment","comment")}function _(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}i=!i&&"\\"==n}return m("quasi","string-2",e.current())}var b="([{}])";function x(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var r=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),l=b.indexOf(a);if(l>=0&&l<3){if(!r){++s;break}if(0==--r){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(u.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(o&&!r){++s;break}}o&&!r&&(t.fatArrowAt=s)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function k(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function C(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}function S(e,t,n,i,r){var o=e.cc;for(T.state=e,T.stream=r,T.marked=null,T.cc=o,T.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?U:B)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return T.marked?T.marked:"variable"==n&&C(e,i)?"variable-2":t}}var T={state:null,column:null,marked:null,cc:null};function E(){for(var e=arguments.length-1;e>=0;e--)T.cc.push(arguments[e])}function A(){return E.apply(null,arguments),!0}function $(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function D(e){var t=T.state;if(T.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=O(e,t.context);if(null!=i)return void(t.context=i)}else if(!$(e,t.localVars))return void(t.localVars=new P(e,t.localVars));n.globalVars&&!$(e,t.globalVars)&&(t.globalVars=new P(e,t.globalVars))}function O(e,t){if(t){if(t.block){var n=O(e,t.prev);return n?n==t.prev?t:new M(n,t.vars,!0):null}return $(e,t.vars)?t:new M(t.prev,new P(e,t.vars),!1)}return null}function N(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function M(e,t,n){this.prev=e,this.vars=t,this.block=n}function P(e,t){this.name=e,this.next=t}var L=new P("this",new P("arguments",null));function j(){T.state.context=new M(T.state.context,T.state.localVars,!1),T.state.localVars=L}function I(){T.state.context=new M(T.state.context,T.state.localVars,!0),T.state.localVars=null}function R(){T.state.localVars=T.state.context.vars,T.state.context=T.state.context.prev}function F(e,t){var n=function(){var n=T.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new k(i,T.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function z(){var e=T.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function H(e){function t(n){return n==e?A():";"==e||"}"==n||")"==n||"]"==n?E():A(t)}return t}function B(e,t){return"var"==e?A(F("vardef",t),Se,H(";"),z):"keyword a"==e?A(F("form"),V,B,z):"keyword b"==e?A(F("form"),B,z):"keyword d"==e?T.stream.match(/^\s*$/,!1)?A():A(F("stat"),K,H(";"),z):"debugger"==e?A(H(";")):"{"==e?A(F("}"),I,de,z,R):";"==e?A():"if"==e?("else"==T.state.lexical.info&&T.state.cc[T.state.cc.length-1]==z&&T.state.cc.pop()(),A(F("form"),V,B,z,Oe)):"function"==e?A(Le):"for"==e?A(F("form"),Ne,B,z):"class"==e||c&&"interface"==t?(T.marked="keyword",A(F("form","class"==e?e:t),ze,z)):"variable"==e?c&&"declare"==t?(T.marked="keyword",A(B)):c&&("module"==t||"enum"==t||"type"==t)&&T.stream.match(/^\s*\w/,!1)?(T.marked="keyword","enum"==t?A(Qe):"type"==t?A(Ie,H("operator"),ge,H(";")):A(F("form"),Te,H("{"),F("}"),de,z,z)):c&&"namespace"==t?(T.marked="keyword",A(F("form"),U,B,z)):c&&"abstract"==t?(T.marked="keyword",A(B)):A(F("stat"),re):"switch"==e?A(F("form"),V,H("{"),F("}","switch"),I,de,z,z,R):"case"==e?A(U,H(":")):"default"==e?A(H(":")):"catch"==e?A(F("form"),j,W,B,z,R):"export"==e?A(F("stat"),Ue,z):"import"==e?A(F("stat"),Ve,z):"async"==e?A(B):"@"==t?A(U,B):E(F("stat"),U,H(";"),z)}function W(e){if("("==e)return A(Re,H(")"))}function U(e,t){return G(e,t,!1)}function q(e,t){return G(e,t,!0)}function V(e){return"("!=e?E():A(F(")"),K,H(")"),z)}function G(e,t,n){if(T.state.fatArrowAt==T.stream.start){var i=n?ee:Z;if("("==e)return A(j,F(")"),ce(Re,")"),z,H("=>"),i,R);if("variable"==e)return E(j,Te,H("=>"),i,R)}var r=n?X:Y;return w.hasOwnProperty(e)?A(r):"function"==e?A(Le,r):"class"==e||c&&"interface"==t?(T.marked="keyword",A(F("form"),Fe,z)):"keyword c"==e||"async"==e?A(n?q:U):"("==e?A(F(")"),K,H(")"),z,r):"operator"==e||"spread"==e?A(n?q:U):"["==e?A(F("]"),Je,z,r):"{"==e?ue(se,"}",null,r):"quasi"==e?E(J,r):"new"==e?A(te(n)):A()}function K(e){return e.match(/[;\}\)\],]/)?E():E(U)}function Y(e,t){return","==e?A(K):X(e,t,!1)}function X(e,t,n){var i=0==n?Y:X,r=0==n?U:q;return"=>"==e?A(j,n?ee:Z,R):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?A(i):c&&"<"==t&&T.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?A(F(">"),ce(ge,">"),z,i):"?"==t?A(U,H(":"),r):A(r):"quasi"==e?E(J,i):";"!=e?"("==e?ue(q,")","call",i):"."==e?A(oe,i):"["==e?A(F("]"),K,H("]"),z,i):c&&"as"==t?(T.marked="keyword",A(ge,i)):"regexp"==e?(T.state.lastType=T.marked="operator",T.stream.backUp(T.stream.pos-T.stream.start-1),A(r)):void 0:void 0}function J(e,t){return"quasi"!=e?E():"${"!=t.slice(t.length-2)?A(J):A(U,Q)}function Q(e){if("}"==e)return T.marked="string-2",T.state.tokenize=_,A(J)}function Z(e){return x(T.stream,T.state),E("{"==e?B:U)}function ee(e){return x(T.stream,T.state),E("{"==e?B:q)}function te(e){return function(t){return"."==t?A(e?ie:ne):"variable"==t&&c?A(we,e?X:Y):E(e?q:U)}}function ne(e,t){if("target"==t)return T.marked="keyword",A(Y)}function ie(e,t){if("target"==t)return T.marked="keyword",A(X)}function re(e){return":"==e?A(z,B):E(Y,H(";"),z)}function oe(e){if("variable"==e)return T.marked="property",A()}function se(e,t){return"async"==e?(T.marked="property",A(se)):"variable"==e||"keyword"==T.style?(T.marked="property","get"==t||"set"==t?A(ae):(c&&T.state.fatArrowAt==T.stream.start&&(n=T.stream.match(/^\s*:\s*/,!1))&&(T.state.fatArrowAt=T.stream.pos+n[0].length),A(le))):"number"==e||"string"==e?(T.marked=a?"property":T.style+" property",A(le)):"jsonld-keyword"==e?A(le):c&&N(t)?(T.marked="keyword",A(se)):"["==e?A(U,he,H("]"),le):"spread"==e?A(q,le):"*"==t?(T.marked="keyword",A(se)):":"==e?E(le):void 0;var n}function ae(e){return"variable"!=e?E(le):(T.marked="property",A(Le))}function le(e){return":"==e?A(q):"("==e?E(Le):void 0}function ce(e,t,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var s=T.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),A((function(n,i){return n==t||i==t?E():E(e)}),i)}return r==t||o==t?A():n&&n.indexOf(";")>-1?E(e):A(H(t))}return function(n,r){return n==t||r==t?A():E(e,i)}}function ue(e,t,n){for(var i=3;i<arguments.length;i++)T.cc.push(arguments[i]);return A(F(t,n),ce(e,t),z)}function de(e){return"}"==e?A():E(B,de)}function he(e,t){if(c){if(":"==e)return A(ge);if("?"==t)return A(he)}}function fe(e,t){if(c&&(":"==e||"in"==t))return A(ge)}function pe(e){if(c&&":"==e)return T.stream.match(/^\s*\w+\s+is\b/,!1)?A(U,me,ge):A(ge)}function me(e,t){if("is"==t)return T.marked="keyword",A()}function ge(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(T.marked="keyword",A("typeof"==t?q:ge)):"variable"==e||"void"==t?(T.marked="type",A(xe)):"|"==t||"&"==t?A(ge):"string"==e||"number"==e||"atom"==e?A(xe):"["==e?A(F("]"),ce(ge,"]",","),z,xe):"{"==e?A(F("}"),ye,z,xe):"("==e?A(ce(be,")"),ve,xe):"<"==e?A(ce(ge,">"),ge):void 0}function ve(e){if("=>"==e)return A(ge)}function ye(e){return e.match(/[\}\)\]]/)?A():","==e||";"==e?A(ye):E(_e,ye)}function _e(e,t){return"variable"==e||"keyword"==T.style?(T.marked="property",A(_e)):"?"==t||"number"==e||"string"==e?A(_e):":"==e?A(ge):"["==e?A(H("variable"),fe,H("]"),_e):"("==e?E(je,_e):e.match(/[;\}\)\],]/)?void 0:A()}function be(e,t){return"variable"==e&&T.stream.match(/^\s*[?:]/,!1)||"?"==t?A(be):":"==e?A(ge):"spread"==e?A(be):E(ge)}function xe(e,t){return"<"==t?A(F(">"),ce(ge,">"),z,xe):"|"==t||"."==e||"&"==t?A(ge):"["==e?A(ge,H("]"),xe):"extends"==t||"implements"==t?(T.marked="keyword",A(ge)):"?"==t?A(ge,H(":"),ge):void 0}function we(e,t){if("<"==t)return A(F(">"),ce(ge,">"),z,xe)}function ke(){return E(ge,Ce)}function Ce(e,t){if("="==t)return A(ge)}function Se(e,t){return"enum"==t?(T.marked="keyword",A(Qe)):E(Te,he,$e,De)}function Te(e,t){return c&&N(t)?(T.marked="keyword",A(Te)):"variable"==e?(D(t),A()):"spread"==e?A(Te):"["==e?ue(Ae,"]"):"{"==e?ue(Ee,"}"):void 0}function Ee(e,t){return"variable"!=e||T.stream.match(/^\s*:/,!1)?("variable"==e&&(T.marked="property"),"spread"==e?A(Te):"}"==e?E():"["==e?A(U,H("]"),H(":"),Ee):A(H(":"),Te,$e)):(D(t),A($e))}function Ae(){return E(Te,$e)}function $e(e,t){if("="==t)return A(q)}function De(e){if(","==e)return A(Se)}function Oe(e,t){if("keyword b"==e&&"else"==t)return A(F("form","else"),B,z)}function Ne(e,t){return"await"==t?A(Ne):"("==e?A(F(")"),Me,z):void 0}function Me(e){return"var"==e?A(Se,Pe):"variable"==e?A(Pe):E(Pe)}function Pe(e,t){return")"==e?A():";"==e?A(Pe):"in"==t||"of"==t?(T.marked="keyword",A(U,Pe)):E(U,Pe)}function Le(e,t){return"*"==t?(T.marked="keyword",A(Le)):"variable"==e?(D(t),A(Le)):"("==e?A(j,F(")"),ce(Re,")"),z,pe,B,R):c&&"<"==t?A(F(">"),ce(ke,">"),z,Le):void 0}function je(e,t){return"*"==t?(T.marked="keyword",A(je)):"variable"==e?(D(t),A(je)):"("==e?A(j,F(")"),ce(Re,")"),z,pe,R):c&&"<"==t?A(F(">"),ce(ke,">"),z,je):void 0}function Ie(e,t){return"keyword"==e||"variable"==e?(T.marked="type",A(Ie)):"<"==t?A(F(">"),ce(ke,">"),z):void 0}function Re(e,t){return"@"==t&&A(U,Re),"spread"==e?A(Re):c&&N(t)?(T.marked="keyword",A(Re)):c&&"this"==e?A(he,$e):E(Te,he,$e)}function Fe(e,t){return"variable"==e?ze(e,t):He(e,t)}function ze(e,t){if("variable"==e)return D(t),A(He)}function He(e,t){return"<"==t?A(F(">"),ce(ke,">"),z,He):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(T.marked="keyword"),A(c?ge:U,He)):"{"==e?A(F("}"),Be,z):void 0}function Be(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&N(t))&&T.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(T.marked="keyword",A(Be)):"variable"==e||"keyword"==T.style?(T.marked="property",A(We,Be)):"number"==e||"string"==e?A(We,Be):"["==e?A(U,he,H("]"),We,Be):"*"==t?(T.marked="keyword",A(Be)):c&&"("==e?E(je,Be):";"==e||","==e?A(Be):"}"==e?A():"@"==t?A(U,Be):void 0}function We(e,t){if("?"==t)return A(We);if(":"==e)return A(ge,$e);if("="==t)return A(q);var n=T.state.lexical.prev;return E(n&&"interface"==n.info?je:Le)}function Ue(e,t){return"*"==t?(T.marked="keyword",A(Xe,H(";"))):"default"==t?(T.marked="keyword",A(U,H(";"))):"{"==e?A(ce(qe,"}"),Xe,H(";")):E(B)}function qe(e,t){return"as"==t?(T.marked="keyword",A(H("variable"))):"variable"==e?E(q,qe):void 0}function Ve(e){return"string"==e?A():"("==e?E(U):"."==e?E(Y):E(Ge,Ke,Xe)}function Ge(e,t){return"{"==e?ue(Ge,"}"):("variable"==e&&D(t),"*"==t&&(T.marked="keyword"),A(Ye))}function Ke(e){if(","==e)return A(Ge,Ke)}function Ye(e,t){if("as"==t)return T.marked="keyword",A(Ge)}function Xe(e,t){if("from"==t)return T.marked="keyword",A(U)}function Je(e){return"]"==e?A():E(ce(q,"]"))}function Qe(){return E(F("form"),Te,H("{"),F("}"),ce(Ze,"}"),z,z)}function Ze(){return E(Te,$e)}function et(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function tt(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return R.lex=!0,z.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new k((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new M(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),x(e,t)),t.tokenize!=y&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==i?n:(t.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",S(t,n,i,r,e))},indent:function(t,i){if(t.tokenize==y||t.tokenize==_)return e.Pass;if(t.tokenize!=g)return 0;var r,a=i&&i.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(i))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==z)l=l.prev;else if(u!=Oe)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(r=t.cc[t.cc.length-1])&&(r==Y||r==X)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,h=a==d;return"vardef"==d?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==d&&"{"==a?l.indented:"form"==d?l.indented+o:"stat"==d?l.indented+(et(t,i)?s||o:0):"switch"!=l.info||h||0==n.doubleIndentSwitch?l.align?l.column+(h?0:1):l.indented+(h?0:o):l.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:tt,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=U&&t!=q||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(4631))},296:function(e){function t(e,t,n){var i,r,o,s,a;function l(){var c=Date.now()-s;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,r),o=r=null))}null==t&&(t=100);var c=function(){o=this,r=arguments,s=Date.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,r),o=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=e.apply(o,r),o=r=null,clearTimeout(i),i=null)},c}t.debounce=t,e.exports=t},2828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},9438:function(e,t,n){var i=n(2828);function r(e,t,n,i,r){var s=o.apply(this,arguments);return e.addEventListener(n,s,r),{destroy:function(){e.removeEventListener(n,s,r)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,i,o){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,n,i,o)})))}},1182:function(e,t,n){e.exports=n(9269)},9269:function(e){var t={create:function(e){var t;if(e=e.trim(),/<.*>/g.test(e)){var n=document.createElement("div");n.innerHTML=e,t=n.firstChild}else t=document.createElement(e);if(!this.isValidNode(t))throw new Error("Element not valid");return t},isValidNode:function(e){return e&&"nodeType"in e},render:function(e,t){var n;if(t=null==(n=t)?[]:Array.isArray(n)?n:[n],!this.isValidNode(e))throw new Error("Require a valid HTML Element");return t.forEach((function(t){e.appendChild(t)})),e}};e.exports=t},2025:function(e){var t;self,t=function(){return function(){var e={3099:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},6077:function(e,t,n){var i=n(111);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},1223:function(e,t,n){var i=n(5112),r=n(30),o=n(3070),s=i("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),e.exports=function(e){a[s][e]=!0}},1530:function(e,t,n){"use strict";var i=n(8710).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},5787:function(e){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},9670:function(e,t,n){var i=n(111);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},4019:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var i,r=n(4019),o=n(9781),s=n(7854),a=n(111),l=n(6656),c=n(648),u=n(8880),d=n(1320),h=n(3070).f,f=n(9518),p=n(7674),m=n(5112),g=n(9711),v=s.Int8Array,y=v&&v.prototype,_=s.Uint8ClampedArray,b=_&&_.prototype,x=v&&f(v),w=y&&f(y),k=Object.prototype,C=k.isPrototypeOf,S=m("toStringTag"),T=g("TYPED_ARRAY_TAG"),E=r&&!!p&&"Opera"!==c(s.opera),A=!1,$={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},O=function(e){if(!a(e))return!1;var t=c(e);return l($,t)||l(D,t)};for(i in $)s[i]||(E=!1);if((!E||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},E))for(i in $)s[i]&&p(s[i],x);if((!E||!w||w===k)&&(w=x.prototype,E))for(i in $)s[i]&&p(s[i].prototype,w);if(E&&f(b)!==w&&p(b,w),o&&!l(w,S))for(i in A=!0,h(w,S,{get:function(){return a(this)?this[T]:void 0}}),$)s[i]&&u(s[i],T,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:E,TYPED_ARRAY_TAG:A&&T,aTypedArray:function(e){if(O(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(C.call(x,e))return e}else for(var t in $)if(l($,i)){var n=s[t];if(n&&(e===n||C.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var i in $){var r=s[i];r&&l(r.prototype,e)&&delete r.prototype[e]}w[e]&&!n||d(w,e,n?t:E&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var i,r;if(o){if(p){if(n)for(i in $)(r=s[i])&&l(r,e)&&delete r[e];if(x[e]&&!n)return;try{return d(x,e,n?t:E&&v[e]||t)}catch(e){}}for(i in $)!(r=s[i])||r[e]&&!n||d(r,e,t)}},isView:function(e){if(!a(e))return!1;var t=c(e);return"DataView"===t||l($,t)||l(D,t)},isTypedArray:O,TypedArray:x,TypedArrayPrototype:w}},3331:function(e,t,n){"use strict";var i=n(7854),r=n(9781),o=n(4019),s=n(8880),a=n(2248),l=n(7293),c=n(5787),u=n(9958),d=n(7466),h=n(7067),f=n(1179),p=n(9518),m=n(7674),g=n(8006).f,v=n(3070).f,y=n(1285),_=n(8003),b=n(9909),x=b.get,w=b.set,k="ArrayBuffer",C="DataView",S="Wrong index",T=i.ArrayBuffer,E=T,A=i.DataView,$=A&&A.prototype,D=Object.prototype,O=i.RangeError,N=f.pack,M=f.unpack,P=function(e){return[255&e]},L=function(e){return[255&e,e>>8&255]},j=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},I=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},R=function(e){return N(e,23,4)},F=function(e){return N(e,52,8)},z=function(e,t){v(e.prototype,t,{get:function(){return x(this)[t]}})},H=function(e,t,n,i){var r=h(n),o=x(e);if(r+t>o.byteLength)throw O(S);var s=x(o.buffer).bytes,a=r+o.byteOffset,l=s.slice(a,a+t);return i?l:l.reverse()},B=function(e,t,n,i,r,o){var s=h(n),a=x(e);if(s+t>a.byteLength)throw O(S);for(var l=x(a.buffer).bytes,c=s+a.byteOffset,u=i(+r),d=0;d<t;d++)l[c+d]=u[o?d:t-d-1]};if(o){if(!l((function(){T(1)}))||!l((function(){new T(-1)}))||l((function(){return new T,new T(1.5),new T(NaN),T.name!=k}))){for(var W,U=(E=function(e){return c(this,E),new T(h(e))}).prototype=T.prototype,q=g(T),V=0;q.length>V;)(W=q[V++])in E||s(E,W,T[W]);U.constructor=E}m&&p($)!==D&&m($,D);var G=new A(new E(2)),K=$.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||a($,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else E=function(e){c(this,E,k);var t=h(e);w(this,{bytes:y.call(new Array(t),0),byteLength:t}),r||(this.byteLength=t)},A=function(e,t,n){c(this,A,C),c(e,E,C);var i=x(e).byteLength,o=u(t);if(o<0||o>i)throw O("Wrong offset");if(o+(n=void 0===n?i-o:d(n))>i)throw O("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:o}),r||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},r&&(z(E,"byteLength"),z(A,"buffer"),z(A,"byteLength"),z(A,"byteOffset")),a(A.prototype,{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return I(H(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return I(H(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return M(H(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return M(H(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){B(this,1,e,P,t)},setUint8:function(e,t){B(this,1,e,P,t)},setInt16:function(e,t){B(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){B(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){B(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){B(this,4,e,j,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){B(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){B(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});_(E,k),_(A,C),e.exports={ArrayBuffer:E,DataView:A}},1048:function(e,t,n){"use strict";var i=n(7908),r=n(1400),o=n(7466),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),a=o(n.length),l=r(e,a),c=r(t,a),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?a:r(u,a))-c,a-l),h=1;for(c<l&&l<c+d&&(h=-1,c+=d-1,l+=d-1);d-- >0;)c in n?n[l]=n[c]:delete n[l],l+=h,c+=h;return n}},1285:function(e,t,n){"use strict";var i=n(7908),r=n(1400),o=n(7466);e.exports=function(e){for(var t=i(this),n=o(t.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);c>a;)t[a++]=e;return t}},8533:function(e,t,n){"use strict";var i=n(2092).forEach,r=n(9341)("forEach");e.exports=r?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},8457:function(e,t,n){"use strict";var i=n(9974),r=n(7908),o=n(3411),s=n(7659),a=n(7466),l=n(6135),c=n(1246);e.exports=function(e){var t,n,u,d,h,f,p=r(e),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,_=c(p),b=0;if(y&&(v=i(v,g>2?arguments[2]:void 0,2)),null==_||m==Array&&s(_))for(n=new m(t=a(p.length));t>b;b++)f=y?v(p[b],b):p[b],l(n,b,f);else for(h=(d=_.call(p)).next,n=new m;!(u=h.call(d)).done;b++)f=y?o(d,v,[u.value,b],!0):u.value,l(n,b,f);return n.length=b,n}},1318:function(e,t,n){var i=n(5656),r=n(7466),o=n(1400),s=function(e){return function(t,n,s){var a,l=i(t),c=r(l.length),u=o(s,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:function(e,t,n){var i=n(9974),r=n(8361),o=n(7908),s=n(7466),a=n(5417),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,h=7==e,f=5==e||d;return function(p,m,g,v){for(var y,_,b=o(p),x=r(b),w=i(m,g,3),k=s(x.length),C=0,S=v||a,T=t?S(p,k):n||h?S(p,0):void 0;k>C;C++)if((f||C in x)&&(_=w(y=x[C],C,b),e))if(t)T[C]=_;else if(_)switch(e){case 3:return!0;case 5:return y;case 6:return C;case 2:l.call(T,y)}else switch(e){case 4:return!1;case 7:l.call(T,y)}return d?-1:c||u?u:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},6583:function(e,t,n){"use strict";var i=n(5656),r=n(9958),o=n(7466),s=n(9341),a=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),d=c||!u;e.exports=d?function(e){if(c)return l.apply(this,arguments)||0;var t=i(this),n=o(t.length),s=n-1;for(arguments.length>1&&(s=a(s,r(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:l},1194:function(e,t,n){var i=n(7293),r=n(5112),o=n(7392),s=r("species");e.exports=function(e){return o>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var i=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},3671:function(e,t,n){var i=n(3099),r=n(7908),o=n(8361),s=n(7466),a=function(e){return function(t,n,a,l){i(n);var c=r(t),u=o(c),d=s(c.length),h=e?d-1:0,f=e?-1:1;if(a<2)for(;;){if(h in u){l=u[h],h+=f;break}if(h+=f,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=f)h in u&&(l=n(l,u[h],h,c));return l}};e.exports={left:a(!1),right:a(!0)}},5417:function(e,t,n){var i=n(111),r=n(3157),o=n(5112)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},3411:function(e,t,n){var i=n(9670),r=n(9212);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){throw r(e),t}}},7072:function(e,t,n){var i=n(5112)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},4326:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},648:function(e,t,n){var i=n(1694),r=n(4326),o=n(5112)("toStringTag"),s="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},9920:function(e,t,n){var i=n(6656),r=n(3887),o=n(1236),s=n(3070);e.exports=function(e,t){for(var n=r(t),a=s.f,l=o.f,c=0;c<n.length;c++){var u=n[c];i(e,u)||a(e,u,l(t,u))}}},8544:function(e,t,n){var i=n(7293);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:function(e,t,n){"use strict";var i=n(3383).IteratorPrototype,r=n(30),o=n(9114),s=n(8003),a=n(7497),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=r(i,{next:o(1,n)}),s(e,c,!1,!0),a[c]=l,e}},8880:function(e,t,n){var i=n(9781),r=n(3070),o=n(9114);e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var i=n(7593),r=n(3070),o=n(9114);e.exports=function(e,t,n){var s=i(t);s in e?r.f(e,s,o(0,n)):e[s]=n}},654:function(e,t,n){"use strict";var i=n(2109),r=n(4994),o=n(9518),s=n(7674),a=n(8003),l=n(8880),c=n(1320),u=n(5112),d=n(1913),h=n(7497),f=n(3383),p=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,g=u("iterator"),v="keys",y="values",_="entries",b=function(){return this};e.exports=function(e,t,n,u,f,x,w){r(n,t,u);var k,C,S,T=function(e){if(e===f&&O)return O;if(!m&&e in $)return $[e];switch(e){case v:case y:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",A=!1,$=e.prototype,D=$[g]||$["@@iterator"]||f&&$[f],O=!m&&D||T(f),N="Array"==t&&$.entries||D;if(N&&(k=o(N.call(new e)),p!==Object.prototype&&k.next&&(d||o(k)===p||(s?s(k,p):"function"!=typeof k[g]&&l(k,g,b)),a(k,E,!0,!0),d&&(h[E]=b))),f==y&&D&&D.name!==y&&(A=!0,O=function(){return D.call(this)}),d&&!w||$[g]===O||l($,g,O),h[t]=O,f)if(C={values:T(y),keys:x?O:T(v),entries:T(_)},w)for(S in C)(m||A||!(S in $))&&c($,S,C[S]);else i({target:t,proto:!0,forced:m||A},C);return C}},9781:function(e,t,n){var i=n(7293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var i=n(7854),r=n(111),o=i.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(e,t,n){var i=n(5005);e.exports=i("navigator","userAgent")||""},7392:function(e,t,n){var i,r,o=n(7854),s=n(8113),a=o.process,l=a&&a.versions,c=l&&l.v8;c?r=(i=c.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var i=n(7854),r=n(1236).f,o=n(8880),s=n(1320),a=n(3505),l=n(9920),c=n(4705);e.exports=function(e,t){var n,u,d,h,f,p=e.target,m=e.global,g=e.stat;if(n=m?i:g?i[p]||a(p,{}):(i[p]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(f=r(n,u))&&f.value:n[u],!c(m?u:p+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(n,u,h,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:function(e,t,n){"use strict";n(4916);var i=n(1320),r=n(7293),o=n(5112),s=n(2261),a=n(8880),l=o("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),d=o("replace"),h=!!/./[d]&&""===/./[d]("a","$0"),f=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var p=o(e),m=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=m&&!r((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!m||!g||"replace"===e&&(!c||!u||h)||"split"===e&&!f){var v=/./[p],y=n(p,""[e],(function(e,t,n,i,r){return t.exec===s?m&&!r?{done:!0,value:v.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),_=y[0],b=y[1];i(String.prototype,e,_),i(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}d&&a(RegExp.prototype[p],"sham",!0)}},9974:function(e,t,n){var i=n(3099);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},5005:function(e,t,n){var i=n(857),r=n(7854),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e])||o(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},1246:function(e,t,n){var i=n(648),r=n(7497),o=n(5112)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||r[i(e)]}},8554:function(e,t,n){var i=n(9670),r=n(1246);e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},647:function(e,t,n){var i=n(7908),r=Math.floor,o="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,a=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,c,u){var d=n+e.length,h=l.length,f=a;return void 0!==c&&(c=i(c),f=s),o.call(u,f,(function(i,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":s=c[o.slice(1,-1)];break;default:var a=+o;if(0===a)return i;if(a>h){var u=r(a/10);return 0===u?i:u<=h?void 0===l[u-1]?o.charAt(1):l[u-1]+o.charAt(1):i}s=l[a-1]}return void 0===s?"":s}))}},7854:function(e,t,n){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},3501:function(e){e.exports={}},490:function(e,t,n){var i=n(5005);e.exports=i("document","documentElement")},4664:function(e,t,n){var i=n(9781),r=n(7293),o=n(317);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1179:function(e){var t=Math.abs,n=Math.pow,i=Math.floor,r=Math.log,o=Math.LN2;e.exports={pack:function(e,s,a){var l,c,u,d=new Array(a),h=8*a-s-1,f=(1<<h)-1,p=f>>1,m=23===s?n(2,-24)-n(2,-77):0,g=e<0||0===e&&1/e<0?1:0,v=0;for((e=t(e))!=e||e===1/0?(c=e!=e?1:0,l=f):(l=i(r(e)/o),e*(u=n(2,-l))<1&&(l--,u*=2),(e+=l+p>=1?m/u:m*n(2,1-p))*u>=2&&(l++,u/=2),l+p>=f?(c=0,l=f):l+p>=1?(c=(e*u-1)*n(2,s),l+=p):(c=e*n(2,p-1)*n(2,s),l=0));s>=8;d[v++]=255&c,c/=256,s-=8);for(l=l<<s|c,h+=s;h>0;d[v++]=255&l,l/=256,h-=8);return d[--v]|=128*g,d},unpack:function(e,t){var i,r=e.length,o=8*r-t-1,s=(1<<o)-1,a=s>>1,l=o-7,c=r-1,u=e[c--],d=127&u;for(u>>=7;l>0;d=256*d+e[c],c--,l-=8);for(i=d&(1<<-l)-1,d>>=-l,l+=t;l>0;i=256*i+e[c],c--,l-=8);if(0===d)d=1-a;else{if(d===s)return i?NaN:u?-1/0:1/0;i+=n(2,t),d-=a}return(u?-1:1)*i*n(2,d-t)}}},8361:function(e,t,n){var i=n(7293),r=n(4326),o="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?o.call(e,""):Object(e)}:Object},9587:function(e,t,n){var i=n(111),r=n(7674);e.exports=function(e,t,n){var o,s;return r&&"function"==typeof(o=t.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&r(e,s),e}},2788:function(e,t,n){var i=n(5465),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},9909:function(e,t,n){var i,r,o,s=n(8536),a=n(7854),l=n(111),c=n(8880),u=n(6656),d=n(5465),h=n(6200),f=n(3501),p=a.WeakMap;if(s){var m=d.state||(d.state=new p),g=m.get,v=m.has,y=m.set;i=function(e,t){return t.facade=e,y.call(m,e,t),t},r=function(e){return g.call(m,e)||{}},o=function(e){return v.call(m,e)}}else{var _=h("state");f[_]=!0,i=function(e,t){return t.facade=e,c(e,_,t),t},r=function(e){return u(e,_)?e[_]:{}},o=function(e){return u(e,_)}}e.exports={set:i,get:r,has:o,enforce:function(e){return o(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var i=n(5112),r=n(7497),o=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||s[o]===e)}},3157:function(e,t,n){var i=n(4326);e.exports=Array.isArray||function(e){return"Array"==i(e)}},4705:function(e,t,n){var i=n(7293),r=/#|\.prototype\./,o=function(e,t){var n=a[s(e)];return n==c||n!=l&&("function"==typeof t?i(t):!!t)},s=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},111:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:function(e){e.exports=!1},7850:function(e,t,n){var i=n(111),r=n(4326),o=n(5112)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},9212:function(e,t,n){var i=n(9670);e.exports=function(e){var t=e.return;if(void 0!==t)return i(t.call(e)).value}},3383:function(e,t,n){"use strict";var i,r,o,s=n(7293),a=n(9518),l=n(8880),c=n(6656),u=n(5112),d=n(1913),h=u("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(r=a(a(o)))!==Object.prototype&&(i=r):f=!0);var p=null==i||s((function(){var e={};return i[h].call(e)!==e}));p&&(i={}),d&&!p||c(i,h)||l(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},7497:function(e){e.exports={}},133:function(e,t,n){var i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},590:function(e,t,n){var i=n(7293),r=n(5112),o=n(1913),s=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},8536:function(e,t,n){var i=n(7854),r=n(2788),o=i.WeakMap;e.exports="function"==typeof o&&/native code/.test(r(o))},1574:function(e,t,n){"use strict";var i=n(9781),r=n(7293),o=n(1956),s=n(5181),a=n(5296),l=n(7908),c=n(8361),u=Object.assign,d=Object.defineProperty;e.exports=!u||r((function(){if(i&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||o(u({},t)).join("")!=r}))?function(e,t){for(var n=l(e),r=arguments.length,u=1,d=s.f,h=a.f;r>u;)for(var f,p=c(arguments[u++]),m=d?o(p).concat(d(p)):o(p),g=m.length,v=0;g>v;)f=m[v++],i&&!h.call(p,f)||(n[f]=p[f]);return n}:u},30:function(e,t,n){var i,r=n(9670),o=n(6048),s=n(748),a=n(3501),l=n(490),c=n(317),u=n(6200),d=u("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=i?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete p.prototype[s[n]];return p()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[d]=e):n=p(),void 0===t?n:o(n,t)}},6048:function(e,t,n){var i=n(9781),r=n(3070),o=n(9670),s=n(1956);e.exports=i?Object.defineProperties:function(e,t){o(e);for(var n,i=s(t),a=i.length,l=0;a>l;)r.f(e,n=i[l++],t[n]);return e}},3070:function(e,t,n){var i=n(9781),r=n(4664),o=n(9670),s=n(7593),a=Object.defineProperty;t.f=i?a:function(e,t,n){if(o(e),t=s(t,!0),o(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var i=n(9781),r=n(5296),o=n(9114),s=n(5656),a=n(7593),l=n(6656),c=n(4664),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=s(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return o(!r.f.call(e,t),e[t])}},8006:function(e,t,n){var i=n(6324),r=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var i=n(6656),r=n(7908),o=n(6200),s=n(8544),a=o("IE_PROTO"),l=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},6324:function(e,t,n){var i=n(6656),r=n(5656),o=n(1318).indexOf,s=n(3501);e.exports=function(e,t){var n,a=r(e),l=0,c=[];for(n in a)!i(s,n)&&i(a,n)&&c.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~o(c,n)||c.push(n));return c}},1956:function(e,t,n){var i=n(6324),r=n(748);e.exports=Object.keys||function(e){return i(e,r)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var i=n(9670),r=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return i(n),r(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},288:function(e,t,n){"use strict";var i=n(1694),r=n(648);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},3887:function(e,t,n){var i=n(5005),r=n(8006),o=n(5181),s=n(9670);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},857:function(e,t,n){var i=n(7854);e.exports=i},2248:function(e,t,n){var i=n(1320);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},1320:function(e,t,n){var i=n(7854),r=n(8880),o=n(6656),s=n(3505),a=n(2788),l=n(9909),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var l,c=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||r(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==i?(c?!f&&e[t]&&(h=!0):delete e[t],h?e[t]=n:r(e,t,n)):h?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},7651:function(e,t,n){var i=n(4326),r=n(2261);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},2261:function(e,t,n){"use strict";var i,r,o=n(7066),s=n(2999),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,u=(i=/a/,r=/b*/g,a.call(i,"a"),a.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),d=s.UNSUPPORTED_Y||s.BROKEN_CARET,h=void 0!==/()??/.exec("")[1];(u||h||d)&&(c=function(e){var t,n,i,r,s=this,c=d&&s.sticky,f=o.call(s),p=s.source,m=0,g=e;return c&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),g=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,m++),n=new RegExp("^(?:"+p+")",f)),h&&(n=new RegExp("^"+p+"$(?!\\s)",f)),u&&(t=s.lastIndex),i=a.call(c?n:s,g),c?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:u&&i&&(s.lastIndex=s.global?i.index+i[0].length:t),h&&i&&i.length>1&&l.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=c},7066:function(e,t,n){"use strict";var i=n(9670);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,n){"use strict";var i=n(7293);function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},4488:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:function(e,t,n){var i=n(7854),r=n(8880);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},6340:function(e,t,n){"use strict";var i=n(5005),r=n(3070),o=n(5112),s=n(9781),a=o("species");e.exports=function(e){var t=i(e),n=r.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var i=n(3070).f,r=n(6656),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},6200:function(e,t,n){var i=n(2309),r=n(9711),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},5465:function(e,t,n){var i=n(7854),r=n(3505),o="__core-js_shared__",s=i[o]||r(o,{});e.exports=s},2309:function(e,t,n){var i=n(1913),r=n(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(e,t,n){var i=n(9670),r=n(3099),o=n(5112)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[o])?t:r(n)}},8710:function(e,t,n){var i=n(9958),r=n(4488),o=function(e){return function(t,n){var o,s,a=String(r(t)),l=i(n),c=a.length;return l<0||l>=c?e?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},3197:function(e){"use strict";var t=2147483647,n=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,r="Overflow: input needs wider integers to process",o=Math.floor,s=String.fromCharCode,a=function(e){return e+22+75*(e<26)},l=function(e,t,n){var i=0;for(e=n?o(e/700):e>>1,e+=o(e/t);e>455;i+=36)e=o(e/35);return o(i+36*e/(e+38))},c=function(e){var n,i,c=[],u=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,d=128,h=0,f=72;for(n=0;n<e.length;n++)(i=e[n])<128&&c.push(s(i));var p=c.length,m=p;for(p&&c.push("-");m<u;){var g=t;for(n=0;n<e.length;n++)(i=e[n])>=d&&i<g&&(g=i);var v=m+1;if(g-d>o((t-h)/v))throw RangeError(r);for(h+=(g-d)*v,d=g,n=0;n<e.length;n++){if((i=e[n])<d&&++h>t)throw RangeError(r);if(i==d){for(var y=h,_=36;;_+=36){var b=_<=f?1:_>=f+26?26:_-f;if(y<b)break;var x=y-b,w=36-b;c.push(s(a(b+x%w))),y=o(x/w)}c.push(s(a(y))),f=l(h,v,m==p),h=0,++m}}++h,++d}return c.join("")};e.exports=function(e){var t,r,o=[],s=e.toLowerCase().replace(i,".").split(".");for(t=0;t<s.length;t++)r=s[t],o.push(n.test(r)?"xn--"+c(r):r);return o.join(".")}},6091:function(e,t,n){var i=n(7293),r=n(1361);e.exports=function(e){return i((function(){return!!r[e]()||"​᠎"!="​᠎"[e]()||r[e].name!==e}))}},3111:function(e,t,n){var i=n(4488),r="["+n(1361)+"]",o=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),a=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:a(1),end:a(2),trim:a(3)}},1400:function(e,t,n){var i=n(9958),r=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):o(n,t)}},7067:function(e,t,n){var i=n(9958),r=n(7466);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length or index");return n}},5656:function(e,t,n){var i=n(8361),r=n(4488);e.exports=function(e){return i(r(e))}},9958:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},7466:function(e,t,n){var i=n(9958),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},7908:function(e,t,n){var i=n(4488);e.exports=function(e){return Object(i(e))}},4590:function(e,t,n){var i=n(3002);e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},3002:function(e,t,n){var i=n(9958);e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},7593:function(e,t,n){var i=n(111);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},1694:function(e,t,n){var i={};i[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(i)},9843:function(e,t,n){"use strict";var i=n(2109),r=n(7854),o=n(9781),s=n(3832),a=n(260),l=n(3331),c=n(5787),u=n(9114),d=n(8880),h=n(7466),f=n(7067),p=n(4590),m=n(7593),g=n(6656),v=n(648),y=n(111),_=n(30),b=n(7674),x=n(8006).f,w=n(7321),k=n(2092).forEach,C=n(6340),S=n(3070),T=n(1236),E=n(9909),A=n(9587),$=E.get,D=E.set,O=S.f,N=T.f,M=Math.round,P=r.RangeError,L=l.ArrayBuffer,j=l.DataView,I=a.NATIVE_ARRAY_BUFFER_VIEWS,R=a.TYPED_ARRAY_TAG,F=a.TypedArray,z=a.TypedArrayPrototype,H=a.aTypedArrayConstructor,B=a.isTypedArray,W="BYTES_PER_ELEMENT",U="Wrong length",q=function(e,t){for(var n=0,i=t.length,r=new(H(e))(i);i>n;)r[n]=t[n++];return r},V=function(e,t){O(e,t,{get:function(){return $(this)[t]}})},G=function(e){var t;return e instanceof L||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},K=function(e,t){return B(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Y=function(e,t){return K(e,t=m(t,!0))?u(2,e[t]):N(e,t)},X=function(e,t,n){return!(K(e,t=m(t,!0))&&y(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?O(e,t,n):(e[t]=n.value,e)};o?(I||(T.f=Y,S.f=X,V(z,"buffer"),V(z,"byteOffset"),V(z,"byteLength"),V(z,"length")),i({target:"Object",stat:!0,forced:!I},{getOwnPropertyDescriptor:Y,defineProperty:X}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,a=e+(n?"Clamped":"")+"Array",l="get"+e,u="set"+e,m=r[a],g=m,v=g&&g.prototype,S={},T=function(e,t){O(e,t,{get:function(){return function(e,t){var n=$(e);return n.view[l](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var r=$(e);n&&(i=(i=M(i))<0?0:i>255?255:255&i),r.view[u](t*o+r.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};I?s&&(g=t((function(e,t,n,i){return c(e,g,a),A(y(t)?G(t)?void 0!==i?new m(t,p(n,o),i):void 0!==n?new m(t,p(n,o)):new m(t):B(t)?q(g,t):w.call(g,t):new m(f(t)),e,g)})),b&&b(g,F),k(x(m),(function(e){e in g||d(g,e,m[e])})),g.prototype=v):(g=t((function(e,t,n,i){c(e,g,a);var r,s,l,u=0,d=0;if(y(t)){if(!G(t))return B(t)?q(g,t):w.call(g,t);r=t,d=p(n,o);var m=t.byteLength;if(void 0===i){if(m%o)throw P(U);if((s=m-d)<0)throw P(U)}else if((s=h(i)*o)+d>m)throw P(U);l=s/o}else l=f(t),r=new L(s=l*o);for(D(e,{buffer:r,byteOffset:d,byteLength:s,length:l,view:new j(r)});u<l;)T(e,u++)})),b&&b(g,F),v=g.prototype=_(z)),v.constructor!==g&&d(v,"constructor",g),R&&d(v,R,a),S[a]=g,i({global:!0,forced:g!=m,sham:!I},S),W in g||d(g,W,o),W in v||d(v,W,o),C(a)}):e.exports=function(){}},3832:function(e,t,n){var i=n(7854),r=n(7293),o=n(7072),s=n(260).NATIVE_ARRAY_BUFFER_VIEWS,a=i.ArrayBuffer,l=i.Int8Array;e.exports=!s||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!o((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||r((function(){return 1!==new l(new a(2),1,void 0).length}))},3074:function(e,t,n){var i=n(260).aTypedArrayConstructor,r=n(6707);e.exports=function(e,t){for(var n=r(e,e.constructor),o=0,s=t.length,a=new(i(n))(s);s>o;)a[o]=t[o++];return a}},7321:function(e,t,n){var i=n(7908),r=n(7466),o=n(1246),s=n(7659),a=n(9974),l=n(260).aTypedArrayConstructor;e.exports=function(e){var t,n,c,u,d,h,f=i(e),p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=o(f);if(null!=v&&!s(v))for(h=(d=v.call(f)).next,f=[];!(u=h.call(d)).done;)f.push(u.value);for(g&&p>2&&(m=a(m,arguments[2],2)),n=r(f.length),c=new(l(this))(n),t=0;n>t;t++)c[t]=g?m(f[t],t):f[t];return c}},9711:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},3307:function(e,t,n){var i=n(133);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(e,t,n){var i=n(7854),r=n(2309),o=n(6656),s=n(9711),a=n(133),l=n(3307),c=r("wks"),u=i.Symbol,d=l?u:u&&u.withoutSetter||s;e.exports=function(e){return o(c,e)||(a&&o(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},8264:function(e,t,n){"use strict";var i=n(2109),r=n(7854),o=n(3331),s=n(6340),a="ArrayBuffer",l=o.ArrayBuffer;i({global:!0,forced:r.ArrayBuffer!==l},{ArrayBuffer:l}),s(a)},2222:function(e,t,n){"use strict";var i=n(2109),r=n(7293),o=n(3157),s=n(111),a=n(7908),l=n(7466),c=n(6135),u=n(5417),d=n(1194),h=n(5112),f=n(7392),p=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=f>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),y=d("concat"),_=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};i({target:"Array",proto:!0,forced:!v||!y},{concat:function(e){var t,n,i,r,o,s=a(this),d=u(s,0),h=0;for(t=-1,i=arguments.length;t<i;t++)if(_(o=-1===t?s:arguments[t])){if(h+(r=l(o.length))>m)throw TypeError(g);for(n=0;n<r;n++,h++)n in o&&c(d,h,o[n])}else{if(h>=m)throw TypeError(g);c(d,h++,o)}return d.length=h,d}})},7327:function(e,t,n){"use strict";var i=n(2109),r=n(2092).filter;i({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},2772:function(e,t,n){"use strict";var i=n(2109),r=n(1318).indexOf,o=n(9341),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,l=o("indexOf");i({target:"Array",proto:!0,forced:a||!l},{indexOf:function(e){return a?s.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},6992:function(e,t,n){"use strict";var i=n(5656),r=n(1223),o=n(7497),s=n(9909),a=n(654),l="Array Iterator",c=s.set,u=s.getterFor(l);e.exports=a(Array,"Array",(function(e,t){c(this,{type:l,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},1249:function(e,t,n){"use strict";var i=n(2109),r=n(2092).map;i({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},7042:function(e,t,n){"use strict";var i=n(2109),r=n(111),o=n(3157),s=n(1400),a=n(7466),l=n(5656),c=n(6135),u=n(5112),d=n(1194)("slice"),h=u("species"),f=[].slice,p=Math.max;i({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,i,u,d=l(this),m=a(d.length),g=s(e,m),v=s(void 0===t?m:t,m);if(o(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return f.call(d,g,v);for(i=new(void 0===n?Array:n)(p(v-g,0)),u=0;g<v;g++,u++)g in d&&c(i,u,d[g]);return i.length=u,i}})},561:function(e,t,n){"use strict";var i=n(2109),r=n(1400),o=n(9958),s=n(7466),a=n(7908),l=n(5417),c=n(6135),u=n(1194)("splice"),d=Math.max,h=Math.min,f=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var n,i,u,m,g,v,y=a(this),_=s(y.length),b=r(e,_),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=_-b):(n=x-2,i=h(d(o(t),0),_-b)),_+n-i>f)throw TypeError(p);for(u=l(y,i),m=0;m<i;m++)(g=b+m)in y&&c(u,m,y[g]);if(u.length=i,n<i){for(m=b;m<_-i;m++)v=m+n,(g=m+i)in y?y[v]=y[g]:delete y[v];for(m=_;m>_-i+n;m--)delete y[m-1]}else if(n>i)for(m=_-i;m>b;m--)v=m+n-1,(g=m+i-1)in y?y[v]=y[g]:delete y[v];for(m=0;m<n;m++)y[m+b]=arguments[m+2];return y.length=_-i+n,u}})},8309:function(e,t,n){var i=n(9781),r=n(3070).f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,l="name";i&&!(l in o)&&r(o,l,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(e){return""}}})},489:function(e,t,n){var i=n(2109),r=n(7293),o=n(7908),s=n(9518),a=n(8544);i({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!a},{getPrototypeOf:function(e){return s(o(e))}})},1539:function(e,t,n){var i=n(1694),r=n(1320),o=n(288);i||r(Object.prototype,"toString",o,{unsafe:!0})},4916:function(e,t,n){"use strict";var i=n(2109),r=n(2261);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},9714:function(e,t,n){"use strict";var i=n(1320),r=n(9670),o=n(7293),s=n(7066),a="toString",l=RegExp.prototype,c=l.toString,u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=a;(u||d)&&i(RegExp.prototype,a,(function(){var e=r(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in l)?s.call(e):n)}),{unsafe:!0})},8783:function(e,t,n){"use strict";var i=n(8710).charAt,r=n(9909),o=n(654),s="String Iterator",a=r.set,l=r.getterFor(s);o(String,"String",(function(e){a(this,{type:s,string:String(e),index:0})}),(function(){var e,t=l(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},4723:function(e,t,n){"use strict";var i=n(7007),r=n(9670),o=n(7466),s=n(4488),a=n(1530),l=n(7651);i("match",1,(function(e,t,n){return[function(t){var n=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var s=r(e),c=String(this);if(!s.global)return l(s,c);var u=s.unicode;s.lastIndex=0;for(var d,h=[],f=0;null!==(d=l(s,c));){var p=String(d[0]);h[f]=p,""===p&&(s.lastIndex=a(c,o(s.lastIndex),u)),f++}return 0===f?null:h}]}))},5306:function(e,t,n){"use strict";var i=n(7007),r=n(9670),o=n(7466),s=n(9958),a=n(4488),l=n(1530),c=n(647),u=n(7651),d=Math.max,h=Math.min;i("replace",2,(function(e,t,n,i){var f=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=i.REPLACE_KEEPS_$0,m=f?"$":"$0";return[function(n,i){var r=a(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,i):t.call(String(r),n,i)},function(e,i){if(!f&&p||"string"==typeof i&&-1===i.indexOf(m)){var a=n(t,e,this,i);if(a.done)return a.value}var g=r(e),v=String(this),y="function"==typeof i;y||(i=String(i));var _=g.global;if(_){var b=g.unicode;g.lastIndex=0}for(var x=[];;){var w=u(g,v);if(null===w)break;if(x.push(w),!_)break;""===String(w[0])&&(g.lastIndex=l(v,o(g.lastIndex),b))}for(var k,C="",S=0,T=0;T<x.length;T++){w=x[T];for(var E=String(w[0]),A=d(h(s(w.index),v.length),0),$=[],D=1;D<w.length;D++)$.push(void 0===(k=w[D])?k:String(k));var O=w.groups;if(y){var N=[E].concat($,A,v);void 0!==O&&N.push(O);var M=String(i.apply(void 0,N))}else M=c(E,v,A,$,O,i);A>=S&&(C+=v.slice(S,A)+M,S=A+E.length)}return C+v.slice(S)}]}))},3123:function(e,t,n){"use strict";var i=n(7007),r=n(7850),o=n(9670),s=n(4488),a=n(6707),l=n(1530),c=n(7466),u=n(7651),d=n(2261),h=n(7293),f=[].push,p=Math.min,m=4294967295,g=!h((function(){return!RegExp(m,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(s(this)),o=void 0===n?m:n>>>0;if(0===o)return[];if(void 0===e)return[i];if(!r(e))return t.call(i,e,o);for(var a,l,c,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,g=new RegExp(e.source,h+"g");(a=d.call(g,i))&&!((l=g.lastIndex)>p&&(u.push(i.slice(p,a.index)),a.length>1&&a.index<i.length&&f.apply(u,a.slice(1)),c=a[0].length,p=l,u.length>=o));)g.lastIndex===a.index&&g.lastIndex++;return p===i.length?!c&&g.test("")||u.push(""):u.push(i.slice(p)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=s(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(String(r),t,n)},function(e,r){var s=n(i,e,this,r,i!==t);if(s.done)return s.value;var d=o(e),h=String(this),f=a(d,RegExp),v=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),_=new f(g?d:"^(?:"+d.source+")",y),b=void 0===r?m:r>>>0;if(0===b)return[];if(0===h.length)return null===u(_,h)?[h]:[];for(var x=0,w=0,k=[];w<h.length;){_.lastIndex=g?w:0;var C,S=u(_,g?h:h.slice(w));if(null===S||(C=p(c(_.lastIndex+(g?0:w)),h.length))===x)w=l(h,w,v);else{if(k.push(h.slice(x,w)),k.length===b)return k;for(var T=1;T<=S.length-1;T++)if(k.push(S[T]),k.length===b)return k;w=x=C}}return k.push(h.slice(x)),k}]}),!g)},3210:function(e,t,n){"use strict";var i=n(2109),r=n(3111).trim;i({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return r(this)}})},2990:function(e,t,n){"use strict";var i=n(260),r=n(1048),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return r.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var i=n(260),r=n(2092).every,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("every",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:function(e,t,n){"use strict";var i=n(260),r=n(1285),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("fill",(function(e){return r.apply(o(this),arguments)}))},5035:function(e,t,n){"use strict";var i=n(260),r=n(2092).filter,o=n(3074),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("filter",(function(e){var t=r(s(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},7174:function(e,t,n){"use strict";var i=n(260),r=n(2092).findIndex,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("findIndex",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var i=n(260),r=n(2092).find,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("find",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},2846:function(e,t,n){"use strict";var i=n(260),r=n(2092).forEach,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("forEach",(function(e){r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},4731:function(e,t,n){"use strict";var i=n(260),r=n(1318).includes,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("includes",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var i=n(260),r=n(1318).indexOf,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("indexOf",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},6319:function(e,t,n){"use strict";var i=n(7854),r=n(260),o=n(6992),s=n(5112)("iterator"),a=i.Uint8Array,l=o.values,c=o.keys,u=o.entries,d=r.aTypedArray,h=r.exportTypedArrayMethod,f=a&&a.prototype[s],p=!!f&&("values"==f.name||null==f.name),m=function(){return l.call(d(this))};h("entries",(function(){return u.call(d(this))})),h("keys",(function(){return c.call(d(this))})),h("values",m,!p),h(s,m,!p)},8867:function(e,t,n){"use strict";var i=n(260),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=[].join;o("join",(function(e){return s.apply(r(this),arguments)}))},7789:function(e,t,n){"use strict";var i=n(260),r=n(6583),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("lastIndexOf",(function(e){return r.apply(o(this),arguments)}))},3739:function(e,t,n){"use strict";var i=n(260),r=n(2092).map,o=n(6707),s=i.aTypedArray,a=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("map",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(a(o(e,e.constructor)))(t)}))}))},4483:function(e,t,n){"use strict";var i=n(260),r=n(3671).right,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduceRight",(function(e){return r(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},9368:function(e,t,n){"use strict";var i=n(260),r=n(3671).left,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduce",(function(e){return r(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2056:function(e,t,n){"use strict";var i=n(260),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){for(var e,t=this,n=r(t).length,i=s(n/2),o=0;o<i;)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},3462:function(e,t,n){"use strict";var i=n(260),r=n(7466),o=n(4590),s=n(7908),a=n(7293),l=i.aTypedArray;(0,i.exportTypedArrayMethod)("set",(function(e){l(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=s(e),a=r(i.length),c=0;if(a+t>n)throw RangeError("Wrong length");for(;c<a;)this[t+c]=i[c++]}),a((function(){new Int8Array(1).set({})})))},678:function(e,t,n){"use strict";var i=n(260),r=n(6707),o=n(7293),s=i.aTypedArray,a=i.aTypedArrayConstructor,l=i.exportTypedArrayMethod,c=[].slice;l("slice",(function(e,t){for(var n=c.call(s(this),e,t),i=r(this,this.constructor),o=0,l=n.length,u=new(a(i))(l);l>o;)u[o]=n[o++];return u}),o((function(){new Int8Array(1).slice()})))},7462:function(e,t,n){"use strict";var i=n(260),r=n(2092).some,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("some",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:function(e,t,n){"use strict";var i=n(260),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=[].sort;o("sort",(function(e){return s.call(r(this),e)}))},5021:function(e,t,n){"use strict";var i=n(260),r=n(7466),o=n(1400),s=n(6707),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("subarray",(function(e,t){var n=a(this),i=n.length,l=o(e,i);return new(s(n,n.constructor))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,r((void 0===t?i:o(t,i))-l))}))},2974:function(e,t,n){"use strict";var i=n(7854),r=n(260),o=n(7293),s=i.Int8Array,a=r.aTypedArray,l=r.exportTypedArrayMethod,c=[].toLocaleString,u=[].slice,d=!!s&&o((function(){c.call(new s(1))}));l("toLocaleString",(function(){return c.apply(d?u.call(a(this)):a(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!o((function(){s.prototype.toLocaleString.call([1,2])})))},5016:function(e,t,n){"use strict";var i=n(260).exportTypedArrayMethod,r=n(7293),o=n(7854).Uint8Array,s=o&&o.prototype||{},a=[].toString,l=[].join;r((function(){a.call({})}))&&(a=function(){return l.call(this)});var c=s.toString!=a;i("toString",a,c)},2472:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},4747:function(e,t,n){var i=n(7854),r=n(8324),o=n(8533),s=n(8880);for(var a in r){var l=i[a],c=l&&l.prototype;if(c&&c.forEach!==o)try{s(c,"forEach",o)}catch(e){c.forEach=o}}},3948:function(e,t,n){var i=n(7854),r=n(8324),o=n(6992),s=n(8880),a=n(5112),l=a("iterator"),c=a("toStringTag"),u=o.values;for(var d in r){var h=i[d],f=h&&h.prototype;if(f){if(f[l]!==u)try{s(f,l,u)}catch(e){f[l]=u}if(f[c]||s(f,c,d),r[d])for(var p in o)if(f[p]!==o[p])try{s(f,p,o[p])}catch(e){f[p]=o[p]}}}},1637:function(e,t,n){"use strict";n(6992);var i=n(2109),r=n(5005),o=n(590),s=n(1320),a=n(2248),l=n(8003),c=n(4994),u=n(9909),d=n(5787),h=n(6656),f=n(9974),p=n(648),m=n(9670),g=n(111),v=n(30),y=n(9114),_=n(8554),b=n(1246),x=n(5112),w=r("fetch"),k=r("Headers"),C=x("iterator"),S="URLSearchParams",T="URLSearchParamsIterator",E=u.set,A=u.getterFor(S),$=u.getterFor(T),D=/\+/g,O=Array(4),N=function(e){return O[e-1]||(O[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},M=function(e){try{return decodeURIComponent(e)}catch(t){return e}},P=function(e){var t=e.replace(D," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(N(n--),M);return t}},L=/[!'()~]|%20/g,j={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},I=function(e){return j[e]},R=function(e){return encodeURIComponent(e).replace(L,I)},F=function(e,t){if(t)for(var n,i,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),e.push({key:P(i.shift()),value:P(i.join("="))}))},z=function(e){this.entries.length=0,F(this.entries,e)},H=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=c((function(e,t){E(this,{type:T,iterator:_(A(e).entries),kind:t})}),"Iterator",(function(){var e=$(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),W=function(){d(this,W,S);var e,t,n,i,r,o,s,a,l,c=arguments.length>0?arguments[0]:void 0,u=this,f=[];if(E(u,{type:S,entries:f,updateURL:function(){},updateSearchParams:z}),void 0!==c)if(g(c))if("function"==typeof(e=b(c)))for(n=(t=e.call(c)).next;!(i=n.call(t)).done;){if((s=(o=(r=_(m(i.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");f.push({key:s.value+"",value:a.value+""})}else for(l in c)h(c,l)&&f.push({key:l,value:c[l]+""});else F(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},U=W.prototype;a(U,{append:function(e,t){H(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){H(arguments.length,1);for(var t=A(this),n=t.entries,i=e+"",r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){H(arguments.length,1);for(var t=A(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){H(arguments.length,1);for(var t=A(this).entries,n=e+"",i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){H(arguments.length,1);for(var t=A(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){H(arguments.length,1);for(var n,i=A(this),r=i.entries,o=!1,s=e+"",a=t+"",l=0;l<r.length;l++)(n=r[l]).key===s&&(o?r.splice(l--,1):(o=!0,n.value=a));o||r.push({key:s,value:a}),i.updateURL()},sort:function(){var e,t,n,i=A(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=A(this).entries,i=f(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),s(U,C,U.entries),s(U,"toString",(function(){for(var e,t=A(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(R(e.key)+"="+R(e.value));return n.join("&")}),{enumerable:!0}),l(W,S),i({global:!0,forced:!o},{URLSearchParams:W}),o||"function"!=typeof w||"function"!=typeof k||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,r=[e];return arguments.length>1&&(g(t=arguments[1])&&(n=t.body,p(n)===S&&((i=t.headers?new k(t.headers):new k).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:y(0,String(n)),headers:y(0,i)}))),r.push(t)),w.apply(this,r)}}),e.exports={URLSearchParams:W,getState:A}},285:function(e,t,n){"use strict";n(8783);var i,r=n(2109),o=n(9781),s=n(590),a=n(7854),l=n(6048),c=n(1320),u=n(5787),d=n(6656),h=n(1574),f=n(8457),p=n(8710).codeAt,m=n(3197),g=n(8003),v=n(1637),y=n(9909),_=a.URL,b=v.URLSearchParams,x=v.getState,w=y.set,k=y.getterFor("URL"),C=Math.floor,S=Math.pow,T="Invalid scheme",E="Invalid host",A="Invalid port",$=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,O=/\d/,N=/^(0x|0X)/,M=/^[0-7]+$/,P=/^\d+$/,L=/^[\dA-Fa-f]+$/,j=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,I=/[\u0000\t\u000A\u000D #/:?@[\\]]/,R=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\t\u000A\u000D]/g,z=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return E;if(!(n=B(t.slice(1,-1))))return E;e.host=n}else if(X(e)){if(t=m(t),j.test(t))return E;if(null===(n=H(t)))return E;e.host=n}else{if(I.test(t))return E;for(n="",i=f(t),r=0;r<i.length;r++)n+=K(i[r],U);e.host=n}},H=function(e){var t,n,i,r,o,s,a,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=l[i]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=N.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?P:8==o?M:L).test(r))return e;s=parseInt(r,o)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=S(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*S(256,3-i);return a},B=function(e){var t,n,i,r,o,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&L.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,c>6)return;for(i=0;h();){if(r=null,i>0){if(!("."==h()&&i<4))return;d++}if(!O.test(h()))return;for(;O.test(h());){if(o=parseInt(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;d++}l[c]=256*l[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(s=c-u,c=7;0!=c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!=c)return;return l},W=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=C(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},U={},q=h({},U,{" ":1,'"':1,"<":1,">":1,"`":1}),V=h({},q,{"#":1,"?":1,"{":1,"}":1}),G=h({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),K=function(e,t){var n=p(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return d(Y,e.scheme)},J=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Z=function(e,t){var n;return 2==e.length&&$.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ee=function(e){var t;return e.length>1&&Z(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},te=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Z(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},ie={},re={},oe={},se={},ae={},le={},ce={},ue={},de={},he={},fe={},pe={},me={},ge={},ve={},ye={},_e={},be={},xe={},we={},ke={},Ce=function(e,t,n,r){var o,s,a,l,c,u=n||ie,h=0,p="",m=!1,g=!1,v=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(R,"")),t=t.replace(F,""),o=f(t);h<=o.length;){switch(s=o[h],u){case ie:if(!s||!$.test(s)){if(n)return T;u=oe;continue}p+=s.toLowerCase(),u=re;break;case re:if(s&&(D.test(s)||"+"==s||"-"==s||"."==s))p+=s.toLowerCase();else{if(":"!=s){if(n)return T;p="",u=oe,h=0;continue}if(n&&(X(e)!=d(Y,p)||"file"==p&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(X(e)&&Y[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?u=ge:X(e)&&r&&r.scheme==e.scheme?u=se:X(e)?u=ue:"/"==o[h+1]?(u=ae,h++):(e.cannotBeABaseURL=!0,e.path.push(""),u=xe)}break;case oe:if(!r||r.cannotBeABaseURL&&"#"!=s)return T;if(r.cannotBeABaseURL&&"#"==s){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,u=ke;break}u="file"==r.scheme?ge:le;continue;case se:if("/"!=s||"/"!=o[h+1]){u=le;continue}u=de,h++;break;case ae:if("/"==s){u=he;break}u=be;continue;case le:if(e.scheme=r.scheme,s==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==s||"\\"==s&&X(e))u=ce;else if("?"==s)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",u=we;else{if("#"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),u=be;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=ke}break;case ce:if(!X(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,u=be;continue}u=he}else u=de;break;case ue:if(u=de,"/"!=s||"/"!=p.charAt(h+1))continue;h++;break;case de:if("/"!=s&&"\\"!=s){u=he;continue}break;case he:if("@"==s){m&&(p="%40"+p),m=!0,a=f(p);for(var y=0;y<a.length;y++){var _=a[y];if(":"!=_||v){var b=K(_,G);v?e.password+=b:e.username+=b}else v=!0}p=""}else if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)){if(m&&""==p)return"Invalid authority";h-=f(p).length+1,p="",u=fe}else p+=s;break;case fe:case pe:if(n&&"file"==e.scheme){u=ye;continue}if(":"!=s||g){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)){if(X(e)&&""==p)return E;if(n&&""==p&&(J(e)||null!==e.port))return;if(l=z(e,p))return l;if(p="",u=_e,n)return;continue}"["==s?g=!0:"]"==s&&(g=!1),p+=s}else{if(""==p)return E;if(l=z(e,p))return l;if(p="",u=me,n==pe)return}break;case me:if(!O.test(s)){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&X(e)||n){if(""!=p){var x=parseInt(p,10);if(x>65535)return A;e.port=X(e)&&x===Y[e.scheme]?null:x,p=""}if(n)return;u=_e;continue}return A}p+=s;break;case ge:if(e.scheme="file","/"==s||"\\"==s)u=ve;else{if(!r||"file"!=r.scheme){u=be;continue}if(s==i)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==s)e.host=r.host,e.path=r.path.slice(),e.query="",u=we;else{if("#"!=s){ee(o.slice(h).join(""))||(e.host=r.host,e.path=r.path.slice(),te(e)),u=be;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=ke}}break;case ve:if("/"==s||"\\"==s){u=ye;break}r&&"file"==r.scheme&&!ee(o.slice(h).join(""))&&(Z(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),u=be;continue;case ye:if(s==i||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&Z(p))u=be;else if(""==p){if(e.host="",n)return;u=_e}else{if(l=z(e,p))return l;if("localhost"==e.host&&(e.host=""),n)return;p="",u=_e}continue}p+=s;break;case _e:if(X(e)){if(u=be,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=i&&(u=be,"/"!=s))continue}else e.fragment="",u=ke;else e.query="",u=we;break;case be:if(s==i||"/"==s||"\\"==s&&X(e)||!n&&("?"==s||"#"==s)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(te(e),"/"==s||"\\"==s&&X(e)||e.path.push("")):ne(p)?"/"==s||"\\"==s&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Z(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(s==i||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",u=we):"#"==s&&(e.fragment="",u=ke)}else p+=K(s,V);break;case xe:"?"==s?(e.query="",u=we):"#"==s?(e.fragment="",u=ke):s!=i&&(e.path[0]+=K(s,U));break;case we:n||"#"!=s?s!=i&&("'"==s&&X(e)?e.query+="%27":e.query+="#"==s?"%23":K(s,U)):(e.fragment="",u=ke);break;case ke:s!=i&&(e.fragment+=K(s,q))}h++}},Se=function(e){var t,n,i=u(this,Se,"URL"),r=arguments.length>1?arguments[1]:void 0,s=String(e),a=w(i,{type:"URL"});if(void 0!==r)if(r instanceof Se)t=k(r);else if(n=Ce(t={},String(r)))throw TypeError(n);if(n=Ce(a,s,null,t))throw TypeError(n);var l=a.searchParams=new b,c=x(l);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(l)||null},o||(i.href=Ee.call(i),i.origin=Ae.call(i),i.protocol=$e.call(i),i.username=De.call(i),i.password=Oe.call(i),i.host=Ne.call(i),i.hostname=Me.call(i),i.port=Pe.call(i),i.pathname=Le.call(i),i.search=je.call(i),i.searchParams=Ie.call(i),i.hash=Re.call(i))},Te=Se.prototype,Ee=function(){var e=k(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,s=e.path,a=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",J(e)&&(c+=n+(i?":"+i:"")+"@"),c+=W(r),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},Ae=function(){var e=k(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&X(e)?t+"://"+W(e.host)+(null!==n?":"+n:""):"null"},$e=function(){return k(this).scheme+":"},De=function(){return k(this).username},Oe=function(){return k(this).password},Ne=function(){var e=k(this),t=e.host,n=e.port;return null===t?"":null===n?W(t):W(t)+":"+n},Me=function(){var e=k(this).host;return null===e?"":W(e)},Pe=function(){var e=k(this).port;return null===e?"":String(e)},Le=function(){var e=k(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},je=function(){var e=k(this).query;return e?"?"+e:""},Ie=function(){return k(this).searchParams},Re=function(){var e=k(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&l(Te,{href:Fe(Ee,(function(e){var t=k(this),n=String(e),i=Ce(t,n);if(i)throw TypeError(i);x(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Ae),protocol:Fe($e,(function(e){var t=k(this);Ce(t,String(e)+":",ie)})),username:Fe(De,(function(e){var t=k(this),n=f(String(e));if(!Q(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=K(n[i],G)}})),password:Fe(Oe,(function(e){var t=k(this),n=f(String(e));if(!Q(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=K(n[i],G)}})),host:Fe(Ne,(function(e){var t=k(this);t.cannotBeABaseURL||Ce(t,String(e),fe)})),hostname:Fe(Me,(function(e){var t=k(this);t.cannotBeABaseURL||Ce(t,String(e),pe)})),port:Fe(Pe,(function(e){var t=k(this);Q(t)||(""==(e=String(e))?t.port=null:Ce(t,e,me))})),pathname:Fe(Le,(function(e){var t=k(this);t.cannotBeABaseURL||(t.path=[],Ce(t,e+"",_e))})),search:Fe(je,(function(e){var t=k(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ce(t,e,we)),x(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(Ie),hash:Fe(Re,(function(e){var t=k(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ce(t,e,ke)):t.fragment=null}))}),c(Te,"toJSON",(function(){return Ee.call(this)}),{enumerable:!0}),c(Te,"toString",(function(){return Ee.call(this)}),{enumerable:!0}),_){var ze=_.createObjectURL,He=_.revokeObjectURL;ze&&c(Se,"createObjectURL",(function(e){return ze.apply(_,arguments)})),He&&c(Se,"revokeObjectURL",(function(e){return He.apply(_,arguments)}))}g(Se,"URL"),r({global:!0,forced:!s,sham:!o},{URL:Se})}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(i),n.d(i,{Dropzone:function(){return b},default:function(){return S}}),n(2222),n(7327),n(2772),n(6992),n(1249),n(7042),n(561),n(8264),n(8309),n(489),n(1539),n(4916),n(9714),n(8783),n(4723),n(5306),n(3123),n(3210),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(4747),n(3948),n(285);var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,o;return n=t,(i=[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(t){this._callbacks=this._callbacks||{};for(var n=this._callbacks[t],i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(n){var s,a=e(n,!0);try{for(a.s();!(s=a.n()).done;){var l=s.value;l.apply(this,r)}}catch(e){a.e(e)}finally{a.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+t,{args:r})),this}},{key:"makeEvent",value:function(e,t){var n={bubbles:!0,cancelable:!0,detail:t};if("function"==typeof window.CustomEvent)return new CustomEvent(e,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++){var r=n[i];if(r===t){n.splice(i,1);break}}return this}}])&&r(n.prototype,i),o&&r(n,o),t}();function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e;this.element.className="".concat(this.element.className," dz-browser-not-supported");var t,n=s(this.element.getElementsByTagName("div"),!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )dz-message($| )/.test(i.className)){e=i,i.className="dz-message";break}}}catch(e){n.e(e)}finally{n.f()}e||(e=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var r=e.getElementsByTagName("span")[0];return r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;null==t&&null==n?(t=r.srcWidth,n=r.srcHeight):null==t?t=n*o:null==n&&(n=t/o);var s=(t=Math.min(t,r.srcWidth))/(n=Math.min(n,r.srcHeight));if(r.srcWidth>t||r.srcHeight>n)if("crop"===i)o>s?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*s):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/s);else{if("contain"!==i)throw new Error("Unknown resizeMethod '".concat(i,"'"));o>s?n=t/o:t=n*o}return r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=n,r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){e.previewElement=b.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var n,i=s(e.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.textContent=e.name}}catch(e){i.e(e)}finally{i.f()}var o,a=s(e.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(a.s();!(o=a.n()).done;)(r=o.value).innerHTML=this.filesize(e.size)}catch(e){a.e(e)}finally{a.f()}this.options.addRemoveLinks&&(e._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));var l,c=function(n){return n.preventDefault(),n.stopPropagation(),e.status===b.UPLOADING?b.confirm(t.options.dictCancelUploadConfirmation,(function(){return t.removeFile(e)})):t.options.dictRemoveFileConfirmation?b.confirm(t.options.dictRemoveFileConfirmation,(function(){return t.removeFile(e)})):t.removeFile(e)},u=s(e.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(u.s();!(l=u.n()).done;)l.value.addEventListener("click",c)}catch(e){u.e(e)}finally{u.f()}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var n,i=s(e.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.alt=e.name,r.src=t}}catch(e){i.e(e)}finally{i.f()}return setTimeout((function(){return e.previewElement.classList.add("dz-image-preview")}),1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);var n,i=s(e.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(i.s();!(n=i.n()).done;)n.value.textContent=t}catch(e){i.e(e)}finally{i.f()}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement){var i,r=s(e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(r.s();!(i=r.n()).done;){var o=i.value;"PROGRESS"===o.nodeName?o.value=t:o.style.width="".concat(t,"%")}}catch(e){r.e(e)}finally{r.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,e);var t=g(n);function n(e,i){var r,o,s;if(h(this,n),(r=t.call(this)).element=e,r.version=n.version,r.clickableElements=[],r.listeners=[],r.files=[],"string"==typeof r.element&&(r.element=document.querySelector(r.element)),!r.element||null==r.element.nodeType)throw new Error("Invalid dropzone element.");if(r.element.dropzone)throw new Error("Dropzone already attached.");n.instances.push(y(r)),r.element.dropzone=y(r);var a=null!=(s=n.optionsForElement(r.element))?s:{};if(r.options=n.extend({},l,a,null!=i?i:{}),r.options.previewTemplate=r.options.previewTemplate.replace(/\n*/g,""),r.options.forceFallback||!n.isBrowserSupported())return v(r,r.options.fallback.call(y(r)));if(null==r.options.url&&(r.options.url=r.element.getAttribute("action")),!r.options.url)throw new Error("No URL provided.");if(r.options.acceptedFiles&&r.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(r.options.uploadMultiple&&r.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return r.options.acceptedMimeTypes&&(r.options.acceptedFiles=r.options.acceptedMimeTypes,delete r.options.acceptedMimeTypes),null!=r.options.renameFilename&&(r.options.renameFile=function(e){return r.options.renameFilename.call(y(r),e.name,e)}),"string"==typeof r.options.method&&(r.options.method=r.options.method.toUpperCase()),(o=r.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),!1!==r.options.previewsContainer&&(r.options.previewsContainer?r.previewsContainer=n.getElement(r.options.previewsContainer,"previewsContainer"):r.previewsContainer=r.element),r.options.clickable&&(!0===r.options.clickable?r.clickableElements=[r.element]:r.clickableElements=n.getElements(r.options.clickable,"clickable")),r.init(),r}return p(n,[{key:"getAcceptedFiles",value:function(){return this.files.filter((function(e){return e.accepted})).map((function(e){return e}))}},{key:"getRejectedFiles",value:function(){return this.files.filter((function(e){return!e.accepted})).map((function(e){return e}))}},{key:"getFilesWithStatus",value:function(e){return this.files.filter((function(t){return t.status===e})).map((function(e){return e}))}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(n.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(n.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(n.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter((function(e){return e.status===n.UPLOADING||e.status===n.QUEUED})).map((function(e){return e}))}},{key:"init",value:function(){var e=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function t(){e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.setAttribute("tabindex","-1"),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",n.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",(function(){var n=e.hiddenFileInput.files;if(n.length){var i,r=u(n,!0);try{for(r.s();!(i=r.n()).done;){var o=i.value;e.addFile(o)}}catch(e){r.e(e)}finally{r.f()}}e.emit("addedfiles",n),t()}))}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var t,i=u(this.events,!0);try{for(i.s();!(t=i.n()).done;){var r=t.value;this.on(r,this.options[r])}}catch(e){i.e(e)}finally{i.f()}this.on("uploadprogress",(function(){return e.updateTotalUploadProgress()})),this.on("removedfile",(function(){return e.updateTotalUploadProgress()})),this.on("canceled",(function(t){return e.emit("complete",t)})),this.on("complete",(function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout((function(){return e.emit("queuecomplete")}),0)}));var o=function(e){if(function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return o(t),e.emit("dragenter",t)},dragover:function(t){var n;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",o(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return o(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach((function(t){return e.listeners.push({element:t,events:{click:function(i){return(t!==e.element||i.target===e.element||n.elementInside(i.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,n=0;if(this.getActiveFiles().length){var i,r=u(this.getActiveFiles(),!0);try{for(r.s();!(i=r.n()).done;){var o=i.value;t+=o.upload.bytesSent,n+=o.upload.total}}catch(e){r.e(e)}finally{r.f()}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t;if(e=this.getExistingFallback())return e;var i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+="<p>".concat(this.options.dictFallbackText,"</p>")),i+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var r=n.createElement(i);return"FORM"!==this.element.tagName?(t=n.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(r):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:r}},{key:"getExistingFallback",value:function(){for(var e=function(e){var t,n=u(e,!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )fallback($| )/.test(i.className))return i}}catch(e){n.e(e)}finally{n.f()}},t=0,n=["div","form"];t<n.length;t++){var i,r=n[t];if(i=e(this.element.getElementsByTagName(r)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map((function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.addEventListener(n,i,!1))}return t}()}))}},{key:"removeEventListeners",value:function(){return this.listeners.map((function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.removeEventListener(n,i,!1))}return t}()}))}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach((function(e){return e.classList.remove("dz-clickable")})),this.removeEventListeners(),this.disabled=!0,this.files.map((function(t){return e.cancelUpload(t)}))}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach((function(e){return e.classList.add("dz-clickable")})),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(e>0){for(var i=["tb","gb","mb","kb","b"],r=0;r<i.length;r++){var o=i[r];if(e>=Math.pow(this.options.filesizeBase,4-r)/10){t=e/Math.pow(this.options.filesizeBase,4-r),n=o;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=(t=null!=e?e.clipboardData:void 0,n=function(e){return e.items},null!=t?n(t):void 0)){var t,n;this.emit("paste",e);var i=e.clipboardData.items;return i.length?this._addFilesFromItems(i):void 0}}},{key:"handleFiles",value:function(e){var t,n=u(e,!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.addFile(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){var n,i=[],r=u(e,!0);try{for(r.s();!(n=r.n()).done;){var o,s=n.value;null!=s.webkitGetAsEntry&&(o=s.webkitGetAsEntry())?o.isFile?i.push(t.addFile(s.getAsFile())):o.isDirectory?i.push(t._addFilesFromDirectory(o,o.name)):i.push(void 0):null==s.getAsFile||null!=s.kind&&"file"!==s.kind?i.push(void 0):i.push(t.addFile(s.getAsFile()))}}catch(e){r.e(e)}finally{r.f()}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var n=this,i=e.createReader(),r=function(e){return t=console,n="log",i=function(t){return t.log(e)},null!=t&&"function"==typeof t[n]?i(t,n):void 0;var t,n,i};return function e(){return i.readEntries((function(i){if(i.length>0){var r,o=u(i,!0);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.isFile?s.file((function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(t,"/").concat(e.name),n.addFile(e)})):s.isDirectory&&n._addFilesFromDirectory(s,"".concat(t,"/").concat(s.name))}}catch(e){o.e(e)}finally{o.f()}e()}return null}),r)}()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;e.upload={uuid:n.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(function(n){n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}))}},{key:"enqueueFiles",value:function(e){var t,n=u(e,!0);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.enqueueFile(i)}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==n.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=n.QUEUED,this.options.autoProcessQueue)return setTimeout((function(){return t.processQueue()}),0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout((function(){return t._processThumbnailQueue()}),0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()}))}}},{key:"removeFile",value:function(e){if(e.status===n.UPLOADING&&this.cancelUpload(e),this.files=x(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t,i=u(this.files.slice(),!0);try{for(i.s();!(t=i.n()).done;){var r=t.value;(r.status!==n.UPLOADING||e)&&this.removeFile(r)}}catch(e){i.e(e)}finally{i.f()}return null}},{key:"resizeImage",value:function(e,t,i,r,o){var s=this;return this.createThumbnail(e,t,i,r,!0,(function(t,i){if(null==i)return o(e);var r=s.options.resizeMimeType;null==r&&(r=e.type);var a=i.toDataURL(r,s.options.resizeQuality);return"image/jpeg"!==r&&"image/jpg"!==r||(a=C.restore(e.dataURL,a)),o(n.dataURItoBlob(a))}))}},{key:"createThumbnail",value:function(e,t,n,i,r,o){var s=this,a=new FileReader;a.onload=function(){e.dataURL=a.result,"image/svg+xml"!==e.type?s.createThumbnailFromUrl(e,t,n,i,r,o):null!=o&&o(a.result)},a.readAsDataURL(e)}},{key:"displayExistingFile",value:function(e,t,n,i){var r=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",e),this.emit("complete",e),o){var s=function(t){r.emit("thumbnail",e,t),n&&n()};e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,s,i)}else this.emit("thumbnail",e,t),n&&n()}},{key:"createThumbnailFromUrl",value:function(e,t,n,i,r,o,s){var a=this,l=document.createElement("img");return s&&(l.crossOrigin=s),r="from-image"!=getComputedStyle(document.body).imageOrientation&&r,l.onload=function(){var s=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&r&&(s=function(e){return EXIF.getData(l,(function(){return e(EXIF.getTag(this,"Orientation"))}))}),s((function(r){e.width=l.width,e.height=l.height;var s=a.options.resize.call(a,e,t,n,i),c=document.createElement("canvas"),u=c.getContext("2d");switch(c.width=s.trgWidth,c.height=s.trgHeight,r>4&&(c.width=s.trgHeight,c.height=s.trgWidth),r){case 2:u.translate(c.width,0),u.scale(-1,1);break;case 3:u.translate(c.width,c.height),u.rotate(Math.PI);break;case 4:u.translate(0,c.height),u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI),u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI),u.translate(0,-c.width);break;case 7:u.rotate(.5*Math.PI),u.translate(c.height,-c.width),u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI),u.translate(-c.height,0)}k(u,l,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);var d=c.toDataURL("image/png");if(null!=o)return o(d,c)}))},null!=o&&(l.onerror=o),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(t>=e)){var i=this.getQueuedFiles();if(i.length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t,i=u(e,!0);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.processing=!0,r.status=n.UPLOADING,this.emit("processing",r)}}catch(e){i.e(e)}finally{i.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter((function(t){return t.xhr===e})).map((function(e){return e}))}},{key:"cancelUpload",value:function(e){if(e.status===n.UPLOADING){var t,i=this._getFilesWithXhr(e.xhr),r=u(i,!0);try{for(r.s();!(t=r.n()).done;)t.value.status=n.CANCELED}catch(e){r.e(e)}finally{r.f()}void 0!==e.xhr&&e.xhr.abort();var o,s=u(i,!0);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.emit("canceled",a)}}catch(e){s.e(e)}finally{s.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else e.status!==n.ADDED&&e.status!==n.QUEUED||(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,(function(i){if(t.options.chunking){var r=i[0];e[0].upload.chunked=t.options.chunking&&(t.options.forceChunking||r.size>t.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(r.size/t.options.chunkSize)}if(e[0].upload.chunked){var o=e[0],s=i[0];o.upload.chunks=[];var a=function(){for(var i=0;void 0!==o.upload.chunks[i];)i++;if(!(i>=o.upload.totalChunkCount)){var r=i*t.options.chunkSize,a=Math.min(r+t.options.chunkSize,s.size),l={name:t._getParamName(0),data:s.webkitSlice?s.webkitSlice(r,a):s.slice(r,a),filename:o.upload.filename,chunkIndex:i};o.upload.chunks[i]={file:o,index:i,dataBlock:l,status:n.UPLOADING,progress:0,retries:0},t._uploadData(e,[l])}};if(o.upload.finishedChunkUpload=function(i,r){var s=!0;i.status=n.SUCCESS,i.dataBlock=null,i.xhr=null;for(var l=0;l<o.upload.totalChunkCount;l++){if(void 0===o.upload.chunks[l])return a();o.upload.chunks[l].status!==n.SUCCESS&&(s=!1)}s&&t.options.chunksUploaded(o,(function(){t._finished(e,r,null)}))},t.options.parallelChunkUploads)for(var l=0;l<o.upload.totalChunkCount;l++)a();else a()}else{for(var c=[],u=0;u<e.length;u++)c[u]={name:t._getParamName(u),data:i[u],filename:e[u].upload.filename};t._uploadData(e,c)}}))}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(e,t){var i,r=this,o=new XMLHttpRequest,s=u(e,!0);try{for(s.s();!(i=s.n()).done;)i.value.xhr=o}catch(e){s.e(e)}finally{s.f()}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=o);var a=this.resolveOption(this.options.method,e),l=this.resolveOption(this.options.url,e);o.open(a,l,!0),this.resolveOption(this.options.timeout,e)&&(o.timeout=this.resolveOption(this.options.timeout,e)),o.withCredentials=!!this.options.withCredentials,o.onload=function(t){r._finishedUploading(e,o,t)},o.ontimeout=function(){r._handleUploadError(e,o,"Request timedout after ".concat(r.options.timeout/1e3," seconds"))},o.onerror=function(){r._handleUploadError(e,o)},(null!=o.upload?o.upload:o).onprogress=function(t){return r._updateFilesUploadProgress(e,o,t)};var c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var d in this.options.headers&&n.extend(c,this.options.headers),c){var h=c[d];h&&o.setRequestHeader(d,h)}var f=new FormData;if(this.options.params){var p=this.options.params;for(var m in"function"==typeof p&&(p=p.call(this,e,o,e[0].upload.chunked?this._getChunk(e[0],o):null)),p){var g=p[m];if(Array.isArray(g))for(var v=0;v<g.length;v++)f.append(m,g[v]);else f.append(m,g)}}var y,_=u(e,!0);try{for(_.s();!(y=_.n()).done;){var b=y.value;this.emit("sending",b,o,f)}}catch(e){_.e(e)}finally{_.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",e,o,f),this._addFormElementData(f);for(var x=0;x<t.length;x++){var w=t[x];f.append(w.name,w.data,w.filename)}this.submitRequest(o,f,e)}},{key:"_transformFiles",value:function(e,t){for(var n=this,i=[],r=0,o=function(o){n.options.transformFile.call(n,e[o],(function(n){i[o]=n,++r===e.length&&t(i)}))},s=0;s<e.length;s++)o(s)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t,n=u(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.getAttribute("name"),o=i.getAttribute("type");if(o&&(o=o.toLowerCase()),null!=r)if("SELECT"===i.tagName&&i.hasAttribute("multiple")){var s,a=u(i.options,!0);try{for(a.s();!(s=a.n()).done;){var l=s.value;l.selected&&e.append(r,l.value)}}catch(e){a.e(e)}finally{a.f()}}else(!o||"checkbox"!==o&&"radio"!==o||i.checked)&&e.append(r,i.value)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){if(e[0].upload.chunked){var i=e[0],r=this._getChunk(i,t);n?(r.progress=100*n.loaded/n.total,r.total=n.total,r.bytesSent=n.loaded):(r.progress=100,r.bytesSent=r.total),i.upload.progress=0,i.upload.total=0,i.upload.bytesSent=0;for(var o=0;o<i.upload.totalChunkCount;o++)i.upload.chunks[o]&&void 0!==i.upload.chunks[o].progress&&(i.upload.progress+=i.upload.chunks[o].progress,i.upload.total+=i.upload.chunks[o].total,i.upload.bytesSent+=i.upload.chunks[o].bytesSent);i.upload.progress=i.upload.progress/i.upload.totalChunkCount,this.emit("uploadprogress",i,i.upload.progress,i.upload.bytesSent)}else{var s,a=u(e,!0);try{for(a.s();!(s=a.n()).done;){var l=s.value;l.upload.total&&l.upload.bytesSent&&l.upload.bytesSent==l.upload.total||(n?(l.upload.progress=100*n.loaded/n.total,l.upload.total=n.total,l.upload.bytesSent=n.loaded):(l.upload.progress=100,l.upload.bytesSent=l.upload.total),this.emit("uploadprogress",l,l.upload.progress,l.upload.bytesSent))}}catch(e){a.e(e)}finally{a.f()}}}},{key:"_finishedUploading",value:function(e,t,i){var r;if(e[0].status!==n.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(r=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{r=JSON.parse(r)}catch(e){i=e,r="Invalid JSON response from server."}this._updateFilesUploadProgress(e,t),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),r):this._finished(e,r,i):this._handleUploadError(e,t,r)}}},{key:"_handleUploadError",value:function(e,t,i){if(e[0].status!==n.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var r=this._getChunk(e[0],t);if(r.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[r.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,i||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t,n){1==e.readyState?e.send(t):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(e,t,i){var r,o=u(e,!0);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.status=n.SUCCESS,this.emit("success",s,t,i),this.emit("complete",s)}}catch(e){o.e(e)}finally{o.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,i){var r,o=u(e,!0);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.status=n.ERROR,this.emit("error",s,t,i),this.emit("complete",s)}}catch(e){o.e(e)}finally{o.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=o,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,o=n;r<o.length;r++){var s=o[r];for(var a in s){var l=s[a];e[a]=l}}return e}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}}]),n}(o);b.initClass(),b.version="5.9.2",b.options={},b.optionsForElement=function(e){return e.getAttribute("id")?b.options[w(e.getAttribute("id"))]:void 0},b.instances=[],b.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},b.autoDiscover=!0,b.discover=function(){var e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){var n,i=[],r=u(t,!0);try{for(r.s();!(n=r.n()).done;){var o=n.value;/(^| )dropzone($| )/.test(o.className)?i.push(e.push(o)):i.push(void 0)}}catch(e){r.e(e)}finally{r.f()}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t,n=[],i=u(e,!0);try{for(i.s();!(t=i.n()).done;){var r=t.value;!1!==b.optionsForElement(r)?n.push(new b(r)):n.push(void 0)}}catch(e){i.e(e)}finally{i.f()}return n}()},b.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],b.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==b.blacklistedBrowsers&&(b.blockedBrowsers=b.blacklistedBrowsers);var t,n=u(b.blockedBrowsers,!0);try{for(n.s();!(t=n.n()).done;)t.value.test(navigator.userAgent)&&(e=!1)}catch(e){n.e(e)}finally{n.f()}}else e=!1;else e=!1;return e},b.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0,s=t.length,a=0<=s;a?o<=s:o>=s;a?o++:o--)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})};var x=function(e,t){return e.filter((function(e){return e!==t})).map((function(e){return e}))},w=function(e){return e.replace(/[\-_](\w)/g,(function(e){return e.charAt(1).toUpperCase()}))};b.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},b.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},b.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},b.getElements=function(e,t){var n,i;if(e instanceof Array){i=[];try{var r,o=u(e,!0);try{for(o.s();!(r=o.n()).done;)n=r.value,i.push(this.getElement(n,t))}catch(e){o.e(e)}finally{o.f()}}catch(e){i=null}}else if("string"==typeof e){i=[];var s,a=u(document.querySelectorAll(e),!0);try{for(a.s();!(s=a.n()).done;)n=s.value,i.push(n)}catch(e){a.e(e)}finally{a.f()}}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},b.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},b.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var n,i=e.type,r=i.replace(/\/.*$/,""),o=u(t,!0);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("."===(s=s.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(s.toLowerCase(),e.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(r===s.replace(/\/.*$/,""))return!0}else if(i===s)return!0}}catch(e){o.e(e)}finally{o.f()}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each((function(){return new b(this,e)}))}),b.ADDED="added",b.QUEUED="queued",b.ACCEPTED=b.QUEUED,b.UPLOADING="uploading",b.PROCESSING=b.UPLOADING,b.CANCELED="canceled",b.ERROR="error",b.SUCCESS="success";var k=function(e,t,n,i,r,o,s,a,l,c){var u=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var r=i.getImageData(1,0,1,t).data,o=0,s=t,a=t;a>o;)0===r[4*(a-1)+3]?s=a:o=a,a=s+o>>1;var l=a/t;return 0===l?1:l}(t);return e.drawImage(t,n,i,r,o,s,a,l,c/u)},C=function(){function e(){h(this,e)}return p(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,r="",o=void 0,s=void 0,a=void 0,l="",c=0;o=(n=e[c++])>>2,s=(3&n)<<4|(i=e[c++])>>4,a=(15&i)<<2|(r=e[c++])>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),n=i=r="",o=s=a=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),r=this.exifManipulation(t,i);return"data:image/jpeg;base64,".concat(this.encode64(r))}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),s=i.slice(r),a=o;return a=(a=a.concat(t)).concat(s)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);n.push(r),t=i}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",r=void 0,o=void 0,s="",a=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(r=this.KEY_STR.indexOf(e.charAt(a++)))>>4,n=(15&r)<<4|(o=this.KEY_STR.indexOf(e.charAt(a++)))>>2,i=(3&o)<<6|(s=this.KEY_STR.indexOf(e.charAt(a++))),l.push(t),64!==o&&l.push(n),64!==s&&l.push(i),t=n=i="",r=o=s="",a<e.length;);return l}}]),e}();C.initClass(),b._autoDiscoverFunction=function(){if(b.autoDiscover)return b.discover()},function(e,t){var n=!1,i=!0,r=e.document,o=r.documentElement,s=r.addEventListener?"addEventListener":"attachEvent",a=r.addEventListener?"removeEventListener":"detachEvent",l=r.addEventListener?"":"on",c=function i(o){if("readystatechange"!==o.type||"complete"===r.readyState)return("load"===o.type?e:r)[a](l+o.type,i,!1),!n&&(n=!0)?t.call(e,o.type||o):void 0};if("complete"!==r.readyState){if(r.createEventObject&&o.doScroll){try{i=!e.frameElement}catch(e){}i&&function e(){try{o.doScroll("left")}catch(t){return void setTimeout(e,50)}return c("poll")}()}r[s](l+"DOMContentLoaded",c,!1),r[s](l+"readystatechange",c,!1),e[s](l+"load",c,!1)}}(window,b._autoDiscoverFunction),window.Dropzone=b;var S=b}(),i}()},e.exports=t()},4676:function(e,t,n){var i=n(7187).EventEmitter;function r(e){i.call(this),e=e||{},this.states=e.states||["default"],this.currentState=e.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var t=this;this.on("transition",(function(e){t.events.forEach((function(n){n.from===e.from&&n.to===e.to&&t.emit(n.event)}))}))}r.prototype=Object.create(i.prototype),r.prototype.setState=function(e){var t=this.currentState;if(!this._validate(t,e))return!1;this.history.push({state:t,args:this.currentArgs});var n=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=n,this.currentState=e,this._emit(t,e,n),!0},r.prototype.back=function(){if(!this.history.length)return!1;var e=this.history[this.history.length-1],t=this.currentState,n=e.state,i=e.args;return!!this._validate(t,n)&&(this.history.pop(),this.currentState=n,this.currentArgs=i,this._emit(t,n,i,!0),!0)},r.prototype.lock=function(){this.locked=!0},r.prototype.unlock=function(){this.locked=!1},r.prototype.config=function(e,t){t.to=t.to||{},t.from=t.from||{},this.configs[e]=t},r.prototype.register=function(e,t){this.events.push({event:e,from:t.from,to:t.to})},r.prototype._emit=function(e,t,n,i){var r={from:e,to:t,args:n,back:i};this.emit("transition",r),this.emit("leave:"+e,r),this.emit("enter:"+t,r)},r.prototype._validate=function(e,t){if(!(this.locked||e===t||this.states.indexOf(t)<0)){var n=this.configs[e];if(n)if(n.to.only){if(n.to.only.indexOf(t)<0)return}else if(n.to.exclude&&n.to.exclude.indexOf(t)>-1)return;var i=this.configs[t];if(i)if(i.from.only){if(i.from.only.indexOf(e)<0)return}else if(i.from.exclude&&i.from.exclude.indexOf(e)>-1)return;return!0}},e.exports=r},4576:function(e,t,n){"use strict";var i=n(8686);e.exports=function(e){for(var t=e[0],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var s=0;s<r.length;s++)t=t+i(r[s])+e[s+1];return t}},7187:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,r),i(n)},e.once("error",o)),e.once(t,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,o,s,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=l(e))>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function h(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):p(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4063:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},6400:function(e,t,n){var i,r,o;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])}})})?i.apply(t,r):i)||(e.exports=o)},2064:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t})?i.apply(t,r):i)||(e.exports=o)},5042:function(e,t,n){var i,r,o;r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t})?i.apply(t,r):i)||(e.exports=o)},5436:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}return e.ui.focusable=function(n,i){var r,o,s,a,l,c=n.nodeName.toLowerCase();return"area"===c?(o=(r=n.parentNode).name,!(!n.href||!o||"map"!==r.nodeName.toLowerCase())&&(s=e("img[usemap='#"+o+"']")).length>0&&s.is(":visible")):(/^(input|select|textarea|button|object)$/.test(c)?(a=!n.disabled)&&(l=e(n).closest("fieldset")[0])&&(a=!l.disabled):a="a"===c&&n.href||i,a&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable})?i.apply(t,r):i)||(e.exports=o)},7808:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5588),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var n=t.data("ui-form-reset-instances");e.each(n,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?i.apply(t,r):i)||(e.exports=o)},5588:function(e,t,n){var i,r,o;r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}})?i.apply(t,r):i)||(e.exports=o)},1870:function(e,t,n){var i,r,o;r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(t,r):i)||(e.exports=o)},7053:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(t,r):i)||(e.exports=o)},6575:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592),n(5042)],void 0===(o="function"==typeof(i=function(e){return e.fn.labels=function(){var t,n,i,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",r=r.add(o.find(n).addBack(n))),this.pushStack(r))}})?i.apply(t,r):i)||(e.exports=o)},1624:function(e,t,n){var i,r,o;r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}})?i.apply(t,r):i)||(e.exports=o)},1822:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return function(){var t,n=Math.max,i=Math.abs,r=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function d(t,n){return parseInt(e.css(t,n),10)||0}function h(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),n===(i=o.offsetWidth)&&(i=r[0].clientWidth),r.remove(),t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:i||r?{left:0,top:0}:e(t).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,f,p,m,g,v,y=e(t.of),_=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(_),x=(t.collision||"flip").split(" "),w={};return v=h(y),y[0].preventDefault&&(t.at="left top"),f=v.width,p=v.height,m=v.offset,g=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",e=s.exec(i[0]),n=s.exec(i[1]),w[this]=[e?e[0]:0,n?n[0]:0],t[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?g.left+=f:"center"===t.at[0]&&(g.left+=f/2),"bottom"===t.at[1]?g.top+=p:"center"===t.at[1]&&(g.top+=p/2),l=u(w.at,f,p),g.left+=l[0],g.top+=l[1],this.each((function(){var r,o,s=e(this),a=s.outerWidth(),c=s.outerHeight(),h=d(this,"marginLeft"),v=d(this,"marginTop"),k=a+h+d(this,"marginRight")+b.width,C=c+v+d(this,"marginBottom")+b.height,S=e.extend({},g),T=u(w.my,s.outerWidth(),s.outerHeight());"right"===t.my[0]?S.left-=a:"center"===t.my[0]&&(S.left-=a/2),"bottom"===t.my[1]?S.top-=c:"center"===t.my[1]&&(S.top-=c/2),S.left+=T[0],S.top+=T[1],r={marginLeft:h,marginTop:v},e.each(["left","top"],(function(n,i){e.ui.position[x[n]]&&e.ui.position[x[n]][i](S,{targetWidth:f,targetHeight:p,elemWidth:a,elemHeight:c,collisionPosition:r,collisionWidth:k,collisionHeight:C,offset:[l[0]+T[0],l[1]+T[1]],my:t.my,at:t.at,within:_,elem:s})})),t.using&&(o=function(e){var r=m.left-S.left,o=r+f-a,l=m.top-S.top,u=l+p-c,d={target:{element:y,left:m.left,top:m.top,width:f,height:p},element:{element:s,left:S.left,top:S.top,width:a,height:c},horizontal:o<0?"left":r>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};f<a&&i(r+o)<f&&(d.horizontal="center"),p<c&&i(l+u)<p&&(d.vertical="middle"),n(i(r),i(o))>n(i(l),i(u))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),s.offset(e.extend(S,{using:o}))}))},e.ui.position={fit:{left:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&c<=0?(i=e.left+l+t.collisionWidth-s-o,e.left+=l-i):e.left=c>0&&l<=0?o:l>c?o+s-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=n(e.left-a,e.left)},top:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&c<=0?(i=e.top+l+t.collisionHeight-s-o,e.top+=l-i):e.top=c>0&&l<=0?o:l>c?o+s-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=n(e.top-a,e.top)}},flip:{left:function(e,t){var n,r,o=t.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];u<0?((n=e.left+h+f+p+t.collisionWidth-a-s)<0||n<i(u))&&(e.left+=h+f+p):d>0&&((r=e.left-t.collisionPosition.marginLeft+h+f+p-l)>0||i(r)<d)&&(e.left+=h+f+p)},top:function(e,t){var n,r,o=t.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];u<0?((r=e.top+h+f+p+t.collisionHeight-a-s)<0||r<i(u))&&(e.top+=h+f+p):d>0&&((n=e.top-t.collisionPosition.marginTop+h+f+p-l)>0||i(n)<d)&&(e.top+=h+f+p)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})?i.apply(t,r):i)||(e.exports=o)},1440:function(e,t,n){var i,r,o;r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})?i.apply(t,r):i)||(e.exports=o)},192:function(e,t,n){var i,r,o;r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})?i.apply(t,r):i)||(e.exports=o)},464:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var t=e(this);return(!i||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)}})?i.apply(t,r):i)||(e.exports=o)},3614:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592),n(5436)],void 0===(o="function"==typeof(i=function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}})})?i.apply(t,r):i)||(e.exports=o)},9138:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++t)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}});var t})?i.apply(t,r):i)||(e.exports=o)},5592:function(e,t,n){var i,r,o;r=[n(9755)],void 0===(o="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?i.apply(t,r):i)||(e.exports=o)},6891:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5592)],void 0===(o="function"==typeof(i=function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{(i=e._data(r,"events"))&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var r,o,s,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},r=e[l][t],o=e[l][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,(function(t,i){e.isFunction(i)?a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}():a[t]=i})),o.prototype=e.widget.extend(s,{widgetEventPrefix:r&&s.widgetEventPrefix||t},a,{constructor:o,namespace:l,widgetName:t,widgetFullName:c}),r?(e.each(r._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,o=i.call(arguments,1),s=0,a=o.length;s<a;s++)for(n in o[s])r=o[s][n],o[s].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=i.call(arguments,1),l=this;return s?this.length||"instance"!==o?this.each((function(){var n,i=e.data(this,r);return"instance"===o?(l=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,a))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each((function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new n(o,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(r=s[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,r;for(n in t)r=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&r&&r.length&&(i=e(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function r(r,o){var s,a;for(a=0;a<r.length;a++)s=i.classesElementLookup[r[a]]||e(),s=t.add?e(e.unique(s.get().concat(t.element.get()))):e(s.not(t.element).get()),i.classesElementLookup[r[a]]=s,n.push(r[a]),o&&t.classes[r[a]]&&n.push(t.classes[r[a]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(i,r){-1!==e.inArray(t.target,r)&&(n.classesElementLookup[i]=e(r.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,(function(i,s){function a(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.on(c,u,a):n.on(c,a)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){var s;"string"==typeof r&&(r={effect:r});var a=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue((function(n){e(this)[t](),o&&o.call(i[0]),n()}))}})),e.widget})?i.apply(t,r):i)||(e.exports=o)},2993:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(8851),n(7053),n(1822),n(1440),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(e){return e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,s="input"===r;this.isMultiLine=o||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[o||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case o.UP:t=!0,this._keyEvent("previous",r);break;case o.DOWN:t=!0,this._keyEvent("next",r);break;case o.ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(t,n){var i,r;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));r=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:r})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value),(i=n.item.attr("aria-label")||r.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=r,this._delay((function(){this.previous=r,this.selectedItem=i}))),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete})?i.apply(t,r):i)||(e.exports=o)},9366:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(341),n(1193),n(7053),n(6891)],void 0===(o="function"==typeof(i=function(e){var t;return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,r=i?this.options.iconPosition:n,o="top"===r||"bottom"===r;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(r),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=(t=e.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button})?i.apply(t,r):i)||(e.exports=o)},1193:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(5042),n(7808),n(6575),n(6891)],void 0===(o="function"==typeof(i=function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,i=this,r=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML})),this.originalLabel&&(r.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(r.disabled=t),r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,n="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(n):e(n).filter((function(){return 0===e(this).form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio})?i.apply(t,r):i)||(e.exports=o)},341:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(6891)],void 0===(o="function"==typeof(i=function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,(function(i,r){var o,s={};if(r)return"controlgroupLabel"===i?((o=t.element.find(r)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(o.get()))):void(e.fn[i]&&(s=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}},t.element.find(r).each((function(){var r=e(this),o=r[i]("instance"),a=e.widget.extend({},s);if("button"!==i||!r.parent(".ui-spinner").length){o||(o=r[i]()[i]("instance")),o&&(a.classes=t._resolveClassesValues(a.classes,o)),r[i](a);var l=r[i]("widget");e.data(l[0],"ui-controlgroup-data",o||r[i]("instance")),n.push(l[0])}}))))})),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var n=e(this).data("ui-controlgroup-data");n&&n[t]&&n[t]()}))},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var r={};return e.each(n,(function(o){var s=i.options.classes[o]||"";s=e.trim(s.replace(t,"")),r[o]=(s+" "+n[o]).replace(/\s+/g," ")})),r},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,i){var r=t[i]().data("ui-controlgroup-data");if(r&&n["_"+r.widgetName+"Options"]){var o=n["_"+r.widgetName+"Options"](1===t.length?"only":i);o.classes=n._resolveClassesValues(o.classes,r),r.element[r.widgetName](o)}else n._updateCornerClass(t[i](),i)})),this._callChildMethod("refresh"))}})})?i.apply(t,r):i)||(e.exports=o)},2466:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(9366),n(7285),n(6177),n(1707),n(5436),n(7053),n(1822),n(1440),n(192),n(3614),n(9138),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),o=Math.max.apply(null,r);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){r.trigger("focus")})),t.preventDefault()):(this._delay((function(){i.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,(function(n,i){var r,o;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,o={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,e("<button></button>",i).button(o).appendTo(t.uiButtonSet).on("click",(function(){r.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,i(r))},drag:function(e,n){t._trigger("drag",e,i(n))},stop:function(r,o){var s=o.offset.left-t.document.scrollLeft(),a=o.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",r,i(o))}})},_makeResizable:function(){var t=this,n=this.options,i=n.resizable,r=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,i){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,s(i))},resize:function(e,n){t._trigger("resize",e,s(n))},stop:function(i,r){var o=t.uiDialog.offset(),a=o.left-t.document.scrollLeft(),l=o.top-t.document.scrollTop();n.height=t.uiDialog.height(),n.width=t.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",i,s(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};e.each(t,(function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(r[e]=t)})),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var i,r,o=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=o.is(":data(ui-draggable)"))&&!n&&o.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((r=o.is(":data(ui-resizable)"))&&!n&&o.resizable("destroy"),r&&"string"==typeof n&&o.resizable("option","handles",n),r||!1===n||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay((function(){t=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog})?i.apply(t,r):i)||(e.exports=o)},7285:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(6177),n(6400),n(1624),n(1440),n(192),n(464),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(t),!this.handle||(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",t)&&n._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,o=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(i=(n=e(r.containment))[0])&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=r.containment:this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each((function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,r))}))},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,(function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))}))},drag:function(t,n,i){e.each(i.sortables,(function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,e.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(r=!1),r}))),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",t),i.dropped=o.element,e.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,o=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<r.scrollSensitivity?s.scrollTop=o=s.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(s.scrollTop=o=s.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<r.scrollSensitivity?s.scrollLeft=o=s.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(s.scrollLeft=o=s.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?o=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(o=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?o=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(o=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})}))},drag:function(t,n,i){var r,o,s,a,l,c,u,d,h,f,p=i.options,m=p.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,y=n.offset.top,_=y+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)c=(l=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,d=(u=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,v<l-m||g>c+m||_<u-m||y>d+m||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(u-_)<=m,o=Math.abs(d-y)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),f=r||o||s||a,"outer"!==p.snapMode&&(r=Math.abs(u-y)<=m,o=Math.abs(d-_)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(r||o||s||a||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=r||o||s||a||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,o=i.options,s=e.makeArray(e(o.stack)).sort((function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)}));s.length&&(r=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each((function(t){e(this).css("zIndex",r+t)})),this.css("zIndex",r+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}}),e.ui.draggable})?i.apply(t,r):i)||(e.exports=o)},8851:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(7053),n(1822),n(1440),n(9138),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var n,i,r,o,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,i=this.previousFilter||"",o=!1,r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),r===i?o=!0:r=i+r,n=this._filterMenuItems(r),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(r=String.fromCharCode(t.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(t,n),this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,r,o=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(i,"ui-menu-icon","ui-icon "+s),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(t=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")})),r=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,o,s,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),r<0?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-r<0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,r;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+r>0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))}))}})})?i.apply(t,r):i)||(e.exports=o)},6177:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(1870),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(r&&!o&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(t,r):i)||(e.exports=o)},1707:function(e,t,n){var i,r,o;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(9755),n(6177),n(2064),n(1624),n(5592),n(6891)],void 0===(o="function"==typeof(i=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",(function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())})).on("mouseleave",(function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,r,o,s=this.options,a=this;if(this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)r="ui-resizable-"+(t=e.trim(i[n])),o=e("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var n,i,r,o;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")})),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,i,r,o=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,r=this.originalMousePosition,o=this.axis,s=t.pageX-r.left||0,a=t.pageY-r.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,r,o,s,a,l,c=this.options,u=this;return this._helper&&(r=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,o=i?0:u.sizeDiff.width,s={width:u.helper.width()-o,height:u.helper.height()-r},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,r,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),o&&c&&(e.left=a-t.minWidth),i&&c&&(e.left=a-t.maxWidth),s&&u&&(e.top=l-t.minHeight),r&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(r[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,r,o,s,a,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,h=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(l.containerElement=e(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each((function(e,i){n[e]=l._num(t.css("padding"+i))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,r=l.containerSize.height,o=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:o,a=l._hasScroll(h)?h.scrollHeight:r,l.parentData={element:h,left:i.left,top:i.top,width:s,height:a}))},resize:function(t){var n,i,r,o,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement,f=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),u&&(s.size.height=s.size.width/s.aspectRatio,f=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,f=!1),s.position.top=s._helper?l.top:0),r=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),r&&o?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-d.left:s.offset.left-l.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-d.top:s.offset.top-l.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio,f=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio,f=!1)),f||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,n){var i=e(this).resizable("instance"),r=i.options,o=i.originalSize,s=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0};e(r.alsoResize).each((function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),r={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,(function(e,t){var n=(i[t]||0)+(a[t]||0);n&&n>=0&&(r[t]=n||null)})),t.css(r)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,r=n.size,o=n.originalSize,s=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((r.width-o.width)/c)*c,h=Math.round((r.height-o.height)/u)*u,f=o.width+d,p=o.height+h,m=i.maxWidth&&i.maxWidth<f,g=i.maxHeight&&i.maxHeight<p,v=i.minWidth&&i.minWidth>f,y=i.minHeight&&i.minHeight>p;i.grid=l,v&&(f+=c),y&&(p+=u),m&&(f-=c),g&&(p-=u),/^(se|s|e)$/.test(a)?(n.size.width=f,n.size.height=p):/^(ne)$/.test(a)?(n.size.width=f,n.size.height=p,n.position.top=s.top-h):/^(sw)$/.test(a)?(n.size.width=f,n.size.height=p,n.position.left=s.left-d):((p-u<=0||f-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),p-u>0?(n.size.height=p,n.position.top=s.top-h):(p=u-t.height,n.size.height=p,n.position.top=s.top+o.height-p),f-c>0?(n.size.width=f,n.position.left=s.left-d):(f=c-t.width,n.size.width=f,n.position.left=s.left+o.width-f))}}),e.ui.resizable})?i.apply(t,r):i)||(e.exports=o)},9755:function(e,t){var n;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},c=o.push,u=o.indexOf,d={},h=d.toString,f=d.hasOwnProperty,p=f.toString,m=p.call(Object),g={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},_=i.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var i,r,o=(n=n||_).createElement("script");if(o.text=e,t)for(i in b)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var k="3.6.0",C=function(e,t){return new C.fn.init(e,t)};function S(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:k,constructor:C,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},C.extend=C.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(c&&i&&(C.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[t],o=r&&!Array.isArray(n)?[]:r||C.isPlainObject(n)?n:{},r=!1,s[t]=C.extend(c,o,i)):void 0!==i&&(s[t]=i));return s},C.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=s(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(S(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?C.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,s=!n;r<o;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,s=[];if(S(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&s.push(r);return l(s)},guid:1,support:g}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=o[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var T=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(e){var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y,_,b="sizzle"+1*new Date,x=e.document,w=0,k=0,C=le(),S=le(),T=le(),E=le(),A=function(e,t){return e===t&&(d=!0),0},$={}.hasOwnProperty,D=[],O=D.pop,N=D.push,M=D.push,P=D.slice,L=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",R="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\[[\\x20\\t\\r\\n\\f]*("+R+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+I+"*\\]",z=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(I+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp(I+"|>"),V=new RegExp(z),G=new RegExp("^"+R+"$"),K={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){h()},se=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(D=P.call(x.childNodes),x.childNodes),D[x.childNodes.length].nodeType}catch(e){M={apply:D.length?function(e,t){N.apply(e,P.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,i,r){var o,a,c,u,d,p,v,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!r&&(h(t),t=t||f,m)){if(11!==x&&(d=Z.exec(e)))if(o=d[1]){if(9===x){if(!(c=t.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(y&&(c=y.getElementById(o))&&_(t,c)&&c.id===o)return i.push(c),i}else{if(d[2])return M.apply(i,t.getElementsByTagName(e)),i;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&!E[e+" "]&&(!g||!g.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===x&&(q.test(e)||U.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ie,re):t.setAttribute("id",u=b)),a=(p=s(e)).length;a--;)p[a]=(u?"#"+u:":scope")+" "+_e(p[a]);v=p.join(",")}try{return M.apply(i,y.querySelectorAll(v)),i}catch(t){E(e,!0)}finally{u===b&&t.removeAttribute("id")}}}return l(e.replace(B,"$1"),t,i,r)}function le(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ce(e){return e[b]=!0,e}function ue(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},o=ae.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},h=ae.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:x;return s!=f&&9===s.nodeType&&s.documentElement?(p=(f=s).documentElement,m=!o(f),x!=f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",oe,!1):r.attachEvent&&r.attachEvent("onunload",oe)),n.scope=ue((function(e){return p.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(f.getElementsByClassName),n.getById=ue((function(e){return p.appendChild(e).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=Q.test(f.querySelectorAll))&&(ue((function(e){var t;p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+j+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",z)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(p.compareDocumentPosition),_=t||Q.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==f||e.ownerDocument==x&&_(x,e)?-1:t==f||t.ownerDocument==x&&_(x,t)?1:u?L(u,e)-L(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e==f?-1:t==f?1:r?-1:o?1:u?L(u,e)-L(u,t):0;if(r===o)return he(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?he(s[i],a[i]):s[i]==x?-1:a[i]==x?1:0},f):f},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&m&&!E[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){E(t,!0)}return ae(t,f,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=f&&h(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=f&&h(e);var r=i.attrHandle[t.toLowerCase()],o=r&&$.call(i.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return(e+"").replace(ie,re)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],r=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(A),d){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return u=null,e},r=ae.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=ae.selectors={cacheLength:50,createPseudo:ce,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+I+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=ae.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,f,p,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,_=!1;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(_=(f=(c=(u=(d=(h=g)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[m]||(_=f=0)||p.pop();)if(1===h.nodeType&&++_&&h===t){u[e]=[w,f,_];break}}else if(y&&(_=f=(c=(u=(d=(h=t)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===_)for(;(h=++f&&h&&h[m]||(_=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++_||(y&&((u=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[w,_]),h!==t)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,o=r(e,t),s=o.length;s--;)e[i=L(e,o[s])]=!(n[i]=o[s])})):function(e){return r(e,0,n)}):r}},pseudos:{not:ce((function(e){var t=[],n=[],i=a(e.replace(B,"$1"));return i[b]?ce((function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:ce((function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:ge((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ye(){}function _e(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(e,t,n){var i=t.dir,r=t.next,o=r||i,s=n&&"parentNode"===o,a=k++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,l){var c,u,d,h=[w,a];if(l){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(u=(d=t[b]||(t[b]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[o])&&c[0]===w&&c[1]===a)return h[2]=c[2];if(u[o]=h,h[2]=e(t,n,l))return!0}return!1}}function xe(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function we(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),c&&t.push(a)));return s}function ke(e,t,n,i,r,o){return i&&!i[b]&&(i=ke(i)),r&&!r[b]&&(r=ke(r,o)),ce((function(o,s,a,l){var c,u,d,h=[],f=[],p=s.length,m=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ae(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?m:we(m,h,e,a,l),v=n?r||(o?e:p||i)?[]:s:g;if(n&&n(g,v,a,l),i)for(c=we(v,f),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[f[u]]=!(g[f[u]]=d));if(o){if(r||e){if(r){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);r(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=r?L(o,d):h[u])>-1&&(o[c]=!(s[c]=d))}}else v=we(v===s?v.splice(p,v.length):v),r?r(null,s,v,l):M.apply(s,v)}))}function Ce(e){for(var t,n,r,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,u=be((function(e){return e===t}),a,!0),d=be((function(e){return L(t,e)>-1}),a,!0),h=[function(e,n,i){var r=!s&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,r}];l<o;l++)if(n=i.relative[e[l].type])h=[be(xe(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;r<o&&!i.relative[e[r].type];r++);return ke(l>1&&xe(h),l>1&&_e(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(B,"$1"),n,l<r&&Ce(e.slice(l,r)),r<o&&Ce(e=e.slice(r)),r<o&&_e(e))}h.push(n)}return xe(h)}return ye.prototype=i.filters=i.pseudos,i.setFilters=new ye,s=ae.tokenize=function(e,t){var n,r,o,s,a,l,c,u=S[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=i.preFilter;a;){for(s in n&&!(r=W.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=U.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),i.filter)!(r=K[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):S(e,l).slice(0)},a=ae.compile=function(e,t){var n,r=[],o=[],a=T[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=Ce(t[n]))[b]?r.push(a):o.push(a);(a=T(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,s,a,l,u){var d,p,g,v=0,y="0",_=o&&[],b=[],x=c,k=o||r&&i.find.TAG("*",u),C=w+=null==x?1:Math.random()||.1,S=k.length;for(u&&(c=s==f||s||u);y!==S&&null!=(d=k[y]);y++){if(r&&d){for(p=0,s||d.ownerDocument==f||(h(d),a=!m);g=e[p++];)if(g(d,s||f,a)){l.push(d);break}u&&(w=C)}n&&((d=!g&&d)&&v--,o&&_.push(d))}if(v+=y,n&&y!==v){for(p=0;g=t[p++];)g(_,b,s,a);if(o){if(v>0)for(;y--;)_[y]||b[y]||(b[y]=O.call(l));b=we(b)}M.apply(l,b),u&&!o&&b.length>0&&v+t.length>1&&ae.uniqueSort(l)}return u&&(w=C,c=x),_};return n?ce(o):o}(o,r))).selector=e}return a},l=ae.select=function(e,t,n,r){var o,l,c,u,d,h="function"==typeof e&&e,f=!r&&s(e=h.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=K.needsContext.test(e)?0:l.length;o--&&(c=l[o],!i.relative[u=c.type]);)if((d=i.find[u])&&(r=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(o,1),!(e=r.length&&_e(l)))return M.apply(n,r),n;break}}return(h||a(e,f))(r,t,!m,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=b.split("").sort(A).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(j,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ae}(i);C.find=T,C.expr=T.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=T.uniqueSort,C.text=T.getText,C.isXMLDoc=T.isXML,C.contains=T.contains,C.escapeSelector=T.escape;var E=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&C(e).is(n))break;i.push(e)}return i},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},$=C.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function N(e,t,n){return v(t)?C.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?C.grep(e,(function(e){return u.call(t,e)>-1!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?C.find.matchesSelector(i,e)?[i]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<i;t++)if(C.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)C.find(e,r[t],n);return i>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&$.test(e)?C(e):e||[],!1).length}});var M,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||M,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),O.test(i[1])&&C.isPlainObject(t))for(i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=_.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,M=C(_);var L=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,o=[],s="string"!=typeof e&&C(e);if(!$.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(C(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,i){var r=C.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=C.filter(i,r)),this.length>1&&(j[e]||C.uniqueSort(r),L.test(e)&&r.reverse()),this.pushStack(r)}}));var R=/[^\x20\t\r\n\f]+/g;function F(e){return e}function z(e){throw e}function H(e,t,n,i){var r;try{e&&v(r=e.promise)?r.call(e).done(t).fail(n):e&&v(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(R)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,i,r,o=[],s=[],a=-1,l=function(){for(r=r||e.once,i=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){C.each(n,(function(n,i){v(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==w(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(e){return e?C.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,i){var r=v(e[i[4]])&&e[i[4]];o[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var o=0;function s(e,t,n,r){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(e<o)){if((i=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(c)?r?c.call(i,s(o,t,F,r),s(o,t,z,r)):(o++,c.call(i,s(o,t,F,r),s(o,t,z,r),s(o,t,F,t.notifyWith))):(n!==F&&(a=void 0,l=[i]),(r||t.resolveWith)(a,l))}},u=r?c:function(){try{c()}catch(i){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(i,u.stackTrace),e+1>=o&&(n!==z&&(a=void 0,l=[i]),t.rejectWith(a,l))}};e?u():(C.Deferred.getStackHook&&(u.stackTrace=C.Deferred.getStackHook()),i.setTimeout(u))}}return C.Deferred((function(i){t[0][3].add(s(0,i,v(r)?r:F,i.notifyWith)),t[1][3].add(s(0,i,v(e)?e:F)),t[2][3].add(s(0,i,v(n)?n:z))})).promise()},promise:function(e){return null!=e?C.extend(e,r):r}},o={};return C.each(t,(function(e,i){var s=i[2],a=i[5];r[i[1]]=s.add,a&&s.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=s.fireWith})),r.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=a.call(arguments),o=C.Deferred(),s=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(i,r)}};if(t<=1&&(H(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||v(r[n]&&r[n].then)))return o.then();for(;n--;)H(r[n],s(n),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&B.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){i.setTimeout((function(){throw e}))};var W=C.Deferred();function U(){_.removeEventListener("DOMContentLoaded",U),i.removeEventListener("load",U),C.ready()}C.fn.ready=function(e){return W.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||W.resolveWith(_,[C]))}}),C.ready.then=W.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?i.setTimeout(C.ready):(_.addEventListener("DOMContentLoaded",U),i.addEventListener("load",U));var q=function(e,t,n,i,r,o,s){var a=0,l=e.length,c=null==n;if("object"===w(n))for(a in r=!0,n)q(e,t,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,v(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(C(e),n)})),t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):o},V=/^-ms-/,G=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function Y(e){return e.replace(V,"ms-").replace(G,K)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=C.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[Y(t)]=n;else for(i in t)r[Y(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in i?[t]:t.match(R)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||C.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Q=new J,Z=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=Y(i.slice(5)),ne(o,i,r[i]));Q.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){Z.set(this,e)})):q(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=Z.get(o,e))||void 0!==(n=ne(o,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Q.get(e,t),n&&(!i||Array.isArray(n)?i=Q.access(e,t,C.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),i=n.length,r=n.shift(),o=C._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,(function(){C.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:C.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=C.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Q.get(o[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],se=_.documentElement,ae=function(e){return C.contains(e.ownerDocument,e)},le={composed:!0};se.getRootNode&&(ae=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===C.css(e,"display")};function ue(e,t,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return C.css(e,t,"")},l=a(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),u=e.nodeType&&(C.cssNumber[t]||"px"!==c&&+l)&&re.exec(C.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)C.style(e,t,u+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),u/=o;u*=2,C.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var de={};function he(e){var t,n=e.ownerDocument,i=e.nodeName,r=de[i];return r||(t=n.body.appendChild(n.createElement(i)),r=C.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),de[i]=r,r)}function fe(e,t){for(var n,i,r=[],o=0,s=e.length;o<s;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=Q.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ce(i)&&(r[o]=he(i))):"none"!==n&&(r[o]="none",Q.set(i,"display",n)));for(o=0;o<s;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}C.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?C(this).show():C(this).hide()}))}});var pe,me,ge=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;pe=_.createDocumentFragment().appendChild(_.createElement("div")),(me=_.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),pe.appendChild(me),g.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",g.option=!!pe.lastChild;var _e={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?C.merge([e],n):n}function xe(e,t){for(var n=0,i=e.length;n<i;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}_e.tbody=_e.tfoot=_e.colgroup=_e.caption=_e.thead,_e.th=_e.td,g.option||(_e.optgroup=_e.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function ke(e,t,n,i,r){for(var o,s,a,l,c,u,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===w(o))C.merge(h,o.nodeType?[o]:o);else if(we.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(ve.exec(o)||["",""])[1].toLowerCase(),l=_e[a]||_e._default,s.innerHTML=l[1]+C.htmlPrefilter(o)+l[2],u=l[0];u--;)s=s.lastChild;C.merge(h,s.childNodes),(s=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(i&&C.inArray(o,i)>-1)r&&r.push(o);else if(c=ae(o),s=be(d.appendChild(o),"script"),c&&xe(s),n)for(u=0;o=s[u++];)ye.test(o.type||"")&&n.push(o);return d}var Ce=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Te(){return!1}function Ee(e,t){return e===function(){try{return _.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,i,r,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)Ae(e,a,n,i,t[a],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Te;else if(!r)return e;return 1===o&&(s=r,(r=function(e){return C().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid++)),e.each((function(){C.event.add(this,t,r,i,n)}))}function $e(e,t,n){n?(Q.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var i,r,o=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),Q.set(this,t,o),i=n(this,t),this[t](),o!==(r=Q.get(this,t))||i?Q.set(this,t,!1):r={},o!==r)return e.stopImmediatePropagation(),e.preventDefault(),r&&r.value}else o.length&&(Q.set(this,t,{value:C.event.trigger(C.extend(o[0],C.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&C.event.add(e,t,Se)}C.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,f,p,m,g=Q.get(e);if(X(e))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&C.find.matchesSelector(se,r),n.guid||(n.guid=C.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(R)||[""]).length;c--;)f=m=(a=Ce.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f&&(d=C.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=C.event.special[f]||{},u=C.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,p,s)||e.addEventListener&&e.addEventListener(f,s)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),C.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,f,p,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(R)||[""]).length;c--;)if(f=m=(a=Ce.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(d=C.event.special[f]||{},h=l[f=(i?d.delegateType:d.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||C.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)C.event.remove(e,f+t[c],n,i,!0);C.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,s,a=new Array(arguments.length),l=C.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],u=C.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=C.event.handlers.call(this,l,c),t=0;(r=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,o,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[r=(i=t[n]).selector+" "]&&(s[r]=i.needsContext?C(r,this).index(c)>-1:C.find(r,this,null,[c]).length),s[r]&&o.push(i);o.length&&a.push({elem:c,handlers:o})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&$e(t,"click",Se),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&$e(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&D(t,"input")&&Q.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){C.event.special[e]={setup:function(){return $e(this,e,Ee),!1},trigger:function(){return $e(this,e),!0},_default:function(){return!0},delegateType:t}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||C.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,i){return Ae(this,e,t,n,i)},one:function(e,t,n,i){return Ae(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,C(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each((function(){C.event.remove(this,e,n,t)}))}});var De=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,i,r,o,s,a;if(1===t.nodeType){if(Q.hasData(e)&&(a=Q.get(e).events))for(r in Q.remove(t,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)C.event.add(t,r,a[r][n]);Z.hasData(e)&&(o=Z.access(e),s=C.extend({},o),Z.set(t,s))}}function Ie(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,i){t=l(t);var r,o,s,a,c,u,d=0,h=e.length,f=h-1,p=t[0],m=v(p);if(m||h>1&&"string"==typeof p&&!g.checkClone&&Oe.test(p))return e.each((function(r){var o=e.eq(r);m&&(t[0]=p.call(this,r,o.html())),Re(o,t,n,i)}));if(h&&(o=(r=ke(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=(s=C.map(be(r,"script"),Pe)).length;d<h;d++)c=r,d!==f&&(c=C.clone(c,!0,!0),a&&C.merge(s,be(c,"script"))),n.call(e[d],c,d);if(a)for(u=s[s.length-1].ownerDocument,C.map(s,Le),d=0;d<a;d++)c=s[d],ye.test(c.type||"")&&!Q.access(c,"globalEval")&&C.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?C._evalUrl&&!c.noModule&&C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):x(c.textContent.replace(Ne,""),c,u))}return e}function Fe(e,t,n){for(var i,r=t?C.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||C.cleanData(be(i)),i.parentNode&&(n&&ae(i)&&xe(be(i,"script")),i.parentNode.removeChild(i));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=ae(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(s=be(a),i=0,r=(o=be(e)).length;i<r;i++)Ie(o[i],s[i]);if(t)if(n)for(o=o||be(e),s=s||be(a),i=0,r=o.length;i<r;i++)je(o[i],s[i]);else je(e,a);return(s=be(a,"script")).length>0&&xe(s,!l&&be(e,"script")),a},cleanData:function(e){for(var t,n,i,r=C.event.special,o=0;void 0!==(n=e[o]);o++)if(X(n)){if(t=n[Q.expando]){if(t.events)for(i in t.events)r[i]?C.event.remove(n,i):C.removeEvent(n,i,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return q(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Re(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)}))},prepend:function(){return Re(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Re(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Re(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!_e[(ve.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(be(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,i=[],r=C(e),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),C(r[s])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var ze=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Be=function(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=o[r];return i},We=new RegExp(oe.join("|"),"i");function Ue(e,t,n){var i,r,o,s,a=e.style;return(n=n||He(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||ae(e)||(s=C.style(e,t)),!g.pixelBoxStyles()&&ze.test(s)&&We.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(c).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),r=36===t(e.width),u.style.position="absolute",o=12===t(u.offsetWidth/3),se.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,o,s,a,l,c=_.createElement("div"),u=_.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=_.createElement("table"),t=_.createElement("tr"),n=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",se.appendChild(e).appendChild(t).appendChild(n),r=i.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,se.removeChild(e)),a}}))}();var Ve=["Webkit","Moz","ms"],Ge=_.createElement("div").style,Ke={};function Ye(e){var t=C.cssProps[e]||Ke[e];return t||(e in Ge?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ve.length;n--;)if((e=Ve[n]+t)in Ge)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var i=re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function tt(e,t,n,i,r,o){var s="width"===t?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=C.css(e,n+oe[s],!0,r)),i?("content"===n&&(l-=C.css(e,"padding"+oe[s],!0,r)),"margin"!==n&&(l-=C.css(e,"border"+oe[s]+"Width",!0,r))):(l+=C.css(e,"padding"+oe[s],!0,r),"padding"!==n?l+=C.css(e,"border"+oe[s]+"Width",!0,r):a+=C.css(e,"border"+oe[s]+"Width",!0,r));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))||0),l}function nt(e,t,n){var i=He(e),r=(!g.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,i),o=r,s=Ue(e,t,i),a="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(s)){if(!n)return s;s="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&D(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===C.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===C.css(e,"boxSizing",!1,i),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+tt(e,t,n||(r?"border":"content"),o,i,s)+"px"}function it(e,t,n,i,r){return new it.prototype.init(e,t,n,i,r)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=Y(t),l=Je.test(t),c=e.style;if(l||(t=Ye(a)),s=C.cssHooks[t]||C.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:c[t];"string"===(o=typeof n)&&(r=re.exec(n))&&r[1]&&(n=ue(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(C.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,s,a=Y(t);return Je.test(t)||(t=Ye(a)),(s=C.cssHooks[t]||C.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Ue(e,t,i)),"normal"===r&&t in Ze&&(r=Ze[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,i){if(n)return!Xe.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,i):Be(e,Qe,(function(){return nt(e,t,i)}))},set:function(e,n,i){var r,o=He(e),s=!g.scrollboxSize()&&"absolute"===o.position,a=(s||i)&&"border-box"===C.css(e,"boxSizing",!1,o),l=i?tt(e,t,i,a,o):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),l&&(r=re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),et(0,n,l)}}})),C.cssHooks.marginLeft=qe(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+oe[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(C.cssHooks[e+t].set=et)})),C.fn.extend({css:function(e,t){return q(this,(function(e,t,n){var i,r,o={},s=0;if(Array.isArray(t)){for(i=He(e),r=t.length;s<r;s++)o[t[s]]=C.css(e,t[s],!1,i);return o}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)}}),C.Tween=it,it.prototype={constructor:it,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=it.prototype.init,C.fx.step={};var rt,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function lt(){ot&&(!1===_.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(lt):i.setTimeout(lt,C.fx.interval),C.fx.tick())}function ct(){return i.setTimeout((function(){rt=void 0})),rt=Date.now()}function ut(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=oe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function dt(e,t,n){for(var i,r=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,t,e))return i}function ht(e,t,n){var i,r,o=0,s=ht.prefilters.length,a=C.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=rt||ct(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(i);return a.notifyWith(e,[c,i,n]),i<1&&s?n:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var i=C.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,r,o,s;for(n in e)if(r=t[i=Y(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(s=C.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);o<s;o++)if(i=ht.prefilters[o].call(c,e,u,c.opts))return v(i.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return C.map(u,dt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(R);for(var n,i=0,r=e.length;i<r;i++)n=e[i],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,s,a,l,c,u,d="width"in t||"height"in t,h=this,f={},p=e.style,m=e.nodeType&&ce(e),g=Q.get(e,"fxshow");for(i in n.queue||(null==(s=C._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always((function(){h.always((function(){s.unqueued--,C.queue(e,"fx").length||s.empty.fire()}))}))),t)if(r=t[i],st.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||C.style(e,i)}if((l=!C.isEmptyObject(t))||!C.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(u=C.css(e,"display"))&&(c?u=c:(fe([e],!0),c=e.style.display||c,u=C.css(e,"display"),fe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===C.css(e,"float")&&(l||(h.done((function(){p.display=c})),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&fe([e],!0),h.done((function(){for(i in m||fe([e]),Q.remove(e,"fxshow"),f)C.style(e,i,f[i])}))),l=dt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),C.speed=function(e,t,n){var i=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return C.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in C.fx.speeds?i.duration=C.fx.speeds[i.duration]:i.duration=C.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=C.isEmptyObject(e),o=C.speed(t,n,i),s=function(){var t=ht(this,C.extend({},e),o);(r||Q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",o=C.timers,s=Q.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&at.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=C.timers,s=i?i.length:0;for(n.finish=!0,C.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,i,r)}})),C.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),rt=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ot||(ot=!0,lt())},C.fx.stop=function(){ot=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}}))},function(){var e=_.createElement("input"),t=_.createElement("select").appendChild(_.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=_.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var ft,pt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return q(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,n):(1===o&&C.isXMLDoc(e)||(r=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=C.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&D(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(R);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=pt[t]||C.find.attr;pt[t]=function(e,t,i){var r,o,s=t.toLowerCase();return i||(o=pt[s],pt[s]=r,r=null!=n(e,t,i)?s:null,pt[s]=o),r}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(R)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}C.fn.extend({prop:function(e,t){return q(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,r=C.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,i,r,o,s,a,l=0;if(v(e))return this.each((function(t){C(this).addClass(e.call(this,t,yt(this)))}));if((t=_t(e)).length)for(;n=this[l++];)if(r=yt(n),i=1===n.nodeType&&" "+vt(r)+" "){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=vt(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,o,s,a,l=0;if(v(e))return this.each((function(t){C(this).removeClass(e.call(this,t,yt(this)))}));if(!arguments.length)return this.attr("class","");if((t=_t(e)).length)for(;n=this[l++];)if(r=yt(n),i=1===n.nodeType&&" "+vt(r)+" "){for(s=0;o=t[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(a=vt(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):v(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,yt(this),t),t)})):this.each((function(){var t,r,o,s;if(i)for(r=0,o=C(this),s=_t(e);t=s[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+vt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;C.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=v(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,C(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=C.map(r,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=C.valHooks[r.type]||C.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(bt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:vt(C.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:r.length;for(i=o<0?l:s?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(t=C(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=C.makeArray(t),s=r.length;s--;)((i=r[s]).selected=C.inArray(C.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},g.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in i;var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,r){var o,s,a,l,c,u,d,h,p=[n||_],m=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(s=h=a=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!xt.test(m+C.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[C.expando]?e:new C.Event(m,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),d=C.event.special[m]||{},r||!d.trigger||!1!==d.trigger.apply(n,t))){if(!r&&!d.noBubble&&!y(n)){for(l=d.delegateType||m,xt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||_)&&p.push(a.defaultView||a.parentWindow||i)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)h=s,e.type=o>1?l:d.bindType||m,(u=(Q.get(s,"events")||Object.create(null))[e.type]&&Q.get(s,"handle"))&&u.apply(s,t),(u=c&&s[c])&&u.apply&&X(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,r||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!X(n)||c&&v(n[m])&&!y(n)&&((a=n[c])&&(n[c]=null),C.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,wt),n[m](),e.isPropagationStopped()&&h.removeEventListener(m,wt),C.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var i=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(i,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),g.focusin||C.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=Q.access(i,t);r||i.addEventListener(e,n,!0),Q.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=Q.access(i,t)-1;r?Q.access(i,t,r):(i.removeEventListener(e,n,!0),Q.remove(i,t))}}}));var kt=i.location,Ct={guid:Date.now()},St=/\?/;C.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Tt=/\[\]$/,Et=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,$t=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,i){var r;if(Array.isArray(t))C.each(t,(function(t,r){n||Tt.test(e)?i(e,r):Dt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==w(t))i(e,t);else for(r in t)Dt(e+"["+r+"]",t[r],n,i)}C.param=function(e,t){var n,i=[],r=function(e,t){var n=v(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){r(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,r);return i.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&$t.test(this.nodeName)&&!At.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:n.replace(Et,"\r\n")}})).get()}});var Ot=/%20/g,Nt=/#.*$/,Mt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,jt=/^\/\//,It={},Rt={},Ft="*/".concat("*"),zt=_.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(R)||[];if(v(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Bt(e,t,n,i){var r={},o=e===Rt;function s(a){var l;return r[a]=!0,C.each(e[a]||[],(function(e,a){var c=a(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Wt(e,t){var n,i,r=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&C.extend(!0,e,i),e}zt.href=kt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,C.ajaxSettings),t):Wt(C.ajaxSettings,e)},ajaxPrefilter:Ht(It),ajaxTransport:Ht(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,o,s,a,l,c,u,d,h,f=C.ajaxSetup({},t),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?C(p):C.event,g=C.Deferred(),v=C.Callbacks("once memory"),y=f.statusCode||{},b={},x={},w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Pt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),S(0,t),this}};if(g.promise(k),f.url=((e||f.url||kt.href)+"").replace(jt,kt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(R)||[""],null==f.crossDomain){l=_.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=zt.protocol+"//"+zt.host!=l.protocol+"//"+l.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=C.param(f.data,f.traditional)),Bt(It,f,t,k),c)return k;for(d in(u=C.event&&f.global)&&0==C.active++&&C.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Lt.test(f.type),r=f.url.replace(Nt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ot,"+")):(h=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(St.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Mt,"$1"),h=(St.test(r)?"&":"?")+"_="+Ct.guid+++h),f.url=r+h),f.ifModified&&(C.lastModified[r]&&k.setRequestHeader("If-Modified-Since",C.lastModified[r]),C.etag[r]&&k.setRequestHeader("If-None-Match",C.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ft+"; q=0.01":""):f.accepts["*"]),f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,k,f)||c))return k.abort();if(w="abort",v.add(f.complete),k.done(f.success),k.fail(f.error),n=Bt(Rt,f,t,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,f]),c)return k;f.async&&f.timeout>0&&(a=i.setTimeout((function(){k.abort("timeout")}),f.timeout));try{c=!1,n.send(b,S)}catch(e){if(c)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,s,l){var d,h,_,b,x,w=t;c||(c=!0,a&&i.clearTimeout(a),n=void 0,o=l||"",k.readyState=e>0?4:0,d=e>=200&&e<300||304===e,s&&(b=function(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,k,s)),!d&&C.inArray("script",f.dataTypes)>-1&&C.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=function(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if((a=r.split(" "))[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,b,k,d),d?(f.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(C.lastModified[r]=x),(x=k.getResponseHeader("etag"))&&(C.etag[r]=x)),204===e||"HEAD"===f.type?w="nocontent":304===e?w="notmodified":(w=b.state,h=b.data,d=!(_=b.error))):(_=w,!e&&w||(w="error",e<0&&(e=0))),k.status=e,k.statusText=(t||w)+"",d?g.resolveWith(p,[h,w,k]):g.rejectWith(p,[k,w,_]),k.statusCode(y),y=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[k,f,d?h:_]),v.fireWith(p,[k,w]),u&&(m.trigger("ajaxComplete",[k,f]),--C.active||C.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,i,r){return v(n)&&(r=r||i,i=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:r,data:n,success:i},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},qt=C.ajaxSettings.xhr();g.cors=!!qt&&"withCredentials"in qt,g.ajax=qt=!!qt,C.ajaxTransport((function(e){var t,n;if(g.cors||qt&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ut[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Vt,Gt=[],Kt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||C.expando+"_"+Ct.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var r,o,s,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||C.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=i[r],i[r]=function(){s=arguments},n.always((function(){void 0===o?C(i).removeProp(r):i[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),s&&v(o)&&o(s[0]),s=o=void 0})),"script"})),g.createHTMLDocument=((Vt=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),C.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((i=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(i)):t=_),o=!n&&[],(r=O.exec(e))?[t.createElement(r[1])]:(r=ke([e],t,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var i,r,o},C.fn.load=function(e,t,n){var i,r,o,s=this,a=e.indexOf(" ");return a>-1&&(i=vt(e.slice(a)),e=e.slice(0,a)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&C.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(i?C("<div>").append(C.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,c=C.css(e,"position"),u=C(e),d={};"static"===c&&(e.style.position="relative"),a=u.offset(),o=C.css(e,"top"),l=C.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(s=(i=u.position()).top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),v(t)&&(t=t.call(e,n,C.extend({},a))),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):u.css(d)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===C.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),r.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-C.css(i,"marginTop",!0),left:t.left-r.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||se}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(i){return q(this,(function(e,i,r){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r}),e,i,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=qe(g.pixelPosition,(function(e,n){if(n)return n=Ue(e,t),ze.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){C.fn[i]=function(r,o){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===o?"margin":"border");return q(this,(function(t,n,r){var o;return y(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?C.css(t,n,a):C.style(t,n,r,a)}),t,s?r:void 0,s)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Yt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return i=a.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(a.call(arguments)))}).guid=e.guid=e.guid||C.guid++,r},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=D,C.isFunction=v,C.isWindow=y,C.camelCase=Y,C.type=w,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(Yt,"")},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var Xt=i.jQuery,Jt=i.$;return C.noConflict=function(e){return i.$===C&&(i.$=Jt),e&&i.jQuery===C&&(i.jQuery=Xt),C},void 0===r&&(i.jQuery=i.$=C),C}))},9461:function(e){"use strict";var t=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),n(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function n(e,i,r,o,s,a,l,c,u,d){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var h in i(o,s,a,l,c,u,d),o){var f=o[h];if(Array.isArray(f)){if(h in t.arrayKeywords)for(var p=0;p<f.length;p++)n(e,i,r,f[p],s+"/"+h+"/"+p,a,s,h,o,p)}else if(h in t.propsKeywords){if(f&&"object"==typeof f)for(var m in f)n(e,i,r,f[m],s+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,h,o,m)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&n(e,i,r,f,s+"/"+h,a,s,h,o)}r(o,s,a,l,c,u,d)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2837:function(){},5311:function(e,t,n){!function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},u=function(){function e(t){i(this,e),this.selfOptions=t||{},this.pipes={}}return r(e,[{key:"options",value:function(e){return e&&(this.selfOptions=e),this.selfOptions}},{key:"pipe",value:function(e,t){var n=t;if("string"==typeof e){if(void 0===n)return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if(n=e,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(e,t){var n=e;n.options=this.options();for(var i=t||e.pipe||"default",r=void 0,o=void 0;i;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(n),o=n,r=i,i=null,n&&n.next&&(n=n.next,i=o.nextPipe||n.pipe||r);return n.hasResult?n.result:void 0}}]),e}(),d=function(){function e(t){i(this,e),this.name=t,this.filters=[]}return r(e,[{key:"process",value:function(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var t=this.debug,i=this.filters.length,r=e,o=0;o<i;o++){var s=this.filters[o];if(t&&this.log("filter: "+s.filterName),s(r),"object"===(void 0===r?"undefined":n(r))&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}},{key:"log",value:function(e){console.log("[jsondiffpatch] "+this.name+" pipe, "+e)}},{key:"append",value:function(){var e;return(e=this.filters).push.apply(e,arguments),this}},{key:"prepend",value:function(){var e;return(e=this.filters).unshift.apply(e,arguments),this}},{key:"indexOf",value:function(e){if(!e)throw new Error("a filter name is required");for(var t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw new Error("filter not found: "+e)}},{key:"list",value:function(){return this.filters.map((function(e){return e.filterName}))}},{key:"after",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(e){var t=this.indexOf(e);return this.filters.splice(t,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(e){if(!1!==e){if(!this.resultCheck){var t=this;return this.resultCheck=function(e){if(!e.hasResult){console.log(e);var n=new Error(t.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),e}(),h=function(){function e(){i(this,e)}return r(e,[{key:"setResult",value:function(e){return this.result=e,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(e,t){return"string"==typeof e||e instanceof d?this.nextPipe=e:(this.next=e,t&&(this.nextPipe=t)),this}},{key:"push",value:function(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}]),e}(),f="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array};function p(e){var t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}function m(e){if("object"!==(void 0===e?"undefined":n(e)))return e;if(null===e)return null;if(f(e))return e.map(m);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return p(e);var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=m(e[i]));return t}var g=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.left=e,r.right=n,r.pipe="diff",r}return s(t,e),r(t,[{key:"setResult",value:function(e){if(this.options.cloneDiffValues&&"object"===(void 0===e?"undefined":n(e))){var t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:m;"object"===n(e[0])&&(e[0]=t(e[0])),"object"===n(e[1])&&(e[1]=t(e[1]))}return h.prototype.setResult.apply(this,arguments)}}]),t}(h),v=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.left=e,r.delta=n,r.pipe="patch",r}return s(t,e),t}(h),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.delta=e,n.pipe="reverse",n}return s(t,e),t}(h),_="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},b=function(e){if(e.left!==e.right)if(void 0!==e.left)if(void 0!==e.right){if("function"==typeof e.left||"function"==typeof e.right)throw new Error("functions are not supported");e.leftType=null===e.left?"null":n(e.left),e.rightType=null===e.right?"null":n(e.right),e.leftType===e.rightType&&"boolean"!==e.leftType&&"number"!==e.leftType?("object"===e.leftType&&(e.leftIsArray=_(e.left)),"object"===e.rightType&&(e.rightIsArray=_(e.right)),e.leftIsArray===e.rightIsArray?e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()}else e.setResult([e.left,0,0]).exit();else{if("function"==typeof e.right)throw new Error("functions are not supported");e.setResult([e.right]).exit()}else e.setResult(void 0).exit()};b.filterName="trivial";var x=function(e){if(void 0!==e.delta){if(e.nested=!_(e.delta),!e.nested)if(1!==e.delta.length)if(2!==e.delta.length)3===e.delta.length&&0===e.delta[2]&&e.setResult(void 0).exit();else{if(e.left instanceof RegExp){var t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t)return void e.setResult(new RegExp(t[1],t[2])).exit()}e.setResult(e.delta[1]).exit()}else e.setResult(e.delta[0]).exit()}else e.setResult(e.left).exit()};x.filterName="trivial";var w=function(e){void 0!==e.delta?(e.nested=!_(e.delta),e.nested||(1!==e.delta.length?2!==e.delta.length?3===e.delta.length&&0===e.delta[2]&&e.setResult([e.delta[0]]).exit():e.setResult([e.delta[1],e.delta[0]]).exit():e.setResult([e.delta[0],0,0]).exit())):e.setResult(e.delta).exit()};function k(e){if(e&&e.children){for(var t=e.children.length,n=void 0,i=e.result,r=0;r<t;r++)void 0!==(n=e.children[r]).result&&((i=i||{})[n.childName]=n.result);i&&e.leftIsArray&&(i._t="a"),e.setResult(i).exit()}}function C(e){if(!e.leftIsArray&&"object"===e.leftType){var t=void 0,n=void 0,i=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(i&&!i(t,e)||(n=new g(e.left[t],e.right[t]),e.push(n,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(i&&!i(t,e)||void 0===e.left[t]&&(n=new g(void 0,e.right[t]),e.push(n,t)));e.children&&0!==e.children.length?e.exit():e.setResult(void 0).exit()}}w.filterName="trivial",k.filterName="collectChildren",C.filterName="objects";var S=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new v(e.left[t],e.delta[t]),e.push(n,t);e.exit()}};S.filterName="objects";var T=function(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],Object.prototype.hasOwnProperty.call(e.left,n.childName)&&void 0===n.result?delete e.left[n.childName]:e.left[n.childName]!==n.result&&(e.left[n.childName]=n.result);e.setResult(e.left).exit()}};T.filterName="collectChildren";var E=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new y(e.delta[t]),e.push(n,t);e.exit()}};function A(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i={},r=0;r<t;r++)i[(n=e.children[r]).childName]!==n.result&&(i[n.childName]=n.result);e.setResult(i).exit()}}E.filterName="objects",A.filterName="collectChildren";var $=function(e,t,n,i){return e[n]===t[i]},D=function(e,t,n,i){var r=e.length,o=t.length,s=void 0,a=void 0,l=[r+1];for(s=0;s<r+1;s++)for(l[s]=[o+1],a=0;a<o+1;a++)l[s][a]=0;for(l.match=n,s=1;s<r+1;s++)for(a=1;a<o+1;a++)n(e,t,s-1,a-1,i)?l[s][a]=l[s-1][a-1]+1:l[s][a]=Math.max(l[s-1][a],l[s][a-1]);return l},O=function(e,t,n,i){for(var r=t.length,o=n.length,s={sequence:[],indices1:[],indices2:[]};0!==r&&0!==o;)e.match(t,n,r-1,o-1,i)?(s.sequence.unshift(t[r-1]),s.indices1.unshift(r-1),s.indices2.unshift(o-1),--r,--o):e[r][o-1]>e[r-1][o]?--o:--r;return s},N={get:function(e,t,n,i){var r=i||{},o=D(e,t,n||$,r),s=O(o,e,t,r);return"string"==typeof e&&"string"==typeof t&&(s.sequence=s.sequence.join("")),s}},M=3,P="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},L="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]===t)return i;return-1};function j(e,t,n,i){for(var r=0;r<n;r++)for(var o=e[r],s=0;s<i;s++){var a=t[s];if(r!==s&&o===a)return!0}}function I(e,t,i,r,o){var s=e[i],a=t[r];if(s===a)return!0;if("object"!==(void 0===s?"undefined":n(s))||"object"!==(void 0===a?"undefined":n(a)))return!1;var l=o.objectHash;if(!l)return o.matchByPosition&&i===r;var c=void 0,u=void 0;return"number"==typeof i?(o.hashCache1=o.hashCache1||[],void 0===(c=o.hashCache1[i])&&(o.hashCache1[i]=c=l(s,i))):c=l(s),void 0!==c&&("number"==typeof r?(o.hashCache2=o.hashCache2||[],void 0===(u=o.hashCache2[r])&&(o.hashCache2[r]=u=l(a,r))):u=l(a),void 0!==u&&c===u)}var R=function(e){if(e.leftIsArray){var t={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},n=0,i=0,r=void 0,o=void 0,s=void 0,a=e.left,l=e.right,c=a.length,u=l.length,d=void 0;for(c>0&&u>0&&!t.objectHash&&"boolean"!=typeof t.matchByPosition&&(t.matchByPosition=!j(a,l,c,u));n<c&&n<u&&I(a,l,n,n,t);)r=n,d=new g(e.left[r],e.right[r]),e.push(d,r),n++;for(;i+n<c&&i+n<u&&I(a,l,c-1-i,u-1-i,t);)o=c-1-i,s=u-1-i,d=new g(e.left[o],e.right[s]),e.push(d,s),i++;var h=void 0;if(n+i!==c)if(n+i!==u){delete t.hashCache1,delete t.hashCache2;var f=a.slice(n,c-i),p=l.slice(n,u-i),m=N.get(f,p,I,t),v=[];for(h=h||{_t:"a"},r=n;r<c-i;r++)L(m.indices1,r-n)<0&&(h["_"+r]=[a[r],0,0],v.push(r));var y=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(y=!1);var _=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(_=!0);var b=v.length;for(r=n;r<u-i;r++){var x=L(m.indices2,r-n);if(x<0){var w=!1;if(y&&b>0)for(var k=0;k<b;k++)if(I(f,p,(o=v[k])-n,r-n,t)){h["_"+o].splice(1,2,r,M),_||(h["_"+o][0]=""),s=r,d=new g(e.left[o],e.right[s]),e.push(d,s),v.splice(k,1),w=!0;break}w||(h[r]=[l[r]])}else o=m.indices1[x]+n,s=m.indices2[x]+n,d=new g(e.left[o],e.right[s]),e.push(d,s)}e.setResult(h).exit()}else{for(h=h||{_t:"a"},r=n;r<c-i;r++)h["_"+r]=[a[r],0,0];e.setResult(h).exit()}else{if(c===u)return void e.setResult(void 0).exit();for(h=h||{_t:"a"},r=n;r<u-i;r++)h[r]=[l[r]];e.setResult(h).exit()}}};R.filterName="arrays";var F={numerically:function(e,t){return e-t},numericallyBy:function(e){return function(t,n){return t[e]-n[e]}}},z=function(e){if(e.nested&&"a"===e.delta._t){var t=void 0,n=void 0,i=e.delta,r=e.left,o=[],s=[],a=[];for(t in i)if("_t"!==t)if("_"===t[0]){if(0!==i[t][2]&&i[t][2]!==M)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+i[t][2]);o.push(parseInt(t.slice(1),10))}else 1===i[t].length?s.push({index:parseInt(t,10),value:i[t][0]}):a.push({index:parseInt(t,10),delta:i[t]});for(t=(o=o.sort(F.numerically)).length-1;t>=0;t--){var l=i["_"+(n=o[t])],c=r.splice(n,1)[0];l[2]===M&&s.push({index:l[1],value:c})}var u=(s=s.sort(F.numericallyBy("index"))).length;for(t=0;t<u;t++){var d=s[t];r.splice(d.index,0,d.value)}var h=a.length,f=void 0;if(h>0)for(t=0;t<h;t++){var p=a[t];f=new v(e.left[p.index],p.delta),e.push(f,p.index)}e.children?e.exit():e.setResult(e.left).exit()}};z.filterName="arrays";var H=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],e.left[n.childName]=n.result;e.setResult(e.left).exit()}};H.filterName="arraysCollectChildren";var B=function(e){if(e.nested){if("a"===e.delta._t){var t=void 0,n=void 0;for(t in e.delta)"_t"!==t&&(n=new y(e.delta[t]),e.push(n,t));e.exit()}}else e.delta[2]===M&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),M]).exit())};B.filterName="arrays";var W=function(e,t,n){if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if(P(n)&&0===n[2])return"_"+t;var i=+t;for(var r in e){var o=e[r];if(P(o))if(o[2]===M){var s=parseInt(r.substr(1),10),a=o[1];if(a===+t)return s;s<=i&&a>i?i++:s>=i&&a<i&&i--}else 0===o[2]?parseInt(r.substr(1),10)<=i&&i++:1===o.length&&r<=i&&i--}return i};function U(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i={_t:"a"},r=0;r<t;r++){var o=(n=e.children[r]).newName;void 0===o&&(o=W(e.delta,n.childName,n.result)),i[o]!==n.result&&(i[o]=n.result)}e.setResult(i).exit()}}U.filterName="arraysCollectChildren";var q=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};function V(e,t){return e(t={exports:{}},t.exports),t.exports}q.filterName="dates";var G=V((function(e){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1,i=1,r=0;t.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[r,e]]:[];void 0===n&&(n=!0);var s=n,a=this.diff_commonPrefix(e,t),l=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var u=this.diff_compute_(e,t,s,o);return l&&u.unshift([r,l]),c&&u.push([r,c]),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,t,o,s){var a;if(!e)return[[i,t]];if(!t)return[[n,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return a=[[i,l.substring(0,u)],[r,c],[i,l.substring(u+c.length)]],e.length>t.length&&(a[0][0]=a[2][0]=n),a;if(1==c.length)return[[n,e],[i,t]];var d=this.diff_halfMatch_(e,t);if(d){var h=d[0],f=d[1],p=d[2],m=d[3],g=d[4],v=this.diff_main(h,p,o,s),y=this.diff_main(f,m,o,s);return v.concat([[r,g]],y)}return o&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,s):this.diff_bisect_(e,t,s)},t.prototype.diff_lineMode_=function(e,t,o){e=(f=this.diff_linesToChars_(e,t)).chars1,t=f.chars2;var s=f.lineArray,a=this.diff_main(e,t,!1,o);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push([r,""]);for(var l=0,c=0,u=0,d="",h="";l<a.length;){switch(a[l][0]){case i:u++,h+=a[l][1];break;case n:c++,d+=a[l][1];break;case r:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var f,p=(f=this.diff_main(d,h,!1,o)).length-1;p>=0;p--)a.splice(l,0,f[p]);l+=f.length}u=0,c=0,d="",h=""}l++}return a.pop(),a},t.prototype.diff_bisect_=function(e,t,r){for(var o=e.length,s=t.length,a=Math.ceil((o+s)/2),l=a,c=2*a,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var f=o-s,p=f%2!=0,m=0,g=0,v=0,y=0,_=0;_<a&&!((new Date).getTime()>r);_++){for(var b=-_+m;b<=_-g;b+=2){for(var x=l+b,w=(E=b==-_||b!=_&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-b;E<o&&w<s&&e.charAt(E)==t.charAt(w);)E++,w++;if(u[x]=E,E>o)g+=2;else if(w>s)m+=2;else if(p&&(S=l+f-b)>=0&&S<c&&-1!=d[S]&&E>=(C=o-d[S]))return this.diff_bisectSplit_(e,t,E,w,r)}for(var k=-_+v;k<=_-y;k+=2){for(var C,S=l+k,T=(C=k==-_||k!=_&&d[S-1]<d[S+1]?d[S+1]:d[S-1]+1)-k;C<o&&T<s&&e.charAt(o-C-1)==t.charAt(s-T-1);)C++,T++;if(d[S]=C,C>o)y+=2;else if(T>s)v+=2;else if(!p){var E;if((x=l+f-k)>=0&&x<c&&-1!=u[x])if(w=l+(E=u[x])-x,E>=(C=o-C))return this.diff_bisectSplit_(e,t,E,w,r)}}}return[[n,e],[i,t]]},t.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),s=t.substring(0,i),a=e.substring(n),l=t.substring(i),c=this.diff_main(o,s,!1,r),u=this.diff_main(a,l,!1,r);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function r(e){for(var t="",r=0,o=-1,s=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",r))&&(o=e.length-1);var a=e.substring(r,o+1);r=o+1,(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?t+=String.fromCharCode(i[a]):(t+=String.fromCharCode(s),i[a]=s,n[s++]=a)}return t}return n[0]="",{chars1:r(e),chars2:r(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)==t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)==t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=Math.min(n,i);if(e==t)return r;for(var o=0,s=1;;){var a=e.substring(r-s),l=t.indexOf(a);if(-1==l)return o;s+=l,0!=l&&e.substring(r-s)!=t.substring(0,s)||(o=s,s++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(e,t,n){for(var i,o,s,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=r.diff_commonPrefix(e.substring(n),t.substring(c)),h=r.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),i=e.substring(0,n-h),o=e.substring(n+d),s=t.substring(0,c-h),a=t.substring(c+d))}return 2*u.length>=e.length?[i,o,s,a,u]:null}var s,a,l,c,u,d=o(n,i,Math.ceil(n.length/4)),h=o(n,i,Math.ceil(n.length/2));return d||h?(s=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var t=!1,o=[],s=0,a=null,l=0,c=0,u=0,d=0,h=0;l<e.length;)e[l][0]==r?(o[s++]=l,c=d,u=h,d=0,h=0,a=e[l][1]):(e[l][0]==i?d+=e[l][1].length:h+=e[l][1].length,a&&a.length<=Math.max(c,u)&&a.length<=Math.max(d,h)&&(e.splice(o[s-1],0,[n,a]),e[o[s-1]+1][0]=i,s--,l=--s>0?o[s-1]:-1,c=0,u=0,d=0,h=0,a=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==n&&e[l][0]==i){var f=e[l-1][1],p=e[l][1],m=this.diff_commonOverlap_(f,p),g=this.diff_commonOverlap_(p,f);m>=g?(m>=f.length/2||m>=p.length/2)&&(e.splice(l,0,[r,p.substring(0,m)]),e[l-1][1]=f.substring(0,f.length-m),e[l+1][1]=p.substring(m),l++):(g>=f.length/2||g>=p.length/2)&&(e.splice(l,0,[r,f.substring(0,g)]),e[l-1][0]=i,e[l-1][1]=p.substring(0,p.length-g),e[l+1][0]=n,e[l+1][1]=f.substring(g),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),o=i.match(t.nonAlphaNumericRegex_),s=r.match(t.nonAlphaNumericRegex_),a=o&&i.match(t.whitespaceRegex_),l=s&&r.match(t.whitespaceRegex_),c=a&&i.match(t.linebreakRegex_),u=l&&r.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&n.match(t.blanklineStartRegex_);return d||h?5:c||u?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var i=1;i<e.length-1;){if(e[i-1][0]==r&&e[i+1][0]==r){var o=e[i-1][1],s=e[i][1],a=e[i+1][1],l=this.diff_commonSuffix(o,s);if(l){var c=s.substring(s.length-l);o=o.substring(0,o.length-l),s=c+s.substring(0,s.length-l),a=c+a}for(var u=o,d=s,h=a,f=n(o,s)+n(s,a);s.charAt(0)===a.charAt(0);){o+=s.charAt(0),s=s.substring(1)+a.charAt(0),a=a.substring(1);var p=n(o,s)+n(s,a);p>=f&&(f=p,u=o,d=s,h=a)}e[i-1][1]!=u&&(u?e[i-1][1]=u:(e.splice(i-1,1),i--),e[i][1]=d,h?e[i+1][1]=h:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,o=[],s=0,a=null,l=0,c=!1,u=!1,d=!1,h=!1;l<e.length;)e[l][0]==r?(e[l][1].length<this.Diff_EditCost&&(d||h)?(o[s++]=l,c=d,u=h,a=e[l][1]):(s=0,a=null),d=h=!1):(e[l][0]==n?h=!0:d=!0,a&&(c&&u&&d&&h||a.length<this.Diff_EditCost/2&&c+u+d+h==3)&&(e.splice(o[s-1],0,[n,a]),e[o[s-1]+1][0]=i,s--,a=null,c&&u?(d=h=!0,s=0):(l=--s>0?o[s-1]:-1,d=h=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([r,""]);for(var t,o=0,s=0,a=0,l="",c="";o<e.length;)switch(e[o][0]){case i:a++,c+=e[o][1],o++;break;case n:s++,l+=e[o][1],o++;break;case r:s+a>1?(0!==s&&0!==a&&(0!==(t=this.diff_commonPrefix(c,l))&&(o-s-a>0&&e[o-s-a-1][0]==r?e[o-s-a-1][1]+=c.substring(0,t):(e.splice(0,0,[r,c.substring(0,t)]),o++),c=c.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(c,l))&&(e[o][1]=c.substring(c.length-t)+e[o][1],c=c.substring(0,c.length-t),l=l.substring(0,l.length-t))),0===s?e.splice(o-a,s+a,[i,c]):0===a?e.splice(o-s,s+a,[n,l]):e.splice(o-s-a,s+a,[n,l],[i,c]),o=o-s-a+(s?1:0)+(a?1:0)+1):0!==o&&e[o-1][0]==r?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,a=0,s=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(o=1;o<e.length-1;)e[o-1][0]==r&&e[o+1][0]==r&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),u=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),u=!0)),o++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var r,o=0,s=0,a=0,l=0;for(r=0;r<e.length&&(e[r][0]!==i&&(o+=e[r][1].length),e[r][0]!==n&&(s+=e[r][1].length),!(o>t));r++)a=o,l=s;return e.length!=r&&e[r][0]===n?l:l+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],o=/&/g,s=/</g,a=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1].replace(o,"&amp;").replace(s,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(u){case i:t[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case n:t[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case r:t[c]="<span>"+d+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==i&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,o=0,s=0,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1];switch(l){case i:o+=c.length;break;case n:s+=c.length;break;case r:t+=Math.max(o,s),o=0,s=0}}return t+=Math.max(o,s)},t.prototype.diff_toDelta=function(e){for(var t=[],o=0;o<e.length;o++)switch(e[o][0]){case i:t[o]="+"+encodeURI(e[o][1]);break;case n:t[o]="-"+e[o][1].length;break;case r:t[o]="="+e[o][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,t){for(var o=[],s=0,a=0,l=t.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{o[s++]=[i,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var h=e.substring(a,a+=d);"="==l[c].charAt(0)?o[s++]=[r,h]:o[s++]=[n,h];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return o},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),r=this;function o(e,i){var o=e/t.length,s=Math.abs(n-i);return r.Match_Distance?o+s/r.Match_Distance:s?1:o}var s=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=e.lastIndexOf(t,n+t.length))&&(s=Math.min(o(0,a),s)));var l,c,u=1<<t.length-1;a=-1;for(var d,h=t.length+e.length,f=0;f<t.length;f++){for(l=0,c=h;l<c;)o(f,n+c)<=s?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var p=Math.max(1,n-c+1),m=Math.min(n+c,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<f)-1;for(var v=m;v>=p;v--){var y=i[e.charAt(v-1)];if(g[v]=0===f?(g[v+1]<<1|1)&y:(g[v+1]<<1|1)&y|(d[v+1]|d[v])<<1|1|d[v+1],g[v]&u){var _=o(f,v-1);if(_<=s){if(s=_,!((a=v-1)>n))break;p=Math.max(1,2*n-a)}}}if(o(f+1,n)>s)break;d=g}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=t.substring(e.start2-i,e.start2);o&&e.diffs.unshift([r,o]);var s=t.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([r,s]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+s.length,e.length2+=o.length+s.length}},t.prototype.patch_make=function(e,o,s){var a,l;if("string"==typeof e&&"string"==typeof o&&void 0===s)a=e,(l=this.diff_main(a,o,!0)).length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(e&&"object"==typeof e&&void 0===o&&void 0===s)l=e,a=this.diff_text1(l);else if("string"==typeof e&&o&&"object"==typeof o&&void 0===s)a=e,l=o;else{if("string"!=typeof e||"string"!=typeof o||!s||"object"!=typeof s)throw new Error("Unknown call format to patch_make.");a=e,l=s}if(0===l.length)return[];for(var c=[],u=new t.patch_obj,d=0,h=0,f=0,p=a,m=a,g=0;g<l.length;g++){var v=l[g][0],y=l[g][1];switch(d||v===r||(u.start1=h,u.start2=f),v){case i:u.diffs[d++]=l[g],u.length2+=y.length,m=m.substring(0,f)+y+m.substring(f);break;case n:u.length1+=y.length,u.diffs[d++]=l[g],m=m.substring(0,f)+m.substring(f+y.length);break;case r:y.length<=2*this.Patch_Margin&&d&&l.length!=g+1?(u.diffs[d++]=l[g],u.length1+=y.length,u.length2+=y.length):y.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,p),c.push(u),u=new t.patch_obj,d=0,p=m,h=f)}v!==i&&(h+=y.length),v!==n&&(f+=y.length)}return d&&(this.patch_addContext_(u,p),c.push(u)),c},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new t.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var o=this.patch_addPadding(e);t=o+t+o,this.patch_splitMax(e);for(var s=0,a=[],l=0;l<e.length;l++){var c,u,d=e[l].start2+s,h=this.diff_text1(e[l].diffs),f=-1;if(h.length>this.Match_MaxBits?-1!=(c=this.match_main(t,h.substring(0,this.Match_MaxBits),d))&&(-1==(f=this.match_main(t,h.substring(h.length-this.Match_MaxBits),d+h.length-this.Match_MaxBits))||c>=f)&&(c=-1):c=this.match_main(t,h,d),-1==c)a[l]=!1,s-=e[l].length2-e[l].length1;else if(a[l]=!0,s=c-d,h==(u=-1==f?t.substring(c,c+h.length):t.substring(c,f+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[l].diffs)+t.substring(c+h.length);else{var p=this.diff_main(h,u,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(p)/h.length>this.Patch_DeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(p);for(var m,g=0,v=0;v<e[l].diffs.length;v++){var y=e[l].diffs[v];y[0]!==r&&(m=this.diff_xIndex(p,g)),y[0]===i?t=t.substring(0,c+m)+y[1]+t.substring(c+m):y[0]===n&&(t=t.substring(0,c+m)+t.substring(c+this.diff_xIndex(p,g+y[1].length))),y[0]!==n&&(g+=y[1].length)}}}}return[t=t.substring(o.length,t.length-o.length),a]},t.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var o=e[0],s=o.diffs;if(0==s.length||s[0][0]!=r)s.unshift([r,n]),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>s[0][1].length){var a=t-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}return 0==(s=(o=e[e.length-1]).diffs).length||s[s.length-1][0]!=r?(s.push([r,n]),o.length1+=t,o.length2+=t):t>s[s.length-1][1].length&&(a=t-s[s.length-1][1].length,s[s.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a),n},t.prototype.patch_splitMax=function(e){for(var o=this.Match_MaxBits,s=0;s<e.length;s++)if(!(e[s].length1<=o)){var a=e[s];e.splice(s--,1);for(var l=a.start1,c=a.start2,u="";0!==a.diffs.length;){var d=new t.patch_obj,h=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([r,u]));0!==a.diffs.length&&d.length1<o-this.Patch_Margin;){var f=a.diffs[0][0],p=a.diffs[0][1];f===i?(d.length2+=p.length,c+=p.length,d.diffs.push(a.diffs.shift()),h=!1):f===n&&1==d.diffs.length&&d.diffs[0][0]==r&&p.length>2*o?(d.length1+=p.length,l+=p.length,h=!1,d.diffs.push([f,p]),a.diffs.shift()):(p=p.substring(0,o-d.length1-this.Patch_Margin),d.length1+=p.length,l+=p.length,f===r?(d.length2+=p.length,c+=p.length):h=!1,d.diffs.push([f,p]),p==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(p.length))}u=(u=this.diff_text2(d.diffs)).substring(u.length-this.Patch_Margin);var m=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==m&&(d.length1+=m.length,d.length2+=m.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===r?d.diffs[d.diffs.length-1][1]+=m:d.diffs.push([r,m])),h||e.splice(++s,0,d)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var o=[];if(!e)return o;for(var s=e.split("\n"),a=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<s.length;){var c=s[a].match(l);if(!c)throw new Error("Invalid patch string: "+s[a]);var u=new t.patch_obj;for(o.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),a++;a<s.length;){var d=s[a].charAt(0);try{var h=decodeURI(s[a].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+h)}if("-"==d)u.diffs.push([n,h]);else if("+"==d)u.diffs.push([i,h]);else if(" "==d)u.diffs.push([r,h]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+h)}a++}}return o},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case i:e="+";break;case n:e="-";break;case r:e=" "}t[o+1]=e+encodeURI(this.diffs[o][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=r})),K=2,Y=60,X=null,J=function(e){if(!X){var t=void 0;if("undefined"!=typeof diff_match_patch)t="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(G)try{t=G&&new G}catch(e){t=null}if(!t){if(!e)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}X={diff:function(e,n){return t.patch_toText(t.patch_make(e,n))},patch:function(e,n){for(var i=t.patch_apply(t.patch_fromText(n),e),r=0;r<i[1].length;r++)i[1][r]||(new Error("text patch failed").textPatchFailed=!0);return i[0]}}}return X},Q=function(e){if("string"===e.leftType){var t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||Y;if(e.left.length<t||e.right.length<t)e.setResult([e.left,e.right]).exit();else{var n=J();if(n){var i=n.diff;e.setResult([i(e.left,e.right),0,K]).exit()}else e.setResult([e.left,e.right]).exit()}}};Q.filterName="texts";var Z=function(e){if(!e.nested&&e.delta[2]===K){var t=J(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()}};Z.filterName="texts";var ee=function(e){var t=void 0,n=void 0,i=void 0,r=void 0,o=void 0,s=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(t=0,n=(i=e.split("\n")).length;t<n;t++){var l=(r=i[t]).slice(0,1);"@"===l?(s=a.exec(r),i[t]="@@ -"+s[3]+","+s[4]+" +"+s[1]+","+s[2]+" @@"):"+"===l?(i[t]="-"+i[t].slice(1),"+"===i[t-1].slice(0,1)&&(o=i[t],i[t]=i[t-1],i[t-1]=o)):"-"===l&&(i[t]="+"+i[t].slice(1))}return i.join("\n")},te=function(e){e.nested||e.delta[2]===K&&e.setResult([ee(e.delta[0]),0,K]).exit()};te.filterName="texts";var ne=function(){function e(t){i(this,e),this.processor=new u(t),this.processor.pipe(new d("diff").append(k,b,q,Q,C,R).shouldHaveResult()),this.processor.pipe(new d("patch").append(T,H,x,Z,S,z).shouldHaveResult()),this.processor.pipe(new d("reverse").append(A,U,w,te,E,B).shouldHaveResult())}return r(e,[{key:"options",value:function(){var e;return(e=this.processor).options.apply(e,arguments)}},{key:"diff",value:function(e,t){return this.processor.process(new g(e,t))}},{key:"patch",value:function(e,t){return this.processor.process(new v(e,t))}},{key:"reverse",value:function(e){return this.processor.process(new y(e))}},{key:"unpatch",value:function(e,t){return this.patch(e,this.reverse(t))}},{key:"clone",value:function(e){return m(e)}}]),e}(),ie="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},re="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},oe=function(e){return"_"===e.substr(0,1)?e.slice(1):e},se=function(e){return"_t"===e?-1:"_"===e.substr(0,1)?parseInt(e.slice(1),10):parseInt(e,10)+.1},ae=function(e,t){return se(e)-se(t)},le=function(){function e(){i(this,e)}return r(e,[{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),this.finalize(n)}},{key:"prepareContext",value:function(e){e.buffer=[],e.out=function(){var e;(e=this.buffer).push.apply(e,arguments)}}},{key:"typeFormattterNotFound",value:function(e,t){throw new Error("cannot format delta type: "+t)}},{key:"typeFormattterErrorFormatter",value:function(e,t){return t.toString()}},{key:"finalize",value:function(e){var t=e.buffer;if(ie(t))return t.join("")}},{key:"recurse",value:function(e,t,n,i,r,o,s){var a=t&&o?o.value:n;if(void 0!==t||void 0!==i){var l=this.getDeltaType(t,o),c="node"===l?"a"===t._t?"array":"object":"";void 0!==i?this.nodeBegin(e,i,r,l,c,s):this.rootBegin(e,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(e,l)).call(this,e,t,a,i,r,o)}catch(n){this.typeFormattterErrorFormatter(e,n,t,a,i,r,o),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==i?this.nodeEnd(e,i,r,l,c,s):this.rootEnd(e,l,c)}}},{key:"formatDeltaChildren",value:function(e,t,n){var i=this;this.forEachDeltaKey(t,n,(function(r,o,s,a){i.recurse(e,t[r],n?n[o]:void 0,r,o,s,a)}))}},{key:"forEachDeltaKey",value:function(e,t,n){var i=re(e),r="a"===e._t,o={},s=void 0;if(void 0!==t)for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(void 0!==e[s]||r&&void 0!==e["_"+s]||i.push(s));for(s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=e[s];ie(a)&&3===a[2]&&(o[a[1].toString()]={key:s,value:t&&t[parseInt(s.substr(1))]},!1!==this.includeMoveDestinations&&void 0===t&&void 0===e[a[1]]&&i.push(a[1].toString()))}r?i.sort(ae):i.sort();for(var l=0,c=i.length;l<c;l++){var u=i[l];if(!r||"_t"!==u){var d=r?"number"==typeof u?u:parseInt(oe(u),10):u,h=l===c-1;n(u,d,o[d],h)}}}},{key:"getDeltaType",value:function(e,t){if(void 0===e)return void 0!==t?"movedestination":"unchanged";if(ie(e)){if(1===e.length)return"added";if(2===e.length)return"modified";if(3===e.length&&0===e[2])return"deleted";if(3===e.length&&2===e[2])return"textdiff";if(3===e.length&&3===e[2])return"moved"}else if("object"===(void 0===e?"undefined":n(e)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(e){for(var t=[],n=e.split("\n@@ "),i=0,r=n.length;i<r;i++){var o=n[i],s={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(o).slice(1);s.location={line:a[0],chr:a[1]};for(var l=o.split("\n").slice(1),c=0,u=l.length;c<u;c++){var d=l[c];if(d.length){var h={type:"context"};"+"===d.substr(0,1)?h.type="added":"-"===d.substr(0,1)&&(h.type="deleted"),h.text=d.slice(1),s.pieces.push(h)}}t.push(s)}return t}}]),e}(),ce=Object.freeze({default:le}),ue=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),r(t,[{key:"typeFormattterErrorFormatter",value:function(e,t){e.out('<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatValue",value:function(e,t){e.out("<pre>"+de(JSON.stringify(t,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,r=n.length;i<r;i++){var o=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=o.pieces,a=0,l=s.length;a<l;a++){var c=s[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+de(decodeURI(c.text))+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){var i="jsondiffpatch-"+t+(n?" jsondiffpatch-child-node-type-"+n:"");e.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(e){e.out("</div>"+(e.hasArrows?'<script type="text/javascript">setTimeout('+he.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(e,t,n,i,r){var o="jsondiffpatch-"+i+(r?" jsondiffpatch-child-node-type-"+r:"");e.out('<li class="'+o+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(e){e.out("</li>")}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_node",value:function(e,t,n){var i="a"===t._t?"array":"object";e.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(e,t,n),e.out("</ul>")}},{key:"format_added",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_modified",value:function(e,t){e.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(e,t[1]),e.out("</div>")}},{key:"format_deleted",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_moved",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-moved-destination">'+t[1]+"</div>"),e.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),e.hasArrows=!0}},{key:"format_textdiff",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(e,t[0]),e.out("</div>")}}]),t}(le);function de(e){for(var t=e,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],i=0;i<n.length;i++)t=t.replace(n[i][0],n[i][1]);return t}var he=function(e){var t=e||document,n=function(e){var t=e.textContent,n=e.innerText;return t||n},i=function(e,t){for(var n=e.children,i=0,r=n.length;i<r;i++)t(n[i],i)};!function(e,t,n){for(var i=e.querySelectorAll(t),r=0,o=i.length;r<o;r++)n(i[r])}(t,".jsondiffpatch-arrow",(function(e){var t=e.parentNode,r=e.children,o=e.style,s=t,a=r[0],l=a.children[1];a.style.display="none";var c=n(s.querySelector(".jsondiffpatch-moved-destination")),u=s.parentNode,d=void 0;if(i(u,(function(e){e.getAttribute("data-key")===c&&(d=e)})),d)try{var h=d.offsetTop-s.offsetTop;a.setAttribute("height",Math.abs(h)+6),o.top=-8+(h>0?0:h)+"px";var f=h>0?"M30,0 Q-10,"+Math.round(h/2)+" 26,"+(h-4):"M30,"+-h+" Q-10,"+Math.round(-h/2)+" 26,4";l.setAttribute("d",f),a.style.display=""}catch(e){}}))},fe=function(e,t,n){var i=t||document.body,r="jsondiffpatch-unchanged-",o={showing:r+"showing",hiding:r+"hiding",visible:r+"visible",hidden:r+"hidden"},s=i.classList;if(s){if(!n)return s.remove(o.showing),s.remove(o.hiding),s.remove(o.visible),s.remove(o.hidden),void(!1===e&&s.add(o.hidden));!1===e?(s.remove(o.showing),s.add(o.visible),setTimeout((function(){s.add(o.hiding)}),10)):(s.remove(o.hiding),s.add(o.showing),s.remove(o.hidden));var a=setInterval((function(){he(i)}),100);setTimeout((function(){s.remove(o.showing),s.remove(o.hiding),!1===e?(s.add(o.hidden),s.remove(o.visible)):(s.add(o.visible),s.remove(o.hidden)),setTimeout((function(){s.remove(o.visible),clearInterval(a)}),n+400)}),n)}},pe=function(e,t){return fe(!1,e,t)},me=void 0;function ge(e,t){return me||(me=new ue),me.format(e,t)}var ve=Object.freeze({showUnchanged:fe,hideUnchanged:pe,default:ue,format:ge}),ye=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return s(t,e),r(t,[{key:"prepareContext",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},e.row=function(t,n){e.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),e.out(e.indentPad),e.out('</pre><pre style="display: inline-block">'),e.out(t),e.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),e.out(n),e.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.row("",'<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,r=n.length;i<r;i++){var o=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=o.pieces,a=0,l=s.length;a<l;a++){var c=s[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){e.out('<table class="jsondiffpatch-annotated-delta">'),"node"===t&&(e.row("{"),e.indent()),"array"===n&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(e,t){"node"===t&&(e.indent(-1),e.row("}")),e.out("</table>")}},{key:"nodeBegin",value:function(e,t,n,i,r){e.row("&quot;"+t+"&quot;: {"),"node"===i&&e.indent(),"array"===r&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(e,t,n,i,r,o){"node"===i&&e.indent(-1),e.row("}"+(o?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}}]),t}(le),_e=function(e){return'<pre style="display:inline-block">&quot;'+e+"&quot;</pre>"},be={added:function(e,t,n,i){var r=" <pre>([newValue])</pre>";return void 0===i?"new value"+r:"number"==typeof i?"insert at index "+i+r:"add property "+_e(i)+r},modified:function(e,t,n,i){var r=" <pre>([previousValue, newValue])</pre>";return void 0===i?"modify value"+r:"number"==typeof i?"modify at index "+i+r:"modify property "+_e(i)+r},deleted:function(e,t,n,i){var r=" <pre>([previousValue, 0, 0])</pre>";return void 0===i?"delete value"+r:"number"==typeof i?"remove index "+i+r:"delete property "+_e(i)+r},moved:function(e,t,n,i){return'move from <span title="(position to remove at original state)">index '+i+'</span> to <span title="(position to insert at final state)">index '+e[1]+"</span>"},textdiff:function(e,t,n,i){return"text diff"+(void 0===i?"":"number"==typeof i?" at index "+i:" at property "+_e(i))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},xe=function(e,t){var n=this.getDeltaType(t),i=be[n],r=i&&i.apply(i,Array.prototype.slice.call(arguments,1)),o=JSON.stringify(t,null,2);"textdiff"===n&&(o=o.split("\\n").join('\\n"+\n   "')),e.indent(),e.row(o,r),e.indent(-1)};ye.prototype.format_added=xe,ye.prototype.format_modified=xe,ye.prototype.format_deleted=xe,ye.prototype.format_moved=xe,ye.prototype.format_textdiff=xe;var we=void 0;function ke(e,t){return we||(we=new ye),we.format(e,t)}var Ce=Object.freeze({default:ye,format:ke}),Se={add:"add",remove:"remove",replace:"replace",move:"move"},Te=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!0,e}return s(t,e),r(t,[{key:"prepareContext",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.result=[],e.path=[],e.pushCurrentOp=function(e){var t=e.op,n=e.value,i={op:t,path:this.currentPath()};void 0!==n&&(i.value=n),this.result.push(i)},e.pushMoveOp=function(e){var t=this.currentPath();this.result.push({op:Se.move,from:t,path:this.toPath(e)})},e.currentPath=function(){return"/"+this.path.join("/")},e.toPath=function(e){var t=this.path.slice();return t[t.length-1]=e,"/"+t.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.out("[ERROR] "+t)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(e,t,n){e.path.push(n)}},{key:"nodeEnd",value:function(e){e.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){e.pushCurrentOp({op:Se.add,value:t[0]})}},{key:"format_modified",value:function(e,t){e.pushCurrentOp({op:Se.replace,value:t[1]})}},{key:"format_deleted",value:function(e){e.pushCurrentOp({op:Se.remove})}},{key:"format_moved",value:function(e,t){var n=t[1];e.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),n.result}}]),t}(le),Ee=function(e){return e[e.length-1]},Ae=function(e,t){return e.sort(t),e},$e=function(e,t){var n=parseInt(e,10),i=parseInt(t,10);return isNaN(n)||isNaN(i)?0:i-n},De=function(e){return Ae(e,(function(e,t){var n=e.path.split("/"),i=t.path.split("/");return n.length!==i.length?n.length-i.length:$e(Ee(n),Ee(i))}))},Oe=function(e,t){var n=Array(t.length+1).fill().map((function(){return[]}));return e.map((function(e){var n=t.map((function(t){return t(e)})).indexOf(!0);return n<0&&(n=t.length),{item:e,position:n}})).reduce((function(e,t){return e[t.position].push(t.item),e}),n)},Ne=function(e){return"move"===e.op},Me=function(e){return"remove"===e.op},Pe=function(e){var t=Oe(e,[Ne,Me]),n=l(t,3),i=n[0],r=n[1],o=n[2],s=De(r);return[].concat(c(s),c(i),c(o))},Le=void 0,je=function(e,t){return Le||(Le=new Te),Pe(Le.format(e,t))},Ie=function(e,t){console.log(je(e,t))},Re=Object.freeze({default:Te,partitionOps:Oe,format:je,log:Ie});function Fe(e){return t&&t[e]||function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}}var ze={added:Fe("green"),deleted:Fe("red"),movedestination:Fe("gray"),moved:Fe("yellow"),unchanged:Fe("gray"),error:Fe("white.bgRed"),textDiffLine:Fe("gray")},He=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return s(t,e),r(t,[{key:"prepareContext",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},e.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},e.out=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t.length;i<r;i++){var o=t[i].split("\n").join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(o=this.color[0](o)),this.buffer.push(o)}},e.pushColor=function(e){this.color=this.color||[],this.color.unshift(e)},e.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.pushColor(ze.error),e.out("[ERROR]"+t),e.popColor()}},{key:"formatValue",value:function(e,t){e.out(JSON.stringify(t,null,2))}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.indent();for(var i=0,r=n.length;i<r;i++){var o=n[i];e.pushColor(ze.textDiffLine),e.out(o.location.line+","+o.location.chr+" "),e.popColor();for(var s=o.pieces,a=0,l=s.length;a<l;a++){var c=s[a];e.pushColor(ze[c.type]),e.out(c.text),e.popColor()}i<r-1&&e.outLine()}e.indent(-1)}},{key:"rootBegin",value:function(e,t,n){e.pushColor(ze[t]),"node"===t&&(e.out("array"===n?"[":"{"),e.indent())}},{key:"rootEnd",value:function(e,t,n){"node"===t&&(e.indent(-1),e.out("array"===n?"]":"}")),e.popColor()}},{key:"nodeBegin",value:function(e,t,n,i,r){e.pushColor(ze[i]),e.out(n+": "),"node"===i&&(e.out("array"===r?"[":"{"),e.indent())}},{key:"nodeEnd",value:function(e,t,n,i,r,o){"node"===i&&(e.indent(-1),e.out("array"===r?"]":"}"+(o?"":","))),o||e.outLine(),e.popColor()}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_modified",value:function(e,t){e.pushColor(ze.deleted),this.formatValue(e,t[0]),e.popColor(),e.out(" => "),e.pushColor(ze.added),this.formatValue(e,t[1]),e.popColor()}},{key:"format_deleted",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_moved",value:function(e,t){e.out("==> "+t[1])}},{key:"format_textdiff",value:function(e,t){this.formatTextDiffString(e,t[0])}}]),t}(le),Be=void 0,We=function(e,t){return Be||(Be=new He),Be.format(e,t)};function Ue(e,t){console.log(We(e,t))}var qe=Object.freeze({default:He,format:We,log:Ue}),Ve=Object.freeze({base:ce,html:ve,annotated:Ce,jsonpatch:Re,console:qe});function Ge(e,t){var n=void 0;return"string"==typeof t&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(t))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6],+(n[7]||0))):t}function Ke(e){return new ne(e)}var Ye=void 0;function Xe(){return Ye||(Ye=new ne),Ye.diff.apply(Ye,arguments)}function Je(){return Ye||(Ye=new ne),Ye.patch.apply(Ye,arguments)}function Qe(){return Ye||(Ye=new ne),Ye.unpatch.apply(Ye,arguments)}function Ze(){return Ye||(Ye=new ne),Ye.reverse.apply(Ye,arguments)}function et(){return Ye||(Ye=new ne),Ye.clone.apply(Ye,arguments)}e.DiffPatcher=ne,e.formatters=Ve,e.console=qe,e.create=Ke,e.dateReviver=Ge,e.diff=Xe,e.patch=Je,e.unpatch=Qe,e.reverse=Ze,e.clone=et,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2837))},8686:function(e,t,n){var i="[object Symbol]",r=/[&<>"'`]/g,o=RegExp(r.source),s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")();var c,u=(c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==c?void 0:c[e]}),d=Object.prototype.toString,h=l.Symbol,f=h?h.prototype:void 0,p=f?f.toString:void 0;function m(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==i}(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":m(t))&&o.test(e)?e.replace(r,u):e}},9462:function(e){e.exports=function(e){var t=[];return e=void 0===e?null:e,n.set=function(n){e=n,t.forEach((function(e){e(n)}))},n;function n(n){return n?(t.push(n),function(){t.splice(t.indexOf(n),1)}):e}}},6470:function(e){"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",r=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",r=0):r=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),r=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,r=47===s.charCodeAt(0))}return i=n(i,!r),r?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&r&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var o=e.length,s=o-r,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var l=n.length-a,c=s<l?s:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else s>c&&(47===e.charCodeAt(r+d)?u=d:0===d&&(u=0));break}var h=e.charCodeAt(r+d);if(h!==n.charCodeAt(a+d))break;47===h&&(u=d)}var f="";for(d=r+u+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===f.length?f+="..":f+="/..");return f.length>0?f+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,r=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!s){r=i+1;break}}else-1===l&&(s=!1,l=i+1),a>=0&&(c===n.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=l))}return r===o?o=l:-1===o&&(o=e.length),e.slice(r,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(r,o)},extname:function(e){t(e);for(var n=-1,i=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===r&&(o=!1,r=a+1),46===l?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){i=a+1;break}}return-1===n||-1===r||0===s||1===s&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}("/",e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,r=e.charCodeAt(0),o=47===r;o?(n.root="/",i=1):i=0;for(var s=-1,a=0,l=-1,c=!0,u=e.length-1,d=0;u>=i;--u)if(47!==(r=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===r?-1===s?s=u:1!==d&&(d=1):-1!==s&&(d=-1);else if(!c){a=u+1;break}return-1===s||-1===l||0===d||1===d&&s===l-1&&s===a+1?-1!==l&&(n.base=n.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,l)):(n.name=e.slice(a,s),n.base=e.slice(a,l)),n.ext=e.slice(s,l)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},9623:function(e){e.exports=function(e,t){var n,i,r,o,s=0;return function(){n=this,i=arguments;var e=new Date-s;return o||(e>=t?a():o=setTimeout(a,t-e)),r};function a(){o=0,s=+new Date,r=e.apply(n,i),n=null,i=null}}},540:function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,r=1;r<i;++r)t[r]=t[r].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function r(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function s(e,t){var n=e;if(t)for(var i in t)n[i]=t[i];return n}function a(e){var i="[A-Za-z]",r="[0-9]",o=t(r,"[A-Fa-f]"),s=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,r,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),d=n(i+t(i,r,"[\\+\\-\\.]")+"*"),h=n(n(s+"|"+t(u,a,"[\\:]"))+"*"),f=(n(n("25[0-5]")+"|"+n("2[0-4]"+r)+"|"+n("1"+r+r)+"|"+n("[1-9]"+r)+"|"+r),n(n("25[0-5]")+"|"+n("2[0-4]"+r)+"|"+n("1"+r+r)+"|"+n("0?[1-9]"+r)+"|0?0?"+r)),p=n(f+"\\."+f+"\\."+f+"\\."+f),m=n(o+"{1,4}"),g=n(n(m+"\\:"+m)+"|"+p),v=n(n(m+"\\:")+"{6}"+g),y=n("\\:\\:"+n(m+"\\:")+"{5}"+g),_=n(n(m)+"?\\:\\:"+n(m+"\\:")+"{4}"+g),b=n(n(n(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+n(m+"\\:")+"{3}"+g),x=n(n(n(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+n(m+"\\:")+"{2}"+g),w=n(n(n(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+g),k=n(n(n(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+g),C=n(n(n(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),S=n(n(n(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),T=n([v,y,_,b,x,w,k,C,S].join("|")),E=n(n(u+"|"+s)+"+"),A=(n(T+"\\%25"+E),n(T+n("\\%25|\\%(?!"+o+"{2})")+E)),$=n("[vV]"+o+"+\\."+t(u,a,"[\\:]")+"+"),D=n("\\["+n(A+"|"+T+"|"+$)+"\\]"),O=n(n(s+"|"+t(u,a))+"*"),N=n(D+"|"+p+"(?!"+O+")|"+O),M=n(r+"*"),P=n(n(h+"@")+"?"+N+n("\\:"+M)+"?"),L=n(s+"|"+t(u,a,"[\\:\\@]")),j=n(L+"*"),I=n(L+"+"),R=n(n(s+"|"+t(u,a,"[\\@]"))+"+"),F=n(n("\\/"+j)+"*"),z=n("\\/"+n(I+F)+"?"),H=n(R+F),B=n(I+F),W="(?!"+L+")",U=(n(F+"|"+z+"|"+H+"|"+B+"|"+W),n(n(L+"|"+t("[\\/\\?]",c))+"*")),q=n(n(L+"|[\\/\\?]")+"*"),V=n(n("\\/\\/"+P+F)+"|"+z+"|"+B+"|"+W),G=n(d+"\\:"+V+n("\\?"+U)+"?"+n("\\#"+q)+"?"),K=n(n("\\/\\/"+P+F)+"|"+z+"|"+H+"|"+W),Y=n(K+n("\\?"+U)+"?"+n("\\#"+q)+"?");return n(G+"|"+Y),n(d+"\\:"+V+n("\\?"+U)+"?"),n(n("\\/\\/("+n("("+h+")@")+"?("+N+")"+n("\\:("+M+")")+"?)")+"?("+F+"|"+z+"|"+B+"|"+W+")"),n("\\?("+U+")"),n("\\#("+q+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+N+")"+n("\\:("+M+")")+"?)")+"?("+F+"|"+z+"|"+H+"|"+W+")"),n("\\?("+U+")"),n("\\#("+q+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+N+")"+n("\\:("+M+")")+"?)")+"?("+F+"|"+z+"|"+B+"|"+W+")"),n("\\?("+U+")"),n("\\#("+q+")"),n("("+h+")@"),n("\\:("+M+")"),{NOT_SCHEME:new RegExp(t("[^]",i,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+T+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+E+")")+"?\\]?$")}}var l=a(!1),c=a(!0),u=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=2147483647,f=36,p=1,m=26,g=38,v=700,y=72,_=128,b="-",x=/^xn--/,w=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=f-p,T=Math.floor,E=String.fromCharCode;function A(e){throw new RangeError(C[e])}function $(e,t){for(var n=[],i=e.length;i--;)n[i]=t(e[i]);return n}function D(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+$((e=e.replace(k,".")).split("."),t).join(".")}function O(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}var N=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:f},M=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},P=function(e,t,n){var i=0;for(e=n?T(e/v):e>>1,e+=T(e/t);e>S*m>>1;i+=f)e=T(e/S);return T(i+(S+1)*e/(e+g))},L=function(e){var t=[],n=e.length,i=0,r=_,o=y,s=e.lastIndexOf(b);s<0&&(s=0);for(var a=0;a<s;++a)e.charCodeAt(a)>=128&&A("not-basic"),t.push(e.charCodeAt(a));for(var l=s>0?s+1:0;l<n;){for(var c=i,u=1,d=f;;d+=f){l>=n&&A("invalid-input");var g=N(e.charCodeAt(l++));(g>=f||g>T((h-i)/u))&&A("overflow"),i+=g*u;var v=d<=o?p:d>=o+m?m:d-o;if(g<v)break;var x=f-v;u>T(h/x)&&A("overflow"),u*=x}var w=t.length+1;o=P(i-c,w,0==c),T(i/w)>h-r&&A("overflow"),r+=T(i/w),i%=w,t.splice(i++,0,r)}return String.fromCodePoint.apply(String,t)},j=function(e){var t=[],n=(e=O(e)).length,i=_,r=0,o=y,s=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d<128&&t.push(E(d))}}catch(e){a=!0,l=e}finally{try{!s&&u.return&&u.return()}finally{if(a)throw l}}var g=t.length,v=g;for(g&&t.push(b);v<n;){var x=h,w=!0,k=!1,C=void 0;try{for(var S,$=e[Symbol.iterator]();!(w=(S=$.next()).done);w=!0){var D=S.value;D>=i&&D<x&&(x=D)}}catch(e){k=!0,C=e}finally{try{!w&&$.return&&$.return()}finally{if(k)throw C}}var N=v+1;x-i>T((h-r)/N)&&A("overflow"),r+=(x-i)*N,i=x;var L=!0,j=!1,I=void 0;try{for(var R,F=e[Symbol.iterator]();!(L=(R=F.next()).done);L=!0){var z=R.value;if(z<i&&++r>h&&A("overflow"),z==i){for(var H=r,B=f;;B+=f){var W=B<=o?p:B>=o+m?m:B-o;if(H<W)break;var U=H-W,q=f-W;t.push(E(M(W+U%q,0))),H=T(U/q)}t.push(E(M(H,0))),o=P(r,N,v==g),r=0,++v}}}catch(e){j=!0,I=e}finally{try{!L&&F.return&&F.return()}finally{if(j)throw I}}++r,++i}return t.join("")},I=function(e){return D(e,(function(e){return x.test(e)?L(e.slice(4).toLowerCase()):e}))},R=function(e){return D(e,(function(e){return w.test(e)?"xn--"+j(e):e}))},F={version:"2.1.0",ucs2:{decode:O,encode:function(e){return String.fromCodePoint.apply(String,d(e))}},decode:L,encode:j,toASCII:R,toUnicode:I},z={};function H(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function B(e){for(var t="",n=0,i=e.length;n<i;){var r=parseInt(e.substr(n+1,2),16);if(r<128)t+=String.fromCharCode(r),n+=3;else if(r>=194&&r<224){if(i-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&r)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(r>=224){if(i-n>=9){var s=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function W(e,t){function n(e){var n=B(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,H).replace(t.PCT_ENCODED,r)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,H).replace(t.PCT_ENCODED,r)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,H).replace(t.PCT_ENCODED,r)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,H).replace(t.PCT_ENCODED,r)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,H).replace(t.PCT_ENCODED,r)),e}function U(e){return e.replace(/^0*(.*)/,"$1")||"0"}function q(e,t){var n=e.match(t.IPV4ADDRESS)||[],i=u(n,2)[1];return i?i.split(".").map(U).join("."):e}function V(e,t){var n=e.match(t.IPV6ADDRESS)||[],i=u(n,3),r=i[1],o=i[2];if(r){for(var s=r.toLowerCase().split("::").reverse(),a=u(s,2),l=a[0],c=a[1],d=c?c.split(":").map(U):[],h=l.split(":").map(U),f=t.IPV4ADDRESS.test(h[h.length-1]),p=f?7:8,m=h.length-p,g=Array(p),v=0;v<p;++v)g[v]=d[v]||h[m+v]||"";f&&(g[p-1]=q(g[p-1],t));var y=g.reduce((function(e,t,n){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===n?i.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(y&&y.length>1){var b=g.slice(0,y.index),x=g.slice(y.index+y.length);_=b.join(":")+"::"+x.join(":")}else _=g.join(":");return o&&(_+="%"+o),_}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,K=void 0==="".match(/(){0}/)[1];function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var r=e.match(G);if(r){K?(n.scheme=r[1],n.userinfo=r[3],n.host=r[4],n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=r[7],n.fragment=r[8],isNaN(n.port)&&(n.port=r[5])):(n.scheme=r[1]||void 0,n.userinfo=-1!==e.indexOf("@")?r[3]:void 0,n.host=-1!==e.indexOf("//")?r[4]:void 0,n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=-1!==e.indexOf("?")?r[7]:void 0,n.fragment=-1!==e.indexOf("#")?r[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),n.host&&(n.host=V(q(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=z[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)W(n,i);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=F.toASCII(n.host.replace(i.PCT_ENCODED,B).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}W(n,l)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function X(e,t){var n=!1!==t.iri?c:l,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(V(q(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}var J=/^\.\.?\//,Q=/^\/\.(\/|$)/,Z=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(J))e=e.replace(J,"");else if(e.match(Q))e=e.replace(Q,"/");else if(e.match(Z))e=e.replace(Z,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];e=e.slice(i.length),t.push(i)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,i=[],r=z[(t.scheme||e.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||r&&r.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,B).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}W(e,n),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var o=X(e,t);if(void 0!==o&&("suffix"!==t.reference&&i.push("//"),i.push(o),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var s=e.path;t.absolutePath||r&&r.absolutePath||(s=te(s)),void 0===o&&(s=s.replace(/^\/\//,"/%2F")),i.push(s)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=Y(ne(e,n),n),t=Y(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=te(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function re(e,t,n){var i=s({scheme:"null"},n);return ne(ie(Y(e,i),Y(t,i),i,!0),i)}function oe(e,t){return"string"==typeof e?e=ne(Y(e,t),t):"object"===i(e)&&(e=Y(ne(e,t),t)),e}function se(e,t,n){return"string"==typeof e?e=ne(Y(e,n),n):"object"===i(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(Y(t,n),n):"object"===i(t)&&(t=ne(t,n)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,H)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,B)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function de(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=de(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(de(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),i=u(n,2),r=i[0],o=i[1];e.path=r&&"/"!==r?r:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},fe={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},pe={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ve=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ye="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",_e=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),be="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xe=new RegExp(me,"g"),we=new RegExp(ve,"g"),ke=new RegExp(t("[^]",ye,"[\\.]",'[\\"]',_e),"g"),Ce=new RegExp(t("[^]",me,be),"g"),Se=Ce;function Te(e){var t=B(e);return t.match(xe)?t:e}var Ee={scheme:"mailto",parse:function(e,t){var n=e,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var r=!1,o={},s=n.query.split("&"),a=0,l=s.length;a<l;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,h=u.length;d<h;++d)i.push(u[d]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:r=!0,o[le(c[0],t)]=le(c[1],t)}}r&&(n.headers=o)}n.query=void 0;for(var f=0,p=i.length;f<p;++f){var m=i[f].split("@");if(m[0]=le(m[0]),t.unicodeSupport)m[1]=le(m[1],t).toLowerCase();else try{m[1]=F.toASCII(le(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[f]=m.join("@")}return n},serialize:function(e,t){var n=e,i=o(e.to);if(i){for(var s=0,a=i.length;s<a;++s){var l=String(i[s]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(we,Te).replace(we,r).replace(ke,H),d=l.slice(c+1);try{d=t.iri?F.toUnicode(d):F.toASCII(le(d,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=u+"@"+d}n.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var f=[];for(var p in h)h[p]!==pe[p]&&f.push(p.replace(we,Te).replace(we,r).replace(Ce,H)+"="+h[p].replace(we,Te).replace(we,r).replace(Se,H));return f.length&&(n.query=f.join("&")),n}},Ae=/^([^\:]+)\:(.*)/,$e={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Ae),i=e;if(n){var r=t.scheme||i.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=r+":"+(t.nid||o),l=z[a];i.nid=o,i.nss=s,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",i=e.nid,r=n+":"+(t.nid||i),o=z[r];o&&(e=o.serialize(e,t));var s=e,a=e.nss;return s.path=(i||t.nid)+":"+a,s}},De=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Oe={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(De)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};z[ce.scheme]=ce,z[ue.scheme]=ue,z[he.scheme]=he,z[fe.scheme]=fe,z[Ee.scheme]=Ee,z[$e.scheme]=$e,z[Oe.scheme]=Oe,e.SCHEMES=z,e.pctEncChar=H,e.pctDecChars=B,e.parse=Y,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=ie,e.resolve=re,e.normalize=oe,e.equal=se,e.escapeComponent=ae,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=n(9755),t=n.n(e),i=n(1182),r=n.n(i);n(2466);class o{constructor(e,n,i,o){this._el=r().create(`\n    <div title="${e}">\n      ${n}\n    </div>\n    `),this._$dialog=t()(this._el),this._$dialog.on("dialogclose",(()=>{requestAnimationFrame((()=>this._$dialog.dialog("destroy")))})),i&&(o={...o,buttons:[{text:i,click:()=>this.close()}]}),this._option=o}get el(){return this._el}get button(){return this._$dialog.dialog("widget")[0].querySelector(".ui-dialog-buttonpane button")}open(){this._$dialog.dialog({dialogClass:"textae-editor__dialog",height:"auto",modal:!0,resizable:!1,width:550,...this._option})}close(){this._$dialog.dialog("close")}}class s extends o{constructor(){super("Help (Keyboard short-cuts)",'<div class="textae-tool__key-help"></div>',null,{height:313,width:523})}}const a=new s;class l{constructor(){this.editorList=[],this.selectedEditor=null}push(e){var t;Object.assign(e,{editorId:(t=this.editorList,`editor${t.length}`)}),this.editorList.push(e),e[0].addEventListener("keyup",(e=>function(e,t){e.selected&&"h"===t.key&&e.openHelpDialog()}(this,e)))}get selected(){return this.selectedEditor}set selected(e){!function(e,t){for(const n of e)n!==t&&n.api.unselect();t.api.select()}(this.editorList,e),this.selectedEditor=e}unselect(e){this.selectedEditor===e&&(e.api.unselect(),this.selectedEditor=null)}redraw(){this.editorList.forEach((e=>e.api.redraw()))}findByHTMLelement(e){return this.editorList.filter((t=>t[0]===e))[0]}openHelpDialog(){a.open()}}var c=n(9623),u=n.n(c);const d={attributes:!0,attributeFilter:["class"]};class h{constructor(){this._waitingEditors=new Set}setObserver(e){this._el||(this._el=r().create('<div class="textae-editor-veil" style="display: none;"></div>'),document.body.appendChild(this._el)),new MutationObserver((e=>this._mutationCallback(e))).observe(e[0],d)}_mutationCallback(e){this._collectWaitingEditors(e),this._waitingEditors.size>0?this._show():this._hide()}_collectWaitingEditors(e){e.forEach((({target:e})=>{e.classList.contains("textae-editor--wait")?this._waitingEditors.add(e):this._waitingEditors.delete(e)}))}_show(){this._el.style.display="block"}_hide(){this._el.style.display="none"}}const f=[[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"},{type:"write-auto",title:"Upload Automatically",push:!0}],[{type:"view",title:"View Mode",push:!0},{type:"term",title:"Term Edit Mode",push:!0},{type:"block",title:"Block Edit Mode",push:!0},{type:"relation",title:"Relation Edit Mode",push:!0}],[{type:"simple",title:"Simple View",push:!0},{type:"line-height",title:"Adjust LineHeight"},{type:"line-height-auto",title:"Auto Adjust LineHeight",push:!0}],[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}],[{type:"replicate",title:"Replicate span annotation [R]",enableWhenSelecting:{span:e=>e.span.single&&e.span.single.isDenotation}},{type:"replicate-auto",title:"Auto replicate",push:!0},{type:"boundary-detection",title:"Boundary Detection [B]",push:!0}],[{type:"entity",title:"New entity [E]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation))}},{type:"pallet",title:"Show label list editor [Q]"},{type:"change-label",title:"Change label [W]",enableWhenSelecting:{entity:e=>e.entity.some,relation:e=>e.relation.some}}],[{type:"delete",title:"Delete [D]",enableWhenSelecting:{span:e=>e.span.some,entity:e=>e.entity.some,relation:e=>e.relation.some}},{type:"copy",title:"Copy [C]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation)),entity:e=>e.entity.contains((e=>e.isDenotation))}},{type:"cut",title:"Cut [X]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation)),entity:e=>e.entity.contains((e=>e.isDenotation))}},{type:"paste",title:"Paste [V]",enableWhenSelecting:{span:(e,t)=>t.hasCopyingItem&&e.span.some||t.hasCuttingItem&&Boolean(e.span.single)}}],[{type:"setting",title:"Setting"}],[{type:"help",title:"Help [H]"}]];var p=new class{get mapForControl(){return{buttonGroup:f.map((e=>({list:e.map((e=>({type:e.type,title:e.title})))})))}}get _buttons(){return f.flat()}_getEnabelButtonsWhenSelecting(e){return this._buttons.filter((t=>t.enableWhenSelecting&&t.enableWhenSelecting[e])).map((t=>({name:t.type,predicate:t.enableWhenSelecting[e]})))}get spanButtons(){return this._getEnabelButtonsWhenSelecting("span")}get entityButtons(){return this._getEnabelButtonsWhenSelecting("entity")}get relationButtons(){return this._getEnabelButtonsWhenSelecting("relation")}get pushButtons(){return this._buttons.filter((e=>e.push)).map((e=>e.type))}};const m=new s;const g={read:!0,write:!0,help:!0};class v{constructor(e,t){const n=r().create(e(p.mapForControl));this._el=n,function(e,t){const n=e=>{if(e.currentTarget.classList.contains("textae-control__icon--disabled"))return;const{buttonType:n}=e.currentTarget.dataset;t.api.handleButtonClick(n)};for(const t of e.querySelectorAll(".textae-control__icon"))"help"===t.dataset.buttonType?t.addEventListener("click",(()=>m.open())):t.addEventListener("click",n)}(this._el,t)}get el(){return this._el}updateAllButtonEnableState(e){!function(e,t){!function(e,t){for(const n of e.querySelectorAll(".textae-control__icon")){const{buttonType:e}=n.dataset;!0===t[e]?n.classList.remove("textae-control__icon--disabled"):n.classList.add("textae-control__icon--disabled")}}(e,{...t,...g})}(this._el,e)}updateButtonPushState(e,t){!function(e,t,n){const i=e.querySelector(`.textae-control__${t}-button`);n?i.classList.add("textae-control__icon--pushed"):i.classList.remove("textae-control__icon--pushed")}(this._el,e,t)}}function y({type:e,title:t}){return`\n<span \nclass="textae-control__icon textae-control__${e}-button" \ntitle="${t}" \ndata-button-type="${e}">\n</span>\n`}function _(e){const{buttonGroup:t}=e;return`\n<div class="textae-control textae-control-bar">\n  <span class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </span>\n  ${t.map((({list:e})=>`\n  <span class="textae-control__separator"></span>\n  ${e.map(y).join("\n")}\n  `)).join("\n")}\n</div>\n`}class b extends v{constructor(e){super(_,e)}transitWriteButtonImage(e){!function(e,t){const n=e.querySelector(".textae-control__write-button");!0===t?n.classList.add("textae-control__write-button--transit"):n.classList.remove("textae-control__write-button--transit")}(super.el,e)}}function x(e){const{buttonGroup:t}=e;return`\n<div class="textae-control textae-context-menu">\n  <p class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </p>\n  ${t.map((({list:e})=>`\n  <p class="textae-control__separator"></p>\n  ${e.map((({type:e,title:t})=>`\n  <p \n    class="textae-control__icon textae-control__${e}-button" \n    data-button-type="${e}">${t}\n  </p>`)).join("\n")}\n  `)).join("\n")}\n</div>\n`}class w extends v{constructor(e){super(x,e)}show(e,t){super.el.setAttribute("style",`top: ${e}px; left: ${t}px`),super.el.classList.remove("textae-context-menu--hide"),super.el.classList.add("textae-context-menu--show")}hide(){this._isOpen&&(super.el.classList.remove("textae-context-menu--show"),super.el.classList.add("textae-context-menu--hide"))}get _isOpen(){return super.el.classList.contains("textae-context-menu--show")}}function k(e,t){(e=e.add(".ui-dialog, .ui-widget-overlay"))[`${t}Class`]("textae-editor--wait")}class C{constructor(e){this._editor=e}startWait(){k(this._editor,"add")}endWait(){k(this._editor,"remove")}}function S(e){return window.open(e,"_blank","width=600, height=500")}function T(e,t,n){const i=function(e){const t=e.status,n=e.getResponseHeader("WWW-Authenticate"),i=e.getResponseHeader("Location");return 401===t&&n&&"ServerPage"===n&&i?i:null}(e);if(i){const e=S(i);if(e){const t=setInterval((()=>{e.closed&&(clearInterval(t),n())}),1e3);return}}t()}function E(e,n,i,r,o,s){const a={type:e,url:n,contentType:"application/json",data:i,crossDomain:!0,xhrFields:{withCredentials:!0}},l=()=>{t().ajax(a).done(r).fail(o).always(s)};t().ajax(a).done(r).fail((e=>T(e,o,l))).always(s)}function A(e,t,n,i,r,o){console.assert(e,"url is necessary!"),n(),E("post",e,t,i,r,o)}class ${constructor(e,t,n){this.beforeSend=e,this.failHandler=t,this.finishHandler=n}post(e,t,n){A(e,t,this.beforeSend,n,this.failHandler,this.finishHandler)}patch(e,t,n){!function(e,t,n,i,r,o){console.assert(e,"url is necessary!"),n(),console.log("PATCH data",t),E("patch",e,t,i,(()=>A(e,t,n,i,r,o)),o)}(e,t,this.beforeSend,n,this.failHandler,this.finishHandler)}}function D(e,n,i,r){r.startWait(),function(e,n,i){console.assert(e,"url is necessary!");const r={type:"GET",url:e,cache:!1,xhrFields:{withCredentials:!0},timeout:3e4};t().ajax(r).done(n).fail(i)}(e,(e=>{n(e),r.endWait()}),(()=>{i(),r.endWait()}))}class O{constructor(e,t,n){this._type=e,this._id=t,this._data=n}get type(){return this._type}get id(){return this._id}get data(){return this._data}get displayName(){return function(e,t){switch(e){case"url":return new URL(t,location.href).href;case"local file":return`${t}(local file)`;case"inline":return"inline";case"instant":return"instant";default:throw`unknown source type: ${e}.`}}(this._type,this._id)}}class N{constructor(e){this._editor=e,this._urlOfLastRead={annotation:"",config:""},this._cursorChanger=new C(e),this._ajaxSender=new $((()=>this._cursorChanger.startWait()),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.save.error")),(()=>this._cursorChanger.endWait())),function(e){const t=e.eventEmitter;t.on("textae-event.save-annotation-dialog.download.click",(()=>t.emit("textae-event.data-access-object.annotation.save"))).on("textae-event.save-annotation-dialog.viewsource.click",(()=>t.emit("textae-event.data-access-object.annotation.save"))).on("textae-event.save-configuration-dialog.download.click",(e=>t.emit("textae-event.data-access-object.configuration.save",e)))}(e,this._ajaxSender)}get annotationUrl(){return this._urlOfLastRead.annotation}set annotationUrl(e){"url"===e.type&&(this._urlOfLastRead.annotation=e.id)}get configurationUrl(){return this._urlOfLastRead.config}set configurationUrl(e){"url"===e.type&&(this._urlOfLastRead.config=e.id)}loadAnnotation(e){D(e,(t=>{const n=new O("url",e,t);t&&t.text?(this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",n),this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.url.set",n)):this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",n)}),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.error",e)),this._cursorChanger)}loadConfigulation(e,t=null){D(e,(n=>{this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new O("url",e,n),t)}),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.error",e)),this._cursorChanger)}saveAnnotation(e,t){e&&function(e,t,n,i,r){t.post(n,i,(()=>e.eventEmitter.emit(r)))}(this._editor,this._ajaxSender,e,JSON.stringify(t),"textae-event.data-access-object.annotation.save")}saveConfiguration(e,t){e&&this._ajaxSender.patch(e,JSON.stringify(t),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.save",t)))}}class M{constructor(e,t){this._emitter=e,this._name=t,this._container=new Map}_toModel(e){return e}_toModels(e,t){return e.map((e=>this._toModel(e,t)))}addSource(e,t){for(const n of this._toModels(e,t))this._addToContainer(n)}add(e){const t=this._addToContainer(e);return this._emit(`textae-event.annotation-data.${this._name}.add`,t),t}get(e){return this._container.get(e)}get all(){return Array.from(this._container.values())}findByType(e){return this.all.filter((t=>t.typeName===e))}get some(){return this._container.size}changeType(e,t){const n=this._container.get(e);return n.typeName=t,this._emit(`textae-event.annotation-data.${this._name}.change`,n),n}remove(e){const t=this._container.get(e);return t&&(this._container.delete(e),this._emit(`textae-event.annotation-data.${this._name}.remove`,t)),t}clear(){this._container.clear()}_addToContainer(e){return this._container.set(e.id,e),e}_emit(e,t){this._emitter.emit(e,t)}}function P(e,t){return function(e,t){return!!t&&t.begin<=e.begin&&e.end<=t.end}(e,t)?t:t.parent?P(e,t.parent):null}function L(e,t){return e.begin-t.begin||t.end-e.end}function j(e,t){t.sort(L).forEach(((t,n,i)=>{t.severTies();const r=0!==n?i[n-1]:null;if(r){const n=P(t,r);n?t.beChildOf(n):t.beChildOf(e)}else t.beChildOf(e)}))}function I(e,t,n){return`${e.editorId}__S${t}_${n}`}function R(e,t,n){return`${e.editorId}__B${t}_${n}`}function F(e,t){return`${e.editorId}__E${t.replace(/[:¥.]/g,"")}`}var z="ui-selected";function H(e,t){const{entities:n}=e;return n.length*function(e){return 24*e+18}(t)+function(e){return e.map((e=>18*e.typeValues.attributes.length)).reduce(((e,t)=>e+t),0)}(n)}function B(e,t){const n=0===e.children.length?0:function(e,t){return Math.max.apply(null,e.children.map((e=>B(e,t))))}(e,t);return H(e,t)+n}function W(e){return Math.round(100*e)/100}function U(e,t,n){(function(e,t,n){return!(!e.style||parseFloat(e.style.top)!==t||parseFloat(e.style.left)!==n)})(e,t,n)||(e.style.top=`${t}px`,e.style.left=`${n}px`)}function q(e){return e[0].querySelector(".textae-editor__annotation-box")}function V(e,t){return function(e,t,n){console.assert(t,"element MUST exists.");const i=e[0].querySelectorAll(`.${n}`),r=Array.from(i).indexOf(t);return i.length-r>1?i[r+1]:null}(e,document.querySelector(`#${t}`),"textae-editor__span")}function G(e,t){return{start:e.begin-t,end:e.end-t}}function K(e,t,n){const i=n.begin<e&&e<n.end&&n.end<t,r=e<n.begin&&n.begin<t&&t<n.end;return i||r}function Y(e){const t=e.bigBrother;return t?function(e,t){if(K(e.begin,e.end,t))throw new Error(`span ${e.id} is corrisng with ${t.id}`);let{start:n,end:i}=G(e,t.end),r=t.element.nextSibling;return r.length<n&&(n-=r.length,i-=r.length,r=r.nextSibling),{textNode:r,start:n,end:i}}(e,t):function(e){const{start:t,end:n}=G(e,e.parent.begin);return{textNode:e.parent.element.firstChild,start:t,end:n}}(e)}function X(e){const{textNode:t,start:n,end:i}=Y(e);if(!t)throw new Error(`The textNode on to create a span is not found. ${e.id}`);if(n<0)throw new Error(`start must be positive, but ${n} for ${e.id}.`);if(t.length<i)throw new Error(`oh my god! I cannot render ${e.id}. "${t.textContent.slice(n,i)}" at ${n}~${i} of text(${t.textContent.length}) as "${t.textContent}".`);return function(e,t,n){const i=document.createRange();return i.setStart(e,t),i.setEnd(e,n),i}(t,n,i)}class J{constructor(e,t,n,i){this._editor=e,this._begin=t,this._end=n,this._spanModelContainer=i,this.severTies()}get id(){return I(this._editor,this._begin,this._end)}get begin(){return this._begin}get end(){return this._end}get types(){return[]}get entities(){return[]}get bigBrother(){return function(e){const t=e.parent.children,n=t.indexOf(e);return 0===n?null:t[n-1]}(this,this._spanModelContainer.topLevel)}get root(){return this._spanModelContainer}get parent(){return this._parent}get children(){return this._children}severTies(){this._parent=null,this._children=[]}beChildOf(e){e.children.push(this),this._parent=e}traverse(e,t){e(this);for(const n of this._children)n.traverse(e,t);t&&t(this)}get element(){return document.querySelector(`#${this.id}`)}renderElement(){const e=r().create(this._contentHTML);X(this).surroundContents(e)}destroyElement(){const e=this.element,t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}get gridElement(){return document.querySelector(`#G${this.id}`)}get isGridRendered(){return this.gridElement}renderGridElement(){const e=function(e,t){const n=V(e,t);return n?document.querySelector(`#G${n.id}`):null}(this._editor,this.id);if(e)return e.insertAdjacentElement("beforebegin",this._createGridElement()),e.previousElementSibling;{const e=q(this._editor);return e.insertAdjacentElement("beforeend",this._createGridElement()),e.lastElementChild}}_createGridElement(){const{width:e,top:t,left:n}=this._gridRectangle,i=function(e,t,n,i){return`\n<div \n  id=G${e} \n  class="textae-editor__grid" \n  style="top: ${t}px; left: ${n}px; width: ${i}px;">\n</div>\n`}(this.id,t,n,e);return r().create(i)}updateGridPosition(){const{top:e,left:t}=this._gridRectangle;U(this.gridElement,e,t)}destroyGridElement(){this.isGridRendered&&this.gridElement.remove()}get _styleClasses(){return[...this.styles.values()].map((e=>`textae-editor__style textae-editor__style--${e}`))}}class Q extends J{constructor(e,t,n,i,r){super(e,t,n,r),this._entityModelContainer=i}get entities(){return this._entityModelContainer.getAllOfSpan(this)}passesAllEntitiesTo(e){for(const t of this.entities)t.span=e}get hasStyle(){return this.styles.size>0}get styles(){return this._spanModelContainer.getStyle(this.id)}get rectangle(){const e=this.element,t=e.getBoundingClientRect(),n=e.offsetParent.offsetParent.getBoundingClientRect();return{top:t.top-n.top,left:t.left-n.left,width:t.width}}get isDenotation(){return!0}select(){const e=super.element;e.classList.add(z),e.focus()}deselect(){const e=super.element;e&&e.classList.remove(z)}getHeightIncludeDescendantGrids(e){return B(this,e)+23+30}get _contentHTML(){return`\n      <span\n        id="${this.id}"\n        title="${this.id}"\n        tabindex="0"\n        class="${["textae-editor__span"].concat(this._styleClasses).join(" ")}"\n        >\n      </span>\n    `}get _gridRectangle(){console.assert(this.element,"span is not renderd");const{top:e,left:t,width:n}=this.rectangle;return{width:W(n),top:W(e-B(this,this._spanModelContainer._entityGap.value)),left:W(t)}}}class Z extends J{constructor(e,t,n,i,r){super(e,t,n,i),this.styles=new Set([r])}get styleOnly(){return!0}appendStyles(e){this.styles=new Set([...this.styles,...e])}get _contentHTML(){return`\n      <span\n        id="${this.id}"\n        title="${this.id}"\n        class="${this._styleClasses.join(" ")}"\n        >\n      </span>\n    `}}class ee extends J{constructor(e,t,n,i,r){super(e,t,n,r),this._entityModelContainer=i}get isBlock(){return!0}get entities(){return this._entityModelContainer.getAllOfSpan(this)}passesAllEntitiesTo(e){for(const t of this.entities)t.span=e}get id(){return R(this._editor,this._begin,this._end)}select(){const e=super.element;e.classList.add(z),this._backgroundElement.classList.add(z),e.focus()}deselect(){const e=super.element;e&&e.classList.remove(z),this._backgroundElement&&this._backgroundElement.classList.remove(z)}updateSidekicksOfBlockSpanPosition(e){const{top:t,left:n,width:i,height:r}=this.getReactOfSidekicksOfBlock(e);!function(e,t,n,i,r){e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${i}px`,e.style.height=`${r}px`}(this._backgroundElement,t,n,i,r),this.gridElement.style.height=`${this._rectangle.height}px`}renderElement(){super.renderElement();!function(e,t){const n=r().create(`\n    <div id="${t}" class="textae-editor__block-bg"></div>\n  `);e.insertAdjacentElement("afterbegin",n)}(q(this._editor),this._backgroundId)}destroyElement(){super.destroyElement(),this._backgroundElement.remove()}getHeightIncludeDescendantGrids(e){return H(this,e)+35}get _contentHTML(){return`\n      <div id="${this.id}" title="${this.id}" class="textae-editor__block"></div>\n    `}_createGridElement(){const e=super._createGridElement();return e.classList.add("textae-editor__block-hit-area"),e.dataset.id=this.id,e.title=this.id,e}get _gridRectangle(){console.assert(this.element,"span is not renderd");const e=this._spanModelContainer._textBox.boundingClientRect;return{width:100,top:W(this.getReactOfSidekicksOfBlock(this._spanModelContainer._textBox).top),left:W(e.width-108)}}updateGridPosition(){super.updateGridPosition(),this._entityToFocusOn&&(this._entityToFocusOn.select(),this._entityToFocusOn=null)}get isGridBeforePositioned(){return!this.gridElement.style.top}set entityToFocusOn(e){this._entityToFocusOn=e}getReactOfSidekicksOfBlock(e){const t=this._rectangle;return{top:t.top-e.lineHeight/2+20,left:t.left-e.boundingClientRect.left-8,width:t.width+8,height:t.height}}get _backgroundId(){return`bg_of_${this.id}`}get _backgroundElement(){return document.querySelector(`#${this._backgroundId}`)}get _rectangle(){const e=this.element,t=e.getBoundingClientRect(),n=e.offsetParent.offsetParent.getBoundingClientRect();return{top:t.top-n.top,left:t.left,width:t.width,height:t.height}}}function te(e,t,n){return e.filter((({span:e})=>K(t,n,e)))}function ne(e,t,n){const i=e.get(t),r=e.get(n);let o=i,s=r;return L(i,r)>0&&(o=r,s=i),[...e.values()].filter((e=>o.begin<=e.begin&&(e.end<=o.end||e.end<=s.end))).map((e=>e.id))}class ie{constructor(e,t,n,i,r){this._editor=e,this._emitter=t,this._entityContainer=n,this._textBox=i,this._entityGap=r,this._denotations=new Map,this._blocks=new Map,this._styles=new Map}add(e){if(console.assert(e,"span is necessary."),e instanceof ee)return this._addBlock(e);if(e instanceof Q)return this._addDenotation(e);if(e.isBlock){console.assert(!this.doesParentSpanExits(e.begin,e.end),`There are some parent spans of {begin: ${e.begin}, end: ${e.end}}.`);const t=new ee(this._editor,e.begin,e.end,this._entityContainer,this);return this._addBlock(t)}{const t=new Q(this._editor,e.begin,e.end,this._entityContainer,this);return this._addDenotation(t)}}addSource(e,t){for(const n of e)this._addInstanceFromElement(t,n);this._updateSpanTree()}hasDenotationSpan(e,t){const n=I(this._editor,e,t);return this._denotations.has(n)}get(e){return this._denotations.has(e)?this._denotations.get(e):this._blocks.has(e)?this._blocks.get(e):this._styles.get(e)}getStyle(e){return this._styles.has(e)?this._styles.get(e).styles:new Set}rangeDenotationSpan(e,t){return ne(this._denotations,e,t)}rangeBlockSpan(e,t){return ne(this._blocks,e,t)}get topLevel(){return this.all.filter((e=>e.parent===this)).sort(L)}get children(){return this.topLevel}clear(){this._denotations.clear(),this._blocks.clear(),this._styles.clear()}remove(e){const t=this._blocks.get(e);if(t)return this._removeBlock(t);const n=this._denotations.get(e);return n?this._removeDenotation(n):void 0}moveDenotationSpan(e,t,n){console.assert(e!==I(this._editor,t,n),`Do not need move span:  ${e} ${t} ${n}`);const i=this._denotations.get(e);this._removeDenotation(i);const r=new Q(this._editor,t,n,this._entityContainer,this);return this._addDenotation(r,i),this._emitter.emit("textae-event.annotation-data.span.move"),{begin:i.begin,end:i.end,id:r.id}}moveBlockSpan(e,t,n){console.assert(e!==R(this._editor,t,n),`Do not need move span:  ${e} ${t} ${n}`);const i=this._blocks.get(e);this._removeBlock(i);const r=new ee(this._editor,t,n,this._entityContainer,this);return this._addBlock(r,i),this._emitter.emit("textae-event.annotation-data.span.move"),{begin:i.begin,end:i.end,id:r.id}}_addDenotation(e,t=null){return this._addSpan(this._denotations,e,t),e}_addBlock(e,t=null){return this._addSpan(this._blocks,e,t),this._textBox.forceUpdate(),e}_addSpan(e,t,n=null){e.set(t.id,t),this._updateSpanTree(),n&&n.passesAllEntitiesTo(t),this._emitter.emit("textae-event.annotation-data.span.add",t)}_removeDenotation(e){return this._denotations.delete(e.id),this._emitter.emit("textae-event.annotation-data.span.remove",e),e}_removeBlock(e){return this._blocks.delete(e.id),this._emitter.emit("textae-event.annotation-data.span.remove",e),this._textBox.forceUpdate(),e}isBoundaryCrossingWithOtherSpans(e,t){return function(e,t,n){return console.assert(void 0!==n,"end is necessary."),te(e.map((e=>({span:e}))),t,n).length>0}(this.all,e,t)}doesParentSpanExits(e,t){const n=n=>n.begin<e&&t<n.end;return[...this._denotations.values()].some(n)||[...this._blocks.values()].some(n)||[...this._styles.values()].some(n)}get all(){const e=[...this._styles.values()].filter((e=>!this._denotations.has(e.id)));return[...this._blocks.values()].concat([...this._denotations.values()]).concat(e)}get allDenotationSpans(){return[...this._denotations.values()]}get allBlockSpans(){return[...this._blocks.values()]}get begin(){return 0}get element(){return this._editor[0].querySelector(".textae-editor__text-box")}_updateSpanTree(){j(this,this.all)}_addInstanceFromElement(e,t){switch(e){case"denotation":{const e=new Q(this._editor,t.span.begin,t.span.end,this._entityContainer,this);this._denotations.set(e.id,e);break}case"block":{const e=new ee(this._editor,t.span.begin,t.span.end,this._entityContainer,this);this._blocks.set(e.id,e);break}case"typesetting":{const e=new Z(this._editor,t.span.begin,t.span.end,this,t.style);this._styles.has(e.id)?this._styles.get(e.id).appendStyles(e.styles):this._styles.set(e.id,e);break}default:throw`${e} is unknown type span!`}}arrangeDenotationEntityPosition(){for(const e of this.allDenotationSpans)e.updateGridPosition()}arrangeBlockEntityPosition(){for(const e of this.allBlockSpans)e.updateGridPosition()}arrangeBackgroundOfBlockSpanPosition(){for(const e of this.allBlockSpans)e.updateSidekicksOfBlockSpanPosition(this._textBox)}get maxHeight(){const e=[...this._blocks.values()].concat([...this._denotations.values()]);return e.length?function(e,t){return Math.max(...e.map((e=>e.getHeightIncludeDescendantGrids(t))))}(e,this._entityGap.value):null}}function re(e){return e.trim().startsWith("http")}function oe(e,t){const n=e.all.filter((e=>"_base"!==e.prefix)).filter((e=>0===t.indexOf(`${e.prefix}:`)));return 1===n.length?n[0]:null}function se(e){return/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([/]?[^\s?]*[/]{1})*(?:\/?([^\s\n?[\]{}#]*(?:(?=\.)){1}|[^\s\n?[\]{}.#]*)?([.]{1}[^\s?#]*)?)?(?:\?{1}([^\s\n#[\]]*))?([#][^\s\n]*)?\)?/gi.exec(e)}function ae(e,t,n){if(n)return n;if(re(t))return function(e){if(re(e)){const t=se(e);if(t)return t[9]?t[9].slice(1):t[6]?t[6]+(t[7]||""):t[5]&&t[5].length>1?t[5].split("/").filter((e=>""!==e)).pop():t[3]}return e}(t);const i=oe(e,t);return i?t.replace(`${i.prefix}:`,""):t}function le(e,t,n){if(re(t))return t;if(n)return n;if(e.some){const n=oe(e,t);if(n)return`${n.uri}${t.replace(`${n.prefix}:`,"")}`;const i=e.all.find((e=>"_base"===e.prefix));if(i)return`${i.uri}${t}`}return null}class ce{constructor({id:e,subj:t,pred:n,obj:i},r,o,s,a){this.id=e,this.subj=t,this.pred=n,this._obj=i,this._entityContainer=r,this._relationContaier=o,this._namespace=s,this._definitionContainer=a}get obj(){return this._obj}set obj(e){"numeric"===this._definitionContainer.get(this.pred).valueType?this._obj=parseFloat(e):this._obj=e}get subjectModel(){return this._entityContainer.get(this.subj)||this._relationContaier.get(this.subj)}get title(){return`pred: ${this.pred}, value: ${this._obj}`}get displayName(){return ae(this._namespace,"string"==typeof this._obj?this._obj:"",this._definitionContainer.getDisplayName(this.pred,this._obj))}get href(){return le(this._namespace,"string"==typeof this._obj?this._obj:"")}get color(){return this._definitionContainer.getColor(this.pred,this._obj)}equalsTo(e,t){return this.pred===e&&String(this._obj)===t}}function ue(e){return e.slice(1)}function de(e,t){return e.filter((e=>function(e,t){return new RegExp(`^${e}\\d+$`).test(t)}(t,e))).map(ue)}function he(e,t){return e+function(e){return(0===e.length?0:Math.max(...e))+1}(de(t,e))}class fe extends M{constructor(e,t,n){super(e,t),this._prefix=n}_toModels(e,t){const n=super._toModels(e,t);return n.sort(((e,t)=>e.id?t.id?e.id<t.id?-1:e.id>t.id?1:0:-1:1)),n}_addToContainer(e){return super._addToContainer(function(e,t,n){if(!e.id){const i=he(n,Array.from(t.keys()));e.id=i}return e}(e,this._container,this._prefix))}}class pe extends fe{constructor(e,t,n,i,r){super(e,"attribute","A"),this._entityContainer=t,this._relationContaier=n,this._namespace=i,this._definitionContainer=r}_toModel(e){return new ce(e,this._entityContainer,this._relationContaier,this._namespace,this._definitionContainer)}add(e){return e=e instanceof ce?e:this._toModel(e),super.add(e),e.subjectModel.updateElement(),e}change(e,t,n){const i=this.get(e);return t&&(i.pred=t),n&&(i.obj=n),super._emit("textae-event.annotation-data.attribute.change",i),i}remove(e){const t=super.remove(e);return console.assert(t,`There are no attribute ${e} to delete!`),t.subjectModel.updateElement(),super._emit("textae-event.annotation-data.attribute.remove",t),t}getSameDefinitionsAttributes(e){return this.all.filter((t=>t.pred===e))}getSameAttributes(e,t){return this.all.filter((n=>n.equalsTo(e,t)))}getAttributesFor(e){return this.all.filter((t=>t.subj===e)).sort(((e,t)=>this._definitionContainer.attributeCompareFunction(e,t)))}}class me{constructor(e,t=[]){this._typeName=e,this._attributes=t}get typeName(){return this._typeName}get attributes(){return this._attributes}isSameType(e,t=null){return t?this.typeName===e&&this._hasSameAttributes(t):this.typeName===e}hasSpecificPredicateAttribute(e){return this.attributes.some((t=>t.pred===e))}_hasSameAttributes(e){return e.length==this.attributes.length&&e.filter((e=>this.attributes.some((t=>t.equalsTo(e.pred,e.obj))))).length==this.attributes.length}}function ge(e,t){const n=F(e,t);return e[0].querySelector(`#${n} .textae-editor__signboard__type-values`)}const ve="http://www.w3.org/2000/svg";const ye="stroke:rgb(100, 100, 215)";class _e{constructor(e,t,n,i,r,o,s,a,l,c,u){this._container=e;const[d,h]=function(e,t,n,i,r){const{source:o,target:s}=function(e,t,n,i){const r=e||24<=t.width/2,o=e||24<=n.width/2,s=t.left+t.width/2-i.left,a=n.left+n.width/2-i.left,l=o?a-24:a,c=r?s-8:s,u=o?a+8:a,d=r?s+24:s;return s<a?{source:d,target:d<l?l:u}:a<s?{source:c,target:u<c?u:l}:{source:s,target:a}}(r,e,n,t),a=s+(Math.abs(s-o)>24?0:o<s?150:-150),l=e.top-t.top-8-(r?4:0),c=n.top-t.top-8-(r?4:0),u=Math.min(l,c)-Math.abs(s-o)/2-20,d=document.createElementNS(ve,"path");return d.setAttribute("d",`M ${o}, ${l} C ${o} ${u}, ${a} ${u}, ${s} ${c}`),d.setAttribute("style",`fill:none; stroke: ${i};`),r&&d.classList.add("textae-editor__relation--isBold"),[d,{sourceY:l,targetY:c,controleY:u,sourceX:o,targetX:s,targetContlorX:a}]}(t,i,n,r,u),{sourceX:f,sourceY:p,targetX:m,targetY:g}=h;this._createSourceTriangle(f,p,o),this._createTargetTriangle(m,g,s),this._lines=[],u&&(this._createSourceLine(f,p,t,i),this._createTargetLine(m,g,n,i)),e.appendChild(d),d.addEventListener("click",a),d.addEventListener("mouseenter",l),d.addEventListener("mouseleave",c),this._path=d,this._pathPoints=h}destructor(){this._container.removeChild(this._path),this._container.removeChild(this._sourceTriagle),this._container.removeChild(this._targetTriagle);for(const e of this._lines)this._container.removeChild(e);this._lines=[]}get top(){return this._path.getBBox().y}get left(){if(this._t){const{sourceX:e,targetX:t,targetContlorX:n}=this._pathPoints;return Math.pow(1-this._t,3)*e+3*Math.pow(1-this._t,2)*this._t*e+3*(1-this._t)*Math.pow(this._t,2)*n+Math.pow(this._t,3)*t}return this._path.getBBox().x}get width(){if(this._t)return 0;return this._path.getBBox().width}get _t(){const{sourceY:e,targetY:t,controleY:n}=this._pathPoints;return[...Array(20).keys()].map((e=>1*e/20)).find((i=>{const r=Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*n+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*t;return Math.abs(r-this._path.getBBox().y)<1}))}_createSourceTriangle(e,t,n){const i=function(e,t,n){const i=document.createElementNS(ve,"polygon");return i.setAttribute("points","-6 8, 6 8, 0 0"),i.setAttribute("style",`${ye}; fill:${n}`),i.setAttribute("transform",`translate(${e}, ${t})`),i}(e,t,n);this._sourceTriagle=i,this._container.appendChild(i)}_createTargetTriangle(e,t,n){const i=function(e,t,n){const i=document.createElementNS(ve,"polygon");return i.setAttribute("points","-6 0, 6 0, 0 8"),i.setAttribute("style",`${ye}; fill:${n}`),i.setAttribute("transform",`translate(${e}, ${t})`),i}(e,t,n);this._targetTriagle=i,this._container.appendChild(i)}_createSourceLine(e,t,n,i){const r=function(e,t,n,i){const r=document.createElementNS(ve,"polyline"),o=n.left+n.width/2-i.left;return r.setAttribute("points",`${e} ${t+8}, ${o} ${t+8}, ${o} ${n.top-i.top}`),r.setAttribute("style",`${ye}; fill: none;`),r}(e,t,n,i);this._lines.push(r),this._container.appendChild(r)}_createTargetLine(e,t,n,i){const r=function(e,t,n,i){const r=document.createElementNS(ve,"polyline"),o=n.left+n.width/2-i.left;return r.setAttribute("points",`${e} ${t+8}, ${o} ${t+8}, ${o} ${n.top-i.top}`),r.setAttribute("style",`${ye}; fill: none;`),r}(e,t,n,i);this._lines.push(r),this._container.appendChild(r)}}var be=n(4576),xe=n.n(be);function we(e,t){return t?xe()`<a target="_blank" href="${t}">${e}</a>`:xe()`${e}`}function ke({title:e,pred:t,obj:n,color:i,href:r,displayName:o}){return`\n<div\n  class="textae-editor__signboard__attribute"\n  title="${e}"\n  data-pred="${t}"\n  data-obj="${n}"\n  ${i?`style="background-color: ${i};"`:""}\n  >\n  <span class="textae-editor__signboard__attribute-label">\n    ${we(o,r)}\n  </span>\n</div>\n`}function Ce(e,t,n,i,o,s,a,l){const c=`\n<div\n  class="textae-editor__signboard ${a||""}"\n  ${l?`id="${l}"`:""}\n  title="${e}"\n  data-entity-type="${t}"\n  >\n  <div\n    class="textae-editor__signboard__type-values"\n    style="background-color: ${n};"\n    >\n    <div\n      class="textae-editor__signboard__type-label"\n      tabindex="0"\n      >\n      ${we(o,i)}\n    </div>\n    ${s.map(ke).join("\n")}\n  </div>\n</div>\n`;return r().create(c)}class Se{constructor(e,t,n,i,r,o,s,a,l,c,u){this._container=e;const d=document.createElement("div");d.classList.add("textae-editor__relation__signboard-location"),d.style.width=`${i}px`,d.style.top=n-18-18*l.length+"px",d.style.left=`${t}px`;const h=Ce(r,"relation",a,s,o,l,u?"ui-selected":null,null);d.appendChild(h),e.appendChild(d),h.addEventListener("click",c),this._label=d}destructor(){this._container.removeChild(this._label)}get y(){return this._background.getBBox().y}get width(){return this._label.getBBox().width}get height(){return this._label.getBBox().height}}class Te{constructor(e,t,n,i,r){this._relation=e,this._namespace=t,this._definitionContainer=n,this._onClick=i,this._editor=r,this._relationBox=r[0].querySelector(".textae-editor__relation-box"),this._annotationBox=q(r),this._createArrow(!1),this._createLabel(!1)}destroy(){this._arrow.destructor(),this._label.destructor()}select(){this._isSelected||(this._isSelected=!0,this.recreate())}deselect(){this._isSelected&&(this._isSelected=!1,this.recreate())}pointUp(){this._isSelected||this._isHovered||(this._isHovered=!0,this.recreate())}pointDown(){!this._isSelected&&this._isHovered&&(this._isHovered=!1,this.recreate())}recreate(){this.destroy(),this._createArrow(this._isSelected||this._isHovered),this._createLabel(this._isSelected)}_createArrow(e){const t=this._editor[0].querySelector(".textae-editor__annotation-box").getBoundingClientRect(),n=this._relation.sourceEndpoint.getBoundingClientRect(),i=this._relation.targetEndpoint.getBoundingClientRect();this._arrow=new _e(this._relationBox,n,i,t,this._relation.color,this._relation.sourceColor,this._relation.targetColor,this._onClick,(()=>this.pointUp()),(()=>this.pointDown()),e)}_createLabel(e){this._label=new Se(this._annotationBox,this._arrow.left,this._arrow.top,this._arrow.width,this._relation.id,this._relation.displayName,this._relation.href,this._relation.color,this._relation.typeValues.attributes,this._onClick,e)}}class Ee{constructor(e,t,n,{id:i,pred:r,subj:o,obj:s},a,l){this._editor=e,this._entityContainer=t,this._attributeContainer=n,this._id=i,this.typeName=r,this._subj=o,this._obj=s,this._namespace=a,this._definitionContainer=l}get id(){return this._id}set id(e){this._id=e}get typeName(){return this._typeName}set typeName(e){this._typeName=String(e)}get typeValues(){return new me(this._typeName,this._attributeContainer.getAttributesFor(this._id))}get subj(){return this._subj}get obj(){return this._obj}get sourceEndpoint(){return ge(this._editor,this.subj)}get targetEndpoint(){return ge(this._editor,this.obj)}get sourceColor(){return this._entityContainer.get(this.subj).color}get targetColor(){return this._entityContainer.get(this.obj).color}select(){this._connect.select()}deselect(){this._connect.deselect()}pointUp(){this._connect.pointUp()}pointDown(){this._connect.pointDown()}renderElement(){const e=new Te(this,this._namespace,this._definitionContainer,((e,t)=>{this._editor.eventEmitter.emit("textae-event.editor.relation.click",e,this,t),e.stopPropagation()}),this._editor);this._connect=e}updateElement(){this._connect.recreate()}destroyElement(){this._connect.destroy(),this._connect=void 0}get displayName(){return ae(this._namespace,this.typeName,this._definitionContainer.getLabel(this.typeName))}get href(){return le(this._namespace,this.typeName,this._definitionContainer.getUri(this.typeName))}get color(){return this._definitionContainer.getColor(this.typeName)}}class Ae extends fe{constructor(e,t,n,i,r){super(t,"relation","R"),this._editor=e,this._parentContainer=n,this._namespace=i,this._definitionContainer=r}_toModel(e){return new Ee(this._editor,this._parentContainer.entity,this._parentContainer.attribute,e,this._namespace,this._definitionContainer)}add(e){return(e=e instanceof Ee?e:new Ee(this._editor,this._parentContainer.entity,this._parentContainer.attribute,e,this._namespace,this._definitionContainer)).renderElement(),super.add(e)}changeType(e,t){const n=super.changeType(e,t);return n.updateElement(),n}remove(e){const t=super.remove(e);return t.destroyElement(),t}clear(){for(const e of this.all)e.destroyElement();super.clear()}}class $e{constructor(e,t,n,i,r,o,s,a,l=null){this._editor=e,this._span=o,this.typeName=s,this._id=l,this._attributeContainer=t,this._relationContaier=n,this._entityGap=i,this._typeDefinition=r,this._namespace=a}get id(){return this._id}set id(e){this._id=e}get span(){return this._span}set span(e){this._span=e}get typeName(){return this._typeName}set typeName(e){this._typeName=String(e)}get typeValues(){return new me(this._typeName,this._attributeContainer.getAttributesFor(this._id))}get relations(){return this._relationContaier.all.filter((e=>e.obj===this.id||e.subj===this.id))}pointUpRelations(){for(const e of this.relations)e.pointUp()}pointDownRelations(){for(const e of this.relations)e.pointDown()}get element(){return document.querySelector(`#${F(this._editor,this.id)}`)}get isDenotation(){return this._span.isDenotation}get isBlock(){return this._span.isBlock}select(){this._selected||(this._selected=!0,this._selectElement())}deselect(){this._selected&&(this._selected=!1,this.element.classList.remove(z))}renderElement(){return Ce(this.id,this.isDenotation?"denotation":"block",this.color,this._href,this._displayName,this._attributeContainer.getAttributesFor(this._id),null,F(this._editor,this.id))}updateElement(){const e=this.renderElement();this.element.replaceWith(e),this._selected&&this._selectElement(),this.reflectEntityGapInTheHeight()}destroyElement(){this.element.remove()}reflectEntityGapInTheHeight(){if(this.isDenotation){const e=this.element;e&&e.setAttribute("style",`padding-top: ${24*this._entityGap.value}px;`)}}_selectElement(){const e=this.element;e.classList.add(z),this.span.isGridBeforePositioned?this.span.entityToFocusOn=this:e.querySelector(".textae-editor__signboard__type-label").focus()}get _definitionContainerFor(){if(this.isDenotation)return this._typeDefinition.denotation;if(this.isBlock)return this._typeDefinition.block;throw"unknown entity type"}get _displayName(){return ae(this._namespace,this.typeName,this._definitionContainerFor.getLabel(this.typeName))}get _href(){return le(this._namespace,this.typeName,this._definitionContainerFor.getUri(this.typeName))}get color(){return this._definitionContainerFor.getColor(this.typeName)}}class De extends fe{constructor(e,t,n,i,r){super(t,"entity","T"),this._editor=e,this._parent=n,this._entityGap=i,this._namespace=r}get _spanModelContainer(){return this._parent.span}get _attributeModelContainer(){return this._parent.attribute}get _relationModelContainer(){return this._parent.relation}_toModel(e,t){return new $e(this._editor,this._attributeModelContainer,this._relationModelContainer,this._entityGap,this._parent.typeDefinition,this._getSpan(t,e),e.obj,this._namespace,e.id)}add(e){if(!e.span)throw new Error(`entity has no span! ${JSON.stringify(e)}`);return e instanceof $e?super.add(e):super.add(new $e(this._editor,this._attributeModelContainer,this._relationModelContainer,this._entityGap,this._parent.typeDefinition,this._spanModelContainer.get(e.span),e.typeName,this._namespace))}changeType(e,t){const n=super.changeType(e,t);return n.updateElement(),n}moveEntities(e,t){for(const n of t)n.span=e;this._emit("textae-event.annotation-data.entity.move",t)}getAllOfSpan(e){return this.all.filter((t=>e.id===t.span.id))}get denotations(){return this.all.filter((e=>e.isDenotation))}get blocks(){return this.all.filter((e=>e.isBlock))}_getSpan(e,t){return this._spanModelContainer.get(this._getSpanId(e,t))}_getSpanId(e,t){switch(e){case"denotation":return I(this._editor,t.span.begin,t.span.end);case"block":return R(this._editor,t.span.begin,t.span.end);default:throw`${e} is unknown type span!`}}}function Oe(e,t){return 0<=e&&e<=t.length}class Ne{constructor(){this._map=new Map}set(e,t){this._map.set(e,t)}get(e){return this._map.has(e)?this._map.get(e)[0]:[]}getInhibitors(e){return this._map.has(e)?this._map.get(e)[1]:[]}get size(){return this._map.size}}class Me{constructor(e,t="root",n=(()=>!0),i){this._candidates=e||[],this._name=t,this._predicate=n,this._prevValidation=i}and(e,t){return new Me(this._candidates,e,t,this)}validateAll(){const e=new Ne;let t,n;for(t=this,n=this._candidates;t;t=t._prevValidation)n=t._validate(n,this._candidates,e);return[n,e]}_validate(e,t,n){return this._getRejects(t).length>0&&n.set(this._name,[this._getRejects(t),this._getInhibitors(t)]),this._getAccepts(e)}_getAccepts(e){return e.filter((e=>this._test(e)))}_getRejects(e){return e.filter((e=>!this._test(e)))}_getInhibitors(e){const t=new Map;for(const n of e){const e=this._predicate(n);Array.isArray(e)&&!e[0]&&t.set(n,e[1])}return t}_test(e){const t=this._predicate(e);return Array.isArray(t)?t[0]:t}}function Pe(e,t,n){return new Me(e).and("hasLength",(e=>e.span.end-e.span.begin>0)).and("inText",(e=>function(e,t){return Oe(t.begin,e)&&Oe(t.end,e)}(t,e.span))).and("isNotCrossing",(e=>{const t=te(n,e.span.begin,e.span.end);return[0===t.length,t]}))}function Le(e,t){return e.some((e=>e.id===t))}function je(e,t){return void 0===t.id||1===e.filter((e=>t.id&&t.id===e.id)).length}function Ie(e,t){return e.sourceProperty=t,e}function Re(e,t){for(const[n,i]of t.getInhibitors("isNotCrossing"))console.warn(`Crossing ${e}: [${n.span.begin}:${n.span.end}](${n.id}) crosses with ${i.map((({id:e,span:t})=>`[${t.begin}:${t.end}](${e})`)).join(", ")}`)}function Fe(e,t){const n=(t.typesettings||[]).concat(t.denotations||[]).concat(t.blocks||[]),[i,r]=function(e,t,n){return Pe(t,e,n).validateAll()}(e,t.typesettings,n),[o,s]=function(e,t,n){return Pe(t,e,n).and("uniqueID",(e=>je(n,e))).validateAll()}(e,t.denotations,n),[a,l]=function(e,t,n){return Pe(t,e,n).and("uniqueID",(e=>je(n,e))).and("uniqueRange",(({span:e})=>1===t.filter((({span:t})=>e.begin===t.begin&e.end===t.end)).length)).validateAll()}(e,t.blocks,n),[c,u]=(d=o.concat(a),h=t.relations,new Me(h).and("object",(e=>Le(d,e.obj))).and("subject",(e=>Le(d,e.subj))).validateAll());var d,h;const[f,p]=(m=o.concat(a).concat(c),g=t.attributes,new Me(g).and("subject",(e=>Le(m,e.subj))).and("unique",(e=>function(e,t){return 1===e.filter((e=>e.subj===t.subj&&e.pred===t.pred&&e.obj===t.obj)).length}(g,e))).validateAll());var m,g,v,y,_;return Re("TypeSettings",r),Re("Denotations",s),Re("Blocks",l),{accept:{denotation:o,attribute:f,relation:c,typeSetting:i,block:a},reject:{wrongRangeDenotations:s.get("hasLength"),outOfTextDenotations:s.get("inText"),wrongRangeBlocks:l.get("hasLength"),outOfTextBlocks:l.get("inText"),duplicatedRangeBlocks:l.get("uniqueRange"),wrongRangeTypesettings:r.get("hasLength"),outOfTextTypesettings:r.get("inText"),duplicatedIDs:s.get("uniqueID").map((e=>Ie(e,"denotations"))).concat(l.get("uniqueID").map((e=>Ie(e,"blocks")))),boundaryCrossingSpans:r.get("isNotCrossing").map((e=>Ie(e,"typesettings"))).concat(s.get("isNotCrossing").map((e=>Ie(e,"denotations")))).concat(l.get("isNotCrossing").map((e=>Ie(e,"blocks")))),referencedEntitiesDoNotExist:(v=p.get("subject"),y=u.get("object"),_=u.get("subject"),v.map((e=>(e.sourceProperty="attributes",e.alertSubj=!0,e))).concat(y.map((e=>(e.sourceProperty="relations",e.alertObj=!0,e)))).concat(_.map((e=>(e.sourceProperty="relations",e.alertSubj=!0,e))))),duplicatedAttributes:p.get("unique"),hasError:s.size||l.size||p.size||u.size||r.size}}}function ze(e,t,n,i){n&&(n=n.map(t));for(const t of e)t.addSource(n,i)}function He(e,t){return e.id?t+e.id:null}function Be(e){return{...e,begin:parseInt(e.begin),end:parseInt(e.end)}}function We(e,t){return{...e,id:He(e,t),span:Be(e.span)}}function Ue(e,t,n,i,r,o,s=""){const a=Fe(r,o);return ze([e,t],(e=>We(e,s)),a.accept.denotation,"denotation"),ze([n],(e=>function(e,t){return{...e,id:He(e,t),subj:t+e.subj,obj:e.obj}}(e,s)),a.accept.attribute),ze([i],(e=>function(e,t){return{...e,id:He(e,t),subj:t+e.subj,obj:t+e.obj}}(e,s)),a.accept.relation),ze([e],(e=>({...e,span:Be(e.span)})),a.accept.typeSetting,"typesetting"),ze([e,t],(e=>We(e,s)),a.accept.block,"block"),a.reject}function qe(e,t){const[n,i]=function(e,t,n,i,r,o){if(!o.tracks)return[!1,[]];const{tracks:s}=o;return delete o.tracks,[!0,s.map(((o,s)=>{const a=s+1,l=Ue(e,t,n,i,r,o,`track${a}_`);return l.name=`Track ${a} annotations.`,l}))]}(e.span,e.entity,e.attribute,e.relation,t.text,t),r=Ue(e.span,e.entity,e.attribute,e.relation,t.text,t);var o,s;r.name="Root annotations.",o=e.namespace,s=t.namespaces||[],ze([o],(e=>({id:e.prefix,...e})),s);const a=[r].concat(i);return{multitrack:n,hasError:a.some((e=>e.hasError)),rejects:a}}function Ve(e){return e.attribute.all.map((e=>({id:e.id,subj:e.subj,pred:e.pred,obj:e.obj})))}function Ge(e){return e.relation.all.map((e=>({id:e.id,pred:e.typeName,subj:e.subj,obj:e.obj})))}function Ke(e){return e.entity.blocks.map((e=>({id:e.id,span:{begin:e.span.begin,end:e.span.end},obj:e.typeName})))}class Ye{constructor(){this._isGapShown=!0,this._numberOfGap=2}bind(e){this._callback=e}set show(e){this._isGapShown=e,this._callback(this.value)}get show(){return this._isGapShown}get value(){return this._isGapShown?this._numberOfGap:0}set value(e){this._numberOfGap=e,this._callback(e)}}function Xe(e){const t=parseInt(e,10);return isNaN(t)?0:t}function Je(e){const t=window.getComputedStyle(e);e.style.height="auto",e.style.height=e.offsetHeight-Xe(t.paddingTop)+20+"px"}class Qe{constructor(e,t){this._editor=e,this._el=e.querySelector(".textae-editor__text-box"),this._annotationData=t}get boundingClientRect(){return this._el.getBoundingClientRect()}get lineHeight(){return e=this._el,Xe(window.getComputedStyle(e).lineHeight);var e}set lineHeight(e){var t,n;t=this._el,n=e,t.style.lineHeight=`${n}px`,t.style.paddingTop=n/2+"px",Je(this._el),this._updateSizeOfRelationBox()}render(e){this._el.innerHTML=e}updateLineHeight(){const e=this._annotationData.span.maxHeight;e?this.lineHeight=e:this._resetLineHeight()}forceUpdate(){Je(this._el),this._updateSizeOfRelationBox()}_resetLineHeight(){const{lineHeight:e}=window.getComputedStyle(this._editor);this.lineHeight=Xe(e)}_updateSizeOfRelationBox(){const e=this._editor.querySelector(".textae-editor__relation-box");e.style.height=this._el.style.height,e.style.width=window.getComputedStyle(this._el).width}}var Ze=n(9462),et=n.n(Ze);class tt{constructor(e,t,n,i,r){this._editor=e,this._denotationContainer=t,this._blockContainer=n,this._relationContainer=i,this._attributeContainer=r,this._lockStateObservable=new(et())(!1),this._lockStateObservable((()=>this._editor.eventEmitter.emit("textae-event.type-definition.lock")))}get denotation(){return this._denotationContainer}get block(){return this._blockContainer}get relation(){return this._relationContainer}get attribute(){return this._attributeContainer}get config(){const e={};return this._denotationContainer.config.length&&(e["entity types"]=this._denotationContainer.config),this._relationContainer.config.length&&(e["relation types"]=this._relationContainer.config),this._attributeContainer.config.length&&(e["attribute types"]=this._attributeContainer.config),this._blockContainer.config.length&&(e["block types"]=this._blockContainer.config),e}get isLock(){return this._lockStateObservable()}lockEdit(){this._lockStateObservable.set(!0)}unlockEdit(){this._lockStateObservable.set(!1)}setTypeConfig(e){e?(this._denotationContainer.definedTypes=e["entity types"]||[],this._relationContainer.definedTypes=e["relation types"]||[],this._attributeContainer.definedTypes=e["attribute types"]||[],this._blockContainer.definedTypes=e["block types"]||[],this.autocompletionWs=e.autocompletion_ws):(this._denotationContainer.definedTypes=[],this._relationContainer.definedTypes=[],this._attributeContainer.definedTypes=[],this._blockContainer.definedTypes=[],this.autocompletionWs=""),this._editor.eventEmitter.emit("textae-event.type-definition.reset")}}function nt(e){return e.reduce(((e,t)=>{const n=t.typeName;return e.has(n)?e.set(n,e.get(n)+1):e.set(n,1),e}),new Map)}function it(e,t,n,i){const r=nt(e),o=function(e,t){const n=[];for(const i of e)t.has(i)||n.push(i);return n.sort(((e,t)=>e>t?1:e<t?-1:0)),n}(t.ids(),r);return function(e){const t=Array.from(e.keys());return t.sort(((t,n)=>{const i=e.get(n)-e.get(t);return 0!==i?i:t>n?1:t<n?-1:0})),t}(r).concat(o).map((e=>({id:e,label:t.has(e)&&t.get(e).label||void 0,defaultType:e===n,uri:se(e)?e:void 0,color:t.has(e)&&t.get(e).color||i,useNumber:r.get(e)})))}class rt{constructor(e){this._map=e.reduce(((e,t)=>e.set(t.id,t)),new Map)}has(e){return this._map.has(e)}get(e){return{...this._map.get(e)}}replace(e,t){e!==t.id&&this._map.delete(e),this._map.set(t.id,t)}delete(e){this._map.delete(e)}ids(){return this._map.keys()}getConfig(e){return function(e,t){return e.has(t)?e.get(t):function(e,t){const n=function(e,t){const n=[];for(const i of e)-1!==i.indexOf("*")&&0===t.indexOf(i.slice(0,-1))&&n.push(i);return n}(e.ids(),t);return 0===n.length?null:e.get(function(e){let t="";for(const n of e)n.length>t.length&&(t=n);return t}(n))}(e,t)}(this,e)}labelIncludes(e){return[...this._map.values()].filter((e=>e.label)).filter((t=>t.label.includes(e)))}clone(){return new Map(this._map)}}class ot{constructor(e,t,n,i){this._editor=e,this._annotationType=t,this._definedTypes=null,this._getAllInstanceFunc=n,this._defaultColor=i}get annotationType(){return this._annotationType}set definedTypes(e){this._definedTypes=new rt(e);const t=e.find((e=>!0===e.default));t?(delete t.default,this._defaultType=t.id):this._defaultType=null}has(e){return this._definedTypes.has(e)}get(e){const t={...this._definedTypes.get(e)};return this._defaultType===e?(t.default=!0,t):(delete t.default,t)}replace(e,t){this._definedTypes.replace(e,t),this._editor.eventEmitter.emit(`textae-event.type-definition.${this._annotationType}.change`,t.id)}addDefinedType(e){if(void 0===e.color){const t=this.getColor(e.id);t!==this._defaultColor&&(e.color=t)}if(void 0===e.label){const t=this.getLabel(e.id);t&&(e.label=t)}this.replace(e.id,e),e.default&&(this._defaultType=e.id)}get definedTypes(){return this._definedTypes}get config(){const e=this._definedTypes.clone();for(const{typeName:t}of this._getAllInstanceFunc())e.has(t)||e.set(t,{id:t});for(const[t,n]of e.entries()){const i={...n};n.id===this.defaultType?i.default=!0:delete i.default,e.set(t,i)}return[...e.values()]}get defaultType(){return this._defaultType?this._defaultType:function(e){const t=nt(e);if(0===t.size)return"something";const n=[...t.entries()].sort(),{mostCommonlyUsedType:i}=n.reduce((({max:e,mostCommonlyUsedType:t},[n,i])=>(i>e&&(e=i,t=n),{max:e,mostCommonlyUsedType:t})),{max:0,mostCommonlyUsedType:[n][0]});return i}(this._getAllInstanceFunc())}set defaultType(e){console.assert(e,"id is necessary!"),this._defaultType=e}get defaultColor(){return this._defaultColor}getColor(e){const t=this._definedTypes.getConfig(e);return t&&t.color||this._defaultColor}getLabel(e){const t=this._definedTypes.getConfig(e);return t&&t.label}getUri(e){return se(e)?e:void 0}findByLabel(e){return this.definedTypes.labelIncludes(e)}get pallet(){return it(this._getAllInstanceFunc(),this._definedTypes,this.defaultType,this._defaultColor)}delete(e){this._definedTypes.delete(e)}}var st=n(454),at=n.n(st);class lt{constructor(e,t){this.valueType=e,this.pred=t}get values(){return console.assert(this._values,"this._values to return!"),this._values}get JSON(){return{pred:this.pred}}get _valuesClone(){console.assert(this._values,"this._values is necessary to clone!");const e=[];for(const t of this._values)e.push({...t});return e}}class ct extends lt{constructor(e,t){super(e,t.pred),this.default=!0,this.label=t.label,this.color=t.color}getLabel(){return this.label}getDisplayName(){return this.label?this.label:this.pred}getColor(){return this.color}get JSON(){return Object.assign(super.JSON,{"value type":"flag",default:this.default,label:this.label,color:this.color})}}function ut(e,t){return e<=t}function dt(e,t){return e<t}function ht(e){if(e.startsWith("["))return t=>ut(new Number(e.replace("[","")),t);if(e.startsWith("("))return t=>dt(new Number(e.replace("(","")),t);throw`${e} is not valid interval notation`}function ft(e){if(e.endsWith("]"))return t=>ut(t,new Number(e.replace("]","")));if(e.endsWith(")"))return t=>dt(t,new Number(e.replace(")","")));throw`${e} is not valid interval notation`}class pt{constructor(e){const[t,n]=e.split(",");if(n?(this._lowwerCond=ht(t),this._upperCond=ft(n)):((t.startsWith("[")||t.startsWith("("))&&(this._lowwerCond=ht(t),this._upperCond=e=>!0),(t.endsWith("]")||t.endsWith(")"))&&(this._lowwerCond=e=>!0,this._upperCond=ft(t))),!this._lowwerCond||!this._upperCond)throw`${e} is not valid interval notation`}test(e){return this._lowwerCond(e)&&this._upperCond(e)}}class mt extends lt{constructor(e,t){super(e,t.pred),this.default=t.default,this.min=t.min,this.max=t.max,this.step=t.step,this._values=t.values||[]}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)||String(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}_getMatchedValue(e){const t=this._values.filter((e=>"default"!==e.range)).find((t=>new pt(t.range).test(e)));if(t)return t;const n=this._values.find((e=>"default"===e.range));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"numeric",default:this.default,min:this.min,max:this.max,step:this.step,values:super._valuesClone})}}class gt extends lt{constructor(e,t){super(e,t.pred),this._values=t.values||[]}get default(){return this.values.find((e=>e.default)).id}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}get values(){return this._values}get hasOnlyOneValue(){return 1===this._values.length}_getMatchedValue(e){return this.values.find((t=>t.id==e))}get JSON(){return Object.assign(super.JSON,{"value type":"selection",values:super._valuesClone})}}class vt extends lt{constructor(e,t){super(e,t.pred),this.autocompletionWs=t.autocompletion_ws,this.default=t.default,this._values=t.values||[]}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}_getMatchedValue(e){const t=this._values.filter((e=>"default"!==e.pattern)).find((t=>new RegExp(t.pattern).test(e)));if(t)return t;const n=this._values.find((e=>"default"===e.pattern));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"string",autocompletion_ws:this.autocompletionWs,default:this.default,values:super._valuesClone})}}function yt(e,t){switch(e){case"flag":return new ct(e,t);case"numeric":return new mt(e,t);case"selection":return new gt(e,t);case"string":return new vt(e,t);default:throw new Error(`${e} of ${JSON.stringify(t)} is Uknown Attribute`)}}class _t{constructor(e,t){this._editor=e,this._getAllInstanceFunc=t}set definedTypes(e){this._definedTypes=new Map((e||[]).map((e=>[e.pred,yt(e["value type"],e)])))}create(e,t,n=null){null!==n&&this._definedTypes.size!==n?this._definedTypes=new Map(Array.from(this._definedTypes.entries()).reduce(((i,[r,o],s)=>(s===n&&i.push([t.pred,yt(e,t)]),i.push([r,o]),i)),[])):this._definedTypes.set(t.pred,yt(e,t)),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.create",t.pred)}get(e){return this._definedTypes.get(e)}update(e,t){return this._definedTypes=new Map(Array.from(this._definedTypes.entries()).map((([n,i])=>n===e?[t.pred,yt(i.valueType,t)]:[n,i]))),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.change",t.pred),this.get(t.pred)}updateValues(e,t){const n=this.get(e).JSON;return this.update(e,{...n,values:t})}move(e,t){this._definedTypes=new Map(at()(this.attributes,e,t).map((e=>[e.pred,e])));const{pred:n}=this.attributes[-1===t?this.attributes.length-1:t];this._editor.eventEmitter.emit("textae-event.type-definition.attribute.move",n)}delete(e){this._definedTypes.delete(e),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.delete")}get attributes(){return Array.from(this._definedTypes.values())||[]}get config(){return this.attributes.map((e=>e.JSON))}isSelectionAttributeValueIndelible(e,t){return!!this.get(e).hasOnlyOneValue||!!this._getAllInstanceFunc().some((n=>n.equalsTo(e,t)))}getLabel(e,t){return console.assert(this._definedTypes.has(e),`There is no attribute definition for ${e}.`),this.get(e).getLabel(t)}getDisplayName(e,t){return console.assert(this._definedTypes.has(e),`There is no attribute definition for ${e}.`),this.get(e).getDisplayName(t)}getColor(e,t){if(this._definedTypes.has(e))return this.get(e).getColor(t)}getIndexOf(e){return Array.from(this._definedTypes.values()).findIndex((t=>t.pred===e))}getAttributeAt(e){return Array.from(this._definedTypes.values())[e-1]}attributeCompareFunction(e,t){const n=this.getIndexOf(e.pred),i=this.getIndexOf(t.pred);return n!==i?n-i:e.id&&t.id?e.id.localeCompare(t.id):0}}class bt{constructor(e){this._sourceDoc="",this.namespace=new M(e.eventEmitter,"namespace");const t=new ot(e,"relation",(()=>this.relation.all),"#00CC66");this.relation=new Ae(e,e.eventEmitter,this,this.namespace,t),this._entityGap=new Ye,this.entity=new De(e,e.eventEmitter,this,this._entityGap,this.namespace);const n=new _t(e,(()=>this.attribute.all));this.attribute=new pe(e.eventEmitter,this.entity,this.relation,this.namespace,n),this._textBox=function(e,t){const n='\n    <div class="textae-editor__body">\n      <div class="textae-editor__annotation-box"></div>\n      <div class="textae-editor__text-box"></div>\n      <svg\n        namespace="http://www.w3.org/2000/svg"\n        class="textae-editor__relation-box">\n      </svg>\n    </div>\n    ';return e[0].innerHTML=n.replace(/[\n\r]+/g,""),new Qe(e[0],t)}(e,this),this.span=new ie(e,e.eventEmitter,this.entity,this._textBox,this._entityGap),this._editor=e;const i=new ot(e,"entity",(()=>this.entity.denotations),"#77DDDD"),r=new ot(e,"entity",(()=>this.entity.blocks),"#77DDDD");this._typeDefinition=new tt(e,i,r,t,n)}reset(e,t){var n;console.assert(e.text,"This is not a json file of anntations."),this._typeDefinition.setTypeConfig(t),this._sourceDoc=e.text,this._textBox.render(this.sourceDoc),(n=this).span.clear(),n.entity.clear(),n.attribute.clear(),n.relation.clear(),n.namespace.clear();const{multitrack:i,hasError:r,rejects:o}=qe(this,e);this._editor.eventEmitter.emit("textae-event.annotation-data.all.change",this,i,r,o)}toJson(){return{denotations:(e=this,e.entity.denotations.map((e=>({id:e.id,span:{begin:e.span.begin,end:e.span.end},obj:e.typeName})))),attributes:Ve(this),relations:Ge(this),blocks:Ke(this)};var e}getReplicationRanges(e,t){return function(e,t,n,i,r){return function(e,t,n){const i=e.substring(t,n),r=n-t,o=[];let s=0;for(let t=e.indexOf(i);-1!==t;t=e.indexOf(i,s))s=t+r,o.push({begin:t,end:s});return o}(e,t,n).filter((({begin:e})=>e!==t)).filter((({begin:t,end:n})=>function(e,t,n,i){const r=e.charAt(t-1),o=e.charAt(n);return i(r)&&i(o)}(e,t,n,r))).filter((({begin:e,end:t})=>!i.hasDenotationSpan(e,t))).filter((({begin:e,end:t})=>!i.isBoundaryCrossingWithOtherSpans(e,t)))}(this.sourceDoc,e.begin,e.end,this.span,t)}get entityGap(){return this._entityGap}get textBox(){return this._textBox}get sourceDoc(){return this._sourceDoc.replaceAll(/\r\n/g," \n")}get typeDefinition(){return this._typeDefinition}}class xt{constructor(e,t,n){this._emitter=e,this._kindName=t,this._selected=new Map,this._annotationData=n}add(e){if(this._selected.has(e))return;const t=this._annotationData[this._kindName].get(e);console.assert(t,`${e} is not a instance of ${this._kindName}.`),this._selected.set(e,t),t.select(),this._triggerChange()}has(e){return this._selected.has(e)}contains(e){for(const t of this._selected.values())if(e(t))return!0;return!1}get all(){return Array.from(this._selected.values())}get size(){return this._selected.size}get some(){return this.size>0}get singleId(){return 1===this._selected.size?this._selected.keys().next().value:null}get single(){const e=this.singleId;return e?this._selected.get(e):null}toggle(e){this._selected.has(e)?this.remove(e):this.add(e)}remove(e){this._selected.has(e)&&(this._selected.get(e).deselect(),this._selected.delete(e),this._triggerChange())}removeInstance(e){this.remove(e.id)}removeAll(){if(0!==this._selected.size){for(const[e]of this._selected)this._selected.get(e).deselect(),this._selected.delete(e);this._triggerChange()}}clear(){this._selected.clear()}_triggerChange(){this._emitter.emit(`textae-event.selection.${this._kindName}.change`)}}class wt extends xt{selectedWithAttributeOf(e){return this.all.some((t=>t.typeValues.attributes.some((t=>t.pred===e))))}onlySelectedWithJustOneAttributeOf(e){return this.all.every((t=>1===t.typeValues.attributes.filter((t=>t.pred===e)).length))}selectedWithoutAttributeOf(e){return this.all.some((t=>!t.typeValues.attributes.some((t=>t.pred===e))))}isDupulicatedPredAttrributeSelected(e){return this.all.some((t=>t.typeValues.attributes.filter((t=>t.pred===e)).length>1))}findSelectedWithSamePredicateAttribute(e){return this.all.find((t=>t.typeValues.attributes.find((t=>t.pred===e))))}findSelectedAttributeWithSamePredicate(e){const t=this.findSelectedWithSamePredicateAttribute(e);if(t)return t.typeValues.attributes.find((t=>t.pred===e))}}class kt{constructor(e,t){this._annotationData=t,this.span=new xt(e,"span",t),this.entity=new wt(e,"entity",t),this.relation=new wt(e,"relation",t),e.on("textae-event.annotation-data.span.remove",(e=>this.span.removeInstance(e))).on("textae-event.annotation-data.entity.remove",(e=>this.entity.removeInstance(e))).on("textae-event.annotation-data.relation.remove",(e=>this.relation.removeInstance(e))).on("textae-event.annotation-data.all.change",(()=>{this.span.clear(),this.entity.clear(),this.relation.clear()}))}add(e,t){console.assert(this[e]),this[e].add(t)}removeAll(){this.span.removeAll(),this.entity.removeAll(),this.relation.removeAll()}selectSpan(e){this.removeAll(),this.span.add(e)}selectSpanRange(e){this.removeAll();for(const t of e)this.span.add(t)}selectEntity(e){this.removeAll(),this.entity.add(e)}selectRelation(e){this.removeAll(),this.relation.add(e)}}class Ct{constructor(){this.reset()}reset(){this._lastEdit=-1,this._lastSave=-1}save(){this._lastSave=this._lastEdit}set lastEdit(e){this._lastEdit=e}get hasAnythingToSave(){return this._lastEdit!==this._lastSave}}class St{constructor(e){this._resetHistory(),this._eventEmitter=e}push(e){this._histories.splice(this._pointer+1,this._histories.length-this._pointer,e),this._pointer++,e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger()}next(){this._pointer++;const e=this._histories[this._pointer];return e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger(),e}prev(){const e=this._histories[this._pointer];return e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._getPrevPrevCommandIndexOf("annotation_command")),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._getPrevPrevCommandIndexOf("configuration_command")),this._pointer--,this._trigger(),e}resetConfiguration(){this._removeConfigurationOperationsFromHistory(),this._pointerForConfiguration.reset(),this._trigger()}resetAllHistories(){this._resetHistory(),this._trigger()}annotatioSaved(){this._pointerForAnnotation.save(),this._trigger()}configurationSaved(){this._pointerForConfiguration.save(),this._trigger()}get hasAnythingToSaveAnnotation(){return this._pointerForAnnotation.hasAnythingToSave}get hasAnythingToSaveConfiguration(){return this._pointerForConfiguration.hasAnythingToSave}get hasAnythingToUndo(){return this._pointer>-1}get hasAnythingToRedo(){return this._pointer<this._histories.length-1}_getPrevPrevCommandIndexOf(e){const t=this._getPrevKindCommand(e);return void 0!==t?t:-1}_getPrevKindCommand(e){for(let t=this._pointer-1;t>=0;t--)if(this._histories[t].kind.has(e))return t}_trigger(){this._eventEmitter.emit("textae-event.history.change",this)}_removeConfigurationOperationsFromHistory(){for(let e=0;e<this._histories.length;e++)this._histories[e].isExactly("configuration_command")&&(this._pointer--,this._histories.splice(e,1))}_resetHistory(){this._pointer=-1,this._histories=[],this._pointerForAnnotation=new Ct,this._pointerForConfiguration=new Ct}}class Tt{constructor(e){this._observable=new(et())(!1);let t=!1;e.eventEmitter.on("textae-event.history.change",(e=>{this._observable.set(t||e.hasAnythingToSaveAnnotation)})),e.eventEmitter.on("textae-event.data-access-object.annotation.save",(()=>{this._observable.set(!1),t=!1})),e.eventEmitter.on("textae-event.annotation-data.all.change",((e,n,i)=>{(n||i)&&(this._observable.set(!0),t=!0),this._observable.set(!1)}))}bind(e){this._observable(e)}get hasChange(){return this._observable()}}var Et=n(8307),At=n.n(Et);const $t={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n","–"],"non-edge characters":[" ","\n"]};class Dt{constructor(){this._delimiterCharacters=[],this._blankCharacters=[]}set(e){const t={...$t,...e};return this._delimiterCharacters=t["delimiter characters"],this._blankCharacters=t["non-edge characters"],e}isDelimiter(e){return this._delimiterCharacters.indexOf("ANY")>=0?1:this._delimiterCharacters.indexOf(e)>=0}isBlankCharacter(e){return this._blankCharacters.indexOf(e)>=0}removeBlankChractors(e){for(const t of this._blankCharacters)e=e.replaceAll(t,"");return e}}function Ot(e,t){t?console.log("[command.invoke]",e,t):console.log("[command.invoke]",e)}class Nt{get isEmpty(){return!1}isExactly(e){return this.kind.has(e)&&1===this.kind.size}}class Mt extends Nt{get kind(){return new Set(["annotation_command"])}}class Pt extends Mt{constructor(e,t,n,i,r=null){super(),this._editor=e,this._annotationData=t,this._modelType=n,this._newModel=i,this._selectionModel=r}execute(){return this._newModel=this._annotationData[this._modelType].add(this._newModel),this._selectionModel&&this._selectionModel.add(this._modelType,this._newModel.id),Ot(`create a new ${this._modelType}: ${this._newModel.id}`),this._newModel}revert(){return new Lt(this._editor,this._annotationData,this._modelType,this._newModel.id)}}class Lt extends Mt{constructor(e,t,n,i){super(),this._editor=e,this._annotationData=t,this._modelType=n,this._id=i}execute(){this.oloModel=this._annotationData[this._modelType].remove(this._id),this.oloModel?Ot(`remove a ${this._modelType}: `,this.oloModel):Ot(`already removed ${this._modelType}: `,this._id)}revert(){return this.oloModel?new Pt(this._editor,this._annotationData,this._modelType,this.oloModel):{execute:()=>{}}}}class jt extends Nt{get kind(){return new Set(["configuration_command"])}}class It extends jt{constructor(e,t,n,i=null){super(),this._definitionContainer=e,this._attrDef=t,this._index=n,this._indexThatAddDefaultTo=i}execute(){const e=[...this._attrDef.values];if("selection"===this._attrDef.valueType&&e[this._index].default&&null===this._indexThatAddDefaultTo){let t=null;e.forEach(((e,n)=>{null===t&&n!=this._index&&(t=n)})),e[t]={...e[t],default:!0}}this._deletedValue=e.splice(this._index,1)[0],"selection"===this._attrDef.valueType&&null!==this._indexThatAddDefaultTo&&(e[this._indexThatAddDefaultTo]={...e[this._indexThatAddDefaultTo],default:!0}),this._updatedAttrDef=this._definitionContainer.updateValues(this._attrDef.pred,e),Ot(`remove a value from an attrribute:${this._attrDef.pred}, index:${this._index}, updated values: \n ${e.map((e=>JSON.stringify(e))).join("\n ")}`)}revert(){return new Rt(this._definitionContainer,this._updatedAttrDef,this._deletedValue,this._index)}}class Rt extends jt{constructor(e,t,n,i=null){super(),this._definitionContainer=e,this._pred=t.pred,this._index=i,this._value=n;const r=[...t.values];if("selection"===t.valueType&&n.default){this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=r.findIndex((e=>e.default)));const e={...r[this._indexThatRemoveDefaultFrom]};delete e.default,r[this._indexThatRemoveDefaultFrom]=e}r.splice(i||r.length,0,n),this._modifiedValues=r}execute(){this._updatedAttrDef=this._definitionContainer.updateValues(this._pred,this._modifiedValues),Ot(`add a new value to attrribute:${this._pred}, value: ${JSON.stringify(this._value)}, index: ${this._index}, updated values: \n ${this._modifiedValues.map((e=>JSON.stringify(e))).join("\n ")}`)}revert(){return new It(this._definitionContainer,this._updatedAttrDef,this._updatedAttrDef.values.length-1,this._indexThatRemoveDefaultFrom)}}class Ft extends Nt{execute(){if(console.assert(this._subCommands,"_subCommands is necessary!"),this.isEmpty)this.revert=()=>({execute(){}});else{for(const e of this._subCommands)e.execute();this._afterInvoke&&this._afterInvoke(),this.revert=()=>({_subCommands:this._subCommands,_logMessage:this._logMessage,_afterInvoke:this._afterInvoke,execute(){for(const e of this._subCommands.map((e=>e.revert())).reverse())e.execute();this._afterInvoke&&this._afterInvoke(),Ot(`revert: ${this._logMessage}`)}}),Ot(this._logMessage)}}get kind(){return this._subCommands.reduce(((e,t)=>new Set([...e,...t.kind])),new Set)}get isEmpty(){return!this._subCommands||0===this._subCommands.length}}class zt extends jt{constructor(e,t,n){super(),this._definitionContainer=e,this._attrDef=t,this._changedProperties=n}execute(){const e=this._attrDef.pred,[t,n]=function(e,t){const n=e.JSON,i=new Map;for(const[r,o]of t.entries())null===o&&void 0!==e[r]?(delete n[r],i.set(r,e[r])):null!==o&&(n[r]=o,i.set(r,void 0===e[r]?null:e[r]));return[n,i]}(this._attrDef,this._changedProperties);this._revertAttrDef=this._definitionContainer.update(e,t),this._revertChangedProperties=n,Ot(`change old pred:${e} to new attridute definition:${JSON.stringify(t)}`)}revert(){return new zt(this._definitionContainer,this._revertAttrDef,this._revertChangedProperties)}}class Ht extends Mt{constructor(e,t,n,i){super(),this._annotationData=e,this._attribute=t,this._oldPred=t.pred,this._oldObj=t.obj,this._newPred=n,this._newObj=i}execute(){this.newModel=this._annotationData.attribute.change(this._attribute.id,this._newPred,this._newObj),Ot(`atttribute: ${this._attribute.id} changed from ${this._oldPred}:${this._oldObj} to ${this._newPred}:${this._newObj}.`)}revert(){return new Ht(this._annotationData,this.newModel,this._oldPred,this._oldObj)}}class Bt extends Ft{constructor(e,t,n,i,r){super();const o=[new zt(n,i,r)];let s=[];if(r.has("pred")){const n=t.attribute.getSameDefinitionsAttributes(i.pred);s=n.map((e=>new Ht(t,e,r.get("pred"),e.obj))),this._afterInvoke=()=>{e.eventEmitter.emit("textae-event.commander.attributes.change",n)}}this._subCommands=o.concat(s),this._logMessage=`set ${[...r.entries()].map((([e,t])=>`${e}:${t}`))} to attribute definition ${i.pred}`}}class Wt extends Ft{constructor(e,t,n,i,r,o,s=null){super();const a=[];for(const e of i){const t=e.typeValues.attributes.find((e=>e.pred==r.pred&&e.obj!==o));t&&a.push(t)}this._subCommands=a.map((e=>new Ht(t,e,null,o))),a.length&&(this._afterInvoke=()=>e.eventEmitter.emit("textae-event.commander.attributes.change",a));const l=[];s&&"string"===r.valueType&&!r.values.some((e=>e.pattern===o))&&l.push(new Rt(n,r,{pattern:o,label:s})),this._subCommands=this._subCommands.concat(l),this._logMessage=`update obj ${o} to attributes: ${a.map((e=>e.id)).join(",")}`}}class Ut extends Mt{constructor(e,t,n,i,r){super(),this._editor=e,this._annotationData=t,this._annotationType=n,this._id=i,this._newType=r}execute(){this.oldType=this._annotationData[this._annotationType].get(this._id).typeName;const e=this._annotationData[this._annotationType].changeType(this._id,this._newType);Ot(`change type of a ${this._annotationType}. oldtype:${this.oldType} ${this._annotationType}:`,e)}revert(){return new Ut(this._editor,this._annotationData,this._annotationType,this._id,this.oldType)}}class qt extends Ft{constructor(e,t,n,i,r,o){super();const s=n[i].all.filter((e=>!e.typeValues.isSameType(r,o))),a=s.map((n=>new Ut(e,t,i,n.id,r))),l=function(e,t,n,i){const r=[];for(const o of e){if(o.typeValues)for(const e of o.typeValues.attributes){const o=t.find((t=>e.equalsTo(t.pred,t.obj)));o?String(e.obj)!==o.obj&&r.push(new Ht(n,e,o.pred,o.obj)):r.push(new Lt(i,n,"attribute",e.id))}for(const e of t)o.typeValues.attributes.some((t=>t.equalsTo(e.pred,e.obj)))||r.push(new Pt(i,n,"attribute",{subj:o.id,pred:e.pred,obj:e.obj}))}return r}(s,o,t,e);this._subCommands=a.concat(l),this._logMessage=`set type ${r}${o.length>0?` and attributes ${JSON.stringify(o)}`:""} to ${i} items ${s.map((e=>e.id))}`}}class Vt extends jt{constructor(e,t,n,i,r,o){super(),this._editor=e,this._annotationData=t,this._definitionContainer=n,this._id=i,this._changedProperties=r,this._newDefaultTypeId=o}execute(){const e=this._definitionContainer.get(this._id),[t,n]=function(e,t){const n={...t},i=new Map;for(const[r,o]of e.entries())null===o&&void 0!==t[r]?(delete n[r],i.set(r,t[r])):null!==o&&(n[r]=o,i.set(r,void 0===t[r]?null:t[r]));return[n,i]}(this._changedProperties,e);this._definitionContainer.replace(this._id,t),t.default?(this.revertDefaultTypeId=this._definitionContainer.defaultType,this._definitionContainer.defaultType=t.id):this._newDefaultTypeId&&(this._definitionContainer.defaultType=this._newDefaultTypeId),this.revertId=t.id,this.revertChangedProperties=n,Ot(`change old type:${JSON.stringify(e)} to new type:${JSON.stringify(t)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new Vt(this._editor,this._annotationData,this._definitionContainer,this.revertId,this.revertChangedProperties,this.revertDefaultTypeId)}}class Gt extends jt{constructor(e,t,n,i){super(),this._editor=e,this._definitionContainer=t,this._removeType=n,this._revertDefaultTypeId=i}execute(){const{id:e}=this._removeType,t=this._definitionContainer.get(e);this._definitionContainer.delete(e),this._revertDefaultTypeId&&(this._definitionContainer.defaultType=this._revertDefaultTypeId),t&&(this._removeType=t),Ot(`remove a type:${JSON.stringify(this._removeType)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new Kt(this._editor,this._definitionContainer,this._removeType)}}class Kt extends jt{constructor(e,t,n){super(),this._editor=e,this._definitionContainer=t,this._newType=n}execute(){this._newType.default&&(this._revertDefaultTypeId=this._definitionContainer.defaultType),this._definitionContainer.addDefinedType(this._newType),Ot(`create a new type:${JSON.stringify(this._newType)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new Gt(this._editor,this._definitionContainer,this._newType,this._revertDefaultTypeId)}}function Yt(e,t,n,i,r){return e.has(t)?new Vt(n,i,e,t,r,null):new Kt(n,e,{id:t,...Object.fromEntries(r)})}class Xt extends Ft{constructor(e,t,n,i,r,o,s){super();const a=[];i&&a.push(Yt(o,r,e,t,new Map([["label",i]])));const l=new qt(e,t,n,o.annotationType,r,s);l.isEmpty||a.push(l),this._subCommands=a,this._logMessage=`change ${o.annotationType} value:"${r}"${i?`, label:"${i}"`:""}${s.length>0?`, attributes:${JSON.stringify(s)}`:""}`}}class Jt extends Ft{constructor(e,t,n,i,r,o){super();const s=[Yt(n,r,e,t,o)];let a=[];o.has("id")&&(a=function(e,t,n,i,r){return e[t].all.filter((e=>e.typeName===n)).map((n=>new Ut(i,e,t,n.id,r)))}(t,i,r,e,o.get("id"))),this._subCommands=s.concat(a),this._logMessage=`set ${[...o.entries()].map((([e,t])=>`${e}:${t}`))} to type definition ${r}`}}class Qt extends Ft{constructor(e,t,n,i,r){super();const o=n[i].all.filter((e=>!e.typeValues.isSameType(r)));this._subCommands=o.map((n=>new Ut(e,t,i,n.id,r))),this._logMessage=`set type ${r} to ${i} items ${o}`}}class Zt extends jt{constructor(e,t,n,i,r){super(),this._definitionContainer=e,this._attrDef=t,this._targetIndex=n,this._newValue=i,this._indexThatRemoveDefaultFrom=r}execute(){if("selection"===this._attrDef["value type"]&&(!this._attrDef.values[this._targetIndex].default&&this._newValue.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=this._attrDef.values.findIndex((e=>e.default))),delete this._attrDef.values[this._indexThatRemoveDefaultFrom].default),this._attrDef.values[this._targetIndex].default&&!this._newValue.default))if(1===this._attrDef.values.length)this._newValue.default=!0;else if(this._indexThatRemoveDefaultFrom)this._attrDef.values[this._indexThatRemoveDefaultFrom].default=!0;else{let e=null;this._attrDef.values.forEach(((t,n)=>{null===e&&n!=this._targetIndex&&(e=n)})),this._attrDef.values[e].default=!0,this._indexThatRemoveDefaultFrom=e}this._valueBeforeChange=this._attrDef.values.splice(this._targetIndex,1,this._newValue)[0],this._definitionContainer.update(this._attrDef.pred,this._attrDef),Ot(`change value of attrribute:${this._attrDef.pred}, oldValue: ${JSON.stringify(this._valueBeforeChange)}, newValue: ${JSON.stringify(this._newValue)}`)}revert(){return new Zt(this._definitionContainer,this._attrDef,this._targetIndex,this._valueBeforeChange,this._indexThatRemoveDefaultFrom)}}class en extends Ft{constructor(e,t,n,i,r,o,s){if(super(),this._subCommands=[new Zt(n,i,r,o,s)],"selection"===i["value type"]&&i.values[r].id!==o.id){const n=t.attribute.getSameAttributes(i.pred,i.values[r].id),s=n.map((e=>new Ht(t,e,null,o.id)));this._subCommands=this._subCommands.concat(s),this._afterInvoke=()=>e.eventEmitter.emit("textae-event.commander.attributes.change",n)}this._logMessage="change attribute definition."}}class tn extends jt{constructor(e,t){super(),this._definitionContainer=e,this._removeAttrdef=t,this._index=e.getIndexOf(t.pred)}execute(){this._definitionContainer.delete(this._removeAttrdef.pred),Ot(`remove an attrribute definition:${JSON.stringify(this._removeAttrdef)}, index:${this._index}`)}revert(){return new nn(this._definitionContainer,this._removeAttrdef,this._index)}}class nn extends jt{constructor(e,t,n){super(),this._definitionContainer=e,this._newAttrDef=t,this._index=n}execute(){"selection"!==this._newAttrDef.valueType||this._newAttrDef.values||(this._newAttrDef.values=[{id:"default",default:!0}]),this._definitionContainer.create(this._newAttrDef.valueType,this._newAttrDef,this._index),Ot(`create a new attrribute definition:${JSON.stringify(this._newAttrDef)}, index: ${this._index}`)}revert(){return new tn(this._definitionContainer,this._newAttrDef)}}function rn(e,t,n,i,r){return n.filter((e=>!e.typeValues.hasSpecificPredicateAttribute(i))).map((({id:n})=>new Pt(e,t,"attribute",{id:null,subj:n,pred:i,obj:r})))}class on extends Ft{constructor(e,t,n,i,r){super(),this._subCommands=rn(e,t,n,i.pred,r||i.default),this._logMessage=`create attirbute ${i.pred}:${i.default} to item ${n.map((({id:e})=>e)).join(", ")}`}}class sn extends Pt{constructor(e,t,n,i){super(e,t,"attribute",{obj:n,pred:i})}execute(){const e=this._annotationData.entity.all.pop().id;return this._newModel.subj=e,super.execute()}}class an extends Ft{constructor(e,t,n,i,r,o){super(),this._subCommands=[new Pt(e,t,"entity",{span:i,typeName:r},n)].concat(o.map((({obj:n,pred:i})=>new sn(e,t,n,i)))),this._logMessage=`create a type for span: ${i}`}}class ln extends Ft{constructor(e,t,n,i,r,o){super();const s=R(e,i,r),a=new Pt(e,t,"span",{begin:i,end:r,isBlock:!0},n),l=new an(e,t,n,s,o,[]);this._subCommands=[a,l],this._logMessage=`create a span ${s}`}}class cn extends Ft{constructor(e,t,n,i){super();const r=n.span.all.filter((e=>e.isDenotation)).map((e=>e.id));this._subCommands=r.map((r=>new Pt(e,t,"entity",{span:r,typeName:i},n))),this._logMessage=`create a ${i} type entity to ${r}`}}class un extends Ft{constructor(e,t,n,i,r,o,s){super(),this._subCommands=[new Pt(e,t,"span",{begin:r,end:o},n)].concat(s.map((r=>new an(e,t,n,i,r.typeName,r.attributes)))),this._logMessage=`create a span ${i}`}}class dn extends Ft{constructor(e,t,n,i,r,o){super(),this._subCommands=t.getReplicationRanges(i,o).map((({begin:i,end:o})=>{const s=I(e,i,o);return new un(e,t,n,s,i,o,r)})),this._logMessage=`replicate a span ${I(e,i.begin,i.end)}`}}class hn extends Ft{constructor(e,t,n,i,r,o,s){super();const a=[new me(r)],l=I(e,i.begin,i.end);this._subCommands=[new un(e,t,n,l,i.begin,i.end,a)],this._logMessage=`create a span ${i.begin}:${i.end} with type ${a[0].typeName}`,o&&i.end-i.begin<=100&&(this._subCommands.push(new dn(e,t,n,{begin:i.begin,end:i.end},a,s)),this._logMessage=`${this._logMessage} and replicate auto`)}}class fn extends jt{constructor(e,t,n){super(),this._definitionContainer=e,this._oldIndex=t,this._newIndex=n}execute(){this._definitionContainer.move(this._oldIndex,this._newIndex),Ot(`move the attrribute definition: from ${this._oldIndex} to ${this._newIndex}`)}revert(){return new fn(this._definitionContainer,this._newIndex,this._oldIndex)}}class pn extends Mt{constructor(e,t,n,i){super(),this._annotationData=e,this._spanId=t,this._begin=n,this._end=i}execute(){const{id:e,begin:t,end:n}=this._annotationData.span.moveBlockSpan(this._spanId,this._begin,this._end);this._newId=e,this._oldBegin=t,this._oldEnd=n,Ot(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new pn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}class mn extends Mt{constructor(e,t,n,i){super(),this._annotationData=e,this._spanId=t,this._begin=n,this._end=i}execute(){const{id:e,begin:t,end:n}=this._annotationData.span.moveDenotationSpan(this._spanId,this._begin,this._end);this._newId=e,this._oldBegin=t,this._oldEnd=n,Ot(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new mn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}function gn(e,t){return e.entities.every((e=>t.includes(e)))}class vn extends Ft{constructor(e,t){super(),this._subCommands=[];for(const[n,i]of t.entries())this._subCommands.push(new yn(e,n,i));this._logMessage=`revert: move entities ${Array.from(t.values()).flat().map((e=>e.id)).join(", ")}`}}class yn extends Mt{constructor(e,t,n){super(),this._annotationData=e,this._span=t,this._entities=n}execute(){this._moveMap=this._entities.reduce(((e,t)=>(e.has(t.span)?e.get(t.span).push(t):e.set(t.span,[t]),e)),new Map);const e=`move entities: ${Array.from(this._moveMap.entries()).map((([e,t])=>`${t.map((e=>e.id)).join(", ")} from ${t[0].span.id} to ${this._span.id}`)).join(", ")}`;this._annotationData.entity.moveEntities(this._span,this._entities),Ot(e)}revert(){return new vn(this._annotationData,this._moveMap)}}class _n extends Ft{constructor(e,t,n,i){console.assert(n.span.single,"There must be one span to be pasted."),super();const r=[new yn(t,n.span.single,i)];for(const n of i.map((e=>e.span)).reduce(((e,t)=>(e.add(t),e)),new Set).values())gn(n,i)&&r.push(new Lt(e,t,"span",n.id));this._subCommands=r,this._logMessage="paste cut entities"}}class bn extends Ft{constructor(e,t,n,i){super();const r=n.span.all.map((e=>e.id));this._subCommands=r.map((r=>i.map((i=>new an(e,t,n,r,i.typeName,i.attributes))))).flat(),this._logMessage=`paste types [${i.map((({typeName:e,attributes:t})=>[`{type:${e}}`].concat(t.map((({pred:e,obj:t})=>`{${e}:${t}}`)))))}] to ${r}`}}function xn(e,t,n,i){return n.reduce(((e,{typeValues:t})=>e.concat(t.attributes)),[]).filter((e=>e.pred===i)).map((n=>new Lt(e,t,"attribute",n.id)))}class wn extends Ft{constructor(e,t,n,i){super();const r=xn(e,t,n,i.pred);this._subCommands=r,this._logMessage=`remove ${i.pred} attribute from items ${n.map((e=>e.id)).join(", ")}`}}class kn extends Ft{constructor(e,t,n){super();const i=new Lt(e,t,"entity",n);const r=t.entity.get(n).relations.map((n=>new Lt(e,t,"relation",n.id))),o=t.entity.get(n).typeValues.attributes.map((n=>new Lt(e,t,"attribute",n.id)));this._subCommands=r.concat(o).concat(i),this._logMessage=`remove an entity ${n}`}}class Cn extends Ft{constructor(e,t,n){super();const i=t.span.get(n).entities.map((({id:n})=>new kn(e,t,n))),r=new Lt(e,t,"span",n);this._subCommands=i.concat(r),this._logMessage=`remove a span ${n}`}}function Sn(e,t){return e.filter((e=>e.span===t))}class Tn extends Ft{constructor(e,t,n){super();const i=n.entity.all,r=new Set(i.map((e=>e.span)));let o=[];for(const n of r.values())gn(n,i)?o.push(new Cn(e,t,n.id)):o=o.concat(Sn(i,n).map((n=>new kn(e,t,n.id))));this._subCommands=o,this._logMessage=`remove entities ${i.map((e=>e.id))} from spans ${[...r.values()].map((e=>e.id))}`}}class En extends Ft{constructor(e,t,n){super();const i=n.span.all.map((e=>e.id)),r=n.relation.all.map((e=>e.id));this._subCommands=[].concat(r.map((n=>new Lt(e,t,"relation",n))),n.entity.some?[new Tn(e,t,n)]:[],i.map((n=>new Cn(e,t,n)))),this._logMessage=`remove selected ${i.concat(n.entity.all.map((e=>e.id))).concat(r)}`}}class An extends Ft{constructor(e,t,n,i){super(),this._subCommands=rn(e,t,n,i.pred,i.default);const r=xn(e,t,n,i.pred);this._subCommands=this._subCommands.concat(r),this._logMessage=`toggle flag attirbute ${i.pred} to item ${n.map((({id:e})=>e)).join(", ")}`}}class $n{constructor(e,t,n){this._editor=e,this._annotationData=t,this._selectionModel=n}addValueToAttributeDefinitionCommand(e,t){return new Rt(this._annotationData.typeDefinition.attribute,e,t)}changeAttributeDefinitionCommand(e,t){return new Bt(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t)}changeAttributesOfItemsWithSamePred(e,t,n,i){return new Wt(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t,n,i)}changeItemTypeCommand(e,t,n,i){return new Xt(this._editor,this._annotationData,this._selectionModel,e,t,n,i)}changeTypeDefinitionCommand(e,t,n,i){return new Jt(this._editor,this._annotationData,e,t,n,i)}changeTypeOfSelectedItemsCommand(e,t){return new Qt(this._editor,this._annotationData,this._selectionModel,e,t)}changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(e,t,n){return new en(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t,n)}createAttributeDefinitionCommand(e){return new nn(this._annotationData.typeDefinition.attribute,e)}createAttributeToItemsCommand(e,t,n=null){return new on(this._editor,this._annotationData,e,t,n)}createBlockSpanCommand(e){return new ln(this._editor,this._annotationData,this._selectionModel,e.begin,e.end,this._annotationData.typeDefinition.block.defaultType)}createDefaultTypeEntityToSelectedSpansCommand(e){return new cn(this._editor,this._annotationData,this._selectionModel,e)}createRelationCommand(e){return new Pt(this._editor,this._annotationData,"relation",e,this._selectionModel)}createSpanAndAutoReplicateCommand(e,t,n){return new hn(this._editor,this._annotationData,this._selectionModel,e,this._annotationData.typeDefinition.denotation.defaultType,t,n)}createTypeDefinitionCommand(e,t){return new Kt(this._editor,e,t)}deleteAttributeDefinitionCommand(e){return new tn(this._annotationData.typeDefinition.attribute,e)}moveAttributeDefintionComannd(e,t){return new fn(this._annotationData.typeDefinition.attribute,e,t)}moveBlockSpanCommand(e,t,n){return new pn(this._annotationData,e,t,n)}moveDenotationSpanCommand(e,t,n){return new mn(this._annotationData,e,t,n)}moveEntitiesToSelectedSpansCommand(e){return new _n(this._editor,this._annotationData,this._selectionModel,e)}pasteTypesToSelectedSpansCommand(e){return new bn(this._editor,this._annotationData,this._selectionModel,e)}replicateSpanCommand(e,t,n){return new dn(this._editor,this._annotationData,this._selectionModel,e,t,n)}removeAttributesFromItemsByPredCommand(e,t){return new wn(this._editor,this._annotationData,e,t)}removeSpanCommand(e){return new Cn(this._editor,this._annotationData,e)}removeSelectedComand(){return new En(this._editor,this._annotationData,this._selectionModel)}removeTypeDefinitionCommand(e,t){return new Gt(this._editor,e,t)}removeValueFromAttributeDefinitionCommand(e,t){return new It(this._annotationData.typeDefinition.attribute,e,t)}toggleFlagAttributeToItemsCommand(e,t){return new An(this._editor,this._annotationData,e,t)}}class Dn{constructor(e,t,n,i){this._editor=e,this._annotationData=t,this._selectionModel=n,this._history=i}invoke(e){e.isEmpty||(e.execute(),this._history.push(e))}undo(){if(this._history.hasAnythingToUndo){this._selectionModel.removeAll(),this._editor.focus();const e=this._history.prev();e.kind.has("configuration_command")&&At().success("configuration has been undone"),e.revert().execute()}}redo(){if(this._history.hasAnythingToRedo){this._selectionModel.removeAll();const e=this._history.next();e.kind.has("configuration_command")&&At().success("configuration has been redo"),e.execute()}}get factory(){return new $n(this._editor,this._annotationData,this._selectionModel,this._annotationData.typeDefinition)}}var On=n(9438),Nn=n.n(On);class Mn{constructor(e,t,n){this._editor=e,this._annotationData=t,this._renderer=n}async update(){this._editor.eventEmitter.emit("textae-event.annotation-position.position-update.start"),this._annotationData.span.arrangeDenotationEntityPosition(),this._annotationData.span.arrangeBackgroundOfBlockSpanPosition(),this._annotationData.span.arrangeBlockEntityPosition(),this._renderer.arrangeRelationPositionAll(),this._editor.eventEmitter.emit("textae-event.annotation-position.position-update.end")}}const Pn="ui-to-be-cut";class Ln{constructor(e){this._annotationData=e}render(e){if(e.element)return;const t=e.span.gridElement||e.span.renderGridElement(),n=e.renderElement();t.insertAdjacentElement("beforeend",n),e.reflectEntityGapInTheHeight()}remove(e){0===e.span.entities.length?e.span.destroyGridElement():e.destroyElement()}updateEntityHtmlelement(e){for(const t of this._annotationData.entity.all)(t.typeName===e||e.lastIndexOf("*")===e.length-1&&t.typeName.indexOf(0===e.slice(0,-1)))&&t.updateElement()}updateAttribute(e){for(const t of this._annotationData.entity.all.filter((t=>t.typeValues.hasSpecificPredicateAttribute(e))))t.updateElement()}updateEntityHtmlelementAll(){for(const e of this._annotationData.entity.all)e.updateElement()}}class jn{constructor(e,t){this._editor=e,this._entityRenderer=t}render(e){e.traverse((e=>{null!==e.element&&e.destroyElement()})),e.traverse((e=>e.renderElement()),(e=>{for(const t of e.entities)this._entityRenderer.render(t)}))}remove(e){if(e.hasStyle){const t=e.element;t.removeAttribute("tabindex"),t.classList.remove("textae-editor__span")}else e.destroyElement()}}class In{constructor(e,t){this._annotationData=t;const n=new Ln(t);!function(e,t,n){const i=new jn(t,n);t.eventEmitter.on("textae-event.annotation-data.all.change",(()=>{q(t).innerHTML="";for(const t of e.span.topLevel)i.render(t);for(const t of e.relation.all)t.renderElement()})).on("textae-event.annotation-data.span.add",(e=>i.render(e))).on("textae-event.annotation-data.span.remove",(e=>{i.remove(e),e.destroyGridElement()})).on("textae-event.annotation-data.entity.add",(e=>{n.render(e)})).on("textae-event.annotation-data.entity.remove",(e=>{n.remove(e)})).on("textae-event.annotation-data.entity.move",(e=>{for(const t of e)n.remove(t),n.render(t)})).on("textae-event.commander.attributes.change",(e=>{for(const t of e.reduce(((e,t)=>e.add(t.subjectModel)),new Set))t.updateElement()}))}(t,e,n),e.eventEmitter.on("textae-event.type-definition.entity.change",(e=>n.updateEntityHtmlelement(e))).on("textae-event.type-definition.attribute.change",(e=>n.updateAttribute(e))).on("textae-event.type-definition.attribute.move",(e=>n.updateAttribute(e))).on("textae-event.type-definition.relation.change",(e=>{for(const t of this._annotationData.relation.all)(t.typeName===e||e.lastIndexOf("*")===e.length-1&&t.typeName.indexOf(0===e.slice(0,-1)))&&t.updateElement()})),this._editor=e,this._annotationData=t}arrangeRelationPositionAll(){for(const e of this._annotationData.relation.all)e.updateElement()}}var Rn=n(296),Fn=n.n(Rn);class zn{constructor(e,t){this._textBox=t,this._enable=!1,e.eventEmitter.on("textae-event.control.button.push",(({buttonName:e,state:t})=>{"line-height-auto"===e&&(this._enable=t)}))}updateLineHeight(){this._enable&&this._textBox.updateLineHeight()}}function Hn(e){return e.closest(".textae-editor__signboard")}class Bn{constructor(e,t){const n=new In(e,t);this._annotationPosition=new Mn(e,t,n),this._annotationData=t,t.entityGap.bind((()=>this._applyEntityGap())),function(e){e.eventEmitter.on("textae-event.clip-board.change",((e,t)=>{for(const t of e)t.element&&t.element.classList.add(Pn);for(const e of t)e.element&&e.element.classList.remove(Pn)}))}(e),function(e,t,n){const i=new zn(e,n),r=Fn()((()=>{i.updateLineHeight(),t.update()}),100);e.eventEmitter.on("textae-event.annotation-data.all.change",r).on("textae-event.annotation-data.entity.add",r).on("textae-event.annotation-data.entity.change",r).on("textae-event.annotation-data.entity.remove",r).on("textae-event.annotation-data.entity.move",r).on("textae-event.annotation-data.relation.add",r).on("textae-event.annotation-data.attribute.add",r).on("textae-event.annotation-data.attribute.change",r).on("textae-event.annotation-data.attribute.remove",r).on("textae-event.annotation-data.span.move",(()=>{t.update()}))}(e,this._annotationPosition,this._annotationData.textBox),function(e,t){e.eventEmitter.on("textae-event.annotation-position.position-update.start",(()=>t.startWait())).on("textae-event.annotation-position.position-update.end",(()=>t.endWait()))}(e,new C(e));const i=e[0];Nn()(i,".textae-editor__signboard__type-values","mouseover",(e=>{const n=Hn(e.target);if("denotation"===n.dataset.entityType||"block"===n.dataset.entityType){const e=n.title;t.entity.get(e).pointUpRelations()}})),Nn()(i,".textae-editor__signboard__type-values","mouseout",(e=>{const n=Hn(e.target);if("denotation"===n.dataset.entityType||"block"===n.dataset.entityType){const e=n.title;t.entity.get(e).pointDownRelations()}}))}updateDisplay(){this._annotationData.textBox.forceUpdate(),this._annotationPosition.update()}updateLineHeight(){this._annotationData.textBox.updateLineHeight(),this._annotationPosition.update()}_applyEntityGap(){for(const e of this._annotationData.entity.denotations)e.reflectEntityGapInTheHeight();this.updateLineHeight()}}const Wn="Init",Un="View Term",qn="View Instance",Vn="Term Centric",Gn="Instance / Relation",Kn="Block Centric",Yn="Block / Relation",Xn="Relation Edit";var Jn=n(4676),Qn=n.n(Jn);function Zn(e){return!e.relation.some}function ei(e,t){switch(e.currentState){case Xn:!function(e,t){Zn(t)?e.setState(Vn):e.setState(Gn)}(e,t);break;case qn:case Yn:e.setState(Gn);break;case Un:case Kn:e.setState(Vn)}}function ti(e){return`enter:${e}`}class ni{constructor(e){this._editor=e}setViewWithRelation(){this._setCssClassFor("view-with-relation")}setViewWithoutRelation(){this._setCssClassFor("view-without-relation")}setDenotationWithRelation(){this._setCssClassFor("denotation-with-relation")}setDenotationWithoutRelation(){this._setCssClassFor("denotation-without-relation")}setBlockWithRelation(){this._setCssClassFor("block-with-relation")}setBlockWithoutRelation(){this._setCssClassFor("block-without-relation")}setRelation(){this._setCssClassFor("relation")}_setCssClassFor(e){for(const e of this._editor.classList)e.startsWith("textae-editor__mode")&&this._editor.classList.remove(e);this._editor.classList.add(`textae-editor__mode--${e}`)}}class ii{constructor(e,t,n,i,r,o){this._editor=e,this._editorCSSClassForMode=new ni(e[0]),this._entityGap=t,this._noEdit=n,this._editEntity=i,this._editBlock=r,this._editRelation=o}toViewWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Un),this._noEdit(),this._editorCSSClassForMode.setViewWithoutRelation()}toViewWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",qn),this._noEdit(),this._editorCSSClassForMode.setViewWithRelation()}toEditDenotationWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Vn),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithoutRelation()}toEditDenotationWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Gn),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithRelation()}toEditBlockWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Kn),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithoutRelation()}toEditBlockWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Yn),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithRelation()}toEditRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Xn),this._noEdit(),this._editRelation(),this._editorCSSClassForMode.setRelation()}}class ri{constructor(e,t,n,i,r,o){const s=new(Qn())({states:[Wn,Vn,Gn,Kn,Yn,Xn,Un,qn]});s.config(Wn,{to:{exclude:[Xn]}}),s.config(Vn,{from:{exclude:[qn]},to:{exclude:[Wn,qn]}}),s.config(Gn,{from:{exclude:[Un]},to:{exclude:[Wn,Un]}}),s.config(Kn,{from:{exclude:[qn]},to:{exclude:[Wn,qn]}}),s.config(Yn,{from:{exclude:[Un]},to:{exclude:[Wn,Un]}}),s.config(Xn,{from:{exclude:[Wn]},to:{exclude:[Wn,Un]}}),s.config(Un,{from:{exclude:[Gn,Xn]},to:{exclude:[Wn,Gn]}}),s.config(qn,{from:{exclude:[Vn]},to:{exclude:[Wn,Vn]}});!function(e,t){e.on(ti(Vn),(()=>t.toEditDenotationWithoutRelation())).on(ti(Gn),(()=>t.toEditDenotationWithRelation())).on(ti(Kn),(()=>t.toEditBlockWithoutRelation())).on(ti(Yn),(()=>t.toEditBlockWithRelation())).on(ti(Xn),(()=>t.toEditRelation())).on(ti(Un),(()=>t.toViewWithoutRelation())).on(ti(qn),(()=>t.toViewWithRelation()))}(s,new ii(e,t,n,i,r,o)),this._m=s}get currentState(){return this._m.currentState}setState(e){this._m.setState(e)}pushView(){!function(e){switch(e.currentState){case Vn:case Kn:e.setState(Un);break;case Gn:case Yn:case Xn:e.setState(qn)}}(this)}pushTerm(e){ei(this,e)}pushBlock(e){!function(e,t){switch(e.currentState){case Vn:e.setState(Kn);break;case Gn:e.setState(Yn);break;case Xn:Zn(t)?e.setState(Kn):e.setState(Yn);break;case qn:e.setState(Yn);break;case Un:e.setState(Kn)}}(this,e)}toggleSimple(){!function(e){switch(e.currentState){case Vn:e.setState(Gn);break;case Kn:e.setState(Yn);break;case Un:e.setState(qn);break;case Gn:e.setState(Vn);break;case Yn:e.setState(Kn);break;case qn:e.setState(Un);break;default:throw new Error(`Invalid state: ${e.currentState}`)}}(this)}changeByShortcut(){!function(e){switch(e.currentState){case qn:e.setState(Gn);break;case Un:e.setState(Vn);break;case Vn:e.setState(Kn);break;case Gn:e.setState(Yn);break;case Kn:case Yn:e.setState(Xn);break;case Xn:e.setState(qn)}}(this)}}class oi extends o{constructor(e,t,n,i){super(e,t,"OK",n),this._promise=new Promise((e=>{const t=()=>{const t=i();t&&e(t),super.close()};this._option.buttons[0].click=t,Nn()(super.el,".textae-editor__promise-daialog__observable-element","keyup",(e=>{13===e.keyCode&&t()}))}))}open(){return super.open(),this._promise}}function si(e){const t=e.querySelector(".textae-editor__edit-type-dialog__type__value__value").value,n=e.querySelector(".textae-editor__edit-type-dialog__type__label__value").innerText,i=[];for(const t of e.querySelectorAll(".textae-editor__edit-type-dialog__attribute"))i.push({pred:t.querySelector(".textae-editor__edit-type-dialog__attribute__predicate__value").dataset.pred,obj:t.querySelector(".textae-editor__edit-type-dialog__attribute__value__value").innerText});return{typeName:t,label:n,attributes:i}}function ai(e,t,n,i){if(!e)return void i(t);const r=new XMLHttpRequest,o=new URL(e,location);o.searchParams.append("term",n),r.open("GET",o.href,!0),r.onload=()=>{if(r.status>=200&&r.status<400){const e=JSON.parse(r.response).filter((e=>!t.some((t=>e.id===t.id))));i(t.concat(e))}},r.send()}n(2993);function li(){t().ui.autocomplete.prototype._renderItem=(e,{id:n,label:i})=>{const r=t()(xe()`
      <li>
        <div>
          ${i} 
          <i class="fa fa-globe"></i>
          ${n}
        </div>
      </li>`);return e.append(r),r},t().ui.autocomplete.prototype._resizeMenu=()=>{}}function ci(e,n,i,r){t()(e).autocomplete({source:(e,t)=>{n&&(n.innerText=""),ai(i,r(e.term),e.term,t)},minLength:3,select:(t,{item:i})=>(e.value=i.id,n&&(n.innerText=i.label),!1)})}li();var ui=n(8686),di=n.n(ui);function hi(e,t,n,i){return`\n    <div style="overflow-y: auto; max-height: 25em; overflow-x: hidden;">\n      <table class="textae-editor__edit-type-dialog__table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Predicate</th>\n            <th>Value</th>\n            <th>Label</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          ${function(e,t){return`\n    <tr>\n      <td></td>\n      <td>\n        <span class="textae-editor__edit-type-dialog__type__predicate__value">type</span>\n      </td>\n      <td class="ui-front">\n        <input class="textae-editor__edit-type-dialog__type__value__value textae-editor__promise-daialog__observable-element" value="${e}">\n      </td>\n      <td>\n        <span class="textae-editor__edit-type-dialog__type__label__value">${di()(t.getLabel(e))||""}</span>\n      </td>\n    </tr>\n  `}(e,n)}\n          ${t.map(((e,t,n)=>function(e,t,n,i){const{pred:r,obj:o}=e,s=n[t-1],a=s&&s.pred,l=i.getIndexOf(r),c=i.getLabel(r,o)||"",{valueType:u}=i.get(r);return`\n<tr class="textae-editor__edit-type-dialog__attribute">\n  ${r===a?"<td></td>":`<td>\n          ${l<9?`<span class="textae-editor__edit-type-dialog__shortcut-key" title="Shotcut key for this predicate">${l+1}</span>`:""}\n        </td>\n        `}\n  <td>\n    <span\n      class="textae-editor__edit-type-dialog__attribute__predicate__value ${r===a?"":`textae-editor__edit-type-dialog__attribute__predicate__value--${u}`}"\n      data-pred="${r}">\n      ${r===a?"":r}\n    </span>\n  </td>\n  <td>\n    <span class="textae-editor__edit-type-dialog__attribute__value__value">${o}</span>\n  </td>\n  <td>${c}</td>\n  <td>\n    <button\n      type="button"\n      class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__edit__value" data-pred="${r}"\n      data-index="${t}"\n      ${"flag"===u?'disabled="disabled"':""}>\n    </button>\n    <button\n      type="button" \n      class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__remove__value" \n      data-index="${t}">\n    </button>\n  </td>\n</tr>`}(e,t,n,i))).join("")}\n          </tbody>\n      </table>\n    </div>\n    <fieldset>\n      <legend>Available Predicates:</legend>\n      <div class="textae-editor__edit-type-dialog__add-attribute-buttons">\n      ${i.attributes.map((({pred:e,valueType:n})=>`<button\n              type="button" \n              class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__add textae-editor__edit-type-dialog__attribute__add--${n}"\n              data-pred="${e}"\n              ${t.some((t=>t.pred===e&&String(t.obj)===String(i.get(e).default)))?'disabled="disabled" title="There is an attribute with a default value."':""}> ${e}</button>`)).join(" ")}\n      </div>\n    </fieldset>\n  `}n(7285);const fi={};document.querySelector("html").addEventListener("mousemove",(e=>{fi.clientY=e.clientY,fi.pageY=e.pageY,fi.left=e.clientX}));class pi{constructor(e,n,i){this._editor=e,this._title=i,this._el=function(e){const t=`\n    <div \n      class="textae-editor__type-pallet textae-editor__type-pallet--${e}"\n      style="display: none;"\n      >\n    </div>`;return r().create(t)}(n),function(e,n){t()(e).draggable({containment:n,distance:10})}(this._el,e),Nn()(this._el,'[type="button"]',"click",(()=>e.focus())),Nn()(this._el,".textae-editor__type-pallet__read-button","click",(()=>e.eventEmitter.emit("textae-event.pallet.read-button.click"))),Nn()(this._el,".textae-editor__type-pallet__write-button","click",(()=>e.eventEmitter.emit("textae-event.pallet.write-button.click"))),Nn()(this._el,".textae-editor__type-pallet__close-button","click",(()=>this.hide()))}updateDisplay(){this.visibly&&this._updateDisplay()}get el(){return this._el}show(){this._el.style.display="block",this._updateDisplay(),this._moveInto()}_updateDisplay(){var e,t;this._el.innerHTML=`\n      <div class="textae-editor__type-pallet__container">\n        <div class="textae-editor__type-pallet__title-bar ui-widget-header ui-corner-all">\n          <span>${this._title}</span>\n          <button \n            type="button"\n            class="textae-editor__type-pallet__close-button ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close"\n            title="Close">\n            <span class="ui-button-icon ui-icon ui-icon-closethick"></span>\n            <span class="ui-button-icon-space"> </span>Close\n          </button>\n        </div>\n        <div class="textae-editor__type-pallet__content">${this._content}</div>\n      </div>\n    `,e=this._el,t=this._maxWidth,e.style.width="auto",t-2<=e.offsetWidth&&(e.style.width=t-4+"px"),function(e,t){t-14<=e.offsetHeight?e.style.height=t-14+"px":e.style.height=null}(this._el.querySelector(".textae-editor__type-pallet__container"),this._maxHeight)}_moveInto(){const{left:e,clientY:t,pageY:n}=fi;if(this._el.offsetWidth+e<=this._maxWidth?this._el.style.left=`${e}px`:this._el.style.left=this._editor[0].offsetLeft+this._maxWidth-this._el.offsetWidth-2+"px",this._el.offsetHeight+t<=this._maxHeight){const e=n-this._editor[0].offsetTop;this._el.style.top=`${e}px`}else{const e=n-this._editor[0].offsetTop-(this._el.offsetHeight+t-this._maxHeight);this._el.style.top=`${e}px`}}get _maxWidth(){return this._editor[0].offsetWidth}get _maxHeight(){return document.documentElement.clientHeight}hide(){this._el.style.display="none"}get visibly(){return"none"!==this._el.style.display}}class mi extends pi{constructor(e){super(e,"entity","Please select value"),this._veil=r().create('<div style="position: fixed; right: 0; top: 0; bottom:0; left: 0; background-color: rgba(0, 0, 10, 0.3);"></div>')}show(e,t){return this._editor[0].appendChild(this._veil),this._editor[0].appendChild(this.el),this._veil.style["z-index"]=t+1,this._el.style["z-index"]=t+1,this._attributeDefinition=e,super.show(),new Promise((e=>{Nn()(this._el,".textae-editor__type-pallet__selection-attribute-label","click",(t=>{this.hide(),e(t.target.dataset.id)}))}))}hide(){this._editor[0].removeChild(this._veil),this._editor[0].removeChild(this.el)}get _content(){return function(e){const{values:t}=e.attrDef;return`\n  <div>\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n        </tr>\n        ${t.map((({color:e="",id:t,default:n,label:i=""})=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="${t}">\n            ${t}\n            ${n?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${i}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n        </tr>\n        `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}({attrDef:this._attributeDefinition.JSON})}}class gi extends oi{constructor(e,t){super("Please edit number",function(e){const{pred:t,min:n,max:i,step:r,value:o}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="${t}" \n      disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__promise-daialog__observable-element" \n      type="number" \n      min="${n}" \n      max="${i}" \n      step="${r}" \n      value="${o}">\n  </div>\n</div>`}({pred:t.pred,value:t.obj,min:e.min,max:e.max,step:e.step}),{},(()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value})))}}class vi extends oi{constructor(e,t){super("Please edit string",function(e){const{pred:t,value:n}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="${t}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><span></span><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__edit-value-and-pred-dialog--value" \n      value="${n}">\n  </div>\n</div>`}({pred:e.pred,value:e.obj}),{height:250},(()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value,newLabel:super.el.querySelector("span").innerText}))),ci(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector("span"),t.autocompletionWs,(()=>[]))}}class yi extends oi{constructor(e,t,n,i,r){const{typeName:o,attributes:s}=r;super("Please edit type and attributes",hi(o,s,t,n),{minHeight:300,width:800},(()=>si(super.el))),Nn()(super.el,".textae-editor__edit-type-dialog__attribute__edit__value","click",(i=>{const{pred:r}=i.target.dataset,o=n.get(r),s=parseInt(super.el.closest(".textae-editor__dialog").style["z-index"]),{typeName:a,attributes:l}=si(super.el);switch(o.valueType){case"numeric":new gi(o,l[i.target.dataset.index]).open().then((({newObj:e})=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;case"selection":new mi(e).show(o,s).then((e=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;case"string":new vi(l[i.target.dataset.index],o).open().then((({newObj:e})=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;default:throw`${o.valueType} is unknown attribute.`}})),Nn()(super.el,".textae-editor__edit-type-dialog__attribute__remove__value","click",(e=>{const{index:i}=e.target.dataset,r=parseInt(i),{typeName:o,attributes:s}=si(super.el);this._updateDisplay(o,s.filter(((e,t)=>t!==r)),n,t)})),Nn()(super.el,".textae-editor__edit-type-dialog__attribute__add","click",(e=>{const{pred:i}=e.target.dataset,r=n.get(i).default,{typeName:o,attributes:s}=si(super.el);this._updateDisplay(o,s.concat({pred:i,obj:r,id:""}).sort(((e,t)=>n.attributeCompareFunction(e,t))),n,t)}));ci(super.el.querySelector(".textae-editor__edit-type-dialog__type__value__value"),super.el.querySelector(".textae-editor__edit-type-dialog__type__label__value"),i,(e=>t.findByLabel(e)))}_updateDisplay(e,t,n,i){const r=hi(e,t,i,n);super.el.closest(".ui-dialog-content").innerHTML=r}}function _i(e){const{typeName:t}=e[e.length-1],n=[];for(const{typeValues:t}of e)for(const e of t.attributes)n.some((t=>t.equalsTo(e.pred,e.obj)))||n.push(e);return new me(t,n)}class bi{constructor(e,t,n){this._annotationType=e,this._definitionContainer=t,this._commander=n}selectAll(e){this._selectionModel[this._annotationType].clear();for(const{id:t}of this._annotationData[this._annotationType].findByType(e))this._selectionModel[this._annotationType].add(t)}changeTypeOfSelectedElement(e){return this._commander.factory.changeTypeOfSelectedItemsCommand(this._annotationType,e)}addTypeDefinition(e){return console.assert(e.id,"id is necessary!"),this._commander.factory.createTypeDefinitionCommand(this._definitionContainer,e)}changeTypeDefinition(e,t){return this._commander.factory.changeTypeDefinitionCommand(this._definitionContainer,this._annotationType,e,t)}removeTypeDefinition(e,t){const n={id:e,label:t||""};if(void 0===e)throw new Error("You must set the type id to remove.");return this._commander.factory.removeTypeDefinitionCommand(this._definitionContainer,n)}relationClicked(){}_labelChanged({typeName:e,label:t,attributes:n=[]}){const i=this._commander.factory.changeItemTypeCommand(t,e,this._definitionContainer,n);e&&this._commander.invoke(i)}}class xi extends bi{constructor(e,t,n,i,r,o){super("entity",t,n),this._editor=e,this._annotationData=i,this._selectionModel=r,this._attributeEditor=o}changeInstance(e){this._selectionModel.entity.some&&new yi(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,_i(this._selectionModel.entity.all)).open().then((e=>this._labelChanged(e)))}manipulateAttribute(e,t){t?this._attributeEditor.deleteAt(e):this._attributeEditor.addOrEditAt(e)}}function wi(){window.getSelection().removeAllRanges()}function ki(e){return e.classList.contains("textae-editor__span")}function Ci(e){return e.classList.contains("textae-editor__text-box")}function Si(e){return e.classList.contains("textae-editor__style")}function Ti(e){return e.classList.contains("textae-editor__block")}class Ei{constructor(){this.selection=window.getSelection()}get isParentOfAnchorNodeTextBox(){return Ci(this.parentOfAnchorNode)}get isParentOfAnchorNodeDenotationSpan(){return ki(this.parentOfAnchorNode)}get isParentOfAnchorNodeBlockSpan(){return Ti(this.parentOfAnchorNode)}get isParentOfAnchorNodeStyleSpan(){return Si(this.parentOfAnchorNode)}get isParentOfFocusNodeTextBox(){return Ci(this.parentOfFocusNode)}get isParentOfFocusNodeDenotationSpan(){return ki(this.parentOfFocusNode)}get isParentOfFocusNodeBlockSpan(){return Ti(this.parentOfFocusNode)}get isParentOfFocusNodeStyleSpan(){return Si(this.parentOfFocusNode)}get isParentOfBothNodesSame(){return this.parentOfAnchorNode===this.parentOfFocusNode}get isParentsParentOfAnchorNodeAndFocusedNodeSame(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode.parentElement}get isAnchorNodeParentIsDescendantOfSelectedSpan(){return this.parentOfAnchorNode.closest(".ui-selected")}get isFocusOneDownUnderAnchor(){return this.parentOfAnchorNode===this.parentOfFocusNode.parentElement}get ancestorDenotationSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__span")}get ancestorDenotationSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__span")}get ancestorBlockSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__block")}get ancestorBlockSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__block")}get doesFitInOneBlockSpan(){return this.ancestorBlockSpanOfAnchorNode===this.ancestorBlockSpanOfFocusNode}get isAnchorOneDownUnderFocus(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode}get parentOfAnchorNode(){return this.selection.anchorNode.parentElement}get parentOfFocusNode(){return this.selection.focusNode.parentElement}}function Ai(e,t,n,i){t.length?e.selectSpanRange(t):n.ctrlKey||n.metaKey?e.span.toggle(i):e.selectSpan(i)}class $i{constructor(e,t,n,i,r){this._annotationData=t,this._selectionModel=n,this._spanEditor=r,this._editor=e,this._pallet=i}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(e){this._pallet.hide();"Range"===window.getSelection().type?(this._spanEditor.editFor(new Ei),e.stopPropagation()):this._selectionModel.removeAll()}denotationSpanClicked(e){2===e.button&&wi();const t=window.getSelection();"Caret"!==t.type&&"None"!==t.type||this._selectSpan(e,e.target.id),"Range"===t.type&&this._spanEditor.editFor(new Ei)}blockSpanClicked(e){2===e.button&&wi();const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&this._spanEditor.editFor(new Ei)}styleSpanClicked(e){2===e.button&&wi();const t=window.getSelection();if("Caret"===t.type){const t=e.target.closest(".textae-editor__span");t?this._selectSpan(e,t.id):this._selectionModel.removeAll()}"Range"===t.type&&this._spanEditor.editFor(new Ei)}signboardClicked(){this._editor.focus()}typeValuesClicked(e){const t=Hn(e.target).title;this._annotationData.entity.get(t).isDenotation&&(e.ctrlKey||e.metaKey?this._selectionModel.entity.toggle(t):this._selectionModel.selectEntity(t))}_selectSpan(e,t){const n=this._selectionModel.span.singleId,i=e.shiftKey&&n?this._annotationData.span.rangeDenotationSpan(n,t):[];Ai(this._selectionModel,i,e,t)}}function Di(e){let t=0;for(const n of e.parentElement.childNodes){if(n==e)break;"#text"===n.nodeName?t+=n.nodeValue.length:t+=n.textContent.length}return t}function Oi(e,t){const n=t.parentElement;if(Ci(n))return 0;if(ki(n)||Ti(n)||Si(n))return e.get(n.id).begin;throw new Error(`Can not get position of a node : ${t} ${t.data}`)}class Ni{constructor(e,t){this._spanModelContainer=e,this._selection=t.selection}get anchor(){return Oi(this._spanModelContainer,this._selection.anchorNode)+Di(this._selection.anchorNode)+this._selection.anchorOffset}get focus(){return Oi(this._spanModelContainer,this._selection.focusNode)+Di(this._selection.focusNode)+this._selection.focusOffset}}function Mi(e,t,n,i,r){for(;r(e(n,i));)i+=t;return i}const Pi=function(e,t){return e.charAt(t)};var Li=function(e,t,n){return Mi(Pi,1,e,t,n)},ji=function(e,t,n){return Mi(Pi,-1,e,t,n)};class Ii{backFromBegin(e,t,n){}forwardFromEnd(e,t,n){}forwardFromBegin(e,t,n){}backFromEnd(e,t,n){}}function Ri(e,t){return[e.charAt(t),e.charAt(t-1)]}function Fi(e,t){return[e.charAt(t),e.charAt(t+1)]}function zi(e,t,n){return""!==n[0]&&!e(n[1])&&!t(n[1])||t(n[0])}class Hi extends Ii{backFromBegin(e,t,n){return function(e,t,n){return Mi(Ri,-1,e,t,(e=>e[1]&&!n(e[0])&&!n(e[1])))}(e,Li(e,t,(e=>n.isBlankCharacter(e))),(e=>n.isDelimiter(e)))}forwardFromEnd(e,t,n){return function(e,t,n){return Mi(Fi,1,e,t,(e=>e[1]&&!n(e[0])&&!n(e[1])))}(e,ji(e,t,(e=>n.isBlankCharacter(e))),(e=>n.isDelimiter(e)))}forwardFromBegin(e,t,n){return function(e,t,n){return Mi(Ri,1,e,t,n)}(e,t,(e=>zi((e=>n.isBlankCharacter(e)),(e=>n.isDelimiter(e)),e)))}backFromEnd(e,t,n){return function(e,t,n){return Mi(Fi,-1,e,t,n)}(e,t,(e=>zi((e=>n.isBlankCharacter(e)),(e=>n.isDelimiter(e)),e)))}}class Bi extends Ii{backFromBegin(e,t,n){return Li(e,t,(e=>n.isBlankCharacter(e)))}forwardFromEnd(e,t,n){return ji(e,t,(e=>n.isBlankCharacter(e)))}forwardFromBegin(e,t,n){return Li(e,t,(e=>n.isBlankCharacter(e)))}backFromEnd(e,t,n){return ji(e,t,(e=>n.isBlankCharacter(e)))}}class Wi{constructor(e){this._positions=e}get begin(){return this._positions.anchor<this._positions.focus?this._positions.anchor:this._positions.focus}get end(){return this._positions.anchor<this._positions.focus?this._positions.focus:this._positions.anchor}}function Ui(e,t,n,i){const r=new Ni(e.span,n),o=new Wi(r);return{begin:t.backFromBegin(e.sourceDoc,o.begin,i),end:t.forwardFromEnd(e.sourceDoc,o.end-1,i)+1}}function qi(e){wi(),setTimeout((()=>alert(e)),10)}function Vi(e,t,n,i,r,o,s){const{begin:a,end:l}=function(e,t,n,i,r){const{anchor:o,focus:s}=new Ni(e.span,n),a=e.span.get(r);return o<s?a.end===s?{begin:a.end,end:a.end}:{begin:t.forwardFromBegin(e.sourceDoc,s,i),end:a.end}:a.begin===s?{begin:a.begin,end:a.begin}:{begin:a.begin,end:t.backFromEnd(e.sourceDoc,s-1,i)+1}}(e,n,r,o,i);if(e.span.isBoundaryCrossingWithOtherSpans(a,l))return qi("A span cannot be shrinked to make a boundary crossing."),!1;const c=e.span.hasDenotationSpan(a,l);return a<l&&!c?(s(a,l),!1):(t.invoke(t.factory.removeSpanCommand(i)),!0)}function Gi(e,t,n,i,r,o,s,a,l){if(o){n.removeAll();const c=V(e,o);Vi(t,i,r,o,s,a,l)&&c&&n.selectSpan(c.id)}}function Ki(e,t){return t.isAnchorNodeParentIsDescendantOfSelectedSpan?e.span.singleId:t.isAnchorOneDownUnderFocus?t.selection.anchorNode.parentNode.id:null}function Yi(e,t,n,i,r,o,s){e.removeAll();const{begin:a,end:l}=function(e,t,n,i,r){const o=new Ni(e.span,i);return function(e,t,n,i,r,o){const s=e.span.get(n);return i>r?{begin:t.backFromBegin(e.sourceDoc,r,o),end:s.end}:{begin:s.begin,end:t.forwardFromEnd(e.sourceDoc,r-1,o)+1}}(e,t,n,o.anchor,o.focus,r)}(t,n,i,r,o);t.span.isBoundaryCrossingWithOtherSpans(a,l)?qi("A span cannot be expanded to make a boundary crossing."):t.span.hasDenotationSpan(a,l)||s(a,l)}function Xi(e,t,n){const i=new Ni(e.span,n),r=new Wi(i),o=e.sourceDoc.substring(r.begin,r.end);return t.removeBlankChractors(o).length>0}function Ji(e,t){return e.valueOf("boundary-detection")?e=>t.isDelimiter(e):()=>!0}class Qi{constructor(e,t,n,i,r,o){this._editor=e,this._annotationData=t,this._selectionModel=n,this._commander=i,this._buttonController=r,this._spanConfig=o}editFor(e){if(e.isParentOfAnchorNodeTextBox){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInTextBoxFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInTextBoxFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInTextBoxFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInTextBoxFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeDenotationSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInDenotationSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInDenotationSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInDenotationSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInDenotationSpanFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeBlockSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInBlockSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInBlockSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInBlockSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInBlockSpanFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeStyleSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInStyleSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInStyleSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInStyleSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInStyleSpanFocusNodeInStyleSpan(e)}}_anchorNodeInTextBoxFocusNodeInTextBox(e){this._create(e)}_anchorNodeInTextBoxFocusNodeInDenotationSpan(e){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e)}_anchorNodeInTextBoxFocusNodeInBlockSpan(){wi()}_anchorNodeInTextBoxFocusNodeInStyleSpan(e){if(e.ancestorDenotationSpanOfFocusNode){const t=e.ancestorDenotationSpanOfFocusNode.id;this._shrink(e,t)}else this._create(e)}_anchorNodeInDenotationSpanFocusNodeInTextBox(e){const t=Ki(this._selectionModel,e);this._expand(e,t)}_anchorNodeInDenotationSpanFocusNodeInDenotationSpan(e){if(e.isParentOfBothNodesSame){const t=this._annotationData.span.get(e.parentOfAnchorNode.id),n=new Ni(this._annotationData.span,e);n.anchor===t.begin||n.anchor===t.end?this._isFocusInSelectedSpan(e)?this._shrinkSelectedSpan(e):this._shrink(e,t.id):this._create(e)}else if(e.parentOfFocusNode.closest(`#${e.parentOfAnchorNode.id}`))this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e);else if(e.parentOfAnchorNode.closest(`#${e.parentOfFocusNode.id}`))if(this._isFocusInSelectedSpan(e))this._shrinkSelectedSpan(e);else{const t=Ki(this._selectionModel,e);this._expand(e,t)}else if(e.isParentsParentOfAnchorNodeAndFocusedNodeSame){const t=e.parentOfAnchorNode.id;this._expand(e,t)}else wi()}_anchorNodeInDenotationSpanFocusNodeInBlockSpan(e){const t=Ki(this._selectionModel,e);this._expand(e,t)}_anchorNodeInDenotationSpanFocusNodeInStyleSpan(e){if(e.isParentsParentOfAnchorNodeAndFocusedNodeSame){const t=e.parentOfAnchorNode.id;this._expand(e,t)}else if(e.ancestorDenotationSpanOfFocusNode){const t=e.ancestorDenotationSpanOfFocusNode.id;this._shrink(e,t)}else;}_anchorNodeInBlockSpanFocusNodeInTextBox(){wi()}_anchorNodeInBlockSpanFocusNodeInDenotationSpan(e){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e)}_anchorNodeInBlockSpanFocusNodeInBlockSpan(e){this._create(e)}_anchorNodeInBlockSpanFocusNodeInStyleSpan(){wi()}_anchorNodeInStyleSpanFocusNodeInTextBox(e){if(e.ancestorDenotationSpanOfAnchorNode){const t=e.ancestorDenotationSpanOfAnchorNode.id;this._expand(e,t)}else this._create(e)}_anchorNodeInStyleSpanFocusNodeInDenotationSpan(e){if(this._isFocusInSelectedSpan(e))this._shrinkSelectedSpan(e);else if(e.ancestorDenotationSpanOfAnchorNode&&e.ancestorDenotationSpanOfAnchorNode.parentElement===e.parentOfFocusNode){const t=e.ancestorDenotationSpanOfAnchorNode.id;this._expand(e,t)}else if(e.isFocusOneDownUnderAnchor)this._shrink(e,e.parentOfFocusNode.id);else{if(e.isAnchorOneDownUnderFocus){const{anchor:t}=new Ni(this._annotationData.span,e),n=this._annotationData.span.get(e.parentOfFocusNode.id);if(t===n.begin||t===n.end)return void this._shrink(e,e.parentOfFocusNode.id)}wi()}}_anchorNodeInStyleSpanFocusNodeInBlockSpan(){wi()}_anchorNodeInStyleSpanFocusNodeInStyleSpan(e){(e.isParentOfBothNodesSame||e.isParentsParentOfAnchorNodeAndFocusedNodeSame)&&this._create(e),wi()}_isFocusInSelectedSpan(e){const t=this._selectionModel.span.single;if(!t)return!1;const n=new Ni(this._annotationData.span,e).focus;return t.begin<n&&n<t.end}_create(e){Xi(this._annotationData,this._spanConfig,e)&&(this._selectionModel.removeAll(),function(e,t,n,i,r,o,s){const{begin:a,end:l}=Ui(e,n,r,o);if(e.span.isBoundaryCrossingWithOtherSpans(a,l))return;if(e.span.hasDenotationSpan(a,l))return;const c=function(e,t,n,i){return e.factory.createSpanAndAutoReplicateCommand({begin:t.begin,end:t.end},n,i)}(t,{begin:a,end:l},i,s);t.invoke(c)}(this._annotationData,this._commander,this._spanAdjuster,this._isReplicateAuto,e,this._spanConfig,Ji(this._buttonController,this._spanConfig))),wi()}_expand(e,t){t&&Yi(this._selectionModel,this._annotationData,this._spanAdjuster,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(t,e,n))})),wi()}_shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e){this._isFocusInSelectedSpan(e)?this._shrinkSelectedSpan(e):e.isFocusOneDownUnderAnchor&&this._shrink(e,e.parentOfFocusNode.id),wi()}_shrinkSelectedSpan(e){this._shrink(e,this._selectionModel.span.singleId)}_shrink(e,t){Gi(this._editor,this._annotationData,this._selectionModel,this._commander,this._spanAdjuster,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(t,e,n))})),wi()}get _isReplicateAuto(){return this._buttonController.valueOf("replicate-auto")}get _spanAdjuster(){return this._buttonController.valueOf("boundary-detection")?new Hi:new Bi}}function Zi(e,t,{item:n}){return e.value=n.id,t.value=n.label,!1}li();class er extends oi{constructor(e,n,i,r,o){super(e,function(e){const{id:t,label:n,color:i,isDefault:r}=e;return`\n<div class="textae-editor__edit-type-definition-dialog__container">\n  <div class="textae-editor__edit-type-definition-dialog__input-box ui-front">\n    <label>Id:</label><br>\n    <input\n      class="textae-editor__edit-type-definition-dialog--id textae-editor__promise-daialog__observable-element" \n      value=${t||""}>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__input-box ui-front">\n    <label>Label:<span></span></label><br>\n    <input value="${n}">\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__color-picker">\n    <label>Color:<input \n      class="textae-editor__edit-type-definition-dialog__color-picker__input" \n      type="color" \n      value="${i}">\n    </label>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__set-default">\n    <label>Default type:<input \n      class="textae-editor__edit-type-definition-dialog__set-default__input" \n      type="checkbox" ${r?'checked="checked" disabled="disabled"':""}>\n    </label>\n  </div>\n</div>`}(n),{},(()=>{const e=super.el.querySelectorAll("input");return o(e[0].value,e[1].value,e[2].value,e[3].checked)})),function(e,n,i){const r=e.querySelectorAll("input");t()(r[0]).autocomplete({source:(e,t)=>ai(n,i(e.term),e.term,t),minLength:3,select:(e,t)=>Zi(r[0],r[1],t)}),t()(r[1]).autocomplete({source:(e,t)=>ai(n,i(e.term),e.term,t),minLength:3,select:(e,t)=>Zi(r[0],r[1],t)})}(super.el,r,(e=>i.findByLabel(e)))}}class tr extends er{constructor(e,t){super("Please create a new type",{id:null,label:"",color:e.defaultColor,isDefault:!1},e,t,((e,t,n,i)=>{if(""===e)return;const r={id:e,color:n};return""!==t&&(r.label=t),i&&(r.default=i),{newType:r}}))}}class nr extends er{constructor(e,t,n,i,r){const o=e.getLabel(t)||"",s={id:t,label:o,color:n,isDefault:i};super("Please edit the type",s,e,r,((e,n,i,r)=>{const o=function(e,t){const n=new Map;return e.id!==t.id&&n.set("id",t.id),e.label!==t.label&&n.set("label",""===t.label?null:t.label),e.color!==t.color&&n.set("color",""===t.color?null:t.color),e.isDefault!==t.isDefault&&n.set("default",!!t.isDefault||null),n}(s,{id:e,label:n,color:i,isDefault:r});return{id:t,changedProperties:o}}))}}function ir(e){return!e.classList.contains("textae-editor__type-pallet__table-button--disabled")}class rr{constructor(e,t,n,i,r,o,s,a){this._editor=e,this._bindMouseEvents=t,this._mouseEventHandler=n,this._handler=i,this._pallet=r,function(e,t,n,i,r){Nn()(e.el,".textae-editor__type-pallet__add-button","click",(()=>{new tr(r,i()).open().then((({newType:e})=>t.invoke(n.addTypeDefinition(e))))})),Nn()(e.el,".textae-editor__type-pallet__label","click",(e=>t.invoke(n.changeTypeOfSelectedElement(e.delegateTarget.dataset.id)))),Nn()(e.el,".textae-editor__type-pallet__select-all","click",(e=>{ir(e.target)&&n.selectAll(e.delegateTarget.dataset.id)})),Nn()(e.el,".textae-editor__type-pallet__edit-type","click",(e=>{new nr(r,e.target.dataset.id,e.target.dataset.color.toLowerCase(),"true"===e.target.dataset.isDefault,i()).open().then((({id:e,changedProperties:i})=>{i.size&&t.invoke(n.changeTypeDefinition(e,i))}))})),Nn()(e.el,".textae-editor__type-pallet__remove","click",(e=>{ir(e.target)&&t.invoke(n.removeTypeDefinition(e.delegateTarget.dataset.id,e.delegateTarget.dataset.label))}))}(r,o,i,s,a),e.eventEmitter.on("textae-event.editor.unselect",(()=>r.hide())).on("textae-event.history.change",(()=>r.updateDisplay())).on("textae-event.data-access-object.configuration.save",(()=>r.updateDisplay())).on("textae-event.type-definition.lock",(()=>r.updateDisplay())),e[0].appendChild(r.el)}init(){return this._bindMouseEvents(this._editor,this._mouseEventHandler)}get handler(){return this._handler}get pallet(){return this._pallet}}function or(e,t){const n=[];let i=!1;return n.push(Nn()(e[0],".textae-editor__text-box","click",(e=>{e.target.classList.contains("textae-editor__text-box")&&!i&&t.textBoxClicked(e)}))),n.push(Nn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(Nn()(e[0],".textae-editor__signboard","mousedown",(()=>t.signboardClicked()))),n.push(Nn()(e[0],".textae-editor__signboard__type-values","click",(e=>t.typeValuesClicked(e)))),n.push(Nn()(e[0],".textae-editor__span","mouseup",(e=>{e.target.classList.contains("textae-editor__span")&&(t.denotationSpanClicked(e),i=!0,setTimeout((()=>i=!1),0))}))),n.push(Nn()(e[0],".textae-editor__block","mouseup",(e=>{e.target.classList.contains("textae-editor__block")&&t.blockSpanClicked(e)}))),n.push(Nn()(e[0],".textae-editor__style","mouseup",(e=>{e.target.classList.contains("textae-editor__style")&&t.styleSpanClicked(e)}))),n}function sr(e,t,n,i){new gi(t,n).open().then((({newObj:n})=>{const r=i.factory.changeAttributesOfItemsWithSamePred(e.all,t,n);i.invoke(r)}))}function ar(e,t,n,i){new vi(t,i).open().then((({newObj:t,newLabel:r})=>{t?n.invoke(n.factory.changeAttributesOfItemsWithSamePred(e.all,i,t,r)):n.invoke(n.factory.removeAttributesFromItemsByPredCommand(e.all,i))}))}class lr{constructor(e,t,n,i,r){this._commander=e,this._annotationData=t,this._selectionModel=n,this._pallet=i,this._typeDefinition=r}addOrEditAt(e){this._pallet.hide();const t=this._typeDefinition.attribute.getAttributeAt(e);if(t)switch(t.valueType){case"flag":this._commander.invoke(this._commander.factory.toggleFlagAttributeToItemsCommand(this._selectionModel.entity.all,t));break;case"numeric":!function(e,t,n){const i=e.entity.findSelectedAttributeWithSamePredicate(t.pred);if(i)e.entity.onlySelectedWithJustOneAttributeOf(t.pred)?sr(e.entity,t,i,n):At().warning("Some selected items has zero or multi this attribute.");else{const i=n.factory.createAttributeToItemsCommand(e.entity.all,t);n.invoke(i)}}(this._selectionModel,t,this._commander);break;case"selection":if(this._selectionModel.entity.findSelectedAttributeWithSamePredicate(t.pred))this._pallet.show(),this._pallet.showAttribute(t.pred);else{const e=this._commander.factory.createAttributeToItemsCommand(this._selectionModel.entity.all,t);this._commander.invoke(e)}break;case"string":!function(e,t,n){const i=e.entity.findSelectedAttributeWithSamePredicate(t.pred);if(i)e.entity.onlySelectedWithJustOneAttributeOf(t.pred)?ar(e.entity,i,n,t):At().warning("Some selected items has zero or multi this attribute.");else{const i=n.factory.createAttributeToItemsCommand(e.entity.all,t);n.invoke(i)}}(this._selectionModel,t,this._commander);break;default:throw`${t.valueType} is unknown attribute`}else At().warning(`Attribute No.${e} is not defined`)}deleteAt(e){const t=this._typeDefinition.attribute.getAttributeAt(e);if(this._selectionModel.entity.selectedWithAttributeOf(t.pred)){const e=this._commander.factory.removeAttributesFromItemsByPredCommand(this._selectionModel.entity.all,t);this._commander.invoke(e)}else At().warning("None of the selected items has this attribute.")}}var cr=n(5311);function ur(e,t){return e.querySelector(`${t} input`)&&e.querySelector(`${t} input`).value}function dr(e,t){const{pred:n,default:i,label:r,color:o,min:s,max:a,step:l,valueType:c}=t,u="flag"===c,d="numeric"===c;return`\n    <div class="${e}__row">\n      <div class="${e}__pred textae-editor__promise-daialog__observable-element">\n        <label>Predicate:</label><br>\n        <input value="${n||""}">\n      </div>\n      ${"numeric"===c||"string"===c?`${function(e,t){return`\n    <div class="${e}__default-value">\n      <label>Default:</label><br>\n      <input value="${t||""}">\n    </div>\n  `}(e,i)}`:""}\n    </div>\n    ${u?`${function(e,t,n){return`\n    <div class="${e}__row">\n      <div class="${e}__label">\n        <label>Label:</label><br>\n        <input type="text" value="${t||""}">\n      </div>\n    </div>\n    <div class="${e}__row">\n      <div class="${e}__color">\n        <label>Color:</label><br>\n        <input type="text" value="${n||""}">\n      </div>\n    </div>\n  `}(e,r,o)}`:""}\n    ${d?`${function(e,t,n,i){return`\n    <div class="${e}__row">\n      <div class="${e}__min">\n        <label>Min:</label><br>\n        <input type="text" value="${t||0}">\n      </div>\n      <div class="${e}__max">\n        <label>Max:</label><br>\n        <input type="text" value="${n||0}">\n      </div>\n      <div class="${e}__step">\n        <label>Step:</label><br>\n        <input type="text" value="${i||0}">\n      </div>\n    </div>\n  `}(e,s,a,l)}`:""}\n  `}function hr(e,t){const{valueType:n}=t;return`\n<div class="${e}__container">\n  <div class="${e}__row">\n    <label>Attribute type:</label>\n    <select class="${e}__value-type">\n      <option value="flag"${"flag"===n?" selected":""}>\n        flag\n        </option>\n      <option value="selection"${"selection"===n?" selected":""}>\n        selection\n      </option>\n      <option value="string"${"string"===n?" selected":""}>\n        string\n      </option>\n      <option value="numeric"${"numeric"===n?" selected":""}>\n        numeric\n      </option>\n    </select>\n  </div>\n  ${dr(e,t)}\n</div>`}const fr="textae-editor__create-attribute-definition-dialog";class pr extends oi{constructor(){super("Please enter new attribute definition",hr(fr,{valueType:"flag"}),{},(()=>{const e=this._state;return"numeric"===e.valueType?{...e,default:parseFloat(e.default)||0,min:parseFloat(e.min)||0,max:parseFloat(e.max)||0,step:parseFloat(e.step)||0}:e})),Nn()(super.el,`.${fr}__value-type`,"change",(()=>{const e=hr(fr,this._state);super.el.closest(".ui-dialog-content").innerHTML=e}))}get _state(){const e=super.el.querySelector(`.${fr}__value-type`).value;return{pred:ur(super.el,`.${fr}__pred`),label:ur(super.el,`.${fr}__label`),color:ur(super.el,`.${fr}__color`),default:ur(super.el,`.${fr}__default-value`),min:ur(super.el,`.${fr}__min`),max:ur(super.el,`.${fr}__max`),step:ur(super.el,`.${fr}__step`),valueType:e}}}function mr(e,t){return!Number.isNaN(parseFloat(t))&&e!==parseFloat(t)}const gr="textae-editor__edit-attribute-definition-dialog";class vr extends oi{constructor(e){super("Please enter new values",function(e,t){return`\n<div class="${e}__container">\n  ${dr(e,t)}\n</div>`}(gr,e),{},(()=>{const t=ur(super.el,".textae-editor__edit-attribute-definition-dialog__pred"),n=ur(super.el,".textae-editor__edit-attribute-definition-dialog__default-value"),i=new Map;if(e.pred!==t&&i.set("pred",t),"flag"===e.valueType){const t=ur(super.el,".textae-editor__edit-attribute-definition-dialog__label"),n=ur(super.el,".textae-editor__edit-attribute-definition-dialog__color");e.label!==t&&i.set("label",t),e.color!==n&&i.set("color",n)}if("string"===e.valueType&&e.default!==n&&i.set("default",n),"numeric"===e.valueType){mr(e.default,n)&&i.set("default",parseFloat(n));const t=ur(super.el,".textae-editor__edit-attribute-definition-dialog__min"),r=ur(super.el,".textae-editor__edit-attribute-definition-dialog__max"),o=ur(super.el,".textae-editor__edit-attribute-definition-dialog__step");mr(e.min,t)&&i.set("min",parseFloat(t)),mr(e.max,r)&&i.set("max",parseFloat(r)),mr(e.step,o)&&i.set("step",parseFloat(o))}return i}))}}function yr(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}class _r extends oi{constructor(e,t={}){const n={label:t.label,color:t.color};switch(e){case"numeric":n.labelForRangeOrIdOrPattern="range",n.rangeOrIdOrPattern=t.range;break;case"selection":n.labelForRangeOrIdOrPattern="id",n.rangeOrIdOrPattern=t.id,n.showDefault=!0,n.default=t.default;break;case"string":n.labelForRangeOrIdOrPattern="pattern",n.rangeOrIdOrPattern=t.pattern;break;default:throw new Error(`${e} is Uknown Attribute`)}super("Please enter new values",function(e){const{labelForRangeOrIdOrPattern:t,rangeOrIdOrPattern:n,showDefault:i,default:r,label:o,color:s}=e;return`\n<div class="textae-editor__add-value-to-attribute-dialog__container">\n  <div class="textae-editor__add-value-to-attribute-dialog__row">\n    <div class="textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern textae-editor__promise-daialog__observable-element">\n      <label>${t}:</label><br>\n      <input value="${n||""}">\n    </div>\n    ${function(e,t){return e?`\n    <div class="textae-editor__add-value-to-attribute-dialog__default">\n      <label>default:</label><br>\n      <input type="checkbox" ${t?'checked="checked"':""}>\n    </div>\n    `:""}(i,r)}\n    <div class="textae-editor__add-value-to-attribute-dialog__label">\n      <label>label:</label><br>\n      <input value="${o||""}">\n    </div>\n    <div class="textae-editor__add-value-to-attribute-dialog__color">\n      <label>color:</label><br>\n      <input value="${s||""}">\n    </div>\n  </div>\n</div>`}(n),{},(()=>{const t=ur(super.el,".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern"),n=ur(super.el,".textae-editor__add-value-to-attribute-dialog__label"),i=ur(super.el,".textae-editor__add-value-to-attribute-dialog__color"),r={};switch(n&&(r.label=n),i&&(r.color=i),e){case"numeric":r.range=t;break;case"selection":r.id=t,super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__default input").checked&&(r.default=!0);break;case"string":r.pattern=t}return r})),"numeric"===e&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(e=>{const{value:t}=e.target;try{new pt(t),yr(super.button,!0)}catch(e){yr(super.button,!1)}})),"string"===e&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(e=>{const{value:t}=e.target;try{new RegExp(t),yr(super.button,!0)}catch(e){yr(super.button,!1)}})),super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__color").addEventListener("input",(e=>{const{value:t}=e.target;yr(super.button,!t||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t))}))}}function br(e,t,n,i){!function(e){Nn()(e,".textae-editor__type-pallet__attribute","dragstart",(e=>{e.dataTransfer.setData("application/x-textae-attribute-tab-old-index",e.target.dataset.index),function(e){e.target.closest(".textae-editor__type-pallet__content").classList.add("textae-editor__type-pallet__content--dragging")}(e)})),Nn()(e,".textae-editor__type-pallet__attribute","dragend",(e=>{!function(e){e.target.closest(".textae-editor__type-pallet__content").classList.remove("textae-editor__type-pallet__content--dragging")}(e)}))}(t),function(e,t){Nn()(e,".textae-editor__type-pallet__drop-target","dragover",(e=>{const t=e.target.closest(".textae-editor__type-pallet__content").querySelector(".textae-editor__type-pallet__attribute").offsetWidth;e.target.innerHTML=`<div style="width: ${t}px;"></div>`,e.preventDefault()})),Nn()(e,".textae-editor__type-pallet__drop-target","dragleave",(e=>{e.target.innerHTML=""})),Nn()(e,".textae-editor__type-pallet__drop-target","drop",(e=>{const n=parseInt(e.dataTransfer.getData("application/x-textae-attribute-tab-old-index")),i=parseInt(e.target.dataset.index);t.invoke(t.factory.moveAttributeDefintionComannd(n,n<i?i-1:i))}))}(t,n),Nn()(t,".textae-editor__type-pallet__attribute","click",(t=>{e.showAttribute(t.target.dataset.attribute)})),Nn()(t,".textae-editor__type-pallet__create-predicate","click",(()=>(new pr).open().then((e=>{e.pred&&n.invoke(n.factory.createAttributeDefinitionCommand(e))})))),Nn()(t,".textae-editor__type-pallet__edit-predicate","click",(()=>new vr(e.attrDef).open().then((t=>{t.size&&""!==t.get("pred")&&n.invoke(n.factory.changeAttributeDefinitionCommand(e.attrDef,t))})))),Nn()(t,".textae-editor__type-pallet__delete-predicate","click",(()=>n.invoke(n.factory.deleteAttributeDefinitionCommand(e.attrDef)))),Nn()(t,".textae-editor__type-pallet__selection-attribute-label","click",(t=>{if(i.selectedWithAttributeOf(e.attrDef.pred))if(i.isDupulicatedPredAttrributeSelected(e.attrDef.pred))At().warning("An item among the selected has this attribute multiple times.");else{const r=n.factory.changeAttributesOfItemsWithSamePred(i.all,e.attrDef,t.target.dataset.id);n.invoke(r)}else{const r=n.factory.createAttributeToItemsCommand(i.all,e.attrDef,t.target.dataset.id);n.invoke(r)}})),Nn()(t,".textae-editor__type-pallet__add-attribute-value-button","click",(()=>new _r(e.attrDef.valueType).open().then((t=>{(t.range||t.id||t.pattern)&&n.invoke(n.factory.addValueToAttributeDefinitionCommand(e.attrDef,t))})))),Nn()(t,".textae-editor__type-pallet__edit-value","click",(t=>{const i=e.attrDef.values[t.target.dataset.index];new _r(e.attrDef.valueType,i).open().then((r=>{if(r.range||r.id||r.pattern){if(!(Object.keys(r).reduce(((e,t)=>e||r[t]!==i[t]),!1)||Object.keys(i).reduce(((e,t)=>e||r[t]!==i[t]),!1)))return;n.invoke(n.factory.changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(e.attrDef.JSON,t.target.dataset.index,r))}}))})),Nn()(t,".textae-editor__type-pallet__remove-value","click",(t=>n.invoke(n.factory.removeValueFromAttributeDefinitionCommand(e.attrDef,t.target.dataset.index)))),Nn()(t,".textae-editor__type-pallet__add-attribute","click",(()=>n.invoke(n.factory.createAttributeToItemsCommand(i.all,e.attrDef)))),Nn()(t,".textae-editor__type-pallet__edit-object","click",(()=>{const t=i.findSelectedAttributeWithSamePredicate(e.attrDef.pred);switch(e.attrDef.valueType){case"numeric":sr(i,e.attrDef,t,n);break;case"string":ar(i,t,n,e.attrDef);break;default:throw new Error(`Invalid attribute valueType: ${e.attrDef.valueType}`)}})),Nn()(t,".textae-editor__type-pallet__remove-attribute","click",(()=>n.invoke(n.factory.removeAttributesFromItemsByPredCommand(i.all,e.attrDef))))}function xr(e){const{isLock:t,selectionModelItems:n,selectedPred:i,attributes:r,hasDiff:o}=e,s=1===(a=n.size)?"1 item selected":a>1?`${a} items selected`:"";var a;const l=r.length<30,c=i===(r[r.length-1]&&r[r.length-1].pred);return`\n<div style="display: flex;">\n  <p class="textae-editor__type-pallet__information">\n    <span class="textae-editor__type-pallet__lock-icon" style="display: ${t?"inline-block":"none"};">locked</span>\n    <span class="textae-editor__type-pallet__selected-entity-label">${s}</span>\n  </p>\n  <p class="textae-editor__type-pallet__attribute ${i?"":"textae-editor__type-pallet__attribute--selected"}" data-attribute="">\n    Type\n  </p>\n  ${r.map(((e,t,n)=>function({pred:e},t,n,i){return`\n    ${e!==i&&t>1&&n[t-1].pred!==i?`<span class="textae-editor__type-pallet__drop-target" data-index="${t}"></span>`:""}\n    <p \n      class="textae-editor__type-pallet__attribute${e===i?" textae-editor__type-pallet__attribute--selected":""}"\n      data-attribute="${e}"\n      data-index="${t}"\n      ${e===i?'draggable="true"':""}>\n      ${t<9?`${t+1}:`:""}${e}\n    </p>\n  `}(e,t,n,i))).join("\n")}\n  ${t?"":`\n        ${c?"":'<span class="textae-editor__type-pallet__drop-target" data-index="-1"></span>'}\n        ${l?'\n            <p class="textae-editor__type-pallet__attribute textae-editor__type-pallet__create-predicate">\n              <span class="textae-editor__type-pallet__create-predicate__button" title="Add new attribute"></span>\n            </p>\n            ':""}`}\n  <div class="textae-editor__type-pallet__buttons">\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button ${o?"textae-editor__type-pallet__write-button--transit":""}" title="Upload"></span>\n  </div>\n</div>\n`}function wr(e){const{attrDef:t,selectionModelItems:n}=e,{pred:i}=t,{valueType:r}=t,o=n.size;return`\n  <div class="textae-editor__type-pallet__predicate-controller">\n    <div>\n      ${function(e){const{isLock:t,numberOfItemsUsingSelectedPred:n}=e;return t?'\n      <button \n        type="button"\n        class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__delete-predicate"\n        disabled="disabled">\n      </button>\n      <button\n        type="button"\n        class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__edit-predicate"\n        disabled="disabled">\n      </button>\n    ':`\n    ${n.size>0?`<button \n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__delete-predicate"\n            disabled="disabled"\n            title="It cannot be deleted, as this attribute is used for ${n.size} items.">\n          </button>`:'<button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__delete-predicate"\n            title="Delet this predicate.">\n          </button>'}\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n      title="Edit this predicate.">\n    </button>\n  `}(e)}\n      Attribute\n      <span\n        class="textae-editor__type-pallet__predicate__value-type textae-editor__type-pallet__predicate__value-type--${r}"\n        title="${r} type">\n      </span>\n      "${i}"\n      ${o>0?`\n            ${function(e){const{selectionModelItems:t,selectedPred:n}=e;return t.selectedWithoutAttributeOf(n)?'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__add-attribute"\n        >add to</button>\n      ':'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__add-attribute"\n        disabled="disabled"\n        title="All the selected items already have this attribute."\n        >add to</button>\n      '}(e)}\n            ${function(e){const{attrDef:t,selectionModelItems:n,selectedPred:i}=e,{valueType:r}=t,o=n.onlySelectedWithJustOneAttributeOf(i);return"string"===r||"numeric"===r?o?'\n        <button\n          type="button"\n          class="textae-editor__type-pallet__edit-object"\n          >edit object of\n        </button>\n        ':'\n        <button\n          type="button"\n          class="textae-editor__type-pallet__edit-object"\n          disabled="disabled"\n          title="Some selected items has zero or multi this attribute."\n          >edit object of\n        </button>\n      ':""}(e)}\n            ${function(e){const{selectionModelItems:t,selectedPred:n}=e;return t.selectedWithAttributeOf(n)?'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__remove-attribute"\n        >remove from</button>\n      ':'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__remove-attribute"\n        disabled="disabled"\n        title="None of the selected items has this attribute."\n        >remove from</button>\n      '}(e)}\n            the ${o} items selected\n            `:""}\n    </div>\n  </div>\n  `}function kr(e,t,n){return e?"":`\n  <td class="textae-editor__type-pallet__table-attribute-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-value"\n      title="Edit this value." data-index="${t}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove-value${n?" textae-editor__type-pallet__table-button--disabled":""}"\n      title="${n?"To activate this button, remove all the annotations of this type.":"Remove this value."}"\n      ${n?' disabled="disabled"':""}\n      data-index="${t}">\n    </button>\n  </td>\n  `}function Cr(e){return e?"":'\n              <th>\n                <span class="textae-editor__type-pallet__add-attribute-value-button" title="Add new value"></span>\n              </th>'}function Sr(e,t,n,i,r,o,s){const{attributes:a}=r;if(!n)return function(e){const{types:t,isLock:n}=e;return`\n  ${xr(e)}\n  <table>\n    <tbody>\n      <tr>\n        <th>id</th>\n        <th>label</th>\n        <th title="Number of annotations.">#</th>\n        <th>\n          ${n?"":'<span class="textae-editor__type-pallet__add-button" title="Add new type"></span>'}\n        </th>\n      </tr>\n      ${t?t.map((({color:e="",id:t,uri:i,defaultType:r,label:o="",useNumber:s})=>`\n      <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n        <td class="textae-editor__type-pallet__label" data-id="${t}">\n          <span title=${t}>\n            ${t}\n          </span>\n          ${i?`<a href="${i}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>`:""}\n          ${r?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n        </td>\n        <td class="textae-editor__type-pallet__short-label">\n          ${di()(o)}\n        </td>\n        <td class="textae-editor__type-pallet__use-number">\n          ${s||0}\n        </td>\n        <td class="textae-editor__type-pallet__table-buttons">\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all${s?"":" textae-editor__type-pallet__table-button--disabled"}"\n            title="Select all the cases of this type."\n            data-id="${t}"\n            data-use-number="${s}">\n          </button>\n          ${n?"":`\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n            title="Edit this type." data-id="${t}"\n            data-color="${e}"\n            data-is-default="${r}">\n          </button>\n          <button \n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove${s?" textae-editor__type-pallet__table-button--disabled":""}"\n            title="${s?"To activate this button, remove all the annotations of this type.":"Remove this type."}"\n            data-id="${t}"\n            data-label="${o}">\n          </button>\n          `}\n        </td>\n      </tr>`)).join("\n"):'\n      <tr class="textae-editor__type-pallet__row">\n        <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Entity definition.</td>\n      </tr>\n      '}\n    </tbody>\n  </table>\n  `}({isLock:s,attributes:a,hasDiff:t,types:e,selectionModelItems:i});const l=a.find((e=>e.pred===n)),c={isLock:s,attributes:a,hasDiff:t,attrDef:l,selectedPred:n,selectionModelItems:i,numberOfItemsUsingSelectedPred:new Set(o.filter((e=>e.pred===n)).map((e=>e.subj)))};switch(l.valueType){case"flag":return function(e){const{label:t,color:n}=e.attrDef;return`\n  ${xr(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${wr(e)}\n      label: "${t||""}"\n      color: "${n||""}"\n    </div>\n  </div>\n  `}(c);case"numeric":return function(e){const{min:t,max:n,step:i,default:r,values:o}=e.attrDef,{isLock:s}=e;return`\n  ${xr(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${wr(e)}\n      min: ${t}\n      max: ${n}\n      step: ${i}\n      default: ${r}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>range</th>\n          <th>label</th>\n          <th>color</th>\n          ${Cr(s)}\n        </tr>\n        ${o.map((({color:e="",range:t,label:n="",indelible:i},r)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            ${t}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${n}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${kr(s,r,i)}\n        </tr>\n      `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c);case"selection":return function(e,t){const{values:n}=e.attrDef,{isLock:i,selectedPred:r}=e;return`\n  ${xr(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${wr(e)}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n          ${Cr(i)}\n        </tr>\n        ${n.map((({color:e="",id:n,default:o,label:s=""},a)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="${n}">\n            ${n}\n            ${o?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${s}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${kr(i,a,t.isSelectionAttributeValueIndelible(r,n))}\n        </tr>\n        `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c,r);case"string":return function(e){const{default:t,values:n}=e.attrDef,{isLock:i}=e;return`\n  ${xr(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${wr(e)}\n      default: ${t}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>pattern</th>\n          <th>label</th>\n          <th>color</th>\n          ${Cr(i)}\n        </tr>\n        ${n.map((({color:e=" ",pattern:t="",label:n="",indelible:r},o)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            ${t}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${n}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${kr(i,o,r)}\n        </tr>`)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c);default:throw"attrDef.valueType is unknown attribute"}}function Tr(e){for(const t of e.querySelectorAll(".textae-editor__type-pallet__attribute"))t.addEventListener("mousedown",(e=>{e.stopPropagation()}))}class Er extends pi{constructor(e,t,n,i,r,o,s){super(e,"entity",s),this._eventEmitter=e.eventEmitter,this._originalData=t,this._annotationData=n,this._entityContainer=i,this._selectionModelItems=r,br(this,this._el,o,r),e.eventEmitter.on("textae-event.type-definition.attribute.create",(e=>{this.showAttribute(e)})).on("textae-event.type-definition.attribute.change",(e=>{this.showAttribute(e)})).on("textae-event.type-definition.attribute.delete",(()=>{this.showAttribute(null)})).on("textae-event.type-definition.attribute.move",(()=>{this.updateDisplay()})),e.eventEmitter.on("textae-event.annotation-data.attribute.add",(()=>this.updateDisplay())).on("textae-event.annotation-data.attribute.remove",(()=>this.updateDisplay())),e.eventEmitter.on("textae-event.selection.entity.change",(()=>this.updateDisplay()))}updateDisplay(){super.updateDisplay(),Tr(this._el)}show(){this._selectedPred=null,super.show(),Tr(this._el)}showAttribute(e){this._selectedPred=e,this.updateDisplay()}selectLeftTab(){this._selectedPred&&(0===this._selectedIndex?this.showAttribute():this.showAttribute(this._attributes[this._selectedIndex-1].pred))}selectRightTab(){if(this._selectedPred){if(this._selectedIndex===this._attributes.length-1)return;this.showAttribute(this._attributes[this._selectedIndex+1].pred)}else this._attributes.length&&this.showAttribute(this._attributes[0].pred)}get _selectedIndex(){return this._attributes.findIndex((e=>e.pred===this._selectedPred))}get _content(){return Sr(this._entityContainer.pallet,(0,cr.diff)(this._originalData.configuration,{...this._originalData.configuration,...this._annotationData.typeDefinition.config}),this._selectedPred,this._selectionModelItems,this._annotationData.typeDefinition.attribute,this._annotationData.attribute.all,this._annotationData.typeDefinition.isLock)}get attrDef(){return this._annotationData.typeDefinition.attribute.get(this._selectedPred)}get _attributes(){return this._annotationData.typeDefinition.attribute.attributes}}class Ar extends rr{constructor(e,t,n,i,r,o,s,a){const l=new Qi(e,t,n,i,r,o),c=new Er(e,s,t,t.typeDefinition.denotation,n.entity,i,"Entity configuration"),u=new lr(i,t,n,c,t.typeDefinition),d=new xi(e,t.typeDefinition.denotation,i,t,n,u);super(e,or,new $i(e,t,n,c,l),d,c,i,(()=>a||t.typeDefinition.autocompletionWs),t.typeDefinition.denotation)}}class $r{constructor(e,t,n,i,r,o){this._editor=e,this._annotationData=t,this._spanConfig=n,this._commander=i,this._buttonController=r,this._selectionModel=o}editFor(e){if(e.isParentOfAnchorNodeTextBox){if(e.isParentOfFocusNodeTextBox)return void this._create(e);if(e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void(e.ancestorBlockSpanOfFocusNode?this._shrink(e):this._create(e));if(e.isParentOfFocusNodeBlockSpan)return void this._shrink(e)}if(e.isParentOfAnchorNodeDenotationSpan||e.isParentOfAnchorNodeStyleSpan){if(e.isParentOfFocusNodeTextBox||e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void(e.ancestorBlockSpanOfAnchorNode?e.doesFitInOneBlockSpan?this._shrink(e):this._expand(e):e.ancestorBlockSpanOfFocusNode?this._shrink(e):this._create(e));if(e.isParentOfFocusNodeBlockSpan)return void this._shrink(e)}if(e.isParentOfAnchorNodeBlockSpan){if(e.isParentOfFocusNodeTextBox||e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void this._expand(e);if(e.isParentOfFocusNodeBlockSpan){const{anchor:t}=new Ni(this._annotationData.span,e),n=this._annotationData.span.get(e.parentOfFocusNode.id);if(t===n.begin||t===n.end)return void this._shrink(e)}}wi()}_create(e){if(Xi(this._annotationData,this._spanConfig,e)){this._selectionModel.removeAll();const{begin:t,end:n}=Ui(this._annotationData,new Hi,e,this._spanConfig);if(this._annotationData.span.isBoundaryCrossingWithOtherSpans(t,n))return;if(this._annotationData.span.doesParentSpanExits(t,n))return;const i=this._commander.factory.createBlockSpanCommand({begin:t,end:n});this._commander.invoke(i)}wi()}_expand(e){const t=e.ancestorBlockSpanOfAnchorNode.id;Yi(this._selectionModel,this._annotationData,new Hi,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(t,e,n))})),wi()}_shrink(e){const t=e.ancestorBlockSpanOfFocusNode.id;Gi(this._editor,this._annotationData,this._selectionModel,this._commander,new Hi,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(t,e,n))})),wi()}}function Dr(e,t){const n=[];return n.push(Nn()(e[0],".textae-editor__text-box","click",(e=>{e.target.classList.contains("textae-editor__text-box")&&t.textBoxClicked(e)}))),n.push(Nn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(Nn()(e[0],".textae-editor__signboard","mousedown",(()=>t.signboardClicked()))),n.push(Nn()(e[0],".textae-editor__signboard__type-values","click",(e=>t.typeValuesClicked(e)))),n.push(Nn()(e[0],".textae-editor__block","mouseup",(e=>{e.target.classList.contains("textae-editor__block")&&t.blockSpanClicked()}))),n.push(Nn()(e[0],".textae-editor__block-hit-area","mouseup",(e=>{e.target.classList.contains("textae-editor__block-hit-area")&&t.blockHitAreaClicked(e)}))),n.push(Nn()(e[0],".textae-editor__style","mouseup",(e=>{e.target.classList.contains("textae-editor__style")&&t.styleSpanClicked(e)}))),n.push(Nn()(e[0],".textae-editor__span","mouseup",(e=>{e.target.classList.contains("textae-editor__span")&&t.denotationSpanClicked(e)}))),n}class Or{constructor(e,t,n,i,r){this._editor=e,this._annotationData=t,this._selectionModel=n,this._spanEditor=i,this._pallet=r}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(e){const t=window.getSelection();"Caret"===t.type&&(this._pallet.hide(),this._selectionModel.removeAll()),"Range"===t.type&&(this._spanEditor.editFor(new Ei),e.stopPropagation())}blockSpanClicked(){const e=window.getSelection();"Caret"===e.type&&(this._pallet.hide(),wi(),this._selectionModel.removeAll()),"Range"===e.type&&this._spanEditor.editFor(new Ei)}blockHitAreaClicked(e){2===e.button&&wi();const t=window.getSelection();if("Caret"===t.type||"None"===t.type){const t=e.target.dataset.id;this._selectSpanAndEntity(e,t)}}styleSpanClicked(e){const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&(this._spanEditor.editFor(new Ei),e.stopPropagation())}denotationSpanClicked(e){const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&(this._spanEditor.editFor(new Ei),e.stopPropagation())}signboardClicked(){this._editor.focus()}typeValuesClicked(e){const t=Hn(e.target).title;if(this._annotationData.entity.get(t).isBlock){e.ctrlKey||e.metaKey?this._selectionModel.entity.toggle(t):this._selectionModel.selectEntity(t);for(const{span:e}of this._selectionModel.entity.all)this._selectionModel.span.add(e.id)}}_selectSpanAndEntity(e,t){const n=this._selectionModel.span.singleId,i=e.shiftKey&&n?this._annotationData.span.rangeBlockSpan(n,t):[];Ai(this._selectionModel,i,e,t);for(const{entities:e}of this._selectionModel.span.all)this._selectionModel.entity.add(e[0].id)}}class Nr extends bi{constructor(e,t,n,i,r,o){super("entity",t,n),this._editor=e,this._selectionModel=r,this._annotationData=i,this._attributeEditor=o}changeInstance(e){this._selectionModel.entity.some&&new yi(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,_i(this._selectionModel.entity.all)).open().then((e=>this._labelChanged(e)))}manipulateAttribute(e,t){t?this._attributeEditor.deleteAt(e):this._attributeEditor.addOrEditAt(e)}}class Mr extends rr{constructor(e,t,n,i,r,o,s,a){const l=new Er(e,s,t,t.typeDefinition.block,n.entity,r,"Entity configuration"),c=new lr(r,t,n,l,t.typeDefinition),u=new Nr(e,t.typeDefinition.block,r,t,n,c),d=new $r(e,t,i,r,o,n);super(e,Dr,new Or(e,t,n,d,l),u,l,r,(()=>a||t.typeDefinition.autocompletionWs),t.typeDefinition.block)}}class Pr extends bi{constructor(e,t,n,i,r){super("relation",t,n),this._editor=e,this._annotationData=i,this._selectionModel=r}changeInstance(e){this._selectionModel.relation.some&&new yi(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,_i(this._selectionModel.relation.all)).open().then((e=>this._labelChanged(e)))}relationClicked(e,t){e.ctrlKey||e.metaKey?this._selectionModel.relation.add(t.id):this._selectionModel.selectRelation(t.id)}manipulateAttribute(){}_getSelectedType(){const e=this._selectionModel.relation.single;return e?e.typeName:""}}function Lr(e,t){const n=[];return n.push(Nn()(e[0],".textae-editor__text-box","click",(()=>t.textBoxClicked()))),n.push(Nn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(Nn()(e[0],".textae-editor__signboard","mousedown",(()=>t.signboardClicked()))),n.push(Nn()(e[0],".textae-editor__signboard__type-values","click",(e=>t.typeValuesClicked(e)))),n}class jr{constructor(e,t,n,i,r){this._editor=e,this._selectionModel=t,this._commander=n,this._typeDefinition=i,this._pallet=r}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(){this._pallet.hide(),this._selectionModel.removeAll()}signboardClicked(){this._editor.focus()}typeValuesClicked(e){!function(e,t,n,i){const r=Hn(i.target).title;if(e.entity.some){const o=e.entity.singleId,s=r;o===s?e.entity.toggle(o):(t.invoke(t.factory.createRelationCommand({subj:o,obj:s,pred:n.defaultType})),function(e,t,n,i){e.ctrlKey||e.metaKey?t.remove(i):e.shiftKey?(t.remove(n),t.add(i)):(t.remove(n),t.remove(i))}(i,e.entity,o,s))}else e.selectEntity(r)}(this._selectionModel,this._commander,this._typeDefinition.relation,e)}}class Ir extends rr{constructor(e,t,n,i,r,o){const s=new Er(e,r,t,t.typeDefinition.relation,n.relation,i,"Relation configuration"),a=new Pr(e,t.typeDefinition.relation,i,t,n);super(e,Lr,new jr(e,n,i,t.typeDefinition,s),a,s,i,(()=>o||t.typeDefinition.autocompletionWs),t.typeDefinition.relation)}}class Rr{constructor(e,t){this._namespace=e,this._denititionContainer=t}relationClicked(e,t,n){const{href:i}=n||t;i&&window.open(i,"_blank")}changeInstance(){}manipulateAttribute(){}}class Fr{constructor(e,t,n,i,r,o,s,a){this._annotationData=t,this._editDenotation=new Ar(e,t,n,r,o,i,s,a),this._editBlock=new Mr(e,t,n,i,r,o,s,a),this._editRelation=new Ir(e,t,n,r,s,a),this._listeners=[],this._stateMachine=new ri(e,t.entityGap,(()=>{this.cancelSelect(),this._unbindAllMouseEventhandler()}),(()=>this._listeners=this._editDenotation.init()),(()=>this._listeners=this._editBlock.init()),(()=>this._listeners=this._editRelation.init())),this._autocompletionWsFromParams=a,this._selectionModel=n,e.eventEmitter.on("textae-event.editor.relation.click",((e,t,n)=>this._getHandler().relationClicked(e,t,n))),this._viewHandler=new Rr(t.namespace,t.typeDefinition.relation)}get isEditDenotation(){return this._stateMachine.currentState===Gn||this._stateMachine.currentState===Vn}toEditDenotationWithoutRelation(){this._stateMachine.setState(Vn)}toEditDenotationWithRelation(){this._stateMachine.setState(Gn)}toViewWithoutRelation(){this._stateMachine.setState(Un)}toViewWithRelation(){this._stateMachine.setState(qn)}pushView(){this._stateMachine.pushView()}pushTerm(){this._stateMachine.pushTerm(this._annotationData)}pushBlock(){this._stateMachine.pushBlock(this._annotationData)}pushRelation(){this._stateMachine.setState(Xn)}toggleSimple(){this._stateMachine.toggleSimple()}changeByShortcut(){this._stateMachine.changeByShortcut()}showPallet(){switch(this._stateMachine.currentState){case Vn:case Gn:this._editDenotation.pallet.show();break;case Kn:case Yn:this._editBlock.pallet.show();break;case Xn:this._editRelation.pallet.show()}}changeLabel(){this._getHandler().changeInstance(this._autocompletionWsFromParams||this._annotationData.typeDefinition.autocompletionWs)}manipulateAttribute(e,t){this._getHandler().manipulateAttribute(e,t)}cancelSelect(){this._editDenotation.pallet.hide(),this._editBlock.pallet.hide(),this._editRelation.pallet.hide(),this._selectionModel.removeAll()}get isEntityAndAttributePalletShown(){return this._editDenotation.pallet.visibly||this._editBlock.pallet.visibly||this._editRelation.pallet.visibly}selectLeftAttributeTab(){switch(this._stateMachine.currentState){case Vn:case Gn:this._editDenotation.pallet.selectLeftTab();break;case Kn:case Yn:this._editBlock.pallet.selectLeftTab();break;case Xn:this._editRelation.pallet.selectLeftTab()}}selectRightAttributeTab(){switch(this._stateMachine.currentState){case Vn:case Gn:this._editDenotation.pallet.selectRightTab();break;case Kn:case Yn:this._editBlock.pallet.selectRightTab();break;case Xn:this._editRelation.pallet.selectRightTab()}}_getHandler(){switch(this._stateMachine.currentState){case Vn:case Gn:return this._editDenotation.handler;case Kn:case Yn:return this._editBlock.handler;case Xn:return this._editRelation.handler;default:return this._viewHandler}}_unbindAllMouseEventhandler(){for(const e of this._listeners)e.destroy();this._listeners=[]}}function zr(e,t,n){e.eventEmitter.on("textae-event.annotation-data.all.change",((e,i)=>{"edit"!==n?function(e,t){Zn(t)?e.toViewWithoutRelation():e.toViewWithRelation()}(t,e):(function(e){e&&At().success("track annotations have been merged to root annotations.")}(i),function(e,t){Zn(t)?e.toEditDenotationWithoutRelation():e.toEditDenotationWithRelation()}(t,e))}))}function Hr(e){return Fn()(e,300)}function Br(e,t){Nn()(e,".line-height","change",Hr((e=>{t.lineHeight=e.target.value,function(){const e=new Event("resize");window.dispatchEvent(e)}()})))}function Wr(e,t,n,i,r){!function(e,t,n){Nn()(e,".type-gap","change",Hr((i=>{t.value=Number(i.target.value),e.querySelector(".line-height").value=n.lineHeight})))}(e,n,r),Br(e,r),function(e,t){Nn()(e,".lock-config","change",Hr((e=>{e.target.checked?t.lockEdit():t.unlockEdit()})))}(e,i),function(e,t){Nn()(e,".reset-hidden-message-boxes","click",(()=>t.eventEmitter.emit("textae-event.message-box.show")))}(e,t)}var Ur="7.2.1";class qr extends o{constructor(e,t,n,i){super("Setting",function(e){const{typeGap:t,typeGapDisabled:n,lineHeight:i,typeDefinitionLocked:r,version:o}=e;return`\n<div class="textae-editor__setting-dialog">\n  <div>\n    <label class="textae-editor__setting-dialog__label">Type Gap</label>\n    <input \n      type="number" \n      class="textae-editor__setting-dialog__type-gap type-gap" \n      step="1" \n      min="0" \n      max="5" \n      value="${t}" ${n?'disabled="disabled"':""}>\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Line Height</label>\n    <input \n      type="number" class="textae-editor__setting-dialog__line-height line-height" \n      step="1" \n      min="50" \n      max="500" \n      value="${i}">px\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Lock Edit Config</label>\n    <input \n      type="checkbox" \n      class="textae-editor__setting-dialog__lock-config lock-config"\n      ${r?'checked="checked"':""}>\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Reset Hidden Message Boxes</label>\n    <input \n      type="button" \n      class="textae-editor__setting-dialog__reset-hidden-message-boxes reset-hidden-message-boxes" \n      value="Reset">\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Version</label>\n    ${o}\n  </div>\n</div>\n`}({typeGapDisabled:!n.show,typeGap:n.value,lineHeight:i.lineHeight,typeDefinitionLocked:t.isLock,version:Ur}),"OK"),Wr(super.el,e,n,t,i),Nn()(super.el,".textae-editor__dialog","keyup",(e=>{13===e.keyCode&&super.close()}))}}class Vr{constructor(e,t){this._editor=e,this._selectionModel=t}left(e){const t=this._searchLeft(".textae-editor__span");if(t)return void(e?this._selectionModel.span.add(t.id):this._selectionModel.selectSpan(t.id));const n=this._searchLeft(".textae-editor__grid .textae-editor__signboard");n&&(e?this._selectionModel.entity.add(n.title):this._selectionModel.selectEntity(n.title))}right(e){const t=this._searchRight(".textae-editor__span");if(t)return void(e?this._selectionModel.span.add(t.id):this._selectionModel.selectSpan(t.id));const n=this._searchRight(".textae-editor__grid .textae-editor__signboard");n&&(e?this._selectionModel.entity.add(n.title):this._selectionModel.selectEntity(n.title))}_searchLeft(e){const t=this._editor[0].querySelectorAll(e),n=[...t].findIndex((e=>e.classList.contains("ui-selected")));if(n>0)return t[n-1]}_searchRight(e){const t=this._editor[0].querySelectorAll(e),n=[...t].reverse().findIndex((e=>e.classList.contains("ui-selected")));if(t.length-n>0)return t[t.length-n]}}class Gr{constructor(e,t){this._editor=e,this._selectionModel=t}up(){if(this._selectionModel.span.single){const e=this._selectionModel.span.single.gridElement.querySelector(".textae-editor__signboard");this._selectionModel.selectEntity(e.title)}}down(){const e=this._editor[0].querySelector(".textae-editor__signboard.ui-selected");if(e){const t=e.closest(".textae-editor__grid").id.substring(1);this._selectionModel.selectSpan(t)}}}class Kr{constructor(e,t,n,i,r,o,s,a,l){this._editor=e,this._commander=t,this._selectionModel=n,this._annotationData=i,this._buttonController=r,this._spanConfig=o,this._clipBoard=s,this._view=a,this._editMode=l,this._horizontal=new Vr(e,n),this._vertical=new Gr(e,n)}copyEntities(){this._clipBoard.copyEntities()}cutEntities(){this._clipBoard.cutEntities()}removeSelectedElements(){const e=this._commander.factory.removeSelectedComand();this._horizontal.right(null),this._commander.invoke(e)}createEntity(){!function(e,t){const n=e.factory.createDefaultTypeEntityToSelectedSpansCommand(t.denotation.defaultType);n.isEmpty||e.invoke(n)}(this._commander,this._annotationData.typeDefinition)}showPallet(){this._editMode.showPallet()}replicate(){!function(e,t,n,i){const r=Ji(t,n);i?e.invoke(e.factory.replicateSpanCommand(i,i.entities.map((e=>e.typeValues)),r)):alert("You can replicate span annotation when there is only span selected.")}(this._commander,this._buttonController,this._spanConfig,this._selectionModel.span.single)}pasteEntities(){this._clipBoard.pasteEntities()}changeLabel(){this._editMode.changeLabel()}manipulateAttribute(e,t){this._editMode.manipulateAttribute(e,t)}cancelSelect(){this._editMode.cancelSelect(),this._editor.focus()}showSettingDialog(){new qr(this._editor,this._annotationData.typeDefinition,this._annotationData.entityGap,this._annotationData.textBox).open()}select(){this._editor[0].classList.add("textae-editor--active")}unselect(){this._editor[0].classList.remove("textae-editor--active"),this._editor.eventEmitter.emit("textae-event.editor.unselect")}selectLeft(e){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectLeftAttributeTab():this._horizontal.left(e)}selectRight(e){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectRightAttributeTab():this._horizontal.right(e)}selectUp(){this._editMode.isEditDenotation&&this._vertical.up()}selectDown(){this._editMode.isEditDenotation&&this._vertical.down()}toggleSimpleMode(){this._editMode.toggleSimple()}toggleButton(e){this._buttonController.toggle(e)}changeMode(){this._editMode.changeByShortcut()}toViewMode(){this._editMode.pushView()}toTermMode(){this._editMode.pushTerm()}toBlockMode(){this._editMode.pushBlock()}toRelationMode(){this._editMode.pushRelation()}}class Yr{constructor(e,t,n,i,r,o,s,a,l,c,u){const d=new Fr(e,t,n,r,i,s,l,c);zr(e,d,u),this.event=new Kr(e,i,n,t,s,r,o,a,d)}}var Xr=n(2025),Jr=n.n(Xr),Qr=n(4631),Zr=n.n(Qr);n(6876);function eo(e){if("string"!=typeof e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0}class to extends o{constructor(e,t,n,i,r,o){super(e,function(e){const{url:t}=e;return`\n<div>\n  <div class="textae-editor__load-dialog__row">\n    <label class="textae-editor__load-dialog__label">\n      URL\n    </label>\n    <input \n      type="text" \n      value="${t}" \n      class="textae-editor__load-dialog__file-name url">\n    <input \n      type="button" \n      class="url" ${t?"":'disabled="disabled"'} \n      value="Open">\n  </div>\n  <div class="textae-editor__load-dialog__row">\n    <label class="textae-editor__load-dialog__label">\n      Local\n    </label>\n    <div class="textae-editor__load-dialog__dz-file-preview">\n      <div class="dz-filename"><span data-dz-name>No file selected</span></div>\n    </div>\n    <input \n      type="button" \n      class="local"\n      disabled="disabled"\n      value="Open">\n  </div>\n  <form class="dropzone textae-editor__load-dialog__dropzone">\n    <div class="dz-message">\n      Drop a file here or click to select\n    </div>\n  </form>\n  <div class="textae-editor__load-dialog__row json">\n    <label class="textae-editor__load-dialog__label">\n      JSON\n    </label>\n    <textarea class="textae-editor__load-dialog__textarea"></textarea>\n    <div class="button-container">\n      <input type="button" value="Edit" class="edit" disabled="disabled">\n      <input type="button" value="Open" class="instant" disabled="disabled">\n    </div>\n  </div>\n</div>`}({url:t}),"Cancel"),Nn()(super.el,'[type="text"].url',"input",(e=>{yr(e.target.nextElementSibling,e.target.value)})),Nn()(super.el,".textae-editor__load-dialog__textarea","input",(e=>{yr(super.el.querySelector('[type="button"].instant'),e.target.value),yr(super.el.querySelector('[type="button"].edit'),e.target.value)}));const s=()=>!o||window.confirm("There is a change that has not been saved. If you procceed now, you will lose it.");Nn()(super.el,'[type="button"].url',"click",(e=>{s()&&n(e.target.previousElementSibling.value),super.close()})),Nn()(super.el,'[type="button"].local',"click",(()=>{s()&&i(this.dropedFile),super.close()})),Nn()(super.el,'[type="button"].instant',"click",(()=>{const e=super.el.querySelector(".textae-editor__load-dialog__textarea").value;s()&&r(e),super.close()})),Nn()(super.el,'[type="button"].edit',"click",(()=>{this._expandDialog();const e=super.el.querySelector(".textae-editor__load-dialog__textarea");eo(e.value)&&(e.value=JSON.stringify(JSON.parse(e.value),null,2)),this._createJSONEditor(e)}))}open(){super.open();const e={url:"nothing",previewsContainer:".textae-editor__load-dialog__dz-file-preview",previewTemplate:super.el.querySelector(".textae-editor__load-dialog__dz-file-preview").innerHTML};new(Jr())("body > div.ui-widget-overlay.ui-front",{...e,clickable:!1}).on("addedfile",(e=>{this._showFilePreview(e)}));new(Jr())(".textae-editor__load-dialog__dropzone",e).on("addedfile",(e=>{this._showFilePreview(e)})),this._preventDropOutsideDropzone()}_showFilePreview(e){super.el.querySelector(".textae-editor__load-dialog__dz-file-preview > div").remove(),this.dropedFile=e,super.el.querySelector(".textae-editor__load-dialog__dz-file-preview > div").setAttribute("title",this.dropedFile.name),yr(super.el.querySelector('[type="button"].local'),!0)}_preventDropOutsideDropzone(){const e=super.el.closest(".textae-editor__dialog");e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(e=>{e.preventDefault(),e.stopPropagation()}))}_expandDialog(){super.el.closest(".textae-editor__dialog").classList.add("textae-editor__dialog--expanded")}_createJSONEditor(e){const t=Zr().fromTextArea(e,{mode:{name:"javascript",json:!0},lineNumbers:!0,value:e.value}),n=super.el.closest(".textae-editor__dialog").clientHeight;t.setSize("90%",.6*n),t.on("change",(t=>{e.value=t.getValue()}))}}function no(e){const t=new Blob([JSON.stringify(e)],{type:"application/json"});return URL.createObjectURL(t)}class io extends o{constructor(e,t,n,i,r){super("Save Annotations",function(e){const{url:t,filename:n}=e;return`\n<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input \n      type="text"\n      value="${t}"\n      class="textae-editor__save-dialog__server-file-name url">\n    <input \n      type="button"\n      class="url" ${t?"":'disabled="disabled"'}\n      value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input\n      type="text"\n      value="${n}"\n      class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label"></label>\n    <a class="viewsource" href="#">Click to see the json source in a new window.</a>\n  </div>\n</div>\n`}({filename:n,url:t}),"Cancel"),function(e,t,n,i,r){Nn()(t,'[type="text"].url',"input",(e=>{yr(e.target.nextElementSibling,e.target.value)})),Nn()(t,'[type="button"].url',"click",(e=>{r(e.target.previousElementSibling.value),i()})),Nn()(t,"a.download","click",(t=>{const r=t.target,o=no(n);r.setAttribute("href",o),r.setAttribute("download",r.previousElementSibling.value),e.eventEmitter.emit("textae-event.save-annotation-dialog.download.click"),i()})),Nn()(t,"a.viewsource","click",(()=>{window.open(no(n),"_blank"),e.eventEmitter.emit("textae-event.save-annotation-dialog.viewsource.click"),i()}))}(e,super.el,i,(()=>super.close()),r)}}const ro=(0,cr.create)({objectHash:(e,t)=>e.id||`$$index:${t}`});function oo(e,t){const n=ro.diff(e,t);return cr.formatters.html.format(n,e)}class so extends o{constructor(e,t,n,i,r,o){super("Save Configurations",function(e){const{url:t,filename:n,diff:i}=e;return`\n<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input \n      type="text" value="${t}" \n      class="textae-editor__save-dialog__server-file-name url">\n    <input \n      type="button" \n      class="url" ${t?"":'disabled="disabled"'} \n      value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input \n      type="text" value="${n}" \n      class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <p class="textae-editor__save-dialog__diff-title">\n      Configuration differences\n      <span class="diff-info diff-info--add">added</span>\n      <span class="diff-info diff-info--remove">removed</span>\n    </p>\n  </div>\n  <div class="textae-editor__save-dialog__diff-viewer">${i}</div>\n</div>\n`}({filename:n,url:t,diff:oo(i,r)||"nothing."}),"Cancel",{width:550}),this._$dialog.on("dialogopen",(()=>cr.formatters.html.hideUnchanged())),function(e,t,n,i,r){Nn()(t,'[type="text"].url',"input",(e=>{yr(e.target.nextElementSibling,e.target.value)})),Nn()(t,'[type="button"].url',"click",(e=>{r(e.target.previousElementSibling.value),i()})),Nn()(t,"a.download","click",(t=>{const r=t.target,o=no(n);r.setAttribute("href",o),r.setAttribute("download",r.previousElementSibling.value),e.eventEmitter.emit("textae-event.save-configuration-dialog.download.click",n),i()}))}(e,super.el,r,(()=>super.close()),o)}}async function ao(e){return new Promise((t=>{const n=new FileReader;n.onload=e=>t(e),n.readAsText(e)}))}var lo=n(6470),co=n.n(lo);async function uo(e,t){const n=(await ao(e)).target.result;if(i=e.name,".txt"!==co().extname(i)){var i;if(eo(n)){const i=JSON.parse(n);if(i.text)return void t.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new O("local file",e.name,i))}t.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",new O("local file",e.name))}else t.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new O("local file",e.name,{text:n}))}class ho{constructor(e,t,n,i,r,o,s){this._editor=e,this._dataAccessObject=t,this._history=n,this._annotationData=i,this._getOriginalAnnotation=r,this._getOriginalConfig=o,this._saveToParameter=s,this._filenameOfLastRead={annotation:"",configuration:""}}importAnnotation(){new to("Load Annotations",this._dataAccessObject.annotationUrl,(e=>this._dataAccessObject.loadAnnotation(e)),(e=>{uo(e,this._editor),this._filenameOfLastRead.annotation=e.name}),(e=>{if(eo(e)){const t=JSON.parse(e);if(t.text)return void this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new O("instant",null,t))}this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",new O("instant",null))}),this._history.hasAnythingToSaveAnnotation).open()}uploadAnnotation(){new io(this._editor,this._saveToParameter||this._dataAccessObject.annotationUrl,this._filenameOfLastRead.annotation,this._editedAnnotation,(e=>this._dataAccessObject.saveAnnotation(e,this._editedAnnotation))).open()}saveAnnotation(){this._dataAccessObject.saveAnnotation(this._saveToParameter||this._dataAccessObject.annotationUrl,this._editedAnnotation)}importConfiguration(){new to("Load Configurations",this._dataAccessObject.configurationUrl,(e=>this._dataAccessObject.loadConfigulation(e)),(e=>{!function(e,t){ao(e).then((({target:n})=>{eo(n.result)?t.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new O("local file",e.name,JSON.parse(n.result))):t.eventEmitter.emit("textae-event.data-access-object.configuration.format.error",new O("local file",e.name))}))}(e,this._editor),this._filenameOfLastRead.configuration=e.name}),(e=>{eo(e)?this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new O("instant",null,JSON.parse(e))):this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.format.error",new O("instant",null))}),this._history.hasAnythingToSaveConfiguration).open()}uploadConfiguration(){const e={...this._getOriginalConfig(),...this._annotationData.typeDefinition.config};new so(this._editor,this._dataAccessObject.configurationUrl,this._filenameOfLastRead.configuration,this._getOriginalConfig(),e,(t=>this._dataAccessObject.saveConfiguration(t,e))).open()}get _editedAnnotation(){return function(e,t,n){return Object.assign(e,t.toJson(),{config:n})}(this._getOriginalAnnotation(),this._annotationData,this._annotationData.typeDefinition.config)}}function fo(e,t,...n){e.has(t)&&e.get(t)(...n)}function po(e,t,n){return new Map([["1",e=>t.event.manipulateAttribute(1,e)],["2",e=>t.event.manipulateAttribute(2,e)],["3",e=>t.event.manipulateAttribute(3,e)],["4",e=>t.event.manipulateAttribute(4,e)],["5",e=>t.event.manipulateAttribute(5,e)],["6",e=>t.event.manipulateAttribute(6,e)],["7",e=>t.event.manipulateAttribute(7,e)],["8",e=>t.event.manipulateAttribute(8,e)],["9",e=>t.event.manipulateAttribute(9,e)],["a",()=>e.redo()],["b",()=>t.event.toggleButton("boundary-detection")],["c",()=>t.event.copyEntities()],["d",()=>t.event.removeSelectedElements()],["e",()=>t.event.createEntity()],["f",()=>t.event.changeMode()],["i",()=>n.importAnnotation()],["m",()=>t.event.changeMode()],["q",()=>t.event.showPallet()],["r",()=>t.event.replicate()],["u",()=>n.uploadAnnotation()],["v",()=>t.event.pasteEntities()],["w",()=>t.event.changeLabel()],["x",()=>t.event.cutEntities()],["y",()=>e.redo()],["z",()=>e.undo()],["ArrowDown",()=>t.event.selectDown()],["ArrowLeft",e=>t.event.selectLeft(e)],["ArrowRight",e=>t.event.selectRight(e)],["ArrowUp",()=>t.event.selectUp()],["Backspace",()=>t.event.removeSelectedElements()],["Delete",()=>t.event.removeSelectedElements()],["Escape",()=>t.event.cancelSelect()]])}function mo(e,t,n,i,r){const o=new Map([["view",()=>t.event.toViewMode()],["term",()=>t.event.toTermMode()],["block",()=>t.event.toBlockMode()],["relation",()=>t.event.toRelationMode()],["simple",()=>t.event.toggleSimpleMode()],["read",()=>n.importAnnotation()],["write",()=>n.uploadAnnotation()],["undo",()=>e.undo()],["redo",()=>e.redo()],["replicate",()=>t.event.replicate()],["entity",()=>t.event.createEntity()],["change-label",()=>t.event.changeLabel()],["pallet",()=>t.event.showPallet()],["delete",()=>t.event.removeSelectedElements()],["copy",()=>t.event.copyEntities()],["cut",()=>t.event.cutEntities()],["paste",()=>t.event.pasteEntities()],["setting",()=>t.event.showSettingDialog()],["line-height",()=>i.updateLineHeight()]]);for(const e of r.pushButtonNames)o.has(e)||o.set(e,(()=>t.event.toggleButton(e)));return o}class go{constructor(e,t,n,i,r){this._keyApiMap=new po(e,t,n),this._iconApiMap=new mo(e,t,n,r,i),this._view=r,this._buttonController=i,this._presenter=t,this._isSelected=!1}handleKeyInput(e){if(this._isSelected){const t=e.shiftKey&&48<=e.keyCode&&e.keyCode<=57?String.fromCharCode(e.keyCode):e.key;fo(this._keyApiMap,t,e.shiftKey)}}handleButtonClick(e){fo(this._iconApiMap,e,{})}redraw(){this._view.updateDisplay()}updateButtons(){this._buttonController.propagate()}select(){this._presenter.event.select(),this._isSelected=!0}unselect(){this._presenter.event.unselect(),this._isSelected=!1}}var vo='\n<div class="textae-editor__footer">\n  <div class="textae-editor__footer__message"></div>\n</div>\n';class yo{constructor(e){this._container=e[0]}set status(e){const t=e.displayName;var n;""!==t&&((n=this._container,n.querySelector(".textae-editor__footer__message")||(n.insertAdjacentHTML("beforeend",vo.replace(/[\n\r]+/g,"")),n.querySelector(".textae-editor__footer__message"))).innerHTML=re(t)?`Source: <a class="textae-editor__footer__message__link" href="${t}">${decodeURI(t)}</a>`:`Source: ${t}`)}}function _o(e,t,n,i,r){!function(e,t){!0===e.autosave?t.push("write-auto"):t.release("write-auto"),!0===e.autolineheight?t.push("line-height-auto"):t.release("line-height-auto"),!0===e.boundarydetection?t.push("boundary-detection"):t.release("boundary-detection")}(e,t),n.set(e),i.reset(r,e)}function bo(e){if(!0===e)return"flag";if("number"==typeof e)return"numeric";if("string"==typeof e)return"string";throw`${JSON.stringify(e)} is an unexpected value for an Attribute.`}function xo(e){const t=e.reduce(((e,t)=>e.has(t)?e.set(t,e.get(t)+1):e.set(t,1)),new Map),n=Math.max(...t.values());for(const[e,i]of t.entries())if(i===n)return e}function wo(e){const t=Math.max(...e.map((e=>{const[t,n]=String(e).split(".");return n?n.length:0})));return Number(Array.from(Array(t)).reduce(((e,t)=>.1*e),1).toFixed(t))}class ko{constructor({pred:e,obj:t}){this._pred=e,this._objects=[t]}push(e){this._objects.push(e)}get definition(){switch(bo(this._objects[0])){case"flag":return this._prototype;case"numeric":return this._numericAttribute;case"string":return this._stringAttribute;default:throw new Error(`prototype: ${JSON.stringify(this._prototype)}`)}}get mostFrequentObject(){return xo(this._objects)}get _prototype(){return{pred:this._pred,"value type":bo(this._objects[0])}}get _numericAttribute(){return{min:Math.min(...this._objects),max:Math.max(...this._objects),step:wo(this._objects),default:xo(this._objects),...this._prototype}}get _stringAttribute(){return{default:xo(this._objects),...this._prototype}}}function Co(e){return e.reduce(((e,t)=>(e.has(t.pred)?e.get(t.pred).push(t.obj):e.set(t.pred,new ko(t)),e)),new Map)}function So(e,t){return function(e,t){for(const n of t){const t=e.findIndex((e=>e.pred===n.pred));-1!==t?e[t]=Object.assign(n,e[t]):e.push(n)}return e}(e,function(e){return[...Co(e).values()].map((e=>e.definition))}(t))}function To(e){return e?JSON.parse(JSON.stringify(e)):{}}class Eo{constructor(e=[],t=[]){this._annotations=t,this._config=e}get configuration(){return function(e,t){e=To(e);const n=Co(t);for(const t of function(e){return e.filter((e=>"selection"===e["value type"]))}(e))if(t.values&&0!==t.values.length)if(t.values.find((e=>!0===e.default)));else if(n.has(t.pred)){const e=n.get(t.pred);t.values.find((t=>t.id===e.mostFrequentObject)).default=!0}else t.values[0].default=!0;else t.values=[{id:"default",default:!0}];return e}(So(this._config,this._annotations),this._annotations)}}function Ao(e,t){return console.assert(e),(t=To(t))["attribute types"]=new Eo(t["attribute types"],e.attributes).configuration,t}var $o=n(1581),Do=n.n($o),Oo=n(5477),No=n.n(Oo),Mo=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"JSON schema for texta configuration files","definitions":{"characters":{"type":"array","items":{"type":"string","minLength":1,"maxLength":1}},"color":{"pattern":"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$","type":"string"},"default":{"type":"boolean"},"denote":{"type":"object","required":["id"],"properties":{"id":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"},"default":{"$ref":"#/definitions/default"}}},"types":{"type":"array","items":{"$ref":"#/definitions/denote"}},"autocompletion_ws":{"type":"string","format":"uri-reference"}},"type":"object","properties":{"delimiter characters":{"$ref":"#/definitions/characters"},"non-edge characters":{"$ref":"#/definitions/characters"},"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"autosave":{"type":"boolean"},"autolineheight":{"type":"boolean"},"boundarydetection":{"type":"boolean"},"entity types":{"$ref":"#/definitions/types"},"relation types":{"$ref":"#/definitions/types"},"attribute types":{"type":"array","items":{"type":"object","required":["pred","value type"],"properties":{"pred":{"type":"string"},"value type":{"enum":["flag","selection","string","numeric"]}},"allOf":[{"if":{"properties":{"value type":{"const":"flag"}}},"then":{"properties":{"color":{"$ref":"#/definitions/color"},"label":{"type":"string"}}}},{"if":{"properties":{"value type":{"const":"selection"}}},"then":{"required":["values"],"properties":{"values":{"type":"array","items":{"$ref":"#/definitions/denote"}}}}},{"if":{"properties":{"value type":{"const":"string"}}},"then":{"required":["default"],"properties":{"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"default":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["pattern"],"properties":{"pattern":{"type":"string","format":"regex"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}},{"if":{"properties":{"value type":{"const":"numeric"}}},"then":{"required":["default","min","max","step"],"properties":{"default":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"values":{"type":"array","items":{"type":"object","required":["range"],"properties":{"range":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}}]}}}}');const Po=new(Do())({verbose:!0});No()(Po,["uri-reference","regex"]);const Lo=Po.compile(Mo);function jo(e){return console.assert(e,"config is required."),Lo(e)?null:(console.warn(Lo.errors),function(e){for(const t of e){if("required"===t.keyword)return`Invalid configuration: The attribute type whose predicate is '${t.data.pred}' misses a mandatory property, '${t.params.missingProperty}'.`;if(t.dataPath.includes("color"))return xe()`Invalid configuration: '${t.data}' is invalid color format.`}}(Lo.errors))}function Io(e,t){const n=function(e,t){if(console.assert(t,"If you don't have a configuration, generate a configuration from the annotation."),e.attributes){const n=t["attribute types"],i=e.attributes.filter((e=>n.some((t=>t.pred===e.pred&&"selection"===t["value type"])))).filter((e=>!n.some((t=>t.pred===e.pred&&t.values.some((t=>t.id===e.obj))))));if(i.length)return console.warn("selection attribute values without definition",i),`selection attribute value definition for "${i.map((e=>e.obj)).join(", ")}" in configuration is missing. `}}(e,t);if(!n)return t;At().error(n)}function Ro(e,t){const n=Ao(e,t),i=jo(n);if(!i)return Io(e,n);At().error(i)}function Fo(e){(function(e){if(e.denotations)for(const t of e.denotations){if(t.span.begin!==parseInt(t.span.begin))return!0;if(t.span.end!==parseInt(t.span.end))return!0}})(e)&&At().warning("In the annotation file, some of the begin and end offsets of denotations were not integer values.\n      TextAE converted them to integer values.\n      However, to avoid a chance of unexpected rendering, please fix them.",15)}function zo(e,t,n,i,r,o,s){const a=i.get("annotation");if(a)if(a.has("inlineAnnotation")){const n=new O("inline",null,JSON.parse(a.get("inlineAnnotation")));if(!n.data.config&&i.get("config"))r.loadConfigulation(i.get("config"),n);else{if(Fo(n.data),n.data.config&&"object"!=typeof n.data.config)return void At().error("configuration in anntotaion file is invalid.");const i=Ro(n.data,n.data.config);i&&(_o(i,o,e,t,n.data),s.annotation=n)}}else a.has("url")?r.loadAnnotation(a.get("url")):i.get("config")?r.loadConfigulation(i.get("config")):function(e,t,n,i){_o(e.defaultConfiguration,t,n,i,e.defaultAnnotation)}(s,o,e,t)}function Ho(e){if(e){const t=function(e){const t=new Map,n=e.split("?")[1];if(n){const e=n.split("&");for(let n=0;n<e.length;n++){const i=e[n].split("="),r=decodeURIComponent(i[0]),o=decodeURIComponent(i[1]);t.set(r,decodeURIComponent(o))}}return t}(e);if(t.has("config_lock"))return t.get("config_lock")}return null}class Bo{constructor(e,t){this._dataAccessObject=e,this._statusBar=t,this._map=new Map}get defaultAnnotation(){return{text:"Currently, the document is empty. Use the `import` button or press the key `i` to open a document with annotation."}}get defaultConfiguration(){return Ao(this.defaultAnnotation)}get annotation(){return this._map.has("annotation")?this._map.get("annotation").data:this.defaultAnnotation}set annotation(e){this._map.set("annotation",e),e.data.config&&(this.configuration=new O(null,null,e.data.config)),this._dataAccessObject.annotationUrl=e,e.type&&(this._statusBar.status=e)}get configuration(){return this._map.has("configuration")?this._map.get("configuration").data:{}}set configuration(e){this._map.set("configuration",e),this._dataAccessObject.configurationUrl=e}}class Wo{constructor(e,t){this._editor=e,this.name=t,this.state=!1}value(e){return void 0===e?this.state:(this.state=e,this.propagate(),null)}toggle(){this.state=!this.state,this.propagate()}propagate(){this._editor.eventEmitter.emit("textae-event.control.button.push",{buttonName:this.name,state:this.state})}}class Uo{constructor(e){this._buttonMap=p.pushButtons.reduce(((t,n)=>(t.set(n,new Wo(e,n)),t)),new Map),e.eventEmitter.on("textae-event.edit-mode.transition",(e=>this._setMode(e))),this._buttonMap.get("boundary-detection").value(!0)}propagate(){for(const e of this._buttonMap.values())e.propagate()}getButton(e){return this._buttonMap.get(e)}get names(){return this._buttonMap.keys()}_setMode(e){switch(e){case Un:this._updateModeButtons(!0,!1,!1,!1,!0);break;case qn:this._updateModeButtons(!0,!1,!1,!1,!1);break;case Vn:this._updateModeButtons(!1,!0,!1,!1,!0);break;case Gn:this._updateModeButtons(!1,!0,!1,!1,!1);break;case Kn:this._updateModeButtons(!1,!1,!0,!1,!0);break;case Yn:this._updateModeButtons(!1,!1,!0,!1,!1);break;case Xn:this._updateModeButtons(!1,!1,!1,!0,!1);break;default:throw`unknown edit mode!${e}`}}_updateModeButtons(e,t,n,i,r){this._buttonMap.get("view").value(e),this._buttonMap.get("term").value(t),this._buttonMap.get("block").value(n),this._buttonMap.get("relation").value(i),this._buttonMap.get("simple").value(r)}}class qo{constructor(e,t,n){this._states={},this._editor=e,this._selectionModel=t,this._clipBoard=n,this.enable("view",!0),this.enable("term",!0),this.enable("block",!0),this.enable("relation",!0),this.enable("simple",!0),this.enable("setting",!0),function(e,t){e.eventEmitter.on("textae-event.history.change",(e=>{t.enable("undo",e.hasAnythingToUndo),t.enable("redo",e.hasAnythingToRedo)})).on("textae-event.selection.span.change",(()=>t.updateBySpan())).on("textae-event.selection.relation.change",(()=>t.updateByRelation())).on("textae-event.selection.entity.change",(()=>t.updateByEntity())).on("textae-event.edit-mode.transition",(e=>t.setForMode(e))).on("textae-event.clip-board.change",(()=>t.updateByClipboard)).on("textae-event.annotation-auto-saver.enable",(e=>t.enable("write-auto",e)))}(e,this)}propagate(){this._editor.eventEmitter.emit("textae-event.control.buttons.change",this._states)}enable(e,t){this._states[e]=t,this.propagate()}updateBySpan(){this._updateButtons(p.spanButtons),this.propagate()}updateByEntity(){this._updateButtons(p.entityButtons),this.propagate()}updateByRelation(){this._updateButtons(p.relationButtons),this.propagate()}_updateButtons(e){for(const{name:t,predicate:n}of e){const e=n(this._selectionModel,this._clipBoard);this.enable(t,e)}}updateByClipboard(){this.enable("paste",this._enablePaste)}get _enablePaste(){return p.spanButtons.find((({name:e})=>"copy"===e)).predicate(this._selectionModel,this._clipBoard)}setForMode(e){switch(e){case Un:case qn:this._updateButtonsForMode(!0,!1,!1,!1,!1,!1);break;case Vn:case Gn:this._updateButtonsForMode(!0,!0,!0,!0,!0,!0);break;case Kn:case Yn:this._updateButtonsForMode(!0,!1,!0,!0,!0,!0);break;case Xn:this._updateButtonsForMode(!1,!1,!1,!0,!0,!0);break;default:throw`unknown edit mode!${e}`}this.propagate()}_updateButtonsForMode(e,t,n,i,r,o){this._states.simple=e,this._states["replicate-auto"]=t,this._states["boundary-detection"]=n,this._states["line-height"]=i,this._states["line-height-auto"]=r,this._states.pallet=o}}class Vo{constructor(e,t,n){this._enableState=new qo(e,t,n),this._pushButtons=new Uo(e)}propagate(){this._enableState.propagate(),this._pushButtons.propagate()}get pushButtonNames(){return this._pushButtons.names}valueOf(e){return this._getPushButton(e).value()}push(e){this._getPushButton(e).value(!0)}release(e){this._getPushButton(e).value(!1)}toggle(e){return this._getPushButton(e).toggle()}_getPushButton(e){return this._pushButtons.getButton(e)}}function Go(e){return new Set(function(e){return e.span.all.map((e=>e.entities)).flat()}(e).concat(e.entity.all))}class Ko{constructor(e,t,n){this._editor=e,this._commander=t,this._selectionModel=n,this._items=[],e.eventEmitter.on("textae-event.annotation-data.entity.remove",(e=>{this.hasCuttingItem&&this._updateItems(new Set(this._items.filter((t=>t!=e))))})).on("textae-event.edit-mode.transition",(()=>this._updateItems()))}get hasCopyingItem(){return this._items[0]instanceof me}get hasCuttingItem(){return this._items[0]instanceof $e}copyEntities(){const e=[...Go(this._selectionModel)].reduce(((e,t)=>e.add(t.typeValues)),new Set);this._updateItems(e)}cutEntities(){const e=Go(this._selectionModel);this._cuttingItems.length&&this._cuttingItems.every((t=>e.has(t)))&&[...e].every((e=>this._cuttingItems.includes(e)))?this._updateItems():this._updateItems(e)}pasteEntities(){if(this.hasCopyingItem){const e=this._commander.factory.pasteTypesToSelectedSpansCommand(this._items);this._commander.invoke(e)}else if(this._itemsWillBeCutAndPaste.length&&this._selectionModel.span.single){const e=this._commander.factory.moveEntitiesToSelectedSpansCommand(this._itemsWillBeCutAndPaste);return this._commander.invoke(e),void this._updateItems()}}_updateItems(e=new Set){const t=this._cuttingItems.filter((t=>!e.has(t)));this._items=[...e],this._editor.eventEmitter.emit("textae-event.clip-board.change",this._cuttingItems,t)}get _itemsWillBeCutAndPaste(){return this._cuttingItems.filter((e=>e.span.id!==(this._selectionModel.span.single&&this._selectionModel.span.single.id)))}get _cuttingItems(){return this.hasCuttingItem?this._items:[]}}class Yo{constructor(e,t,n,i,r){this._buttonController=t;const o=Fn()((()=>n.saveAnnotation()),5e3);r.bind((e=>{e&&t.valueOf("write-auto")&&o()})),e.eventEmitter.on("textae-event.data-access-object.annotation.load.success",(()=>this._disabled())).on("textae-event.data-access-object.save.error",(()=>this._disabled())).on("textae-event.data-access-object.annotation.url.set",(t=>e.eventEmitter.emit("textae-event.annotation-auto-saver.enable",Boolean(i||t.id)))).on("textae-event.control.button.push",(({buttonName:e,state:t})=>{"write-auto"===e&&!0===t&&r.hasChange&&n.saveAnnotation()}))}_disabled(){this._buttonController.valueOf("write-auto")&&this._buttonController.toggle("write-auto")}}function Xo(e,t,n,i,r,o,s,a,l){!function(e,t){e.eventEmitter.on("textae-event.type-definition.reset",(()=>t.resetConfiguration()))}(e,t),function(e){e.eventEmitter.on("textae-event.history.change",(e=>{window.onbeforeunload=e.hasAnythingToSaveAnnotation?()=>!0:null}))}(e),function(e,t,n,i,r,o,s,a){e.eventEmitter.on("textae-event.data-access-object.annotation.load.success",(e=>{if(!e.data.config&&i.get("config"))s.loadConfigulation(i.get("config"),e);else{if(Fo(e.data),e.data.config&&"object"!=typeof e.data.config)return void At().error("configuration in anntotaion file is invalid.");const i=Ro(e.data,e.data.config);i&&(_o(i,a,t,n,e.data),o.annotation=e)}})).on("textae-event.data-access-object.annotation.load.error",(e=>At().error(`Could not load the file from the location you specified.: ${e}`))).on("textae-event.data-access-object.annotation.format.error",(({displayName:e})=>At().error(`${e} is not a annotation file or its format is invalid.`))).on("textae-event.data-access-object.configuration.load.success",((e,i=null)=>{if("object"!=typeof e.data)return void At().error(`${e.displayName} is not a configuration file or its format is invalid.`);i&&Fo(i.data);const r=i&&i.data||Object.assign(o.annotation,n.toJson()),s=Ro(r,e.data);s&&(_o(s,a,t,n,r),i&&(o.annotation=i),o.configuration=e)})).on("textae-event.data-access-object.configuration.load.error",(e=>At().error(`Could not load the file from the location you specified.: ${e}`))).on("textae-event.data-access-object.configuration.format.error",(({displayName:e})=>At().error(`${e} is not a configuration file or its format is invalid.!`))).on("textae-event.data-access-object.configuration.save",(e=>{o.configuration=new O(null,null,e)}))}(e,i,n,r,0,s,a,l),function(e){const t=e[0];t.addEventListener("mousedown",(e=>{e.shiftKey&&e.preventDefault()})),Nn()(t,".textae-editor__signboard","mousedown",(e=>e.preventDefault()))}(e),function(e){e[0].addEventListener("keyup",(t=>{e.eventEmitter.emit("textae-event.editor.key.input"),e.api.handleKeyInput(t)}))}(e)}function Jo(e,t,n,i,r,o,s){const a=new Dt,l=new Dn(e,i,r,n),c=new Ko(e,l,r),u=new Vo(e,r,c),d=new Bn(e,i),h=function(e,t){return"on"===t?new yo(e):{status(){}}}(e,s.get("status_bar")),f=new Bo(t,h),p=new Yr(e,i,r,l,a,c,u,d,f,s.get("autocompletion_ws"),s.get("mode"));!function(e){new MutationObserver((t=>{t.forEach((t=>{t.removedNodes.length&&1===t.removedNodes[0].nodeType&&(t.removedNodes[0].classList.contains("textae-editor__span")||t.removedNodes[0].classList.contains("textae-editor__type"))&&"BODY"===document.activeElement.tagName&&e.focus()}))})).observe(e[0].querySelector(".textae-editor__body"),{childList:!0,subtree:!0})}(e),"visible"===s.get("control")&&e[0].classList.add("textae-editor--control-visible"),"hidden"===s.get("control")&&e[0].classList.add("textae-editor--control-hidden");const m=Ho(s.get("source"));null!==m&&s.set("config_lock",m),s.has("config_lock")&&"true"===s.get("config_lock")?i.typeDefinition.lockEdit():i.typeDefinition.unlockEdit(),zo(a,i,0,s,t,u,f);const g=new ho(e,t,n,i,(()=>f.annotation),(()=>f.configuration),s.get("annotation").get("save_to"));new Yo(e,u,g,s.get("annotation").get("save_to"),o),e.api=new go(l,p,g,u,d),Xo(e,n,i,a,s,0,f,t,u),e.eventEmitter.on("textae-event.pallet.read-button.click",(()=>g.importConfiguration())).on("textae-event.pallet.write-button.click",(()=>g.uploadConfiguration())),e[0].tabIndex=-1,At().set("notifier","position","top-right")}var Qo=n(7187);class Zo extends o{constructor(e){super("The following erroneous annotations ignored",e.map((({name:e,wrongRangeDenotations:t,outOfTextDenotations:n,wrongRangeBlocks:i,outOfTextBlocks:r,duplicatedRangeBlocks:o,wrongRangeTypesettings:s,outOfTextTypesettings:a,duplicatedIDs:l,boundaryCrossingSpans:c,referencedEntitiesDoNotExist:u,duplicatedAttributes:d},h)=>`\n    ${1===h?'\n      <div class="textae-editor__valiondate-dialog__content">\n        <h1>Track annatations will be merged to the root anntations.</h1>\n      </div>':""}\n    <div class="textae-editor__valiondate-dialog__content">\n      <h2>${e}</h2>\n      ${function(e){return e.length?`\n        <table>\n          <caption>Wrong range denotations.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n          `)).join("\n")}\n          </tbody>\n        </table>`:""}(t)}\n      ${function(e){return e.length?`\n        <table>\n          <caption>Out of text denotations.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n            `)).join("\n")}\n          </tbody>\n        </table>`:""}(n)}\n      ${function(e){return e.length?`\n        <table>\n          <caption>Wrong range blocks.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n            `)).join("\n")}\n          </tbody>\n        </table>\n  `:""}(i)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Out of text blokcs.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,obj:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(r)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated range blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,obj:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(o)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Wrong range typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,style:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(s)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Out of text typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,style:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(a)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated IDs in Denotations and Blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,span:n,obj:i})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td class="alert">${n.begin}</td>\n            <td class="alert">${n.end}</td>\n            <td>${i}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(l)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Denotations or Blocks or Typesettings with boundary-cross.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style/obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,span:n,style:i,obj:r})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td class="alert">${n.begin}</td>\n            <td class="alert">${n.end}</td>\n            <td>${i||r}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(c)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Referenced entities do not exist.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,alertSubj:n,subj:i,pred:r,alertObj:o,obj:s})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td${n?' class="alert"':""}>${i}</td>\n            <td>${r}</td>\n            <td${o?' class="alert"':""}>${s}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(u)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated attributes.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,subj:t,pred:n,obj:i})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t}</td>\n            <td>${n}</td>\n            <td class="alert">${i}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(d)}\n    </div>\n    `)).join("\n"),null,{width:900})}}function es(e){const t=e.getAttribute("save_to");return t?decodeURIComponent(t):""}function ts(e,t){const n=new Map,i=e.innerText;e.innerHTML="",i&&n.set("inlineAnnotation",i);const r=function(e){return e?decodeURIComponent(e):""}(t);r&&n.set("url",r);return es(e)&&n.set("save_to",es(e)),n}function ns(e,t){e.has(t)&&e.set(t,decodeURIComponent(e.get(t)))}function is(e,t,n){t.getAttribute(n)&&e.set(n,t.getAttribute(n))}function rs(){this.eventEmitter=new Qo.EventEmitter;const e=function(e){const t=new Map;return is(t,e,"mode"),is(t,e,"control"),is(t,e,"status_bar"),is(t,e,"config"),is(t,e,"config_lock"),is(t,e,"autocompletion_ws"),ns(t,"config"),ns(t,"autocompletion_ws"),t.set("source",function(e){return e.getAttribute("source")||e.getAttribute("target")}(e)),t.set("annotation",ts(e,t.get("source"))),t}(this[0]),t=new bt(this),n=new kt(this.eventEmitter,t),i=new St(this.eventEmitter),r=new N(this),o=new Tt(this);return o.bind((e=>this.eventEmitter.emit("textae-event.control.writeButton.transit",e))),function(e,t){e.eventEmitter.on("textae-event.data-access-object.annotation.save",(()=>{t.annotatioSaved(),At().success("annotation saved")})).on("textae-event.data-access-object.configuration.save",(()=>{t.configurationSaved(),At().success("configuration saved")})).on("textae-event.data-access-object.save.error",(()=>{At().error("could not save")}))}(this,i),function(e,t){e.eventEmitter.on("textae-event.annotation-data.all.change",((e,n,i,r)=>{t.resetAllHistories(),i&&new Zo(r).open()}))}(this,i),this.api={start:s=>Jo(s,r,i,t,n,o,e)},this}function os(e,t,n){!function(e,t){e[0].insertBefore(t.el,e[0].childNodes[0]),e.eventEmitter.on("textae-event.control.button.push",(e=>t.updateButtonPushState(e.buttonName,e.state))).on("textae-event.control.buttons.change",(e=>t.updateAllButtonEnableState(e))).on("textae-event.control.writeButton.transit",(e=>t.transitWriteButtonImage(e)))}(e,t),function(e,t){e[0].appendChild(t.el),e.eventEmitter.on("textae-event.control.button.push",(e=>t.updateButtonPushState(e.buttonName,e.state))).on("textae-event.control.buttons.change",(e=>t.updateAllButtonEnableState(e))).on("textae-event.editor.key.input",(()=>t.hide())),window.addEventListener("click",(e=>{3!==e.which&&t.hide()})),window.addEventListener("contextmenu",(n=>{t.hide();const i=n.target.closest(".textae-editor");if(i===e[0]){if(i.classList.contains("textae-editor__mode--view-with-relation")||i.classList.contains("textae-editor__mode--view-without-relation"))return;n.preventDefault(),t.show(n.pageY-e[0].offsetTop,n.pageX)}}))}(e,n),e.eventEmitter.on("textae-event.control.button.click",(t=>e.api.handleButtonClick(t))),e.api.updateButtons()}const ss=new class{constructor(){var e;this._editors=new l,this._veil=new h,e=this._editors,window.addEventListener("resize",u()((()=>e.redraw()),500)),window.addEventListener("load",(()=>{!function(e){document.body.addEventListener("focus",(t=>{const n=e.findByHTMLelement(t.target.closest(".textae-editor"));!function(e,t){t&&(e.selected&&t[0]!==e.selected[0]&&e.unselect(e.selected),e.selected=t)}(e,n)}),!0),document.body.addEventListener("click",(t=>{null===t.target.closest(".textae-editor__dialog")&&null===t.target.closest(".ui-autocomplete")&&null===t.target.closest(".ui-widget-overlay")&&null===t.target.closest(".textae-editor__type-pallet__content")&&(e.findByHTMLelement(t.target.closest(".textae-editor"))||e.selected&&e.unselect(e.selected))}))}(this._editors)}))}registerEditor(e){this._editors.push(e),this._veil.setObserver(e)}};document.addEventListener("DOMContentLoaded",(function(){for(const e of document.querySelectorAll(".textae-editor")){const n=t()(e);rs.call(n),ss.registerEditor(n),n.api.start(n),os(n,new b(n),new w(n))}}))}()}();