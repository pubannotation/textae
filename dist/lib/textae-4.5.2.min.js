/*! textae 4.5.2 13-10-2016 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c,d){"use strict";function e(b,e){function f(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function g(a,b){var c;return a&&"."===a.charAt(0)&&b&&(c=b.split("/"),c=c.slice(0,c.length-1),c=c.concat(a.split("/")),f(c),a=c.join("/")),a}function h(a){return function(b){return g(b,a)}}function i(a){function b(b){o[a]=b}return b.fromText=function(a,b){throw new Error("amdefine does not implement load.fromText")},b}function j(a,c,f){var g,h,i,j;if(a)h=o[a]={},i={id:a,uri:d,exports:h},g=l(e,h,i,a);else{if(p)throw new Error("amdefine with no module ID cannot be called more than once per file.");p=!0,h=b.exports,i=b,g=l(e,h,i,b.id)}c&&(c=c.map(function(a){return g(a)})),j="function"==typeof f?f.apply(i.exports,c):f,void 0!==j&&(i.exports=j,a&&(o[a]=i.exports))}function k(a,b,c){Array.isArray(a)?(c=b,b=a,a=void 0):"string"!=typeof a&&(c=a,a=b=void 0),b&&!Array.isArray(b)&&(c=b,b=void 0),b||(b=["require","exports","module"]),a?n[a]=[a,b,c]:j(a,b,c)}var l,m,n={},o={},p=!1,q=a("path");return l=function(a,b,d,e){function f(f,g){return"string"==typeof f?m(a,b,d,f,e):(f=f.map(function(c){return m(a,b,d,c,e)}),void(g&&c.nextTick(function(){g.apply(null,f)})))}return f.toUrl=function(a){return 0===a.indexOf(".")?g(a,q.dirname(d.filename)):a},f},e=e||function(){return b.require.apply(b,arguments)},m=function(a,b,c,d,e){var f,k,p=d.indexOf("!"),q=d;if(-1===p){if(d=g(d,e),"require"===d)return l(a,b,c,e);if("exports"===d)return b;if("module"===d)return c;if(o.hasOwnProperty(d))return o[d];if(n[d])return j.apply(null,n[d]),o[d];if(a)return a(q);throw new Error("No module with ID: "+d)}return f=d.substring(0,p),d=d.substring(p+1,d.length),k=m(a,b,c,f,e),d=k.normalize?k.normalize(d,h(e)):g(d,e),o[d]?o[d]:(k.load(d,l(a,b,c,e),i(d),{}),o[d])},k.require=function(a){return o[a]?o[a]:n[a]?(j.apply(null,n[a]),o[a]):void 0},k.amd={},k}b.exports=e}).call(this,a("_process"),"/node_modules/amdefine/amdefine.js")},{_process:144,path:143}],2:[function(a,b,c){b.exports={"default":a("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":25}],3:[function(a,b,c){b.exports={"default":a("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":26}],4:[function(a,b,c){b.exports={"default":a("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":27}],5:[function(a,b,c){b.exports={"default":a("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":28}],6:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":29}],7:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":30}],8:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":31}],9:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":32}],10:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":33}],11:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":34}],12:[function(a,b,c){b.exports={"default":a("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":35}],13:[function(a,b,c){b.exports={"default":a("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":36}],14:[function(a,b,c){"use strict";c["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},c.__esModule=!0},{}],15:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/define-property")["default"];c["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),d(a,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c.__esModule=!0},{"babel-runtime/core-js/object/define-property":8}],16:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/get-own-property-descriptor")["default"];c["default"]=function(a,b,c){for(var e=!0;e;){var f=a,g=b,h=c;e=!1,null===f&&(f=Function.prototype);var i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;if(void 0===j)return;return j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return;a=k,b=g,c=h,e=!0,i=k=void 0}},c.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":9}],17:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/create")["default"],e=a("babel-runtime/core-js/object/set-prototype-of")["default"];c["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=d(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e?e(a,b):a.__proto__=b)},c.__esModule=!0},{"babel-runtime/core-js/object/create":7,"babel-runtime/core-js/object/set-prototype-of":11}],18:[function(a,b,c){"use strict";c["default"]=function(a){return a&&a.__esModule?a:{"default":a}},c.__esModule=!0},{}],19:[function(a,b,c){"use strict";c["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},c.__esModule=!0},{}],20:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/get-iterator")["default"],e=a("babel-runtime/core-js/is-iterable")["default"];c["default"]=function(){function a(a,b){var c=[],e=!0,f=!1,g=void 0;try{for(var h,i=d(a);!(e=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(j){f=!0,g=j}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return c}return function(b,c){if(Array.isArray(b))return b;if(e(Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c.__esModule=!0},{"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/is-iterable":4}],21:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/array/from")["default"];c["default"]=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return d(a)},c.__esModule=!0},{"babel-runtime/core-js/array/from":2}],22:[function(a,b,c){},{}],23:[function(a,b,c){b.exports=function(a){return a.charAt(0).toUpperCase()+a.substring(1)},b.exports.words=function(a){return a.replace(/(^|[^a-zA-Z\u00C0-\u017F'])([a-zA-Z\u00C0-\u017F])/g,function(a){return a.toUpperCase()})}},{}],24:[function(a,b,c){var d=a("matches-selector");b.exports=function(a,b,c){for(var e=c?a:a.parentNode;e&&e!==document;){if(d(e,b))return e;e=e.parentNode}}},{"matches-selector":140}],25:[function(a,b,c){a("../../modules/es6.string.iterator"),a("../../modules/es6.array.from"),b.exports=a("../../modules/$.core").Array.from},{"../../modules/$.core":45,"../../modules/es6.array.from":93,"../../modules/es6.string.iterator":103}],26:[function(a,b,c){a("../modules/web.dom.iterable"),a("../modules/es6.string.iterator"),b.exports=a("../modules/core.get-iterator")},{"../modules/core.get-iterator":91,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":106}],27:[function(a,b,c){a("../modules/web.dom.iterable"),a("../modules/es6.string.iterator"),b.exports=a("../modules/core.is-iterable")},{"../modules/core.is-iterable":92,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":106}],28:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.map"),a("../modules/es7.map.to-json"),b.exports=a("../modules/$.core").Map},{"../modules/$.core":45,"../modules/es6.map":95,"../modules/es6.object.to-string":100,"../modules/es6.string.iterator":103,"../modules/es7.map.to-json":104,"../modules/web.dom.iterable":106}],29:[function(a,b,c){a("../../modules/es6.object.assign"),b.exports=a("../../modules/$.core").Object.assign},{"../../modules/$.core":45,"../../modules/es6.object.assign":96}],30:[function(a,b,c){var d=a("../../modules/$");b.exports=function(a,b){return d.create(a,b)}},{"../../modules/$":67}],31:[function(a,b,c){var d=a("../../modules/$");b.exports=function(a,b,c){return d.setDesc(a,b,c)}},{"../../modules/$":67}],32:[function(a,b,c){var d=a("../../modules/$");a("../../modules/es6.object.get-own-property-descriptor"),b.exports=function(a,b){return d.getDesc(a,b)}},{"../../modules/$":67,"../../modules/es6.object.get-own-property-descriptor":97}],33:[function(a,b,c){a("../../modules/es6.object.keys"),b.exports=a("../../modules/$.core").Object.keys},{"../../modules/$.core":45,"../../modules/es6.object.keys":98}],34:[function(a,b,c){a("../../modules/es6.object.set-prototype-of"),b.exports=a("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":45,"../../modules/es6.object.set-prototype-of":99}],35:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.promise"),b.exports=a("../modules/$.core").Promise},{"../modules/$.core":45,"../modules/es6.object.to-string":100,"../modules/es6.promise":101,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":106}],36:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.set"),a("../modules/es7.set.to-json"),b.exports=a("../modules/$.core").Set},{"../modules/$.core":45,"../modules/es6.object.to-string":100,"../modules/es6.set":102,"../modules/es6.string.iterator":103,"../modules/es7.set.to-json":105,"../modules/web.dom.iterable":106}],37:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],38:[function(a,b,c){b.exports=function(){}},{}],39:[function(a,b,c){var d=a("./$.is-object");b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{"./$.is-object":60}],40:[function(a,b,c){var d=a("./$.cof"),e=a("./$.wks")("toStringTag"),f="Arguments"==d(function(){return arguments}());b.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}},{"./$.cof":41,"./$.wks":89}],41:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],42:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.hide"),f=a("./$.redefine-all"),g=a("./$.ctx"),h=a("./$.strict-new"),i=a("./$.defined"),j=a("./$.for-of"),k=a("./$.iter-define"),l=a("./$.iter-step"),m=a("./$.uid")("id"),n=a("./$.has"),o=a("./$.is-object"),p=a("./$.set-species"),q=a("./$.descriptors"),r=Object.isExtensible||o,s=q?"_s":"size",t=0,u=function(a,b){if(!o(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!n(a,m)){if(!r(a))return"F";if(!b)return"E";e(a,m,++t)}return"O"+a[m]},v=function(a,b){var c,d=u(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};b.exports={getConstructor:function(a,b,c,e){var k=a(function(a,f){h(a,k,b),a._i=d.create(null),a._f=void 0,a._l=void 0,a[s]=0,void 0!=f&&j(f,c,a[e],a)});return f(k.prototype,{clear:function(){for(var a=this,b=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a._f=a._l=void 0,a[s]=0},"delete":function(a){var b=this,c=v(b,a);if(c){var d=c.n,e=c.p;delete b._i[c.i],c.r=!0,e&&(e.n=d),d&&(d.p=e),b._f==c&&(b._f=d),b._l==c&&(b._l=e),b[s]--}return!!c},forEach:function(a){for(var b,c=g(a,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!v(this,a)}}),q&&d.setDesc(k.prototype,"size",{get:function(){return i(this[s])}}),k},def:function(a,b,c){var d,e,f=v(a,b);return f?f.v=c:(a._l=f={i:e=u(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[s]++,"F"!==e&&(a._i[e]=f)),a},getEntry:v,setStrong:function(a,b,c){k(a,b,function(a,b){this._t=a,this._k=b,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?l(0,c.k):"values"==b?l(0,c.v):l(0,[c.k,c.v]):(a._t=void 0,l(1))},c?"entries":"values",!c,!0),p(b)}}},{"./$":67,"./$.ctx":46,"./$.defined":47,"./$.descriptors":48,"./$.for-of":52,"./$.has":54,"./$.hide":55,"./$.is-object":60,"./$.iter-define":63,"./$.iter-step":65,"./$.redefine-all":73,"./$.set-species":77,"./$.strict-new":81,"./$.uid":88}],43:[function(a,b,c){var d=a("./$.for-of"),e=a("./$.classof");b.exports=function(a){return function(){if(e(this)!=a)throw TypeError(a+"#toJSON isn't generic");var b=[];return d(this,!1,b.push,b),b}}},{"./$.classof":40,"./$.for-of":52}],44:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.global"),f=a("./$.export"),g=a("./$.fails"),h=a("./$.hide"),i=a("./$.redefine-all"),j=a("./$.for-of"),k=a("./$.strict-new"),l=a("./$.is-object"),m=a("./$.set-to-string-tag"),n=a("./$.descriptors");b.exports=function(a,b,c,o,p,q){var r=e[a],s=r,t=p?"set":"add",u=s&&s.prototype,v={};return n&&"function"==typeof s&&(q||u.forEach&&!g(function(){(new s).entries().next()}))?(s=b(function(b,c){k(b,s,a),b._c=new r,void 0!=c&&j(c,p,b[t],b)}),d.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(a){var b="add"==a||"set"==a;a in u&&(!q||"clear"!=a)&&h(s.prototype,a,function(c,d){if(!b&&q&&!l(c))return"get"==a?void 0:!1;var e=this._c[a](0===c?0:c,d);return b?this:e})}),"size"in u&&d.setDesc(s.prototype,"size",{get:function(){return this._c.size}})):(s=o.getConstructor(b,a,p,t),i(s.prototype,c)),m(s,a),v[a]=s,f(f.G+f.W+f.F,v),q||o.setStrong(s,a,p),s}},{"./$":67,"./$.descriptors":48,"./$.export":50,"./$.fails":51,"./$.for-of":52,"./$.global":53,"./$.hide":55,"./$.is-object":60,"./$.redefine-all":73,"./$.set-to-string-tag":78,"./$.strict-new":81}],45:[function(a,b,c){var d=b.exports={version:"1.2.6"};"number"==typeof __e&&(__e=d)},{}],46:[function(a,b,c){var d=a("./$.a-function");b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./$.a-function":37}],47:[function(a,b,c){b.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},{}],48:[function(a,b,c){b.exports=!a("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":51}],49:[function(a,b,c){var d=a("./$.is-object"),e=a("./$.global").document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{"./$.global":53,"./$.is-object":60}],50:[function(a,b,c){var d=a("./$.global"),e=a("./$.core"),f=a("./$.ctx"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,b.exports=h},{"./$.core":45,"./$.ctx":46,"./$.global":53}],51:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},{}],52:[function(a,b,c){var d=a("./$.ctx"),e=a("./$.iter-call"),f=a("./$.is-array-iter"),g=a("./$.an-object"),h=a("./$.to-length"),i=a("./core.get-iterator-method");b.exports=function(a,b,c,j){var k,l,m,n=i(a),o=d(c,j,b?2:1),p=0;if("function"!=typeof n)throw TypeError(a+" is not iterable!");if(f(n))for(k=h(a.length);k>p;p++)b?o(g(l=a[p])[0],l[1]):o(a[p]);else for(m=n.call(a);!(l=m.next()).done;)e(m,o,l.value,b)}},{"./$.an-object":39,"./$.ctx":46,"./$.is-array-iter":59,"./$.iter-call":61,"./$.to-length":86,"./core.get-iterator-method":90}],53:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],54:[function(a,b,c){var d={}.hasOwnProperty;b.exports=function(a,b){return d.call(a,b)}},{}],55:[function(a,b,c){var d=a("./$"),e=a("./$.property-desc");b.exports=a("./$.descriptors")?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{"./$":67,"./$.descriptors":48,"./$.property-desc":72}],56:[function(a,b,c){b.exports=a("./$.global").document&&document.documentElement},{"./$.global":53}],57:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],58:[function(a,b,c){var d=a("./$.cof");b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},{"./$.cof":41}],59:[function(a,b,c){var d=a("./$.iterators"),e=a("./$.wks")("iterator"),f=Array.prototype;b.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},{"./$.iterators":66,"./$.wks":89}],60:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],61:[function(a,b,c){var d=a("./$.an-object");b.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(f){var g=a["return"];throw void 0!==g&&d(g.call(a)),f}}},{"./$.an-object":39}],62:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.property-desc"),f=a("./$.set-to-string-tag"),g={};a("./$.hide")(g,a("./$.wks")("iterator"),function(){return this}),b.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")}},{"./$":67,"./$.hide":55,"./$.property-desc":72,"./$.set-to-string-tag":78,"./$.wks":89}],63:[function(a,b,c){"use strict";var d=a("./$.library"),e=a("./$.export"),f=a("./$.redefine"),g=a("./$.hide"),h=a("./$.has"),i=a("./$.iterators"),j=a("./$.iter-create"),k=a("./$.set-to-string-tag"),l=a("./$").getProto,m=a("./$.wks")("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};b.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w}},{"./$":67,"./$.export":50,"./$.has":54,"./$.hide":55,"./$.iter-create":62,"./$.iterators":66,"./$.library":68,"./$.redefine":74,"./$.set-to-string-tag":78,"./$.wks":89}],64:[function(a,b,c){var d=a("./$.wks")("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(g){}b.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){c=!0},f[d]=function(){return g},a(f)}catch(h){}return c}},{"./$.wks":89}],65:[function(a,b,c){b.exports=function(a,b){return{value:b,done:!!a}}},{}],66:[function(a,b,c){b.exports={}},{}],67:[function(a,b,c){var d=Object;b.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach}},{}],68:[function(a,b,c){b.exports=!0},{}],69:[function(a,b,c){var d,e,f,g=a("./$.global"),h=a("./$.task").set,i=g.MutationObserver||g.WebKitMutationObserver,j=g.process,k=g.Promise,l="process"==a("./$.cof")(j),m=function(){var a,b,c;for(l&&(a=j.domain)&&(j.domain=null,a.exit());d;)b=d.domain,c=d.fn,b&&b.enter(),c(),b&&b.exit(),d=d.next;e=void 0,a&&a.enter()};if(l)f=function(){j.nextTick(m)};else if(i){var n=1,o=document.createTextNode("");new i(m).observe(o,{characterData:!0}),f=function(){o.data=n=-n}}else f=k&&k.resolve?function(){k.resolve().then(m)}:function(){h.call(g,m)};b.exports=function(a){var b={fn:a,next:void 0,domain:l&&j.domain};e&&(e.next=b),d||(d=b,f()),e=b}},{"./$.cof":41,"./$.global":53,"./$.task":83}],70:[function(a,b,c){var d=a("./$"),e=a("./$.to-object"),f=a("./$.iobject");b.exports=a("./$.fails")(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign},{"./$":67,"./$.fails":51,"./$.iobject":58,"./$.to-object":87}],71:[function(a,b,c){var d=a("./$.export"),e=a("./$.core"),f=a("./$.fails");b.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},{"./$.core":45,"./$.export":50,"./$.fails":51}],72:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],73:[function(a,b,c){var d=a("./$.redefine");b.exports=function(a,b){for(var c in b)d(a,c,b[c]);return a}},{"./$.redefine":74}],74:[function(a,b,c){b.exports=a("./$.hide")},{"./$.hide":55}],75:[function(a,b,c){b.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b}},{}],76:[function(a,b,c){var d=a("./$").getDesc,e=a("./$.is-object"),f=a("./$.an-object"),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};b.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,e){try{e=a("./$.ctx")(Function.call,d(Object.prototype,"__proto__").set,2),e(b,[]),c=!(b instanceof Array)}catch(f){c=!0}return function(a,b){return g(a,b),c?a.__proto__=b:e(a,b),a}}({},!1):void 0),check:g}},{"./$":67,"./$.an-object":39,"./$.ctx":46,"./$.is-object":60}],77:[function(a,b,c){"use strict";var d=a("./$.core"),e=a("./$"),f=a("./$.descriptors"),g=a("./$.wks")("species");b.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.setDesc(b,g,{configurable:!0,get:function(){return this}})}},{"./$":67,"./$.core":45,"./$.descriptors":48,"./$.wks":89}],78:[function(a,b,c){var d=a("./$").setDesc,e=a("./$.has"),f=a("./$.wks")("toStringTag");b.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},{"./$":67,"./$.has":54,"./$.wks":89}],79:[function(a,b,c){var d=a("./$.global"),e="__core-js_shared__",f=d[e]||(d[e]={});b.exports=function(a){return f[a]||(f[a]={})}},{"./$.global":53}],80:[function(a,b,c){var d=a("./$.an-object"),e=a("./$.a-function"),f=a("./$.wks")("species");b.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},{"./$.a-function":37,"./$.an-object":39,"./$.wks":89}],81:[function(a,b,c){b.exports=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a}},{}],82:[function(a,b,c){var d=a("./$.to-integer"),e=a("./$.defined");b.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}},{"./$.defined":47,"./$.to-integer":84}],83:[function(a,b,c){var d,e,f,g=a("./$.ctx"),h=a("./$.invoke"),i=a("./$.html"),j=a("./$.dom-create"),k=a("./$.global"),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a("./$.cof")(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{"./$.cof":41,"./$.ctx":46,"./$.dom-create":49,"./$.global":53,"./$.html":56,"./$.invoke":57}],84:[function(a,b,c){var d=Math.ceil,e=Math.floor;b.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}},{}],85:[function(a,b,c){var d=a("./$.iobject"),e=a("./$.defined");b.exports=function(a){return d(e(a))}},{"./$.defined":47,"./$.iobject":58}],86:[function(a,b,c){var d=a("./$.to-integer"),e=Math.min;b.exports=function(a){return a>0?e(d(a),9007199254740991):0}},{"./$.to-integer":84}],87:[function(a,b,c){var d=a("./$.defined");b.exports=function(a){return Object(d(a))}},{"./$.defined":47}],88:[function(a,b,c){var d=0,e=Math.random();b.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}},{}],89:[function(a,b,c){var d=a("./$.shared")("wks"),e=a("./$.uid"),f=a("./$.global").Symbol;b.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))}},{"./$.global":53,"./$.shared":79,"./$.uid":88}],90:[function(a,b,c){var d=a("./$.classof"),e=a("./$.wks")("iterator"),f=a("./$.iterators");b.exports=a("./$.core").getIteratorMethod=function(a){return void 0!=a?a[e]||a["@@iterator"]||f[d(a)]:void 0}},{"./$.classof":40,"./$.core":45,"./$.iterators":66,"./$.wks":89}],91:[function(a,b,c){var d=a("./$.an-object"),e=a("./core.get-iterator-method");b.exports=a("./$.core").getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}},{"./$.an-object":39,"./$.core":45,"./core.get-iterator-method":90}],92:[function(a,b,c){var d=a("./$.classof"),e=a("./$.wks")("iterator"),f=a("./$.iterators");b.exports=a("./$.core").isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}},{"./$.classof":40,"./$.core":45,"./$.iterators":66,"./$.wks":89}],93:[function(a,b,c){"use strict";var d=a("./$.ctx"),e=a("./$.export"),f=a("./$.to-object"),g=a("./$.iter-call"),h=a("./$.is-array-iter"),i=a("./$.to-length"),j=a("./core.get-iterator-method");e(e.S+e.F*!a("./$.iter-detect")(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,k,l=f(a),m="function"==typeof this?this:Array,n=arguments,o=n.length,p=o>1?n[1]:void 0,q=void 0!==p,r=0,s=j(l);if(q&&(p=d(p,o>2?n[2]:void 0,2)),void 0==s||m==Array&&h(s))for(b=i(l.length),c=new m(b);b>r;r++)c[r]=q?p(l[r],r):l[r];else for(k=s.call(l),c=new m;!(e=k.next()).done;r++)c[r]=q?g(k,p,[e.value,r],!0):e.value;return c.length=r,c}})},{"./$.ctx":46,"./$.export":50,"./$.is-array-iter":59,"./$.iter-call":61,"./$.iter-detect":64,"./$.to-length":86,"./$.to-object":87,"./core.get-iterator-method":90}],94:[function(a,b,c){"use strict";var d=a("./$.add-to-unscopables"),e=a("./$.iter-step"),f=a("./$.iterators"),g=a("./$.to-iobject");b.exports=a("./$.iter-define")(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},{"./$.add-to-unscopables":38,"./$.iter-define":63,"./$.iter-step":65,"./$.iterators":66,"./$.to-iobject":85}],95:[function(a,b,c){"use strict";var d=a("./$.collection-strong");a("./$.collection")("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(this,a);return b&&b.v},set:function(a,b){return d.def(this,0===a?0:a,b)}},d,!0)},{"./$.collection":44,"./$.collection-strong":42}],96:[function(a,b,c){var d=a("./$.export");d(d.S+d.F,"Object",{assign:a("./$.object-assign")})},{"./$.export":50,"./$.object-assign":70}],97:[function(a,b,c){var d=a("./$.to-iobject");a("./$.object-sap")("getOwnPropertyDescriptor",function(a){return function(b,c){return a(d(b),c)}})},{"./$.object-sap":71,"./$.to-iobject":85}],98:[function(a,b,c){var d=a("./$.to-object");a("./$.object-sap")("keys",function(a){return function(b){return a(d(b))}})},{"./$.object-sap":71,"./$.to-object":87}],99:[function(a,b,c){var d=a("./$.export");d(d.S,"Object",{setPrototypeOf:a("./$.set-proto").set})},{"./$.export":50,"./$.set-proto":76}],100:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],101:[function(a,b,c){"use strict";var d,e=a("./$"),f=a("./$.library"),g=a("./$.global"),h=a("./$.ctx"),i=a("./$.classof"),j=a("./$.export"),k=a("./$.is-object"),l=a("./$.an-object"),m=a("./$.a-function"),n=a("./$.strict-new"),o=a("./$.for-of"),p=a("./$.set-proto").set,q=a("./$.same-value"),r=a("./$.wks")("species"),s=a("./$.species-constructor"),t=a("./$.microtask"),u="Promise",v=g.process,w="process"==i(v),x=g[u],y=function(a){var b=new x(function(){});return a&&(b.constructor=Object),x.resolve(b)===b},z=function(){function b(a){var c=new x(a);return p(c,b.prototype),c}var c=!1;try{if(c=x&&x.resolve&&y(),p(b,x),b.prototype=e.create(x.prototype,{constructor:{value:b}}),b.resolve(5).then(function(){})instanceof b||(c=!1),c&&a("./$.descriptors")){var d=!1;x.resolve(e.setDesc({},"then",{get:function(){d=!0}})),c=d}}catch(f){c=!1}return c}(),A=function(a,b){return f&&a===x&&b===d?!0:q(a,b)},B=function(a){var b=l(a)[r];return void 0!=b?b:a},C=function(a){var b;return k(a)&&"function"==typeof(b=a.then)?b:!1},D=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=m(b),this.reject=m(c)},E=function(a){try{a()}catch(b){return{error:b}}},F=function(a,b){if(!a.n){a.n=!0;var c=a.c;t(function(){for(var d=a.v,e=1==a.s,f=0,h=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject;try{g?(e||(a.h=!0),c=g===!0?d:g(d),c===b.promise?i(TypeError("Promise-chain cycle")):(f=C(c))?f.call(c,h,i):h(c)):i(d)}catch(j){i(j)}};c.length>f;)h(c[f++]);c.length=0,a.n=!1,b&&setTimeout(function(){var b,c,e=a.p;G(e)&&(w?v.emit("unhandledRejection",d,e):(b=g.onunhandledrejection)?b({promise:e,reason:d}):(c=g.console)&&c.error&&c.error("Unhandled promise rejection",d)),a.a=void 0},1)})}},G=function(a){var b,c=a._d,d=c.a||c.c,e=0;if(c.h)return!1;for(;d.length>e;)if(b=d[e++],b.fail||!G(b.promise))return!1;return!0},H=function(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,b.a=b.c.slice(),F(b,!0))},I=function(a){var b,c=this;if(!c.d){c.d=!0,c=c.r||c;try{if(c.p===a)throw TypeError("Promise can't be resolved itself");(b=C(a))?t(function(){var d={r:c,d:!1};try{b.call(a,h(I,d,1),h(H,d,1))}catch(e){H.call(d,e)}}):(c.v=a,c.s=1,F(c,!1))}catch(d){H.call({r:c,d:!1},d)}}};z||(x=function(a){m(a);var b=this._d={p:n(this,x,u),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{a(h(I,b,1),h(H,b,1))}catch(c){H.call(b,c)}},a("./$.redefine-all")(x.prototype,{then:function(a,b){var c=new D(s(this,x)),d=c.promise,e=this._d;return c.ok="function"==typeof a?a:!0,c.fail="function"==typeof b&&b,e.c.push(c),e.a&&e.a.push(c),e.s&&F(e,!1),d},"catch":function(a){
return this.then(void 0,a)}})),j(j.G+j.W+j.F*!z,{Promise:x}),a("./$.set-to-string-tag")(x,u),a("./$.set-species")(u),d=a("./$.core")[u],j(j.S+j.F*!z,u,{reject:function(a){var b=new D(this),c=b.reject;return c(a),b.promise}}),j(j.S+j.F*(!z||y(!0)),u,{resolve:function(a){if(a instanceof x&&A(a.constructor,this))return a;var b=new D(this),c=b.resolve;return c(a),b.promise}}),j(j.S+j.F*!(z&&a("./$.iter-detect")(function(a){x.all(a)["catch"](function(){})})),u,{all:function(a){var b=B(this),c=new D(b),d=c.resolve,f=c.reject,g=[],h=E(function(){o(a,!1,g.push,g);var c=g.length,h=Array(c);c?e.each.call(g,function(a,e){var g=!1;b.resolve(a).then(function(a){g||(g=!0,h[e]=a,--c||d(h))},f)}):d(h)});return h&&f(h.error),c.promise},race:function(a){var b=B(this),c=new D(b),d=c.reject,e=E(function(){o(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})},{"./$":67,"./$.a-function":37,"./$.an-object":39,"./$.classof":40,"./$.core":45,"./$.ctx":46,"./$.descriptors":48,"./$.export":50,"./$.for-of":52,"./$.global":53,"./$.is-object":60,"./$.iter-detect":64,"./$.library":68,"./$.microtask":69,"./$.redefine-all":73,"./$.same-value":75,"./$.set-proto":76,"./$.set-species":77,"./$.set-to-string-tag":78,"./$.species-constructor":80,"./$.strict-new":81,"./$.wks":89}],102:[function(a,b,c){"use strict";var d=a("./$.collection-strong");a("./$.collection")("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(this,a=0===a?0:a,a)}},d)},{"./$.collection":44,"./$.collection-strong":42}],103:[function(a,b,c){"use strict";var d=a("./$.string-at")(!0);a("./$.iter-define")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},{"./$.iter-define":63,"./$.string-at":82}],104:[function(a,b,c){var d=a("./$.export");d(d.P,"Map",{toJSON:a("./$.collection-to-json")("Map")})},{"./$.collection-to-json":43,"./$.export":50}],105:[function(a,b,c){var d=a("./$.export");d(d.P,"Set",{toJSON:a("./$.collection-to-json")("Set")})},{"./$.collection-to-json":43,"./$.export":50}],106:[function(a,b,c){a("./es6.array.iterator");var d=a("./$.iterators");d.NodeList=d.HTMLCollection=d.Array},{"./$.iterators":66,"./es6.array.iterator":94}],107:[function(a,b,c){function d(a,b,c,d,f){var g=e.apply(this,arguments);return a.addEventListener(c,g,f),{destroy:function(){a.removeEventListener(c,g,f)}}}function e(a,b,c,d){return function(c){c.delegateTarget=f(c.target,b,!0),c.delegateTarget&&d.call(a,c)}}var f=a("closest");b.exports=d},{closest:24}],108:[function(a,b,c){function d(a){e.call(this),a=a||{},this.states=a.states||["default"],this.currentState=a.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var b=this;this.on("transition",function(a){b.events.forEach(function(c){c.from===a.from&&c.to===a.to&&b.emit(c.event)})})}var e=a("events").EventEmitter;d.prototype=Object.create(e.prototype),d.prototype.setState=function(a){var b=this.currentState;if(!this._validate(b,a))return!1;this.history.push({state:b,args:this.currentArgs});var c=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=c,this.currentState=a,this._emit(b,a,c),!0},d.prototype.back=function(){if(!this.history.length)return!1;var a=this.history[this.history.length-1],b=this.currentState,c=a.state,d=a.args;return this._validate(b,c)?(this.history.pop(),this.currentState=c,this.currentArgs=d,this._emit(b,c,d,!0),!0):!1},d.prototype.lock=function(){this.locked=!0},d.prototype.unlock=function(){this.locked=!1},d.prototype.config=function(a,b){b.to=b.to||{},b.from=b.from||{},this.configs[a]=b},d.prototype.register=function(a,b){this.events.push({event:a,from:b.from,to:b.to})},d.prototype._emit=function(a,b,c,d){var e={from:a,to:b,args:c,back:d};this.emit("transition",e),this.emit("leave:"+a,e),this.emit("enter:"+b,e)},d.prototype._validate=function(a,b){if(!(this.locked||a===b||this.states.indexOf(b)<0)){var c=this.configs[a];if(c)if(c.to.only){if(c.to.only.indexOf(b)<0)return}else if(c.to.exclude&&c.to.exclude.indexOf(b)>-1)return;var d=this.configs[b];if(d)if(d.from.only){if(d.from.only.indexOf(a)<0)return}else if(d.from.exclude&&d.from.exclude.indexOf(a)>-1)return;return!0}},b.exports=d},{events:109}],109:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],110:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}c.__esModule=!0;var f=a("./handlebars.runtime"),g=d(f),h=a("./handlebars/compiler/ast"),i=d(h),j=a("./handlebars/compiler/base"),k=a("./handlebars/compiler/compiler"),l=a("./handlebars/compiler/javascript-compiler"),m=d(l),n=a("./handlebars/compiler/visitor"),o=d(n),p=a("./handlebars/no-conflict"),q=d(p),r=g["default"].create,s=e();s.create=e,q["default"](s),s.Visitor=o["default"],s["default"]=s,c["default"]=s,b.exports=c["default"]},{"./handlebars.runtime":111,"./handlebars/compiler/ast":113,"./handlebars/compiler/base":114,"./handlebars/compiler/compiler":116,"./handlebars/compiler/javascript-compiler":118,"./handlebars/compiler/visitor":121,"./handlebars/no-conflict":135}],111:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}c.__esModule=!0;var g=a("./handlebars/base"),h=e(g),i=a("./handlebars/safe-string"),j=d(i),k=a("./handlebars/exception"),l=d(k),m=a("./handlebars/utils"),n=e(m),o=a("./handlebars/runtime"),p=e(o),q=a("./handlebars/no-conflict"),r=d(q),s=f();s.create=f,r["default"](s),s["default"]=s,c["default"]=s,b.exports=c["default"]},{"./handlebars/base":112,"./handlebars/exception":125,"./handlebars/no-conflict":135,"./handlebars/runtime":136,"./handlebars/safe-string":137,"./handlebars/utils":138}],112:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}c.__esModule=!0,c.HandlebarsEnvironment=e;var f=a("./utils"),g=a("./exception"),h=d(g),i=a("./helpers"),j=a("./decorators"),k=a("./logger"),l=d(k),m="4.0.5";c.VERSION=m;var n=7;c.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};c.REVISION_CHANGES=o;var p="[object Object]";e.prototype={constructor:e,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;c.log=q,c.createFrame=f.createFrame,c.logger=l["default"]},{"./decorators":123,"./exception":125,"./helpers":126,"./logger":134,"./utils":138}],113:[function(a,b,c){"use strict";c.__esModule=!0;var d={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!d.helpers.scopedId(a)&&!a.depth}}};c["default"]=d,b.exports=c["default"]},{}],114:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}c.__esModule=!0,c.parse=f;var g=a("./parser"),h=e(g),i=a("./whitespace-control"),j=e(i),k=a("./helpers"),l=d(k),m=a("../utils");c.parser=h["default"];var n={};m.extend(n,l)},{"../utils":138,"./helpers":117,"./parser":119,"./whitespace-control":122}],115:[function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;g>e;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}c.__esModule=!0;var f=a("../utils"),g=void 0;try{if("function"!=typeof define||!define.amd){var h=a("source-map");g=h.SourceNode}}catch(i){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;c>b;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;e>c;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},c["default"]=e,b.exports=c["default"]},{"../utils":138,"source-map":149}],116:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){}function f(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function g(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function h(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!h(a[c],b[c]))return!1;return!0}}function i(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}c.__esModule=!0,c.Compiler=e,c.precompile=f,c.compile=g;var j=a("../exception"),k=d(j),l=a("../utils"),m=a("./ast"),n=d(m),o=[].slice;e.prototype={compiler:e,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!h(d.args,e.args))return!1}b=this.children.length;for(var c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;c>d;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){i(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){i(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");d>c;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;c>b;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},{"../exception":125,"../utils":138,"./ast":113}],117:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function f(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function g(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function h(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function i(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function j(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;i>h;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function k(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function l(a,b,c,d){e(a,c),d=this.locInfo(d);var f={type:"Program",body:b,strip:{},loc:d};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:d}}function m(a,b,c,d,f,g){d&&d.path&&e(a,d);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=d.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:d&&d.strip,loc:this.locInfo(g)}}function n(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function o(a,b,c,d){return e(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(d)}}c.__esModule=!0,c.SourceLocation=f,c.id=g,c.stripFlags=h,c.stripComment=i,c.preparePath=j,c.prepareMustache=k,c.prepareRawBlock=l,c.prepareBlock=m,c.prepareProgram=n,c.preparePartialBlock=o;var p=a("../exception"),q=d(p)},{"../exception":125}],118:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){this.value=a}function f(){}function g(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;g>f;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}c.__esModule=!0;var h=a("../base"),i=a("../exception"),j=d(i),k=a("../utils"),l=a("./code-gen"),m=d(l);f.prototype={nameLookup:function(a,b){return f.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;i>h;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;i>h;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var f=this;if(this.options.strict||this.options.assumeObjects)return void this.push(g(this.options.strict&&e,this,b,a));for(var h=b.length;h>c;c++)this.replaceStack(function(e){var g=f.nameLookup(e,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),
this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:f,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;g>f;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);null==h?(this.context.programs.push(""),h=this.context.programs.length,d.index=h,d.name="program"+h,this.context.programs[h]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[h]=e.decorators,this.context.environments[h]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams):(d.index=h,d.name="program"+h,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof e||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new e(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,d=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof e)c=[g.value],b=["(",c],f=!0;else{d=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),d&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d instanceof e)this.compileStack.push(d);else{var f=this.incrStack();this.pushSource([f," = ",d,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof e)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof e?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : {}");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=f.RESERVED_WORDS={},c=0,d=a.length;d>c;c++)b[a[c]]=!0}(),f.isValidJavaScriptVariableName=function(a){return!f.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},c["default"]=f,b.exports=c["default"]},{"../base":112,"../exception":125,"../utils":138,"./code-gen":115}],119:[function(a,b,c){"use strict";var d=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:
return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();c.__esModule=!0,c["default"]=d},{}],120:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return(new f).accept(a)}function f(){this.padding=0}c.__esModule=!0,c.print=e,c.PrintVisitor=f;var g=a("./visitor"),h=d(g);f.prototype=new h["default"],f.prototype.pad=function(a){for(var b="",c=0,d=this.padding;d>c;c++)b+="  ";return b+=a+"\n"},f.prototype.Program=function(a){var b="",c=a.body,d=void 0,e=void 0;if(a.blockParams){var f="BLOCK PARAMS: [";for(d=0,e=a.blockParams.length;e>d;d++)f+=" "+a.blockParams[d];f+=" ]",b+=this.pad(f)}for(d=0,e=c.length;e>d;d++)b+=this.accept(c[d]);return this.padding--,b},f.prototype.MustacheStatement=function(a){return this.pad("{{ "+this.SubExpression(a)+" }}")},f.prototype.Decorator=function(a){return this.pad("{{ DIRECTIVE "+this.SubExpression(a)+" }}")},f.prototype.BlockStatement=f.prototype.DecoratorBlock=function(a){var b="";return b+=this.pad(("DecoratorBlock"===a.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,b+=this.pad(this.SubExpression(a)),a.program&&(b+=this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--),a.inverse&&(a.program&&this.padding++,b+=this.pad("{{^}}"),this.padding++,b+=this.accept(a.inverse),this.padding--,a.program&&this.padding--),this.padding--,b},f.prototype.PartialStatement=function(a){var b="PARTIAL:"+a.name.original;return a.params[0]&&(b+=" "+this.accept(a.params[0])),a.hash&&(b+=" "+this.accept(a.hash)),this.pad("{{> "+b+" }}")},f.prototype.PartialBlockStatement=function(a){var b="PARTIAL BLOCK:"+a.name.original;return a.params[0]&&(b+=" "+this.accept(a.params[0])),a.hash&&(b+=" "+this.accept(a.hash)),b+=" "+this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--,this.pad("{{> "+b+" }}")},f.prototype.ContentStatement=function(a){return this.pad("CONTENT[ '"+a.value+"' ]")},f.prototype.CommentStatement=function(a){return this.pad("{{! '"+a.value+"' }}")},f.prototype.SubExpression=function(a){for(var b=a.params,c=[],d=void 0,e=0,f=b.length;f>e;e++)c.push(this.accept(b[e]));return b="["+c.join(", ")+"]",d=a.hash?" "+this.accept(a.hash):"",this.accept(a.path)+" "+b+d},f.prototype.PathExpression=function(a){var b=a.parts.join("/");return(a.data?"@":"")+"PATH:"+b},f.prototype.StringLiteral=function(a){return'"'+a.value+'"'},f.prototype.NumberLiteral=function(a){return"NUMBER{"+a.value+"}"},f.prototype.BooleanLiteral=function(a){return"BOOLEAN{"+a.value+"}"},f.prototype.UndefinedLiteral=function(){return"UNDEFINED"},f.prototype.NullLiteral=function(){return"NULL"},f.prototype.Hash=function(a){for(var b=a.pairs,c=[],d=0,e=b.length;e>d;d++)c.push(this.accept(b[d]));return"HASH{"+c.join(", ")+"}"},f.prototype.HashPair=function(a){return a.key+"="+this.accept(a.value)}},{"./visitor":121}],121:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){this.parents=[]}function f(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function g(a){f.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function h(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}c.__esModule=!0;var i=a("../exception"),j=d(i);e.prototype={constructor:e,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!e.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;c>b;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:f,Decorator:f,BlockStatement:g,DecoratorBlock:g,PartialStatement:h,PartialBlockStatement:function(a){h.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:f,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},c["default"]=e,b.exports=c["default"]},{"../exception":125}],122:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function f(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function g(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function h(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function i(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}c.__esModule=!0;var j=a("./visitor"),k=d(j);e.prototype=new k["default"],e.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,e=0,j=d.length;j>e;e++){var k=d[e],l=this.accept(k);if(l){var m=f(d,e,c),n=g(d,e,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&h(d,e,!0),l.open&&i(d,e,!0),b&&q&&(h(d,e),i(d,e)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[e-1].original)[1])),b&&o&&(h((k.program||k.inverse).body),i(d,e)),b&&p&&(h(d,e),i((k.inverse||k.program).body))}}return a},e.prototype.BlockStatement=e.prototype.DecoratorBlock=e.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,e=c;if(c&&c.chained)for(d=c.body[0].program;e.chained;)e=e.body[e.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:g(b.body),closeStandalone:f((d||b).body)};if(a.openStrip.close&&h(b.body,null,!0),c){var k=a.inverseStrip;k.open&&i(b.body,null,!0),k.close&&h(d.body,null,!0),a.closeStrip.open&&i(e.body,null,!0),!this.options.ignoreStandalone&&f(b.body)&&g(d.body)&&(i(b.body),h(d.body))}else a.closeStrip.open&&i(b.body,null,!0);return j},e.prototype.Decorator=e.prototype.MustacheStatement=function(a){return a.strip},e.prototype.PartialStatement=e.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},c["default"]=e,b.exports=c["default"]},{"./visitor":121}],123:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a)}c.__esModule=!0,c.registerDefaultDecorators=e;var f=a("./decorators/inline"),g=d(f)},{"./decorators/inline":124}],124:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},b.exports=c["default"]},{"../utils":138}],125:[function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d),c&&(this.lineNumber=f,this.column=g)}c.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d,b.exports=c["default"]},{}],126:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}c.__esModule=!0,c.registerDefaultHelpers=e;var f=a("./helpers/block-helper-missing"),g=d(f),h=a("./helpers/each"),i=d(h),j=a("./helpers/helper-missing"),k=d(j),l=a("./helpers/if"),m=d(l),n=a("./helpers/log"),o=d(n),p=a("./helpers/lookup"),q=d(p),r=a("./helpers/with"),s=d(r)},{"./helpers/block-helper-missing":127,"./helpers/each":128,"./helpers/helper-missing":129,"./helpers/if":130,"./helpers/log":131,"./helpers/lookup":132,"./helpers/with":133}],127:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},b.exports=c["default"]},{"../utils":138}],128:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../utils"),f=a("../exception"),g=d(f);c["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;l>h;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},b.exports=c["default"]},{"../exception":125,"../utils":138}],129:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../exception"),f=d(e);c["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},b.exports=c["default"]},{"../exception":125}],130:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},b.exports=c["default"]},{"../utils":138}],131:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},b.exports=c["default"]},{}],132:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},b.exports=c["default"]},{}],133:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},b.exports=c["default"]},{"../utils":138}],134:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("./utils"),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;c>f;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};c["default"]=e,b.exports=c["default"]},{"./utils":138}],135:[function(a,b,c){(function(a){"use strict";c.__esModule=!0,c["default"]=function(b){var c="undefined"!=typeof a?a:window,d=c.Handlebars;b.noConflict=function(){return c.Handlebars===b&&(c.Handlebars=d),b}},b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],136:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(c>b){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function g(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=l(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!==f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=m(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var f=this.programs[a],g=this.fn(a);return b||e||d||c?f=h(this,a,g,b,c,d,e):f||(f=this.programs[a]=h(this,a,g)),f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,f){if(a.useBlockParams&&!d)throw new q["default"]("must pass block params");if(a.useDepths&&!f)throw new q["default"]("must pass parent depths");return h(e,b,a[b],c,0,d,f)},d}function h(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return g&&b!==g[0]&&(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=m(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function j(a,b,c){c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var d=void 0;if(c.fn&&c.fn!==k&&(c.data=r.createFrame(c.data),d=c.data["partial-block"]=c.fn,d.partials&&(c.partials=o.extend({},c.partials,d.partials))),void 0===a&&d&&(a=d),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function k(){return""}function l(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function m(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}c.__esModule=!0,c.checkRevision=f,c.template=g,c.wrapProgram=h,c.resolvePartial=i,c.invokePartial=j,c.noop=k;var n=a("./utils"),o=e(n),p=a("./exception"),q=d(p),r=a("./base")},{"./base":112,"./exception":125,"./utils":138}],137:[function(a,b,c){"use strict";function d(a){this.string=a}c.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},c["default"]=d,b.exports=c["default"]},{}],138:[function(a,b,c){"use strict";function d(a){return l[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return n.test(a)?a.replace(m,d):a}function h(a){return a||0===a?!(!q(a)||0!==a.length):!0}function i(a){var b=e({},a);return b._parent=a,b}function j(a,b){return a.path=b,a}function k(a,b){return(a?a+".":"")+b}c.__esModule=!0,c.extend=e,c.indexOf=f,c.escapeExpression=g,c.isEmpty=h,c.createFrame=i,c.blockParams=j,c.appendContextPath=k;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},m=/[&<>"'`=]/g,n=/[&<>"'`=]/,o=Object.prototype.toString;c.toString=o;var p=function(a){return"function"==typeof a};p(/x/)&&(c.isFunction=p=function(a){return"function"==typeof a&&"[object Function]"===o.call(a)}),c.isFunction=p;var q=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===o.call(a):!1};c.isArray=q},{}],139:[function(a,b,c){function d(b,c){var d=a("fs"),f=d.readFileSync(c,"utf8");b.exports=e.compile(f)}var e=a("../dist/cjs/handlebars")["default"],f=a("../dist/cjs/handlebars/compiler/printer");e.PrintVisitor=f.PrintVisitor,e.print=f.print,b.exports=e,"undefined"!=typeof a&&a.extensions&&(a.extensions[".handlebars"]=d,a.extensions[".hbs"]=d)},{"../dist/cjs/handlebars":110,"../dist/cjs/handlebars/compiler/printer":120,fs:22}],140:[function(a,b,c){function d(a,b){if(f)return f.call(a,b);for(var c=a.parentNode.querySelectorAll(b),d=0;d<c.length;++d)if(c[d]==a)return!0;return!1}var e=Element.prototype,f=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;b.exports=d},{}],141:[function(a,b,c){function d(a){function b(){return!a.apply(this,arguments)}return b}b.exports=d},{}],142:[function(a,b,c){function d(a){function b(b){return b?(c.push(b),function(){c.splice(c.indexOf(b),1)}):a}var c=[];return a=void 0===a?null:a,b.set=function(b){a=b,c.forEach(function(a){a(b)})},b}b.exports=d},{}],143:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:144}],144:[function(a,b,c){function d(){k&&h&&(k=!1,h.length?j=h.concat(j):l=-1,j.length&&e())}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],145:[function(a,b,c){(function(a){!function(d){function e(a){throw new RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,".");var e=a.split("."),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;s.global!==s&&s.window!==s&&s.self!==s||(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.4.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],146:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],147:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],148:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":146,"./encode":147}],149:[function(a,b,c){c.SourceMapGenerator=a("./source-map/source-map-generator").SourceMapGenerator,c.SourceMapConsumer=a("./source-map/source-map-consumer").SourceMapConsumer,c.SourceNode=a("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":156,"./source-map/source-map-generator":157,"./source-map/source-node":158}],150:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(){this._array=[],this._set={}}var e=a("./util");d.fromArray=function(a,b){for(var c=new d,e=0,f=a.length;f>e;e++)c.add(a[e],b);return c},d.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},d.prototype.add=function(a,b){var c=this.has(a),d=this._array.length;c&&!b||this._array.push(a),c||(this._set[e.toSetString(a)]=d)},d.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this._set,e.toSetString(a))},d.prototype.indexOf=function(a){if(this.has(a))return this._set[e.toSetString(a)];throw new Error('"'+a+'" is not in the set.')},d.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},d.prototype.toArray=function(){return this._array.slice()},b.ArraySet=d})},{"./util":159,amdefine:1}],151:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){return 0>a?(-a<<1)+1:(a<<1)+0}function e(a){var b=1===(1&a),c=a>>1;return b?-c:c}var f=a("./base64"),g=5,h=1<<g,i=h-1,j=h;b.encode=function(a){var b,c="",e=d(a);do b=e&i,e>>>=g,e>0&&(b|=j),c+=f.encode(b);while(e>0);return c},b.decode=function(a,b,c){var d,h,k=a.length,l=0,m=0;do{if(b>=k)throw new Error("Expected more digits in base 64 VLQ value.");if(h=f.decode(a.charCodeAt(b++)),-1===h)throw new Error("Invalid base64 digit: "+a.charAt(b-1));d=!!(h&j),h&=i,l+=h<<m,m+=g}while(d);c.value=e(l),c.rest=b}})},{"./base64":152,amdefine:1}],152:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");b.encode=function(a){if(a>=0&&a<d.length)return d[a];throw new TypeError("Must be between 0 and 63: "+aNumber)},b.decode=function(a){var b=65,c=90,d=97,e=122,f=48,g=57,h=43,i=47,j=26,k=52;return a>=b&&c>=a?a-b:a>=d&&e>=a?a-d+j:a>=f&&g>=a?a-f+k:a==h?62:a==i?63:-1}})},{amdefine:1}],153:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,c,e,f,g,h){var i=Math.floor((c-a)/2)+a,j=g(e,f[i],!0);return 0===j?i:j>0?c-i>1?d(i,c,e,f,g,h):h==b.LEAST_UPPER_BOUND?c<f.length?c:-1:i:i-a>1?d(a,i,e,f,g,h):h==b.LEAST_UPPER_BOUND?i:0>a?-1:a}b.GREATEST_LOWER_BOUND=1,b.LEAST_UPPER_BOUND=2,b.search=function(a,c,e,f){if(0===c.length)return-1;var g=d(-1,c.length,a,c,e,f||b.GREATEST_LOWER_BOUND);if(0>g)return-1;for(;g-1>=0&&0===e(c[g],c[g-1],!0);)--g;return g}})},{amdefine:1}],154:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b){var c=a.generatedLine,d=b.generatedLine,e=a.generatedColumn,g=b.generatedColumn;
return d>c||d==c&&g>=e||f.compareByGeneratedPositionsInflated(a,b)<=0}function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var f=a("./util");e.prototype.unsortedForEach=function(a,b){this._array.forEach(a,b)},e.prototype.add=function(a){d(this._last,a)?(this._last=a,this._array.push(a)):(this._sorted=!1,this._array.push(a))},e.prototype.toArray=function(){return this._sorted||(this._array.sort(f.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},b.MappingList=e})},{"./util":159,amdefine:1}],155:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function e(a,b){return Math.round(a+Math.random()*(b-a))}function f(a,b,c,g){if(g>c){var h=e(c,g),i=c-1;d(a,h,g);for(var j=a[g],k=c;g>k;k++)b(a[k],j)<=0&&(i+=1,d(a,i,k));d(a,i+1,k);var l=i+1;f(a,b,c,l-1),f(a,b,l+1,g)}}b.quickSort=function(a,b){f(a,b,0,a.length-1)}})},{amdefine:1}],156:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){var b=a;return"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,""))),null!=b.sections?new g(b):new e(b)}function e(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),d=h.getArg(b,"sources"),e=h.getArg(b,"names",[]),f=h.getArg(b,"sourceRoot",null),g=h.getArg(b,"sourcesContent",null),i=h.getArg(b,"mappings"),k=h.getArg(b,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);d=d.map(h.normalize),this._names=j.fromArray(e,!0),this._sources=j.fromArray(d,!0),this.sourceRoot=f,this.sourcesContent=g,this._mappings=i,this.file=k}function f(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function g(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),e=h.getArg(b,"sections");if(c!=this._version)throw new Error("Unsupported version: "+c);this._sources=new j,this._names=new j;var f={line:-1,column:0};this._sections=e.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var b=h.getArg(a,"offset"),c=h.getArg(b,"line"),e=h.getArg(b,"column");if(c<f.line||c===f.line&&e<f.column)throw new Error("Section offsets must be ordered and non-overlapping.");return f=b,{generatedOffset:{generatedLine:c+1,generatedColumn:e+1},consumer:new d(h.getArg(a,"map"))}})}var h=a("./util"),i=a("./binary-search"),j=a("./array-set").ArraySet,k=a("./base64-vlq"),l=a("./quick-sort").quickSort;d.fromSourceMap=function(a){return e.fromSourceMap(a)},d.prototype._version=3,d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),d.prototype._charIsMappingSeparator=function(a,b){var c=a.charAt(b);return";"===c||","===c},d.prototype._parseMappings=function(a,b){throw new Error("Subclasses must implement _parseMappings")},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.prototype.eachMapping=function(a,b,c){var e,f=b||null,g=c||d.GENERATED_ORDER;switch(g){case d.GENERATED_ORDER:e=this._generatedMappings;break;case d.ORIGINAL_ORDER:e=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;e.map(function(a){var b=null===a.source?null:this._sources.at(a.source);return null!=b&&null!=i&&(b=h.join(i,b)),{source:b,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:null===a.name?null:this._names.at(a.name)}},this).forEach(a,f)},d.prototype.allGeneratedPositionsFor=function(a){var b=h.getArg(a,"line"),c={source:h.getArg(a,"source"),originalLine:b,originalColumn:h.getArg(a,"column",0)};if(null!=this.sourceRoot&&(c.source=h.relative(this.sourceRoot,c.source)),!this._sources.has(c.source))return[];c.source=this._sources.indexOf(c.source);var d=[],e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(e>=0){var f=this._originalMappings[e];if(void 0===a.column)for(var g=f.originalLine;f&&f.originalLine===g;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e];else for(var j=f.originalColumn;f&&f.originalLine===b&&f.originalColumn==j;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e]}return d},b.SourceMapConsumer=d,e.prototype=Object.create(d.prototype),e.prototype.consumer=d,e.fromSourceMap=function(a){var b=Object.create(e.prototype),c=b._names=j.fromArray(a._names.toArray(),!0),d=b._sources=j.fromArray(a._sources.toArray(),!0);b.sourceRoot=a._sourceRoot,b.sourcesContent=a._generateSourcesContent(b._sources.toArray(),b.sourceRoot),b.file=a._file;for(var g=a._mappings.toArray().slice(),i=b.__generatedMappings=[],k=b.__originalMappings=[],m=0,n=g.length;n>m;m++){var o=g[m],p=new f;p.generatedLine=o.generatedLine,p.generatedColumn=o.generatedColumn,o.source&&(p.source=d.indexOf(o.source),p.originalLine=o.originalLine,p.originalColumn=o.originalColumn,o.name&&(p.name=c.indexOf(o.name)),k.push(p)),i.push(p)}return l(b.__originalMappings,h.compareByOriginalPositions),b},e.prototype._version=3,Object.defineProperty(e.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?h.join(this.sourceRoot,a):a},this)}}),e.prototype._parseMappings=function(a,b){for(var c,d,e,g,i,j=1,m=0,n=0,o=0,p=0,q=0,r=a.length,s=0,t={},u={},v=[],w=[];r>s;)if(";"===a.charAt(s))j++,s++,m=0;else if(","===a.charAt(s))s++;else{for(c=new f,c.generatedLine=j,g=s;r>g&&!this._charIsMappingSeparator(a,g);g++);if(d=a.slice(s,g),e=t[d])s+=d.length;else{for(e=[];g>s;)k.decode(a,s,u),i=u.value,s=u.rest,e.push(i);if(2===e.length)throw new Error("Found a source, but no line and column");if(3===e.length)throw new Error("Found a source and line, but no column");t[d]=e}c.generatedColumn=m+e[0],m=c.generatedColumn,e.length>1&&(c.source=p+e[1],p+=e[1],c.originalLine=n+e[2],n=c.originalLine,c.originalLine+=1,c.originalColumn=o+e[3],o=c.originalColumn,e.length>4&&(c.name=q+e[4],q+=e[4])),w.push(c),"number"==typeof c.originalLine&&v.push(c)}l(w,h.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,l(v,h.compareByOriginalPositions),this.__originalMappings=v},e.prototype._findMapping=function(a,b,c,d,e,f){if(a[c]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+a[c]);if(a[d]<0)throw new TypeError("Column must be greater than or equal to 0, got "+a[d]);return i.search(a,b,e,f)},e.prototype.computeColumnSpans=function(){for(var a=0;a<this._generatedMappings.length;++a){var b=this._generatedMappings[a];if(a+1<this._generatedMappings.length){var c=this._generatedMappings[a+1];if(b.generatedLine===c.generatedLine){b.lastGeneratedColumn=c.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},e.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=this._findMapping(b,this._generatedMappings,"generatedLine","generatedColumn",h.compareByGeneratedPositionsDeflated,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(c>=0){var e=this._generatedMappings[c];if(e.generatedLine===b.generatedLine){var f=h.getArg(e,"source",null);null!==f&&(f=this._sources.at(f),null!=this.sourceRoot&&(f=h.join(this.sourceRoot,f)));var g=h.getArg(e,"name",null);return null!==g&&(g=this._names.at(g)),{source:f,line:h.getArg(e,"originalLine",null),column:h.getArg(e,"originalColumn",null),name:g}}}return{source:null,line:null,column:null,name:null}},e.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(a){return null==a}):!1},e.prototype.sourceContentFor=function(a,b){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(a=h.relative(this.sourceRoot,a)),this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];var c;if(null!=this.sourceRoot&&(c=h.urlParse(this.sourceRoot))){var d=a.replace(/^file:\/\//,"");if("file"==c.scheme&&this._sources.has(d))return this.sourcesContent[this._sources.indexOf(d)];if((!c.path||"/"==c.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},e.prototype.generatedPositionFor=function(a){var b=h.getArg(a,"source");if(null!=this.sourceRoot&&(b=h.relative(this.sourceRoot,b)),!this._sources.has(b))return{line:null,column:null,lastColumn:null};b=this._sources.indexOf(b);var c={source:b,originalLine:h.getArg(a,"line"),originalColumn:h.getArg(a,"column")},e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(e>=0){var f=this._originalMappings[e];if(f.source===c.source)return{line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},b.BasicSourceMapConsumer=e,g.prototype=Object.create(d.prototype),g.prototype.constructor=d,g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){for(var a=[],b=0;b<this._sections.length;b++)for(var c=0;c<this._sections[b].consumer.sources.length;c++)a.push(this._sections[b].consumer.sources[c]);return a}}),g.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=i.search(b,this._sections,function(a,b){var c=a.generatedLine-b.generatedOffset.generatedLine;return c?c:a.generatedColumn-b.generatedOffset.generatedColumn}),d=this._sections[c];return d?d.consumer.originalPositionFor({line:b.generatedLine-(d.generatedOffset.generatedLine-1),column:b.generatedColumn-(d.generatedOffset.generatedLine===b.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:a.bias}):{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})},g.prototype.sourceContentFor=function(a,b){for(var c=0;c<this._sections.length;c++){var d=this._sections[c],e=d.consumer.sourceContentFor(a,!0);if(e)return e}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(a){for(var b=0;b<this._sections.length;b++){var c=this._sections[b];if(-1!==c.consumer.sources.indexOf(h.getArg(a,"source"))){var d=c.consumer.generatedPositionFor(a);if(d){var e={line:d.line+(c.generatedOffset.generatedLine-1),column:d.column+(c.generatedOffset.generatedLine===d.line?c.generatedOffset.generatedColumn-1:0)};return e}}}return{line:null,column:null}},g.prototype._parseMappings=function(a,b){this.__generatedMappings=[],this.__originalMappings=[];for(var c=0;c<this._sections.length;c++)for(var d=this._sections[c],e=d.consumer._generatedMappings,f=0;f<e.length;f++){var g=e[c],i=d.consumer._sources.at(g.source);null!==d.consumer.sourceRoot&&(i=h.join(d.consumer.sourceRoot,i)),this._sources.add(i),i=this._sources.indexOf(i);var j=d.consumer._names.at(g.name);this._names.add(j),j=this._names.indexOf(j);var k={source:i,generatedLine:g.generatedLine+(d.generatedOffset.generatedLine-1),generatedColumn:g.column+(d.generatedOffset.generatedLine===g.generatedLine)?d.generatedOffset.generatedColumn-1:0,originalLine:g.originalLine,originalColumn:g.originalColumn,name:j};this.__generatedMappings.push(k),"number"==typeof k.originalLine&&this.__originalMappings.push(k)}l(this.__generatedMappings,h.compareByGeneratedPositionsDeflated),l(this.__originalMappings,h.compareByOriginalPositions)},b.IndexedSourceMapConsumer=g})},{"./array-set":150,"./base64-vlq":151,"./binary-search":153,"./quick-sort":155,"./util":159,amdefine:1}],157:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){a||(a={}),this._file=f.getArg(a,"file",null),this._sourceRoot=f.getArg(a,"sourceRoot",null),this._skipValidation=f.getArg(a,"skipValidation",!1),this._sources=new g,this._names=new g,this._mappings=new h,this._sourcesContents=null}var e=a("./base64-vlq"),f=a("./util"),g=a("./array-set").ArraySet,h=a("./mapping-list").MappingList;d.prototype._version=3,d.fromSourceMap=function(a){var b=a.sourceRoot,c=new d({file:a.file,sourceRoot:b});return a.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};null!=a.source&&(d.source=a.source,null!=b&&(d.source=f.relative(b,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name)),c.addMapping(d)}),a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&c.setSourceContent(b,d)}),c},d.prototype.addMapping=function(a){var b=f.getArg(a,"generated"),c=f.getArg(a,"original",null),d=f.getArg(a,"source",null),e=f.getArg(a,"name",null);this._skipValidation||this._validateMapping(b,c,d,e),null==d||this._sources.has(d)||this._sources.add(d),null==e||this._names.has(e)||this._names.add(e),this._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:d,name:e})},d.prototype.setSourceContent=function(a,b){var c=a;null!=this._sourceRoot&&(c=f.relative(this._sourceRoot,c)),null!=b?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[f.toSetString(c)]=b):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(c)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},d.prototype.applySourceMap=function(a,b,c){var d=b;if(null==b){if(null==a.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');d=a.file}var e=this._sourceRoot;null!=e&&(d=f.relative(e,d));var h=new g,i=new g;this._mappings.unsortedForEach(function(b){if(b.source===d&&null!=b.originalLine){var g=a.originalPositionFor({line:b.originalLine,column:b.originalColumn});null!=g.source&&(b.source=g.source,null!=c&&(b.source=f.join(c,b.source)),null!=e&&(b.source=f.relative(e,b.source)),b.originalLine=g.line,b.originalColumn=g.column,null!=g.name&&(b.name=g.name))}var j=b.source;null==j||h.has(j)||h.add(j);var k=b.name;null==k||i.has(k)||i.add(k)},this),this._sources=h,this._names=i,a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&(null!=c&&(b=f.join(c,b)),null!=e&&(b=f.relative(e,b)),this.setSourceContent(b,d))},this)},d.prototype._validateMapping=function(a,b,c,d){if((!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0)||b||c||d)&&!(a&&"line"in a&&"column"in a&&b&&"line"in b&&"column"in b&&a.line>0&&a.column>=0&&b.line>0&&b.column>=0&&c))throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:b,name:d}))},d.prototype._serializeMappings=function(){for(var a,b=0,c=1,d=0,g=0,h=0,i=0,j="",k=this._mappings.toArray(),l=0,m=k.length;m>l;l++){if(a=k[l],a.generatedLine!==c)for(b=0;a.generatedLine!==c;)j+=";",c++;else if(l>0){if(!f.compareByGeneratedPositionsInflated(a,k[l-1]))continue;j+=","}j+=e.encode(a.generatedColumn-b),b=a.generatedColumn,null!=a.source&&(j+=e.encode(this._sources.indexOf(a.source)-i),i=this._sources.indexOf(a.source),j+=e.encode(a.originalLine-1-g),g=a.originalLine-1,j+=e.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(j+=e.encode(this._names.indexOf(a.name)-h),h=this._names.indexOf(a.name)))}return j},d.prototype._generateSourcesContent=function(a,b){return a.map(function(a){if(!this._sourcesContents)return null;null!=b&&(a=f.relative(b,a));var c=f.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)},d.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(a.file=this._file),null!=this._sourceRoot&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},d.prototype.toString=function(){return JSON.stringify(this.toJSON())},b.SourceMapGenerator=d})},{"./array-set":150,"./base64-vlq":151,"./mapping-list":154,"./util":159,amdefine:1}],158:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c,d,e){this.children=[],this.sourceContents={},this.line=null==a?null:a,this.column=null==b?null:b,this.source=null==c?null:c,this.name=null==e?null:e,this[i]=!0,null!=d&&this.add(d)}var e=a("./source-map-generator").SourceMapGenerator,f=a("./util"),g=/(\r?\n)/,h=10,i="$$$isSourceNode$$$";d.fromStringWithSourceMap=function(a,b,c){function e(a,b){if(null===a||void 0===a.source)h.add(b);else{var e=c?f.join(c,a.source):a.source;h.add(new d(a.originalLine,a.originalColumn,e,b,a.name))}}var h=new d,i=a.split(g),j=function(){var a=i.shift(),b=i.shift()||"";return a+b},k=1,l=0,m=null;return b.eachMapping(function(a){if(null!==m){if(!(k<a.generatedLine)){var b=i[0],c=b.substr(0,a.generatedColumn-l);return i[0]=b.substr(a.generatedColumn-l),l=a.generatedColumn,e(m,c),void(m=a)}var c="";e(m,j()),k++,l=0}for(;k<a.generatedLine;)h.add(j()),k++;if(l<a.generatedColumn){var b=i[0];h.add(b.substr(0,a.generatedColumn)),i[0]=b.substr(a.generatedColumn),l=a.generatedColumn}m=a},this),i.length>0&&(m&&e(m,j()),h.add(i.join(""))),b.sources.forEach(function(a){var d=b.sourceContentFor(a);null!=d&&(null!=c&&(a=f.join(c,a)),h.setSourceContent(a,d))}),h},d.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(a){this.add(a)},this);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);a&&this.children.push(a)}return this},d.prototype.prepend=function(a){if(Array.isArray(a))for(var b=a.length-1;b>=0;b--)this.prepend(a[b]);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);this.children.unshift(a)}return this},d.prototype.walk=function(a){for(var b,c=0,d=this.children.length;d>c;c++)b=this.children[c],b[i]?b.walk(a):""!==b&&a(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(a){var b,c,d=this.children.length;if(d>0){for(b=[],c=0;d-1>c;c++)b.push(this.children[c]),b.push(a);b.push(this.children[c]),this.children=b}return this},d.prototype.replaceRight=function(a,b){var c=this.children[this.children.length-1];return c[i]?c.replaceRight(a,b):"string"==typeof c?this.children[this.children.length-1]=c.replace(a,b):this.children.push("".replace(a,b)),this},d.prototype.setSourceContent=function(a,b){this.sourceContents[f.toSetString(a)]=b},d.prototype.walkSourceContents=function(a){for(var b=0,c=this.children.length;c>b;b++)this.children[b][i]&&this.children[b].walkSourceContents(a);for(var d=Object.keys(this.sourceContents),b=0,c=d.length;c>b;b++)a(f.fromSetString(d[b]),this.sourceContents[d[b]])},d.prototype.toString=function(){var a="";return this.walk(function(b){a+=b}),a},d.prototype.toStringWithSourceMap=function(a){var b={code:"",line:1,column:0},c=new e(a),d=!1,f=null,g=null,i=null,j=null;return this.walk(function(a,e){b.code+=a,null!==e.source&&null!==e.line&&null!==e.column?(f===e.source&&g===e.line&&i===e.column&&j===e.name||c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name}),f=e.source,g=e.line,i=e.column,j=e.name,d=!0):d&&(c.addMapping({generated:{line:b.line,column:b.column}}),f=null,d=!1);for(var k=0,l=a.length;l>k;k++)a.charCodeAt(k)===h?(b.line++,b.column=0,k+1===l?(f=null,d=!1):d&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name})):b.column++}),this.walkSourceContents(function(a,b){c.setSourceContent(a,b)}),{code:b.code,map:c}},b.SourceNode=d})},{"./source-map-generator":157,"./util":159,amdefine:1}],159:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){if(b in a)return a[b];if(3===arguments.length)return c;throw new Error('"'+b+'" is a required argument.')}function e(a){var b=a.match(p);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function f(a){var b="";return a.scheme&&(b+=a.scheme+":"),b+="//",a.auth&&(b+=a.auth+"@"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),b}function g(a){var b=a,c=e(a);if(c){if(!c.path)return a;b=c.path}for(var d,g="/"===b.charAt(0),h=b.split(/\/+/),i=0,j=h.length-1;j>=0;j--)d=h[j],"."===d?h.splice(j,1):".."===d?i++:i>0&&(""===d?(h.splice(j+1,i),i=0):(h.splice(j,2),i--));return b=h.join("/"),""===b&&(b=g?"/":"."),c?(c.path=b,f(c)):b}function h(a,b){""===a&&(a="."),""===b&&(b=".");var c=e(b),d=e(a);if(d&&(a=d.path||"/"),c&&!c.scheme)return d&&(c.scheme=d.scheme),f(c);if(c||b.match(q))return b;if(d&&!d.host&&!d.path)return d.host=b,f(d);var h="/"===b.charAt(0)?b:g(a.replace(/\/+$/,"")+"/"+b);return d?(d.path=h,f(d)):h}function i(a,b){""===a&&(a="."),a=a.replace(/\/$/,"");for(var c=0;0!==b.indexOf(a+"/");){var d=a.lastIndexOf("/");if(0>d)return b;if(a=a.slice(0,d),a.match(/^([^\/]+:\/)?\/*$/))return b;++c}return Array(c+1).join("../")+b.substr(a.length+1)}function j(a){return"$"+a}function k(a){return a.substr(1)}function l(a,b,c){var d=a.source-b.source;return 0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d||c?d:(d=a.generatedColumn-b.generatedColumn,0!==d?d:(d=a.generatedLine-b.generatedLine,0!==d?d:a.name-b.name))))}function m(a,b,c){var d=a.generatedLine-b.generatedLine;return 0!==d?d:(d=a.generatedColumn-b.generatedColumn,0!==d||c?d:(d=a.source-b.source,0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d?d:a.name-b.name))))}function n(a,b){return a===b?0:a>b?1:-1}function o(a,b){var c=a.generatedLine-b.generatedLine;return 0!==c?c:(c=a.generatedColumn-b.generatedColumn,0!==c?c:(c=n(a.source,b.source),0!==c?c:(c=a.originalLine-b.originalLine,0!==c?c:(c=a.originalColumn-b.originalColumn,0!==c?c:n(a.name,b.name)))))}b.getArg=d;var p=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,q=/^data:.+\,.+$/;b.urlParse=e,b.urlGenerate=f,b.normalize=g,b.join=h,b.relative=i,b.toSetString=j,b.fromSetString=k,b.compareByOriginalPositions=l,b.compareByGeneratedPositionsDeflated=m,b.compareByGeneratedPositionsInflated=o})},{amdefine:1}],160:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","	"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);-1!==C&&(-1===A||A>C)&&(A=C)}var D,E;E=-1===A?h.lastIndexOf("@"):h.lastIndexOf("@",A),-1!==E&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);-1!==C&&(-1===A||A>C)&&(A=C)}-1===A&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;H>B;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;L>K;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;H>B;B++){var R=p[B];if(-1!==h.indexOf(R)){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");-1!==T&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(-1!==U?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":161,punycode:145,querystring:148}],161:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],162:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("events");c["default"]=function(){var a={},b=new d.EventEmitter,c={set:function(b,c){a[b]=c},propagate:function(){b.emit("change",a)}};return _.extend(b,c)},b.exports=c["default"]},{events:109}],163:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=["delete"],e=d.concat(["replicate","entity","copy","paste"]),f=d.concat(["pallet","change-label","negation","speculation"]),g=f.concat(["copy"]);c["default"]=function(a,b,c,d,h){var i=function(){c.propagate(),b.propagate()};return{propagate:i,enabled:function(a,b){c.set(a,b),i()},updateBySpan:function(){d(e),i()},updateByEntity:function(){d(g),h(a.entity),i()},updateByRelation:function(){d(f),h(a.relation),i()}}},b.exports=c["default"]},{}],164:[function(a,b,c){"use strict";function d(a){var b=new h.EventEmitter,c=!1,d=function(a){return void 0===a?c:(c=a,void f())},e=function(){c=!c,f()},f=function(){return b.emit("change",{buttonName:a,state:c})};return _.extend(b,{name:a,value:d,toggle:e,propagate:f})}function e(a,b){b.map(f).forEach(function(b){return a.emit("change",b)});
}function f(a){return{buttonName:a.name,state:a.value()}}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("events"),i=a("./reduce2hash"),j=g(i),k=["view","term","relation","simple","boundary-detection","negation","replicate-auto","speculation"];c["default"]=function(){var a=new h.EventEmitter,b=k.map(d),c=function(){return e(a,b)},f=b.reduce((0,j["default"])(),{});return f["boundary-detection"].value(!0),b.forEach(function(b){b.on("change",function(b){return a.emit("change",b)})}),_.extend(a,f,{propagate:c})},b.exports=c["default"]},{"./reduce2hash":168,"babel-runtime/helpers/interop-require-default":18,events:109}],165:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/map")["default"],e=a("babel-runtime/core-js/get-iterator")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){var f=function(){return c.clipBoard.length>0},g=function(){return a.entity.some()||a.relation.some()},h=new d([["replicate",function(){return Boolean(a.span.single())}],["entity",function(){return a.span.some()}],["delete",function(){return a.some()}],["copy",function(){return a.span.some()||a.entity.some()}],["paste",function(){return f()&&a.span.some()}],["pallet",g],["change-label",g],["negation",g],["speculation",g]]);return function(a){var c=!0,d=!1,f=void 0;try{for(var g,i=e(a);!(c=(g=i.next()).done);c=!0){var j=g.value,k=h.get(j);b.set(j,k())}}catch(l){d=!0,f=l}finally{try{!c&&i["return"]&&i["return"]()}finally{if(d)throw f}}}},b.exports=c["default"]},{"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/map":5}],166:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=function(a,b){return b.length>0&&_.every(b,function(b){return _.contains(b,a)})},d=function(a,d){b[a.toLowerCase()].value(c(a,d))};return function(b){var c=b.all().map(function(b){return a.getModificationOf(b).map(function(a){return a.pred})});d("Negation",c),d("Speculation",c)}},b.exports=c["default"]},{}],167:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=(a("events"),a("./ModeAccordingToButton")),f=d(e),g=a("./ButtonEnableStates"),h=d(g),i=a("./UpdateButtonState"),j=d(i),k=a("./UpdateModificationButtons"),l=d(k),m=a("./ButtonStateHelper"),n=d(m);b.exports=function(a,b,c,d){var e=new f["default"],g=new h["default"],i=new j["default"](c,g,d),k=new l["default"](b,e),m=new n["default"](c,e,g,i,k);return e.on("change",function(b){return a.eventEmitter.emit("textae.control.button.push",b)}),g.on("change",function(b){return a.eventEmitter.emit("textae.control.buttons.change",b)}),{modeAccordingToButton:e,buttonStateHelper:m}}},{"./ButtonEnableStates":162,"./ButtonStateHelper":163,"./ModeAccordingToButton":164,"./UpdateButtonState":165,"./UpdateModificationButtons":166,"babel-runtime/helpers/interop-require-default":18,events:109}],168:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var a=arguments.length<=0||void 0===arguments[0]?"name":arguments[0];return function(b,c){return b[c[a]]=c,b}},b.exports=c["default"]},{}],169:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("observ"),f=d(e);c["default"]=function(){var a=!1,b=new f["default"](!1);return b.forceModified=function(c){b.set(c),a=c},b.update=function(c){b.set(a||c)},b},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,observ:142}],170:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../util/getMousePoint"),f=d(e);c["default"]=function(a,b){return function(c){switch(c){case"textae.control.button.help.click":b();break;default:a.api.handleButtonClick(c,{point:(0,f["default"])()})}}},b.exports=c["default"]},{"../util/getMousePoint":433,"babel-runtime/helpers/interop-require-default":18}],171:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../component/HelpDialog"),f=d(e),g=a("./ControlButtonHandler"),h=d(g);b.exports=function(a,b){a[0].insertBefore(b[0],a[0].childNodes[0]),a.eventEmitter.on("textae.editor.unselect",b.updateAllButtonEnableState).on("textae.control.button.push",function(a){return b.updateButtonPushState(a.buttonName,a.state)}).on("textae.control.buttons.change",function(a){return b.updateAllButtonEnableState(a)}),a.api.updateButtons();var c=new f["default"],d=new h["default"](a,c);b.on("textae.control.button.click",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];return d.apply(void 0,c)}),b[0].addEventListener("mousedown",function(a){a.preventDefault()})}},{"../component/HelpDialog":178,"./ControlButtonHandler":170,"babel-runtime/helpers/interop-require-default":18}],172:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("babel-runtime/helpers/interop-require-wildcard")["default"],f=a("url"),g=d(f),h=a("../../util/ajaxAccessor"),i=e(h),j=a("../jQuerySugar"),k=d(j);b.exports=function(a,b,c,d){b.startWait(),i.getAsync(a,function(e){b.endWait(),c.emit("load",{annotation:e,source:k["default"].toLink(g["default"].resolve(location.href,a))}),d(a)},function(){b.endWait(),toastr.error("Could not load the target.")})}},{"../../util/ajaxAccessor":432,"../jQuerySugar":200,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,url:160}],173:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../dialog/EditorDialog"),f=d(e);b.exports=function(a,b,c,d){var e=new f["default"](d.editorId,a,b,c);return e.on("dialog.close",e.close),e}},{"../dialog/EditorDialog":191,"babel-runtime/helpers/interop-require-default":18}],174:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../jQuerySugar"),f=d(e),g=a("./label"),h=d(g),i=a("./getAnnotationFromServer"),j=d(i),k=a("../../util/CursorChanger"),l=d(k),m=a("./getDialog"),n=d(m);b.exports=function(a,b,c,d){var e=function(b){var c=b.files[0],d=new FileReader;d.onload=function(){var b=JSON.parse(this.result);a.emit("load",{annotation:b,source:c.name+"(local file)"})},d.readAsText(c)},g=_.partial(f["default"].Div,"textae-editor__load-dialog__row"),i=_.partial(f["default"].Label,"textae-editor__load-dialog__label"),k=_.partial(f["default"].Button,"Open"),m=function(){return!r.params||window.confirm(b)},o=new k("url"),p=new k("local"),q=$("<div>").append((new g).append(new i(h["default"].URL),$('<input type="text" class="textae-editor__load-dialog__file-name url" />'),o)).on("input",'[type="text"].url',function(){f["default"].enabled(o,this.value)}).on("click",'[type="button"].url',function(){m()&&(0,j["default"])(f["default"].getValueFromText(q,"url"),new l["default"](d),a,c),q.trigger("dialog.close")}).append((new g).append(new i(h["default"].LOCAL),$('<input class="textae-editor__load-dialog__file" type="file" />'),p)).on("change",'[type="file"]',function(){f["default"].enabled(p,this.files.length>0)}).on("click",'[type="button"].local',function(){m()&&e(q.find('[type="file"]')[0]),q.trigger("dialog.close")}),r=(0,n["default"])("textae.dialog.load","Load Annotations",q[0],d);return r}},{"../../util/CursorChanger":431,"../jQuerySugar":200,"./getAnnotationFromServer":172,"./getDialog":173,"./label":177,"babel-runtime/helpers/interop-require-default":18}],175:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("babel-runtime/helpers/interop-require-wildcard")["default"],f=a("../../util/CursorChanger"),g=d(f),h=a("../../util/ajaxAccessor"),i=e(h),j=a("./getLoadDialog"),k=d(j),l=a("./label"),m=d(l),n=a("../jQuerySugar"),o=d(n),p=a("./getDialog"),q=d(p);b.exports=function(a,b,c,d){var e=new g["default"](d),f=function(){a.emit("save"),e.endWait()},h=function(){a.emit("save error"),e.endWait()},j=function(a,b){e.startWait(),i.post(a,b,f,h,function(){e.endWait()})},l=function(a){var b=new Blob([a],{type:"application/json"});return URL.createObjectURL(b)},n=function(){var e=(0,k["default"])(a,b,m["default"],c,d).find("input[type='file']"),f=e.prop("files")[0];return f?f.name:"annotations.json"},p=_.partial(o["default"].Div,"textae-editor__save-dialog__row"),r=_.partial(o["default"].Label,"textae-editor__save-dialog__label"),s=new o["default"].Button("Save","url"),t=$("<div>").append((new p).append(new r(m["default"].URL),$('<input type="text" class="textae-editor__save-dialog__server-file-name url" />'),s)).on("input","input.url",function(){o["default"].enabled(s,this.value)}).on("click",'[type="button"].url',function(){j(o["default"].getValueFromText(t,"url"),u.params),t.trigger("dialog.close")}).append((new p).append(new r(m["default"].LOCAL),$('<input type="text" class="textae-editor__save-dialog__local-file-name local">'),$('<a class="download" href="#">Download</a>'))).on("click","a.download",function(){var b=l(u.params);$(this).attr("href",b).attr("download",o["default"].getValueFromText(t,"local")),a.emit("save"),t.trigger("dialog.close")}).append((new p).append(new r,$('<a class="viewsource" href="#">Click to see the json source in a new window.</a>'))).on("click","a.viewsource",function(b){var c=l(u.params);return window.open(c,"_blank"),a.emit("save"),t.trigger("dialog.close"),!1}),u=(0,q["default"])("textae.dialog.save","Save Annotations",t[0],d);return u.on("dialogopen",function(){var a=n();u.find('[type="text"].local').val(a)}),u}},{"../../util/CursorChanger":431,"../../util/ajaxAccessor":432,"../jQuerySugar":200,"./getDialog":173,"./getLoadDialog":174,"./label":177,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],176:[function(a,b,c){"use strict";function d(a,b,c){a.find('[type="text"].url').val(c).trigger("input"),a.params=b,a.open()}var e=a("babel-runtime/core-js/object/assign")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"],g=a("events"),h=a("../../util/CursorChanger"),i=f(h),j=a("./getAnnotationFromServer"),k=f(j),l=a("./getLoadDialog"),m=f(l),n=a("./getSaveDialog"),o=f(n);b.exports=function(a,b){var c="",f=function(a){c=a},h=new g.EventEmitter,j=function(e){d((0,m["default"])(h,b,f,a),e,c)},l=function(e){d((0,o["default"])(h,b,f,a),e,c)},n=new i["default"](a);return e(h,{getAnnotationFromServer:function(a){return(0,k["default"])(a,n,h,f)},showAccess:j,showSave:l}),h}},{"../../util/CursorChanger":431,"./getAnnotationFromServer":172,"./getLoadDialog":174,"./getSaveDialog":175,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18,events:109}],177:[function(a,b,c){b.exports={URL:"URL",LOCAL:"Local"}},{}],178:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./dialog/Dialog"),f=d(e);c["default"]=function(){var a=document.createElement("div");a.className="textae-tool__key-help";var b=new f["default"]({height:313,width:523},"textae-control__help","Help (Keyboard short-cuts)",a);return b.open},b.exports=c["default"]},{"./dialog/Dialog":190,"babel-runtime/helpers/interop-require-default":18}],179:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("delegate"),f=d(e);c["default"]=function(a,b){var c=document.createElement("div");return c.classList.add("textae-editor__type-pallet"),c.style.display="none",c.appendChild(document.createElement("table")),(0,f["default"])(c,".textae-editor__type-pallet__entity-type__label","click",function(b){c.style.display="none",a(b.delegateTarget.id)}),(0,f["default"])(c,".textae-editor__type-pallet__entity-type__radio","change",function(a){c.style.display="none",b(a.delegateTarget.id)}),c},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,delegate:107}],180:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Component"),f=d(e),g=a("./updateDisplay"),h=d(g);c["default"]=function(a,b){var c=new f["default"](a,b);return{el:c,show:function(a,b){return(0,h["default"])(c,a,b)},hide:function(){return c.style.display="none"}}},b.exports=c["default"]},{"./Component":179,"./updateDisplay":182,"babel-runtime/helpers/interop-require-default":18}],181:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("handlebars"),f=d(e),g='\n{{#each this}}\n<tr class="textae-editor__type-pallet__entity-type" style="background-color: {{color}};">\n  <td>\n    <input class="textae-editor__type-pallet__entity-type__radio" type="radio" name="etype" id="{{id}}" {{#if defaultType}}title="default type" checked="checked"{{/if}}>\n  </td>\n  <td class="textae-editor__type-pallet__entity-type__label" id="{{id}}">\n    <span title={{id}}>\n      {{id}}\n    </span>\n  </td>\n  <td>\n    {{label}}\n  </td>\n  <td>\n    {{#if uri}}\n    <a href="{{uri}}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>\n    {{/if}}\n  </td>\n</tr>\n{{/each}}\n',h=f["default"].compile(g);c["default"]=function(a){var b=a.getSortedIds().map(function(b){return{id:b,label:a.getLabel(b),defaultType:b===a.getDefaultType(),uri:a.getUri(b),color:a.getColor(b)}});return h(b)},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,handlebars:139}],182:[function(a,b,c){"use strict";function d(a){a.querySelector("table").innerHTML="",a.style.height=""}function e(a,b){a.querySelector("table").innerHTML=(0,l["default"])(b)}function f(a){a.style.display="block"}function g(a){a.style.width="auto",window.innerWidth-2<=a.offsetWidth&&(a.style.width=window.innerWidth-4+"px")}function h(a){window.innerHeight-2<=a.offsetHeight&&(a.style.height=window.innerHeight-2+"px")}function i(a,b){a.offsetWidth+b.left>window.innerWidth&&(b.left=window.innerWidth-a.offsetWidth-2),a.offsetHeight+b.top>window.innerHeight&&(b.top=window.innerHeight-a.offsetHeight-1),a.style.top=b.top+"px",a.style.left=b.left+"px"}var j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("./toRows"),l=j(k);c["default"]=function(a,b,c){b&&b.getSortedIds().length>0&&(d(a),e(a,b),f(a),g(a),h(a),i(a,c))},b.exports=c["default"]},{"./toRows":181,"babel-runtime/helpers/interop-require-default":18}],183:[function(a,b,c){"use strict";function d(a,b,c){e(a,b,c),f(a,b)}function e(a,b,c){var d=h(function(d){c.changeTypeGap(d.target.value),(0,n["default"])(b,a)});return a.on("change",".type-gap",d)}function f(a,b){var c=h(function(a){l.set(b[0],a.target.value),g()});return a.on("change",".line-height",c)}function g(){var a=new Event("resize");window.dispatchEvent(a)}function h(a){return _.debounce(a,300)}var i=a("babel-runtime/helpers/interop-require-wildcard")["default"],j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("../../editor/start/View/lineHeight"),l=i(k),m=a("./updateLineHeight"),n=j(m),o=a("./updateTypeGapEnable"),p=(j(o),a("./updateTypeGapValue")),q=(j(p),'\n    <div class="textae-editor__setting-dialog">\n        <div>\n            <label class="textae-editor__setting-dialog__label">Type Gap</label>\n            <input type="number" class="textae-editor__setting-dialog__type-gap type-gap" step="1" min="0" max="5">\n        </div>\n        <div>\n            <label class="textae-editor__setting-dialog__label">Line Height</label>\n            <input type="number" class="textae-editor__setting-dialog__line-height line-height" step="1" min="50" max="500">\n            px\n        </div>\n    </div>\n');c["default"]=function(a,b){var c=$(q);return d(c,a,b),c[0]},b.exports=c["default"]},{"../../editor/start/View/lineHeight":407,"./updateLineHeight":186,"./updateTypeGapEnable":187,"./updateTypeGapValue":188,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],184:[function(a,b,c){"use strict";function d(a,b){return new g["default"](b.editorId,"textae.dialog.setting","Setting",a,{noCancelButton:!0})}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../dialog/EditorDialog"),g=e(f),h=a("./create"),i=e(h),j=a("./update"),k=e(j);c["default"]=function(a,b){var c=(0,i["default"])(a,b),e=d(c,a);return function(){return(0,k["default"])(e,a,b),e.open()}},b.exports=c["default"]},{"../dialog/EditorDialog":191,"./create":183,"./update":185,"babel-runtime/helpers/interop-require-default":18}],185:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./updateLineHeight"),f=d(e),g=a("./updateTypeGapEnable"),h=d(g),i=a("./updateTypeGapValue"),j=d(i);c["default"]=function(a,b,c){(0,h["default"])(c,a),(0,j["default"])(c,a),(0,f["default"])(b,a)},b.exports=c["default"]},{"./updateLineHeight":186,"./updateTypeGapEnable":187,"./updateTypeGapValue":188,"babel-runtime/helpers/interop-require-default":18}],186:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../editor/start/View/lineHeight"),g=d(f),h=a("../jQuerySugar"),i=e(h);c["default"]=function(a,b){return i["default"].setValue(b,".line-height",g.get(a[0]))},b.exports=c["default"]},{"../../editor/start/View/lineHeight":407,"../jQuerySugar":200,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],187:[function(a,b,c){"use strict";function d(a){return a.find(".type-gap")}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../jQuerySugar"),g=e(f);c["default"]=function(a,b){return g["default"].enabled(d(b),a.showInstance()),b},b.exports=c["default"]},{"../jQuerySugar":200,"babel-runtime/helpers/interop-require-default":18}],188:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../jQuerySugar"),f=d(e);c["default"]=function(a,b){return f["default"].setValue(b,".type-gap",a.getTypeGap)},b.exports=c["default"]},{"../jQuerySugar":200,"babel-runtime/helpers/interop-require-default":18}],189:[function(a,b,c){"use strict";var d=function(a){var b=a.find(".textae-editor__footer .textae-editor__footer__message");if(0===b.length){b=$("<div>").addClass("textae-editor__footer__message");var c=$("<div>").addClass("textae-editor__footer").append(b);a.append(c)}return b};b.exports=function(a){var b=_.partial(d,a),c=function(a){""!==a&&b().html("Source: "+a)};return{status:c}}},{}],190:[function(a,b,c){"use strict";function d(a,b,c){var d=document.createElement("div");return d.id=a,d.title=b,d.appendChild(c),$(d)}var e=a("babel-runtime/core-js/object/assign")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./extendDialog"),h=f(g);c["default"]=function(a,b,c,f){a=e({resizable:!1,modal:!0,dialogClass:"textae-editor--dialog"},a);var g=new d(b,c,f);return g.on("dialogclose",function(){requestAnimationFrame(function(){return g.dialog("destroy")})}),(0,h["default"])(a,g)},b.exports=c["default"]},{"./extendDialog":192,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],191:[function(a,b,c){"use strict";function d(a){var b=e({},i,a);return b.noCancelButton||(b.buttons=e({},b.buttons,{Cancel:function(){$(this).dialog("close")}})),b}var e=a("babel-runtime/core-js/object/assign")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./Dialog"),h=f(g),i={width:550,height:220};c["default"]=function(a,b,c,e,f){var g=d(f),i=new h["default"](g,b,c,e);return i},b.exports=c["default"]},{"./Dialog":190,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],192:[function(a,b,c){"use strict";function d(a,b){return{open:function(){a.dialog(b)},close:function(){a.dialog("close")}}}var e=a("babel-runtime/core-js/object/assign")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return e(b,new d(b,a))},b.exports=c["default"]},{"babel-runtime/core-js/object/assign":6}],193:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="textae-editor__edit-id-dialog__id";c["default"]=d,b.exports=c["default"]},{}],194:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("delegate"),f=d(e),g=a("../dialog/EditorDialog"),h=d(g),i=a("./className"),j=d(i);c["default"]=function(a,b,c,d){var e=function(){g.done(c.value,d.innerText),g.close()},g=new h["default"](a.editorId,"textae.dialog.edit-id","Please enter new id",b,{noCancelButton:!0,buttons:{OK:e},height:200});return(0,f["default"])(g[0],"."+j["default"],"keyup",function(a){13===a.keyCode&&e()}),g},b.exports=c["default"]},{"../dialog/EditorDialog":191,"./className":193,"babel-runtime/helpers/interop-require-default":18,delegate:107}],195:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./template"),f=d(e),g=a("./create"),h=d(g),i=a("./update"),j=d(i);c["default"]=function(a,b,c,d,e){var g=document.createElement("div");g.innerHTML=f["default"];var i=g.querySelector("span"),k=g.querySelector("input"),l=(0,h["default"])(a,g,k,i);l.open(),(0,j["default"])(l,k,i,c,e,d,b)},b.exports=c["default"]},{"./create":194,"./template":197,"./update":198,"babel-runtime/helpers/interop-require-default":18}],196:[function(a,b,c){"use strict";function d(a,b){return a.getDefinedTypes().filter(function(a){return a.label}).filter(function(a){return a.label.includes(b)}).map(function(a){return{label:a.label+"@"+a.id,raw:a}})}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,e){var f=d(a,c.term);return b?void $.getJSON(b,c,function(a,b,c){var d=a.filter(function(a){return 0===f.filter(function(b){return a.id===b.raw.id}).length}).map(function(a){return{label:a.label+"@"+a.id,raw:a}});e(f.concat(d))}):void e(f)},b.exports=c["default"]},{}],197:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./className"),f=d(e),g='\n<div>\n  label: <span></span>\n</div>\n<div>\n  <input type="text" class="'+f["default"]+'"></input>\n</div>';c["default"]=g,b.exports=c["default"]},{"./className":193,"babel-runtime/helpers/interop-require-default":18}],198:[function(a,b,c){"use strict";function d(a,b,c){return a.value=c.item.raw.id,b.innerText=c.item.raw.label,!1}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./source"),g=e(f);c["default"]=function(a,b,c,e,f,h,i){$(b).autocomplete({source:function(a,b){c.innerText="",(0,g["default"])(e,f,a,b)},minLength:3,select:function(a,e){return d(b,c,e)}}),a.done=h,b.value=i,e.getLabel(i)?c.innerText=e.getLabel(i):c.innerText=""},b.exports=c["default"]},{"./source":196,"babel-runtime/helpers/interop-require-default":18}],199:[function(a,b,c){"use strict";b.exports=function(a,b){b?a.removeAttr("disabled"):a.attr("disabled","disabled")}},{}],200:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./jQueryEnabled"),f=d(e),g=function(a,b,c,d){var e={};return e[a]=d,b.find(c).prop(e).end()};b.exports={enabled:f["default"],Div:function(a){return $("<div>").addClass(a)},Label:function(a,b){return $("<label>").addClass(a).text(b)},Button:function(a,b){return $('<input type="button" disabled="disabled" />').addClass(b).val(a)},Checkbox:function(a){return $('<input type="checkbox"/>').addClass(a)},Number:function(a){return $('<input type="number"/>').addClass(a)},toLink:function(a){return'<a href="'+a+'">'+a+"</a>"},getValueFromText:function(a,b){return a.find('[type="text"].'+b).val()},setChecked:_.partial(g,"checked"),setValue:_.partial(g,"value")}},{"./jQueryEnabled":199,"babel-runtime/helpers/interop-require-default":18}],201:[function(a,b,c){"use strict";function d(a,b){return a.innerHTML="",b.map(e).map(n).forEach(function(b,c){1===c&&a.insertAdjacentHTML("beforeend",m),a.insertAdjacentHTML("beforeend",b)}),a}function e(a){return a.referencedItems=a.relationObj.map(function(a){return a.alertObj=!0,a}).concat(a.relationSubj.map(function(a){return a.alertSubj=!0,a})).concat(a.modification.map(function(a){return a.subj="-",a.alertObj=!0,a})),a}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("handlebars"),h=f(g),i=a("../editor/Model/AnnotationData/parseAnnotation/validateAnnotation"),j=a("./dialog/EditorDialog"),k=f(j),l='\n    <div class="textae-editor__valiondate-dialog__content">\n        <h2>{{name}}</h2>\n        {{#if denotationHasLength}}\n            <table>\n                <caption>Wrong range.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationHasLength}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationHasLength}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if denotationInText}}\n            <table>\n                <caption>Out of text.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationInText}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationInText}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if denotationIsNotCrossing}}\n            <table>\n                <caption>Spans with boundary-cross.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationIsNotCrossing}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationIsNotCrossing}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if denotationInParagraph}}\n            <table>\n                <caption>Spans across paragraphs (newline-delimited).</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationInParagraph}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationInParagraph}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if referencedItems}}\n            <table>\n                <caption>Referenced items do not exist.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="referencedItem">subj</th>\n                        <th>pred</th>\n                        <th class="referencedItem">obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#referencedItems}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td{{#if alertSubj}} class="alert"{{/if}}>{{subj}}</td>\n                        <td>{{pred}}</td>\n                        <td{{#if alertObj}} class="alert"{{/if}}>{{obj}}</td>\n                    </tr>\n                    {{/referencedItems}}\n                </tbody>\n            </table>\n        {{/if}}\n    </div>',m='\n        <div class="textae-editor__valiondate-dialog__content">\n            <h1>Track annatations will be merged to the root anntations.</h1>\n        </div>',n=h["default"].compile(l);c["default"]=function(a,b){if((0,i.hasError)(b)){var c=document.createElement("div"),e=new k["default"](a.editorId,"textae.dialog.validation","The following erroneous annotations ignored",c,{noCancelButton:!0,height:450});d(e[0].firstChild,b),e.open()}},b.exports=c["default"]},{"../editor/Model/AnnotationData/parseAnnotation/validateAnnotation":229,"./dialog/EditorDialog":191,"babel-runtime/helpers/interop-require-default":18,handlebars:139}],202:[function(a,b,c){b.exports={buttonGroup:[{list:[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"}]},{list:[{type:"view",title:"View Mode"},{type:"term",title:"Term Edit Mode"},{type:"relation",title:"Relation Edit Mode"}]},{list:[{type:"simple",title:"Simple View"},{type:"line-height",title:"Adjust LineHeight"}]},{list:[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}]},{list:[{type:"replicate",title:"Replicate span annotation [R]"},{type:"replicate-auto",title:"Auto replicate"},{type:"boundary-detection",title:"Boundary Detection [B]"}]},{list:[{type:"entity",title:"New entity [E]"},{type:"pallet",title:"Select label [Q]"},{type:"change-label",title:"Change label [W]"}]},{list:[{type:"negation",title:"Negation [X]"},{type:"speculation",title:"Speculation [S]"}]},{list:[{type:"delete",title:"Delete [D]"},{type:"copy",title:"Copy [C]"},{type:"paste",title:"Paste [V]"}]},{list:[{type:"setting",title:"Setting"}]},{list:[{type:"help",title:"Help [H]"}]}]}},{}],203:[function(a,b,c){"use strict";function d(a,b){h(a,b).removeClass("textae-control__icon--disabled")}function e(a,b){h(a,b).addClass("textae-control__icon--disabled")}function f(a,b){h(a,b).addClass("textae-control__icon--pushed")}function g(a,b){h(a,b).removeClass("textae-control__icon--pushed")}function h(a,b){return a.find((0,k["default"])(b))}var i=a("babel-runtime/helpers/interop-require-default")["default"];
Object.defineProperty(c,"__esModule",{value:!0}),c.enable=d,c.disable=e,c.push=f,c.unpush=g;var j=a("./toButtonClass"),k=i(j)},{"./toButtonClass":206,"babel-runtime/helpers/interop-require-default":18}],204:[function(a,b,c){"use strict";function d(){var a=document.createElement("div");return a.classList.add("textae-control"),(0,m["default"])(a,k["default"]),a}function e(a,b,c){var d=g({},b,t,c);(0,s["default"])(a,b,d)}function f(a,b,c){c?q.push(a,b):q.unpush(a,b)}var g=a("babel-runtime/core-js/object/assign")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"],i=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("./buttonMap"),k=h(j),l=a("./makeButtons"),m=h(l),n=a("./toButtonList"),o=h(n),p=a("./iconCssUtil"),q=i(p),r=a("./updateButtons"),s=h(r),t={read:!0,help:!0};c["default"]=function(){var a=$(d()),b=(0,o["default"])(k["default"]);return a.updateAllButtonEnableState=function(c){return e(a,b,c)},a.updateButtonPushState=function(b,c){return f(a,b,c)},a},b.exports=c["default"]},{"./buttonMap":202,"./iconCssUtil":203,"./makeButtons":205,"./toButtonList":207,"./updateButtons":208,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],205:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("handlebars"),f=d(e),g='\n    <span class="textae-control__title">\n        <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n    </span>\n    {{#buttonGroup}}\n    <span class="textae-control__separator"></span>\n        {{#list}}\n    <span class="textae-control__icon textae-control__{{type}}-button" title="{{title}}"></span>\n        {{/list}}\n    {{/buttonGroup}}\n    ',h=f["default"].compile(g);c["default"]=function(a,b){a.innerHTML=h(b)},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,handlebars:139}],206:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return".textae-control__"+a+"-button"},b.exports=c["default"]},{}],207:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.buttonGroup.reduce(function(a,b){return b.list.reduce(function(a,b){return a[b.type]=1,a},a)},{})},b.exports=c["default"]},{}],208:[function(a,b,c){"use strict";function d(a,b){var c=function(){return a.trigger("textae.control.button.click","textae.control.button."+b.replace(/-/g,"_")+".click"),!1};a.off(n,(0,m["default"])(b)).on(n,(0,m["default"])(b),c),k.enable(a,b)}function e(a,b){a.off(n,(0,m["default"])(b)),k.disable(a,b)}function f(a,b,c){c===!0?d(a,b):e(a,b)}var g=a("babel-runtime/core-js/object/keys")["default"],h=a("babel-runtime/helpers/interop-require-wildcard")["default"],i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("./iconCssUtil"),k=h(j),l=a("./toButtonClass"),m=i(l),n="click";c["default"]=function(a,b,c){g(c).filter(function(a){return b[a]}).forEach(function(b){return f(a,b,c[b])})},b.exports=c["default"]},{"./iconCssUtil":203,"./toButtonClass":206,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],209:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("events");c["default"]=function(){var a=-1,b=-1,c=[],e=function(){return b>-1},f=function(){return b<c.length-1},g=function(){return b!==a},h=new d.EventEmitter,i=function(){h.emit("change",{hasAnythingToSave:g(),hasAnythingToUndo:e(),hasAnythingToRedo:f()})};return _.extend(h,{reset:function(){a=-1,b=-1,c=[],i()},push:function(a){c.splice(b+1,c.length-b,a),b++,i()},next:function(){return b++,i(),c[b]},prev:function(){var a=c[b];return b--,i(),a},saved:function(){a=b,i()},hasAnythingToSave:g,hasAnythingToUndo:e,hasAnythingToRedo:f})},b.exports=c["default"]},{events:109}],210:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../../../idFactory"),f=d(e),g=a("./ModelContainer"),h=d(g),i=function(a,b){return{id:b.id,span:f["default"].makeSpanId(a,b.span),type:b.obj}},j=function(a,b){return b=b||[],b.map(_.partial(i,a))},k=function(a,b,c){var d=new h["default"](b,"entity",_.partial(j,a),"T"),e=_.compose(d.add,function(a){if(a.span)return a;throw new Error("entity has no span! "+JSON.stringify(a))}),f=function(a){return c.all().filter(function(b){return b.obj===a||b.subj===a}).map(function(a){return a.id})},g=_.extend(d,{add:e,assosicatedRelations:f});return g};b.exports=k},{"../../../idFactory":243,"./ModelContainer":211,"babel-runtime/helpers/interop-require-default":18}],211:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/keys")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"],f=a("./getNextId"),g=e(f),h='Set the mappingFunction by the constructor to use the method "ModelContainer.setSource".';b.exports=function(a,b,c,e){var f={},i=function(){return d(f)},j=_.partial(g["default"],e?e:b.charAt(0).toUpperCase()),k=function(a){return a.id=a.id||j(i()),f[a.id]=a,a},l=function(a){a&&(a.sort(function(a,b){return a.id?b.id?a.id<b.id?-1:a.id>b.id?1:0:-1:1}),a.forEach(k))},m=function(a){return f[a]},n=function(){return _.map(f,_.identity)},o=function(){f={}};return{name:b,addSource:function(a){if(!_.isFunction(c))throw new Error(h);l(c(a))},add:function(c,d){var e=k(c);return _.isFunction(d)&&d(),a.emit(b+".add",e),e},get:m,all:n,some:function(){return _.some(f)},types:function(){return n().map(function(a){return a.type})},changeType:function(c,d){var e=m(c);return e.type=d,a.emit(b+".change",e),e},remove:function(c){var d=f[c];return d&&(delete f[c],a.emit(b+".remove",d)),d},clear:o}}},{"./getNextId":214,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18}],212:[function(a,b,c){"use strict";var d=a("../../../idFactory"),e=a("./ModelContainer");b.exports=function(a,b){var c=function(b){b=b||[];var c=0;return b.split("\n").map(function(b,e){var f={id:d.makeParagraphId(a,e),begin:c,end:c+b.length,text:b,order:e};return c+=b.length+1,f})},f=new e(b,"paragraph",c),g=f.all,h=_.extend(f,{getBelongingTo:function(a){var b=f.all().filter(function(b){return a.begin>=b.begin&&a.end<=b.end});if(0===b.length)throw new Error("span should belong to any paragraph.");return b[0]},all:function(){var a=g();return a.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),a}});return h}},{"../../../idFactory":243,"./ModelContainer":211}],213:[function(a,b,c){"use strict";function d(a,b,c,d){if(!d)return!1;var e=h["default"].makeSpanId(a,d);if(!b.get(e))throw new Error("maybeParent is removed. "+d.toStringOnlyThis());return d.begin<=c.begin&&c.end<=d.end}function e(a,b){return"span "+a.begin+":"+a.end+":"+b.sourceDoc.substring(a.begin,a.end)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../../idFactory"),h=f(g),i=a("./ModelContainer"),j=f(i),k=a("../parseAnnotation/validateAnnotation");c["default"]=function(a,b,c){var f=function(){var d={toStringOnlyThis:function(){return e(this,b)},toString:function(a){a=a||1;var b=this.children&&this.children.length>0?"\n"+this.children.map(function(b){return new Array(a+1).join("	")+b.toString(a+1)}).join("\n"):"";return this.toStringOnlyThis()+b},getTypes:function(){var a=this.id;return b.entity.all().filter(function(b){return a===b.span}).reduce(function(a,b){var c=h["default"].makeTypeId(b.span,b.type),d=a.filter(function(a){return a.id===c});return d.length>0?d[0].entities.push(b.id):a.push({id:c,name:b.type,entities:[b.id]}),a},[])},getEntities:function(){return _.flatten(this.getTypes().map(function(a){return a.entities}))}};return function(b){return $.extend({},b,{id:h["default"].makeSpanId(a,b),paragraph:c.getBelongingTo(b)},d)}}(),g=function(a){return a=a||[],a.map(function(a){return a.span}).map(f).filter(function(a,b,c){return!(0,k.isBoundaryCrossingWithOtherSpans)(c.slice(0,b-1),a)})},i=new j["default"](b,"span",g),l=[],m=function(a,b){a.children.push(b),b.parent=a},n=function(b,c){for(var e=!0;e;){var f=b,g=c;if(e=!1,d(a,i,g,f))return f;if(!f.parent)return null;b=f.parent,c=g,e=!0}},o=function(){var a=i.all().sort(p),b=[];a.map(function(a,b,c){return $.extend(a,{parent:null,children:[],left:0!==b?c[b-1]:null,right:b!==c.length-1?c[b+1]:null})}).forEach(function(a){if(a.left){var c=n(a.left,a);c?m(c,a):b.push(a)}else b.push(a)}),b.toString=function(){return this.map(function(a){return a.toString()}).join("\n")},l=b},p=function(a,b){return a.begin-b.begin||b.end-a.end},q={add:function(a){if(a)return i.add(f(a),o);throw new Error("span is undefined.")},addSource:function(a){i.addSource(a),o()},get:function(a){return i.get(a)},all:i.all,range:function(a,b){var c=i.get(a),d=i.get(b);if(p(c,d)>0){var e=c;c=d,d=e}return i.all().filter(function(a){return c.begin<=a.begin&&a.end<=d.end}).map(function(a){return a.id})},topLevel:function(){return l},multiEntities:function(){return i.all().filter(function(a){var b=a.getTypes().filter(function(a){return a.entities.length>1});return b.length>0})},remove:function(a){var b=i.remove(a);return o(),b},clear:function(){i.clear(),l=[]}};return q},b.exports=c["default"]},{"../../../idFactory":243,"../parseAnnotation/validateAnnotation":229,"./ModelContainer":211,"babel-runtime/helpers/interop-require-default":18}],214:[function(a,b,c){"use strict";function d(a){var b=0===a.length?0:Math.max.apply(Math,h(a)),c=b+1;return c}function e(a,b){return a.filter(function(a){return f(b,a)}).map(g)}function f(a,b){var c=new RegExp("^"+a+"\\d+$");return c.test(b)}function g(a){return a.slice(1)}var h=a("babel-runtime/helpers/to-consumable-array")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=e(b,a),f=d(c);return a+f},b.exports=c["default"]},{"babel-runtime/helpers/to-consumable-array":21}],215:[function(a,b,c){"use strict";function d(a){return a.map(function(a){return{id:a.id,type:a.pred,subj:a.subj,obj:a.obj}})}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("events"),g=a("./ModelContainer"),h=e(g),i=a("./ParagraphContainer"),j=e(i),k=a("./SpanContainer"),l=e(k),m=a("./EntityContainer"),n=e(m);c["default"]=function(a){var b=new f.EventEmitter,c=new h["default"](b,"namespace",_.identity),e=new j["default"](a,b),g=new l["default"](a,b,e),i=new h["default"](b,"relation",d),k=new n["default"](a,b,i),m=new h["default"](b,"modification",_.identity);return _.extend(b,{namespace:c,sourceDoc:"",paragraph:e,span:g,entity:k,relation:i,modification:m})},b.exports=c["default"]},{"./EntityContainer":210,"./ModelContainer":211,"./ParagraphContainer":212,"./SpanContainer":213,"babel-runtime/helpers/interop-require-default":18,events:109}],216:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/assign")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./reset"),g=e(f),h=a("./toJson"),i=e(h),j=a("./Container"),k=e(j);c["default"]=function(a){var b=new k["default"](a);return d(b,{reset:function(a){return(0,g["default"])(b,a)},toJson:function(){return(0,i["default"])(b)},getModificationOf:function(a){return b.modification.all().filter(function(b){return b.obj===a})}})},b.exports=c["default"]},{"./Container":215,"./reset":237,"./toJson":239,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],217:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e),g=a("./translateDenotation"),h=d(g);c["default"]=function(a,b,c,d){(0,f["default"])([a,b],function(a){return(0,h["default"])(d,a)},c)},b.exports=c["default"]},{"./importSource":218,"./translateDenotation":223,"babel-runtime/helpers/interop-require-default":18}],218:[function(a,b,c){"use strict";b.exports=function(a,b,c){c&&(c=c.map(b)),a.forEach(function(a){a.addSource(c)})}},{}],219:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e),g=a("./translateModification"),h=d(g);c["default"]=function(a,b,c){(0,f["default"])([a],function(a){return(0,h["default"])(c,a)},b)},b.exports=c["default"]},{"./importSource":218,"./translateModification":224,"babel-runtime/helpers/interop-require-default":18}],220:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e);c["default"]=function(a,b){(0,f["default"])([a],function(a){return _.extend({},a)},b)},b.exports=c["default"]},{"./importSource":218,"babel-runtime/helpers/interop-require-default":18}],221:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e),g=a("./translateRelation"),h=d(g);c["default"]=function(a,b,c){(0,f["default"])([a],function(a){return(0,h["default"])(c,a)},b)},b.exports=c["default"]},{"./importSource":218,"./translateRelation":225,"babel-runtime/helpers/interop-require-default":18}],222:[function(a,b,c){"use strict";b.exports=function(a,b){return a.id?b+a.id:null}},{}],223:[function(a,b,c){"use strict";var d=a("./setIdPrefixIfExist");b.exports=function(a,b){return a=a||"",_.extend({},b,{id:d(b,a)})}},{"./setIdPrefixIfExist":222}],224:[function(a,b,c){"use strict";var d=a("./setIdPrefixIfExist");b.exports=function(a,b){return a=a||"",_.extend({},b,{id:d(b,a),obj:a+b.obj})}},{"./setIdPrefixIfExist":222}],225:[function(a,b,c){"use strict";var d=a("./setIdPrefixIfExist");b.exports=function(a,b){return a=a||"",_.extend({},b,{id:d(b,a),subj:a+b.subj,obj:a+b.obj})}},{"./setIdPrefixIfExist":222}],226:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validateAnnotation"),f=d(e),g=a("./importAnnotation/denotation"),h=d(g),i=a("./importAnnotation/relation"),j=d(i),k=a("./importAnnotation/modification"),l=d(k);c["default"]=function(a,b,c,d,e,g,i,k){var m=(0,f["default"])(g,e,i);return(0,h["default"])(a,b,m.accept.denotation,k),(0,j["default"])(c,m.accept.relation,k),(0,l["default"])(d,m.accept.modification,k),m.reject},b.exports=c["default"]},{"./importAnnotation/denotation":217,"./importAnnotation/modification":219,"./importAnnotation/relation":221,"./validateAnnotation":229,"babel-runtime/helpers/interop-require-default":18}],227:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.reduce(function(a,b){return a||b.hasError},!1)},b.exports=c["default"]},{}],228:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{accept:[],reject:a?a:[]}},b.exports=c["default"]},{}],229:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./main"),f=d(e),g=a("./Reject/hasError"),h=d(g),i=a("./isBoundaryCrossingWithOtherSpans"),j=d(i);c["default"]=f["default"],c.hasError=h["default"],c.isBoundaryCrossingWithOtherSpans=j["default"]},{"./Reject/hasError":227,"./isBoundaryCrossingWithOtherSpans":230,"./main":232,"babel-runtime/helpers/interop-require-default":18}],230:[function(a,b,c){"use strict";function d(a,b){var c=b.begin<a.begin&&a.begin<b.end&&b.end<a.end,d=a.begin<b.begin&&b.begin<a.end&&a.end<b.end;return c||d}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return a.filter(function(a){return d(b,a)}).length>0},b.exports=c["default"]},{}],231:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return b.dictionary?1===b.dictionary.filter(function(c){return c.id===a[b.property]}).length:!1},b.exports=c["default"]},{}],232:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validateDenotation"),f=d(e),g=a("./validateRelation"),h=d(g),i=a("./validateModificatian"),j=d(i);c["default"]=function(a,b,c){var d=(0,f["default"])(a,b,c.denotations),e=(0,h["default"])(d.accept,c.relations),g=(0,j["default"])(d.accept,e.accept,c.modifications);return{accept:{denotation:d.accept,relation:e.accept,modification:g.accept},reject:{denotationHasLength:d.reject.hasLength,denotationInText:d.reject.inText,denotationInParagraph:d.reject.inParagraph,denotationIsNotCrossing:d.reject.isNotCrossing,relationObj:e.reject.obj,relationSubj:e.reject.subj,modification:g.reject.modification,hasError:d.hasError||e.hasError||g.hasError}}},b.exports=c["default"]},{"./validateDenotation":234,"./validateModificatian":235,"./validateRelation":236,"babel-runtime/helpers/interop-require-default":18}],233:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){return a(d,b,e,f)?c.accept.push(d):c.reject.push(d),c}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./Reject"),g=e(f);c["default"]=function(a,b,c){return a?a.reduce(function(a,e,f,g){return d(b,c,a,e,f,g)},new g["default"]):new g["default"]},b.exports=c["default"]},{"./Reject":228,"babel-runtime/helpers/interop-require-default":18}],234:[function(a,b,c){"use strict";function d(a){return a.span.end-a.span.begin>0}function e(a,b){return a>=0&&a<=b.length}function f(a,b){return e(a.span.begin,b)&&e(a.span.end,b)}function g(a,b){return 1===b.all().filter(function(b){return b.begin<=a.span.begin&&a.span.end<=b.end}).length}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./validate"),j=h(i),k=a("./isBoundaryCrossingWithOtherSpans"),l=h(k);c["default"]=function(a,b,c){var e=(0,j["default"])(c,d),h=(0,j["default"])(e.accept,f,a),i=(0,j["default"])(h.accept,g,b),k=(0,j["default"])(i.accept,function(a,b,c,d){var e=d.slice(0,c).map(function(a){return a.span}),f=(0,l["default"])(e,a.span);return!f}),m=e.reject.length+h.reject.length+i.reject.length+k.reject.length;return{accept:k.accept,reject:{hasLength:e.reject,inText:h.reject,inParagraph:i.reject,isNotCrossing:k.reject},hasError:0!==m}},b.exports=c["default"]},{"./isBoundaryCrossingWithOtherSpans":230,"./validate":233,"babel-runtime/helpers/interop-require-default":18}],235:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validate"),f=d(e),g=a("./isContains"),h=d(g);c["default"]=function(a,b,c){var d=(0,f["default"])(c,h["default"],{property:"obj",dictionary:_.union(a,b)});return{accept:d.accept,reject:{modification:d.reject,hasError:0!==d.reject.length}}},b.exports=c["default"]},{"./isContains":231,"./validate":233,"babel-runtime/helpers/interop-require-default":18}],236:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validate"),f=d(e),g=a("./isContains"),h=d(g);c["default"]=function(a,b){var c=(0,f["default"])(b,h["default"],{property:"obj",dictionary:a}),d=(0,f["default"])(c.accept,h["default"],{property:"subj",dictionary:a}),e=c.reject.length+d.reject.length;return{accept:d.accept,reject:{obj:c.reject,subj:d.reject,hasError:0!==e}}},b.exports=c["default"]},{"./isContains":231,"./validate":233,"babel-runtime/helpers/interop-require-default":18}],237:[function(a,b,c){"use strict";function d(a,b){if(!b.text)return toastr.error("This is not a json file of anntations."),null;e(a);var c=(0,h["default"])(a,b);return a.emit("paragraph.change",a.paragraph.all()),a.emit("all.change",a,c.multitrack,c.rejects),c.rejects}function e(a){a.span.clear(),a.entity.clear(),a.relation.clear(),a.modification.clear(),a.paragraph.clear()}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var g=a("./setNewData"),h=f(g);b.exports=c["default"]},{"./setNewData":238,"babel-runtime/helpers/interop-require-default":18}],238:[function(a,b,c){"use strict";function d(a,b){a.addSource(b)}function e(a,b,c,d,e,f,g){if(!g.tracks)return[!1,[]];var h=g.tracks;delete g.tracks;var j=h.map(function(g,h){var j=h+1,k="track"+j+"_",l=(0,i["default"])(a,b,c,d,e,f,g,k);return l.name="Track "+j+" annotations.",l});return[!0,j]}function f(a,b){var c=e(a.span,a.entity,a.relation,a.modification,a.paragraph,b.text,b),d=(0,i["default"])(a.span,a.entity,a.relation,a.modification,a.paragraph,b.text,b);return d.name="Root annotations.",(0,k["default"])(a.namespace,b.namespaces),{multitrack:c[0],rejects:[d].concat(c[1])}}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./parseAnnotation"),i=g(h),j=a("./parseAnnotation/importAnnotation/namespace"),k=g(j);c["default"]=function(a,b){return d(a.paragraph,b.text),a.sourceDoc=b.text,a.config=b.config,f(a,b)},b.exports=c["default"]},{"./parseAnnotation":226,"./parseAnnotation/importAnnotation/namespace":220,"babel-runtime/helpers/interop-require-default":18}],239:[function(a,b,c){"use strict";function d(a){return a.entity.all().filter(function(b){return a.span.get(b.span)}).map(function(b){var c=a.span.get(b.span);return{id:b.id,span:{begin:c.begin,end:c.end},obj:b.type}})}function e(a){return a.relation.all().map(function(a){return{id:a.id,pred:a.type,subj:a.subj,obj:a.obj}})}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{denotations:d(a),relations:e(a),modifications:a.modification.all()}},b.exports=c["default"]},{}],240:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./AnnotationData"),f=d(e);c["default"]=function(a){var b=new f["default"](a);return{annotationData:b}},b.exports=c["default"]},{"./AnnotationData":216,"babel-runtime/helpers/interop-require-default":18}],241:[function(a,b,c){"use strict";function d(a,b){a.emit(b+".change")}function e(a,b,c,e){e.forEach?e.forEach(function(e){a.add(e),b.emit(c+".select",e),d(b,c)}):(a.add(e),b.emit(c+".select",e),d(b,c))}function f(a){return 1===a.size?a.values().next().value:null}function g(a,b,c,d){a.has(d)?h(a,b,c,d):e(a,b,c,d)}function h(a,b,c,e){a["delete"](e),b.emit(c+".deselect",e),d(b,c)}function i(a,b,c){0!==a.size&&(a.forEach(function(d){return h(a,b,c,d)}),d(b,c))}var j=a("babel-runtime/core-js/set")["default"],k=a("babel-runtime/core-js/array/from")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=new j;return{add:function(d){return e(c,a,b,d)},all:function(){return k(c.values())},has:function(a){return c.has(a)},some:function(){return c.size>0},single:function(){return f(c)},toggle:function(d){return g(c,a,b,d)},remove:function(d){return h(c,a,b,d)},clear:function(){return i(c,a,b)}}},b.exports=c["default"]},{"babel-runtime/core-js/array/from":2,"babel-runtime/core-js/set":13}],242:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/core-js/map")["default"],i=a("babel-runtime/core-js/get-iterator")["default"],j=a("babel-runtime/core-js/array/from")["default"],k=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var l=a("events"),m=a("./IdContainer"),n=k(m),o=a("../modelToId"),p=k(o),q=["span","entity","relation"],r=function(a){function b(a){var c=this;g(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.map=new h(q.map(function(a){return[a,new n["default"](c,a)]})),this.map.forEach(function(a,b){c[b]=a});var e=new h([["all.change",function(){return c.clear()}],["span.remove",function(a){return c.span.remove((0,p["default"])(a))}],["entity.remove",function(a){return c.entity.remove((0,p["default"])(a))}],["relation.remove",function(a){return c.relation.remove((0,p["default"])(a))}]]),f=!0,j=!1,k=void 0;try{for(var l,m=i(e);!(f=(l=m.next()).done);f=!0){var o=l.value;a.on(o[0],o[1])}}catch(r){j=!0,k=r}finally{try{!f&&m["return"]&&m["return"]()}finally{if(j)throw k}}}return e(b,a),f(b,[{key:"clear",value:function(){this.map.forEach(function(a){return a.clear()})}},{key:"some",value:function(){return j(this.map.values()).reduce(function(a,b){return a||b.some()},!1)}},{key:"add",value:function(a,b){console.assert(this[a]),this[a].add(b)}},{key:"selectEntity",value:function(a,b){a&&(b||this.clear(),this.entity.add(a.title))}},{key:"selectEntityLabel",value:function(a,b){if(a){var c=a.nextElementSibling,d=c.children;b||this.clear(),this.entity.add(j(d).map(function(a){return a.title}))}}},{key:"selectSingleSpanById",value:function(a){a&&(this.clear(),this.span.add(a))}},{key:"selectSpan",value:function(a,b){a&&(b?this.span.add(a.id):this.selectSingleSpanById(a.id))}}]),b}(l.EventEmitter);c["default"]=r,b.exports=c["default"]},{"../modelToId":245,"./IdContainer":241,"babel-runtime/core-js/array/from":2,"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/map":5,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18,events:109}],243:[function(a,b,c){"use strict";var d=[],e=function(a,b){return a+"__"+b},f=function(a,b,c){return e(a,b)+c},g="_";b.exports={makeSpanId:function(a,b){var c=e(a.editorId,"S");return c+b.begin+g+b.end},makeTypeId:function(a,b){return-1===d.indexOf(b)&&d.push(b),a+"-"+d.indexOf(b)},makeEntityDomId:function(a,b){return f(a.editorId,"E",b.replace(/[:.]/g,""))},makeParagraphId:function(a,b){return f(a.editorId,"P",b)}}},{}],244:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("observ"),g=(d(f),a("../component/DataAccessObject")),h=d(g),i=a("../buttonModel/ButtonController"),j=d(i),k=a("../buttonModel/Writable"),l=d(k),m=a("./Model"),n=d(m),o=a("./Selection"),p=d(o),q=a("./History"),r=d(q),s=a("./observe"),t=e(s),u=a("./start"),v=d(u),w=a("events"),x="There is a change that has not been saved. If you procceed now, you will lose it.";c["default"]=function(){var a=new n["default"](this).annotationData,b=new p["default"](a),c=new r["default"],d={clipBoard:[]},e=new j["default"](this,a,b,d),f=new h["default"](this,x),g=new l["default"];return t.observeModelChange(a,c,g),t.observeHistoryChange(c,e.buttonStateHelper,x,g),t.observeDataSave(f,c,g),this.api={start:function(h){return(0,v["default"])(h,f,c,e,a,b,d,g)}},this.eventEmitter=new w.EventEmitter,this},b.exports=c["default"]},{"../buttonModel/ButtonController":167,"../buttonModel/Writable":169,"../component/DataAccessObject":176,"./History":209,"./Model":240,"./Selection":242,"./observe":246,"./start":417,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,events:109,observ:142}],245:[function(a,b,c){"use strict";function d(a){return a.id}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],246:[function(a,b,c){"use strict";function d(a,b,c){a.on("all.change",function(a,c,d){b.reset(),(0,i["default"])(self,d)})}function e(a,b,c,d){a.on("change",function(a){b.enabled("undo",a.hasAnythingToUndo),b.enabled("redo",a.hasAnythingToRedo),window.onbeforeunload=a.hasAnythingToSave?function(){return c}:null,d.update(a.hasAnythingToSave)})}function f(a,b,c){a.on("save",function(){b.saved(),c.forceModified(!1),toastr.success("annotation saved")}).on("save error",function(){toastr.error("could not save")})}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.observeModelChange=d,c.observeHistoryChange=e,c.observeDataSave=f;var h=a("../component/showVilidationDialog"),i=g(h)},{"../component/showVilidationDialog":201,"babel-runtime/helpers/interop-require-default":18}],247:[function(a,b,c){"use strict";function d(a,b,c){a.has(b)&&a.get(b)(c)}function e(a,b,c){return new g([["A",a.redo],["B",b.event.toggleDetectBoundaryMode],["C",b.event.copyEntities],["D",b.event.removeSelectedElements],["DEL",b.event.removeSelectedElements],["E",b.event.createEntity],["F",b.event.toggleInstaceRelation],["I",c.showAccess],["M",b.event.toggleInstaceRelation],["Q",b.event.showPallet],["R",b.event.replicate],["S",b.event.speculation],["U",c.showSave],["V",b.event.pasteEntities],["W",b.event.changeLabel],["X",b.event.negation],["Y",a.redo],["Z",a.undo],["ESC",b.event.cancelSelect],["LEFT",b.event.selectLeft],["RIGHT",b.event.selectRight],["UP",b.event.selectUp],["DOWN",b.event.selectDown]])}function f(a,b,c,d,e){return new g([["textae.control.button.view.click",b.event.toViewMode],["textae.control.button.term.click",b.event.toTermMode],["textae.control.button.relation.click",b.event.toRelationMode],["textae.control.button.simple.click",b.event.toggleSimpleMode],["textae.control.button.read.click",c.showAccess],["textae.control.button.write.click",c.showSave],["textae.control.button.undo.click",a.undo],["textae.control.button.redo.click",a.redo],["textae.control.button.replicate.click",b.event.replicate],["textae.control.button.replicate_auto.click",d.modeAccordingToButton["replicate-auto"].toggle],["textae.control.button.boundary_detection.click",b.event.toggleDetectBoundaryMode],["textae.control.button.entity.click",b.event.createEntity],["textae.control.button.change_label.click",b.event.changeLabel],["textae.control.button.pallet.click",b.event.showPallet],["textae.control.button.negation.click",b.event.negation],["textae.control.button.speculation.click",b.event.speculation],["textae.control.button.delete.click",b.event.removeSelectedElements],["textae.control.button.copy.click",b.event.copyEntities],["textae.control.button.paste.click",b.event.pasteEntities],["textae.control.button.setting.click",b.event.showSettingDialog],["textae.control.button.line_height.click",e]])}var g=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,g,h,i){var j=new e(a,b,c),k=new f(a,b,c,g,i);return{handleKeyInput:function(a,b){return d(j,a,b)},handleButtonClick:function(a,b){return d(k,a,b)},redraw:function(){h.updateDisplay().then(h.updateDisplay)},updateButtons:g.buttonStateHelper.propagate}},b.exports=c["default"]},{"babel-runtime/core-js/map":5}],248:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/create-class")["default"],e=a("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(b){e(this,a),this.execute=b}return d(a,[{key:"execute",value:function(){}},{key:"revert",value:function(){}}]),a}();c["default"]=f,b.exports=c["default"]},{"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15}],249:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/class-call-check")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{
value:!0});var h=a("./BaseCommand"),i=g(h),j=a("./commandLog"),k=g(j),l=function(a){function b(a,c,e,g){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){var d=a[c].get(e).type,f=a[c].changeType(e,g);this.revert=function(){return new b(a,c,e,d)},(0,k["default"])("change type of a "+c+". oldtype:"+d+" "+c+":",f)})}return e(b,a),b}(i["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand":248,"./commandLog":252,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],250:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/class-call-check")["default"],g=a("babel-runtime/core-js/object/assign")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./BaseCommand"),j=h(i),k=a("./commandLog"),l=h(k),m=function(a){function b(a,c,e){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){var d=a.getDefinedType(c),f=d.label;a.setDefinedType(g(d,{label:e})),this.revert=function(){return new b(a,c,f)},(0,l["default"])("change label of a type. id: "+c+", old label: "+f+", new label: "+e)})}return e(b,a),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"./BaseCommand":248,"./commandLog":252,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],251:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/class-call-check")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./BaseCommand"),i=g(h),j=a("./commandLog"),k=g(j),l=function(a){function b(a,c,e){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){a.setDefinedType({id:c,label:e}),this.revert=function(){return new m(a,c,e)},(0,k["default"])("create a new type. id: "+c+", label: "+e)})}return e(b,a),b}(i["default"]),m=function(a){function b(a,c,e){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){a.remove(c),this.revert=function(){return new l(a,c,e)},(0,k["default"])("remove a type. id: "+c)})}return e(b,a),b}(i["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand":248,"./commandLog":252,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],252:[function(a,b,c){"use strict";b.exports=function(a,b){b?console.log("[command.invoke]",a,b):console.log("[command.invoke]",a)}},{}],253:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/class-call-check")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./BaseCommand"),i=g(h),j=a("./commandLog"),k=g(j),l=function(a){function b(a,c,e,g,h){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){return h=a[e].add(h),g&&c.add(e,h.id),this.revert=function(){return new m(a,c,e,h.id)},(0,k["default"])("create a new "+e+": ",h),h})}return e(b,a),b}(i["default"]),m=function(a){function b(a,c,e,g){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){var b=a[e].remove(g);b?(this.revert=function(){return new l(a,c,e,!1,b)},(0,k["default"])("remove a "+e+": ",b)):(this.revert=function(){return{execute:function(){}}},(0,k["default"])("already removed "+e+": ",g))})}return e(b,a),b}(i["default"]);c.CreateCommand=l,c.RemoveCommand=m},{"./BaseCommand":248,"./commandLog":252,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],254:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f),h=a("./relationAndAssociatesRemoveCommand"),i=d(h);c["default"]=function(a,b,c){var d=function(c){return new e.RemoveCommand(a,b,"entity",c)},f=d(c),h=a.entity.assosicatedRelations(c).map(function(c){return(0,i["default"])(a,b,c)}),j=a.getModificationOf(c).map(function(a){return a.id}).map(function(c){return new e.RemoveCommand(a,b,"modification",c)}),k=h.concat(j).concat(f);return{execute:function(){(0,g["default"])("entity",this,"remove",c,k)}}},b.exports=c["default"]},{"./commandTemplate":253,"./executeCompositCommand":257,"./relationAndAssociatesRemoveCommand":260,"babel-runtime/helpers/interop-require-default":18}],255:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./ChangeTypeCommand"),g=d(f),h=a("./executeCompositCommand"),i=d(h);c["default"]=function(a,b,c,d,f){var h=new g["default"](a,"entity",c,d),j=f?a.entity.assosicatedRelations(c).map(function(c){return new e.RemoveCommand(a,b,"relation",c)}).concat(h):[h];return{execute:function(){(0,i["default"])("entity",this,"change",c,j)}}},b.exports=c["default"]},{"./ChangeTypeCommand":249,"./commandTemplate":253,"./executeCompositCommand":257,"babel-runtime/helpers/interop-require-default":18}],256:[function(a,b,c){"use strict";function d(a,b){return b.map(function(b){var c=a.entity.get(b).span;return{id:b,span:c}}).reduce(function(a,b){var c=a[b.span]?a[b.span]:[];return c.push(b.id),a[b.span]=c,a},{})}var e=a("babel-runtime/core-js/object/keys")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./spanRemoveCommand"),h=f(g),i=a("./entityAndAssociatesRemoveCommand"),j=f(i);c["default"]=function(a,b,c){var f=d(a,c);return _.flatten(e(f).map(function(b){var c=a.span.get(b),d=f[b],e=_.flatten(c.getTypes().map(function(a){return a.entities})),g=_.reject(e,function(a){return _.contains(d,a)});return{entities:d,spasId:b,noRestEntities:0===g.length}}).map(function(c){return c.noRestEntities?(0,h["default"])(a,b,c.spasId):c.entities.map(function(c){return(0,j["default"])(a,b,c)})}))},b.exports=c["default"]},{"./entityAndAssociatesRemoveCommand":254,"./spanRemoveCommand":263,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18}],257:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../invokeCommand"),f=d(e),g=a("./commandLog"),h=d(g),i=function(){var a=function(a,b){(0,h["default"])(a+b.commandType+" a "+b.modelType+": "+b.id)},b=_.partial(a,""),c=_.partial(a,"revert "),d=function(a,b){var d={execute:function(){f["default"].invokeRevert(a),c(b)}};return function(){return d}},e=function(a,b,c,e,f){var g={modelType:a,commandType:c,id:e};return b.revert=new d(f,g),g};return _.compose(b,e)}(),j=function(a,b,c,d,e){f["default"].invoke(e),i(a,b,c,d,e)};b.exports=j},{"../invokeCommand":266,"./commandLog":252,"babel-runtime/helpers/interop-require-default":18}],258:[function(a,b,c){"use strict";function d(a,b){for(var c=String.prototype.indexOf.bind(a,a.substring(b.begin,b.end)),d=b.end-b.begin,e=[],f=0,g=c(f);-1!==g;g=c(f))e.push({begin:g,end:g+d}),f=g+d;return e}function e(a,b,c){var d=a.charAt(c.begin-1),e=a.charAt(c.end);return b(d)&&b(e)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("not"),h=f(g),i=a("../../isAlreadySpaned"),j=f(i),k=a("../../../Model/AnnotationData/parseAnnotation/validateAnnotation");c["default"]=function(a,b,c){var f=a.span.all(),g=c?_.partial(e,a.sourceDoc,c):_.identity;return d(a.sourceDoc,b).filter(function(a){return a.begin!==b.begin}).filter(g).filter((0,h["default"])(_.partial(j["default"],f))).filter((0,h["default"])(_.partial(k.isBoundaryCrossingWithOtherSpans,f)))},b.exports=c["default"]},{"../../../Model/AnnotationData/parseAnnotation/validateAnnotation":229,"../../isAlreadySpaned":418,"babel-runtime/helpers/interop-require-default":18,not:141}],259:[function(a,b,c){"use strict";function d(a,b,c){var d=function(a){return new f.CreateCommand(b,c,"relation",!0,a)},e={spanCreateCommand:function(d,e){return(0,j["default"])(a,b,c,e,[d])},spanRemoveCommand:function(a){return(0,n["default"])(b,c,a)},spanMoveCommand:function(d,e){return(0,p["default"])(a,b,c,d,e)},spanReplicateCommand:function(d,e,f){return(0,l["default"])(a,b,c,d,e,f)},entityCreateCommand:function(a){return new f.CreateCommand(b,c,"entity",!0,a)},entityRemoveCommand:function(a){return(0,t["default"])(b,c,a)},entityChangeTypeCommand:function(a,d,e){return(0,r["default"])(b,c,a,d,e)},relationCreateCommand:d,relationRemoveCommand:function(a){return(0,v["default"])(b,c,a)},relationChangeTypeCommand:function(a,c){return new h["default"](b,"relation",a,c)},modificationCreateCommand:function(a){return new f.CreateCommand(b,c,"modification",!1,a)},modificationRemoveCommand:function(a){return new f.RemoveCommand(b,c,"modification",a)},typeCreateCommand:function(a,b,c){return new z["default"](a,b,c)},typeChangeLabelCommand:function(a,b,c){return new x["default"](a,b,c)}};return e}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("./commandTemplate"),g=a("./ChangeTypeCommand"),h=e(g),i=a("./spanAndTypesCreateCommand"),j=e(i),k=a("./spanReplicateCommand"),l=e(k),m=a("./spanRemoveCommand"),n=e(m),o=a("./spanMoveCommand"),p=e(o),q=a("./entityChangeTypeRemoveRelationCommand"),r=e(q),s=a("./entityRemoveAndSpanRemeveIfNoEntityRestCommand"),t=e(s),u=a("./relationAndAssociatesRemoveCommand"),v=e(u),w=a("./TypeChangeLabelCommand"),x=e(w),y=a("./TypeCreateCommand"),z=e(y);b.exports=c["default"]},{"./ChangeTypeCommand":249,"./TypeChangeLabelCommand":250,"./TypeCreateCommand":251,"./commandTemplate":253,"./entityChangeTypeRemoveRelationCommand":255,"./entityRemoveAndSpanRemeveIfNoEntityRestCommand":256,"./relationAndAssociatesRemoveCommand":260,"./spanAndTypesCreateCommand":261,"./spanMoveCommand":262,"./spanRemoveCommand":263,"./spanReplicateCommand":264,"babel-runtime/helpers/interop-require-default":18}],260:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f);c["default"]=function(a,b,c){var d=new e.RemoveCommand(a,b,"relation",c),f=a.getModificationOf(c).map(function(a){return a.id}).map(function(c){return new e.RemoveCommand(a,b,"modification",c)}),h=f.concat(d);return{execute:function(){(0,g["default"])("relation",this,"remove",c,h)}}},b.exports=c["default"]},{"./commandTemplate":253,"./executeCompositCommand":257,"babel-runtime/helpers/interop-require-default":18}],261:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f),h=a("../../../idFactory"),i=d(h);c["default"]=function(a,b,c,d,f){var h=function(a){return new e.CreateCommand(b,c,"span",!0,a)},j=function(a){return new e.CreateCommand(b,c,"entity",!0,a)},k=i["default"].makeSpanId(a,d),l=h(d),m=f.map(function(a){return j({span:k,type:a})}),n=[l].concat(m);return{execute:function(){(0,g["default"])("span",this,"create",k,n)}}},b.exports=c["default"]},{"../../../idFactory":243,"./commandTemplate":253,"./executeCompositCommand":257,"babel-runtime/helpers/interop-require-default":18}],262:[function(a,b,c){"use strict";function d(a,b,c,d,e){var g=function(a){return new f.CreateCommand(b,c,"span",!0,a)},i=function(a){return new f.CreateCommand(b,c,"entity",!0,a)},k=function(a){return new f.CreateCommand(b,c,"relation",!1,a)},m=h["default"].makeSpanId(a,e),n=b,o=[];return n.span.get(m)||(o.push((0,j["default"])(b,c,d)),o.push(g({begin:e.begin,end:e.end})),n.span.get(d).getTypes().forEach(function(a){a.entities.forEach(function(b){o.push(i({id:b,span:m,type:a.name})),o=o.concat(n.entity.assosicatedRelations(b).map(n.relation.get).map(function(a){return k(a)}))})})),{execute:function(){(0,l["default"])("span",this,"move",d,o)}}}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("./commandTemplate"),g=a("../../../idFactory"),h=e(g),i=a("./spanRemoveCommand"),j=e(i),k=a("./executeCompositCommand"),l=e(k);b.exports=c["default"]},{"../../../idFactory":243,"./commandTemplate":253,"./executeCompositCommand":257,"./spanRemoveCommand":263,"babel-runtime/helpers/interop-require-default":18}],263:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./entityAndAssociatesRemoveCommand"),g=d(f),h=a("./executeCompositCommand"),i=d(h);c["default"]=function(a,b,c){var d=new e.RemoveCommand(a,b,"span",c),f=_.flatten(a.span.get(c).getTypes().map(function(c){return c.entities.map(function(c){return(0,g["default"])(a,b,c)})})),h=f.concat(d);return{execute:function(){(0,i["default"])("span",this,"remove",c,h)}}},b.exports=c["default"]},{"./commandTemplate":253,"./entityAndAssociatesRemoveCommand":254,"./executeCompositCommand":257,"babel-runtime/helpers/interop-require-default":18}],264:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./spanAndTypesCreateCommand"),f=d(e),g=a("./getReplicationSpans"),h=d(g),i=a("./executeCompositCommand"),j=d(i);c["default"]=function(a,b,c,d,e,g){var i=function(d){return(0,f["default"])(a,b,c,d,e)},k=(0,h["default"])(b,d,g).map(i);return{execute:function(){(0,j["default"])("span",this,"replicate",d.id,k)}}},b.exports=c["default"]},{"./executeCompositCommand":257,"./getReplicationSpans":258,"./spanAndTypesCreateCommand":261,"babel-runtime/helpers/interop-require-default":18}],265:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./invokeCommand"),f=d(e),g=a("./Factory"),h=d(g);c["default"]=function(a,b,c,d){return{invoke:function(a){a&&a.length>0&&(f["default"].invoke(a),d.push(a))},undo:function(){d.hasAnythingToUndo()&&(c.clear(),a.focus(),f["default"].invokeRevert(d.prev()))},redo:function(){d.hasAnythingToRedo()&&(c.clear(),f["default"].invoke(d.next()))},factory:new h["default"](a,b,c)}},b.exports=c["default"]},{"./Factory":259,"./invokeCommand":266,"babel-runtime/helpers/interop-require-default":18}],266:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/create")["default"],e=function(a){a.forEach(function(a){a.execute()})},f=function(a){return a=d(a),a.reverse(),a.map(function(a){return a.revert()})},g=_.compose(e,f),h={invoke:e,invokeRevert:g};b.exports=h},{"babel-runtime/core-js/object/create":7}],267:[function(a,b,c){"use strict";function d(a,b,c,d){var f=d(),g=c.getConfig();a.showSave(JSON.stringify(e(f,b.toJson(),{config:g})),null,2)}var e=a("babel-runtime/core-js/object/assign")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,e,f){var g=function(){return a.showAccess(b.hasAnythingToSave())},h=function(){return d(a,c,e,f)};return{showAccess:g,showSave:h}},b.exports=c["default"]},{"babel-runtime/core-js/object/assign":6}],268:[function(a,b,c){"use strict";function d(a,b,c){return a[b]=c,c}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("capitalize"),g=e(f),h={instanceHide:0,instanceShow:2};c["default"]=function(){var a=_.extend({},h),b=function(b,c){return d(a,b,c)};return _.each(h,function(c,d){a["set"+(0,g["default"])(d)]=function(a){return b(d,a)}}),a},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,capitalize:23}],269:[function(a,b,c){"use strict";function d(a,b,c,d){a?c.setInstanceShow(d):c.setInstanceHide(d),e(a,b,c)}function e(a,b,c){a?b.set(c.instanceShow):b.set(c.instanceHide)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./TypeGapCache"),h=f(g),i=a("../EditMode/event"),j=f(i);c["default"]=function(a,b){var c=!0,f=new h["default"];return b.on(j["default"].SHOW,function(b){c=!0,e(c,a,f)}).on(j["default"].HIDE,function(b){c=!1,e(c,a,f)}),{showInstance:function(){return c},changeTypeGap:function(b){return d(c,a,f,b)},getTypeGap:function(){return a()},notifyNewInstance:function(){c||toastr.success("an instance is created behind.")}}},b.exports=c["default"]},{"../EditMode/event":276,"./TypeGapCache":268,"babel-runtime/helpers/interop-require-default":18}],270:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("emitter-fsm"),f=d(e),g=a("./state"),h=d(g);c["default"]=function(){var a=new f["default"]({states:[h["default"].INIT,h["default"].TERM,h["default"].INSTANCE,h["default"].RELATION,h["default"].VIEW_TERM,h["default"].VIEW_INSTANCE]});return a.config(h["default"].INIT,{to:{exclude:[h["default"].RELATION]}}),a.config(h["default"].TERM,{from:{exclude:[h["default"].VIEW_INSTANCE]},to:{exclude:[h["default"].INIT,h["default"].VIEW_INSTANCE]}}),a.config(h["default"].INSTANCE,{from:{exclude:[h["default"].VIEW_TERM]},to:{exclude:[h["default"].INIT,h["default"].VIEW_TERM]}}),a.config(h["default"].RELATION,{from:{exclude:[h["default"].INIT]},to:{exclude:[h["default"].INIT,h["default"].VIEW_TERM]}}),a.config(h["default"].VIEW_TERM,{from:{exclude:[h["default"].INSTANCE,h["default"].RELATION]},to:{exclude:[h["default"].INIT,h["default"].INSTANCE]}}),a.config(h["default"].VIEW_INSTANCE,{from:{exclude:[h["default"].TERM]},to:{exclude:[h["default"].INIT,h["default"].TERM]}}),a},b.exports=c["default"]},{"./state":279,"babel-runtime/helpers/interop-require-default":18,"emitter-fsm":108}],271:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("events"),f=a("./setEditableStyle"),g=d(f),h=a("./ViewMode"),i=d(h),j=a("./event"),k=d(j),l="term",m="instance",n="relation";c["default"]=function(a,b,c,d,f){var h=new i["default"](a,b,c,f),j=new e.EventEmitter,o={toTerm:function(){j.emit(k["default"].HIDE),j.emit(k["default"].CHANGE,!0,l),d.editEntity(),h.setTerm(),(0,g["default"])(a,f,!0)},toInstance:function(){j.emit(k["default"].SHOW),j.emit(k["default"].CHANGE,!0,m),d.editEntity(),h.setInstance(),(0,g["default"])(a,f,!0)},toRelation:function(){j.emit(k["default"].SHOW),j.emit(k["default"].CHANGE,!0,n),d.editRelation(),h.setRelation(),(0,g["default"])(a,f,!0)},toViewTerm:function(){j.emit(k["default"].HIDE),j.emit(k["default"].CHANGE,!1,l),d.noEdit(),h.setTerm(),(0,g["default"])(a,f,!1)},toViewInstance:function(){j.emit(k["default"].SHOW),j.emit(k["default"].CHANGE,!1,m),d.noEdit(),h.setInstance(),(0,g["default"])(a,f,!1)}};return _.extend(j,o)},b.exports=c["default"]},{"./ViewMode":273,"./event":276,"./setEditableStyle":278,"babel-runtime/helpers/interop-require-default":18,events:109}],272:[function(a,b,c){"use strict";function d(a){switch(a.currentState){case l["default"].TERM:a.setState(l["default"].VIEW_TERM);break;case l["default"].INSTANCE:case l["default"].RELATION:a.setState(l["default"].VIEW_INSTANCE)}}function e(a,b){switch(a.currentState){case l["default"].RELATION:i(a,b);break;case l["default"].VIEW_INSTANCE:a.setState(l["default"].INSTANCE);break;case l["default"].VIEW_TERM:a.setState(l["default"].TERM)}}function f(a){switch(a.currentState){case l["default"].INSTANCE:a.setState(l["default"].TERM);break;case l["default"].VIEW_INSTANCE:a.setState(l["default"].VIEW_TERM);break;default:throw new Error("Invalid state: "+a.currentState)}}function g(a){switch(a.currentState){case l["default"].TERM:a.setState(l["default"].INSTANCE);break;case l["default"].VIEW_TERM:a.setState(l["default"].VIEW_INSTANCE);break;default:throw new Error("Invalid state: "+a.currentState)}}function h(a,b){switch(a.currentState){case l["default"].INSTANCE:a.setState(l["default"].RELATION);break;case l["default"].RELATION:i(a,b)}}function i(a,b){(0,n["default"])(b)?a.setState(l["default"].TERM):a.setState(l["default"].INSTANCE)}var j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("./state"),l=j(k),m=a("../isSimple"),n=j(m);c["default"]=function(a,b){return{toTerm:function(){return a.setState(l["default"].TERM)},toInstance:function(){return a.setState(l["default"].INSTANCE)},toViewTerm:function(){return a.setState(l["default"].VIEW_TERM)},toViewInstance:function(){return a.setState(l["default"].VIEW_INSTANCE)},pushView:function(){return d(a)},pushTerm:function(){return e(a,b)},pushRelation:function(){return a.setState(l["default"].RELATION)},pushSimple:function(){return f(a)},upSimple:function(){return g(a)},toggleInstaceRelation:function(){return h(a,b)}}},b.exports=c["default"]},{"../isSimple":335,"./state":279,"babel-runtime/helpers/interop-require-default":18}],273:[function(a,b,c){"use strict";function d(a,b){a.removeClass("textae-editor--term-mode").removeClass("textae-editor--instance-mode").removeClass("textae-editor--relation-mode").addClass("textae-editor--"+b+"-mode")}function e(a,b,c){a.removeListener("entity.select",b).removeListener("entity.deselect",b).removeListener("entity.change",b).removeListener("entity.change",c.updateByEntity)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../Selector"),h=f(g);c["default"]=function(a,b,c,f){var g=new h["default"](a,b),i=_.compose(f.updateByEntity,g.entityLabel.update),j={setTerm:function(){d(a,"term"),e(c,i,f),c.on("entity.select",i).on("entity.deselect",i).on("entity.change",f.updateByEntity)},setInstance:function(){d(a,"instance"),e(c,i,f),c.on("entity.select",i).on("entity.deselect",i).on("entity.change",f.updateByEntity)},setRelation:function(){d(a,"relation"),e(c,i,f)}};return j},b.exports=c["default"]},{"../../Selector":342,"babel-runtime/helpers/interop-require-default":18}],274:[function(a,b,c){"use strict";function d(a){return"enter:"+a}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./StateMachine"),g=e(f),h=a("./state"),i=e(h);c["default"]=function(a){var b=new g["default"];return b.on("transition",function(a){}).on(d(i["default"].TERM),a.toTerm).on(d(i["default"].INSTANCE),a.toInstance).on(d(i["default"].RELATION),a.toRelation).on(d(i["default"].VIEW_TERM),a.toViewTerm).on(d(i["default"].VIEW_INSTANCE),a.toViewInstance),b},b.exports=c["default"]},{"./StateMachine":270,"./state":279,"babel-runtime/helpers/interop-require-default":18}],275:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){a.enabled("view",!0),a.enabled("term",!0),a.enabled("relation",!0),a.enabled("simple",!0),a.enabled("setting",!0)},b.exports=c["default"]},{}],276:[function(a,b,c){b.exports={SHOW:"showInstance",HIDE:"hideInstance",CHANGE:"change"}},{}],277:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/assign")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("events"),g=a("./Transition"),h=e(g),i=a("./bindTransition"),j=e(i),k=a("./event"),l=e(k),m=a("./Trigger"),n=e(m),o=a("./enableButtonHasAnnotation"),p=e(o);c["default"]=function(a,b,c,e,g){var i=new f.EventEmitter,k=new h["default"](a,b,c,e,g),m=(0,j["default"])(k),o=new n["default"](m,b);return m.once("transition",function(){return(0,p["default"])(g)}),k.on(l["default"].SHOW,function(){return i.emit(l["default"].SHOW)}).on(l["default"].HIDE,function(){return i.emit(l["default"].HIDE)}).on(l["default"].CHANGE,e.cancelSelect).on(l["default"].CHANGE,function(a,b){return i.emit(l["default"].CHANGE,a,b)}),d(i,o),i},b.exports=c["default"]},{"./Transition":271,"./Trigger":272,"./bindTransition":274,"./enableButtonHasAnnotation":275,"./event":276,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18,events:109}],278:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){c?a.addClass("textae-editor--editable"):a.removeClass("textae-editor--editable")},b.exports=c["default"]},{}],279:[function(a,b,c){b.exports={INIT:"Init",TERM:"Term Centric",INSTANCE:"Instance / Relation",RELATION:"Relation Edit",VIEW_TERM:"View Term",VIEW_INSTANCE:"View Instance"}},{}],280:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/create-class")["default"],e=a("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(){e(this,a),this.typeContainer=null}return d(a,[{key:"changeLabelOfId",value:function(a,b){var c=this.typeContainer.getDefinedType(a);return c.id?c.id&&c.label!==b?this.command.factory.typeChangeLabelCommand(this.typeContainer,a,b):void 0:this.command.factory.typeCreateCommand(this.typeContainer,a,b)}},{key:"changeTypeOfSelectedElement",value:function(){}},{key:"getSelectedIdEditable",value:function(){return this.selectionModel?this.selectionModel.all():[]}},{key:"getSelectedType",value:function(){var a=this.selectionModel.single();return a?this.annotationData.get(a).type:""}},{key:"jsPlumbConnectionClicked",value:function(){}},{key:"getEditTarget",value:function(a){var b=this;return this.selectionModel.all().filter(function(c){return b.annotationData.get(c).type!==a})}}]),a}();c["default"]=f,b.exports=c["default"]},{"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15}],281:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("../DefaultHandler"),j=h(i),k=function(a){function b(a,c,e,f){g(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.typeContainer=a.entity,this.command=c,this.annotationData=e.entity,this.selectionModel=f.entity}return e(b,a),f(b,[{key:"changeTypeOfSelectedElement",value:function(a){var b=this;return this.getEditTarget(a).map(function(c){return b.command.factory.entityChangeTypeCommand(c,a,b.typeContainer.isBlock(a))})}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"../DefaultHandler":280,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],282:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,d){var e=function(a){return _.flatten(b.span.get(a).getTypes().filter(function(a){return d.entity.isBlock(a.name)}).map(function(a){return a.entities}))},f=function(b,d){c.span[b](d),a.find("#"+d).hasClass("textae-editor__span--block")&&e(d).forEach(c.entity[b])},g=_.partial(f,"add"),h=_.partial(f,"toggle");return function(a){var d=c.span.single(),e=a.target,f=e.id;a.shiftKey&&d?(c.clear(),b.span.range(d,f).forEach(function(a){g(a)})):a.ctrlKey||a.metaKey?h(f):(c.clear(),g(f))}},b.exports=c["default"]},{}],283:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getSelectionSnapShot"),f=d(e);c["default"]=function(a,b,c){var d=window.getSelection();d.isCollapsed?a():b.onText({spanConfig:c,selection:(0,f["default"])()})},b.exports=c["default"]},{"./getSelectionSnapShot":286,"babel-runtime/helpers/interop-require-default":18}],284:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return b.ctrlKey||b.metaKey?a.entity.toggle(b.target.title):(a.clear(),a.entity.add(b.target.title)),!1},b.exports=c["default"]},{}],285:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./selectEntities"),f=d(e);c["default"]=function(a,b){var c=b.target.previousElementSibling,d=b.target.children;return(0,f["default"])(a,b.ctrlKey||b.metaKey,c,d)},b.exports=c["default"]},{"./selectEntities":288,"babel-runtime/helpers/interop-require-default":18}],286:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var a=window.getSelection();return{anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset,range:a.getRangeAt(0)}},b.exports=c["default"]},{}],287:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../SelectEnd"),f=d(e),g=a("./spanClicked"),h=d(g),i=a("./SelectSpan"),j=d(i),k=a("./bodyClicked"),l=d(k),m=a("./typeLabelClicked"),n=d(m),o=a("./entityClicked"),p=d(o),q=a("./entityPaneClicked"),r=d(q),s=a("./EditEntityHandler"),t=d(s);c["default"]=function(a,b,c,d,e,g,i,k){var m=new f["default"](a,b,c,d,e,g),o=new j["default"](a,b,c,g),q=function(){a.on("mouseup",".textae-editor__body",function(){return(0,l["default"])(k,m,i)}).on("mouseup",".textae-editor__type",function(){return a.focus()}).on("mouseup",".textae-editor__span",function(a){return(0,h["default"])(i,m,o,a)}).on("mouseup",".textae-editor__type-label",function(a){return(0,n["default"])(c,a)}).on("mouseup",".textae-editor__entity-pane",function(a){return(0,r["default"])(c,a)}).on("mouseup",".textae-editor__entity",function(a){return(0,p["default"])(c,a)})};c.entity.all;return{init:q,handlers:new t["default"](g,d,b,c)}},b.exports=c["default"]},{"../../SelectEnd":311,"./EditEntityHandler":281,"./SelectSpan":282,"./bodyClicked":283,"./entityClicked":284,"./entityPaneClicked":285,"./spanClicked":289,"./typeLabelClicked":290,"babel-runtime/helpers/interop-require-default":18}],288:[function(a,b,c){"use strict";function d(a,b){var c=!0,d=!1,e=void 0;try{for(var g,h=f(b);!(c=(g=h.next()).done);c=!0){var i=g.value;a.entity.add(i.title)}}catch(j){d=!0,e=j}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw e}}}function e(a,b){var c=!0,d=!1,e=void 0;try{for(var g,h=f(b);!(c=(g=h.next()).done);c=!0){var i=g.value;a.entity.remove(i.title)}}catch(j){d=!0,e=j}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw e}}}var f=a("babel-runtime/core-js/get-iterator")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,f){return b?c.classList.contains("ui-selected")?e(a,f):d(a,f):(a.clear(),d(a,f)),!1},b.exports=c["default"]},{"babel-runtime/core-js/get-iterator":3}],289:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getSelectionSnapShot"),f=d(e);c["default"]=function(a,b,c,d){var e=window.getSelection();return e.isCollapsed?(c(d),!1):(b.onSpan({spanConfig:a,selection:(0,f["default"])()}),void d.stopPropagation())},b.exports=c["default"]},{"./getSelectionSnapShot":286,"babel-runtime/helpers/interop-require-default":18
}],290:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./selectEntities"),f=d(e);c["default"]=function(a,b){var c=b.target,d=b.target.nextElementSibling.children;return(0,f["default"])(a,b.ctrlKey||b.metaKey,c,d)},b.exports=c["default"]},{"./selectEntities":288,"babel-runtime/helpers/interop-require-default":18}],291:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("../DefaultHandler"),j=h(i),k=function(a){function b(a,c,e,f){g(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.typeContainer=a.relation,this.command=c,this.annotationData=e.relation,this.selectionModel=f.relation,this.clearAllSelection=function(){return f.clear()}}return e(b,a),f(b,[{key:"changeTypeOfSelectedElement",value:function(a){var b=this;return this.getEditTarget(a).map(function(c){return b.command.factory.relationChangeTypeCommand(c,a)})}},{key:"jsPlumbConnectionClicked",value:function(a,b){var c=a.getParameter("id");b.ctrlKey||b.metaKey?this.selectionModel.toggle(c):this.selectionModel.single()!==c&&(this.clearAllSelection(),this.selectionModel.add(c))}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"../DefaultHandler":280,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],292:[function(a,b,c){"use strict";function d(a,b,c,d){return a.entity.some()?e(a,b,c,d):(a.clear(),a.entity.add($(d.target).attr("title"))),!1}function e(a,b,c,d){var e=a.entity.all()[0],h=$(d.target).attr("title");e===h?a.entity.remove(e):(a.entity.add(h),f(b,e,h,c),g(d,a.entity,e,h))}function f(a,b,c,d){a.invoke([a.factory.relationCreateCommand({subj:b,obj:c,type:d.relation.getDefaultType()})])}function g(a,b,c,d){if(a.ctrlKey||a.metaKey)b.remove(d);else{if(a.shiftKey)return b.remove(c),b.add(d),!1;b.remove(c),b.remove(d)}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],293:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./entityClickedAtRelationMode"),f=d(e),g=a("./EditRelationHandler"),h=d(g);c["default"]=function(a,b,c,d,e,g){var i=function(){a.on("mouseup",".textae-editor__entity",function(b){var g=(0,f["default"])(c,d,e,b);return a.focus(),g}).on("mouseup",".textae-editor__relation, .textae-editor__relation__label",function(){return!1}).on("mouseup",".textae-editor__body",g)};return{init:i,handlers:new h["default"](e,d,b,c)}},b.exports=c["default"]},{"./EditRelationHandler":291,"./entityClickedAtRelationMode":292,"babel-runtime/helpers/interop-require-default":18}],294:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./EditRelation"),f=d(e),g=a("./EditEntity"),h=d(g),i=a("./unbindAllEventhandler"),j=d(i),k=a("./DefaultHandler"),l=d(k);c["default"]=function(a,b,c,d,e,g,i,k){var m=new l["default"],n=new f["default"](a,b,c,e,i,k),o=new h["default"](a,b,c,e,g,i,d,k);return{getHandler:function(){return m},start:{noEdit:function(){(0,j["default"])(a),m=new l["default"]},editEntity:function(){(0,j["default"])(a),o.init(),m=o.handlers},editRelation:function(){(0,j["default"])(a),n.init(),m=n.handlers}}}},b.exports=c["default"]},{"./DefaultHandler":280,"./EditEntity":287,"./EditRelation":293,"./unbindAllEventhandler":295,"babel-runtime/helpers/interop-require-default":18}],295:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.off("mouseup",".textae-editor__body").off("mouseup",".textae-editor__span").off("mouseup",".textae-editor__span_block").off("mouseup",".textae-editor__type-label").off("mouseup",".textae-editor__entity-pane").off("mouseup",".textae-editor__entity")},b.exports=c["default"]},{}],296:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=[a.factory.spanCreateCommand(b.entity.getDefaultType(),{begin:c.begin,end:c.end})];return d&&c.end-c.begin<=n&&g.push(a.factory.spanReplicateCommand({begin:c.begin,end:c.end},[b.entity.getDefaultType()],e?f.isDelimiter:null)),g}function e(a,b,c,d){var e=m.getBeginEnd(a,c),g=f(e,2),h=g[0],i=g[1];return{begin:b.backFromBegin(a.sourceDoc,h,d),end:b.forwardFromEnd(a.sourceDoc,i-1,d)+1}}var f=a("babel-runtime/helpers/sliced-to-array")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"],h=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("../../../../../Model/AnnotationData/parseAnnotation/validateAnnotation"),j=a("../../../../isAlreadySpaned"),k=g(j),l=a("../selectPosition"),m=h(l),n=100;c["default"]=function(a,b,c,f,g,h,j,l){var m=e(a,f,j,l);if(!(0,i.isBoundaryCrossingWithOtherSpans)(a.span.all(),m)&&!(0,k["default"])(a.span.all(),m)){var n=d(b,c,m,h,g,l);b.invoke(n)}},b.exports=c["default"]},{"../../../../../Model/AnnotationData/parseAnnotation/validateAnnotation":229,"../../../../isAlreadySpaned":418,"../selectPosition":312,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,"babel-runtime/helpers/sliced-to-array":20}],297:[function(a,b,c){"use strict";function d(a,b,c){return q.isAnchorInSelectedSpan(a,b,c)?b.span.single():f(c)?c.anchorNode.parentNode.id:void 0}function e(a,b,c,d,e,f,h){var i=g(b,d,e,f,h);return(0,k.isBoundaryCrossingWithOtherSpans)(b.span.all(),i)?void(0,m["default"])("A span cannot be expanded to make a boundary crossing."):void c.invoke((0,s["default"])(a,c,e,i))}function f(a){return a.anchorNode.parentNode.parentNode===a.focusNode.parentNode}function g(a,b,c,d,e){var f=o.getAnchorPosition(a,d),g=o.getFocusPosition(a,d);return h(a,b,c,f,g,e)}function h(a,b,c,d,e,f){var g=a.span.get(c);return d>e?{begin:b.backFromBegin(a.sourceDoc,e,f),end:g.end}:{begin:g.begin,end:b.forwardFromEnd(a.sourceDoc,e-1,f)+1}}var i=a("babel-runtime/helpers/interop-require-default")["default"],j=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("../../../../../Model/AnnotationData/parseAnnotation/validateAnnotation"),l=a("../deferAlert"),m=i(l),n=a("../selectPosition"),o=j(n),p=a("./isInSelected"),q=j(p),r=a("./moveSpan"),s=i(r);c["default"]=function(a,b,c,f,g,h,i){var j=d(b,c,h);j&&(c.clear(),e(a,b,f,g,j,h,i))},b.exports=c["default"]},{"../../../../../Model/AnnotationData/parseAnnotation/validateAnnotation":229,"../deferAlert":308,"../selectPosition":312,"./isInSelected":299,"./moveSpan":300,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],298:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../../spanAdjuster/delimiterDetectAdjuster"),g=d(f),h=a("../../../spanAdjuster/blankSkipAdjuster"),i=d(h),j=a("./create"),k=d(j),l=a("./expand"),m=d(l),n=a("./shrink"),o=e(n);c["default"]=function(a,b,c,d,e,f,h){var j=f?g["default"]:i["default"];return{create:function(a){c.clear(),(0,k["default"])(b,d,e,j,f,h,a.selection,a.spanConfig)},expand:function(e){return(0,m["default"])(a,b,c,d,j,e.selection,e.spanConfig)},shrinkCrossTheEar:function(e){return o.crossTheEar(a,b,c,d,j,e.selection,e.spanConfig)},shrinkPullByTheEar:function(e){return o.pullByTheEar(a,b,c,d,j,e.selection,e.spanConfig)}}},b.exports=c["default"]},{"../../../spanAdjuster/blankSkipAdjuster":337,"../../../spanAdjuster/delimiterDetectAdjuster":338,"./create":296,"./expand":297,"./shrink":304,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],299:[function(a,b,c){"use strict";function d(a,b,c){return f(a,b,i.getAnchorPosition(a,c))}function e(a,b,c){return f(a,b,i.getFocusPosition(a,c))}function f(a,b,c){var d=b.span.single();if(d){var e=a.span.get(d);return e.begin<c&&c<e.end}return!1}var g=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("../selectPosition"),i=g(h),j=a("../hasClass"),k=(g(j),a("../getParent"));g(k);c.isAnchorInSelectedSpan=d,c.isFocusInSelectedSpan=e},{"../getParent":309,"../hasClass":310,"../selectPosition":312,"babel-runtime/helpers/interop-require-wildcard":19}],300:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../../idFactory"),f=d(e);c["default"]=function(a,b,c,d){return c!==f["default"].makeSpanId(a,d)?[b.factory.spanMoveCommand(c,d)]:void 0},b.exports=c["default"]},{"../../../../../idFactory":243,"babel-runtime/helpers/interop-require-default":18}],301:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getTargetSpanWhenFocusNodeDifferentFromAnchorNode"),f=d(e),g=a("./shrinkSpanToSelectionAndSelectNextIfRemoved"),h=d(g);c["default"]=function(a,b,c,d,e,g,i){var j=(0,f["default"])(b,c,g);j&&(c.clear(),(0,h["default"])(a,b,d,e,j,g,i,c))},b.exports=c["default"]},{"./getTargetSpanWhenFocusNodeDifferentFromAnchorNode":302,"./shrinkSpanToSelectionAndSelectNextIfRemoved":307,"babel-runtime/helpers/interop-require-default":18}],302:[function(a,b,c){"use strict";function d(a){return a.anchorNode.parentNode===a.focusNode.parentNode.parentNode}var e=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../isInSelected"),g=e(f);c["default"]=function(a,b,c,e){return g.isFocusInSelectedSpan(a,b,c)?b.span.single():d(c)?c.focusNode.parentNode.id:e?e:void 0},b.exports=c["default"]},{"./../isInSelected":299,"babel-runtime/helpers/interop-require-wildcard":19}],303:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./../isInSelected"),f=d(e);c["default"]=function(a,b,c){return f.isFocusInSelectedSpan(a,b,c)?b.span.single():c.focusNode.parentElement.id},b.exports=c["default"]},{"./../isInSelected":299,"babel-runtime/helpers/interop-require-wildcard":19}],304:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./crossTheEar"),f=d(e),g=a("./pullByTheEar"),h=d(g);c.crossTheEar=f["default"],c.pullByTheEar=h["default"]},{"./crossTheEar":301,"./pullByTheEar":305,"babel-runtime/helpers/interop-require-default":18}],305:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getTargetSpanWhenFocusNodeSameWithAnchorNode"),f=d(e),g=a("./shrinkSpanToSelectionAndSelectNextIfRemoved"),h=d(g);c["default"]=function(a,b,c,d,e,g,i){var j=(0,f["default"])(b,c,g);j&&(c.clear(),(0,h["default"])(a,b,d,e,j,g,i,c))},b.exports=c["default"]},{"./getTargetSpanWhenFocusNodeSameWithAnchorNode":303,"./shrinkSpanToSelectionAndSelectNextIfRemoved":307,"babel-runtime/helpers/interop-require-default":18}],306:[function(a,b,c){"use strict";function d(a,b,c,d,e){var g=q.getAnchorPosition(a,d),h=q.getFocusPosition(a,d);return f(a,b,c,g,h,e)}function e(a,b){return[a.factory.spanRemoveCommand(b)]}function f(a,b,c,d,e,f){var g=a.span.get(c);return e>d?g.end===e?{begin:g.end,end:g.end}:{begin:b.forwardFromBegin(a.sourceDoc,e,f),end:g.end}:g.begin===e?{begin:g.begin,end:g.begin}:{begin:g.begin,end:b.backFromEnd(a.sourceDoc,e-1,f)+1}}var g=a("babel-runtime/helpers/interop-require-default")["default"],h=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("../../../../../../Model/AnnotationData/parseAnnotation/validateAnnotation"),j=a("../../deferAlert"),k=g(j),l=a("../../../../../../idFactory"),m=g(l),n=a("./../moveSpan"),o=g(n),p=a("../../selectPosition"),q=h(p);c["default"]=function(a,b,c,f,g,h,j){var l=d(b,f,g,h,j);if((0,i.isBoundaryCrossingWithOtherSpans)(b.span.all(),l))return(0,k["default"])("A span cannot be shrinked to make a boundary crossing."),!1;var n=m["default"].makeSpanId(a,l),p=b.span.get(n);return l.begin<l.end&&!p?(c.invoke((0,o["default"])(a,c,g,l)),!1):(c.invoke(e(c,g)),!0)},b.exports=c["default"]},{"../../../../../../Model/AnnotationData/parseAnnotation/validateAnnotation":229,"../../../../../../idFactory":243,"../../deferAlert":308,"../../selectPosition":312,"./../moveSpan":300,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],307:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./shrinkSpanToSelection"),f=d(e),g=a("../../../../../getNextElement");c["default"]=function(a,b,c,d,e,h,i,j){var k=document.querySelector("#"+e),l=(0,g.getRightElement)(a[0],k),m=(0,f["default"])(a,b,c,d,e,h,i);m&&l&&j.selectSingleSpanById(l.id)},b.exports=c["default"]},{"../../../../../getNextElement":415,"./shrinkSpanToSelection":306,"babel-runtime/helpers/interop-require-default":18}],308:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){requestAnimationFrame(function(){return alert(a)})},b.exports=c["default"]},{}],309:[function(a,b,c){"use strict";function d(a){return $(a.anchorNode.parentNode)}function e(a){return $(a.focusNode.parentNode)}Object.defineProperty(c,"__esModule",{value:!0}),c.getAnchorNodeParent=d,c.getFocusNodeParent=e},{}],310:[function(a,b,c){"use strict";function d(a){return a.hasClass("textae-editor__span")}function e(a){return a.hasClass("textae-editor__body__text-box__paragraph")}function f(a){return d(a)||e(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.hasSpan=d,c.hasParagraphs=e,c.hasSpanOrParagraphs=f},{}],311:[function(a,b,c){"use strict";function d(a,b,c){var d=j.validateOnText(b,c.spanConfig,c.selection);d&&(c.selection.anchorNode.parentNode.classList.contains("textae-editor__body__text-box__paragraph")?a.create(c):c.selection.anchorNode.parentNode.classList.contains("textae-editor__span")&&a.expand(c)),f()}function e(a,b,c){var d=j.validateOnSpan(b,c.spanConfig,c.selection);if(d)if(c.selection.anchorNode===c.selection.focusNode){var e=n.getAnchorPosition(b,c.selection),g=b.span.get(c.selection.anchorNode.parentElement.id);e===g.begin||e===g.end?a.shrinkPullByTheEar(c,c.selection.anchorNode.parentElement.id):a.create(c)}else c.selection.focusNode.parentElement.closest("#"+c.selection.anchorNode.parentElement.id)?a.shrinkCrossTheEar(c):c.selection.anchorNode.parentElement.closest("#"+c.selection.focusNode.parentElement.id)&&a.expand(c);f()}function f(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}var g=a("babel-runtime/helpers/interop-require-wildcard")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./selectionValidator"),j=g(i),k=a("./SpanEditor"),l=h(k),m=a("./selectPosition"),n=g(m);c["default"]=function(a,b,c,f,g,h){var i=null,j=null,k=function(){var k=g["boundary-detection"].value(),m=g["replicate-auto"].value(),n=new l["default"](a,b,c,f,h,k,m);i=function(a,b){return d(n,a,b)},j=function(a,b){return e(n,a,b)}};return k(),g["boundary-detection"].on("change",k),g["replicate-auto"].on("change",k),{onText:function(a){i&&i(b,a)},onSpan:function(a){j&&j(b,a)}}},b.exports=c["default"]},{"./SpanEditor":298,"./selectPosition":312,"./selectionValidator":314,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],312:[function(a,b,c){"use strict";function d(a,b){var c=g(a.paragraph,a.span,b.focusNode);return c+b.focusOffset}function e(a,b){var c=g(a.paragraph,a.span,b.anchorNode);return c+b.anchorOffset}function f(a,b){var c=e(a,b),f=d(a,b);return c>f?[f,c]:[c,f]}function g(a,b,c){return i(a,b,c).begin+h(c)}function h(a){for(var b=a.parentElement.childNodes,c=0,d=0;b[d]!==a;d++)c+="#text"===b[d].nodeName?b[d].nodeValue.length:b[d].textContent.length;return c}function i(a,b,c){var d=c.parentElement;if(d.classList.contains("textae-editor__body__text-box__paragraph"))return a.get(d.id);if(d.classList.contains("textae-editor__span"))return b.get(d.id);throw new Error("Can not get position of a node : "+c+" "+c.data)}Object.defineProperty(c,"__esModule",{value:!0}),c.getBeginEnd=f,c.getAnchorPosition=e,c.getFocusPosition=d},{}],313:[function(a,b,c){"use strict";function d(a,b,c){return(0,k["default"])(c)&&e(c)&&f(a,b,c)}function e(a){return m.hasSpanOrParagraphs(o.getAnchorNodeParent(a))}function f(a,b,c){if(!c)return!1;var d=q.getBeginEnd(a,c),e=g(d,2),f=e[0],h=e[1],i=a.sourceDoc.substring(f,h),j=b.removeBlankChractors(i);return j.length>0}var g=a("babel-runtime/helpers/sliced-to-array")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"],i=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var j=a("./showAlertIfOtherParagraph"),k=h(j),l=a("../hasClass"),m=i(l),n=a("../getParent"),o=i(n),p=a("../selectPosition"),q=i(p);b.exports=c["default"]},{"../getParent":309,"../hasClass":310,"../selectPosition":312,"./showAlertIfOtherParagraph":315,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,"babel-runtime/helpers/sliced-to-array":20}],314:[function(a,b,c){"use strict";function d(a,b,c){return f(c)&&(0,o["default"])(a,b,c)}function e(a,b,c){return g(c)&&(0,o["default"])(a,b,c)}function f(a){return k.hasParagraphs(m.getFocusNodeParent(a))}function g(a){return k.hasSpan(m.getFocusNodeParent(a))}var h=a("babel-runtime/helpers/interop-require-wildcard")["default"],i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("../hasClass"),k=h(j),l=a("../getParent"),m=h(l),n=a("./commonValidate"),o=i(n);c.validateOnText=d,c.validateOnSpan=e},{"../getParent":309,"../hasClass":310,"./commonValidate":313,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],315:[function(a,b,c){"use strict";function d(a){var b=e(a.anchorNode),c=e(a.focusNode);return b===c}function e(a){return a.parentElement.closest(".textae-editor__body__text-box__paragraph")}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../deferAlert"),h=f(g);c["default"]=function(a){return d(a)?!0:((0,h["default"])("It is ambiguous for which span you want to adjust the boundary. Select the span, and try again."),!1)},b.exports=c["default"]},{"../deferAlert":308,"babel-runtime/helpers/interop-require-default":18}],316:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../component/editIdDialog"),f=d(e);c["default"]=function(a,b,c){if(b().getSelectedIdEditable().length>0){var d=b().getSelectedType(),e=function(a,c){var d=[];if(c){var e=b().changeLabelOfId(a,c);e&&d.push(e)}a&&(d=d.concat(b().changeTypeOfSelectedElement(a)),b().command.invoke(d))};(0,f["default"])(a,d,b().typeContainer,e,c)}},b.exports=c["default"]},{"../../../../component/editIdDialog":195,"babel-runtime/helpers/interop-require-default":18}],317:[function(a,b,c){"use strict";function d(a,b){a.hide(),b.clear()}function e(a,b,c){a.getHandler().jsPlumbConnectionClicked&&!c.processedByTextae&&a.getHandler().jsPlumbConnectionClicked(b,c),c.processedByTextae=!0}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../../../component/Pallet"),h=f(g),i=a("./ElementEditor"),j=f(i),k=a("./changeLabelHandler"),l=f(k);c["default"]=function(a,b,c,f,g,i,k,m){var n=new j["default"](a,b,c,f,g,i,k,function(){return d(o,c)}),o=new h["default"](function(a){var b=n.getHandler().changeTypeOfSelectedElement(a);g.invoke(b)},function(b){n.getHandler().typeContainer.setDefaultType(b),a[0].focus()}),p={editRelation:n.start.editRelation,editEntity:n.start.editEntity,noEdit:n.start.noEdit,showPallet:function(b){a[0].querySelector(".textae-editor__type-pallet")||a[0].appendChild(o.el),o.show(n.getHandler().typeContainer,b.point)},hidePallet:o.hide,getTypeOfSelected:function(){return n.getHandler().getSelectedType()},changeLabel:function(){return(0,l["default"])(a,n.getHandler,m)},changeTypeOfSelectedElement:function(a){return n.getHandler().changeTypeOfSelectedElement(a)},cancelSelect:function(){return d(o,c)},jsPlumbConnectionClicked:function(a,b){return e(n,a,b)},getSelectedIdEditable:function(){return n.getHandler().getSelectedIdEditable()}};return p},b.exports=c["default"]},{"../../../../component/Pallet":180,"./ElementEditor":294,"./changeLabelHandler":316,"babel-runtime/helpers/interop-require-default":18}],318:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../changeEditMode"),g=d(f),h=a("./showLoadNoticeForEditableMode"),i=e(h),j=a("./updateWritable"),k=e(j);c["default"]=function(a,b,c,d){a.on("all.change",function(a,c,d){return(0,k["default"])(c,d,b)}).on("all.change",function(a,b){"edit"!==d?g.forView(c,a):((0,i["default"])(b),g.forEditable(c,a))})},b.exports=c["default"]},{"../changeEditMode":321,"./showLoadNoticeForEditableMode":319,"./updateWritable":320,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],319:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){a&&toastr.success("track annotations have been merged to root annotations.")},b.exports=c["default"]},{}],320:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("../../../Model/AnnotationData/parseAnnotation/validateAnnotation");c["default"]=function(a,b,c){c.forceModified(!1),a&&c.forceModified(!0),(0,d.hasError)(b)&&c.forceModified(!0)},b.exports=c["default"]},{"../../../Model/AnnotationData/parseAnnotation/validateAnnotation":229}],321:[function(a,b,c){"use strict";function d(a,b){(0,h["default"])(b)?a.toTerm():a.toInstance()}function e(a,b){(0,h["default"])(b)?a.toViewTerm():a.toViewInstance()}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.forEditable=d,c.forView=e;var g=a("./isSimple"),h=f(g)},{"./isSimple":335,"babel-runtime/helpers/interop-require-default":18}],322:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./setButtonState"),f=d(e);c["default"]=function(a,b,c){var d=!1,e=!1;a(function(a){d=a,c.buttonStateHelper.enabled("write",a&&e)}),b.on("change",function(a,b){return(0,f["default"])(c,a,b)}).on("change",function(a,b){e=a,a?c.buttonStateHelper.enabled("write",d):c.buttonStateHelper.enabled("write",!1)})},b.exports=c["default"]},{"./setButtonState":336,"babel-runtime/helpers/interop-require-default":18}],323:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=function(){d.clipBoard=_.uniq(function(){return _.flatten(c.span.all().map(function(a){return b.span.get(a).getEntities()}))}().concat(c.entity.all())).map(function(a){return b.entity.get(a).type})},f=function(){var b=_.flatten(c.span.all().map(function(b){return d.clipBoard.map(function(c){return a.factory.entityCreateCommand({span:b,type:c})})}));a.invoke(b)};return{copyEntities:e,pasteEntities:f}}},{}],324:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("events"),f=a("./replicate"),g=d(f),h=a("./createEntityToSelectedSpan"),i=d(h),j=function(a,b,c,d,f,h){var j=new e.EventEmitter,k=function(){(0,g["default"])(a,b,d,f,c.span.single(),h)},l=function(){(0,i["default"])(a,c.span.all(),h),j.emit("createEntity")};return _.extend(j,{replicate:k,createEntity:l})};b.exports=j},{"./createEntityToSelectedSpan":329,"./replicate":332,"babel-runtime/helpers/interop-require-default":18,events:109}],325:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{toViewMode:a.pushView,toTermMode:a.pushTerm,toRelationMode:a.pushRelation}},b.exports=c["default"]},{}],326:[function(a,b,c){"use strict";var d=a("./toggleModification");b.exports=function(a,b,c,e){return{negation:function(){d(a,b,c,"Negation",e)},speculation:function(){d(a,b,c,"Speculation",e)}}}},{"./toggleModification":333}],327:[function(a,b,c){"use strict";function d(a,b,c){var d=h(a,b,c);d()}function e(a,b,c){var d=i(a,b,c);d()}function f(a,b){var c=b.span.single();if(c)return void l(b,c);var d=k(a,u);return 1===d.length?void m(b,d[0]):void 0}function g(a,b){var c=k(a,u);if(1===c.length)return void n(b,c[0]);var d=k(a,w);return 1===d.length?void o(b,d[0]):void 0}function h(a,b,c){var d=function(b){return(0,q.getLeftElement)(a,b[0])};return j(a,b,c,d)}function i(a,b,c){var d=function(b){return(0,q.getRightElement)(a,b[b.length-1])};return j(a,b,c,d)}function j(a,b,c,d){var e=k(a,s);if(e.length){var f=function(){var a=d(e);return{v:function(){return b.selectSpan(a,c)}}}();if("object"==typeof f)return f.v}var g=k(a,u);if(g.length){var h=function(){var a=d(g);return{v:function(){return b.selectEntityLabel(a,c)}}}();if("object"==typeof h)return h.v}var i=k(a,w);if(i.length){var j=function(){var a=d(i);return{v:function(){return b.selectEntity(a,c)}}}();if("object"==typeof j)return j.v}return function(){}}function k(a,b){return a.querySelectorAll("."+b+".ui-selected")}function l(a,b){var c=document.querySelector("#G"+b);if(c){var d=c.querySelector("."+v),e=d.querySelector("."+u);a.selectEntityLabel(e)}}function m(a,b){var c=b.nextElementSibling;a.selectEntity(c.children[0])}function n(a,b){console.assert(b,"A label MUST exists.");var c=b.closest("."+t).id.substring(1);a.selectSingleSpanById(c)}function o(a,b){console.assert(b,"An entity MUST exists."),a.selectEntityLabel(b.parentNode.previousElementSibling)}var p=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var q=a("../../../getNextElement"),r=a("../../../getEntityDom"),s=(p(r),"textae-editor__span"),t="textae-editor__grid",u="textae-editor__type-label",v="textae-editor__type",w="textae-editor__entity";c["default"]=function(a,b){return{selectLeft:function(c){d(a,b,c.shiftKey)},selectRight:function(){var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(a,b,c.shiftKey)},selectUp:function(){f(a,b)},selectDown:function(){g(a,b)}}},b.exports=c["default"]},{"../../../getEntityDom":414,"../../../getNextElement":415,"babel-runtime/helpers/interop-require-default":18}],328:[function(a,b,c){"use strict";function d(a,b){a.simple.value()?b.upSimple():b.pushSimple()}function e(a){a["boundary-detection"].toggle()}function f(a){a.toggleInstaceRelation()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return{toggleSimpleMode:function(){return d(a,b)},toggleDetectBoundaryMode:function(){return e(a)},toggleInstaceRelation:function(){return f(b)}}},b.exports=c["default"]},{}],329:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=b.map(function(b){return a.factory.entityCreateCommand({span:b,type:c.getDefaultType()})});a.invoke(d)}},{}],330:[function(a,b,c){"use strict";function d(a,b,c,d){return[].concat(g(d,a),f(c,a),e(b,a))}function e(a,b){return a.map(b.factory.spanRemoveCommand)}function f(a,b){return b.factory.entityRemoveCommand(a)}function g(a,b){return a.map(b.factory.relationRemoveCommand)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=b.span.all(),e=b.entity.all(),f=b.relation.all();return d(a,c,e,f)},b.exports=c["default"]},{}],331:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./RemoveCommandsFromSelection"),f=d(e);c["default"]=function(a,b,c){var d=new f["default"](a,b);c.selectRight(),a.invoke(d)},b.exports=c["default"]},{"./RemoveCommandsFromSelection":330,"babel-runtime/helpers/interop-require-default":18}],332:[function(a,b,c){"use strict";function d(a,b){return a["boundary-detection"].value()?b.isDelimiter:null}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,e,f,g){var h=d(c,e),i=b.span.get(f);f?a.invoke([a.factory.spanReplicateCommand(i,i.getTypes().map(function(a){return a.name}),h)]):alert("You can replicate span annotation when there is only span selected.")},b.exports=c["default"]},{}],333:[function(a,b,c){"use strict";var d=function(a,b){return a.pred===b},e=function(a,b,c){return a.getModificationOf(b).filter(function(a){return d(a,c)})},f=function(a,b,c,d){return d.getSelectedIdEditable().map(function(d){var f=e(b,d,c)[0];return a.factory.modificationRemoveCommand(f.id)})},g=function(a,b,c,d){return _.reject(d.getSelectedIdEditable(),function(a){return e(b,a,c).length>0}).map(function(b){return a.factory.modificationCreateCommand({obj:b,pred:c})})},h=function(a,b,c,d,e){return e?f(a,b,c,d):g(a,b,c,d)},i=function(a,b,c,d,e){var f=c[d.toLowerCase()].value(),g=h(a,b,d,e,f);a.invoke(g)};b.exports=i},{}],334:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/assign")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../../component/SettingDialog"),g=e(f),h=a("./TypeEditor"),i=e(h),j=a("./EditMode"),k=e(j),l=a("./DisplayInstance"),m=e(l),n=a("./handlers/ClipBoardHandler"),o=e(n),p=a("./handlers/DefaultEntityHandler"),q=e(p),r=a("./handlers/removeSelectedElements"),s=e(r),t=a("./handlers/ModificationHandler"),u=e(t),v=a("./handlers/SelectHandler"),w=e(v),x=a("./handlers/ToggleButtonHandler"),y=e(x),z=a("./handlers/ModeButtonHandlers"),A=e(z),B=a("./enableSaveButtorAtEditable"),C=e(B),D=a("./bindModelChange"),E=e(D);c["default"]=function(a,b,c,e,f,h,j,l,n,p,r,t,v){function x(){a.eventEmitter.emit("textae.editor.select"),l.buttonStateHelper.propagate()}function z(){D.hidePallet(),a.eventEmitter.emit("textae.editor.unselect")}function B(){D.cancelSelect(),a.focus()}var D=new i["default"](a,b,c,h,f,l.modeAccordingToButton,p,t),F=new k["default"](a,b,c,D,l.buttonStateHelper),G=new m["default"](n,F),H=new q["default"](f,b,c,l.modeAccordingToButton,h,p.entity),I=new o["default"](f,b,c,j),J=new u["default"](f,b,l.modeAccordingToButton,D),K=new y["default"](l.modeAccordingToButton,F),L=new A["default"](F),M=new w["default"](a[0],c),N=new g["default"](a,G),O={editorSelected:x,editorUnselected:z,copyEntities:I.copyEntities,removeSelectedElements:function(){return(0,s["default"])(f,c,M)},createEntity:H.createEntity,showPallet:D.showPallet,replicate:H.replicate,pasteEntities:I.pasteEntities,changeLabel:D.changeLabel,cancelSelect:B,negation:J.negation,speculation:J.speculation,showSettingDialog:N};return d(O,M),d(O,K),d(O,L),(0,C["default"])(r,F,l),a.on("textae.editor.jsPlumbConnection.add",function(a,b){b.bindClickAction(D.jsPlumbConnectionClicked)}),H.on("createEntity",G.notifyNewInstance),
(0,E["default"])(b,r,F,v),{event:O}},b.exports=c["default"]},{"../../../component/SettingDialog":184,"./DisplayInstance":269,"./EditMode":277,"./TypeEditor":317,"./bindModelChange":318,"./enableSaveButtorAtEditable":322,"./handlers/ClipBoardHandler":323,"./handlers/DefaultEntityHandler":324,"./handlers/ModeButtonHandlers":325,"./handlers/ModificationHandler":326,"./handlers/SelectHandler":327,"./handlers/ToggleButtonHandler":328,"./handlers/removeSelectedElements":331,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],335:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return!a.relation.some()&&0===a.span.multiEntities().length},b.exports=c["default"]},{}],336:[function(a,b,c){"use strict";function d(a,b,c){a.modeAccordingToButton.view.value(e(b)),a.modeAccordingToButton.term.value(f(b,c)),a.modeAccordingToButton.relation.value(g(c)),a.modeAccordingToButton.simple.value(h(c)),a.buttonStateHelper.enabled("simple",!g(c)),a.buttonStateHelper.enabled("replicate-auto",i(b,c)),a.buttonStateHelper.enabled("boundary-detection",i(b,c)),a.buttonStateHelper.enabled("line-height",b)}function e(a){return!a}function f(a,b){return a&&("term"===b||"instance"===b)}function g(a){return"relation"===a}function h(a){return"term"===a}function i(a,b){return a&&"relation"!==b}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],337:[function(a,b,c){"use strict";var d=a("./skipBlank");b.exports={backFromBegin:function(a,b,c){return d.forward(a,b,c.isBlankCharacter)},forwardFromEnd:function(a,b,c){return d.back(a,b,c.isBlankCharacter)},forwardFromBegin:function(a,b,c){return d.forward(a,b,c.isBlankCharacter)},backFromEnd:function(a,b,c){return d.back(a,b,c.isBlankCharacter)}}},{"./skipBlank":339}],338:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./skipCharacters"),f=d(e),g=a("./skipBlank"),h=d(g),i=function(a,b){return[a.charAt(b),a.charAt(b-1)]},j=function(a,b){return[a.charAt(b),a.charAt(b+1)]},k=function(a,b,c){return(0,f["default"])(i,-1,a,b,function(a){return a[1]&&!c(a[0])&&!c(a[1])})},l=function(a,b,c){return(0,f["default"])(j,1,a,b,function(a){return a[1]&&!c(a[0])&&!c(a[1])})},m=function(a,b,c){return""!==c[0]&&!a(c[1])&&!b(c[1])||b(c[0])},n=function(a,b,c){return(0,f["default"])(i,1,a,b,c)},o=function(a,b,c){return(0,f["default"])(j,-1,a,b,c)},p=function(a,b,c){var d=h["default"].forward(a,b,c.isBlankCharacter),e=k(a,d,c.isDelimiter);return e},q=function(a,b,c){var d=h["default"].back(a,b,c.isBlankCharacter),e=l(a,d,c.isDelimiter);return e},r=function(a,b,c){var d=_.partial(m,c.isBlankCharacter,c.isDelimiter);return n(a,b,d)},s=function(a,b,c){var d=_.partial(m,c.isBlankCharacter,c.isDelimiter);return o(a,b,d)};b.exports={backFromBegin:p,forwardFromEnd:q,forwardFromBegin:r,backFromEnd:s}},{"./skipBlank":339,"./skipCharacters":340,"babel-runtime/helpers/interop-require-default":18}],339:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./skipCharacters"),f=d(e),g=function(a,b){return a.charAt(b)},h=function(a,b,c){return(0,f["default"])(g,1,a,b,c)},i=function(a,b,c){return(0,f["default"])(g,-1,a,b,c)};b.exports={forward:h,back:i}},{"./skipCharacters":340,"babel-runtime/helpers/interop-require-default":18}],340:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){for(;e(a(c,d));)d+=b;return d}},{}],341:[function(a,b,c){"use strict";function d(a){a&&a.deselect&&a.deselect()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=a.toConnect(b);d(c)},b.exports=c["default"]},{}],342:[function(a,b,c){"use strict";function d(a,b){var c=(0,p["default"])(a[0],b);if(c){var d=c.parentNode,e=d.previousElementSibling;d.children.length===d.querySelectorAll("."+q).length?(e.classList.add(q),d.classList.add(q)):(e.classList.remove(q),d.classList.remove(q))}}function e(a){return document.querySelector("#"+a)}function f(a,b){a.classList[b](q)}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("../../idFactory"),i=(g(h),a("../View/DomPositionCache")),j=g(i),k=a("./selectRelation"),l=g(k),m=a("./deselectRelation"),n=g(m),o=a("../getEntityDom"),p=g(o),q="ui-selected";c["default"]=function(a,b){var c=new j["default"](a,b.entity);return{span:{select:function(a){var b=e(a);f(b,"add"),b.focus()},deselect:function(a){var b=e(a);b&&(f(b,"remove"),b.blur())}},entity:{select:function(b){var c=(0,p["default"])(a[0],b);c&&(f(c,"add"),c.parentNode.previousElementSibling.focus())},deselect:function(b){var c=(0,p["default"])(a[0],b);c&&(f(c,"remove"),c.parentNode.previousElementSibling.blur())}},relation:{select:function(a){return(0,l["default"])(c,a)},deselect:function(a){return(0,n["default"])(c,a)}},entityLabel:{update:function(b){return d(a,b)}}}},b.exports=c["default"]},{"../../idFactory":243,"../View/DomPositionCache":353,"../getEntityDom":414,"./deselectRelation":341,"./selectRelation":343,"babel-runtime/helpers/interop-require-default":18}],343:[function(a,b,c){"use strict";function d(a){a&&a.select&&a.select()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=a.toConnect(b);d(c)},b.exports=c["default"]},{}],344:[function(a,b,c){"use strict";var d={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n",""],"non-edge characters":[" ","\n"]};b.exports=function(){var a=[],b=[],c=function(c){var e=_.extend({},d,c);return a=e["delimiter characters"],b=e["non-edge characters"],c},e=_.partial(c,d),f=function(b){return a.indexOf("ANY")>=0?1:a.indexOf(b)>=0},g=function(a){return b.indexOf(a)>=0},h=function(a){return b.forEach(function(b){a=a.replace(b,"")}),a};return{reset:e,set:c,isDelimiter:f,isBlankCharacter:g,removeBlankChractors:h}}},{}],345:[function(a,b,c){"use strict";function d(a,b){if(a){var c=function(){var c=a().concat(h(b.keys())).reduce(function(a,b){return a[b]=a[b]?a[b]+1:1,a},{}),d=i(c);return d.sort(function(a,b){var d=c[b]-c[a];return 0!==d?d:a>b?1:a>b?-1:0}),{v:d}}();if("object"==typeof c)return c.v}return[]}var e=a("babel-runtime/core-js/map")["default"],f=a("babel-runtime/core-js/object/assign")["default"],g=a("babel-runtime/core-js/get-iterator")["default"],h=a("babel-runtime/core-js/array/from")["default"],i=a("babel-runtime/core-js/object/keys")["default"],j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("events"),l=a("./defaultType"),m=j(l),n=a("../../uri"),o=j(n);c["default"]=function(a,b){var c=new e,h=m["default"],i=new k.EventEmitter,j={setDefinedType:function(a){c.set(a.id,a),i.emit("type.change",a.id)},setDefinedTypes:function(a){return c=new e(a.reduce(function(a,b){return a.push([b.id,b]),a},[]))},getDefinedType:function(a){return f({},c.get(a))},getDefinedTypes:function(){var a=[],b=!0,d=!1,e=void 0;try{for(var f,h=g(c.keys());!(b=(f=h.next()).done);b=!0){var i=f.value;a.push(c.get(i))}}catch(j){d=!0,e=j}finally{try{!b&&h["return"]&&h["return"]()}finally{if(d)throw e}}return a},setDefaultType:function(a){console.assert(a,"id is necessary!"),h=a},getDefaultType:function(){return h||d()[0]},getColor:function(a){return c.get(a)&&c.get(a).color||b},getLabel:function(a){return c.get(a)&&c.get(a).label||void 0},getUri:function(a){return o["default"].getUrlMatches(a)?a:void 0},getSortedIds:function(){return d(a,c)},remove:function(a){c["delete"](a),i.emit("type.change",a)}};return f(i,j)},b.exports=c["default"]},{"../../uri":419,"./defaultType":346,"babel-runtime/core-js/array/from":2,"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18,events:109}],346:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]="something",b.exports=c["default"]},{}],347:[function(a,b,c){"use strict";function d(a,b){if(void 0!==b){a.setDefinedTypes(b);var c=b.filter(function(a){return a["default"]===!0}).map(function(a){return a.id}).shift();a.setDefaultType(c||h["default"])}}var e=a("babel-runtime/core-js/object/assign")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./defaultType"),h=f(g),i=a("./Container"),j=f(i);c["default"]=function(a){var b=e(new j["default"](a.entity.types,"#77DDDD"),{isBlock:function(a){var c=b.getDefinedType(a);return c&&c.type&&"block"===c.type}}),c=new j["default"](a.relation.types,"#555555");return{entity:b,setDefinedEntityTypes:function(a){return d(b,a)},relation:c,setDefinedRelationTypes:function(a){return d(c,a)},getConfig:function(){return{"entity types":b.getDefinedTypes(),"relation types":c.getDefinedTypes()}}}},b.exports=c["default"]},{"./Container":345,"./defaultType":346,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],348:[function(a,b,c){"use strict";function d(a){return f.all(a.filter(function(a){return a.render}).map(function(a){return a.render()}))}var e=a("babel-runtime/core-js/object/assign")["default"],f=a("babel-runtime/core-js/promise")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./GridLayout"),i=g(h),j=a("events");c["default"]=function(a,b,c,f){var g=new j.EventEmitter,h=new i["default"](a,b,c),k=function(c){return g.emit("render.start",a),h.arrangePosition(c).then(function(){return d(b.relation.all())}).then(f).then(function(){return g.emit("render.end",a)})["catch"](function(a){return console.error(a,a.stack)})};return e(g,{update:k})},b.exports=c["default"]},{"./GridLayout":358,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18,events:109}],349:[function(a,b,c){"use strict";function d(a,b){var c=new j["default"];return e(a,c),function(a){return f(c,b,a)}}function e(a,b){a.push(b)}function f(a,b,c){return a.has(c)||a.set(c,b(c)),a.get(c)}function g(a){a.forEach(function(a){return a.clear()})}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./LesserMap"),j=h(i);c["default"]=function(){var a=[],b=function(b){return d(a,b)};return b.clearAllCache=function(){return g(a)},b},b.exports=c["default"]},{"./LesserMap":351,"babel-runtime/helpers/interop-require-default":18}],350:[function(a,b,c){"use strict";function d(a,b,c){var d=a.get(c).span;return b.get(d)}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./LesserMap"),g=e(f);c["default"]=function(a){var b=new g["default"];return _.extend(b,{isGridPrepared:function(c){return d(a,b,c)}})},b.exports=c["default"]},{"./LesserMap":351,"babel-runtime/helpers/interop-require-default":18}],351:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=["set","get","has","keys","delete","clear"];c["default"]=function(){var a=new d,b=e.reduce(function(b,c){return b[c]=d.prototype[c].bind(a),b},{});return b},b.exports=c["default"]},{"babel-runtime/core-js/map":5}],352:[function(a,b,c){"use strict";function d(a,b){var c=a[0].querySelector("#"+b);if(!c)throw new Error("span is not renderd : "+b);var d=c.getBoundingClientRect(),e=c.offsetParent.offsetParent.getBoundingClientRect();return{top:d.top-e.top,left:d.left-e.left,width:c.offsetWidth,height:c.offsetHeight,center:c.offsetLeft+c.offsetWidth/2}}function e(a,b,c,d){var e=(0,j["default"])(a[0],d);if(!e)throw new Error("entity is not rendered : "+d);var f=b.get(d).span,g=c.get(f);return{top:g.top+e.offsetTop,center:g.left+e.offsetLeft+e.offsetWidth/2}}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./CachedGetterFactory"),h=f(g),i=a("../../getEntityDom"),j=f(i),k=new h["default"];c["default"]=function(a,b,c){var f=k(function(b){return d(a,b)}),g=k(function(d){return e(a,b,c,d)});return{reset:k.clearAllCache,getSpan:f,getEntity:g}},b.exports=c["default"]},{"../../getEntityDom":414,"./CachedGetterFactory":349,"babel-runtime/helpers/interop-require-default":18}],353:[function(a,b,c){"use strict";function d(a,b){var c=new i["default"](b),d=new k["default"](a,b,c),g=new e(c),h=new f;return _.extend(d,g,h)}function e(a){return{gridPositionCache:a,getGrid:a.get,setGrid:a.set}}function f(){var a=new m["default"],b={connectCache:a,toConnect:function(b){return a.get(b)}};return b}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./GridPosition"),i=g(h),j=a("./SpanAndEntityPosition"),k=g(j),l=a("./LesserMap"),m=g(l);c["default"]=function(a,b){return a.postionCache=a.postionCache||d(a,b),a.postionCache},b.exports=c["default"]},{"./GridPosition":350,"./LesserMap":351,"./SpanAndEntityPosition":352,"babel-runtime/helpers/interop-require-default":18}],354:[function(a,b,c){"use strict";function d(a,b){return a&&a.top===b.top&&a.left===b.left?null:b}function e(a,b){var c=(0,k["default"])(a.id);c&&(c.style.top=b.top+"px",c.style.left=b.left+"px")}function f(a,b,c){a.setGrid(b.id,c)}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./getGridPosition"),i=g(h),j=a("./getGridOfSpan"),k=g(j),l=a("./showInvisibleGrid"),m=g(l);c["default"]=function(a,b,c,g,h){if(g.span.get(h.id)){var j=(0,i["default"])(a.getSpan,b,c,h);null!==d(a.getGrid(h.id),j)&&(e(h,j),f(a,h,j),(0,m["default"])(h))}},b.exports=c["default"]},{"./getGridOfSpan":356,"./getGridPosition":357,"./showInvisibleGrid":359,"babel-runtime/helpers/interop-require-default":18}],355:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/promise")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./arrangeGridPosition"),g=e(f);c["default"]=function(a,b,c,e,f){return new d(function(d,h){requestAnimationFrame(function(){try{(0,g["default"])(a,b,c,e,f),d()}catch(i){console.error(i,i.stack),h()}})})},b.exports=c["default"]},{"./arrangeGridPosition":354,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18}],356:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return document.querySelector("#G"+a)},b.exports=c["default"]},{}],357:[function(a,b,c){"use strict";function d(a,b){var c=a(b.id);return{top:c.top-$((0,j["default"])(b.id)).outerHeight(),left:c.left}}function e(a,b,c,d){var e=a(d.id),f=(0,h["default"])(d,b,c);return{top:e.top-f,left:e.left}}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../getHeightIncludeDescendantGrids"),h=f(g),i=a("./getGridOfSpan"),j=f(i);c["default"]=function(a,b,c,f){return 0===f.children.length?d(a,f):e(a,b,c,f)},b.exports=c["default"]},{"../getHeightIncludeDescendantGrids":404,"./getGridOfSpan":356,"babel-runtime/helpers/interop-require-default":18}],358:[function(a,b,c){"use strict";function d(a,b,c,d){return d.span.all().filter(function(a){return a.getTypes().length>0}).map(function(b){return a.getSpan(b.id),b}).map(function(e){return(0,j["default"])(a,b,c,d,e)})}var e=a("babel-runtime/core-js/promise")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../DomPositionCache"),h=f(g),i=a("./arrangeGridPositionPromise"),j=f(i);c["default"]=function(a,b,c){var f=new h["default"](a,b.entity),g=function(a){return f.reset(),e.all(d(f,c,a,b))};return{arrangePosition:g}},b.exports=c["default"]},{"../DomPositionCache":353,"./arrangeGridPositionPromise":355,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18}],359:[function(a,b,c){"use strict";function d(a){var b=(0,i["default"])(a.id);e(b)&&f(b)}function e(a){return a&&a.classList.contains("hidden")?a:void 0}function f(a){a.classList.remove("hidden")}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var h=a("./getGridOfSpan"),i=g(h);b.exports=c["default"]},{"./getGridOfSpan":356,"babel-runtime/helpers/interop-require-default":18}],360:[function(a,b,c){"use strict";function d(a,b,c,d){a.assosicatedRelations(d).map(b.toConnect).filter(function(a){return a.pointup&&a.pointdown}).forEach(c)}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./DomPositionCache"),g=e(f);c["default"]=function(a,b){var c=new g["default"](a,b);return{on:_.partial(d,b,c,function(a){return a.pointup()}),off:_.partial(d,b,c,function(a){return a.pointdown()})}},b.exports=c["default"]},{"./DomPositionCache":353,"babel-runtime/helpers/interop-require-default":18}],361:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=a.offsetWidth,c=Array.prototype.map.call(a.children,function(a){return a.offsetWidth}).reduce(function(a,b){return a+b},0);c>b?a.style.left=(b-c)/2+"px":a.style.left=null},b.exports=c["default"]},{}],362:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../Selector"),f=d(e),g=a("./createEntityUnlessBlock"),h=d(g),i=a("./removeEntityElement"),j=d(i),k=a("./removeNoEntityPaneElement"),l=d(k);c["default"]=function(a,b,c,d,e,g,i){var k=new f["default"](a,b),m=(0,j["default"])(a,i.id);(0,h["default"])(a,b.namespace,d,e,g,i),(0,l["default"])(m),c.entity.has(i.id)&&(k.entity.select(i.id),k.entityLabel.update(i.id))},b.exports=c["default"]},{"../../../Selector":342,"./createEntityUnlessBlock":365,"./removeEntityElement":369,"./removeNoEntityPaneElement":370,"babel-runtime/helpers/interop-require-default":18}],363:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../idFactory"),f=d(e),g=a("./getTypeElement"),h=d(g),i=a("./arrangePositionOfPane"),j=d(i),k=a("./createEntityElement"),l=d(k);c["default"]=function(a,b,c,d,e,g){g.type=String(g.type);var i=(0,h["default"])(b,c,d,g.span,g.type).find(".textae-editor__entity-pane"),k=f["default"].makeEntityDomId(a,g.id);0===i.find("#"+k).length&&(i.append((0,l["default"])(a,c,e,g)),(0,j["default"])(i[0]))},b.exports=c["default"]},{"../../../../idFactory":243,"./arrangePositionOfPane":361,"./createEntityElement":364,"./getTypeElement":367,"babel-runtime/helpers/interop-require-default":18}],364:[function(a,b,c){"use strict";function d(a,b,c,d){var e=document.createElement("div");return e.setAttribute("id",g["default"].makeEntityDomId(a,d.id)),e.setAttribute("title",d.id),e.setAttribute("type",d.type),e.classList.add("textae-editor__entity"),e.style.borderColor=b.getColor(d.type),c.getClasses(d.id).forEach(function(a){e.classList.add(a)}),e}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("../../../../idFactory"),g=e(f);b.exports=c["default"]},{"../../../../idFactory":243,"babel-runtime/helpers/interop-require-default":18}],365:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./create"),f=d(e);c["default"]=function(a,b,c,d,e,g){c.isBlock(g.type)||(0,f["default"])(a,b,c,d,e,g)},b.exports=c["default"]},{"./create":363,"babel-runtime/helpers/interop-require-default":18}],366:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../uri"),f=d(e);c["default"]=function(a){if(f["default"].isUri(a)){var b=f["default"].getUrlMatches(a);if(b)return b[9]?b[9].slice(1):b[6]?b[6]+(b[7]||""):b[5]&&b[5].length>1?b[5].split("/").filter(function(a){return""!==a}).pop():b[3]}return a},b.exports=c["default"]},{"../../../../uri":419,"babel-runtime/helpers/interop-require-default":18}],367:[function(a,b,c){"use strict";function d(a,b,c,d){var e=h["default"].makeTypeId(c,d),f=$("<div>").attr("id","P-"+e).addClass("textae-editor__entity-pane"),g=$("<div>").addClass("textae-editor__type-label").css({"background-color":b.getColor(d)});return g[0].setAttribute("tabindex",0),(0,l["default"])(g[0],a,b,d),$("<div>").attr("id",e).addClass("textae-editor__type").append(g).append(f)}function e(a,b){var c=document.querySelector("#G"+b);return c||a.render(b)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../../../idFactory"),h=f(g),i=a("../getTypeDom"),j=f(i),k=a("./setLabelToTypeLabel"),l=f(k);c["default"]=function(a,b,c,f,g){var h=(0,j["default"])(f,g);return 0===h.length&&(h=d(a,b,f,g),e(c,f).appendChild(h[0])),h},b.exports=c["default"]},{"../../../../idFactory":243,"../getTypeDom":399,"./setLabelToTypeLabel":371,"babel-runtime/helpers/interop-require-default":18}],368:[function(a,b,c){"use strict";function d(a,b,c,d){if(f(b,d.span))c.remove(d.span);else{var e=(0,t["default"])(a,d.id);(0,v["default"])(e)}return d}function e(a,b,c){var d=(0,n["default"])(a[0],c.id);b.update(d,c.id)}function f(a,b){return 0===a.span.get(b).getTypes().length}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("../ModificationRenderer"),i=g(h),j=a("./getDisplayName"),k=(g(j),a("../../../../uri")),l=(g(k),a("../../../../idFactory")),m=(g(l),a("../../../getEntityDom")),n=g(m),o=a("./createEntityUnlessBlock"),p=g(o),q=a("./changeTypeOfExists"),r=g(q),s=a("./removeEntityElement"),t=g(s),u=a("./removeNoEntityPaneElement"),v=g(u),w=a("./updateLabel"),x=g(w);c["default"]=function(a,b,c,f,g,h){var j=new i["default"](b);return{render:function(c){(0,p["default"])(a,b.namespace,f,g,j,c),h(c)},change:function(d){(0,r["default"])(a,b,c,f,g,j,d),h(d)},changeModification:function(b){return e(a,j,b)},remove:function(c){return d(a,b,g,c)},updateLabel:function(a){return(0,x["default"])(b,f,a)}}},b.exports=c["default"]},{"../../../../idFactory":243,"../../../../uri":419,"../../../getEntityDom":414,"../ModificationRenderer":375,"./changeTypeOfExists":362,"./createEntityUnlessBlock":365,"./getDisplayName":366,"./removeEntityElement":369,"./removeNoEntityPaneElement":370,"./updateLabel":372,"babel-runtime/helpers/interop-require-default":18}],369:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../getEntityDom"),f=d(e);c["default"]=function(a,b){var c=(0,f["default"])(a[0],b);if(c){var d=c.parentNode;return c.remove(),d}return null},b.exports=c["default"]},{"../../../getEntityDom":414,"babel-runtime/helpers/interop-require-default":18}],370:[function(a,b,c){"use strict";function d(a){if(a)if(a.children.length)(0,g["default"])(a);else{var b=a.parentNode,c=b.parentNode;b.remove(),c.children.length||c.remove()}}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("./arrangePositionOfPane"),g=e(f);b.exports=c["default"]},{"./arrangePositionOfPane":361,"babel-runtime/helpers/interop-require-default":18}],371:[function(a,b,c){"use strict";function d(a,b,c,d){var g=e(b,c,d),h=f(b,c,d);h?a.innerHTML='<a target="_blank"/ href="'+h+'">'+g+"</a>":a.innerHTML=g}function e(a,b,c){var d=g(a,c);return b.getLabel(c)?b.getLabel(c):j["default"].isUri(c)?(0,l["default"])(c):d?c.replace(d.prefix+":",""):c}function f(a,b,c){if(j["default"].isUri(c))return c;if(b.getUri(c))return b.getUri(c);if(a.some()){var d=g(a,c);if(d)return d.uri+c.replace(d.prefix+":","");var e=a.all().filter(function(a){return"_base"===a.prefix});if(1===e.length)return e[0].uri+c}return null}function g(a,b){var c=a.all(),d=c.filter(function(a){return"_base"!==a.prefix}).filter(function(a){return 0===b.indexOf(a.prefix+":")});return 1===d.length?d[0]:null}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var i=a("../../../../uri"),j=h(i),k=a("./getDisplayName"),l=h(k);b.exports=c["default"]},{"../../../../uri":419,"./getDisplayName":366,"babel-runtime/helpers/interop-require-default":18}],372:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../getTypeDom"),f=d(e),g=a("./setLabelToTypeLabel"),h=d(g);c["default"]=function(a,b,c){a.entity.all().filter(function(a){return a.type===c}).map(function(a){return(0,f["default"])(a.span,c)}).map(function(a){return a.find(".textae-editor__type-label")}).forEach(function(d){return(0,h["default"])(d[0],a.namespace,b,c)})},b.exports=c["default"]},{"../getTypeDom":399,"./setLabelToTypeLabel":371,"babel-runtime/helpers/interop-require-default":18}],373:[function(a,b,c){"use strict";function d(a,b,c,d){var f=b.getSpan(d),g=document.createElement("div");g.setAttribute("id","G"+d),g.classList.add("textae-editor__grid"),g.classList.add("hidden"),g.style.width=f.width+"px";var h=e(a,d);return h?c.insertBefore(g,h):c.appendChild(g),g}function e(a,b){var c=f(a,b),d=g(c,2),e=d[0],h=d[1];if(!e)return null;if(h)return h;for(;e;){var i=f(a,e.id),j=g(i,2);if(e=j[0],h=j[1])return h}}function f(a,b){var c=(0,k.getRightElement)(a,document.querySelector("#"+b));if(!c)return[null,null];var d=document.querySelector("#G"+c.id);return d?[c,d]:[c,null]}var g=a("babel-runtime/helpers/sliced-to-array")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./getAnnotationBox"),j=h(i),k=a("../../getNextElement");c["default"]=function(a,b){var c=(0,j["default"])(a);return{render:function(e){return d(a[0],b,c[0],e)},remove:function(a){var c=document.querySelector("#G"+a);c&&c.parentNode.removeChild(c),b.gridPositionCache["delete"](a)}}},b.exports=c["default"]},{"../../getNextElement":415,"./getAnnotationBox":396,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/sliced-to-array":20}],374:[function(a,b,c){"use strict";function d(a,b,c,d){b.on(c,function(b){d(b),a.emit(c)})}var e=a("babel-runtime/core-js/map")["default"],f=a("babel-runtime/core-js/get-iterator")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./renderParagraph"),i=g(h),j=a("./getAnnotationBox"),k=(g(j),a("./RenderAll")),l=g(k),m=a("./renderModification"),n=g(m),o=a("events"),p=a("../TypeStyle"),q=g(p),r=a("./SpanRenderer"),s=g(r),t=a("./GridRenderer"),u=g(t),v=a("./EntityRenderer"),w=g(v),x=a("./getTypeDom"),y=g(x),z=a("../../../modelToId");g(z);c["default"]=function(a,b,c,g,h,j,k,m){var p=new o.EventEmitter,r=new u["default"](h,a),t=function(a){return(0,y["default"])(a.span,a.type).css(new q["default"](g()))},v=new w["default"](h,j,k,m.entity,r,t),x=new s["default"](j,m.entity.isBlock,v.render);return function(g,h,j){var k=new l["default"](g,a,x,b),o=function(a){var b=h.span.get(a.span);return x.change(b)},q=function(a){(0,n["default"])(h,"relation",a,b,c),(0,n["default"])(h,"entity",a,v,c)},s=new e([["all.change",k],["paragraph.change",function(a){return(0,i["default"])(g,a)}],["span.add",x.render],["span.remove",function(a){x.remove(a),r.remove(a.id)}],["entity.add",function(a){o(a),v.render(a)}],["entity.change",function(a){v.change(a),o(a)}],["entity.remove",function(a){v.remove(a),o(a)}],["relation.add",function(a){b.render(a)}],["relation.change",b.change],["relation.remove",function(a){b.remove(a)}],["modification.add",q],["modification.remove",q]]),t=!0,u=!1,w=void 0;try{for(var y,z=f(s);!(t=(y=z.next()).done);t=!0){var A=y.value;d(p,h,A[0],A[1])}}catch(B){u=!0,w=B}finally{try{!t&&z["return"]&&z["return"]()}finally{if(u)throw w}}return m.entity.on("type.change",function(a){return v.updateLabel(a)}),p}},b.exports=c["default"]},{"../../../modelToId":245,"../TypeStyle":403,"./EntityRenderer":368,"./GridRenderer":373,"./RenderAll":384,"./SpanRenderer":392,"./getAnnotationBox":396,"./getTypeDom":399,"./renderModification":401,"./renderParagraph":402,"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/map":5,"babel-runtime/helpers/interop-require-default":18,events:109}],375:[function(a,b,c){"use strict";function d(a,b){return a.getModificationOf(b).map(function(a){return"textae-editor__"+a.pred.toLowerCase()})}function e(a,b,c){b.classList.remove("textae-editor__negation"),b.classList.remove("textae-editor__speculation"),d(a,c).forEach(function(a){return b.classList.add(a)})}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a){return{getClasses:function(b){return d(a,b)},update:function(b,c){return e(a,b,c)}}},b.exports=c["default"]},{}],376:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../DomPositionCache"),f=d(e);c["default"]=function(a,b,c){var d=new f["default"](a,b.entity),e=d.toConnect(c);if(!e)throw new Error("no connect for id: "+c);return e},b.exports=c["default"]},{"../../DomPositionCache":353,"babel-runtime/helpers/interop-require-default":18}],377:[function(a,b,c){b.exports={cssClass:"textae-editor__relation__label",id:"label"}},{}],378:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./LABEL"),f=d(e);c["default"]=function(a){var b=a.getOverlay(f["default"].id);if(!b)throw new Error("no label overlay");return b},b.exports=c["default"]},{"./LABEL":377,"babel-runtime/helpers/interop-require-default":18}],379:[function(a,b,c){"use strict";function d(a,b,c){c.map(function(c){return new i["default"](a,b,c)}).filter(function(a){return a instanceof jsPlumb.Connection}).forEach(function(a){return a.select()})}function e(a,b,c){c.map(function(c){return{connect:new i["default"](a,b,c.id),curviness:(0,k["default"])(a,b,c)}}).filter(function(a){return a.connect.setConnector&&a.connect.connector.getCurviness()!==a.curviness}).forEach(function(a){a.connect.setConnector(["Bezier",{curviness:a.curviness}]),m["default"].resetArrows(a.connect)})}var f=a("babel-runtime/core-js/promise")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./Connect"),i=g(h),j=a("./determineCurviness"),k=g(j),l=a("./jsPlumbArrowOverlayUtil"),m=g(l);c["default"]=function(a,b,c,g){return new f(function(f,h){requestAnimationFrame(function(){try{var i=b.relation.all().filter(function(a){return!a.removed}).filter(function(a){return void 0===a.render});e(a,b,i),g.repaintEverything(),d(a,b,c.relation.all()),f()}catch(j){h(j)}})})},b.exports=c["default"]},{"./Connect":376,"./determineCurviness":380,"./jsPlumbArrowOverlayUtil":382,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18}],380:[function(a,b,c){"use strict";function d(a){return{sourceId:a.subj,targetId:a.obj}}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../DomPositionCache"),g=e(f),h={xrate:.6,yrate:.05,offset:20};c["default"]=function(a,b,c){var e=new g["default"](a,b.entity),f=d(c),i=e.getEntity(f.sourceId),j=e.getEntity(f.targetId),k=i.center,l=j.center,m=i.top,n=j.top,o=Math.abs(k-l),p=Math.abs(m-n),q=o*h.xrate+p*h.yrate+h.offset;
return q/=2.4},b.exports=c["default"]},{"../../DomPositionCache":353,"babel-runtime/helpers/interop-require-default":18}],381:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=new n["default"](a,b,c.id);d.detach(f),e.connectCache["delete"](c.id),f.dead=!0,c.removed=!0}var e=a("babel-runtime/core-js/promise")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"],g=a("../ModificationRenderer"),h=f(g),i=a("../getAnnotationBox"),j=f(i),k=a("../../DomPositionCache"),l=f(k),m=a("./Connect"),n=f(m),o=a("./arrangePositionAll"),p=f(o),q=a("./determineCurviness"),r=f(q),s=a("./jsPlumbArrowOverlayUtil"),t=f(s),u=a("../../../getEntityDom"),v=f(u),w=a("./makeJsPlumbInstance"),x=f(w),y=a("./LabelOverlay"),z=f(y),A=a("./LABEL"),B=f(A),C=3;b.exports=function(a,b,c,f){var g=new h["default"](b),i=new l["default"](a,b.entity),k=function(){var a=function(a,b){var c=a.slice(1),d=parseInt(c.substr(0,2),16),e=parseInt(c.substr(2,2),16),f=parseInt(c.substr(4,2),16);return"rgba("+d+", "+e+", "+f+", 1)"};return function(c){var d=b.relation.get(c).type,e=f.relation.getColor(d);return{lineWidth:1,strokeStyle:a(e,1)}}}(),m=function(c){var d=c.relationId,e=new l["default"](a,b.entity);return e.connectCache.set(d,c),c},o=function(c){if(b.relation.get(c)){var d=new l["default"](a,b.entity),e=b.relation.get(c);return d.gridPositionCache.isGridPrepared(e.subj)&&d.gridPositionCache.isGridPrepared(e.obj)}},q=function(a){return o(a.relationId)?a:void 0},s=function(){var c=function(a){return delete a.render,a},d=function(c){return A.connect({source:$((0,v["default"])(a[0],c.subj)),target:$((0,v["default"])(a[0],c.obj)),anchors:["TopCenter","TopCenter"],connector:["Bezier",{curviness:(0,r["default"])(a,b,c)}],paintStyle:new k(c.id),parameters:{id:c.id},cssClass:"textae-editor__relation",overlays:[["Arrow",t["default"].NORMAL_ARROW],["Label",_.extend({},B["default"],{label:"["+c.id+"] "+c.type,cssClass:B["default"].cssClass+" "+g.getClasses(c.id).join(" ")})]]})},e=function(a){return _.extend(d(a),{relationId:a.id})},f=function(){var a=function(){var a=function(a){return new z["default"](a).addClass("hover"),a},b=function(a){return new z["default"](a).removeClass("hover"),a},c=function(a){return new z["default"](a).addClass("ui-selected"),a},d=function(a){return new z["default"](a).removeClass("ui-selected"),a},e=function(a){return a.addClass("hover"),a},f=function(a){return a.removeClass("hover"),a},g=function(a){return a.addClass("ui-selected"),a},h=function(a){return a.removeClass("ui-selected"),a},i=function(a,b){return a.connector.canvas.classList.contains(b)},j=function(a,b,c){return function(){b(a)||c(a)}},l=function(a,b){return b.setPaintStyle(_.extend(a(),{lineWidth:C})),b},m=function(a,b){return b.setPaintStyle(a()),b};return function(n,o){var p=_.partial(k,n),q=_.partial(l,p),r=_.partial(m,p),s=_.partial(j,o,function(a){return i(a,"ui-selected")}),u=_.partial(j,o,function(a){return a.dead}),v=_.compose(e,a,q,t["default"].showBigArrow),w=_.compose(f,b,r,t["default"].hideBigArrow),x=_.compose(g,c,f,b,q,t["default"].showBigArrow),y=_.compose(h,d,r,t["default"].hideBigArrow);return{pointup:s(v),pointdown:s(w),select:u(x),deselect:u(y)}}}();return function(b){var c=b.relationId;return _.extend(b,new a(c,b))}}(),h=function(){var a=function(a,b,c){a.bind("mouseenter",b).bind("mouseexit",c)},b=function(a){a.pointup()},c=function(a){a.pointdown()},d=function(a){return a.component},e=function(d){return a(d,b,c),d},f=function(e){return a(new z["default"](e),_.compose(b,d),_.compose(c,d)),e};return _.compose(f,e)}(),i=function(){var a=function(a){var b=function(a){this.bind("click",a),this.getOverlay(B["default"].id).bind("click",function(b,c){a(b.component,c)})};return _.extend({bindClickAction:b})};return function(b){return _.extend(b,new a(b))}}(),j=function(b){return a.trigger("textae.editor.jsPlumbConnection.add",b),b};return _.compose(m,j,i,h,f,e,c)}(),u=function(){var a=function(a){return _.extend(a,{relationId:a.id})},b=function(a){q(a)&&a.render&&s(a)},c=function(a){var c=function(){return new e(function(c,d){_.defer(function(){try{b(a),c(a)}catch(e){d(e)}})})};return _.extend(a,{render:c})};return _.compose(m,c,a)}(),w=function(d){var e=new n["default"](a,b,d.id),f=new k(d.id);e instanceof jsPlumb.Connection&&(c.relation.has(d.id)&&(f.lineWidth=C),e.setPaintStyle(f),new z["default"](e).setLabel("["+d.id+"] "+d.type))},y=function(c){var d=new n["default"](a,b,c.id);d instanceof jsPlumb.Connection&&g.update(new z["default"](d).getElement(),c.id)},A=(0,x["default"])((0,j["default"])(a));return{arrangePositionAll:function(){return(0,p["default"])(a,b,c,A)},reset:function(){A.reset(),i.connectCache.clear()},render:u,change:w,changeModification:y,remove:function(c){return d(a,b,c,A,i)}}}},{"../../../getEntityDom":414,"../../DomPositionCache":353,"../ModificationRenderer":375,"../getAnnotationBox":396,"./Connect":376,"./LABEL":377,"./LabelOverlay":378,"./arrangePositionAll":379,"./determineCurviness":380,"./jsPlumbArrowOverlayUtil":382,"./makeJsPlumbInstance":383,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18}],382:[function(a,b,c){"use strict";var d={width:7,length:9,location:1,id:"normal-arrow"},e={width:14,length:18,location:1,id:"hover-arrow"},f=function(a,b){return a===d.id?b.addOverlay(["Arrow",d]):a===e.id&&b.addOverlay(["Arrow",e]),b},g=function(a,b){return b.forEach(function(b){f(b,a)}),b},h=function(a){return a.getOverlays().filter(function(a){return"Arrow"===a.type}).map(function(a){return a.id})},i=function(a){return a.getOverlay(d.id)},j=function(a){return a.getOverlay(e.id)},k=function(a,b){return b.removeOverlay(a),b},l=function(a,b){return b.forEach(function(b){k(b,a)}),b},m=function(a){_.compose(_.partial(g,a),_.partial(l,a),h)(a)},n=_.partial(f,d.id),o=_.partial(f,e.id),p=_.partial(k,d.id),q=_.partial(k,e.id),r=_.compose(o,p),s=_.compose(n,q);b.exports={NORMAL_ARROW:d,resetArrows:m,showBigArrow:function(a){return j(a)?a:r(a)},hideBigArrow:function(a){return i(a)?a:s(a)}}},{}],383:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=jsPlumb.getInstance({ConnectionsDetachable:!1,Endpoint:["Dot",{radius:1}]});return b.setRenderMode(b.SVG),b.Defaults.Container=a,b},b.exports=c["default"]},{}],384:[function(a,b,c){"use strict";function d(a,b){a.span.topLevel().forEach(function(a){b.render(a)})}function e(a,b){b.reset(),a.relation.all().forEach(b.render)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./getAnnotationBox"),h=f(g);c["default"]=function(a,b,c,f){return function(g){(0,h["default"])(a).empty(),b.gridPositionCache.clear(),d(g,c),e(g,f)}},b.exports=c["default"]},{"./getAnnotationBox":396,"babel-runtime/helpers/interop-require-default":18}],385:[function(a,b,c){"use strict";function d(a,b,c,f){(0,p["default"])(a);var g=(0,h["default"])(a,b.span.topLevel());(0,j["default"])(a,g),(0,l["default"])(a,c),(0,n["default"])(a,b.entity.get,f),e(a,function(a){return d(a,b,c,f)})}function e(a,b){return a.children.forEach(b),a}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./getBigBrother"),h=f(g),i=a("./renderSingleSpan"),j=f(i),k=a("./renderClassOfSpan"),l=f(k),m=a("./renderEntitiesOfSpan"),n=f(m),o=a("./destroyChildrenSpan"),p=f(o);c["default"]=d,b.exports=c["default"]},{"./destroyChildrenSpan":390,"./getBigBrother":391,"./renderClassOfSpan":393,"./renderEntitiesOfSpan":394,"./renderSingleSpan":395,"babel-runtime/helpers/interop-require-default":18}],386:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=document.createRange();return c.setStart(a,b.start),c.setEnd(a,b.end),c},b.exports=c["default"]},{}],387:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=document.createElement("span");return b.setAttribute("id",a.id),b.setAttribute("title",a.id),b.setAttribute("class","textae-editor__span"),b.setAttribute("tabindex",0),b},b.exports=c["default"]},{}],388:[function(a,b,c){"use strict";function d(a,b){var c=a.begin-b,d=a.end-b;return{start:c,end:d}}function e(a,b){return 0<=b.start&&b.end<=a.length}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./createRange"),h=f(g);c["default"]=function(a,b,c){var f=d(c,b);if(!e(a,f))throw new Error("oh my god! I cannot render this span. "+c.toStringOnlyThis()+", textNode "+a.textContent);return(0,h["default"])(a,f)},b.exports=c["default"]},{"./createRange":386,"babel-runtime/helpers/interop-require-default":18}],389:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){for(var b=document.querySelector("#"+a),c=b.parentNode;b.firstChild;)c.insertBefore(b.firstChild,b);c.removeChild(b),c.normalize()},b.exports=c["default"]},{}],390:[function(a,b,c){"use strict";function d(a){return null!==document.querySelector("#"+a.id)}function e(a){a.children.forEach(function(a){e(a)}),(0,h["default"])(a.id)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./destroy"),h=f(g);c["default"]=function(a){return a.children.filter(d).forEach(e),a},b.exports=c["default"]},{"./destroy":389,"babel-runtime/helpers/interop-require-default":18}],391:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=void 0;return a.parent?(c=a.parent.children.indexOf(a),0===c?null:a.parent.children[c-1]):(c=b.indexOf(a),0===c||b[c-1].paragraph!==a.paragraph?null:b[c-1])},b.exports=c["default"]},{}],392:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./create"),f=d(e),g=a("./destroy"),h=d(g),i=a("./renderClassOfSpan"),j=d(i);c["default"]=function(a,b,c){return{render:function(d){return(0,f["default"])(d,a,b,c)},remove:function(a){return(0,h["default"])(a.id)},change:function(a){return(0,j["default"])(a,b)}}},b.exports=c["default"]},{"./create":385,"./destroy":389,"./renderClassOfSpan":393,"babel-runtime/helpers/interop-require-default":18}],393:[function(a,b,c){"use strict";function d(a,b){return a.getTypes().map(function(a){return a.name}).filter(b).length>0}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("not"),g=e(f),h="textae-editor__span--block",i="textae-editor__span--wrap";c["default"]=function(a,b){var c=document.querySelector("#"+a.id);d(a,b)?c.classList.add(h):c.classList.remove(h),d(a,(0,g["default"])(b))?c.classList.contains(i)&&c.classList.remove(i):c.classList.add(i)},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,not:141}],394:[function(a,b,c){"use strict";function d(a,b,c){a.entities.map(b).forEach(c)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){a.getTypes().forEach(function(a){return d(a,b,c)})},b.exports=c["default"]},{}],395:[function(a,b,c){"use strict";function d(a,b){var c=void 0,d=void 0;if(b){var g=e(b),i=h(g,2);c=i[0],d=i[1]}else{var j=f(a),k=h(j,2);c=k[0],d=k[1]}if(!c)throw new Error("The textNode on to create a span is not found. "+a.toStringOnlyThis());return(0,m["default"])(c,d,a)}function e(a){return[document.querySelector("#"+a.id).nextSibling,a.end]}function f(a){var b=g(a);return[document.querySelector("#"+b.id).firstChild,b.begin]}function g(a){return a.parent?a.parent:a.paragraph}var h=a("babel-runtime/helpers/sliced-to-array")["default"],i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("./createSpanElement"),k=i(j),l=a("./createSpanRange"),m=i(l);c["default"]=function(a,b){var c=d(a,b),e=(0,k["default"])(a);c.surroundContents(e)},b.exports=c["default"]},{"./createSpanElement":387,"./createSpanRange":388,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/sliced-to-array":20}],396:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getElement"),f=d(e),g=a("./getEditorBody"),h=d(g);c["default"]=_.compose(_.partial(f["default"],"div","textae-editor__body__annotation-box"),h["default"]),b.exports=c["default"]},{"./getEditorBody":397,"./getElement":398,"babel-runtime/helpers/interop-require-default":18}],397:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getElement"),f=d(e);c["default"]=_.partial(f["default"],"div","textae-editor__body"),b.exports=c["default"]},{"./getElement":398,"babel-runtime/helpers/interop-require-default":18}],398:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){var d=c.find("."+b);return 0===d.length&&(d=$("<"+a+">").addClass(b),c.append(d)),d},b.exports=c["default"]},{}],399:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../idFactory"),f=d(e);c["default"]=function(a,b){return $("#"+f["default"].makeTypeId(a,b))},b.exports=c["default"]},{"../../../idFactory":243,"babel-runtime/helpers/interop-require-default":18}],400:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../DomPositionCache"),f=d(e),g=a("./Initiator"),h=d(g);c["default"]=function(a,b,c,d,e,g,i){var j=new f["default"](a,b.entity),k={init:new h["default"](j,i,d,g,a,b,c,e),renderLazyRelationAll:i.renderLazyRelationAll};return k},b.exports=c["default"]},{"../DomPositionCache":353,"./Initiator":374,"babel-runtime/helpers/interop-require-default":18}],401:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("capitalize"),f=d(e);c["default"]=function(a,b,c,d,e){var g=a[b].get(c.obj);g&&(d.changeModification(g),e["updateBy"+(0,f["default"])(b)]())},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,capitalize:23}],402:[function(a,b,c){"use strict";function d(a){return m({paragraphs:a})}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("handlebars"),g=e(f),h=a("../getTextBox"),i=e(h),j=a("./getElement"),k=(e(j),a("./getEditorBody")),l=(e(k),'\n{{#paragraphs}}\n<p class="textae-editor__body__text-box__paragraph-margin">\n    <span class="textae-editor__body__text-box__paragraph" id="{{id}}">{{text}}</span>\n</p>\n{{/paragraphs}}\n'),m=g["default"].compile(l);c["default"]=function(a,b){(0,i["default"])(a[0]).innerHTML=d(b)},b.exports=c["default"]},{"../getTextBox":405,"./getEditorBody":397,"./getElement":398,"babel-runtime/helpers/interop-require-default":18,handlebars:139}],403:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{height:18*a+18+"px","padding-top":18*a+"px"}},b.exports=c["default"]},{}],404:[function(a,b,c){"use strict";function d(a,b,c){var e=0===a.children.length?0:_.max(a.children.map(function(a){return d(a,b,c)})),f=a.getTypes().filter(function(a){return!b.entity.isBlock(a.name)}).length*(18*c+18);return f+e}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],405:[function(a,b,c){"use strict";function d(a){return a.querySelector(".textae-editor__body__text-box")}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],406:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=new j["default"](a,b,c,g,f,e,h),k=_.debounce(function(){return d(e())},100);i.init(a,b,c).on("change",k).on("all.change",function(){(0,z["default"])(a[0]),l.setToTypeGap(a[0],b,f,e()),k()}).on("span.add",k).on("span.remove",k).on("entity.add",k).on("entity.change",k).on("entity.remove",k).on("relation.add",k)}function e(a,b,c,d,e){var f=function(b){return a.find(".textae-editor__type").css(new v["default"](b))};c(f),c(function(c){return l.setToTypeGap(a[0],b,d,c)}),c(e.update)}function f(a,b){var c=new r["default"](a);b.on("render.start",c.startWait).on("render.end",c.endWait)}var g=a("babel-runtime/helpers/interop-require-default")["default"],h=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./Renderer"),j=g(i),k=a("./lineHeight"),l=h(k),m=a("./Hover"),n=g(m),o=a("./AnnotationPosition"),p=g(o),q=a("../../../util/CursorChanger"),r=g(q),s=a("./setSelectionModelHandler"),t=g(s),u=a("./TypeStyle"),v=g(u),w=a("./Renderer/RelationRenderer"),x=g(w),y=a("./updateTextBoxHeight"),z=g(y),A='\n<div class="textae-editor__body">\n    <div class="textae-editor__body__annotation-box"></div>\n    <div class="textae-editor__body__text-box"></div>\n</div>\n';c["default"]=function(a,b,c,g,h,i,j){a[0].innerHTML=A,(0,t["default"])(a,b,c,g);var k=new x["default"](a,b,c,i),l=new p["default"](a,b,i,k.arrangePositionAll);return e(a,b,h,i,l),f(a,l),d(a,b,c,l.update,h,i,g.buttonStateHelper,k),{hoverRelation:new n["default"](a,b.entity),updateDisplay:function(){return(0,z["default"])(a[0]),l.update(h())}}},b.exports=c["default"]},{"../../../util/CursorChanger":431,"./AnnotationPosition":348,"./Hover":360,"./Renderer":400,"./Renderer/RelationRenderer":381,"./TypeStyle":403,"./lineHeight":407,"./setSelectionModelHandler":409,"./updateTextBoxHeight":410,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],407:[function(a,b,c){"use strict";function d(a){var b=(0,l["default"])(a),c=window.getComputedStyle(b);return(0,n["default"])(c.lineHeight)}function e(a,b){var c=(0,l["default"])(a);c.style.lineHeight=b+"px",c.style.paddingTop=b/2+"px",g(c,b),(0,p["default"])(a)}function f(a,b,c,d){var f=void 0;if(0===b.span.all().length){var g=window.getComputedStyle(a),h=(0,n["default"])(g.lineHeight);f=h}else f=_.max(b.span.all().map(function(a){return(0,j["default"])(a,c,d)})),f+=q+r;e(a,f)}function g(a,b){var c=a.style.lineHeight,d=(0,n["default"])(c);d&&window.scroll(window.scrollX,window.scrollY*b/d)}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.get=d,c.set=e,c.setToTypeGap=f;var i=a("./getHeightIncludeDescendantGrids"),j=h(i),k=a("./getTextBox"),l=h(k),m=a("./pixelToInt"),n=h(m),o=a("./updateTextBoxHeight"),p=h(o),q=23,r=30},{"./getHeightIncludeDescendantGrids":404,"./getTextBox":405,"./pixelToInt":408,"./updateTextBoxHeight":410,"babel-runtime/helpers/interop-require-default":18}],408:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return""===a?0:parseInt(a,10)},b.exports=c["default"]},{}],409:[function(a,b,c){"use strict";function d(a){return _.partial(_.delay,a,150)}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../Selector"),g=e(f);c["default"]=function(a,b,c,e){var f=new g["default"](a,b);c.on("span.select",f.span.select).on("span.deselect",f.span.deselect).on("span.change",e.buttonStateHelper.updateBySpan).on("entity.select",f.entity.select).on("entity.deselect",f.entity.deselect).on("relation.select",d(f.relation.select)).on("relation.deselect",d(f.relation.deselect)).on("relation.change",e.buttonStateHelper.updateByRelation)},b.exports=c["default"]},{"../Selector":342,"babel-runtime/helpers/interop-require-default":18}],410:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getTextBox"),f=d(e),g=a("./pixelToInt"),h=d(g);c["default"]=function(a){var b=(0,f["default"])(a),c=window.getComputedStyle(b);b.style.height="auto",b.style.height=b.offsetHeight-(0,h["default"])(c.paddingTop)+20+"px"},b.exports=c["default"]},{"./getTextBox":405,"./pixelToInt":408,"babel-runtime/helpers/interop-require-default":18}],411:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("delegate"),f=d(e);c["default"]=function(a,b,c){var d=a[0];d.addEventListener("mousedown",function(a){a.shiftKey&&a.preventDefault()}),(0,f["default"])(d,".textae-editor__type","mousedown",function(a){return a.preventDefault()}),(0,f["default"])(d,".textae-editor__body__text-box__paragraph-margin","mousedown",function(a){}),(0,f["default"])(d,".textae-editor__entity","mouseover",function(a){return c.hoverRelation.on(a.target.title)}),(0,f["default"])(d,".textae-editor__entity","mouseout",function(a){return c.hoverRelation.off(a.target.title)})},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,delegate:107}],412:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./View/lineHeight"),f=d(e);c["default"]=function(a,b,c,d,e){f.setToTypeGap(a[0],b,c,d()),e.updateDisplay()},b.exports=c["default"]},{"./View/lineHeight":407,"babel-runtime/helpers/interop-require-wildcard":19}],413:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){new MutationObserver(function(b){b.forEach(function(b){b.removedNodes.length&&1===b.removedNodes[0].nodeType&&(b.removedNodes[0].classList.contains("textae-editor__span")||b.removedNodes[0].classList.contains("textae-editor__type"))&&"BODY"===document.activeElement.tagName&&a.focus()})}).observe(a[0].querySelector(".textae-editor__body"),{childList:!0,subtree:!0})},b.exports=c["default"]},{}],414:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return a.querySelector('[title="'+b+'"]')},b.exports=c["default"]},{}],415:[function(a,b,c){"use strict";function d(a,b){console.assert(b,"element MUST exists.");var c=f(a,b),d=g(c,2),e=d[0],h=d[1];return h>0?e[h-1]:void 0}function e(a,b){console.assert(b,"element MUST exists.");var c=f(a,b),d=g(c,2),e=d[0],h=d[1];return e.length-h>1?e[h+1]:void 0}function f(a,b){var c=h(b.classList).filter(function(a){return 0===a.indexOf("textae-editor__")})[0],d=a.querySelectorAll("."+c),e=h(d).indexOf(b);return[d,e]}var g=a("babel-runtime/helpers/sliced-to-array")["default"],h=a("babel-runtime/core-js/array/from")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.getLeftElement=d,c.getRightElement=e},{"babel-runtime/core-js/array/from":2,"babel-runtime/helpers/sliced-to-array":20}],416:[function(a,b,c){"use strict";function d(a,b,c){b.getAttribute(c)&&a.set(c,b.getAttribute(c))}function e(a,b){a.has(b)&&a.set(b,decodeURIComponent(a.get(b)))}function f(a){var b=new h,c=a.innerText;a.innerHTML="",c&&b.set("inlineAnnotation",c);var d=g(a);return d&&b.set("url",g(a)),b}function g(a){var b=a.getAttribute("source")||a.getAttribute("target");return b?decodeURIComponent(b):""}var h=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=new h;return d(b,a,"mode"),d(b,a,"control"),d(b,a,"status_bar"),d(b,a,"config"),d(b,a,"autocompletion_ws"),e(b,"config"),e(b,"autocompletion_ws"),b.set("annotation",f(a)),b},b.exports=c["default"]},{"babel-runtime/core-js/map":5}],417:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){var h=f.get("annotation");if(h){if(h.has("inlineAnnotation")){var i=JSON.parse(h.get("inlineAnnotation"));return e(a,b,c,i,f.get("config")),d.status("inline"),i}h.has("url")?g.getAnnotationFromServer(h.get("url")):e(a,b,c,{text:'Currently, the document is empty. Use the "import" button or press the key "i" to open a document with annotation.'},f.get("config"))}}function e(a,b,c,d,e){var h=f(a,b,d);"no config"===h?g(a,b,c,e,d):c.reset(d)}function f(a,b,c){return a.reset(),h(a,b,c.config),c.config?void 0:"no config"}function g(a,b,c,d,e){a.reset(),"string"==typeof d?p.getAsync(d,function(d){h(a,b,d),c.reset(e)},function(){return alert("could not read the span configuration from the location you specified.: "+d)}):c.reset(e)}function h(a,b,c){a.set(c),i(b,c)}function i(a,b){return a.setDefinedEntityTypes(b?b["entity types"]:[]),a.setDefinedRelationTypes(b?b["relation types"]:[]),b&&void 0!==b.css&&$("#css_area").html('<link rel="stylesheet" href="'+b.css+'"/>'),b}function j(a,b){return"on"===b?new r["default"](a):{status:function(){}}}var k=a("babel-runtime/helpers/interop-require-default")["default"],l=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var m=a("observ"),n=k(m),o=a("../../util/ajaxAccessor"),p=l(o),q=a("../../component/StatusBar"),r=k(q),s=a("./getParams"),t=k(s),u=a("./SpanConfig"),v=k(u),w=a("./Command"),x=k(w),y=a("./TypeContainer"),z=k(y),A=a("./View"),B=k(A),C=a("./Presenter"),D=k(C),E=a("./bindMouseEvent"),F=k(E),G=a("./DaoHandler"),H=k(G),I=a("./APIs"),J=k(I),K=a("./calculateLineHeight"),L=k(K),M=a("./focusEditorWhenFocusedChildRemoved"),N=k(M);c["default"]=function(a,b,c,f,g,h,i,k){var l=(0,t["default"])(a[0]),m=new v["default"],o=new x["default"](a,g,h,c),p=new n["default"](-1),q=new z["default"](g),r=new B["default"](a,g,h,f,p,q,k),s=new D["default"](a,g,h,r,o,m,i,f,p,q,k,l.get("autocompletion_ws"),l.get("mode"));(0,F["default"])(a,s,r),(0,N["default"])(a);var u=void 0,w=new H["default"](b,c,g,q,function(){return u}),y=j(a,l.get("status_bar"));"visible"===l.get("control")&&a[0].classList.add("textae-editor--control-visible"),"hidden"===l.get("control")&&a[0].classList.add("textae-editor--control-hidden"),b.on("load",function(a){e(m,q,g,a.annotation,l.get("config")),y.status(a.source),u=a.annotation}),u=d(m,q,g,y,l,b);var A=function(){return(0,L["default"])(a,g,q,p,r)};a.api=new J["default"](o,s,w,f,r,A),a[0].tabIndex=-1},b.exports=c["default"]},{"../../component/StatusBar":189,"../../util/ajaxAccessor":432,"./APIs":247,"./Command":265,"./DaoHandler":267,"./Presenter":334,"./SpanConfig":344,"./TypeContainer":347,"./View":406,"./bindMouseEvent":411,"./calculateLineHeight":412,"./focusEditorWhenFocusedChildRemoved":413,"./getParams":416,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,observ:142}],418:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return a.filter(function(a){return a.begin===b.begin&&a.end===b.end}).length>0},b.exports=c["default"]},{}],419:[function(a,b,c){"use strict";b.exports={isUri:function(a){return String(a).indexOf("http")>-1},getUrlMatches:function(a){var b=/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/gi;return b.exec(a)}}},{}],420:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./tool"),f=d(e),g=a("./control"),h=d(g),i=a("./editor"),j=d(i),k=a("./combine"),l=d(k),m=new f["default"];jQuery.fn.textae=function(){return function(){this.hasClass("textae-editor")&&this.each(function(){var a=$(this);return j["default"].apply(a),m.registerEditor(a),a.api.start(a),(0,l["default"])(a,(0,h["default"])()),a.find(".textae-control").stick_in_parent(),a})}}()},{"./combine":171,"./control":204,"./editor":244,"./tool":422,"babel-runtime/helpers/interop-require-default":18}],421:[function(a,b,c){"use strict";function d(a){return"editor"+a.length}function e(a){a.map(function(a){return a[0]}).forEach(function(a){a.classList.remove(j)})}function f(a,b){e(a),b[0].classList.add(j)}var g=a("babel-runtime/helpers/create-class")["default"],h=a("babel-runtime/helpers/class-call-check")["default"],i=a("babel-runtime/core-js/object/assign")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j="textae-editor--active",k=function(){function a(){h(this,a),this.editorList=[],this.selectedEditor=null}return g(a,[{key:"push",value:function(a){i(a,{editorId:d(this.editorList)}),this.editorList.push(a)}},{key:"unselect",value:function(a){this.selectedEditor===a&&(a[0].classList.remove(j),this.selectedEditor=null)}},{key:"redraw",value:function(){this.editorList.forEach(function(a){return a.api.redraw()})}},{key:"observeKeyInput",value:function(a){this.editorList.forEach(function(b){return b[0].addEventListener("keyup",function(b){return a(b)})})}},{key:"findByDom",value:function(a){return this.editorList.filter(function(b){return b[0]===a})[0]}},{key:"selected",get:function(){return this.selectedEditor},set:function(a){f(this.editorList,a),this.selectedEditor=a}}]),a}();c["default"]=k,b.exports=c["default"]},{"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15}],422:[function(a,b,c){"use strict";function d(a){window.addEventListener("resize",_.throttle(function(){return a.redraw()},500))}function e(a,b){a.push(b),b.eventEmitter.on("textae.editor.select",function(){return a.selected=b}).on("textae.editor.unselect",function(){return a.unselect(b)}),(0,l["default"])(b[0])}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./EditorContainer"),h=f(g),i=a("./observeKeyWithoutDialog"),j=f(i),k=a("./setVeilObserver"),l=f(k),m=a("./selectUnselectEditorOn"),n=f(m);c["default"]=function(){var a=new h["default"];return window.addEventListener("load",function(){(0,j["default"])(a),d(a),(0,n["default"])(a)}),{registerEditor:function(b){return e(a,b)}}},b.exports=c["default"]},{"./EditorContainer":421,"./observeKeyWithoutDialog":426,"./selectUnselectEditorOn":427,"./setVeilObserver":429,"babel-runtime/helpers/interop-require-default":18}],423:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getKeyCode"),f=d(e),g=a("./convertKeyEvent"),h=d(g),i=a("../../util/getMousePoint"),j=d(i);c["default"]=function(a,b){return function(c){var d=(0,h["default"])((0,f["default"])(c));"H"===d?a():b.selected.api.handleKeyInput(d,{point:(0,j["default"])(),shiftKey:c.shiftKey})}},b.exports=c["default"]},{"../../util/getMousePoint":433,"./convertKeyEvent":424,"./getKeyCode":425,"babel-runtime/helpers/interop-require-default":18}],424:[function(a,b,c){"use strict";function d(a){return a>=65&&90>=a?String.fromCharCode(a):f.has(a)?f.get(a):void 0}var e=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=new e([[27,"ESC"],[37,"LEFT"],[38,"UP"],[39,"RIGHT"],[40,"DOWN"],[46,"DEL"]]);b.exports=c["default"]},{"babel-runtime/core-js/map":5}],425:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.keyCode},b.exports=c["default"]},{}],426:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./KeyInputHandler"),f=d(e),g=a("../../component/HelpDialog"),h=d(g),i=new h["default"],j=function(){};c["default"]=function(a){var b=new f["default"](i,a),c=b;a.observeKeyInput(c),$("body").on("dialogopen",".textae-editor--dialog",function(){return c=j}).on("dialogclose",".textae-editor--dialog",function(){return c=b})},b.exports=c["default"]},{"../../component/HelpDialog":178,"./KeyInputHandler":423,"babel-runtime/helpers/interop-require-default":18}],
427:[function(a,b,c){"use strict";b.exports=function(a){document.body.addEventListener("focus",function(b){var c=a.findByDom(b.target.closest(".textae-editor"));c?a.selected=c:a.selected&&a.unselect(a.selected)},!0),document.body.addEventListener("click",function(b){null===b.target.closest(".textae-editor--dialog")&&(a.findByDom(b.target.closest(".textae-editor"))||a.selected&&a.unselect(a.selected))})}},{}],428:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=new d;c["default"]=function(a){return a.classList.contains("textae-editor--wait")?e.set(a):e["delete"](a),e.size>0},b.exports=c["default"]},{"babel-runtime/core-js/map":5}],429:[function(a,b,c){"use strict";function d(a){a.forEach(function(a){return e((0,h["default"])(a.target))})}function e(a){a?j["default"].show():j["default"].hide()}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./hasWaitingEditor"),h=f(g),i=a("./veil"),j=f(i),k={attributes:!0,attributeFilter:["class"]};c["default"]=function(a){new MutationObserver(d).observe(a,k)},b.exports=c["default"]},{"./hasWaitingEditor":428,"./veil":430,"babel-runtime/helpers/interop-require-default":18}],430:[function(a,b,c){"use strict";function d(){var a=document.querySelector("."+f);if(a)a.style.display="block";else{var b=document.createElement("div");b.className=f,document.body.appendChild(b)}}function e(){var a=document.querySelector("."+f);a&&(a.style.display="none")}Object.defineProperty(c,"__esModule",{value:!0});var f="textae-editor-veil";c["default"]={show:d,hide:e},b.exports=c["default"]},{}],431:[function(a,b,c){"use strict";var d=function(a,b){a=a.add(".ui-dialog, .ui-widget-overlay"),a[b+"Class"]("textae-editor--wait")};b.exports=function(a){var b=_.partial(d,a,"add"),c=_.partial(d,a,"remove");return{startWait:b,endWait:c}}},{}],432:[function(a,b,c){"use strict";function d(a,b,c){if(!f(a)){var d={type:"GET",url:a,cache:!1,xhrFields:{withCredentials:!0}};$.ajax(d).done(function(a){void 0!==b&&b(a)}).fail(function(a,b,d){void 0!==c&&c()})}}function e(a,b,c,d,e){if(!f(a)){console.log("POST data",b);var g={type:"post",url:a,contentType:"application/json",data:b,crossDomain:!0,xhrFields:{withCredentials:!0}};$.ajax(g).done(c).fail(d).always(e)}}function f(a){return!a||""===a}Object.defineProperty(c,"__esModule",{value:!0}),c.getAsync=d,c.post=e},{}],433:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={};document.querySelector("html").addEventListener("mousemove",function(a){d.top=a.clientY,d.left=a.clientX}),c["default"]=function(){return d},b.exports=c["default"]},{}]},{},[420]),function(a){$(function(){$(".textae-editor").textae()})}(jQuery);