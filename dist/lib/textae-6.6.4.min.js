(()=>{var e={6870:(e,t)=>{"use strict";function n(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:n(s,r),time:n(l,c),"date-time":n((function(e){const t=e.split(u);return 2===t.length&&s(t[0])&&l(t[1],!0)}),d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&p.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(f.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/},t.fastFormats={...t.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,r),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(e){const t=i.exec(e);if(!t)return!1;const n=+t[1],s=+t[2],r=+t[3];return s>=1&&s<=12&&r>=1&&r<=(2===s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:o[s])}function r(e,t){if(e&&t)return e>t?1:e<t?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const n=a.exec(e);if(!n)return!1;const i=+n[1],o=+n[2],s=+n[3],r=n[5];return(i<=23&&o<=59&&s<=59||23===i&&59===o&&60===s)&&(!t||""!==r)}function c(e,t){if(!e||!t)return;const n=a.exec(e),i=a.exec(t);return n&&i?(e=n[1]+n[2]+n[3]+(n[4]||""))>(t=i[1]+i[2]+i[3]+(i[4]||""))?1:e<t?-1:0:void 0}const u=/t|\s/i;function d(e,t){if(!e||!t)return;const[n,i]=e.split(u),[o,s]=t.split(u),a=r(n,o);return void 0!==a?a||c(i,s):void 0}const h=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const f=/[^\\]\\Z/},5477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6870),o=n(7963),s=n(3487),r=new s.Name("fullFormats"),a=new s.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,i.fullFormats,r),e;const[n,s]="fast"===t.mode?[i.fastFormats,a]:[i.fullFormats,r];return c(e,t.formats||i.formatNames,n,s),t.keywords&&o.default(e),e};function c(e,t,n,i){var o,r;null!==(o=(r=e.opts.code).formats)&&void 0!==o||(r.formats=s._`require("ajv-formats/dist/formats").${i}`);for(const i of t)e.addFormat(i,n[i])}l.get=(e,t="full")=>{const n=("fast"===t?i.fastFormats:i.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n},t.default=l,e.exports=l,e.exports.default=l},7963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const i=n(2227),o=n(3487),s=o.operators,r={formatMaximum:{okStr:"<=",ok:s.LTE,fail:s.GT},formatMinimum:{okStr:">=",ok:s.GTE,fail:s.LT},formatExclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},formatExclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},a={message:({keyword:e,schemaCode:t})=>o.str`should be ${r[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>o._`{comparison: ${r[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(r),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:n,schemaCode:s,keyword:a,it:l}=e,{opts:c,self:u}=l;if(!c.validateFormats)return;const d=new i.default(l,u.RULES.all.format.definition,"format");function h(e){return o._`${e}.compare(${n}, ${s}) ${r[a].fail} 0`}d.$data?function(){const n=t.scopeValue("formats",{ref:u.formats,code:c.code.formats}),i=t.const("fmt",o._`${n}[${d.schemaCode}]`);e.fail$data(o.or(o._`typeof ${i} != "object"`,o._`${i} instanceof RegExp`,o._`typeof ${i}.compare != "function"`,h(i)))}():function(){const n=d.schema,i=u.formats[n];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error(`"${a}": format "${n}" does not define "compare" function`);const s=t.scopeValue("formats",{key:n,ref:i,code:c.code.formats?o._`${c.code.formats}${o.getProperty(n)}`:void 0});e.fail$data(h(s))}()},dependencies:["format"]};t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},1581:(e,t,n)=>{"use strict";n(2227).default;var i=n(3487);const o=n(7159),s=n(3924),r=n(278),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends o.default{_addVocabularies(){super._addVocabularies(),s.default.forEach((e=>this.addVocabulary(e)))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(r,a):r;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.ZP=c},7023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=i;class o extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function s(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)l(n,t[i]),n.push(e[++i]);return new o(n)}t._Code=o,t.nil=new o(""),t._=s;const r=new o("+");function a(e,...t){const n=[u(e[0])];let i=0;for(;i<t.length;)n.push(r),l(n,t[i]),n.push(r,u(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===r){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new o(n)}function l(e,t){var n;t instanceof o?e.push(...t._items):t instanceof i?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new o(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new o(`.${e}`):s`[${e}]`}},3487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const i=n(7023),o=n(8490);var s=n(7023);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}});var r=n(8490);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return r.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return r.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return r.varKinds}}),t.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&"),ADD:new i._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?o.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,e,t)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof i.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=N(this.rhs,e,t),this}get names(){return A(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,n,i){super(e,n,i),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=N(this.code,e,t),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let i=n.length;for(;i--;){const o=n[i];o.optimizeNames(e,t)||(O(e,o.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>D(e,t.names)),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class _ extends m{}class v extends g{}v.kind="else";class y extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof y?t:t.nodes:this.nodes.length?this:new y(P(e),t instanceof y?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=N(this.condition,e,t),this}get names(){const e=super.names;return A(e,this.condition),this.else&&D(e,this.else.names),e}}y.kind="if";class b extends g{}b.kind="for";class x extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=N(this.iteration,e,t),this}get names(){return D(super.names,this.iteration.names)}}class w extends b{constructor(e,t,n,i){super(),this.varKind=e,this.name=t,this.from=n,this.to=i}render(e){const t=e.es5?o.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${t} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){const e=A(super.names,this.from);return A(e,this.to)}}class k extends b{constructor(e,t,n,i){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=N(this.iterable,e,t),this}get names(){return D(super.names,this.iterable.names)}}class C extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class $ extends m{render(e){return"return "+super.render(e)}}$.kind="return";class S extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,i;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&D(e,this.catch.names),this.finally&&D(e,this.finally.names),e}}class E extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}E.kind="catch";class T extends g{render(e){return"finally"+super.render(e)}}T.kind="finally";function D(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function A(e,t){return t instanceof i._CodeOrName?D(e,t.names):e}function N(e,t,n){return e instanceof i.Name?s(e):(o=e)instanceof i._Code&&o._items.some((e=>e instanceof i.Name&&1===t[e.str]&&void 0!==n[e.str]))?new i._Code(e._items.reduce(((e,t)=>(t instanceof i.Name&&(t=s(t)),t instanceof i._Code?e.push(...t._items):e.push(t),e)),[])):e;var o;function s(e){const i=n[e.str];return void 0===i||1!==t[e.str]?e:(delete t[e.str],i)}}function O(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function P(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:i._`!${R(e)}`}t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new o.Scope({parent:e}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,i){const o=this._scope.toName(t);return void 0!==n&&i&&(this._constants[o.str]=n),this._leafNode(new l(e,o,n)),o}const(e,t,n){return this._def(o.varKinds.const,e,t,n)}let(e,t,n){return this._def(o.varKinds.let,e,t,n)}var(e,t,n){return this._def(o.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,n){return this._leafNode(new u(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==i.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[n,o]of e)t.length>1&&t.push(","),t.push(n),(n!==o||this.opts.es5)&&(t.push(":"),i.addCodeArg(t,o));return t.push("}"),new i._Code(t)}if(e,t,n){if(this._blockNode(new y(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new y(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(y,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new x(e),t)}forRange(e,t,n,i,s=(this.opts.es5?o.varKinds.var:o.varKinds.let)){const r=this._scope.toName(e);return this._for(new w(s,r,t,n),(()=>i(r)))}forOf(e,t,n,s=o.varKinds.const){const r=this._scope.toName(e);if(this.opts.es5){const e=t instanceof i.Name?t:this.var("_arr",t);return this.forRange("_i",0,i._`${e}.length`,(t=>{this.var(r,i._`${e}[${t}]`),n(r)}))}return this._for(new k("of",s,r,t),(()=>n(r)))}forIn(e,t,n,s=(this.opts.es5?o.varKinds.var:o.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,i._`Object.keys(${t})`,n);const r=this._scope.toName(e);return this._for(new k("in",s,r,t),(()=>n(r)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new $;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new S;if(this._blockNode(i),this.code(e),t){const e=this.name("e");this._currNode=i.catch=new E(e),t(e)}return n&&(this._currNode=i.finally=new T,this.code(n)),this._endBlockNode(E,T)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=i.nil,n,o){return this._blockNode(new C(e,t,n)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=P;const j=I(t.operators.AND);t.and=function(...e){return e.reduce(j)};const M=I(t.operators.OR);function I(e){return(t,n)=>t===i.nil?n:n===i.nil?t:i._`${R(t)} ${e} ${R(n)}`}function R(e){return e instanceof i.Name?e:i._`(${e})`}t.or=function(...e){return e.reduce(M)}},8490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const i=n(7023);class o extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var s;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(s=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class r{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof i.Name?e:this.name(e)}name(e){return new i.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=r;class a extends i.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=i._`.${new i.Name(t)}[${n}]`}}t.ValueScopeName=a;const l=i._`\n`;t.ValueScope=class extends r{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:i.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(e),{prefix:o}=i,s=null!==(n=t.key)&&void 0!==n?n:t.ref;let r=this._values[o];if(r){const e=r.get(s);if(e)return e}else r=this._values[o]=new Map;r.set(s,i);const a=this._scope[o]||(this._scope[o]=[]),l=a.length;return a[l]=t.ref,i.setValue(t,{property:o,itemIndex:l}),i}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return i._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,n,r={},a){let l=i.nil;for(const c in e){const u=e[c];if(!u)continue;const d=r[c]=r[c]||new Map;u.forEach((e=>{if(d.has(e))return;d.set(e,s.Started);let r=n(e);if(r){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=i._`${l}${n} ${e} = ${r};${this.opts._n}`}else{if(!(r=null==a?void 0:a(e)))throw new o(e);l=i._`${l}${r}${this.opts._n}`}d.set(e,s.Completed)}))}return l}}},2227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=void 0;const i=n(453),o=n(6776),s=n(4181),r=n(3487),a=n(2141),l=n(4069);t.default=class{constructor(e,t,n){if(function({schema:e,opts:t,self:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema){if(!i.validateSchema(e[o])){const e="keyword value is invalid: "+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}}(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=o.schemaRefOrVal(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",d(this.$data,e));else if(this.schemaCode=this.schemaValue,!function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))}(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",a.default.errors))}result(e,t,n){this.gen.if(r.not(e)),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.result(e,void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(r._`${t} !== undefined && (${r.or(this.invalid$data(),e)})`)}error(e){(e?s.reportExtraError:s.reportError)(this,this.def.error)}$dataError(){s.reportError(this,this.def.$dataError||s.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');s.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=r.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=r.nil,t=r.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:o,def:s}=this;n.if(r.or(r._`${i} === undefined`,t)),e!==r.nil&&n.assign(e,!0),(o.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==r.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:o,it:s}=this;return r.or(function(){if(n.length){if(!(t instanceof r.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return r._`${i.checkDataTypes(e,t,s.opts.strict,i.DataType.Wrong)}`}return r.nil}(),function(){if(o.validateSchema){const n=e.scopeValue("validate$data",{ref:o.validateSchema});return r._`!${n}(${t})`}return r.nil}())}subschema(e,t){return l.applySubschema(this.it,e,t)}mergeEvaluated(e,t){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=o.mergeEvaluated.props(i,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=o.mergeEvaluated.items(i,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(t,(()=>this.mergeEvaluated(e,r.Name))),!0}};const c=/^\/(?:[^~]|~0|~1)*$/,u=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function d(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let s,l;if(""===e)return a.default.rootData;if("/"===e[0]){if(!c.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,l=a.default.rootData}else{const o=u.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const r=+o[1];if(s=o[2],"#"===s){if(r>=t)throw new Error(p("property/index",r));return i[t-r]}if(r>t)throw new Error(p("data",r));if(l=n[t-r],!s)return l}let d=l;const h=s.split("/");for(const e of h)e&&(l=r._`${l}${r.getProperty(o.unescapeJsonPointer(e))}`,d=r._`${d} && ${l}`);return d;function p(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=d},8727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=void 0;const i=n(2531);class o extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.ValidationError=o;class s extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=i.resolveUrl(e,t),this.missingSchema=i.normalizeId(i.getFullPath(this.missingRef))}}t.MissingRefError=s,e.exports={ValidationError:o,MissingRefError:s}},4181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const i=n(3487),o=n(2141);function s(e,t){const n=e.const("err",t);e.if(i._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,i._`[${n}]`)),i._`${o.default.vErrors}.push(${n})`),e.code(i._`${o.default.errors}++`)}function r(e,t){const{gen:n,validateName:o,schemaEnv:s}=e;s.$async?n.throw(i._`new ${e.ValidationError}(${t})`):(n.assign(i._`${o}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>i.str`should pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?i.str`"${e}" keyword must be ${t} ($data)`:i.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,o){const{it:a}=e,{gen:c,compositeRule:u,allErrors:d}=a,h=l(e,n);(null!=o?o:u||d)?s(c,h):r(a,i._`[${h}]`)},t.reportExtraError=function(e,n=t.keywordError){const{it:i}=e,{gen:a,compositeRule:c,allErrors:u}=i;s(a,l(e,n)),c||u||r(i,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(i._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(i._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:s,errsCount:r,it:a}){if(void 0===r)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",r,o.default.errors,(r=>{e.const(l,i._`${o.default.vErrors}[${r}]`),e.if(i._`${l}.dataPath === undefined`,(()=>e.assign(i._`${l}.dataPath`,i.strConcat(o.default.dataPath,a.errorPath)))),e.assign(i._`${l}.schemaPath`,i.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(i._`${l}.schema`,n),e.assign(i._`${l}.data`,s))}))};const a={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema"),instancePath:new i.Name("instancePath")};function l(e,t){const{createErrors:n,opts:o}=e.it;return!1===n?i._`{}`:(o.jtd&&!o.ajvErrors?c:u)(e,t)}function c(e,{message:t}){const{gen:n,keyword:s,it:r}=e,{errorPath:l,errSchemaPath:c,opts:u}=r,d=[[a.instancePath,i.strConcat(o.default.dataPath,l)],[a.schemaPath,i.str`${c}/${s}`]];return u.messages&&d.push([a.message,"function"==typeof t?t(e):t]),n.object(...d)}function u(e,t){const{gen:n,keyword:s,data:r,schemaValue:l,it:c}=e,{topSchemaRef:u,schemaPath:d,errorPath:h,errSchemaPath:p,propertyName:f,opts:m}=c,{params:g,message:_}=t,v=[[a.keyword,s],[o.default.dataPath,i.strConcat(o.default.dataPath,h)],[a.schemaPath,i.str`${p}/${s}`],[a.params,"function"==typeof g?g(e):g||i._`{}`]];return f&&v.push([a.propertyName,f]),m.messages&&v.push([a.message,"function"==typeof _?_(e):_]),m.verbose&&v.push([a.schema,l],[a.parentSchema,i._`${u}${d}`],[o.default.data,r]),n.object(...v)}},5173:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const i=n(3487),o=n(8727),s=n(2141),r=n(2531),a=n(6776),l=n(4815),c=n(540);class u{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:r.normalizeId(null==n?void 0:n.$id),this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function d(e){const t=p.call(this,e);if(t)return t;const n=r.getFullPath(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,d=new i.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let h;e.$async&&(h=d.scopeValue("Error",{ref:o.ValidationError,code:i._`require("ajv/dist/compile/error_classes").ValidationError`}));const f=d.scopeName("validate");e.validateName=f;const m={gen:d,allErrors:this.opts.allErrors,data:s.default.data,parentData:s.default.parentData,parentDataProperty:s.default.parentDataProperty,dataNames:[s.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:d.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:i.stringify(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:i.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:i._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),l.validateFunctionCode(m),d.optimize(this.opts.code.optimize);const t=d.toString();g=`${d.scopeRefs(s.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${s.default.self}`,`${s.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:f,validateCode:t,scopeValues:d._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof i.Name?void 0:e,items:t instanceof i.Name?void 0:t,dynamicProps:e instanceof i.Name,dynamicItems:t instanceof i.Name},n.source&&(n.source.evaluated=i.stringify(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return r.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function p(e){for(const i of this._compilations)if(n=e,(t=i).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return i;var t,n}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||m.call(this,e,t)}function m(e,t){const n=c.parse(t),i=r._getFullPath(n);let o=r.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&i===o)return _.call(this,n,e);const s=r.normalizeId(i),a=this.refs[s]||this.schemas[s];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return _.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||d.call(this,a),s===r.normalizeId(t)){const{schema:t}=a;return t.$id&&(o=r.resolveUrl(o,t.$id)),new u({schema:t,root:e,baseId:o})}return _.call(this,n,a)}}t.SchemaEnv=u,t.compileSchema=d,t.resolveRef=function(e,t,n){var i;n=r.resolveUrl(t,n);const o=e.refs[n];if(o)return o;let s=f.call(this,e,n);if(void 0===s){const o=null===(i=e.localRefs)||void 0===i?void 0:i[n];o&&(s=new u({schema:o,root:e,baseId:t}))}return void 0!==s?e.refs[n]=h.call(this,s):void 0},t.getCompilingSchema=p,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _(e,{baseId:t,schema:n,root:i}){var o;if("/"!==(null===(o=e.fragment)||void 0===o?void 0:o[0]))return;for(const i of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;if(void 0===(n=n[a.unescapeFragment(i)]))return;!g.has(i)&&"object"==typeof n&&n.$id&&(t=r.resolveUrl(t,n.$id))}let s;if("boolean"!=typeof n&&n.$ref&&!a.schemaHasRulesButRef(n,this.RULES)){const e=r.resolveUrl(t,n.$ref);s=m.call(this,i,e)}return s=s||new u({schema:n,root:i,baseId:t}),s.schema!==s.root.schema?s:void 0}},2141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={data:new i.Name("data"),valCxt:new i.Name("valCxt"),dataPath:new i.Name("dataPath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};t.default=o},2531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const i=n(6776),o=n(4063),s=n(9461),r=n(540),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&u(e)<=t)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(l.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function u(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&i.eachItem(e[n],(e=>t+=u(e))),t===1/0))return 1/0}return t}function d(e="",t){!1!==t&&(e=f(e));return h(r.parse(e))}function h(e){return r.serialize(e).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=h;const p=/#\/?$/;function f(e){return e?e.replace(p,""):""}t.normalizeId=f,t.resolveUrl=function(e,t){return t=f(t),r.resolve(e,t)};const m=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const t=f(e.$id),n={"":t},i=d(t,!1),a={},l=new Set;return s(e,{allKeys:!0},((e,t,o,s)=>{if(void 0===s)return;const d=i+t;let h=n[s];function p(t){if(t=f(h?r.resolve(h,t):t),l.has(t))throw u(t);l.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?c(e,n.schema,t):t!==f(d)&&("#"===t[0]?(c(e,a[t],t),a[t]=e):this.refs[t]=d),t}function g(e){if("string"==typeof e){if(!m.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e.$id&&(h=p.call(this,e.$id)),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),n[t]=h})),a;function c(e,t,n){if(void 0!==t&&!o(e,t))throw u(n)}function u(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},3141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},4069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applySubschema=t.Type=void 0;const i=n(4815),o=n(6776),s=n(3487);var r;!function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(r=t.Type||(t.Type={})),t.applySubschema=function(e,t,n){const a=function(e,{keyword:t,schemaProp:n,schema:i,schemaPath:r,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===n?{schema:i,schemaPath:s._`${e.schemaPath}${s.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[n],schemaPath:s._`${e.schemaPath}${s.getProperty(t)}${s.getProperty(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${o.escapeFragment(n)}`}}if(void 0!==i){if(void 0===r||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:r,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}(e,t);!function(e,t,{dataProp:n,dataPropType:i,data:a,dataTypes:l,propertyName:c}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(void 0!==n){const{errorPath:a,dataPathArr:l,opts:c}=t;d(u.let("data",s._`${t.data}${s.getProperty(n)}`,!0)),e.errorPath=s.str`${a}${function(e,t,n){if(e instanceof s.Name){const i=t===r.Num;return n?i?s._`"[" + ${e} + "]"`:s._`"['" + ${e} + "']"`:i?s._`"/" + ${e}`:s._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?s.getProperty(e).toString():"/"+o.escapeJsonPointer(e)}(n,i,c.jsPropertySyntax)}`,e.parentDataProperty=s._`${n}`,e.dataPathArr=[...l,e.parentDataProperty]}if(void 0!==a){d(a instanceof s.Name?a:u.let("data",a,!0)),void 0!==c&&(e.propertyName=c)}l&&(e.dataTypes=l);function d(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}}(a,e,t),function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:o,allErrors:s}){void 0!==i&&(e.compositeRule=i);void 0!==o&&(e.createErrors=o);void 0!==s&&(e.allErrors=s);e.jtdDiscriminator=t,e.jtdMetadata=n}(a,t);const l={...e,...a,items:void 0,props:void 0};return i.subschemaCode(l,n),l}},4776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.length;let n,i=0,o=0;for(;o<t;)i++,n=e.charCodeAt(o++),n>=55296&&n<=56319&&o<t&&(n=e.charCodeAt(o),56320==(64512&n)&&o++);return i}},6776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.func=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const i=n(3487),o=n(4815);function s(e,t=e.schema){const{opts:n,self:i}=e;if(!n.strict)return;if("boolean"==typeof t)return;const s=i.RULES.keywords;for(const n in t)s[n]||o.checkStrictMode(e,`unknown keyword: "${n}"`)}function r(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:o}){return(s,r,a,l)=>{const c=void 0===a?r:a instanceof i.Name?(r instanceof i.Name?e(s,r,a):t(s,r,a),a):r instanceof i.Name?(t(s,a,r),r):n(r,a);return l!==i.Name||c instanceof i.Name?c:o(s,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",i._`{}`);return void 0!==t&&d(e,n,t),n}function d(e,t,n){Object.keys(n).forEach((n=>e.assign(i._`${t}${i.getProperty(n)}`,!0)))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(s(e,t),!r(t,e.self.RULES.all))},t.checkUnknownRules=s,t.schemaHasRules=r,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,o,s){if(!s){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${e}${t}${i.getProperty(o)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>{e.if(i._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.code(i._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,i._`${n} || {}`),d(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,i._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>e.assign(n,!0===t||i._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=d,t.func=function(e,t){return e.scopeValue("func",{ref:t,code:t.code})}},8876:(e,t)=>{"use strict";function n(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},i){const o=t.RULES.types[i];return o&&!0!==o&&n(e,o)},t.shouldUseGroup=n,t.shouldUseRule=i},5667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const i=n(4181),o=n(3487),s=n(2141),r={message:"boolean schema is false"};function a(e,t){const{gen:n,data:o}=e,s={gen:n,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};i.reportError(s,r,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:i}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(s.default.data):(t.assign(o._`${i}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:i}=e;!1===i?(n.var(t,!1),a(e)):n.var(t,!0)}},453:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const i=n(3141),o=n(8876),s=n(4181),r=n(3487),a=n(6776);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(i.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:i,opts:s}=e,a=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,s.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&o.schemaHasRulesForType(e,t[0]));if(c){const o=h(t,i,s.strict,l.Wrong);n.if(o,(()=>{a.length?function(e,t,n){const{gen:i,data:o,opts:s}=e,a=i.let("dataType",r._`typeof ${o}`),l=i.let("coerced",r._`undefined`);"array"===s.coerceTypes&&i.if(r._`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,(()=>i.assign(o,r._`${o}[0]`).assign(a,r._`typeof ${o}`).if(h(t,o,s.strict),(()=>i.assign(l,o)))));i.if(r._`${l} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===s.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void i.elseIf(r._`${a} == "number" || ${a} == "boolean"`).assign(l,r._`"" + ${o}`).elseIf(r._`${o} === null`).assign(l,r._`""`);case"number":return void i.elseIf(r._`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(l,r._`+${o}`);case"integer":return void i.elseIf(r._`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,r._`+${o}`);case"boolean":return void i.elseIf(r._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf(r._`${o} === "true" || ${o} === 1`).assign(l,!0);case"null":return i.elseIf(r._`${o} === "" || ${o} === 0 || ${o} === false`),void i.assign(l,null);case"array":i.elseIf(r._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(l,r._`[${o}]`)}}i.else(),f(e),i.endIf(),i.if(r._`${l} !== undefined`,(()=>{i.assign(o,l),function({gen:e,parentData:t,parentDataProperty:n},i){e.if(r._`${t} !== undefined`,(()=>e.assign(r._`${t}[${n}]`,i)))}(e,l)}))}(e,t,a):f(e)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function d(e,t,n,i=l.Correct){const o=i===l.Correct?r.operators.EQ:r.operators.NEQ;let s;switch(e){case"null":return r._`${t} ${o} null`;case"array":s=r._`Array.isArray(${t})`;break;case"object":s=r._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=a(r._`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=a();break;default:return r._`typeof ${t} ${o} ${e}`}return i===l.Correct?s:r.not(s);function a(e=r.nil){return r.and(r._`typeof ${t} == "number"`,e,n?r._`isFinite(${t})`:r.nil)}}function h(e,t,n,i){if(1===e.length)return d(e[0],t,n,i);let o;const s=a.toHash(e);if(s.array&&s.object){const e=r._`typeof ${t} != "object"`;o=s.null?e:r._`!${t} || ${e}`,delete s.null,delete s.array,delete s.object}else o=r.nil;s.number&&delete s.integer;for(const e in s)o=r.and(o,d(e,t,n,i));return o}t.checkDataType=d,t.checkDataTypes=h;const p={message:({schema:e})=>r.str`should be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?r._`{type: ${e}}`:r._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:n,schema:i}=e,o=a.schemaRefOrVal(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:o,schemaValue:o,parentSchema:i,params:{},it:e}}(e);s.reportError(t,p)}t.reportTypeError=f},313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const i=n(3487),o=n(4815);function s(e,t,n){const{gen:s,compositeRule:r,data:a,opts:l}=e;if(void 0===n)return;const c=i._`${a}${i.getProperty(t)}`;if(r)return void o.checkStrictMode(e,`default is ignored for: ${c}`);let u=i._`${c} === undefined`;"empty"===l.useDefaults&&(u=i._`${u} || ${c} === null || ${c} === ""`),s.if(u,i._`${c} = ${i.stringify(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:i}=e.schema;if("object"===t&&n)for(const t in n)s(e,t,n[t].default);else"array"===t&&Array.isArray(i)&&i.forEach(((t,n)=>s(e,n,t.default)))}},4815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.schemaCxtHasRules=t.subschemaCode=t.validateFunctionCode=void 0;const i=n(5667),o=n(453),s=n(7449),r=n(3487),a=n(2141),l=n(2531),c=n(6776);function u({gen:e,validateName:t,schema:n,schemaEnv:i,opts:o},s){o.code.es5?e.func(t,r._`${a.default.data}, ${a.default.valCxt}`,i.$async,(()=>{e.code(r._`"use strict"; ${d(n,o)}`),function(e,t){e.if(a.default.valCxt,(()=>{e.var(a.default.dataPath,r._`${a.default.valCxt}.${a.default.dataPath}`),e.var(a.default.parentData,r._`${a.default.valCxt}.${a.default.parentData}`),e.var(a.default.parentDataProperty,r._`${a.default.valCxt}.${a.default.parentDataProperty}`),e.var(a.default.rootData,r._`${a.default.valCxt}.${a.default.rootData}`),t.dynamicRef&&e.var(a.default.dynamicAnchors,r._`${a.default.valCxt}.${a.default.dynamicAnchors}`)}),(()=>{e.var(a.default.dataPath,r._`""`),e.var(a.default.parentData,r._`undefined`),e.var(a.default.parentDataProperty,r._`undefined`),e.var(a.default.rootData,a.default.data),t.dynamicRef&&e.var(a.default.dynamicAnchors,r._`{}`)}))}(e,o),e.code(s)})):e.func(t,r._`${a.default.data}, ${function(e){return r._`{${a.default.dataPath}="", ${a.default.parentData}, ${a.default.parentDataProperty}, ${a.default.rootData}=${a.default.data}${e.dynamicRef?r._`, ${a.default.dynamicAnchors}={}`:r.nil}}={}`}(o)}`,i.$async,(()=>e.code(d(n,o)).code(s)))}function d(e,t){return"object"==typeof e&&e.$id&&(t.code.source||t.code.process)?r._`/*# sourceURL=${e.$id} */`:r.nil}function h({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function p(e){return"boolean"!=typeof e.schema}function f(e){c.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:n,opts:i,self:o}=e;t.$ref&&i.ignoreKeywordsWithRef&&c.schemaHasRulesButRef(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function m(e,t){if(e.opts.jtd)return s.schemaKeywords(e,[],!1,t);const n=o.getSchemaTypes(e.schema),i=o.coerceAndCheckDataType(e,n);s.schemaKeywords(e,n,!i,t)}function g({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:o}){const s=n.$comment;if(!0===o.$comment)e.code(r._`${a.default.self}.logger.log(${s})`);else if("function"==typeof o.$comment){const n=r.str`${i}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code(r._`${a.default.self}.opts.$comment(${s}, ${n}, ${o}.schema)`)}}function _(e,t,n=e.opts.strict){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.validateFunctionCode=function(e){p(e)&&(f(e),h(e))?function(e){const{schema:t,opts:n,gen:i}=e;u(e,(()=>{n.$comment&&t.$comment&&g(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strict&&_(e,"default is ignored in the schema root")}(e),i.let(a.default.vErrors,null),i.let(a.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",r._`${n}.evaluated`),t.if(r._`${e.evaluated}.dynamicProps`,(()=>t.assign(r._`${e.evaluated}.props`,r._`undefined`))),t.if(r._`${e.evaluated}.dynamicItems`,(()=>t.assign(r._`${e.evaluated}.items`,r._`undefined`)))}(e),m(e),function(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:o,opts:s}=e;n.$async?t.if(r._`${a.default.errors} === 0`,(()=>t.return(a.default.data)),(()=>t.throw(r._`new ${o}(${a.default.vErrors})`))):(t.assign(r._`${i}.errors`,a.default.vErrors),s.unevaluated&&function({gen:e,evaluated:t,props:n,items:i}){n instanceof r.Name&&e.assign(r._`${t}.props`,n);i instanceof r.Name&&e.assign(r._`${t}.items`,i)}(e),t.return(r._`${a.default.errors} === 0`))}(e)}))}(e):u(e,(()=>i.topBoolOrEmptySchema(e)))},t.subschemaCode=function(e,t){p(e)&&(f(e),h(e))?function(e,t){const{schema:n,gen:i,opts:o}=e;o.$comment&&n.$comment&&g(e);(function(e){e.schema.$id&&(e.baseId=l.resolveUrl(e.baseId,e.schema.$id))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const s=i.const("_errs",a.default.errors);m(e,s),i.var(t,r._`${s} === ${a.default.errors}`)}(e,t):i.boolOrEmptySchema(e,t)},t.schemaCxtHasRules=h,t.checkStrictMode=_},7449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schemaKeywords=void 0;const i=n(8876),o=n(453),s=n(313),r=n(5005),a=n(6776),l=n(4815),c=n(3487),u=n(2141);function d(e,t){const{gen:n,schema:o,opts:{useDefaults:a}}=e;a&&s.assignDefaults(e,t.type),n.block((()=>{for(const n of t.rules)i.shouldUseRule(o,n)&&r.keywordCode(e,n.keyword,n.definition,t.type)}))}function h(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function p(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function f(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,l.checkStrictMode(e,t,e.opts.strictTypes)}t.schemaKeywords=function(e,t,n,s){const{gen:l,schema:m,data:g,allErrors:_,opts:v,self:y}=e,{RULES:b}=y;function x(r){i.shouldUseGroup(m,r)&&(r.type?(l.if(o.checkDataType(r.type,g,v.strict)),d(e,r),1===t.length&&t[0]===r.type&&n&&(l.else(),o.reportTypeError(e)),l.endIf()):d(e,r),_||l.if(c._`${u.default.errors} === ${s||0}`))}!m.$ref||!v.ignoreKeywordsWithRef&&a.schemaHasRulesButRef(m,b)?(v.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{p(e.dataTypes,t)||f(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>p(t,e)))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&f(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const o in n){const s=n[o];if("object"==typeof s&&i.shouldUseRule(e.schema,s)){const{type:n}=s.definition;n.length&&!n.some((e=>h(t,e)))&&f(e,`missing type "${n.join(",")}" for keyword "${o}"`)}}}(e,e.dataTypes)}(e,t),l.block((()=>{for(const e of b.rules)x(e);x(b.post)}))):l.block((()=>r.keywordCode(e,"$ref",b.all.$ref.definition)))}},5005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keywordCode=void 0;const i=n(2227),o=n(4181),s=n(412),r=n(3487),a=n(2141);function l(e,t){var n;const{gen:i,keyword:l,schema:d,parentSchema:h,$data:p,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!p&&t.compile?t.compile.call(f.self,d,h,f):t.validate,g=u(i,l,m),_=i.let("valid");function v(n=(t.async?r._`await `:r.nil)){const o=f.opts.passContext?a.default.this:a.default.self,l=!("compile"in t&&!p||!1===t.schema);i.assign(_,r._`${n}${s.callValidateCode(e,g,o,l)}`,t.modifying)}function y(e){var n;i.if(r.not(null!==(n=t.valid)&&void 0!==n?n:_),e)}e.block$data(_,(function(){if(!1===t.errors)v(),t.modifying&&c(e),y((()=>e.error()));else{const n=t.async?function(){const e=i.let("ruleErrs",null);return i.try((()=>v(r._`await `)),(t=>i.assign(_,!1).if(r._`${t} instanceof ${f.ValidationError}`,(()=>i.assign(e,r._`${t}.errors`)),(()=>i.throw(t))))),e}():function(){const e=r._`${g}.errors`;return i.assign(e,null),v(r.nil),e}();t.modifying&&c(e),y((()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,(()=>{n.assign(a.default.vErrors,r._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`).assign(a.default.errors,r._`${a.default.vErrors}.length`),o.extendErrors(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:_)}function c(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,(()=>t.assign(n,r._`${i.parentData}[${i.parentDataProperty}]`)))}function u(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:r.stringify(n)})}t.keywordCode=function(e,t,n,o){const s=new i.default(e,n,t);"code"in n?n.code(s,o):s.$data&&n.validate?l(s,n):"macro"in n?function(e,t){const{gen:n,keyword:i,schema:o,parentSchema:s,it:a}=e,l=t.macro.call(a.self,o,s,a),c=u(n,i,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const d=n.name("valid");e.subschema({schema:l,schemaPath:r.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,(()=>e.error(!0)))}(s,n):(n.compile||n.validate)&&l(s,n)}},7159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const i=n(2227);t.KeywordCxt=i.default;var o=n(3487);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return o.CodeGen}});const s=n(8727),r=n(3141),a=n(5173),l=n(3487),c=n(2531),u=n(453),d=n(6776),h=n(2228),p=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function _(e){var t,n,i,o,s,r,a,l,c,u,d,h;const p=null===(t=e.strict)||void 0===t||t,f=!!p&&"log",m=null===(n=e.code)||void 0===n?void 0:n.optimize,g=!0===m||void 0===m?1:m||0;return{strict:p,strictTypes:null!==(i=e.strictTypes)&&void 0!==i?i:f,strictTuples:null!==(o=e.strictTuples)&&void 0!==o?o:f,code:e.code?{...e.code,optimize:g}:{optimize:g},loopRequired:null!==(s=e.loopRequired)&&void 0!==s?s:1/0,loopEnum:null!==(r=e.loopEnum)&&void 0!==r?r:1/0,meta:null===(a=e.meta)||void 0===a||a,messages:null===(l=e.messages)||void 0===l||l,inlineRefs:null===(c=e.inlineRefs)||void 0===c||c,addUsedSchema:null===(u=e.addUsedSchema)||void 0===u||u,validateSchema:null===(d=e.validateSchema)||void 0===d||d,validateFormats:null===(h=e.validateFormats)||void 0===h||h}}class v{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,..._(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:f,es5:t,lines:n}),this.logger=function(e){if(!1===e)return $;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const i=e.validateFormats;e.validateFormats=!1,this.RULES=r.getRules(),y.call(this,m,e,"NOT SUPPORTED"),y.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=C.call(this),e.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&k.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t}=this.opts;t&&e&&this.addMetaSchema(h,h.$id,!1)}defaultMeta(){const{meta:e}=this.opts;return this.opts.defaultMeta="object"==typeof e?e.$id||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const i=n(t);return"$async"in n||(this.errors=n.errors),i}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,e,t);async function i(e,t){await o.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||r.call(this,n)}async function o(e){e&&!this.getSchema(e)&&await i.call(this,{$ref:e},!0)}async function r(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.MissingRefError))throw t;return a.call(this,t),await l.call(this,t.missingSchema),r.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await o.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,i);return this}let o;if("object"==typeof e&&(o=e.$id,void 0!==o&&"string"!=typeof o))throw new Error("schema id must be string");return t=c.normalizeId(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,i,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,e);if(!i&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return i}getSchema(e){let t;for(;"string"==typeof(t=b.call(this,e));)e=t;if(void 0===t){const n=new a.SchemaEnv({schema:{}});if(t=a.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=b.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e.$id;return n&&(n=c.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(E.call(this,n,t),!t)return d.eachItem(n,(e=>T.call(this,e))),this;A.call(this,t);const i={...t,type:u.getJSONTypes(t.type),schemaType:u.getJSONTypes(t.schemaType)};return d.eachItem(n,0===i.type.length?e=>T.call(this,e,i):e=>i.type.forEach((t=>T.call(this,e,i,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.dataPath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const i of t){const t=i.split("/").slice(1);let o=e;for(const e of t)o=o[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:i}=t.definition,s=o[e];i&&s&&(o[e]=O(s))}}return e}_removeAllSchemas(e,t){for(const n in e){const i=e[n];t&&!t.test(n)||("string"==typeof i?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,t,n=this.opts.validateSchema,i=this.opts.addUsedSchema){if("object"!=typeof e){if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let o=this._cache.get(e);if(void 0!==o)return o;const s=c.getSchemaRefs.call(this,e);o=new a.SchemaEnv({schema:e,meta:t,localRefs:s}),this._cache.set(o.schema,o);const r=o.baseId;return i&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=o),n&&this.validateSchema(e,!0),o}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}function y(e,t,n,i="error"){for(const o in e){const s=o;s in t&&this.logger[i](`${n}: option ${o}. ${e[s]}`)}}function b(e){return e=c.normalizeId(e),this.schemas[e]||this.refs[e]}function x(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function w(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function C(){const e={...this.opts};for(const t of p)delete e[t];return e}t.default=v,v.ValidationError=s.ValidationError,v.MissingRefError=s.MissingRefError;const $={log(){},warn(){},error(){}};const S=/^[a-z_$][a-z0-9_$:-]*$/i;function E(e,t){const{RULES:n}=this;if(d.eachItem(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!S.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function T(e,t,n){var i;const o=null==t?void 0:t.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:s}=this;let r=o?s.post:s.rules.find((({type:e})=>e===n));if(r||(r={type:n,rules:[]},s.rules.push(r)),s.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:u.getJSONTypes(t.type),schemaType:u.getJSONTypes(t.schemaType)}};t.before?D.call(this,r,a,t.before):r.rules.push(a),s.all[e]=a,null===(i=t.implements)||void 0===i||i.forEach((e=>this.addKeyword(e)))}function D(e,t,n){const i=e.rules.findIndex((e=>e.keyword===n));i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function A(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=O(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function O(e){return{anyOf:[e,N]}}},2228:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},278:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},4783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4069),s=n(6776),r=n(4815),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`should NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e,{items:u}=a;if(!Array.isArray(u))return void r.checkStrictMode(c,'"additionalItems" is ignored when "items" is not an array of schemas');c.items=!0;const d=t.const("len",i._`${l}.length`);if(!1===n)e.setParams({len:u.length}),e.pass(i._`${d} <= ${u.length}`);else if("object"==typeof n&&!s.alwaysValidSchema(c,n)){const n=t.var("valid",i._`${d} <= ${u.length}`);t.if(i.not(n),(()=>function(n){t.forRange("i",u.length,d,(s=>{e.subschema({keyword:"additionalItems",dataProp:s,dataPropType:o.Type.Num},n),c.allErrors||t.if(i.not(n),(()=>t.break()))}))}(n))),e.ok(n)}}};t.default=a},9351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),s=n(2141),r=n(4069),a=n(6776),l={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:e})=>o._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:l,data:c,errsCount:u,it:d}=e;if(!u)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,"all"!==p.removeAdditional&&a.alwaysValidSchema(d,n))return;const f=i.allSchemaProperties(l.properties),m=i.allSchemaProperties(l.patternProperties);function g(e){t.code(o._`delete ${c}[${e}]`)}function _(i){if("all"===p.removeAdditional||p.removeAdditional&&!1===n)g(i);else{if(!1===n)return e.setParams({additionalProperty:i}),e.error(),void(h||t.break());if("object"==typeof n&&!a.alwaysValidSchema(d,n)){const n=t.name("valid");"failing"===p.removeAdditional?(v(i,n,!1),t.if(o.not(n),(()=>{e.reset(),g(i)}))):(v(i,n),h||t.if(o.not(n),(()=>t.break())))}}}function v(t,n,i){const o={keyword:"additionalProperties",dataProp:t,dataPropType:r.Type.Str};!1===i&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,n)}t.forIn("key",c,(e=>{f.length||m.length?t.if(function(e){let n;if(f.length>8){const o=a.schemaRefOrVal(d,l.properties,"properties");n=i.isOwnProperty(t,o,e)}else n=f.length?o.or(...f.map((t=>o._`${e} === ${t}`))):o.nil;return m.length&&(n=o.or(n,...m.map((n=>o._`${i.usePattern(t,n)}.test(${e})`)))),o.not(n)}(e),(()=>_(e))):_(e)})),e.ok(o._`${u} === ${s.default.errors}`)}};t.default=l},1125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),o={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=t.name("valid");n.forEach(((t,n)=>{if(i.alwaysValidSchema(o,t))return;const r=e.subschema({keyword:"allOf",schemaProp:n},s);e.ok(s),e.mergeEvaluated(r)}))}};t.default=o},19:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(412).validateUnion,error:{message:"should match some schema in anyOf"}};t.default=i},9864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4069),s=n(6776),r=n(4815),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?i.str`should contain at least ${e} valid item(s)`:i.str`should contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?i._`{minContains: ${e}}`:i._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;let u,d;const{minContains:h,maxContains:p}=a;c.opts.next?(u=void 0===h?1:h,d=p):u=1;const f=t.const("len",i._`${l}.length`);if(e.setParams({min:u,max:d}),void 0===d&&0===u)return void r.checkStrictMode(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==d&&u>d)return r.checkStrictMode(c,'"minContains" > "maxContains" is always invalid'),void e.fail();if(s.alwaysValidSchema(c,n)){let t=i._`${f} >= ${u}`;return void 0!==d&&(t=i._`${t} && ${f} <= ${d}`),void e.pass(t)}c.items=!0;const m=t.name("valid");if(void 0===d&&1===u)g(m,(()=>t.if(m,(()=>t.break()))));else{t.let(m,!1);const e=t.name("_valid"),n=t.let("count",0);g(e,(()=>t.if(e,(()=>function(e){t.code(i._`${e}++`),void 0===d?t.if(i._`${e} >= ${u}`,(()=>t.assign(m,!0).break())):(t.if(i._`${e} > ${d}`,(()=>t.assign(m,!1).break())),1===u?t.assign(m,!0):t.if(i._`${e} >= ${u}`,(()=>t.assign(m,!0))))}(n)))))}function g(n,i){t.forRange("i",0,f,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:o.Type.Num,compositeRule:!0},n),i()}))}e.result(m,(()=>e.reset()))}};t.default=a},7772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const i=n(3487),o=n(6776),s=n(412);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const o=1===t?"property":"properties";return i.str`should have ${o} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:o}})=>i._`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${n}}`};const r={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const i in e){if("__proto__"===i)continue;(Array.isArray(e[i])?t:n)[i]=e[i]}return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:o,it:r}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=s.propertyInData(n,o,l,r.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),r.allErrors?n.if(u,(()=>{for(const t of c)s.checkReportMissingProp(e,t)})):(n.if(i._`${u} && (${s.checkMissingProp(e,c,a)})`),s.reportMissingProp(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:i,keyword:r,it:a}=e,l=n.name("valid");for(const c in t)o.alwaysValidSchema(a,t[c])||(n.if(s.propertyInData(n,i,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:r,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=r},9434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),s=n(4815),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>i.str`should match "${e.ifClause}" schema`,params:({params:e})=>i._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&s.checkStrictMode(o,'"if" without "then" and "else" is ignored');const r=a(o,"then"),l=a(o,"else");if(!r&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),r&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,d("then",n),d("else",n))}else r?t.if(u,d("then")):t.if(i.not(u),d("else"));function d(n,o){return()=>{const s=e.subschema({keyword:n},u);t.assign(c,u),e.mergeValidEvaluated(s,c),o?t.assign(o,i._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}};function a(e,t){const n=e.schema[t];return void 0!==n&&!o.alwaysValidSchema(e,n)}t.default=r},8200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4783),o=n(4665),s=n(9864),r=n(7772),a=n(3708),l=n(9351),c=n(6239),u=n(2296),d=n(5697),h=n(19),p=n(4200),f=n(1125),m=n(9434),g=n(6552),_=[d.default,h.default,p.default,f.default,m.default,g.default,i.default,o.default,s.default,a.default,l.default,r.default,c.default,u.default];t.default=_},4665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),s=n(4815),r=n(412),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{gen:t,schema:n,it:a}=e;if(Array.isArray(n))a.opts.unevaluated&&n.length&&!0!==a.items&&(a.items=o.mergeEvaluated.items(t,n.length,a.items)),function(n){const{parentSchema:r,data:l}=e;if(a.opts.strictTuples&&!function(e,t){return e===t.minItems&&(e===t.maxItems||!1===t.additionalItems)}(n.length,r)){const e=`"items" is ${n.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;s.checkStrictMode(a,e,a.opts.strictTuples)}const c=t.name("valid"),u=t.const("len",i._`${l}.length`);n.forEach(((n,s)=>{o.alwaysValidSchema(a,n)||(t.if(i._`${u} > ${s}`,(()=>e.subschema({keyword:"items",schemaProp:s,dataProp:s},c))),e.ok(c))}))}(n);else{if(a.items=!0,o.alwaysValidSchema(a,n))return;e.ok(r.validateArray(e))}}};t.default=a},5697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6776),o={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:o}=e;if(i.alwaysValidSchema(o,n))return void e.fail();const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.result(s,(()=>e.error()),(()=>e.reset()))},error:{message:"should NOT be valid"}};t.default=o},4200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),s={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:e})=>i._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const r=n,a=t.let("valid",!1),l=t.let("passing",null),c=t.name("_valid");e.setParams({passing:l}),t.block((function(){r.forEach(((n,r)=>{let u;o.alwaysValidSchema(s,n)?t.var(c,!0):u=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},c),r>0&&t.if(i._`${c} && ${a}`).assign(a,!1).assign(l,i._`[${l}, ${r}]`).else(),t.if(c,(()=>{t.assign(a,!0),t.assign(l,r),u&&e.mergeEvaluated(u,i.Name)}))}))})),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}};t.default=s},2296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),s=n(4069),r=n(4815),a=n(6776),l={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:l,parentSchema:c,it:u}=e,{opts:d}=u,h=i.schemaProperties(u,n);if(0===h.length)return;const p=d.strict&&!d.allowMatchingProperties&&c.properties,f=t.name("valid");!0===u.props||u.props instanceof o.Name||(u.props=a.evaluatedPropsToName(t,u.props));const{props:m}=u;function g(e){for(const t in p)new RegExp(e).test(t)&&r.checkStrictMode(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function _(n){t.forIn("key",l,(r=>{t.if(o._`${i.usePattern(t,n)}.test(${r})`,(()=>{e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:s.Type.Str},f),u.opts.unevaluated&&!0!==m?t.assign(o._`${m}[${r}]`,!0):u.allErrors||t.if(o.not(f),(()=>t.break()))}))}))}!function(){for(const e of h)p&&g(e),u.allErrors?_(e):(t.var(f,!0),_(e),t.if(f))}()}};t.default=l},6239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2227),o=n(412),s=n(6776),r=n(9351),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&r.default.code(new i.default(c,r.default,"additionalProperties"));const u=o.allSchemaProperties(n);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=s.mergeEvaluated.props(t,s.toHash(u),c.props));const d=u.filter((e=>!s.alwaysValidSchema(c,n[e])));if(0===d.length)return;const h=t.name("valid");for(const n of d)p(n)?f(n):(t.if(o.propertyInData(t,l,n,c.opts.ownProperties)),f(n),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(h);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},3708:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(6776),s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:e})=>i.str`property name '${e.propertyName}' is invalid`,params:({params:e})=>i._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:s,it:r}=e;if(o.alwaysValidSchema(r,n))return;const a=t.name("valid");t.forIn("key",s,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if(i.not(a),(()=>{e.error(!0),r.allErrors||t.break()}))})),e.ok(a)}};t.default=s},6552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4815),o={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&i.checkStrictMode(n,`"${e}" without "if" is ignored`)}};t.default=o},412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const i=n(3487),o=n(6776),s=n(4069),r=n(2141);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:i._`Object.prototype.hasOwnProperty`})}function l(e,t,n){return i._`${a(e)}.call(${t}, ${n})`}function c(e,t,n,o){const s=i._`${t}${i.getProperty(n)} === undefined`;return o?i._`${s} || !${l(e,t,n)}`:s}function u(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:o,it:s}=e;n.if(c(n,o,t,s.opts.ownProperties),(()=>{e.setParams({missingProperty:i._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},o,s){return i.or(...o.map((o=>i._`${c(e,t,o,n.ownProperties)} && (${s} = ${o})`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,n,o){const s=i._`${t}${i.getProperty(n)} !== undefined`;return o?i._`${s} && ${l(e,t,n)}`:s},t.noPropertyInData=c,t.allSchemaProperties=u,t.schemaProperties=function(e,t){return u(t).filter((n=>!o.alwaysValidSchema(e,t[n])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:o,schemaPath:s,errorPath:a},it:l},c,u,d){const h=d?i._`${e}, ${t}, ${o}${s}`:t,p=[[r.default.dataPath,i.strConcat(r.default.dataPath,a)],[r.default.parentData,l.parentData],[r.default.parentDataProperty,l.parentDataProperty],[r.default.rootData,r.default.rootData]];l.opts.dynamicRef&&p.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const f=i._`${h}, ${n.object(...p)}`;return u!==i.nil?i._`${c}.call(${u}, ${f})`:i._`${c}(${f})`},t.usePattern=function(e,t){return e.scopeValue("pattern",{key:t,ref:new RegExp(t,"u"),code:i._`new RegExp(${t}, "u")`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:r}=e,a=t.name("valid");if(r.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(r){const l=t.const("len",i._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:o,dataProp:n,dataPropType:s.Type.Num},a),t.if(i.not(a),r)}))}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:s,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>o.alwaysValidSchema(r,e)))&&!r.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,o)=>{const r=e.subschema({keyword:s,schemaProp:o,compositeRule:!0},l);t.assign(a,i._`${a} || ${l}`);e.mergeValidEvaluated(r,l)||t.if(i.not(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},8386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},5684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8386),o=n(8280),s=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,o.default];t.default=s},8280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const i=n(8727),o=n(412),s=n(3487),r=n(2141),a=n(5173),l=n(6776),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:o}=e,{baseId:r,schemaEnv:l,validateName:c,opts:h,self:p}=o;if("#"===n||"#/"===n)return function(){if(l===l.root)return d(e,c,l,l.$async);const n=t.scopeValue("root",{ref:l.root});return d(e,s._`${n}.validate`,l.root,l.root.$async)}();const f=a.resolveRef.call(p,l.root,r,n);if(void 0===f)throw new i.MissingRefError(r,n);return f instanceof a.SchemaEnv?function(t){const n=u(e,t);d(e,n,t,t.$async)}(f):function(i){const o=t.scopeValue("schema",!0===h.code.source?{ref:i,code:s.stringify(i)}:{ref:i}),r=t.name("valid"),a=e.subschema({schema:i,dataTypes:[],schemaPath:s.nil,topSchemaRef:o,errSchemaPath:n},r);e.mergeEvaluated(a),e.ok(r)}(f)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):s._`${n.scopeValue("wrapper",{ref:t})}.validate`}function d(e,t,n,i){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:d,opts:h}=c,p=h.passContext?r.default.this:s.nil;function f(e){const t=s._`${e}.errors`;a.assign(r.default.vErrors,s._`${r.default.vErrors} === null ? ${t} : ${r.default.vErrors}.concat(${t})`),a.assign(r.default.errors,s._`${r.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const i=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(i&&!i.dynamicProps)void 0!==i.props&&(c.props=l.mergeEvaluated.props(a,i.props,c.props));else{const t=a.var("props",s._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,s.Name)}if(!0!==c.items)if(i&&!i.dynamicItems)void 0!==i.items&&(c.items=l.mergeEvaluated.items(a,i.items,c.items));else{const t=a.var("items",s._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,s.Name)}}i?function(){if(!d.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(s._`await ${o.callValidateCode(e,t,p)}`),m(t),u||a.assign(n,!0)}),(e=>{a.if(s._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),f(e),u||a.assign(n,!1)})),e.ok(n)}():e.result(o.callValidateCode(e,t,p),(()=>m(t)),(()=>f(t)))}t.getValidate=u,t.callRef=d,t.default=c},3924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5684),o=n(2649),s=n(8200),r=n(9502),a=n(6167),l=[i.default,o.default,s.default,r.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},9651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`should match format "${e}"`,params:({schemaCode:e})=>i._`{format: ${e}}`},code(e,t){const{gen:n,data:o,$data:s,schema:r,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:h}=l;c.validateFormats&&(s?function(){const s=n.scopeValue("formats",{ref:h.formats,code:c.code.formats}),r=n.const("fDef",i._`${s}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(i._`typeof ${r} == "object" && !(${r} instanceof RegExp)`,(()=>n.assign(l,i._`${r}.type || "string"`).assign(u,i._`${r}.validate`)),(()=>n.assign(l,i._`"string"`).assign(u,r))),e.fail$data(i.or(!1===c.strict?i.nil:i._`${a} && !${u}`,function(){const e=d.$async?i._`(${r}.async ? await ${u}(${o}) : ${u}(${o}))`:i._`${u}(${o})`,n=i._`(typeof ${u} == "function" ? ${e} : ${u}.test(${o}))`;return i._`${u} && ${u} !== true && ${l} === ${t} && !${n}`}()))}():function(){const s=h.formats[r];if(!s)return void function(){if(!1===c.strict)return void h.logger.warn(e());throw new Error(e());function e(){return`unknown format "${r}" ignored in schema at path "${u}"`}}();if(!0===s)return;const[a,l,p]=function(e){const t=n.scopeValue("formats",{key:r,ref:e,code:c.code.formats?i._`${c.code.formats}${i.getProperty(r)}`:void 0});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,i._`${t}.validate`];return["string",e,t]}(s);a===t&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!d.$async)throw new Error("async format in sync schema");return i._`await ${p}(${o})`}return"function"==typeof l?i._`${p}(${o})`:i._`${p}.test(${o})`}())}())}};t.default=o},9502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=[n(9651).default];t.default=i},6167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},4693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4063),s={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:e})=>i._`{allowedValue: ${e}}`},code(e){const t=e.gen.scopeValue("func",{ref:o,code:i._`require("ajv/dist/compile/equal")`});e.fail$data(i._`!${t}(${e.data}, ${e.schemaCode})`)}};t.default=s},966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4063),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:e})=>i._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:r,schemaCode:a,it:l}=e;if(!s&&0===r.length)throw new Error("enum must have non-empty array");const c=r.length>=l.opts.loopEnum,u=e.gen.scopeValue("func",{ref:o,code:i._`require("ajv/dist/compile/equal")`});let d;if(c||s)d=t.let("valid"),e.block$data(d,(function(){t.assign(d,!1),t.forOf("v",a,(e=>t.if(i._`${u}(${n}, ${e})`,(()=>t.assign(d,!0).break()))))}));else{if(!Array.isArray(r))throw new Error("ajv implementation error");const e=t.const("vSchema",a);d=i.or(...r.map(((t,o)=>function(e,t){const o=r[t];return o&&"object"==typeof o?i._`${u}(${n}, ${e}[${t}])`:i._`${n} === ${o}`}(e,o))))}e.pass(d)}};t.default=s},2649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3983),o=n(430),s=n(3229),r=n(4336),a=n(498),l=n(3301),c=n(1687),u=n(2958),d=n(4693),h=n(966),p=[i.default,o.default,s.default,r.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,h.default];t.default=p},1687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:o}=e,s="maxItems"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`${n}.length ${s} ${o}`)}};t.default=o},3229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=n(4776),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s,it:r}=e,a="maxLength"===t?i.operators.GT:i.operators.LT;let l;if(!1===r.opts.unicode)l=i._`${n}.length`;else{const t=e.gen.scopeValue("func",{ref:o.default,code:i._`require("ajv/dist/compile/ucs2length").default`});l=i._`${t}(${n})`}e.fail$data(i._`${l} ${a} ${s}`)}};t.default=s},3983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o=i.operators,s={maximum:{okStr:"<=",ok:o.LTE,fail:o.GT},minimum:{okStr:">=",ok:o.GTE,fail:o.LT},exclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},exclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},r={message:({keyword:e,schemaCode:t})=>i.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${s[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(s),type:"number",schemaType:"number",$data:!0,error:r,code(e){const{keyword:t,data:n,schemaCode:o}=e;e.fail$data(i._`${n} ${s[t].fail} ${o} || isNaN(${n})`)}};t.default=a},498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:o}=e,s="maxProperties"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`Object.keys(${n}).length ${s} ${o}`)}};t.default=o},430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3487),o={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>i.str`should be multiple of ${e}`,params:({schemaCode:e})=>i._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:o,it:s}=e,r=s.opts.multipleOfPrecision,a=t.let("res"),l=r?i._`Math.abs(Math.round(${a}) - ${a}) > 1e-${r}`:i._`${a} !== parseInt(${a})`;e.fail$data(i._`(${o} === 0 || (${a} = ${n}/${o}, ${l}))`)}};t.default=o},4336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),s={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>o.str`should match pattern "${e}"`,params:({schemaCode:e})=>o._`{pattern: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:r,schemaCode:a}=e,l=s?o._`(new RegExp(${a}, "u"))`:i.usePattern(t,r);e.fail$data(o._`!${l}.test(${n})`)}};t.default=s},3301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(412),o=n(3487),s=n(4815),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>o.str`should have required property '${e}'`,params:({params:{missingProperty:e}})=>o._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:r,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===n.length)return;const d=n.length>=u.loopRequired;if(c.allErrors?function(){if(d||l)e.block$data(o.nil,h);else for(const t of n)i.checkReportMissingProp(e,t)}():function(){const s=t.let("missing");if(d||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,s){e.setParams({missingProperty:n}),t.forOf(n,r,(()=>{t.assign(s,i.propertyInData(t,a,n,u.ownProperties)),t.if(o.not(s),(()=>{e.error(),t.break()}))}),o.nil)}(s,n))),e.ok(n)}else t.if(i.checkMissingProp(e,n,s)),i.reportMissingProp(e,s),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:i}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!i.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;s.checkStrictMode(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",r,(n=>{e.setParams({missingProperty:n}),t.if(i.noPropertyInData(t,a,n,u.ownProperties),(()=>e.error()))}))}}};t.default=r},2958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(453),o=n(3487),s=n(4063),r={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>o.str`should NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>o._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:r,schema:a,parentSchema:l,schemaCode:c,it:u}=e;if(!r&&!a)return;const d=t.let("valid"),h=l.items?i.getSchemaTypes(l.items):[];function p(s,r){const a=t.name("item"),l=i.checkDataTypes(h,a,u.opts.strict,i.DataType.Wrong),c=t.const("indices",o._`{}`);t.for(o._`;${s}--;`,(()=>{t.let(a,o._`${n}[${s}]`),t.if(l,o._`continue`),h.length>1&&t.if(o._`typeof ${a} == "string"`,o._`${a} += "_"`),t.if(o._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(r,o._`${c}[${a}]`),e.error(),t.assign(d,!1).break()})).code(o._`${c}[${a}] = ${s}`)}))}function f(i,r){const a=e.gen.scopeValue("func",{ref:s,code:o._`require("ajv/dist/compile/equal")`}),l=t.name("outer");t.label(l).for(o._`;${i}--;`,(()=>t.for(o._`${r} = ${i}; ${r}--;`,(()=>t.if(o._`${a}(${n}[${i}], ${n}[${r}])`,(()=>{e.error(),t.assign(d,!1).break(l)}))))))}e.block$data(d,(function(){const i=t.let("i",o._`${n}.length`),s=t.let("j");e.setParams({i,j:s}),t.assign(d,!0),t.if(o._`${i} > 1`,(()=>(h.length>0&&!h.some((e=>"object"===e||"array"===e))?p:f)(i,s)))}),o._`${c} === false`),e.ok(d)}};t.default=r},8307:function(e,t){var n;!function(i){"use strict";var o=":not(:disabled):not(.ajs-reset)",s=13,r=27,a=112,l=123,c=37,u=39,d=9,h={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+o].join(o+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},p=[];function f(e,t){e.className+=" "+t}function m(e,t){for(var n=e.className.split(" "),i=t.split(" "),o=0;o<i.length;o+=1){var s=n.indexOf(i[o]);s>-1&&n.splice(s,1)}e.className=n.join(" ")}function g(){return"rtl"===i.getComputedStyle(document.body).direction}function _(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function v(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function y(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function b(e){if(null===e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n+=1)t.push(b(e[n]));return t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return(t=new RegExp(e.source)).global=e.global,t.ignoreCase=e.ignoreCase,t.multiline=e.multiline,t.lastIndex=e.lastIndex,t;if("object"==typeof e){for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=b(e[i]));return t}return e}function x(e,t){if(e.elements){var n=e.elements.root;n.parentNode.removeChild(n),delete e.elements,e.settings=b(e.__settings),e.__init=t,delete e.__internal}}var w=!1;try{var k=Object.defineProperty({},"passive",{get:function(){w=!0}});i.addEventListener("test",k,k),i.removeEventListener("test",k,k)}catch(e){}var C=function(e,t,n,i,o){e.addEventListener(t,n,w?{capture:i,passive:o}:!0===i)},$=function(e,t,n,i,o){e.removeEventListener(t,n,w?{capture:i,passive:o}:!0===i)},S=function(){var e,t,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==document.documentElement.style[e]){t=i[e],n=!0;break}return{type:t,supported:n}}();function E(e,t){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(e),t.apply(e,n)}return t.apply(e,[null,e])}}function T(e,t){return{index:e,button:t,cancel:!1}}function D(e,t){if("function"==typeof t.get(e))return t.get(e).call(t)}var A=function(){var e,t,n=[],o=!1,s=i.navigator.userAgent.indexOf("Safari")>-1&&i.navigator.userAgent.indexOf("Chrome")<0,w='<div class="ajs-dimmer"></div>',k='<div class="ajs-modal" tabindex="0"></div>',A='<div class="ajs-dialog" tabindex="0"></div>',N='<button class="ajs-reset"></button>',P='<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',j='<div class="ajs-header"></div>',M='<div class="ajs-body"></div>',I='<div class="ajs-content"></div>',R='<div class="ajs-footer"></div>',L={primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},z='<button class="ajs-button"></button>',F='<div class="ajs-handle"></div>',H="ajs-in",B="ajs-out",W="alertify",q="ajs-basic",V="ajs-capture",U="ajs-closable",G="ajs-fixed",K="ajs-frameless",J="ajs-hidden",X="ajs-maximized",Y="ajs-maximizable",Q="ajs-modeless",Z="ajs-movable",ee="ajs-no-selection",te="ajs-no-overflow",ne="ajs-no-padding",ie="ajs-pinnable",oe="ajs-",se="ajs-resizable",re="ajs-shake",ae="ajs-unpinned",le="ajs-no-transition";function ce(e){if(!e.__internal){var t;O.defaults.hooks.preinit(e),delete e.__init,e.__settings||(e.__settings=b(e.settings)),"function"==typeof e.setup?((t=e.setup()).options=t.options||{},t.focus=t.focus||{}):t={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof e.hooks&&(e.hooks={});var i=[];if(Array.isArray(t.buttons))for(var o=0;o<t.buttons.length;o+=1){var s=t.buttons[o],r={};for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);i.push(r)}var l=e.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:i,focus:t.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};c.root=document.createElement("div"),c.root.style.display="none",c.root.className=W+" "+J+" ",c.root.innerHTML=w+k,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=A,c.dialog=c.modal.firstChild,c.dialog.innerHTML=N+P+j+M+R+F+N,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=I,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=L.auxiliary+L.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=z,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<e.__internal.buttons.length;u+=1){var d=e.__internal.buttons[u];for(var h in n.indexOf(d.key)<0&&n.push(d.key),d.element=c.buttonTemplate.cloneNode(),d.element.innerHTML=d.text,"string"==typeof d.className&&""!==d.className&&f(d.element,d.className),d.attrs)"className"!==h&&d.attrs.hasOwnProperty(h)&&d.element.setAttribute(h,d.attrs[h]);"auxiliary"===d.scope?c.buttons.auxiliary.appendChild(d.element):c.buttons.primary.appendChild(d.element)}for(var p in e.elements=c,l.resetHandler=E(e,Re),l.beginMoveHandler=E(e,Qe),l.beginResizeHandler=E(e,at),l.bringToFrontHandler=E(e,me),l.modalClickHandler=E(e,De),l.buttonsClickHandler=E(e,Pe),l.commandsClickHandler=E(e,ye),l.transitionInHandler=E(e,Fe),l.transitionOutHandler=E(e,He),l.options)void 0!==t.options[p]?e.set(p,t.options[p]):O.defaults.hasOwnProperty(p)?e.set(p,O.defaults[p]):"title"===p&&e.set(p,O.defaults.glossary[p]);"function"==typeof e.build&&e.build(),O.defaults.hooks.postinit(e)}document.body.appendChild(e.elements.root)}function ue(){i.scrollTo(e,t)}function de(){for(var e=0,t=0;t<p.length;t+=1){var n=p[t];(n.isModal()||n.isMaximized())&&(e+=1)}0===e&&document.body.className.indexOf(te)>=0?(m(document.body,te),fe(!1)):e>0&&document.body.className.indexOf(te)<0&&(fe(!0),f(document.body,te))}var he="",pe=0;function fe(e){O.defaults.preventBodyShift&&(e&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(pe=t,he=i.getComputedStyle(document.body).top,f(document.body,G),document.body.style.top=-t+"px"):e||(t=pe,document.body.style.top=he,m(document.body,G),ue()))}function me(e,t){for(var n=p.indexOf(t)+1;n<p.length;n+=1)if(p[n].isModal())return;return document.body.lastChild!==t.elements.root&&(document.body.appendChild(t.elements.root),p.splice(p.indexOf(t),1),p.push(t),Ie(t)),!1}function ge(e,t,n,i){switch(t){case"title":e.setHeader(i);break;case"modal":!function(e){e.get("modal")?(m(e.elements.root,Q),e.isOpen()&&(pt(e),Se(e),de())):(f(e.elements.root,Q),e.isOpen()&&(ht(e),Se(e),de()))}(e);break;case"basic":!function(e){e.get("basic")?f(e.elements.root,q):m(e.elements.root,q)}(e);break;case"frameless":!function(e){e.get("frameless")?f(e.elements.root,K):m(e.elements.root,K)}(e);break;case"pinned":!function(e){e.get("pinned")?(m(e.elements.root,ae),e.isOpen()&&$e(e)):(f(e.elements.root,ae),e.isOpen()&&!e.isModal()&&Ce(e))}(e);break;case"closable":!function(e){e.get("closable")?(f(e.elements.root,U),function(e){C(e.elements.modal,"click",e.__internal.modalClickHandler)}(e)):(m(e.elements.root,U),function(e){$(e.elements.modal,"click",e.__internal.modalClickHandler)}(e))}(e);break;case"maximizable":!function(e){e.get("maximizable")?f(e.elements.root,Y):m(e.elements.root,Y)}(e);break;case"pinnable":!function(e){e.get("pinnable")?f(e.elements.root,ie):m(e.elements.root,ie)}(e);break;case"movable":!function(e){e.get("movable")?(f(e.elements.root,Z),e.isOpen()&&ft(e)):(tt(e),m(e.elements.root,Z),e.isOpen()&&mt(e))}(e);break;case"resizable":!function(e){e.get("resizable")?(f(e.elements.root,se),e.isOpen()&&gt(e)):(ut(e),m(e.elements.root,se),e.isOpen()&&_t(e))}(e);break;case"padding":i?m(e.elements.root,ne):e.elements.root.className.indexOf(ne)<0&&f(e.elements.root,ne);break;case"overflow":i?m(e.elements.root,te):e.elements.root.className.indexOf(te)<0&&f(e.elements.root,te);break;case"transition":!function(e,t,n){"string"==typeof n&&m(e.elements.root,oe+n),f(e.elements.root,oe+t),e.elements.root.offsetWidth}(e,i,n);break;case"transitionOff":!function(e){e.get("transitionOff")?f(e.elements.root,le):m(e.elements.root,le)}(e)}"function"==typeof e.hooks.onupdate&&e.hooks.onupdate.call(e,t,n,i)}function _e(e,t,n,i,o){var s,r={op:void 0,items:[]};if(void 0===o&&"string"==typeof i)r.op="get",t.hasOwnProperty(i)?(r.found=!0,r.value=t[i]):(r.found=!1,r.value=void 0);else if(r.op="set","object"==typeof i){var a=i;for(var l in a)t.hasOwnProperty(l)?(t[l]!==a[l]&&(s=t[l],t[l]=a[l],n.call(e,l,s,a[l])),r.items.push({key:l,value:a[l],found:!0})):r.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof i)throw new Error("args must be a string or object");t.hasOwnProperty(i)?(t[i]!==o&&(s=t[i],t[i]=o,n.call(e,i,s,o)),r.items.push({key:i,value:o,found:!0})):r.items.push({key:i,value:o,found:!1})}return r}function ve(e){var t;Oe(e,(function(n){return t=!0!==e.get("invokeOnCloseOff")&&!0===n.invokeOnClose})),!t&&e.isOpen()&&e.close()}function ye(e,t){switch(e.srcElement||e.target){case t.elements.commands.pin:t.isPinned()?xe(t):be(t);break;case t.elements.commands.maximize:t.isMaximized()?ke(t):we(t);break;case t.elements.commands.close:ve(t)}return!1}function be(e){e.set("pinned",!0)}function xe(e){e.set("pinned",!1)}function we(e){D("onmaximize",e),f(e.elements.root,X),e.isOpen()&&de(),D("onmaximized",e)}function ke(e){D("onrestore",e),m(e.elements.root,X),e.isOpen()&&de(),D("onrestored",e)}function Ce(e){var t=v();e.elements.modal.style.marginTop=_()+"px",e.elements.modal.style.marginLeft=t+"px",e.elements.modal.style.marginRight=-t+"px"}function $e(e){var t=parseInt(e.elements.modal.style.marginTop,10),n=parseInt(e.elements.modal.style.marginLeft,10);if(e.elements.modal.style.marginTop="",e.elements.modal.style.marginLeft="",e.elements.modal.style.marginRight="",e.isOpen()){var i=0,o=0;""!==e.elements.dialog.style.top&&(i=parseInt(e.elements.dialog.style.top,10)),e.elements.dialog.style.top=i+(t-_())+"px",""!==e.elements.dialog.style.left&&(o=parseInt(e.elements.dialog.style.left,10)),e.elements.dialog.style.left=o+(n-v())+"px"}}function Se(e){e.get("modal")||e.get("pinned")?$e(e):Ce(e)}var Ee=!1,Te=0;function De(e,t){if(e.timeStamp-Te>200&&(Te=e.timeStamp)&&!Ee){var n=e.srcElement||e.target;!0===t.get("closableByDimmer")&&n===t.elements.modal&&ve(t)}Ee=!1}var Ae=0,Ne=!1;function Oe(e,t){if(Date.now()-Ae>200&&(Ae=Date.now()))for(var n=0;n<e.__internal.buttons.length;n+=1){var i=e.__internal.buttons[n];if(!i.element.disabled&&t(i)){var o=T(n,i);"function"==typeof e.callback&&e.callback.apply(e,[o]),!1===o.cancel&&e.close();break}}}function Pe(e,t){var n=e.srcElement||e.target;Oe(t,(function(e){return e.element===n&&(Ne=!0)}))}function je(e){if(!Ne){var t=p[p.length-1],i=e.keyCode;return 0===t.__internal.buttons.length&&i===r&&!0===t.get("closable")?(ve(t),!1):n.indexOf(i)>-1?(Oe(t,(function(e){return e.key===i})),!1):void 0}Ne=!1}function Me(e){var t=p[p.length-1],i=e.keyCode;if(i===c||i===u){for(var o=t.__internal.buttons,s=0;s<o.length;s+=1)if(document.activeElement===o[s].element)switch(i){case c:return void o[(s||o.length)-1].element.focus();case u:return void o[(s+1)%o.length].element.focus()}}else if(i<l+1&&i>a-1&&n.indexOf(i)>-1)return e.preventDefault(),e.stopPropagation(),Oe(t,(function(e){return e.key===i})),!1}function Ie(e,t){if(t)t.focus();else{var n=e.__internal.focus,i=n.element;switch(typeof n.element){case"number":e.__internal.buttons.length>n.element&&(i=!0===e.get("basic")?e.elements.reset[0]:e.__internal.buttons[n.element].element);break;case"string":i=e.elements.body.querySelector(n.element);break;case"function":i=n.element.call(e)}(!0===e.get("defaultFocusOff")||null==i&&0===e.__internal.buttons.length)&&(i=e.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}function Re(e,t){if(!t)for(var n=p.length-1;n>-1;n-=1)if(p[n].isModal()){t=p[n];break}if(t&&t.isModal()){var i,o=t.elements.reset[0],s=t.elements.reset[1],r=e.relatedTarget,a=t.elements.root.contains(r),l=e.srcElement||e.target;if(l===o&&!a||l===s&&r===o)return;l===s||l===document.body?i=o:l===o&&r===s?i=Le(t):l===o&&a&&(i=Le(t,!0)),Ie(t,i)}}function Le(e,t){var n=[].slice.call(e.elements.dialog.querySelectorAll(h.tabbable));t&&n.reverse();for(var i=0;i<n.length;i+=1){var o=n[i];if(o.offsetParent||o.offsetWidth||o.offsetHeight||o.getClientRects().length)return o}}function ze(e){var t=p[p.length-1];t&&e.shiftKey&&e.keyCode===d&&t.elements.reset[1].focus()}function Fe(e,t){clearTimeout(t.__internal.timerIn),Ie(t),Ne=!1,D("onfocus",t),$(t.elements.dialog,S.type,t.__internal.transitionInHandler),m(t.elements.root,H)}function He(e,t){clearTimeout(t.__internal.timerOut),$(t.elements.dialog,S.type,t.__internal.transitionOutHandler),tt(t),ut(t),t.isMaximized()&&!t.get("startMaximized")&&ke(t),"function"==typeof t.__internal.destroy&&t.__internal.destroy.apply(t)}var Be=null,We=0,qe=0,Ve="pageX",Ue="pageY",Ge=null,Ke=!1,Je=null;function Xe(e,t){var n=e[Ve]-We,i=e[Ue]-qe;Ke&&(i-=document.body.scrollTop),t.style.left=n+"px",t.style.top=i+"px"}function Ye(e,t){var n=e[Ve]-We,i=e[Ue]-qe;Ke&&(i-=document.body.scrollTop),t.style.left=Math.min(Ge.maxLeft,Math.max(Ge.minLeft,n))+"px",t.style.top=Ke?Math.min(Ge.maxTop,Math.max(Ge.minTop,i))+"px":Math.max(Ge.minTop,i)+"px"}function Qe(e,t){if(null===nt&&!t.isMaximized()&&t.get("movable")){var n,i=0,o=0;if("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0],Ve="clientX",Ue="clientY"):0===e.button&&(n=e),n){var s=t.elements.dialog;if(f(s,V),s.style.left&&(i=parseInt(s.style.left,10)),s.style.top&&(o=parseInt(s.style.top,10)),We=n[Ve]-i,qe=n[Ue]-o,t.isModal()?qe+=t.elements.modal.scrollTop:t.isPinned()&&(qe-=document.body.scrollTop),t.get("moveBounded")){var r=s,a=-i,l=-o;do{a+=r.offsetLeft,l+=r.offsetTop}while(r=r.offsetParent);Ge={maxLeft:a,minLeft:-a,maxTop:document.documentElement.clientHeight-s.clientHeight-l,minTop:-l},Je=Ye}else Ge=null,Je=Xe;return D("onmove",t),Ke=!t.isModal()&&t.isPinned(),Be=t,Je(n,s),f(document.body,ee),!1}}}function Ze(e){var t;Be&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&Je(t,Be.elements.dialog))}function et(){if(Be){var e=Be;Be=Ge=null,m(document.body,ee),m(e.elements.dialog,V),D("onmoved",e)}}function tt(e){Be=null;var t=e.elements.dialog;t.style.left=t.style.top=""}var nt=null,it=Number.Nan,ot=0,st=0,rt=0;function at(e,t){var n;if(!t.isMaximized()&&("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0]):0===e.button&&(n=e),n)){D("onresize",t),nt=t,rt=t.elements.resizeHandle.offsetHeight/2;var i=t.elements.dialog;return f(i,V),it=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=t.elements.header.offsetHeight+t.elements.footer.offsetHeight+"px",i.style.width=(ot=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(st=i.offsetWidth)+"px"),i.style.maxWidth="none",f(document.body,ee),!1}}function lt(e){var t;nt&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&function(e,t,n){var i,o,s=t,r=0,a=0;do{r+=s.offsetLeft,a+=s.offsetTop}while(s=s.offsetParent);!0===n?(i=e.pageX,o=e.pageY):(i=e.clientX,o=e.clientY);var l=g();if(l&&(i=document.body.offsetWidth-i,isNaN(it)||(r=document.body.offsetWidth-r-t.offsetWidth)),t.style.height=o-a+rt+"px",t.style.width=i-r+rt+"px",!isNaN(it)){var c=.5*Math.abs(t.offsetWidth-ot);l&&(c*=-1),t.offsetWidth>ot?t.style.left=it+c+"px":t.offsetWidth>=st&&(t.style.left=it-c+"px")}}(t,nt.elements.dialog,!nt.get("modal")&&!nt.get("pinned")))}function ct(){if(nt){var e=nt;nt=null,m(document.body,ee),m(e.elements.dialog,V),Ee=!0,D("onresized",e)}}function ut(e){nt=null;var t=e.elements.dialog;"none"===t.style.maxWidth&&(t.style.maxWidth=t.style.minWidth=t.style.width=t.style.height=t.style.minHeight=t.style.left="",it=Number.Nan,ot=st=rt=0)}function dt(){for(var e=0;e<p.length;e+=1){var t=p[e];t.get("autoReset")&&(tt(t),ut(t))}}function ht(e){C(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function pt(e){$(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function ft(e){C(e.elements.header,"mousedown",e.__internal.beginMoveHandler),C(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function mt(e){$(e.elements.header,"mousedown",e.__internal.beginMoveHandler),$(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}function gt(e){C(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),C(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}function _t(e){$(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),$(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}return{__init:ce,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(Q)<0},isMaximized:function(){return this.elements.root.className.indexOf(X)>-1},isPinned:function(){return this.elements.root.className.indexOf(ae)<0},maximize:function(){return this.isMaximized()||we(this),this},restore:function(){return this.isMaximized()&&ke(this),this},pin:function(){return this.isPinned()||be(this),this},unpin:function(){return this.isPinned()&&xe(this),this},bringToFront:function(){return me(0,this),this},moveTo:function(e,t){if(!isNaN(e)&&!isNaN(t)){D("onmove",this);var n=this.elements.dialog,i=n,o=0,s=0;n.style.left&&(o-=parseInt(n.style.left,10)),n.style.top&&(s-=parseInt(n.style.top,10));do{o+=i.offsetLeft,s+=i.offsetTop}while(i=i.offsetParent);var r=e-o,a=t-s;g()&&(r*=-1),n.style.left=r+"px",n.style.top=a+"px",D("onmoved",this)}return this},resizeTo:function(e,t){var n=parseFloat(e),i=parseFloat(t),o=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){D("onresize",this),(""+e).match(o)&&(n=n/100*document.documentElement.clientWidth),(""+t).match(o)&&(i=i/100*document.documentElement.clientHeight);var s=this.elements.dialog;"none"!==s.style.maxWidth&&(s.style.minWidth=(st=s.offsetWidth)+"px"),s.style.maxWidth="none",s.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",s.style.width=n+"px",s.style.height=i+"px",D("onresized",this)}return this},setting:function(e,t){var n=this,i=_e(this,this.__internal.options,(function(e,t,i){ge(n,e,t,i)}),e,t);if("get"===i.op)return i.found?i.value:void 0!==this.settings?_e(this,this.settings,this.settingUpdated||function(){},e,t).value:void 0;if("set"===i.op){if(i.items.length>0)for(var o=this.settingUpdated||function(){},s=0;s<i.items.length;s+=1){var r=i.items[s];r.found||void 0===this.settings||_e(this,this.settings,o,r.key,r.value)}return this}},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},setHeader:function(e){return"string"==typeof e?(y(this.elements.header),this.elements.header.innerHTML=e):e instanceof i.HTMLElement&&this.elements.header.firstChild!==e&&(y(this.elements.header),this.elements.header.appendChild(e)),this},setContent:function(e){return"string"==typeof e?(y(this.elements.content),this.elements.content.innerHTML=e):e instanceof i.HTMLElement&&this.elements.content.firstChild!==e&&(y(this.elements.content),this.elements.content.appendChild(e)),this},showModal:function(e){return this.show(!0,e)},show:function(n,r){if(ce(this),this.__internal.isOpen){tt(this),ut(this),f(this.elements.dialog,re);var a=this;setTimeout((function(){m(a.elements.dialog,re)}),200)}else{if(this.__internal.isOpen=!0,p.push(this),O.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",o="0"),"function"==typeof this.prepare&&this.prepare(),c=this,1===p.length&&(C(i,"resize",dt),C(document.body,"keyup",je),C(document.body,"keydown",Me),C(document.body,"focus",Re),C(document.documentElement,"mousemove",Ze),C(document.documentElement,"touchmove",Ze,!1,!1),C(document.documentElement,"mouseup",et),C(document.documentElement,"touchend",et),C(document.documentElement,"mousemove",lt),C(document.documentElement,"touchmove",lt,!1,!1),C(document.documentElement,"mouseup",ct),C(document.documentElement,"touchend",ct)),C(c.elements.commands.container,"click",c.__internal.commandsClickHandler),C(c.elements.footer,"click",c.__internal.buttonsClickHandler),C(c.elements.reset[0],"focusin",c.__internal.resetHandler),C(c.elements.reset[0],"keydown",ze),C(c.elements.reset[1],"focusin",c.__internal.resetHandler),Ne=!0,C(c.elements.dialog,S.type,c.__internal.transitionInHandler),c.get("modal")||ht(c),c.get("resizable")&&gt(c),c.get("movable")&&ft(c),void 0!==n&&this.set("modal",n),e=v(),t=_(),de(),"string"==typeof r&&""!==r&&(this.__internal.className=r,f(this.elements.root,r)),this.get("startMaximized")?this.maximize():this.isMaximized()&&ke(this),Se(this),this.elements.root.removeAttribute("style"),m(this.elements.root,B),f(this.elements.root,H),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,S.supported?1e3:100),s){var l=this.elements.root;l.style.display="none",setTimeout((function(){l.style.display="block"}),0)}this.elements.root.offsetWidth,m(this.elements.root,J),ue(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),D("onshow",this)}var c;return this},close:function(){var e;return this.__internal.isOpen&&!1!==D("onclosing",this)&&(e=this,1===p.length&&($(i,"resize",dt),$(document.body,"keyup",je),$(document.body,"keydown",Me),$(document.body,"focus",Re),$(document.documentElement,"mousemove",Ze),$(document.documentElement,"mouseup",et),$(document.documentElement,"mousemove",lt),$(document.documentElement,"mouseup",ct)),$(e.elements.commands.container,"click",e.__internal.commandsClickHandler),$(e.elements.footer,"click",e.__internal.buttonsClickHandler),$(e.elements.reset[0],"focusin",e.__internal.resetHandler),$(e.elements.reset[0],"keydown",ze),$(e.elements.reset[1],"focusin",e.__internal.resetHandler),C(e.elements.dialog,S.type,e.__internal.transitionOutHandler),e.get("modal")||pt(e),e.get("movable")&&mt(e),e.get("resizable")&&_t(e),m(this.elements.root,H),f(this.elements.root,B),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,S.supported?1e3:100),f(this.elements.root,J),this.elements.modal.offsetWidth,O.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&m(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),D("onclose",this),p.splice(p.indexOf(this),1),this.__internal.isOpen=!1,de()),p.length||"0"!==o||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return O.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){x(this,ce)},this.close()):this.__internal.destroy||x(this,ce)),this}}}(),N=function(){var e,t=[],n=h.notifier.classes,o=n.base;function s(t){t.__internal||(t.__internal={position:O.defaults.notifier.position,delay:O.defaults.notifier.delay},e=document.createElement("DIV"),("transitionOff"in h.notifier?h.notifier.transitionOff:h.transitionOff)&&(o=n.base+" ajs-no-transition"),a(t));e.parentNode!==document.body&&document.body.appendChild(e)}function r(e){e.__internal.pushed=!0,t.push(e)}function a(t){switch(e.className=o,t.__internal.position){case"top-right":f(e,n.top+" "+n.right);break;case"top-left":f(e,n.top+" "+n.left);break;case"top-center":f(e,n.top+" "+n.center);break;case"bottom-left":f(e,n.bottom+" "+n.left);break;case"bottom-center":f(e,n.bottom+" "+n.center);break;default:case"bottom-right":f(e,n.bottom+" "+n.right)}}function l(o,s){function a(e,t){t.__internal.closeButton&&"true"!==e.target.getAttribute("data-close")||t.dismiss(!0)}function l(t,n){$(n.element,S.type,l),e.removeChild(n.element)}function c(e){clearTimeout(e.__internal.timer),clearTimeout(e.__internal.transitionTimeout)}return(u={element:o,push:function(t,i){if(!this.__internal.pushed){var o,s;switch(r(this),c(this),arguments.length){case 0:s=this.__internal.delay;break;case 1:"number"==typeof t?s=t:(o=t,s=this.__internal.delay);break;case 2:o=t,s=i}return this.__internal.closeButton=O.defaults.notifier.closeButton,void 0!==o&&this.setContent(o),N.__internal.position.indexOf("top")<0?e.appendChild(this.element):e.insertBefore(this.element,e.firstChild),this.element.offsetWidth,f(this.element,n.visible),C(this.element,"click",this.__internal.clickHandler),this.delay(s)}return this},ondismiss:function(){},callback:s,dismiss:function(i){var o;return this.__internal.pushed&&(c(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||($(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===e&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,S.supported?1e3:100),m(this.element,n.visible),"function"==typeof this.callback&&this.callback.call(this,i)),o=this,t.splice(t.indexOf(o),1),o.__internal.pushed=!1)),this},delay:function(e){if(c(this),this.__internal.delay=void 0===e||isNaN(+e)?N.__internal.delay:+e,this.__internal.delay>0){var t=this;this.__internal.timer=setTimeout((function(){t.dismiss()}),1e3*this.__internal.delay)}return this},setContent:function(e){if("string"==typeof e?(y(this.element),this.element.innerHTML=e):e instanceof i.HTMLElement&&this.element.firstChild!==e&&(y(this.element),this.element.appendChild(e)),this.__internal.closeButton){var t=document.createElement("span");f(t,n.close),t.setAttribute("data-close",!0),this.element.appendChild(t)}return this},dismissOthers:function(){return N.dismissAll(this),this}}).__internal||(u.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},u.__internal.clickHandler=E(u,a),u.__internal.transitionEndHandler=E(u,l)),u;var u}return{setting:function(e,t){if(s(this),void 0===t)return this.__internal[e];switch(e){case"position":this.__internal.position=t,a(this);break;case"delay":this.__internal.delay=t}return this},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},create:function(e,t){s(this);var i=document.createElement("div");return i.className=n.message+("string"==typeof e&&""!==e?" "+n.prefix+e:""),l(i,t)},dismissAll:function(e){for(var n=t.slice(0),i=0;i<n.length;i+=1){var o=n[i];void 0!==e&&e===o||o.dismiss()}}}}();var O=new function(){var e={};function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(t){var n=e[t].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}return{defaults:h,dialog:function(i,o,s,r){if("function"!=typeof o)return n(i);if(this.hasOwnProperty(i))throw new Error("alertify.dialog: name already exists");var a=function(n,i,o,s){var r={dialog:null,factory:i};return void 0!==s&&(r.factory=function(){return t(new e[s].factory,new i)}),o||(r.dialog=t(new r.factory,A)),e[n]=r}(i,o,s,r);this[i]=s?function(){if(0===arguments.length)return a.dialog;var e=t(new a.factory,A);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var e=a.dialog;return e.main.apply(a.dialog,arguments),e.show.apply(a.dialog)}},closeAll:function(e){for(var t=p.slice(0),n=0;n<t.length;n+=1){var i=t[n];void 0!==e&&e===i||i.close()}},setting:function(e,t,i){if("notifier"===e)return N.setting(t,i);var o=n(e);return o?o.setting(t,i):void 0},set:function(e,t,n){return this.setting(e,t,n)},get:function(e,t){return this.setting(e,t)},notify:function(e,t,n,i){return N.create(t,i).push(e,n)},message:function(e,t,n){return N.create(null,n).push(e,t)},success:function(e,t,n){return N.create("success",n).push(e,t)},error:function(e,t,n){return N.create("error",n).push(e,t)},warning:function(e,t,n){return N.create("warning",n).push(e,t)},dismissAll:function(){N.dismissAll()}}};O.dialog("alert",(function(){return{main:function(e,t,n){var i,o,s;switch(arguments.length){case 1:o=e;break;case 2:"function"==typeof t?(o=e,s=t):(i=e,o=t);break;case 3:i=e,o=t,s=n}return this.set("title",i),this.set("message",o),this.set("onok",s),this},setup:function(){return{buttons:[{text:O.defaults.glossary.ok,key:r,invokeOnClose:!0,className:O.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(e){if("function"==typeof this.get("onok")){var t=this.get("onok").call(this,e);void 0!==t&&(e.cancel=!t)}}}})),O.dialog("confirm",(function(){var e={timer:null,index:null,text:null,duration:null,task:function(n,i){if(i.isOpen()){if(i.__internal.buttons[e.index].element.innerHTML=e.text+" (&#8207;"+e.duration+"&#8207;) ",e.duration-=1,-1===e.duration){t(i);var o=i.__internal.buttons[e.index],s=T(e.index,o);"function"==typeof i.callback&&i.callback.apply(i,[s]),!1!==s.close&&i.close()}}else t(i)}};function t(t){null!==e.timer&&(clearInterval(e.timer),e.timer=null,t.__internal.buttons[e.index].element.innerHTML=e.text)}function n(n,i,o){t(n),e.duration=o,e.index=i,e.text=n.__internal.buttons[i].element.innerHTML,e.timer=setInterval(E(n,e.task),1e3),e.task(null,n)}return{main:function(e,t,n,i){var o,s,r,a;switch(arguments.length){case 1:s=e;break;case 2:s=e,r=t;break;case 3:s=e,r=t,a=n;break;case 4:o=e,s=t,r=n,a=i}return this.set("title",o),this.set("message",s),this.set("onok",r),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:O.defaults.glossary.ok,key:s,className:O.defaults.theme.ok},{text:O.defaults.glossary.cancel,key:r,invokeOnClose:!0,className:O.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){var n;switch(t(this),e.index){case 0:"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,e))&&(e.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,e))&&(e.cancel=!n)}},autoOk:function(e){return n(this,0,e),this},autoCancel:function(e){return n(this,1,e),this}}})),O.dialog("prompt",(function(){var e=document.createElement("INPUT"),t=document.createElement("P");return{main:function(e,t,n,i,o){var s,r,a,l,c;switch(arguments.length){case 1:r=e;break;case 2:r=e,a=t;break;case 3:r=e,a=t,l=n;break;case 4:r=e,a=t,l=n,c=i;break;case 5:s=e,r=t,a=n,l=i,c=o}return this.set("title",s),this.set("message",r),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:O.defaults.glossary.ok,key:s,className:O.defaults.theme.ok},{text:O.defaults.glossary.cancel,key:r,invokeOnClose:!0,className:O.defaults.theme.cancel}],focus:{element:e,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){e.className=O.defaults.theme.input,e.setAttribute("type","text"),e.value=this.get("value"),this.elements.content.appendChild(t),this.elements.content.appendChild(e)},prepare:function(){},setMessage:function(e){"string"==typeof e?(y(t),t.innerHTML=e):e instanceof i.HTMLElement&&t.firstChild!==e&&(y(t),t.appendChild(e))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(t,n,i){switch(t){case"message":this.setMessage(i);break;case"value":e.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":e.type=i;break;default:e.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(t){var n;switch(t.index){case 0:this.settings.value=e.value,"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,t,this.settings.value))&&(t.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,t))&&(t.cancel=!n),t.cancel||(e.value=this.settings.value)}}}})),"object"==typeof e.exports?e.exports=O:void 0===(n=function(){return O}.apply(t,[]))||(e.exports=n)}("undefined"!=typeof window?window:this)},454:e=>{"use strict";const t=(e,t,n)=>{const i=t<0?e.length+t:t;if(i>=0&&i<e.length){const i=n<0?e.length+n:n,[o]=e.splice(t,1);e.splice(i,0,o)}};e.exports=(e,n,i)=>(e=[...e],t(e,n,i),e),e.exports.mutate=t},296:e=>{function t(e,t,n){var i,o,s,r,a;function l(){var c=Date.now()-r;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(s,o),s=o=null))}null==t&&(t=100);var c=function(){s=this,o=arguments,r=Date.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(s,o),s=o=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=e.apply(s,o),s=o=null,clearTimeout(i),i=null)},c}t.debounce=t,e.exports=t},2828:e=>{if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},9438:(e,t,n)=>{var i=n(2828);function o(e,t,n,i,o){var r=s.apply(this,arguments);return e.addEventListener(n,r,o),{destroy:function(){e.removeEventListener(n,r,o)}}}function s(e,t,n,o){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&o.call(e,n)}}e.exports=function(e,t,n,i,s){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,n,i,s)})))}},1182:(e,t,n)=>{e.exports=n(9269)},9269:e=>{var t={create:function(e){var t;if(e=e.trim(),/<.*>/g.test(e)){var n=document.createElement("div");n.innerHTML=e,t=n.firstChild}else t=document.createElement(e);if(!this.isValidNode(t))throw new Error("Element not valid");return t},isValidNode:function(e){return e&&"nodeType"in e},render:function(e,t){var n;if(t=null==(n=t)?[]:Array.isArray(n)?n:[n],!this.isValidNode(e))throw new Error("Require a valid HTML Element");return t.forEach((function(t){e.appendChild(t)})),e}};e.exports=t},4676:(e,t,n)=>{var i=n(7187).EventEmitter;function o(e){i.call(this),e=e||{},this.states=e.states||["default"],this.currentState=e.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var t=this;this.on("transition",(function(e){t.events.forEach((function(n){n.from===e.from&&n.to===e.to&&t.emit(n.event)}))}))}o.prototype=Object.create(i.prototype),o.prototype.setState=function(e){var t=this.currentState;if(!this._validate(t,e))return!1;this.history.push({state:t,args:this.currentArgs});var n=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=n,this.currentState=e,this._emit(t,e,n),!0},o.prototype.back=function(){if(!this.history.length)return!1;var e=this.history[this.history.length-1],t=this.currentState,n=e.state,i=e.args;return!!this._validate(t,n)&&(this.history.pop(),this.currentState=n,this.currentArgs=i,this._emit(t,n,i,!0),!0)},o.prototype.lock=function(){this.locked=!0},o.prototype.unlock=function(){this.locked=!1},o.prototype.config=function(e,t){t.to=t.to||{},t.from=t.from||{},this.configs[e]=t},o.prototype.register=function(e,t){this.events.push({event:e,from:t.from,to:t.to})},o.prototype._emit=function(e,t,n,i){var o={from:e,to:t,args:n,back:i};this.emit("transition",o),this.emit("leave:"+e,o),this.emit("enter:"+t,o)},o.prototype._validate=function(e,t){if(!(this.locked||e===t||this.states.indexOf(t)<0)){var n=this.configs[e];if(n)if(n.to.only){if(n.to.only.indexOf(t)<0)return}else if(n.to.exclude&&n.to.exclude.indexOf(t)>-1)return;var i=this.configs[t];if(i)if(i.from.only){if(i.from.only.indexOf(e)<0)return}else if(i.from.exclude&&i.from.exclude.indexOf(e)>-1)return;return!0}},e.exports=o},4576:(e,t,n)=>{"use strict";var i=n(8686);e.exports=function(e){for(var t=e[0],n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];for(var r=0;r<o.length;r++)t=t+i(o[r])+e[r+1];return t}},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,i){function o(){void 0!==s&&e.removeListener("error",s),n([].slice.call(arguments))}var s;"error"!==t&&(s=function(n){e.removeListener(t,o),i(n)},e.once("error",s)),e.once(t,o)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var r=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,s,r,c;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),r=s[t]),void 0===r)r=s[t]=n,++e._eventsCount;else if("function"==typeof r?r=s[t]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),(o=l(e))>0&&r.length>o&&!r.warned){r.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=r.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=u.bind(i);return o.listener=n,i.wrapFn=o,o}function h(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;if(o){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,i,o,s,r;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){r=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(o=s[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4063:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,o,s;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=i;0!=o--;){var r=s[o];if(!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}},6400:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])}})})?i.apply(t,o):i)||(e.exports=s)},2064:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t})?i.apply(t,o):i)||(e.exports=s)},5042:(e,t,n)=>{var i,o,s;o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t})?i.apply(t,o):i)||(e.exports=s)},5436:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}return e.ui.focusable=function(n,i){var o,s,r,a,l,c=n.nodeName.toLowerCase();return"area"===c?(s=(o=n.parentNode).name,!(!n.href||!s||"map"!==o.nodeName.toLowerCase())&&(r=e("img[usemap='#"+s+"']")).length>0&&r.is(":visible")):(/^(input|select|textarea|button|object)$/.test(c)?(a=!n.disabled)&&(l=e(n).closest("fieldset")[0])&&(a=!l.disabled):a="a"===c&&n.href||i,a&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable})?i.apply(t,o):i)||(e.exports=s)},7808:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5588),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var n=t.data("ui-form-reset-instances");e.each(n,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?i.apply(t,o):i)||(e.exports=s)},5588:(e,t,n)=>{var i,o,s;o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}})?i.apply(t,o):i)||(e.exports=s)},1870:(e,t,n)=>{var i,o,s;o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(t,o):i)||(e.exports=s)},7053:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(t,o):i)||(e.exports=s)},6575:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592),n(5042)],void 0===(s="function"==typeof(i=function(e){return e.fn.labels=function(){var t,n,i,o,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),(i=this.attr("id"))&&(s=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",o=o.add(s.find(n).addBack(n))),this.pushStack(o))}})?i.apply(t,o):i)||(e.exports=s)},1624:(e,t,n)=>{var i,o,s;o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.plugin={add:function(t,n,i){var o,s=e.ui[t].prototype;for(o in i)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,s=e.plugins[t];if(s&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<s.length;o++)e.options[s[o][0]]&&s[o][1].apply(e.element,n)}}})?i.apply(t,o):i)||(e.exports=s)},1822:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return function(){var t,n=Math.max,i=Math.abs,o=/left|center|right/,s=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function d(t,n){return parseInt(e.css(t,n),10)||0}function h(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return e("body").append(o),n=s.offsetWidth,o.css("overflow","scroll"),n===(i=s.offsetWidth)&&(i=o[0].clientWidth),o.remove(),t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:i||o?{left:0,top:0}:e(t).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,p,f,m,g,_,v=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),x=(t.collision||"flip").split(" "),w={};return _=h(v),v[0].preventDefault&&(t.at="left top"),p=_.width,f=_.height,m=_.offset,g=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=o.test(i[0])?i.concat(["center"]):s.test(i[0])?["center"].concat(i):["center","center"]),i[0]=o.test(i[0])?i[0]:"center",i[1]=s.test(i[1])?i[1]:"center",e=r.exec(i[0]),n=r.exec(i[1]),w[this]=[e?e[0]:0,n?n[0]:0],t[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=f:"center"===t.at[1]&&(g.top+=f/2),l=u(w.at,p,f),g.left+=l[0],g.top+=l[1],this.each((function(){var o,s,r=e(this),a=r.outerWidth(),c=r.outerHeight(),h=d(this,"marginLeft"),_=d(this,"marginTop"),k=a+h+d(this,"marginRight")+b.width,C=c+_+d(this,"marginBottom")+b.height,$=e.extend({},g),S=u(w.my,r.outerWidth(),r.outerHeight());"right"===t.my[0]?$.left-=a:"center"===t.my[0]&&($.left-=a/2),"bottom"===t.my[1]?$.top-=c:"center"===t.my[1]&&($.top-=c/2),$.left+=S[0],$.top+=S[1],o={marginLeft:h,marginTop:_},e.each(["left","top"],(function(n,i){e.ui.position[x[n]]&&e.ui.position[x[n]][i]($,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:k,collisionHeight:C,offset:[l[0]+S[0],l[1]+S[1]],my:t.my,at:t.at,within:y,elem:r})})),t.using&&(s=function(e){var o=m.left-$.left,s=o+p-a,l=m.top-$.top,u=l+f-c,d={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:r,left:$.left,top:$.top,width:a,height:c},horizontal:s<0?"left":o>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};p<a&&i(o+s)<p&&(d.horizontal="center"),f<c&&i(l+u)<f&&(d.vertical="middle"),n(i(o),i(s))>n(i(l),i(u))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),r.offset(e.extend($,{using:s}))}))},e.ui.position={fit:{left:function(e,t){var i,o=t.within,s=o.isWindow?o.scrollLeft:o.offset.left,r=o.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-r-s;t.collisionWidth>r?l>0&&c<=0?(i=e.left+l+t.collisionWidth-r-s,e.left+=l-i):e.left=c>0&&l<=0?s:l>c?s+r-t.collisionWidth:s:l>0?e.left+=l:c>0?e.left-=c:e.left=n(e.left-a,e.left)},top:function(e,t){var i,o=t.within,s=o.isWindow?o.scrollTop:o.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-r-s;t.collisionHeight>r?l>0&&c<=0?(i=e.top+l+t.collisionHeight-r-s,e.top+=l-i):e.top=c>0&&l<=0?s:l>c?s+r-t.collisionHeight:s:l>0?e.top+=l:c>0?e.top-=c:e.top=n(e.top-a,e.top)}},flip:{left:function(e,t){var n,o,s=t.within,r=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((n=e.left+h+p+f+t.collisionWidth-a-r)<0||n<i(u))&&(e.left+=h+p+f):d>0&&((o=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||i(o)<d)&&(e.left+=h+p+f)},top:function(e,t){var n,o,s=t.within,r=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];u<0?((o=e.top+h+p+f+t.collisionHeight-a-r)<0||o<i(u))&&(e.top+=h+p+f):d>0&&((n=e.top-t.collisionPosition.marginTop+h+p+f-l)>0||i(n)<d)&&(e.top+=h+p+f)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})?i.apply(t,o):i)||(e.exports=s)},1440:(e,t,n)=>{var i,o,s;o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})?i.apply(t,o):i)||(e.exports=s)},192:(e,t,n)=>{var i,o,s;o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})?i.apply(t,o):i)||(e.exports=s)},464:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter((function(){var t=e(this);return(!i||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)}})?i.apply(t,o):i)||(e.exports=s)},3614:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592),n(5436)],void 0===(s="function"==typeof(i=function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}})})?i.apply(t,o):i)||(e.exports=s)},9138:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++t)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}});var t})?i.apply(t,o):i)||(e.exports=s)},5592:(e,t,n)=>{var i,o,s;o=[n(9755)],void 0===(s="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?i.apply(t,o):i)||(e.exports=s)},6891:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5592)],void 0===(s="function"==typeof(i=function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,o,s;for(s=0;null!=(o=n[s]);s++)try{(i=e._data(o,"events"))&&i.remove&&e(o).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var o,s,r,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],s=e[l][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(r=new n).options=e.widget.extend({},r.options),e.each(i,(function(t,i){e.isFunction(i)?a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=s,t}}():a[t]=i})),s.prototype=e.widget.extend(r,{widgetEventPrefix:o&&r.widgetEventPrefix||t},a,{constructor:s,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)})),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,o,s=i.call(arguments,1),r=0,a=s.length;r<a;r++)for(n in s[r])o=s[r][n],s[r].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(s){var r="string"==typeof s,a=i.call(arguments,1),l=this;return r?this.length||"instance"!==s?this.each((function(){var n,i=e.data(this,o);return"instance"===s?(l=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(n=i[s].apply(i,a))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")})):l=void 0:(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each((function(){var t=e.data(this,o);t?(t.option(s||{}),t._init&&t._init()):e.data(this,o,new n(s,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,s,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},i=t.split("."),t=i.shift(),i.length){for(o=r[t]=e.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)o[i[s]]=o[i[s]]||{},o=o[i[s]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function o(o,s){var r,a;for(a=0;a<o.length;a++)r=i.classesElementLookup[o[a]]||e(),r=t.add?e(e.unique(r.get().concat(t.element.get()))):e(r.not(t.element).get()),i.classesElementLookup[o[a]]=r,n.push(o[a]),s&&t.classes[o[a]]&&n.push(t.classes[o[a]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(i,o){-1!==e.inArray(t.target,o)&&(n.classesElementLookup[i]=e(o.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,s={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return s.element.toggleClass(this._classes(s),i),this},_on:function(t,n,i){var o,s=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,(function(i,r){function a(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.on(c,u,a):n.on(c,a)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var o,s,r=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(o in s)o in n||(n[o]=s[o]);return this.element.trigger(n,i),!(e.isFunction(r)&&!1===r.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,o,s){var r;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?n:o.effect||n:t;"number"==typeof(o=o||{})&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&i.delay(o.delay),r&&e.effects&&e.effects.effect[a]?i[t](o):a!==t&&i[a]?i[a](o.duration,o.easing,s):i.queue((function(n){e(this)[t](),s&&s.call(i[0]),n()}))}})),e.widget})?i.apply(t,o):i)||(e.exports=s)},2993:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(8851),n(7053),n(1822),n(1440),n(5592),n(6891)],void 0===(s="function"==typeof(i=function(e){return e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),s="textarea"===o,r="input"===o;this.isMultiLine=s||!r&&this._isContentEditable(this.element),this.valueMethod=this.element[s||r?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var s=e.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case s.UP:t=!0,this._keyEvent("previous",o);break;case s.DOWN:t=!0,this._keyEvent("next",o);break;case s.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(t,n){var i,o;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),(i=n.item.attr("aria-label")||o.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay((function(){this.previous=o,this.selectedItem=i}))),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete})?i.apply(t,o):i)||(e.exports=s)},9366:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(341),n(1193),n(7053),n(6891)],void 0===(s="function"==typeof(i=function(e){var t;return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,o=i?this.options.iconPosition:n,s="top"===o||"bottom"===o;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(o),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=(t=e.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button})?i.apply(t,o):i)||(e.exports=s)},1193:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(5042),n(7808),n(6575),n(6891)],void 0===(s="function"==typeof(i=function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,i=this,o=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML})),this.originalLabel&&(o.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(o.disabled=t),o},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,n="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(n):e(n).filter((function(){return 0===e(this).form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio})?i.apply(t,o):i)||(e.exports=s)},341:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Controlgroup 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(6891)],void 0===(s="function"==typeof(i=function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,(function(i,o){var s,r={};if(o)return"controlgroupLabel"===i?((s=t.element.find(o)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(s.get()))):void(e.fn[i]&&(r=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}},t.element.find(o).each((function(){var o=e(this),s=o[i]("instance"),a=e.widget.extend({},r);if("button"!==i||!o.parent(".ui-spinner").length){s||(s=o[i]()[i]("instance")),s&&(a.classes=t._resolveClassesValues(a.classes,s)),o[i](a);var l=o[i]("widget");e.data(l[0],"ui-controlgroup-data",s||o[i]("instance")),n.push(l[0])}}))))})),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var n=e(this).data("ui-controlgroup-data");n&&n[t]&&n[t]()}))},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var o={};return e.each(n,(function(s){var r=i.options.classes[s]||"";r=e.trim(r.replace(t,"")),o[s]=(r+" "+n[s]).replace(/\s+/g," ")})),o},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,i){var o=t[i]().data("ui-controlgroup-data");if(o&&n["_"+o.widgetName+"Options"]){var s=n["_"+o.widgetName+"Options"](1===t.length?"only":i);s.classes=n._resolveClassesValues(s.classes,o),o.element[o.widgetName](s)}else n._updateCornerClass(t[i](),i)})),this._callChildMethod("refresh"))}})})?i.apply(t,o):i)||(e.exports=s)},2466:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(9366),n(7285),n(6177),n(1707),n(5436),n(7053),n(1822),n(1440),n(192),n(3614),n(9138),n(5592),n(6891)],void 0===(s="function"==typeof(i=function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,o=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),s=Math.max.apply(null,o);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),o=n.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){o.trigger("focus")})),t.preventDefault()):(this._delay((function(){i.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,(function(n,i){var o,s;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),o=i.click,s={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,e("<button></button>",i).button(s).appendTo(t.uiButtonSet).on("click",(function(){o.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,i(o))},drag:function(e,n){t._trigger("drag",e,i(n))},stop:function(o,s){var r=s.offset.left-t.document.scrollLeft(),a=s.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(a>=0?"+":"")+a,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",o,i(s))}})},_makeResizable:function(){var t=this,n=this.options,i=n.resizable,o=this.uiDialog.css("position"),s="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function r(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,i){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,r(i))},resize:function(e,n){t._trigger("resize",e,r(n))},stop:function(i,o){var s=t.uiDialog.offset(),a=s.left-t.document.scrollLeft(),l=s.top-t.document.scrollTop();n.height=t.uiDialog.height(),n.width=t.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",i,r(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,o={};e.each(t,(function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(o[e]=t)})),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,n){var i,o,s=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=s.is(":data(ui-draggable)"))&&!n&&s.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((o=s.is(":data(ui-resizable)"))&&!n&&s.resizable("destroy"),o&&"string"==typeof n&&s.resizable("option","handles",n),o||!1===n||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay((function(){t=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog})?i.apply(t,o):i)||(e.exports=s)},7285:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(6177),n(6400),n(1624),n(1440),n(192),n(464),n(5592),n(6891)],void 0===(s="function"==typeof(i=function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(t),!this.handle||(this._blurActiveElement(t),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",t)&&n._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),o=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,s=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(i=(n=e(o.containment))[0])&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=o.containment:this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,s,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-r.grid[1]:o+r.grid[1]:o,s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-r.grid[0]:s+r.grid[0]:s),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each((function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,o))}))},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,(function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))}))},drag:function(t,n,i){e.each(i.sortables,(function(){var o=!1,s=this;s.positionAbs=i.positionAbs,s.helperProportions=i.helperProportions,s.offset.click=i.offset.click,s._intersectsWith(s.containerCache)&&(o=!0,e.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(o=!1),o}))),o?(s.isOver||(s.isOver=1,i._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=i.offset.click.top,s.offset.click.left=i.offset.click.left,s.offset.parent.left-=i.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=i.offset.parent.top-s.offset.parent.top,i._trigger("toSortable",t),i.dropped=s.element,e.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,s.fromOutside=i),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),s=i.options;o.css("cursor")&&(s._cursor=o.css("cursor")),o.css("cursor",s.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),s=i.options;o.css("opacity")&&(s._opacity=o.css("opacity")),o.css("opacity",s.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,s=!1,r=i.scrollParentNotHidden[0],a=i.document[0];r!==a&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+r.offsetHeight-t.pageY<o.scrollSensitivity?r.scrollTop=s=r.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=s=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+r.offsetWidth-t.pageX<o.scrollSensitivity?r.scrollLeft=s=r.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=s=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})}))},drag:function(t,n,i){var o,s,r,a,l,c,u,d,h,p,f=i.options,m=f.snapTolerance,g=n.offset.left,_=g+i.helperProportions.width,v=n.offset.top,y=v+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)c=(l=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,d=(u=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,_<l-m||g>c+m||y<u-m||v>d+m||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(u-y)<=m,s=Math.abs(d-v)<=m,r=Math.abs(l-_)<=m,a=Math.abs(c-g)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),p=o||s||r||a,"outer"!==f.snapMode&&(o=Math.abs(u-v)<=m,s=Math.abs(d-y)<=m,r=Math.abs(l-g)<=m,a=Math.abs(c-_)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(o||s||r||a||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=o||s||r||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,s=i.options,r=e.makeArray(e(s.stack)).sort((function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)}));r.length&&(o=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each((function(t){e(this).css("zIndex",o+t)})),this.css("zIndex",o+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),s=i.options;o.css("zIndex")&&(s._zIndex=o.css("zIndex")),o.css("zIndex",s.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}}),e.ui.draggable})?i.apply(t,o):i)||(e.exports=s)},8851:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(7053),n(1822),n(1440),n(9138),n(5592),n(6891)],void 0===(s="function"==typeof(i=function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var n,i,o,s,r=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:r=!1,i=this.previousFilter||"",s=!1,o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),o===i?s=!0:o=i+o,n=this._filterMenuItems(o),(n=s&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(o=String.fromCharCode(t.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(t,n),this.previousFilter=o,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,o,s=this,r=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+r),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))})),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),(t=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);s._isDivider(t)&&s._addClass(t,"ui-menu-divider","ui-widget-content")})),o=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,o;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,s,r,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.outerHeight(),o<0?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-o<0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,o;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+o>0})),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))}))}})})?i.apply(t,o):i)||(e.exports=s)},6177:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(1870),n(5592),n(6891)],void 0===(s="function"==typeof(i=function(e){var t=!1;return e(document).on("mouseup",(function(){t=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,s=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(o&&!s&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(t,o):i)||(e.exports=s)},1707:(e,t,n)=>{var i,o,s;
/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(9755),n(6177),n(2064),n(1624),n(5592),n(6891)],void 0===(s="function"==typeof(i=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0||(t[i]=1,o=t[i]>0,t[i]=0,o)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",(function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())})).on("mouseleave",(function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,o,s,r=this.options,a=this;if(this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)o="ui-resizable-"+(t=e.trim(i[n])),s=e("<div>"),this._addClass(s,"ui-resizable-handle "+o),s.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var n,i,o,s;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")})),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)((i=e(this.handles[n])[0])===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,s=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,i+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,s=this.axis,r=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,r,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,o,s,r,a,l,c=this.options,u=this;return this._helper&&(o=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,s=i?0:u.sizeDiff.width,r={width:u.helper.width()-s,height:u.helper.height()-o},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,s,r=this.options;s={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,i=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),i>s.minHeight&&(s.minHeight=i),n<s.maxWidth&&(s.maxWidth=n),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),r&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),s&&c&&(e.left=a-t.minWidth),i&&c&&(e.left=a-t.maxWidth),r&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(o[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-r},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,s,r,a,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,h=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(l.containerElement=e(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each((function(e,i){n[e]=l._num(t.css("padding"+i))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,s=l.containerSize.width,r=l._hasScroll(h,"left")?h.scrollWidth:s,a=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:i.left,top:i.top,width:r,height:a}))},resize:function(t){var n,i,o,s,r=e(this).resizable("instance"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||t.shiftKey,d={top:0,left:0},h=r.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?l.top:0),o=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),o&&s?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),n=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-l.left)),i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-l.top)),n+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-n,u&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,u&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,s=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,s=i.originalSize,r=i.originalPosition,a={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-r.top||0,left:i.position.left-r.left||0};e(o.alsoResize).each((function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),o={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,(function(e,t){var n=(i[t]||0)+(a[t]||0);n&&n>=0&&(o[t]=n||null)})),t.css(o)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,s=n.originalSize,r=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-s.width)/c)*c,h=Math.round((o.height-s.height)/u)*u,p=s.width+d,f=s.height+h,m=i.maxWidth&&i.maxWidth<p,g=i.maxHeight&&i.maxHeight<f,_=i.minWidth&&i.minWidth>p,v=i.minHeight&&i.minHeight>f;i.grid=l,_&&(p+=c),v&&(f+=u),m&&(p-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.top=r.top-h):/^(sw)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.left=r.left-d):((f-u<=0||p-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=r.top-h):(f=u-t.height,n.size.height=f,n.position.top=r.top+s.height-f),p-c>0?(n.size.width=p,n.position.left=r.left-d):(p=c-t.width,n.size.width=p,n.position.left=r.left+s.width-p))}}),e.ui.resizable})?i.apply(t,o):i)||(e.exports=s)},9755:function(e,t){var n;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var s=[],r=Object.getPrototypeOf,a=s.slice,l=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},c=s.push,u=s.indexOf,d={},h=d.toString,p=d.hasOwnProperty,f=p.toString,m=f.call(Object),g={},_=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},y=i.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var i,o,s=(n=n||y).createElement("script");if(s.text=e,t)for(i in b)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,o);n.head.appendChild(s).parentNode.removeChild(s)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var k="3.6.0",C=function(e,t){return new C.fn.init(e,t)};function $(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!_(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:k,constructor:C,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},C.extend=C.fn.extend=function(){var e,t,n,i,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||_(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&r!==i&&(c&&i&&(C.isPlainObject(i)||(o=Array.isArray(i)))?(n=r[t],s=o&&!Array.isArray(n)?[]:o||C.isPlainObject(n)?n:{},o=!1,r[t]=C.extend(c,s,i)):void 0!==i&&(r[t]=i));return r},C.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=r(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&f.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if($(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&($(Object(e))?C.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,s=e.length,r=!n;o<s;o++)!t(e[o],o)!==r&&i.push(e[o]);return i},map:function(e,t,n){var i,o,s=0,r=[];if($(e))for(i=e.length;s<i;s++)null!=(o=t(e[s],s,n))&&r.push(o);else for(s in e)null!=(o=t(e[s],s,n))&&r.push(o);return l(r)},guid:1,support:g}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=s[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var S=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(e){var t,n,i,o,s,r,a,l,c,u,d,h,p,f,m,g,_,v,y,b="sizzle"+1*new Date,x=e.document,w=0,k=0,C=le(),$=le(),S=le(),E=le(),T=function(e,t){return e===t&&(d=!0),0},D={}.hasOwnProperty,A=[],N=A.pop,O=A.push,P=A.push,j=A.slice,M=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",L="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\[[\\x20\\t\\r\\n\\f]*("+L+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+R+"*\\]",F=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",H=new RegExp(R+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(R+"|>"),U=new RegExp(F),G=new RegExp("^"+L+"$"),K={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){h()},re=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(A=j.call(x.childNodes),x.childNodes),A[x.childNodes.length].nodeType}catch(e){P={apply:A.length?function(e,t){O.apply(e,j.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ae(e,t,i,o){var s,a,c,u,d,f,_,v=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!o&&(h(t),t=t||p,m)){if(11!==x&&(d=Z.exec(e)))if(s=d[1]){if(9===x){if(!(c=t.getElementById(s)))return i;if(c.id===s)return i.push(c),i}else if(v&&(c=v.getElementById(s))&&y(t,c)&&c.id===s)return i.push(c),i}else{if(d[2])return P.apply(i,t.getElementsByTagName(e)),i;if((s=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(i,t.getElementsByClassName(s)),i}if(n.qsa&&!E[e+" "]&&(!g||!g.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(_=e,v=t,1===x&&(V.test(e)||q.test(e))){for((v=ee.test(e)&&_e(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ie,oe):t.setAttribute("id",u=b)),a=(f=r(e)).length;a--;)f[a]=(u?"#"+u:":scope")+" "+ye(f[a]);_=f.join(",")}try{return P.apply(i,v.querySelectorAll(_)),i}catch(t){E(e,!0)}finally{u===b&&t.removeAttribute("id")}}}return l(e.replace(B,"$1"),t,i,o)}function le(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function ce(e){return e[b]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,i){for(var o,s=e([],n.length,t),r=s.length;r--;)n[o=s[r]]&&(n[o]=!(i[o]=n[o]))}))}))}function _e(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},s=ae.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!J.test(t||n&&n.nodeName||"HTML")},h=ae.setDocument=function(e){var t,o,r=e?e.ownerDocument||e:x;return r!=p&&9===r.nodeType&&r.documentElement?(f=(p=r).documentElement,m=!s(p),x!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",se,!1):o.attachEvent&&o.attachEvent("onunload",se)),n.scope=ue((function(e){return f.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ue((function(e){return f.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,o,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(o=t.getElementsByName(e),i=0;s=o[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[o++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},_=[],g=[],(n.qsa=Q.test(p.querySelectorAll))&&(ue((function(e){var t;f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+I+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),_.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),_=_.length&&new RegExp(_.join("|")),t=Q.test(f.compareDocumentPosition),y=t||Q.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==p||e.ownerDocument==x&&y(x,e)?-1:t==p||t.ownerDocument==x&&y(x,t)?1:u?M(u,e)-M(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,r=[e],a=[t];if(!o||!s)return e==p?-1:t==p?1:o?-1:s?1:u?M(u,e)-M(u,t):0;if(o===s)return he(e,t);for(n=e;n=n.parentNode;)r.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;r[i]===a[i];)i++;return i?he(r[i],a[i]):r[i]==x?-1:a[i]==x?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&m&&!E[t+" "]&&(!_||!_.test(t))&&(!g||!g.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){E(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),y(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var o=i.attrHandle[t.toLowerCase()],s=o&&D.call(i.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==s?s:n.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ae.escape=function(e){return(e+"").replace(ie,oe)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],o=0,s=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(T),d){for(;t=e[s++];)t===e[s]&&(o=i.push(s));for(;o--;)e.splice(i[o],1)}return u=null,e},o=ae.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=ae.selectors={cacheLength:50,createPseudo:ce,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=r(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+R+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=ae.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,m=s!==r?"nextSibling":"previousSibling",g=t.parentNode,_=a&&t.nodeName.toLowerCase(),v=!l&&!a,y=!1;if(g){if(s){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===_:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&v){for(y=(p=(c=(u=(d=(h=g)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){u[e]=[w,p,y];break}}else if(v&&(y=p=(c=(u=(d=(h=t)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===y)for(;(h=++p&&h&&h[m]||(y=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==_:1!==h.nodeType)||!++y||(v&&((u=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[w,y]),h!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return o[b]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,s=o(e,t),r=s.length;r--;)e[i=M(e,s[r])]=!(n[i]=s[r])})):function(e){return o(e,0,n)}):o}},pseudos:{not:ce((function(e){var t=[],n=[],i=a(e.replace(B,"$1"));return i[b]?ce((function(e,t,n,o){for(var s,r=i(e,null,o,[]),a=e.length;a--;)(s=r[a])&&(e[a]=!(t[a]=s))})):function(e,o,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:ge((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=fe(t);function ve(){}function ye(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(e,t,n){var i=t.dir,o=t.next,s=o||i,r=n&&"parentNode"===s,a=k++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o);return!1}:function(t,n,l){var c,u,d,h=[w,a];if(l){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(u=(d=t[b]||(t[b]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[s])&&c[0]===w&&c[1]===a)return h[2]=c[2];if(u[s]=h,h[2]=e(t,n,l))return!0}return!1}}function xe(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function we(e,t,n,i,o){for(var s,r=[],a=0,l=e.length,c=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,i,o)||(r.push(s),c&&t.push(a)));return r}function ke(e,t,n,i,o,s){return i&&!i[b]&&(i=ke(i)),o&&!o[b]&&(o=ke(o,s)),ce((function(s,r,a,l){var c,u,d,h=[],p=[],f=r.length,m=s||function(e,t,n){for(var i=0,o=t.length;i<o;i++)ae(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:we(m,h,e,a,l),_=n?o||(s?e:f||i)?[]:r:g;if(n&&n(g,_,a,l),i)for(c=we(_,p),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(_[p[u]]=!(g[p[u]]=d));if(s){if(o||e){if(o){for(c=[],u=_.length;u--;)(d=_[u])&&c.push(g[u]=d);o(null,_=[],c,l)}for(u=_.length;u--;)(d=_[u])&&(c=o?M(s,d):h[u])>-1&&(s[c]=!(r[c]=d))}}else _=we(_===r?_.splice(f,_.length):_),o?o(null,r,_,l):P.apply(r,_)}))}function Ce(e){for(var t,n,o,s=e.length,r=i.relative[e[0].type],a=r||i.relative[" "],l=r?1:0,u=be((function(e){return e===t}),a,!0),d=be((function(e){return M(t,e)>-1}),a,!0),h=[function(e,n,i){var o=!r&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,o}];l<s;l++)if(n=i.relative[e[l].type])h=[be(xe(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[b]){for(o=++l;o<s&&!i.relative[e[o].type];o++);return ke(l>1&&xe(h),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(B,"$1"),n,l<o&&Ce(e.slice(l,o)),o<s&&Ce(e=e.slice(o)),o<s&&ye(e))}h.push(n)}return xe(h)}return ve.prototype=i.filters=i.pseudos,i.setFilters=new ve,r=ae.tokenize=function(e,t){var n,o,s,r,a,l,c,u=$[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=i.preFilter;a;){for(r in n&&!(o=W.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=q.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(B," ")}),a=a.slice(n.length)),i.filter)!(o=K[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):$(e,l).slice(0)},a=ae.compile=function(e,t){var n,o=[],s=[],a=S[e+" "];if(!a){for(t||(t=r(e)),n=t.length;n--;)(a=Ce(t[n]))[b]?o.push(a):s.push(a);(a=S(e,function(e,t){var n=t.length>0,o=e.length>0,s=function(s,r,a,l,u){var d,f,g,_=0,v="0",y=s&&[],b=[],x=c,k=s||o&&i.find.TAG("*",u),C=w+=null==x?1:Math.random()||.1,$=k.length;for(u&&(c=r==p||r||u);v!==$&&null!=(d=k[v]);v++){if(o&&d){for(f=0,r||d.ownerDocument==p||(h(d),a=!m);g=e[f++];)if(g(d,r||p,a)){l.push(d);break}u&&(w=C)}n&&((d=!g&&d)&&_--,s&&y.push(d))}if(_+=v,n&&v!==_){for(f=0;g=t[f++];)g(y,b,r,a);if(s){if(_>0)for(;v--;)y[v]||b[v]||(b[v]=N.call(l));b=we(b)}P.apply(l,b),u&&!s&&b.length>0&&_+t.length>1&&ae.uniqueSort(l)}return u&&(w=C,c=x),y};return n?ce(s):s}(s,o))).selector=e}return a},l=ae.select=function(e,t,n,o){var s,l,c,u,d,h="function"==typeof e&&e,p=!o&&r(e=h.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=K.needsContext.test(e)?0:l.length;s--&&(c=l[s],!i.relative[u=c.type]);)if((d=i.find[u])&&(o=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&_e(t.parentNode)||t))){if(l.splice(s,1),!(e=o.length&&ye(l)))return P.apply(n,o),n;break}}return(h||a(e,p))(o,t,!m,n,!t||ee.test(e)&&_e(t.parentNode)||t),n},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(I,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ae}(i);C.find=S,C.expr=S.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=S.uniqueSort,C.text=S.getText,C.isXMLDoc=S.isXML,C.contains=S.contains,C.escapeSelector=S.escape;var E=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&C(e).is(n))break;i.push(e)}return i},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=C.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return _(t)?C.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?C.grep(e,(function(e){return u.call(t,e)>-1!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?C.find.matchesSelector(i,e)?[i]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<i;t++)if(C.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)C.find(e,o[t],n);return i>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"==typeof e&&D.test(e)?C(e):e||[],!1).length}});var P,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||P,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),N.test(i[1])&&C.isPlainObject(t))for(i in t)_(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=y.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):_(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,P=C(y);var M=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,o=this.length,s=[],r="string"!=typeof e&&C(e);if(!D.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?C.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?u.call(C(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,i){var o=C.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=C.filter(i,o)),this.length>1&&(I[e]||C.uniqueSort(o),M.test(e)&&o.reverse()),this.pushStack(o)}}));var L=/[^\x20\t\r\n\f]+/g;function z(e){return e}function F(e){throw e}function H(e,t,n,i){var o;try{e&&_(o=e.promise)?o.call(e).done(t).fail(n):e&&_(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(L)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,i,o,s=[],r=[],a=-1,l=function(){for(o=o||e.once,i=t=!0;r.length;a=-1)for(n=r.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,o&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(a=s.length-1,r.push(n)),function t(n){C.each(n,(function(n,i){_(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==w(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(e){return e?C.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=r=[],s=n="",this},disabled:function(){return!s},lock:function(){return o=r=[],n||t||(s=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],r.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,i){var o=_(e[i[4]])&&e[i[4]];s[i[1]]((function(){var e=o&&o.apply(this,arguments);e&&_(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var s=0;function r(e,t,n,o){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(e<s)){if((i=n.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,_(c)?o?c.call(i,r(s,t,z,o),r(s,t,F,o)):(s++,c.call(i,r(s,t,z,o),r(s,t,F,o),r(s,t,z,t.notifyWith))):(n!==z&&(a=void 0,l=[i]),(o||t.resolveWith)(a,l))}},u=o?c:function(){try{c()}catch(i){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(i,u.stackTrace),e+1>=s&&(n!==F&&(a=void 0,l=[i]),t.rejectWith(a,l))}};e?u():(C.Deferred.getStackHook&&(u.stackTrace=C.Deferred.getStackHook()),i.setTimeout(u))}}return C.Deferred((function(i){t[0][3].add(r(0,i,_(o)?o:z,i.notifyWith)),t[1][3].add(r(0,i,_(e)?e:z)),t[2][3].add(r(0,i,_(n)?n:F))})).promise()},promise:function(e){return null!=e?C.extend(e,o):o}},s={};return C.each(t,(function(e,i){var r=i[2],a=i[5];o[i[1]]=r.add,a&&r.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),r.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=r.fireWith})),o.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),o=a.call(arguments),s=C.Deferred(),r=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?a.call(arguments):n,--t||s.resolveWith(i,o)}};if(t<=1&&(H(e,s.done(r(n)).resolve,s.reject,!t),"pending"===s.state()||_(o[n]&&o[n].then)))return s.then();for(;n--;)H(o[n],r(n),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&B.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){i.setTimeout((function(){throw e}))};var W=C.Deferred();function q(){y.removeEventListener("DOMContentLoaded",q),i.removeEventListener("load",q),C.ready()}C.fn.ready=function(e){return W.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||W.resolveWith(y,[C]))}}),C.ready.then=W.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?i.setTimeout(C.ready):(y.addEventListener("DOMContentLoaded",q),i.addEventListener("load",q));var V=function(e,t,n,i,o,s,r){var a=0,l=e.length,c=null==n;if("object"===w(n))for(a in o=!0,n)V(e,t,a,n[a],!0,s,r);else if(void 0!==i&&(o=!0,_(i)||(r=!0),c&&(r?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(C(e),n)})),t))for(;a<l;a++)t(e[a],n,r?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):s},U=/^-ms-/,G=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function J(e){return e.replace(U,"ms-").replace(G,K)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=C.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[J(t)]=n;else for(i in t)o[J(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(J):(t=J(t))in i?[t]:t.match(L)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||C.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Q=new Y,Z=new Y,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,i,o,s=this[0],r=s&&s.attributes;if(void 0===e){if(this.length&&(o=Z.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&(i=J(i.slice(5)),ne(s,i,o[i]));Q.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){Z.set(this,e)})):V(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=Z.get(s,e))||void 0!==(n=ne(s,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Q.get(e,t),n&&(!i||Array.isArray(n)?i=Q.access(e,t,C.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),i=n.length,o=n.shift(),s=C._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete s.stop,o.call(e,(function(){C.dequeue(e,t)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:C.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=C.Deferred(),s=this,r=this.length,a=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(n=Q.get(s[r],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],re=y.documentElement,ae=function(e){return C.contains(e.ownerDocument,e)},le={composed:!0};re.getRootNode&&(ae=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===C.css(e,"display")};function ue(e,t,n,i){var o,s,r=20,a=i?function(){return i.cur()}:function(){return C.css(e,t,"")},l=a(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),u=e.nodeType&&(C.cssNumber[t]||"px"!==c&&+l)&&oe.exec(C.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;r--;)C.style(e,t,u+c),(1-s)*(1-(s=a()/l||.5))<=0&&(r=0),u/=s;u*=2,C.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}var de={};function he(e){var t,n=e.ownerDocument,i=e.nodeName,o=de[i];return o||(t=n.body.appendChild(n.createElement(i)),o=C.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),de[i]=o,o)}function pe(e,t){for(var n,i,o=[],s=0,r=e.length;s<r;s++)(i=e[s]).style&&(n=i.style.display,t?("none"===n&&(o[s]=Q.get(i,"display")||null,o[s]||(i.style.display="")),""===i.style.display&&ce(i)&&(o[s]=he(i))):"none"!==n&&(o[s]="none",Q.set(i,"display",n)));for(s=0;s<r;s++)null!=o[s]&&(e[s].style.display=o[s]);return e}C.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?C(this).show():C(this).hide()}))}});var fe,me,ge=/^(?:checkbox|radio)$/i,_e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;fe=y.createDocumentFragment().appendChild(y.createElement("div")),(me=y.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),fe.appendChild(me),g.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",g.option=!!fe.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?C.merge([e],n):n}function xe(e,t){for(var n=0,i=e.length;n<i;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,g.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function ke(e,t,n,i,o){for(var s,r,a,l,c,u,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((s=e[p])||0===s)if("object"===w(s))C.merge(h,s.nodeType?[s]:s);else if(we.test(s)){for(r=r||d.appendChild(t.createElement("div")),a=(_e.exec(s)||["",""])[1].toLowerCase(),l=ye[a]||ye._default,r.innerHTML=l[1]+C.htmlPrefilter(s)+l[2],u=l[0];u--;)r=r.lastChild;C.merge(h,r.childNodes),(r=d.firstChild).textContent=""}else h.push(t.createTextNode(s));for(d.textContent="",p=0;s=h[p++];)if(i&&C.inArray(s,i)>-1)o&&o.push(s);else if(c=ae(s),r=be(d.appendChild(s),"script"),c&&xe(r),n)for(u=0;s=r[u++];)ve.test(s.type||"")&&n.push(s);return d}var Ce=/^([^.]*)(?:\.(.+)|)/;function $e(){return!0}function Se(){return!1}function Ee(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,n,i,o,s){var r,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)Te(e,a,n,i,t[a],s);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Se;else if(!o)return e;return 1===s&&(r=o,(o=function(e){return C().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=C.guid++)),e.each((function(){C.event.add(this,t,o,i,n)}))}function De(e,t,n){n?(Q.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var i,o,s=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=a.call(arguments),Q.set(this,t,s),i=n(this,t),this[t](),s!==(o=Q.get(this,t))||i?Q.set(this,t,!1):o={},s!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else s.length&&(Q.set(this,t,{value:C.event.trigger(C.extend(s[0],C.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&C.event.add(e,t,$e)}C.event={global:{},add:function(e,t,n,i,o){var s,r,a,l,c,u,d,h,p,f,m,g=Q.get(e);if(X(e))for(n.handler&&(n=(s=n).handler,o=s.selector),o&&C.find.matchesSelector(re,o),n.guid||(n.guid=C.guid++),(l=g.events)||(l=g.events=Object.create(null)),(r=g.handle)||(r=g.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(L)||[""]).length;c--;)p=m=(a=Ce.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=C.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=C.event.special[p]||{},u=C.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:f.join(".")},s),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,r)||e.addEventListener&&e.addEventListener(p,r)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),C.event.global[p]=!0)},remove:function(e,t,n,i,o){var s,r,a,l,c,u,d,h,p,f,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(L)||[""]).length;c--;)if(p=m=(a=Ce.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=C.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=h.length;s--;)u=h[s],!o&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(s,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));r&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||C.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)C.event.remove(e,p+t[c],n,i,!0);C.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,s,r,a=new Array(arguments.length),l=C.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],u=C.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(r=C.event.handlers.call(this,l,c),t=0;(o=r[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(s=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((C.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,o,s,r,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],r={},n=0;n<l;n++)void 0===r[o=(i=t[n]).selector+" "]&&(r[o]=i.needsContext?C(o,this).index(c)>-1:C.find(o,this,null,[c]).length),r[o]&&s.push(i);s.length&&a.push({elem:c,handlers:s})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",$e),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?$e:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=$e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=$e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=$e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){C.event.special[e]={setup:function(){return De(this,e,Ee),!1},trigger:function(){return De(this,e),!0},_default:function(){return!0},delegateType:t}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,s=e.handleObj;return o&&(o===i||C.contains(i,o))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,i){return Te(this,e,t,n,i)},one:function(e,t,n,i){return Te(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,C(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each((function(){C.event.remove(this,e,n,t)}))}});var Ae=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,i,o,s,r,a;if(1===t.nodeType){if(Q.hasData(e)&&(a=Q.get(e).events))for(o in Q.remove(t,"handle events"),a)for(n=0,i=a[o].length;n<i;n++)C.event.add(t,o,a[o][n]);Z.hasData(e)&&(s=Z.access(e),r=C.extend({},s),Z.set(t,r))}}function Re(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Le(e,t,n,i){t=l(t);var o,s,r,a,c,u,d=0,h=e.length,p=h-1,f=t[0],m=_(f);if(m||h>1&&"string"==typeof f&&!g.checkClone&&Ne.test(f))return e.each((function(o){var s=e.eq(o);m&&(t[0]=f.call(this,o,s.html())),Le(s,t,n,i)}));if(h&&(s=(o=ke(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=s),s||i)){for(a=(r=C.map(be(o,"script"),je)).length;d<h;d++)c=o,d!==p&&(c=C.clone(c,!0,!0),a&&C.merge(r,be(c,"script"))),n.call(e[d],c,d);if(a)for(u=r[r.length-1].ownerDocument,C.map(r,Me),d=0;d<a;d++)c=r[d],ve.test(c.type||"")&&!Q.access(c,"globalEval")&&C.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?C._evalUrl&&!c.noModule&&C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):x(c.textContent.replace(Oe,""),c,u))}return e}function ze(e,t,n){for(var i,o=t?C.filter(t,e):e,s=0;null!=(i=o[s]);s++)n||1!==i.nodeType||C.cleanData(be(i)),i.parentNode&&(n&&ae(i)&&xe(be(i,"script")),i.parentNode.removeChild(i));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,s,r,a=e.cloneNode(!0),l=ae(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(r=be(a),i=0,o=(s=be(e)).length;i<o;i++)Re(s[i],r[i]);if(t)if(n)for(s=s||be(e),r=r||be(a),i=0,o=s.length;i<o;i++)Ie(s[i],r[i]);else Ie(e,a);return(r=be(a,"script")).length>0&&xe(r,!l&&be(e,"script")),a},cleanData:function(e){for(var t,n,i,o=C.event.special,s=0;void 0!==(n=e[s]);s++)if(X(n)){if(t=n[Q.expando]){if(t.events)for(i in t.events)o[i]?C.event.remove(n,i):C.removeEvent(n,i,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),C.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return V(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Le(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)}))},prepend:function(){return Le(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Le(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ye[(_e.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Le(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(be(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,i=[],o=C(e),s=o.length-1,r=0;r<=s;r++)n=r===s?this:this.clone(!0),C(o[r])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var Fe=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Be=function(e,t,n){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=s[o];return i},We=new RegExp(se.join("|"),"i");function qe(e,t,n){var i,o,s,r,a=e.style;return(n=n||He(e))&&(""!==(r=n.getPropertyValue(t)||n[t])||ae(e)||(r=C.style(e,t)),!g.pixelBoxStyles()&&Fe.test(r)&&We.test(t)&&(i=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=n.width,a.width=i,a.minWidth=o,a.maxWidth=s)),void 0!==r?r+"":r}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(c).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",r=36===t(e.right),o=36===t(e.width),u.style.position="absolute",s=12===t(u.offsetWidth/3),re.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,o,s,r,a,l,c=y.createElement("div"),u=y.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,n,o;return null==a&&(e=y.createElement("table"),t=y.createElement("tr"),n=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),o=i.getComputedStyle(t),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Ue=["Webkit","Moz","ms"],Ge=y.createElement("div").style,Ke={};function Je(e){var t=C.cssProps[e]||Ke[e];return t||(e in Ge?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;n--;)if((e=Ue[n]+t)in Ge)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var i=oe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function tt(e,t,n,i,o,s){var r="width"===t?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;r<4;r+=2)"margin"===n&&(l+=C.css(e,n+se[r],!0,o)),i?("content"===n&&(l-=C.css(e,"padding"+se[r],!0,o)),"margin"!==n&&(l-=C.css(e,"border"+se[r]+"Width",!0,o))):(l+=C.css(e,"padding"+se[r],!0,o),"padding"!==n?l+=C.css(e,"border"+se[r]+"Width",!0,o):a+=C.css(e,"border"+se[r]+"Width",!0,o));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))||0),l}function nt(e,t,n){var i=He(e),o=(!g.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,i),s=o,r=qe(e,t,i),a="offset"+t[0].toUpperCase()+t.slice(1);if(Fe.test(r)){if(!n)return r;r="auto"}return(!g.boxSizingReliable()&&o||!g.reliableTrDimensions()&&A(e,"tr")||"auto"===r||!parseFloat(r)&&"inline"===C.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===C.css(e,"boxSizing",!1,i),(s=a in e)&&(r=e[a])),(r=parseFloat(r)||0)+tt(e,t,n||(o?"border":"content"),s,i,r)+"px"}function it(e,t,n,i,o){return new it.prototype.init(e,t,n,i,o)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,r,a=J(t),l=Ye.test(t),c=e.style;if(l||(t=Je(a)),r=C.cssHooks[t]||C.cssHooks[a],void 0===n)return r&&"get"in r&&void 0!==(o=r.get(e,!1,i))?o:c[t];"string"===(s=typeof n)&&(o=oe.exec(n))&&o[1]&&(n=ue(e,t,o),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=o&&o[3]||(C.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var o,s,r,a=J(t);return Ye.test(t)||(t=Je(a)),(r=C.cssHooks[t]||C.cssHooks[a])&&"get"in r&&(o=r.get(e,!0,n)),void 0===o&&(o=qe(e,t,i)),"normal"===o&&t in Ze&&(o=Ze[t]),""===n||n?(s=parseFloat(o),!0===n||isFinite(s)?s||0:o):o}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,i){if(n)return!Xe.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,i):Be(e,Qe,(function(){return nt(e,t,i)}))},set:function(e,n,i){var o,s=He(e),r=!g.scrollboxSize()&&"absolute"===s.position,a=(r||i)&&"border-box"===C.css(e,"boxSizing",!1,s),l=i?tt(e,t,i,a,s):0;return a&&r&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-tt(e,t,"border",!1,s)-.5)),l&&(o=oe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),et(0,n,l)}}})),C.cssHooks.marginLeft=Ve(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var i=0,o={},s="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+se[i]+t]=s[i]||s[i-2]||s[0];return o}},"margin"!==e&&(C.cssHooks[e+t].set=et)})),C.fn.extend({css:function(e,t){return V(this,(function(e,t,n){var i,o,s={},r=0;if(Array.isArray(t)){for(i=He(e),o=t.length;r<o;r++)s[t[r]]=C.css(e,t[r],!1,i);return s}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)}}),C.Tween=it,it.prototype={constructor:it,init:function(e,t,n,i,o,s){this.elem=e,this.prop=n,this.easing=o||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(C.cssNumber[n]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,n=it.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):it.propHooks._default.set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=it.prototype.init,C.fx.step={};var ot,st,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function lt(){st&&(!1===y.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(lt):i.setTimeout(lt,C.fx.interval),C.fx.tick())}function ct(){return i.setTimeout((function(){ot=void 0})),ot=Date.now()}function ut(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=se[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function dt(e,t,n){for(var i,o=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),s=0,r=o.length;s<r;s++)if(i=o[s].call(n,t,e))return i}function ht(e,t,n){var i,o,s=0,r=ht.prefilters.length,a=C.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=ot||ct(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),s=0,r=c.tweens.length;s<r;s++)c.tweens[s].run(i);return a.notifyWith(e,[c,i,n]),i<1&&r?n:(r||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var i=C.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,o,s,r;for(n in e)if(o=t[i=J(n)],s=e[n],Array.isArray(s)&&(o=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(r=C.cssHooks[i])&&"expand"in r)for(n in s=r.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=o);else t[i]=o}(u,c.opts.specialEasing);s<r;s++)if(i=ht.prefilters[s].call(c,e,u,c.opts))return _(i.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return C.map(u,dt,c),_(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,oe.exec(t),n),n}]},tweener:function(e,t){_(e)?(t=e,e=["*"]):e=e.match(L);for(var n,i=0,o=e.length;i<o;i++)n=e[i],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,s,r,a,l,c,u,d="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&ce(e),g=Q.get(e,"fxshow");for(i in n.queue||(null==(r=C._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,h.always((function(){h.always((function(){r.unqueued--,C.queue(e,"fx").length||r.empty.fire()}))}))),t)if(o=t[i],rt.test(o)){if(delete t[i],s=s||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||C.style(e,i)}if((l=!C.isEmptyObject(t))||!C.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(u=C.css(e,"display"))&&(c?u=c:(pe([e],!0),c=e.style.display||c,u=C.css(e,"display"),pe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===C.css(e,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),s&&(g.hidden=!m),m&&pe([e],!0),h.done((function(){for(i in m||pe([e]),Q.remove(e,"fxshow"),p)C.style(e,i,p[i])}))),l=dt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),C.speed=function(e,t,n){var i=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||_(e)&&e,duration:e,easing:n&&t||t&&!_(t)&&t};return C.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in C.fx.speeds?i.duration=C.fx.speeds[i.duration]:i.duration=C.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){_(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=C.isEmptyObject(e),s=C.speed(t,n,i),r=function(){var t=ht(this,C.extend({},e),s);(o||Q.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",s=C.timers,r=Q.get(this);if(o)r[o]&&r[o].stop&&i(r[o]);else for(o in r)r[o]&&r[o].stop&&at.test(o)&&i(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=e&&s[o].queue!==e||(s[o].anim.stop(n),t=!1,s.splice(o,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],s=C.timers,r=i?i.length:0;for(n.finish=!0,C.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,i,o)}})),C.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(ot=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),ot=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){st||(st=!0,lt())},C.fx.stop=function(){st=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}}))},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var pt,ft=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return V(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var i,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?C.prop(e,t,n):(1===s&&C.isXMLDoc(e)||(o=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=C.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(L);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ft[t]||C.find.attr;ft[t]=function(e,t,i){var o,s,r=t.toLowerCase();return i||(s=ft[r],ft[r]=o,o=null!=n(e,t,i)?r:null,ft[r]=s),o}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function _t(e){return(e.match(L)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(L)||[]}C.fn.extend({prop:function(e,t){return V(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var i,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&C.isXMLDoc(e)||(t=C.propFix[t]||t,o=C.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,i,o,s,r,a,l=0;if(_(e))return this.each((function(t){C(this).addClass(e.call(this,t,vt(this)))}));if((t=yt(e)).length)for(;n=this[l++];)if(o=vt(n),i=1===n.nodeType&&" "+_t(o)+" "){for(r=0;s=t[r++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");o!==(a=_t(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,s,r,a,l=0;if(_(e))return this.each((function(t){C(this).removeClass(e.call(this,t,vt(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[l++];)if(o=vt(n),i=1===n.nodeType&&" "+_t(o)+" "){for(r=0;s=t[r++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");o!==(a=_t(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):_(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,vt(this),t),t)})):this.each((function(){var t,o,s,r;if(i)for(o=0,s=C(this),r=yt(e);t=r[o++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+_t(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;C.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=_(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,C(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=C.map(o,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=C.valHooks[o.type]||C.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(bt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:_t(C.text(e))}},select:{get:function(e){var t,n,i,o=e.options,s=e.selectedIndex,r="select-one"===e.type,a=r?null:[],l=r?s+1:o.length;for(i=s<0?l:r?s:0;i<l;i++)if(((n=o[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=C(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,s=C.makeArray(t),r=o.length;r--;)((i=o[r]).selected=C.inArray(C.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},g.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in i;var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,o){var s,r,a,l,c,u,d,h,f=[n||y],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(r=h=a=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!xt.test(m+C.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[C.expando]?e:new C.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),d=C.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(n,t))){if(!o&&!d.noBubble&&!v(n)){for(l=d.delegateType||m,xt.test(l+m)||(r=r.parentNode);r;r=r.parentNode)f.push(r),a=r;a===(n.ownerDocument||y)&&f.push(a.defaultView||a.parentWindow||i)}for(s=0;(r=f[s++])&&!e.isPropagationStopped();)h=r,e.type=s>1?l:d.bindType||m,(u=(Q.get(r,"events")||Object.create(null))[e.type]&&Q.get(r,"handle"))&&u.apply(r,t),(u=c&&r[c])&&u.apply&&X(r)&&(e.result=u.apply(r,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!X(n)||c&&_(n[m])&&!v(n)&&((a=n[c])&&(n[c]=null),C.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,wt),n[m](),e.isPropagationStopped()&&h.removeEventListener(m,wt),C.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var i=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(i,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),g.focusin||C.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,o=Q.access(i,t);o||i.addEventListener(e,n,!0),Q.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=Q.access(i,t)-1;o?Q.access(i,t,o):(i.removeEventListener(e,n,!0),Q.remove(i,t))}}}));var kt=i.location,Ct={guid:Date.now()},$t=/\?/;C.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var St=/\[\]$/,Et=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,i){var o;if(Array.isArray(t))C.each(t,(function(t,o){n||St.test(e)?i(e,o):At(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==w(t))i(e,t);else for(o in t)At(e+"["+o+"]",t[o],n,i)}C.param=function(e,t){var n,i=[],o=function(e,t){var n=_(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){o(this.name,this.value)}));else for(n in e)At(n,e[n],t,o);return i.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Dt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:n.replace(Et,"\r\n")}})).get()}});var Nt=/%20/g,Ot=/#.*$/,Pt=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,It=/^\/\//,Rt={},Lt={},zt="*/".concat("*"),Ft=y.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,s=t.toLowerCase().match(L)||[];if(_(n))for(;i=s[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Bt(e,t,n,i){var o={},s=e===Lt;function r(a){var l;return o[a]=!0,C.each(e[a]||[],(function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)})),l}return r(t.dataTypes[0])||!o["*"]&&r("*")}function Wt(e,t){var n,i,o=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&C.extend(!0,e,i),e}Ft.href=kt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,C.ajaxSettings),t):Wt(C.ajaxSettings,e)},ajaxPrefilter:Ht(Rt),ajaxTransport:Ht(Lt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,s,r,a,l,c,u,d,h,p=C.ajaxSetup({},t),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?C(f):C.event,g=C.Deferred(),_=C.Callbacks("once memory"),v=p.statusCode||{},b={},x={},w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!r)for(r={};t=jt.exec(s);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),$(0,t),this}};if(g.promise(k),p.url=((e||p.url||kt.href)+"").replace(It,kt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(L)||[""],null==p.crossDomain){l=y.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Ft.protocol+"//"+Ft.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),Bt(Rt,p,t,k),c)return k;for(d in(u=C.event&&p.global)&&0==C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Mt.test(p.type),o=p.url.replace(Ot,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Nt,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=($t.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Pt,"$1"),h=($t.test(o)?"&":"?")+"_="+Ct.guid+++h),p.url=o+h),p.ifModified&&(C.lastModified[o]&&k.setRequestHeader("If-Modified-Since",C.lastModified[o]),C.etag[o]&&k.setRequestHeader("If-None-Match",C.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+zt+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,k,p)||c))return k.abort();if(w="abort",_.add(p.complete),k.done(p.success),k.fail(p.error),n=Bt(Lt,p,t,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(a=i.setTimeout((function(){k.abort("timeout")}),p.timeout));try{c=!1,n.send(b,$)}catch(e){if(c)throw e;$(-1,e)}}else $(-1,"No Transport");function $(e,t,r,l){var d,h,y,b,x,w=t;c||(c=!0,a&&i.clearTimeout(a),n=void 0,s=l||"",k.readyState=e>0?4:0,d=e>=200&&e<300||304===e,r&&(b=function(e,t,n){for(var i,o,s,r,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)s=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==l[0]&&l.unshift(s),n[s]}(p,k,r)),!d&&C.inArray("script",p.dataTypes)>-1&&C.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(e,t,n,i){var o,s,r,a,l,c={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(o in c)if((a=o.split(" "))[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[o]:!0!==c[o]&&(s=a[0],u.unshift(a[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(p,b,k,d),d?(p.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(C.lastModified[o]=x),(x=k.getResponseHeader("etag"))&&(C.etag[o]=x)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=b.state,h=b.data,d=!(y=b.error))):(y=w,!e&&w||(w="error",e<0&&(e=0))),k.status=e,k.statusText=(t||w)+"",d?g.resolveWith(f,[h,w,k]):g.rejectWith(f,[k,w,y]),k.statusCode(v),v=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[k,p,d?h:y]),_.fireWith(f,[k,w]),u&&(m.trigger("ajaxComplete",[k,p]),--C.active||C.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,i,o){return _(n)&&(o=o||i,i=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:o,data:n,success:i},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(_(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return _(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=_(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Vt=C.ajaxSettings.xhr();g.cors=!!Vt&&"withCredentials"in Vt,g.ajax=Vt=!!Vt,C.ajaxTransport((function(e){var t,n;if(g.cors||Vt&&!e.crossDomain)return{send:function(o,s){var r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(r,o[r]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(qt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Ut,Gt=[],Kt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||C.expando+"_"+Ct.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var o,s,r,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+o):!1!==e.jsonp&&(e.url+=($t.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||C.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=i[o],i[o]=function(){r=arguments},n.always((function(){void 0===s?C(i).removeProp(o):i[o]=s,e[o]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(o)),r&&_(s)&&s(r[0]),r=s=void 0})),"script"})),g.createHTMLDocument=((Ut=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),C.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((i=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(i)):t=y),s=!n&&[],(o=N.exec(e))?[t.createElement(o[1])]:(o=ke([e],t,s),s&&s.length&&C(s).remove(),C.merge([],o.childNodes)));var i,o,s},C.fn.load=function(e,t,n){var i,o,s,r=this,a=e.indexOf(" ");return a>-1&&(i=_t(e.slice(a)),e=e.slice(0,a)),_(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&C.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){s=arguments,r.html(i?C("<div>").append(C.parseHTML(e)).find(i):e)})).always(n&&function(e,t){r.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var i,o,s,r,a,l,c=C.css(e,"position"),u=C(e),d={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=C.css(e,"top"),l=C.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(r=(i=u.position()).top,o=i.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),_(t)&&(t=t.call(e,n,C.extend({},a))),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):u.css(d)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===C.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),o.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-C.css(i,"marginTop",!0),left:t.left-o.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||re}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(i){return V(this,(function(e,i,o){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===o)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:o,n?o:s.pageYOffset):e[i]=o}),e,i,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=Ve(g.pixelPosition,(function(e,n){if(n)return n=qe(e,t),Fe.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){C.fn[i]=function(o,s){var r=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===s?"margin":"border");return V(this,(function(t,n,o){var s;return v(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===o?C.css(t,n,a):C.style(t,n,o,a)}),t,r?o:void 0,r)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Jt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),_(e))return i=a.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(a.call(arguments)))}).guid=e.guid=e.guid||C.guid++,o},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=A,C.isFunction=_,C.isWindow=v,C.camelCase=J,C.type=w,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(Jt,"")},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var Xt=i.jQuery,Yt=i.$;return C.noConflict=function(e){return i.$===C&&(i.$=Yt),e&&i.jQuery===C&&(i.jQuery=Xt),C},void 0===o&&(i.jQuery=i.$=C),C}))},9461:e=>{"use strict";var t=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),n(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function n(e,i,o,s,r,a,l,c,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var h in i(s,r,a,l,c,u,d),s){var p=s[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var f=0;f<p.length;f++)n(e,i,o,p[f],r+"/"+h+"/"+f,a,r,h,s,f)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)n(e,i,o,p[m],r+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,r,h,s,m)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&n(e,i,o,p,r+"/"+h,a,r,h,s)}o(s,r,a,l,c,u,d)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2837:()=>{},5311:function(e,t,n){!function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(i):void 0},r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(){function e(e,t){var n=[],i=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},u=function(){function e(t){i(this,e),this.selfOptions=t||{},this.pipes={}}return o(e,[{key:"options",value:function(e){return e&&(this.selfOptions=e),this.selfOptions}},{key:"pipe",value:function(e,t){var n=t;if("string"==typeof e){if(void 0===n)return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if(n=e,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(e,t){var n=e;n.options=this.options();for(var i=t||e.pipe||"default",o=void 0,s=void 0;i;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(n),s=n,o=i,i=null,n&&n.next&&(n=n.next,i=s.nextPipe||n.pipe||o);return n.hasResult?n.result:void 0}}]),e}(),d=function(){function e(t){i(this,e),this.name=t,this.filters=[]}return o(e,[{key:"process",value:function(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var t=this.debug,i=this.filters.length,o=e,s=0;s<i;s++){var r=this.filters[s];if(t&&this.log("filter: "+r.filterName),r(o),"object"===(void 0===o?"undefined":n(o))&&o.exiting){o.exiting=!1;break}}!o.next&&this.resultCheck&&this.resultCheck(o)}},{key:"log",value:function(e){console.log("[jsondiffpatch] "+this.name+" pipe, "+e)}},{key:"append",value:function(){var e;return(e=this.filters).push.apply(e,arguments),this}},{key:"prepend",value:function(){var e;return(e=this.filters).unshift.apply(e,arguments),this}},{key:"indexOf",value:function(e){if(!e)throw new Error("a filter name is required");for(var t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw new Error("filter not found: "+e)}},{key:"list",value:function(){return this.filters.map((function(e){return e.filterName}))}},{key:"after",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(e){var t=this.indexOf(e);return this.filters.splice(t,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(e){if(!1!==e){if(!this.resultCheck){var t=this;return this.resultCheck=function(e){if(!e.hasResult){console.log(e);var n=new Error(t.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),e}(),h=function(){function e(){i(this,e)}return o(e,[{key:"setResult",value:function(e){return this.result=e,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(e,t){return"string"==typeof e||e instanceof d?this.nextPipe=e:(this.next=e,t&&(this.nextPipe=t)),this}},{key:"push",value:function(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}]),e}(),p="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array};function f(e){var t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}function m(e){if("object"!==(void 0===e?"undefined":n(e)))return e;if(null===e)return null;if(p(e))return e.map(m);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return f(e);var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=m(e[i]));return t}var g=function(e){function t(e,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.left=e,o.right=n,o.pipe="diff",o}return r(t,e),o(t,[{key:"setResult",value:function(e){if(this.options.cloneDiffValues&&"object"===(void 0===e?"undefined":n(e))){var t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:m;"object"===n(e[0])&&(e[0]=t(e[0])),"object"===n(e[1])&&(e[1]=t(e[1]))}return h.prototype.setResult.apply(this,arguments)}}]),t}(h),_=function(e){function t(e,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.left=e,o.delta=n,o.pipe="patch",o}return r(t,e),t}(h),v=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.delta=e,n.pipe="reverse",n}return r(t,e),t}(h),y="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},b=function(e){if(e.left!==e.right)if(void 0!==e.left)if(void 0!==e.right){if("function"==typeof e.left||"function"==typeof e.right)throw new Error("functions are not supported");e.leftType=null===e.left?"null":n(e.left),e.rightType=null===e.right?"null":n(e.right),e.leftType===e.rightType&&"boolean"!==e.leftType&&"number"!==e.leftType?("object"===e.leftType&&(e.leftIsArray=y(e.left)),"object"===e.rightType&&(e.rightIsArray=y(e.right)),e.leftIsArray===e.rightIsArray?e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()}else e.setResult([e.left,0,0]).exit();else{if("function"==typeof e.right)throw new Error("functions are not supported");e.setResult([e.right]).exit()}else e.setResult(void 0).exit()};b.filterName="trivial";var x=function(e){if(void 0!==e.delta){if(e.nested=!y(e.delta),!e.nested)if(1!==e.delta.length)if(2!==e.delta.length)3===e.delta.length&&0===e.delta[2]&&e.setResult(void 0).exit();else{if(e.left instanceof RegExp){var t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t)return void e.setResult(new RegExp(t[1],t[2])).exit()}e.setResult(e.delta[1]).exit()}else e.setResult(e.delta[0]).exit()}else e.setResult(e.left).exit()};x.filterName="trivial";var w=function(e){void 0!==e.delta?(e.nested=!y(e.delta),e.nested||(1!==e.delta.length?2!==e.delta.length?3===e.delta.length&&0===e.delta[2]&&e.setResult([e.delta[0]]).exit():e.setResult([e.delta[1],e.delta[0]]).exit():e.setResult([e.delta[0],0,0]).exit())):e.setResult(e.delta).exit()};function k(e){if(e&&e.children){for(var t=e.children.length,n=void 0,i=e.result,o=0;o<t;o++)void 0!==(n=e.children[o]).result&&((i=i||{})[n.childName]=n.result);i&&e.leftIsArray&&(i._t="a"),e.setResult(i).exit()}}function C(e){if(!e.leftIsArray&&"object"===e.leftType){var t=void 0,n=void 0,i=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(i&&!i(t,e)||(n=new g(e.left[t],e.right[t]),e.push(n,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(i&&!i(t,e)||void 0===e.left[t]&&(n=new g(void 0,e.right[t]),e.push(n,t)));e.children&&0!==e.children.length?e.exit():e.setResult(void 0).exit()}}w.filterName="trivial",k.filterName="collectChildren",C.filterName="objects";var $=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new _(e.left[t],e.delta[t]),e.push(n,t);e.exit()}};$.filterName="objects";var S=function(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],Object.prototype.hasOwnProperty.call(e.left,n.childName)&&void 0===n.result?delete e.left[n.childName]:e.left[n.childName]!==n.result&&(e.left[n.childName]=n.result);e.setResult(e.left).exit()}};S.filterName="collectChildren";var E=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new v(e.delta[t]),e.push(n,t);e.exit()}};function T(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i={},o=0;o<t;o++)i[(n=e.children[o]).childName]!==n.result&&(i[n.childName]=n.result);e.setResult(i).exit()}}E.filterName="objects",T.filterName="collectChildren";var D=function(e,t,n,i){return e[n]===t[i]},A=function(e,t,n,i){var o=e.length,s=t.length,r=void 0,a=void 0,l=[o+1];for(r=0;r<o+1;r++)for(l[r]=[s+1],a=0;a<s+1;a++)l[r][a]=0;for(l.match=n,r=1;r<o+1;r++)for(a=1;a<s+1;a++)n(e,t,r-1,a-1,i)?l[r][a]=l[r-1][a-1]+1:l[r][a]=Math.max(l[r-1][a],l[r][a-1]);return l},N=function(e,t,n,i){for(var o=t.length,s=n.length,r={sequence:[],indices1:[],indices2:[]};0!==o&&0!==s;)e.match(t,n,o-1,s-1,i)?(r.sequence.unshift(t[o-1]),r.indices1.unshift(o-1),r.indices2.unshift(s-1),--o,--s):e[o][s-1]>e[o-1][s]?--s:--o;return r},O={get:function(e,t,n,i){var o=i||{},s=A(e,t,n||D,o),r=N(s,e,t,o);return"string"==typeof e&&"string"==typeof t&&(r.sequence=r.sequence.join("")),r}},P=3,j="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},M="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]===t)return i;return-1};function I(e,t,n,i){for(var o=0;o<n;o++)for(var s=e[o],r=0;r<i;r++){var a=t[r];if(o!==r&&s===a)return!0}}function R(e,t,i,o,s){var r=e[i],a=t[o];if(r===a)return!0;if("object"!==(void 0===r?"undefined":n(r))||"object"!==(void 0===a?"undefined":n(a)))return!1;var l=s.objectHash;if(!l)return s.matchByPosition&&i===o;var c=void 0,u=void 0;return"number"==typeof i?(s.hashCache1=s.hashCache1||[],void 0===(c=s.hashCache1[i])&&(s.hashCache1[i]=c=l(r,i))):c=l(r),void 0!==c&&("number"==typeof o?(s.hashCache2=s.hashCache2||[],void 0===(u=s.hashCache2[o])&&(s.hashCache2[o]=u=l(a,o))):u=l(a),void 0!==u&&c===u)}var L=function(e){if(e.leftIsArray){var t={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},n=0,i=0,o=void 0,s=void 0,r=void 0,a=e.left,l=e.right,c=a.length,u=l.length,d=void 0;for(c>0&&u>0&&!t.objectHash&&"boolean"!=typeof t.matchByPosition&&(t.matchByPosition=!I(a,l,c,u));n<c&&n<u&&R(a,l,n,n,t);)o=n,d=new g(e.left[o],e.right[o]),e.push(d,o),n++;for(;i+n<c&&i+n<u&&R(a,l,c-1-i,u-1-i,t);)s=c-1-i,r=u-1-i,d=new g(e.left[s],e.right[r]),e.push(d,r),i++;var h=void 0;if(n+i!==c)if(n+i!==u){delete t.hashCache1,delete t.hashCache2;var p=a.slice(n,c-i),f=l.slice(n,u-i),m=O.get(p,f,R,t),_=[];for(h=h||{_t:"a"},o=n;o<c-i;o++)M(m.indices1,o-n)<0&&(h["_"+o]=[a[o],0,0],_.push(o));var v=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(v=!1);var y=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(y=!0);var b=_.length;for(o=n;o<u-i;o++){var x=M(m.indices2,o-n);if(x<0){var w=!1;if(v&&b>0)for(var k=0;k<b;k++)if(R(p,f,(s=_[k])-n,o-n,t)){h["_"+s].splice(1,2,o,P),y||(h["_"+s][0]=""),r=o,d=new g(e.left[s],e.right[r]),e.push(d,r),_.splice(k,1),w=!0;break}w||(h[o]=[l[o]])}else s=m.indices1[x]+n,r=m.indices2[x]+n,d=new g(e.left[s],e.right[r]),e.push(d,r)}e.setResult(h).exit()}else{for(h=h||{_t:"a"},o=n;o<c-i;o++)h["_"+o]=[a[o],0,0];e.setResult(h).exit()}else{if(c===u)return void e.setResult(void 0).exit();for(h=h||{_t:"a"},o=n;o<u-i;o++)h[o]=[l[o]];e.setResult(h).exit()}}};L.filterName="arrays";var z={numerically:function(e,t){return e-t},numericallyBy:function(e){return function(t,n){return t[e]-n[e]}}},F=function(e){if(e.nested&&"a"===e.delta._t){var t=void 0,n=void 0,i=e.delta,o=e.left,s=[],r=[],a=[];for(t in i)if("_t"!==t)if("_"===t[0]){if(0!==i[t][2]&&i[t][2]!==P)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+i[t][2]);s.push(parseInt(t.slice(1),10))}else 1===i[t].length?r.push({index:parseInt(t,10),value:i[t][0]}):a.push({index:parseInt(t,10),delta:i[t]});for(t=(s=s.sort(z.numerically)).length-1;t>=0;t--){var l=i["_"+(n=s[t])],c=o.splice(n,1)[0];l[2]===P&&r.push({index:l[1],value:c})}var u=(r=r.sort(z.numericallyBy("index"))).length;for(t=0;t<u;t++){var d=r[t];o.splice(d.index,0,d.value)}var h=a.length,p=void 0;if(h>0)for(t=0;t<h;t++){var f=a[t];p=new _(e.left[f.index],f.delta),e.push(p,f.index)}e.children?e.exit():e.setResult(e.left).exit()}};F.filterName="arrays";var H=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],e.left[n.childName]=n.result;e.setResult(e.left).exit()}};H.filterName="arraysCollectChildren";var B=function(e){if(e.nested){if("a"===e.delta._t){var t=void 0,n=void 0;for(t in e.delta)"_t"!==t&&(n=new v(e.delta[t]),e.push(n,t));e.exit()}}else e.delta[2]===P&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),P]).exit())};B.filterName="arrays";var W=function(e,t,n){if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if(j(n)&&0===n[2])return"_"+t;var i=+t;for(var o in e){var s=e[o];if(j(s))if(s[2]===P){var r=parseInt(o.substr(1),10),a=s[1];if(a===+t)return r;r<=i&&a>i?i++:r>=i&&a<i&&i--}else 0===s[2]?parseInt(o.substr(1),10)<=i&&i++:1===s.length&&o<=i&&i--}return i};function q(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i={_t:"a"},o=0;o<t;o++){var s=(n=e.children[o]).newName;void 0===s&&(s=W(e.delta,n.childName,n.result)),i[s]!==n.result&&(i[s]=n.result)}e.setResult(i).exit()}}q.filterName="arraysCollectChildren";var V=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};function U(e,t){return e(t={exports:{}},t.exports),t.exports}V.filterName="dates";var G=U((function(e){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1,i=1,o=0;t.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var s=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[o,e]]:[];void 0===n&&(n=!0);var r=n,a=this.diff_commonPrefix(e,t),l=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var u=this.diff_compute_(e,t,r,s);return l&&u.unshift([o,l]),c&&u.push([o,c]),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,t,s,r){var a;if(!e)return[[i,t]];if(!t)return[[n,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return a=[[i,l.substring(0,u)],[o,c],[i,l.substring(u+c.length)]],e.length>t.length&&(a[0][0]=a[2][0]=n),a;if(1==c.length)return[[n,e],[i,t]];var d=this.diff_halfMatch_(e,t);if(d){var h=d[0],p=d[1],f=d[2],m=d[3],g=d[4],_=this.diff_main(h,f,s,r),v=this.diff_main(p,m,s,r);return _.concat([[o,g]],v)}return s&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},t.prototype.diff_lineMode_=function(e,t,s){e=(p=this.diff_linesToChars_(e,t)).chars1,t=p.chars2;var r=p.lineArray,a=this.diff_main(e,t,!1,s);this.diff_charsToLines_(a,r),this.diff_cleanupSemantic(a),a.push([o,""]);for(var l=0,c=0,u=0,d="",h="";l<a.length;){switch(a[l][0]){case i:u++,h+=a[l][1];break;case n:c++,d+=a[l][1];break;case o:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p,f=(p=this.diff_main(d,h,!1,s)).length-1;f>=0;f--)a.splice(l,0,p[f]);l+=p.length}u=0,c=0,d="",h=""}l++}return a.pop(),a},t.prototype.diff_bisect_=function(e,t,o){for(var s=e.length,r=t.length,a=Math.ceil((s+r)/2),l=a,c=2*a,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var p=s-r,f=p%2!=0,m=0,g=0,_=0,v=0,y=0;y<a&&!((new Date).getTime()>o);y++){for(var b=-y+m;b<=y-g;b+=2){for(var x=l+b,w=(E=b==-y||b!=y&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-b;E<s&&w<r&&e.charAt(E)==t.charAt(w);)E++,w++;if(u[x]=E,E>s)g+=2;else if(w>r)m+=2;else if(f&&($=l+p-b)>=0&&$<c&&-1!=d[$]&&E>=(C=s-d[$]))return this.diff_bisectSplit_(e,t,E,w,o)}for(var k=-y+_;k<=y-v;k+=2){for(var C,$=l+k,S=(C=k==-y||k!=y&&d[$-1]<d[$+1]?d[$+1]:d[$-1]+1)-k;C<s&&S<r&&e.charAt(s-C-1)==t.charAt(r-S-1);)C++,S++;if(d[$]=C,C>s)v+=2;else if(S>r)_+=2;else if(!f){var E;if((x=l+p-k)>=0&&x<c&&-1!=u[x])if(w=l+(E=u[x])-x,E>=(C=s-C))return this.diff_bisectSplit_(e,t,E,w,o)}}}return[[n,e],[i,t]]},t.prototype.diff_bisectSplit_=function(e,t,n,i,o){var s=e.substring(0,n),r=t.substring(0,i),a=e.substring(n),l=t.substring(i),c=this.diff_main(s,r,!1,o),u=this.diff_main(a,l,!1,o);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function o(e){for(var t="",o=0,s=-1,r=n.length;s<e.length-1;){-1==(s=e.indexOf("\n",o))&&(s=e.length-1);var a=e.substring(o,s+1);o=s+1,(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?t+=String.fromCharCode(i[a]):(t+=String.fromCharCode(r),i[a]=r,n[r++]=a)}return t}return n[0]="",{chars1:o(e),chars2:o(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],o=[],s=0;s<i.length;s++)o[s]=t[i.charCodeAt(s)];e[n][1]=o.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,s=0;n<o;)e.substring(s,o)==t.substring(s,o)?s=n=o:i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,s=0;n<o;)e.substring(e.length-o,e.length-s)==t.substring(t.length-o,t.length-s)?s=n=o:i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var o=Math.min(n,i);if(e==t)return o;for(var s=0,r=1;;){var a=e.substring(o-r),l=t.indexOf(a);if(-1==l)return s;r+=l,0!=l&&e.substring(o-r)!=t.substring(0,r)||(s=r,r++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var o=this;function s(e,t,n){for(var i,s,r,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=o.diff_commonPrefix(e.substring(n),t.substring(c)),h=o.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),i=e.substring(0,n-h),s=e.substring(n+d),r=t.substring(0,c-h),a=t.substring(c+d))}return 2*u.length>=e.length?[i,s,r,a,u]:null}var r,a,l,c,u,d=s(n,i,Math.ceil(n.length/4)),h=s(n,i,Math.ceil(n.length/2));return d||h?(r=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(a=r[0],l=r[1],c=r[2],u=r[3]):(c=r[0],u=r[1],a=r[2],l=r[3]),[a,l,c,u,r[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var t=!1,s=[],r=0,a=null,l=0,c=0,u=0,d=0,h=0;l<e.length;)e[l][0]==o?(s[r++]=l,c=d,u=h,d=0,h=0,a=e[l][1]):(e[l][0]==i?d+=e[l][1].length:h+=e[l][1].length,a&&a.length<=Math.max(c,u)&&a.length<=Math.max(d,h)&&(e.splice(s[r-1],0,[n,a]),e[s[r-1]+1][0]=i,r--,l=--r>0?s[r-1]:-1,c=0,u=0,d=0,h=0,a=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==n&&e[l][0]==i){var p=e[l-1][1],f=e[l][1],m=this.diff_commonOverlap_(p,f),g=this.diff_commonOverlap_(f,p);m>=g?(m>=p.length/2||m>=f.length/2)&&(e.splice(l,0,[o,f.substring(0,m)]),e[l-1][1]=p.substring(0,p.length-m),e[l+1][1]=f.substring(m),l++):(g>=p.length/2||g>=f.length/2)&&(e.splice(l,0,[o,p.substring(0,g)]),e[l-1][0]=i,e[l-1][1]=f.substring(0,f.length-g),e[l+1][0]=n,e[l+1][1]=p.substring(g),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),o=n.charAt(0),s=i.match(t.nonAlphaNumericRegex_),r=o.match(t.nonAlphaNumericRegex_),a=s&&i.match(t.whitespaceRegex_),l=r&&o.match(t.whitespaceRegex_),c=a&&i.match(t.linebreakRegex_),u=l&&o.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&n.match(t.blanklineStartRegex_);return d||h?5:c||u?4:s&&!a&&l?3:a||l?2:s||r?1:0}for(var i=1;i<e.length-1;){if(e[i-1][0]==o&&e[i+1][0]==o){var s=e[i-1][1],r=e[i][1],a=e[i+1][1],l=this.diff_commonSuffix(s,r);if(l){var c=r.substring(r.length-l);s=s.substring(0,s.length-l),r=c+r.substring(0,r.length-l),a=c+a}for(var u=s,d=r,h=a,p=n(s,r)+n(r,a);r.charAt(0)===a.charAt(0);){s+=r.charAt(0),r=r.substring(1)+a.charAt(0),a=a.substring(1);var f=n(s,r)+n(r,a);f>=p&&(p=f,u=s,d=r,h=a)}e[i-1][1]!=u&&(u?e[i-1][1]=u:(e.splice(i-1,1),i--),e[i][1]=d,h?e[i+1][1]=h:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,s=[],r=0,a=null,l=0,c=!1,u=!1,d=!1,h=!1;l<e.length;)e[l][0]==o?(e[l][1].length<this.Diff_EditCost&&(d||h)?(s[r++]=l,c=d,u=h,a=e[l][1]):(r=0,a=null),d=h=!1):(e[l][0]==n?h=!0:d=!0,a&&(c&&u&&d&&h||a.length<this.Diff_EditCost/2&&c+u+d+h==3)&&(e.splice(s[r-1],0,[n,a]),e[s[r-1]+1][0]=i,r--,a=null,c&&u?(d=h=!0,r=0):(l=--r>0?s[r-1]:-1,d=h=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([o,""]);for(var t,s=0,r=0,a=0,l="",c="";s<e.length;)switch(e[s][0]){case i:a++,c+=e[s][1],s++;break;case n:r++,l+=e[s][1],s++;break;case o:r+a>1?(0!==r&&0!==a&&(0!==(t=this.diff_commonPrefix(c,l))&&(s-r-a>0&&e[s-r-a-1][0]==o?e[s-r-a-1][1]+=c.substring(0,t):(e.splice(0,0,[o,c.substring(0,t)]),s++),c=c.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(c,l))&&(e[s][1]=c.substring(c.length-t)+e[s][1],c=c.substring(0,c.length-t),l=l.substring(0,l.length-t))),0===r?e.splice(s-a,r+a,[i,c]):0===a?e.splice(s-r,r+a,[n,l]):e.splice(s-r-a,r+a,[n,l],[i,c]),s=s-r-a+(r?1:0)+(a?1:0)+1):0!==s&&e[s-1][0]==o?(e[s-1][1]+=e[s][1],e.splice(s,1)):s++,a=0,r=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(s=1;s<e.length-1;)e[s-1][0]==o&&e[s+1][0]==o&&(e[s][1].substring(e[s][1].length-e[s-1][1].length)==e[s-1][1]?(e[s][1]=e[s-1][1]+e[s][1].substring(0,e[s][1].length-e[s-1][1].length),e[s+1][1]=e[s-1][1]+e[s+1][1],e.splice(s-1,1),u=!0):e[s][1].substring(0,e[s+1][1].length)==e[s+1][1]&&(e[s-1][1]+=e[s+1][1],e[s][1]=e[s][1].substring(e[s+1][1].length)+e[s+1][1],e.splice(s+1,1),u=!0)),s++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var o,s=0,r=0,a=0,l=0;for(o=0;o<e.length&&(e[o][0]!==i&&(s+=e[o][1].length),e[o][0]!==n&&(r+=e[o][1].length),!(s>t));o++)a=s,l=r;return e.length!=o&&e[o][0]===n?l:l+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],s=/&/g,r=/</g,a=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1].replace(s,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(u){case i:t[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case n:t[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case o:t[c]="<span>"+d+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==i&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,s=0,r=0,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1];switch(l){case i:s+=c.length;break;case n:r+=c.length;break;case o:t+=Math.max(s,r),s=0,r=0}}return t+=Math.max(s,r)},t.prototype.diff_toDelta=function(e){for(var t=[],s=0;s<e.length;s++)switch(e[s][0]){case i:t[s]="+"+encodeURI(e[s][1]);break;case n:t[s]="-"+e[s][1].length;break;case o:t[s]="="+e[s][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,t){for(var s=[],r=0,a=0,l=t.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{s[r++]=[i,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var h=e.substring(a,a+=d);"="==l[c].charAt(0)?s[r++]=[o,h]:s[r++]=[n,h];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return s},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),o=this;function s(e,i){var s=e/t.length,r=Math.abs(n-i);return o.Match_Distance?s+r/o.Match_Distance:r?1:s}var r=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(r=Math.min(s(0,a),r),-1!=(a=e.lastIndexOf(t,n+t.length))&&(r=Math.min(s(0,a),r)));var l,c,u=1<<t.length-1;a=-1;for(var d,h=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=h;l<c;)s(p,n+c)<=r?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var f=Math.max(1,n-c+1),m=Math.min(n+c,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var _=m;_>=f;_--){var v=i[e.charAt(_-1)];if(g[_]=0===p?(g[_+1]<<1|1)&v:(g[_+1]<<1|1)&v|(d[_+1]|d[_])<<1|1|d[_+1],g[_]&u){var y=s(p,_-1);if(y<=r){if(r=y,!((a=_-1)>n))break;f=Math.max(1,2*n-a)}}}if(s(p+1,n)>r)break;d=g}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var s=t.substring(e.start2-i,e.start2);s&&e.diffs.unshift([o,s]);var r=t.substring(e.start2+e.length1,e.start2+e.length1+i);r&&e.diffs.push([o,r]),e.start1-=s.length,e.start2-=s.length,e.length1+=s.length+r.length,e.length2+=s.length+r.length}},t.prototype.patch_make=function(e,s,r){var a,l;if("string"==typeof e&&"string"==typeof s&&void 0===r)a=e,(l=this.diff_main(a,s,!0)).length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(e&&"object"==typeof e&&void 0===s&&void 0===r)l=e,a=this.diff_text1(l);else if("string"==typeof e&&s&&"object"==typeof s&&void 0===r)a=e,l=s;else{if("string"!=typeof e||"string"!=typeof s||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");a=e,l=r}if(0===l.length)return[];for(var c=[],u=new t.patch_obj,d=0,h=0,p=0,f=a,m=a,g=0;g<l.length;g++){var _=l[g][0],v=l[g][1];switch(d||_===o||(u.start1=h,u.start2=p),_){case i:u.diffs[d++]=l[g],u.length2+=v.length,m=m.substring(0,p)+v+m.substring(p);break;case n:u.length1+=v.length,u.diffs[d++]=l[g],m=m.substring(0,p)+m.substring(p+v.length);break;case o:v.length<=2*this.Patch_Margin&&d&&l.length!=g+1?(u.diffs[d++]=l[g],u.length1+=v.length,u.length2+=v.length):v.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,f),c.push(u),u=new t.patch_obj,d=0,f=m,h=p)}_!==i&&(h+=v.length),_!==n&&(p+=v.length)}return d&&(this.patch_addContext_(u,f),c.push(u)),c},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var o=e[i],s=new t.patch_obj;s.diffs=[];for(var r=0;r<o.diffs.length;r++)s.diffs[r]=o.diffs[r].slice();s.start1=o.start1,s.start2=o.start2,s.length1=o.length1,s.length2=o.length2,n[i]=s}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var s=this.patch_addPadding(e);t=s+t+s,this.patch_splitMax(e);for(var r=0,a=[],l=0;l<e.length;l++){var c,u,d=e[l].start2+r,h=this.diff_text1(e[l].diffs),p=-1;if(h.length>this.Match_MaxBits?-1!=(c=this.match_main(t,h.substring(0,this.Match_MaxBits),d))&&(-1==(p=this.match_main(t,h.substring(h.length-this.Match_MaxBits),d+h.length-this.Match_MaxBits))||c>=p)&&(c=-1):c=this.match_main(t,h,d),-1==c)a[l]=!1,r-=e[l].length2-e[l].length1;else if(a[l]=!0,r=c-d,h==(u=-1==p?t.substring(c,c+h.length):t.substring(c,p+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[l].diffs)+t.substring(c+h.length);else{var f=this.diff_main(h,u,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(f)/h.length>this.Patch_DeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(f);for(var m,g=0,_=0;_<e[l].diffs.length;_++){var v=e[l].diffs[_];v[0]!==o&&(m=this.diff_xIndex(f,g)),v[0]===i?t=t.substring(0,c+m)+v[1]+t.substring(c+m):v[0]===n&&(t=t.substring(0,c+m)+t.substring(c+this.diff_xIndex(f,g+v[1].length))),v[0]!==n&&(g+=v[1].length)}}}}return[t=t.substring(s.length,t.length-s.length),a]},t.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var s=e[0],r=s.diffs;if(0==r.length||r[0][0]!=o)r.unshift([o,n]),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>r[0][1].length){var a=t-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],s.start1-=a,s.start2-=a,s.length1+=a,s.length2+=a}return 0==(r=(s=e[e.length-1]).diffs).length||r[r.length-1][0]!=o?(r.push([o,n]),s.length1+=t,s.length2+=t):t>r[r.length-1][1].length&&(a=t-r[r.length-1][1].length,r[r.length-1][1]+=n.substring(0,a),s.length1+=a,s.length2+=a),n},t.prototype.patch_splitMax=function(e){for(var s=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=s)){var a=e[r];e.splice(r--,1);for(var l=a.start1,c=a.start2,u="";0!==a.diffs.length;){var d=new t.patch_obj,h=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([o,u]));0!==a.diffs.length&&d.length1<s-this.Patch_Margin;){var p=a.diffs[0][0],f=a.diffs[0][1];p===i?(d.length2+=f.length,c+=f.length,d.diffs.push(a.diffs.shift()),h=!1):p===n&&1==d.diffs.length&&d.diffs[0][0]==o&&f.length>2*s?(d.length1+=f.length,l+=f.length,h=!1,d.diffs.push([p,f]),a.diffs.shift()):(f=f.substring(0,s-d.length1-this.Patch_Margin),d.length1+=f.length,l+=f.length,p===o?(d.length2+=f.length,c+=f.length):h=!1,d.diffs.push([p,f]),f==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(f.length))}u=(u=this.diff_text2(d.diffs)).substring(u.length-this.Patch_Margin);var m=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==m&&(d.length1+=m.length,d.length2+=m.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===o?d.diffs[d.diffs.length-1][1]+=m:d.diffs.push([o,m])),h||e.splice(++r,0,d)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var s=[];if(!e)return s;for(var r=e.split("\n"),a=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<r.length;){var c=r[a].match(l);if(!c)throw new Error("Invalid patch string: "+r[a]);var u=new t.patch_obj;for(s.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),a++;a<r.length;){var d=r[a].charAt(0);try{var h=decodeURI(r[a].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+h)}if("-"==d)u.diffs.push([n,h]);else if("+"==d)u.diffs.push([i,h]);else if(" "==d)u.diffs.push([o,h]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+h)}a++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case i:e="+";break;case n:e="-";break;case o:e=" "}t[s+1]=e+encodeURI(this.diffs[s][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=o})),K=2,J=60,X=null,Y=function(e){if(!X){var t=void 0;if("undefined"!=typeof diff_match_patch)t="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(G)try{t=G&&new G}catch(e){t=null}if(!t){if(!e)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}X={diff:function(e,n){return t.patch_toText(t.patch_make(e,n))},patch:function(e,n){for(var i=t.patch_apply(t.patch_fromText(n),e),o=0;o<i[1].length;o++)i[1][o]||(new Error("text patch failed").textPatchFailed=!0);return i[0]}}}return X},Q=function(e){if("string"===e.leftType){var t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||J;if(e.left.length<t||e.right.length<t)e.setResult([e.left,e.right]).exit();else{var n=Y();if(n){var i=n.diff;e.setResult([i(e.left,e.right),0,K]).exit()}else e.setResult([e.left,e.right]).exit()}}};Q.filterName="texts";var Z=function(e){if(!e.nested&&e.delta[2]===K){var t=Y(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()}};Z.filterName="texts";var ee=function(e){var t=void 0,n=void 0,i=void 0,o=void 0,s=void 0,r=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(t=0,n=(i=e.split("\n")).length;t<n;t++){var l=(o=i[t]).slice(0,1);"@"===l?(r=a.exec(o),i[t]="@@ -"+r[3]+","+r[4]+" +"+r[1]+","+r[2]+" @@"):"+"===l?(i[t]="-"+i[t].slice(1),"+"===i[t-1].slice(0,1)&&(s=i[t],i[t]=i[t-1],i[t-1]=s)):"-"===l&&(i[t]="+"+i[t].slice(1))}return i.join("\n")},te=function(e){e.nested||e.delta[2]===K&&e.setResult([ee(e.delta[0]),0,K]).exit()};te.filterName="texts";var ne=function(){function e(t){i(this,e),this.processor=new u(t),this.processor.pipe(new d("diff").append(k,b,V,Q,C,L).shouldHaveResult()),this.processor.pipe(new d("patch").append(S,H,x,Z,$,F).shouldHaveResult()),this.processor.pipe(new d("reverse").append(T,q,w,te,E,B).shouldHaveResult())}return o(e,[{key:"options",value:function(){var e;return(e=this.processor).options.apply(e,arguments)}},{key:"diff",value:function(e,t){return this.processor.process(new g(e,t))}},{key:"patch",value:function(e,t){return this.processor.process(new _(e,t))}},{key:"reverse",value:function(e){return this.processor.process(new v(e))}},{key:"unpatch",value:function(e,t){return this.patch(e,this.reverse(t))}},{key:"clone",value:function(e){return m(e)}}]),e}(),ie="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},oe="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},se=function(e){return"_"===e.substr(0,1)?e.slice(1):e},re=function(e){return"_t"===e?-1:"_"===e.substr(0,1)?parseInt(e.slice(1),10):parseInt(e,10)+.1},ae=function(e,t){return re(e)-re(t)},le=function(){function e(){i(this,e)}return o(e,[{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),this.finalize(n)}},{key:"prepareContext",value:function(e){e.buffer=[],e.out=function(){var e;(e=this.buffer).push.apply(e,arguments)}}},{key:"typeFormattterNotFound",value:function(e,t){throw new Error("cannot format delta type: "+t)}},{key:"typeFormattterErrorFormatter",value:function(e,t){return t.toString()}},{key:"finalize",value:function(e){var t=e.buffer;if(ie(t))return t.join("")}},{key:"recurse",value:function(e,t,n,i,o,s,r){var a=t&&s?s.value:n;if(void 0!==t||void 0!==i){var l=this.getDeltaType(t,s),c="node"===l?"a"===t._t?"array":"object":"";void 0!==i?this.nodeBegin(e,i,o,l,c,r):this.rootBegin(e,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(e,l)).call(this,e,t,a,i,o,s)}catch(n){this.typeFormattterErrorFormatter(e,n,t,a,i,o,s),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==i?this.nodeEnd(e,i,o,l,c,r):this.rootEnd(e,l,c)}}},{key:"formatDeltaChildren",value:function(e,t,n){var i=this;this.forEachDeltaKey(t,n,(function(o,s,r,a){i.recurse(e,t[o],n?n[s]:void 0,o,s,r,a)}))}},{key:"forEachDeltaKey",value:function(e,t,n){var i=oe(e),o="a"===e._t,s={},r=void 0;if(void 0!==t)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(void 0!==e[r]||o&&void 0!==e["_"+r]||i.push(r));for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=e[r];ie(a)&&3===a[2]&&(s[a[1].toString()]={key:r,value:t&&t[parseInt(r.substr(1))]},!1!==this.includeMoveDestinations&&void 0===t&&void 0===e[a[1]]&&i.push(a[1].toString()))}o?i.sort(ae):i.sort();for(var l=0,c=i.length;l<c;l++){var u=i[l];if(!o||"_t"!==u){var d=o?"number"==typeof u?u:parseInt(se(u),10):u,h=l===c-1;n(u,d,s[d],h)}}}},{key:"getDeltaType",value:function(e,t){if(void 0===e)return void 0!==t?"movedestination":"unchanged";if(ie(e)){if(1===e.length)return"added";if(2===e.length)return"modified";if(3===e.length&&0===e[2])return"deleted";if(3===e.length&&2===e[2])return"textdiff";if(3===e.length&&3===e[2])return"moved"}else if("object"===(void 0===e?"undefined":n(e)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(e){for(var t=[],n=e.split("\n@@ "),i=0,o=n.length;i<o;i++){var s=n[i],r={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(s).slice(1);r.location={line:a[0],chr:a[1]};for(var l=s.split("\n").slice(1),c=0,u=l.length;c<u;c++){var d=l[c];if(d.length){var h={type:"context"};"+"===d.substr(0,1)?h.type="added":"-"===d.substr(0,1)&&(h.type="deleted"),h.text=d.slice(1),r.pieces.push(h)}}t.push(r)}return t}}]),e}(),ce=Object.freeze({default:le}),ue=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),o(t,[{key:"typeFormattterErrorFormatter",value:function(e,t){e.out('<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatValue",value:function(e,t){e.out("<pre>"+de(JSON.stringify(t,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,o=n.length;i<o;i++){var s=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+s.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+s.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var r=s.pieces,a=0,l=r.length;a<l;a++){var c=r[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+de(decodeURI(c.text))+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){var i="jsondiffpatch-"+t+(n?" jsondiffpatch-child-node-type-"+n:"");e.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(e){e.out("</div>"+(e.hasArrows?'<script type="text/javascript">setTimeout('+he.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(e,t,n,i,o){var s="jsondiffpatch-"+i+(o?" jsondiffpatch-child-node-type-"+o:"");e.out('<li class="'+s+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(e){e.out("</li>")}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_node",value:function(e,t,n){var i="a"===t._t?"array":"object";e.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(e,t,n),e.out("</ul>")}},{key:"format_added",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_modified",value:function(e,t){e.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(e,t[1]),e.out("</div>")}},{key:"format_deleted",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_moved",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-moved-destination">'+t[1]+"</div>"),e.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),e.hasArrows=!0}},{key:"format_textdiff",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(e,t[0]),e.out("</div>")}}]),t}(le);function de(e){for(var t=e,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],i=0;i<n.length;i++)t=t.replace(n[i][0],n[i][1]);return t}var he=function(e){var t=e||document,n=function(e){var t=e.textContent,n=e.innerText;return t||n},i=function(e,t){for(var n=e.children,i=0,o=n.length;i<o;i++)t(n[i],i)};!function(e,t,n){for(var i=e.querySelectorAll(t),o=0,s=i.length;o<s;o++)n(i[o])}(t,".jsondiffpatch-arrow",(function(e){var t=e.parentNode,o=e.children,s=e.style,r=t,a=o[0],l=a.children[1];a.style.display="none";var c=n(r.querySelector(".jsondiffpatch-moved-destination")),u=r.parentNode,d=void 0;if(i(u,(function(e){e.getAttribute("data-key")===c&&(d=e)})),d)try{var h=d.offsetTop-r.offsetTop;a.setAttribute("height",Math.abs(h)+6),s.top=-8+(h>0?0:h)+"px";var p=h>0?"M30,0 Q-10,"+Math.round(h/2)+" 26,"+(h-4):"M30,"+-h+" Q-10,"+Math.round(-h/2)+" 26,4";l.setAttribute("d",p),a.style.display=""}catch(e){}}))},pe=function(e,t,n){var i=t||document.body,o="jsondiffpatch-unchanged-",s={showing:o+"showing",hiding:o+"hiding",visible:o+"visible",hidden:o+"hidden"},r=i.classList;if(r){if(!n)return r.remove(s.showing),r.remove(s.hiding),r.remove(s.visible),r.remove(s.hidden),void(!1===e&&r.add(s.hidden));!1===e?(r.remove(s.showing),r.add(s.visible),setTimeout((function(){r.add(s.hiding)}),10)):(r.remove(s.hiding),r.add(s.showing),r.remove(s.hidden));var a=setInterval((function(){he(i)}),100);setTimeout((function(){r.remove(s.showing),r.remove(s.hiding),!1===e?(r.add(s.hidden),r.remove(s.visible)):(r.add(s.visible),r.remove(s.hidden)),setTimeout((function(){r.remove(s.visible),clearInterval(a)}),n+400)}),n)}},fe=function(e,t){return pe(!1,e,t)},me=void 0;function ge(e,t){return me||(me=new ue),me.format(e,t)}var _e=Object.freeze({showUnchanged:pe,hideUnchanged:fe,default:ue,format:ge}),ve=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return r(t,e),o(t,[{key:"prepareContext",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},e.row=function(t,n){e.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),e.out(e.indentPad),e.out('</pre><pre style="display: inline-block">'),e.out(t),e.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),e.out(n),e.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.row("",'<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,o=n.length;i<o;i++){var s=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+s.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+s.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var r=s.pieces,a=0,l=r.length;a<l;a++){var c=r[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){e.out('<table class="jsondiffpatch-annotated-delta">'),"node"===t&&(e.row("{"),e.indent()),"array"===n&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(e,t){"node"===t&&(e.indent(-1),e.row("}")),e.out("</table>")}},{key:"nodeBegin",value:function(e,t,n,i,o){e.row("&quot;"+t+"&quot;: {"),"node"===i&&e.indent(),"array"===o&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(e,t,n,i,o,s){"node"===i&&e.indent(-1),e.row("}"+(s?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}}]),t}(le),ye=function(e){return'<pre style="display:inline-block">&quot;'+e+"&quot;</pre>"},be={added:function(e,t,n,i){var o=" <pre>([newValue])</pre>";return void 0===i?"new value"+o:"number"==typeof i?"insert at index "+i+o:"add property "+ye(i)+o},modified:function(e,t,n,i){var o=" <pre>([previousValue, newValue])</pre>";return void 0===i?"modify value"+o:"number"==typeof i?"modify at index "+i+o:"modify property "+ye(i)+o},deleted:function(e,t,n,i){var o=" <pre>([previousValue, 0, 0])</pre>";return void 0===i?"delete value"+o:"number"==typeof i?"remove index "+i+o:"delete property "+ye(i)+o},moved:function(e,t,n,i){return'move from <span title="(position to remove at original state)">index '+i+'</span> to <span title="(position to insert at final state)">index '+e[1]+"</span>"},textdiff:function(e,t,n,i){return"text diff"+(void 0===i?"":"number"==typeof i?" at index "+i:" at property "+ye(i))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},xe=function(e,t){var n=this.getDeltaType(t),i=be[n],o=i&&i.apply(i,Array.prototype.slice.call(arguments,1)),s=JSON.stringify(t,null,2);"textdiff"===n&&(s=s.split("\\n").join('\\n"+\n   "')),e.indent(),e.row(s,o),e.indent(-1)};ve.prototype.format_added=xe,ve.prototype.format_modified=xe,ve.prototype.format_deleted=xe,ve.prototype.format_moved=xe,ve.prototype.format_textdiff=xe;var we=void 0;function ke(e,t){return we||(we=new ve),we.format(e,t)}var Ce=Object.freeze({default:ve,format:ke}),$e={add:"add",remove:"remove",replace:"replace",move:"move"},Se=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!0,e}return r(t,e),o(t,[{key:"prepareContext",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.result=[],e.path=[],e.pushCurrentOp=function(e){var t=e.op,n=e.value,i={op:t,path:this.currentPath()};void 0!==n&&(i.value=n),this.result.push(i)},e.pushMoveOp=function(e){var t=this.currentPath();this.result.push({op:$e.move,from:t,path:this.toPath(e)})},e.currentPath=function(){return"/"+this.path.join("/")},e.toPath=function(e){var t=this.path.slice();return t[t.length-1]=e,"/"+t.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.out("[ERROR] "+t)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(e,t,n){e.path.push(n)}},{key:"nodeEnd",value:function(e){e.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){e.pushCurrentOp({op:$e.add,value:t[0]})}},{key:"format_modified",value:function(e,t){e.pushCurrentOp({op:$e.replace,value:t[1]})}},{key:"format_deleted",value:function(e){e.pushCurrentOp({op:$e.remove})}},{key:"format_moved",value:function(e,t){var n=t[1];e.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),n.result}}]),t}(le),Ee=function(e){return e[e.length-1]},Te=function(e,t){return e.sort(t),e},De=function(e,t){var n=parseInt(e,10),i=parseInt(t,10);return isNaN(n)||isNaN(i)?0:i-n},Ae=function(e){return Te(e,(function(e,t){var n=e.path.split("/"),i=t.path.split("/");return n.length!==i.length?n.length-i.length:De(Ee(n),Ee(i))}))},Ne=function(e,t){var n=Array(t.length+1).fill().map((function(){return[]}));return e.map((function(e){var n=t.map((function(t){return t(e)})).indexOf(!0);return n<0&&(n=t.length),{item:e,position:n}})).reduce((function(e,t){return e[t.position].push(t.item),e}),n)},Oe=function(e){return"move"===e.op},Pe=function(e){return"remove"===e.op},je=function(e){var t=Ne(e,[Oe,Pe]),n=l(t,3),i=n[0],o=n[1],s=n[2],r=Ae(o);return[].concat(c(r),c(i),c(s))},Me=void 0,Ie=function(e,t){return Me||(Me=new Se),je(Me.format(e,t))},Re=function(e,t){console.log(Ie(e,t))},Le=Object.freeze({default:Se,partitionOps:Ne,format:Ie,log:Re});function ze(e){return t&&t[e]||function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}}var Fe={added:ze("green"),deleted:ze("red"),movedestination:ze("gray"),moved:ze("yellow"),unchanged:ze("gray"),error:ze("white.bgRed"),textDiffLine:ze("gray")},He=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return r(t,e),o(t,[{key:"prepareContext",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},e.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},e.out=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,o=t.length;i<o;i++){var s=t[i].split("\n").join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(s=this.color[0](s)),this.buffer.push(s)}},e.pushColor=function(e){this.color=this.color||[],this.color.unshift(e)},e.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.pushColor(Fe.error),e.out("[ERROR]"+t),e.popColor()}},{key:"formatValue",value:function(e,t){e.out(JSON.stringify(t,null,2))}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.indent();for(var i=0,o=n.length;i<o;i++){var s=n[i];e.pushColor(Fe.textDiffLine),e.out(s.location.line+","+s.location.chr+" "),e.popColor();for(var r=s.pieces,a=0,l=r.length;a<l;a++){var c=r[a];e.pushColor(Fe[c.type]),e.out(c.text),e.popColor()}i<o-1&&e.outLine()}e.indent(-1)}},{key:"rootBegin",value:function(e,t,n){e.pushColor(Fe[t]),"node"===t&&(e.out("array"===n?"[":"{"),e.indent())}},{key:"rootEnd",value:function(e,t,n){"node"===t&&(e.indent(-1),e.out("array"===n?"]":"}")),e.popColor()}},{key:"nodeBegin",value:function(e,t,n,i,o){e.pushColor(Fe[i]),e.out(n+": "),"node"===i&&(e.out("array"===o?"[":"{"),e.indent())}},{key:"nodeEnd",value:function(e,t,n,i,o,s){"node"===i&&(e.indent(-1),e.out("array"===o?"]":"}"+(s?"":","))),s||e.outLine(),e.popColor()}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_modified",value:function(e,t){e.pushColor(Fe.deleted),this.formatValue(e,t[0]),e.popColor(),e.out(" => "),e.pushColor(Fe.added),this.formatValue(e,t[1]),e.popColor()}},{key:"format_deleted",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_moved",value:function(e,t){e.out("==> "+t[1])}},{key:"format_textdiff",value:function(e,t){this.formatTextDiffString(e,t[0])}}]),t}(le),Be=void 0,We=function(e,t){return Be||(Be=new He),Be.format(e,t)};function qe(e,t){console.log(We(e,t))}var Ve=Object.freeze({default:He,format:We,log:qe}),Ue=Object.freeze({base:ce,html:_e,annotated:Ce,jsonpatch:Le,console:Ve});function Ge(e,t){var n=void 0;return"string"==typeof t&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(t))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6],+(n[7]||0))):t}function Ke(e){return new ne(e)}var Je=void 0;function Xe(){return Je||(Je=new ne),Je.diff.apply(Je,arguments)}function Ye(){return Je||(Je=new ne),Je.patch.apply(Je,arguments)}function Qe(){return Je||(Je=new ne),Je.unpatch.apply(Je,arguments)}function Ze(){return Je||(Je=new ne),Je.reverse.apply(Je,arguments)}function et(){return Je||(Je=new ne),Je.clone.apply(Je,arguments)}e.DiffPatcher=ne,e.formatters=Ue,e.console=Ve,e.create=Ke,e.dateReviver=Ge,e.diff=Xe,e.patch=Ye,e.unpatch=Qe,e.reverse=Ze,e.clone=et,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2837))},8686:(e,t,n)=>{var i="[object Symbol]",o=/[&<>"'`]/g,s=RegExp(o.source),r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,a="object"==typeof self&&self&&self.Object===Object&&self,l=r||a||Function("return this")();var c,u=(c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==c?void 0:c[e]}),d=Object.prototype.toString,h=l.Symbol,p=h?h.prototype:void 0,f=p?p.toString:void 0;function m(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==i}(e))return f?f.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":m(t))&&s.test(e)?e.replace(o,u):e}},9462:e=>{e.exports=function(e){var t=[];return e=void 0===e?null:e,n.set=function(n){e=n,t.forEach((function(e){e(n)}))},n;function n(n){return n?(t.push(n),function(){t.splice(t.indexOf(n),1)}):e}}},6470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",o=0,s=-1,r=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(s===a-1||1===r);else if(s!==a-1&&2===r){if(i.length<2||2!==o||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",o=0):o=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),s=a,r=0;continue}}else if(2===i.length||1===i.length){i="",o=0,s=a,r=0;continue}t&&(i.length>0?i+="/..":i="..",o=2)}else i.length>0?i+="/"+e.slice(s+1,a):i=e.slice(s+1,a),o=a-s-1;s=a,r=0}else 46===n&&-1!==r?++r:r=-1}return i}var i={resolve:function(){for(var e,i="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var r;s>=0?r=arguments[s]:(void 0===e&&(e=process.cwd()),r=e),t(r),0!==r.length&&(i=r+"/"+i,o=47===r.charCodeAt(0))}return i=n(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&o&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var o=arguments[n];t(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=i.resolve(e))===(n=i.resolve(n)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var s=e.length,r=s-o,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var l=n.length-a,c=r<l?r:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else r>c&&(47===e.charCodeAt(o+d)?u=d:0===d&&(u=0));break}var h=e.charCodeAt(o+d);if(h!==n.charCodeAt(a+d))break;47===h&&(u=d)}var p="";for(d=o+u+1;d<=s;++d)d!==s&&47!==e.charCodeAt(d)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,o=-1,s=!0,r=e.length-1;r>=1;--r)if(47===(n=e.charCodeAt(r))){if(!s){o=r;break}}else s=!1;return-1===o?i?"/":".":i&&1===o?"//":e.slice(0,o)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var i,o=0,s=-1,r=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!r){o=i+1;break}}else-1===l&&(r=!1,l=i+1),a>=0&&(c===n.charCodeAt(a)?-1==--a&&(s=i):(a=-1,s=l))}return o===s?s=l:-1===s&&(s=e.length),e.slice(o,s)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!r){o=i+1;break}}else-1===s&&(r=!1,s=i+1);return-1===s?"":e.slice(o,s)},extname:function(e){t(e);for(var n=-1,i=0,o=-1,s=!0,r=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===o&&(s=!1,o=a+1),46===l?-1===n?n=a:1!==r&&(r=1):-1!==n&&(r=-1);else if(!s){i=a+1;break}}return-1===n||-1===o||0===r||1===r&&n===o-1&&n===i+1?"":e.slice(n,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+e+i:i}("/",e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var i,o=e.charCodeAt(0),s=47===o;s?(n.root="/",i=1):i=0;for(var r=-1,a=0,l=-1,c=!0,u=e.length-1,d=0;u>=i;--u)if(47!==(o=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===o?-1===r?r=u:1!==d&&(d=1):-1!==r&&(d=-1);else if(!c){a=u+1;break}return-1===r||-1===l||0===d||1===d&&r===l-1&&r===a+1?-1!==l&&(n.base=n.name=0===a&&s?e.slice(1,l):e.slice(a,l)):(0===a&&s?(n.name=e.slice(1,r),n.base=e.slice(1,l)):(n.name=e.slice(a,r),n.base=e.slice(a,l)),n.ext=e.slice(r,l)),a>0?n.dir=e.slice(0,a-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},9623:e=>{e.exports=function(e,t){var n,i,o,s,r=0;return function(){n=this,i=arguments;var e=new Date-r;return s||(e>=t?a():s=setTimeout(a,t-e)),o};function a(){s=0,r=+new Date,o=e.apply(n,i),n=null,i=null}}},540:function(e,t){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,o=1;o<i;++o)t[o]=t[o].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function s(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function r(e,t){var n=e;if(t)for(var i in t)n[i]=t[i];return n}function a(e){var i="[A-Za-z]",o="[0-9]",s=t(o,"[A-Fa-f]"),r=n(n("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+n("%[89A-Fa-f]"+s+"%"+s+s)+"|"+n("%"+s+s)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,o,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),d=n(i+t(i,o,"[\\+\\-\\.]")+"*"),h=n(n(r+"|"+t(u,a,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("[1-9]"+o)+"|"+o),n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("0?[1-9]"+o)+"|0?0?"+o)),f=n(p+"\\."+p+"\\."+p+"\\."+p),m=n(s+"{1,4}"),g=n(n(m+"\\:"+m)+"|"+f),_=n(n(m+"\\:")+"{6}"+g),v=n("\\:\\:"+n(m+"\\:")+"{5}"+g),y=n(n(m)+"?\\:\\:"+n(m+"\\:")+"{4}"+g),b=n(n(n(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+n(m+"\\:")+"{3}"+g),x=n(n(n(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+n(m+"\\:")+"{2}"+g),w=n(n(n(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+g),k=n(n(n(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+g),C=n(n(n(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),$=n(n(n(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),S=n([_,v,y,b,x,w,k,C,$].join("|")),E=n(n(u+"|"+r)+"+"),T=(n(S+"\\%25"+E),n(S+n("\\%25|\\%(?!"+s+"{2})")+E)),D=n("[vV]"+s+"+\\."+t(u,a,"[\\:]")+"+"),A=n("\\["+n(T+"|"+S+"|"+D)+"\\]"),N=n(n(r+"|"+t(u,a))+"*"),O=n(A+"|"+f+"(?!"+N+")|"+N),P=n(o+"*"),j=n(n(h+"@")+"?"+O+n("\\:"+P)+"?"),M=n(r+"|"+t(u,a,"[\\:\\@]")),I=n(M+"*"),R=n(M+"+"),L=n(n(r+"|"+t(u,a,"[\\@]"))+"+"),z=n(n("\\/"+I)+"*"),F=n("\\/"+n(R+z)+"?"),H=n(L+z),B=n(R+z),W="(?!"+M+")",q=(n(z+"|"+F+"|"+H+"|"+B+"|"+W),n(n(M+"|"+t("[\\/\\?]",c))+"*")),V=n(n(M+"|[\\/\\?]")+"*"),U=n(n("\\/\\/"+j+z)+"|"+F+"|"+B+"|"+W),G=n(d+"\\:"+U+n("\\?"+q)+"?"+n("\\#"+V)+"?"),K=n(n("\\/\\/"+j+z)+"|"+F+"|"+H+"|"+W),J=n(K+n("\\?"+q)+"?"+n("\\#"+V)+"?");return n(G+"|"+J),n(d+"\\:"+U+n("\\?"+q)+"?"),n(n("\\/\\/("+n("("+h+")@")+"?("+O+")"+n("\\:("+P+")")+"?)")+"?("+z+"|"+F+"|"+B+"|"+W+")"),n("\\?("+q+")"),n("\\#("+V+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+O+")"+n("\\:("+P+")")+"?)")+"?("+z+"|"+F+"|"+H+"|"+W+")"),n("\\?("+q+")"),n("\\#("+V+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+O+")"+n("\\:("+P+")")+"?)")+"?("+z+"|"+F+"|"+B+"|"+W+")"),n("\\?("+q+")"),n("\\#("+V+")"),n("("+h+")@"),n("\\:("+P+")"),{NOT_SCHEME:new RegExp(t("[^]",i,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(r,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+n(n("\\%25|\\%(?!"+s+"{2})")+"("+E+")")+"?\\]?$")}}var l=a(!1),c=a(!0),u=function(){function e(e,t){var n=[],i=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=2147483647,p=36,f=1,m=26,g=38,_=700,v=72,y=128,b="-",x=/^xn--/,w=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=p-f,S=Math.floor,E=String.fromCharCode;function T(e){throw new RangeError(C[e])}function D(e,t){for(var n=[],i=e.length;i--;)n[i]=t(e[i]);return n}function A(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+D((e=e.replace(k,".")).split("."),t).join(".")}function N(e){for(var t=[],n=0,i=e.length;n<i;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<i){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&o)<<10)+(1023&s)+65536):(t.push(o),n--)}else t.push(o)}return t}var O=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:p},P=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},j=function(e,t,n){var i=0;for(e=n?S(e/_):e>>1,e+=S(e/t);e>$*m>>1;i+=p)e=S(e/$);return S(i+($+1)*e/(e+g))},M=function(e){var t=[],n=e.length,i=0,o=y,s=v,r=e.lastIndexOf(b);r<0&&(r=0);for(var a=0;a<r;++a)e.charCodeAt(a)>=128&&T("not-basic"),t.push(e.charCodeAt(a));for(var l=r>0?r+1:0;l<n;){for(var c=i,u=1,d=p;;d+=p){l>=n&&T("invalid-input");var g=O(e.charCodeAt(l++));(g>=p||g>S((h-i)/u))&&T("overflow"),i+=g*u;var _=d<=s?f:d>=s+m?m:d-s;if(g<_)break;var x=p-_;u>S(h/x)&&T("overflow"),u*=x}var w=t.length+1;s=j(i-c,w,0==c),S(i/w)>h-o&&T("overflow"),o+=S(i/w),i%=w,t.splice(i++,0,o)}return String.fromCodePoint.apply(String,t)},I=function(e){var t=[],n=(e=N(e)).length,i=y,o=0,s=v,r=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;d<128&&t.push(E(d))}}catch(e){a=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw l}}var g=t.length,_=g;for(g&&t.push(b);_<n;){var x=h,w=!0,k=!1,C=void 0;try{for(var $,D=e[Symbol.iterator]();!(w=($=D.next()).done);w=!0){var A=$.value;A>=i&&A<x&&(x=A)}}catch(e){k=!0,C=e}finally{try{!w&&D.return&&D.return()}finally{if(k)throw C}}var O=_+1;x-i>S((h-o)/O)&&T("overflow"),o+=(x-i)*O,i=x;var M=!0,I=!1,R=void 0;try{for(var L,z=e[Symbol.iterator]();!(M=(L=z.next()).done);M=!0){var F=L.value;if(F<i&&++o>h&&T("overflow"),F==i){for(var H=o,B=p;;B+=p){var W=B<=s?f:B>=s+m?m:B-s;if(H<W)break;var q=H-W,V=p-W;t.push(E(P(W+q%V,0))),H=S(q/V)}t.push(E(P(H,0))),s=j(o,O,_==g),o=0,++_}}}catch(e){I=!0,R=e}finally{try{!M&&z.return&&z.return()}finally{if(I)throw R}}++o,++i}return t.join("")},R=function(e){return A(e,(function(e){return x.test(e)?M(e.slice(4).toLowerCase()):e}))},L=function(e){return A(e,(function(e){return w.test(e)?"xn--"+I(e):e}))},z={version:"2.1.0",ucs2:{decode:N,encode:function(e){return String.fromCodePoint.apply(String,d(e))}},decode:M,encode:I,toASCII:L,toUnicode:R},F={};function H(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function B(e){for(var t="",n=0,i=e.length;n<i;){var o=parseInt(e.substr(n+1,2),16);if(o<128)t+=String.fromCharCode(o),n+=3;else if(o>=194&&o<224){if(i-n>=6){var s=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&o)<<6|63&s)}else t+=e.substr(n,6);n+=6}else if(o>=224){if(i-n>=9){var r=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&r)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function W(e,t){function n(e){var n=B(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,H).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,H).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,H).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,H).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,H).replace(t.PCT_ENCODED,o)),e}function q(e){return e.replace(/^0*(.*)/,"$1")||"0"}function V(e,t){var n=e.match(t.IPV4ADDRESS)||[],i=u(n,2)[1];return i?i.split(".").map(q).join("."):e}function U(e,t){var n=e.match(t.IPV6ADDRESS)||[],i=u(n,3),o=i[1],s=i[2];if(o){for(var r=o.toLowerCase().split("::").reverse(),a=u(r,2),l=a[0],c=a[1],d=c?c.split(":").map(q):[],h=l.split(":").map(q),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,g=Array(f),_=0;_<f;++_)g[_]=d[_]||h[m+_]||"";p&&(g[f-1]=V(g[f-1],t));var v=g.reduce((function(e,t,n){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===n?i.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],y=void 0;if(v&&v.length>1){var b=g.slice(0,v.index),x=g.slice(v.index+v.length);y=b.join(":")+"::"+x.join(":")}else y=g.join(":");return s&&(y+="%"+s),y}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,K=void 0==="".match(/(){0}/)[1];function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(G);if(o){K?(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5])):(n.scheme=o[1]||void 0,n.userinfo=-1!==e.indexOf("@")?o[3]:void 0,n.host=-1!==e.indexOf("//")?o[4]:void 0,n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=-1!==e.indexOf("?")?o[7]:void 0,n.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),n.host&&(n.host=U(V(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var s=F[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)W(n,i);else{if(n.host&&(t.domainHost||s&&s.domainHost))try{n.host=z.toASCII(n.host.replace(i.PCT_ENCODED,B).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}W(n,l)}s&&s.parse&&s.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function X(e,t){var n=!1!==t.iri?c:l,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(U(V(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}var Y=/^\.\.?\//,Q=/^\/\.(\/|$)/,Z=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(Y))e=e.replace(Y,"");else if(e.match(Q))e=e.replace(Q,"/");else if(e.match(Z))e=e.replace(Z,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];e=e.slice(i.length),t.push(i)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,i=[],o=F[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?z.toUnicode(e.host):z.toASCII(e.host.replace(n.PCT_ENCODED,B).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}W(e,n),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var s=X(e,t);if(void 0!==s&&("suffix"!==t.reference&&i.push("//"),i.push(s),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var r=e.path;t.absolutePath||o&&o.absolutePath||(r=te(r)),void 0===s&&(r=r.replace(/^\/\//,"/%2F")),i.push(r)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=J(ne(e,n),n),t=J(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=te(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function oe(e,t,n){var i=r({scheme:"null"},n);return ne(ie(J(e,i),J(t,i),i,!0),i)}function se(e,t){return"string"==typeof e?e=ne(J(e,t),t):"object"===i(e)&&(e=J(ne(e,t),t)),e}function re(e,t,n){return"string"==typeof e?e=ne(J(e,n),n):"object"===i(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(J(t,n),n):"object"===i(t)&&(t=ne(t,n)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,H)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,B)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function de(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=de(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(de(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),i=u(n,2),o=i[0],s=i[1];e.path=o&&"/"!==o?o:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},pe={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},fe={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",_e=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ve="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ye=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),be="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xe=new RegExp(me,"g"),we=new RegExp(_e,"g"),ke=new RegExp(t("[^]",ve,"[\\.]",'[\\"]',ye),"g"),Ce=new RegExp(t("[^]",me,be),"g"),$e=Ce;function Se(e){var t=B(e);return t.match(xe)?t:e}var Ee={scheme:"mailto",parse:function(e,t){var n=e,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var o=!1,s={},r=n.query.split("&"),a=0,l=r.length;a<l;++a){var c=r[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,h=u.length;d<h;++d)i.push(u[d]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:o=!0,s[le(c[0],t)]=le(c[1],t)}}o&&(n.headers=s)}n.query=void 0;for(var p=0,f=i.length;p<f;++p){var m=i[p].split("@");if(m[0]=le(m[0]),t.unicodeSupport)m[1]=le(m[1],t).toLowerCase();else try{m[1]=z.toASCII(le(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[p]=m.join("@")}return n},serialize:function(e,t){var n=e,i=s(e.to);if(i){for(var r=0,a=i.length;r<a;++r){var l=String(i[r]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(we,Se).replace(we,o).replace(ke,H),d=l.slice(c+1);try{d=t.iri?z.toUnicode(d):z.toASCII(le(d,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[r]=u+"@"+d}n.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==fe[f]&&p.push(f.replace(we,Se).replace(we,o).replace(Ce,H)+"="+h[f].replace(we,Se).replace(we,o).replace($e,H));return p.length&&(n.query=p.join("&")),n}},Te=/^([^\:]+)\:(.*)/,De={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Te),i=e;if(n){var o=t.scheme||i.scheme||"urn",s=n[1].toLowerCase(),r=n[2],a=o+":"+(t.nid||s),l=F[a];i.nid=s,i.nss=r,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",i=e.nid,o=n+":"+(t.nid||i),s=F[o];s&&(e=s.serialize(e,t));var r=e,a=e.nss;return r.path=(i||t.nid)+":"+a,r}},Ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ne={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(Ae)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};F[ce.scheme]=ce,F[ue.scheme]=ue,F[he.scheme]=he,F[pe.scheme]=pe,F[Ee.scheme]=Ee,F[De.scheme]=De,F[Ne.scheme]=Ne,e.SCHEMES=F,e.pctEncChar=H,e.pctDecChars=B,e.parse=J,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=ie,e.resolve=oe,e.normalize=se,e.equal=re,e.escapeComponent=ae,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(9755),t=n.n(e),i=n(1182),o=n.n(i);n(2466);class s{constructor(e,n,i,s){this._el=o().create(`\n    <div title="${e}">\n      ${n}\n    </div>\n    `),this._$dialog=t()(this._el),this._$dialog.on("dialogclose",(()=>{requestAnimationFrame((()=>this._$dialog.dialog("destroy")))})),i&&(s={...s,buttons:[{text:i,click:()=>this.close()}]}),this._option=s}get el(){return this._el}get button(){return this._$dialog.dialog("widget")[0].querySelector(".ui-dialog-buttonpane button")}open(){this._$dialog.dialog({dialogClass:"textae-editor__dialog",height:"auto",modal:!0,resizable:!1,width:550,...this._option})}close(){this._$dialog.dialog("close")}}class r extends s{constructor(){super("Help (Keyboard short-cuts)",'<div class="textae-tool__key-help"></div>',null,{height:313,width:523})}}const a=new r;class l{constructor(){this.editorList=[],this.selectedEditor=null}push(e){var t;Object.assign(e,{editorId:(t=this.editorList,`editor${t.length}`)}),this.editorList.push(e),e[0].addEventListener("keyup",(e=>function(e,t){e.selected&&"h"===t.key&&e.openHelpDialog()}(this,e)))}get selected(){return this.selectedEditor}set selected(e){!function(e,t){for(const n of e)n!==t&&n.api.unselect();t.api.select()}(this.editorList,e),this.selectedEditor=e}unselect(e){this.selectedEditor===e&&(e.api.unselect(),this.selectedEditor=null)}redraw(){this.editorList.forEach((e=>e.api.redraw()))}findByHTMLelement(e){return this.editorList.filter((t=>t[0]===e))[0]}openHelpDialog(){a.open()}}var c=n(9623),u=n.n(c);const d={attributes:!0,attributeFilter:["class"]};class h{constructor(){this._waitingEditors=new Set}setObserver(e){this._el||(this._el=o().create('<div class="textae-editor-veil" style="display: none;"></div>'),document.body.appendChild(this._el)),new MutationObserver((e=>this._mutationCallback(e))).observe(e[0],d)}_mutationCallback(e){this._collectWaitingEditors(e),this._waitingEditors.size>0?this._show():this._hide()}_collectWaitingEditors(e){e.forEach((({target:e})=>{e.classList.contains("textae-editor--wait")?this._waitingEditors.add(e):this._waitingEditors.delete(e)}))}_show(){this._el.style.display="block"}_hide(){this._el.style.display="none"}}const p=[[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"},{type:"write-auto",title:"Upload Automatically",push:!0}],[{type:"view",title:"View Mode",push:!0},{type:"term",title:"Term Edit Mode",push:!0},{type:"block",title:"Block Edit Mode",push:!0},{type:"relation",title:"Relation Edit Mode",push:!0}],[{type:"simple",title:"Simple View",push:!0},{type:"line-height",title:"Adjust LineHeight"},{type:"line-height-auto",title:"Auto Adjust LineHeight",push:!0}],[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}],[{type:"replicate",title:"Replicate span annotation [R]",enableWhenSelecting:{span:e=>e.span.single&&e.span.single.isDenotation}},{type:"replicate-auto",title:"Auto replicate",push:!0},{type:"boundary-detection",title:"Boundary Detection [B]",push:!0}],[{type:"entity",title:"New entity [E]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation))}},{type:"pallet",title:"Show label list editor [Q]"},{type:"change-label",title:"Change label [W]",enableWhenSelecting:{entity:e=>e.entity.some,relation:e=>e.relation.some}}],[{type:"delete",title:"Delete [D]",enableWhenSelecting:{span:e=>e.span.some,entity:e=>e.entity.some,relation:e=>e.relation.some}},{type:"copy",title:"Copy [C]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation)),entity:e=>e.entity.contains((e=>e.isDenotation))}},{type:"cut",title:"Cut [X]",enableWhenSelecting:{span:e=>e.span.contains((e=>e.isDenotation)),entity:e=>e.entity.contains((e=>e.isDenotation))}},{type:"paste",title:"Paste [V]",enableWhenSelecting:{span:(e,t)=>t.hasCopyingItem&&e.span.some||t.hasCuttingItem&&Boolean(e.span.single)}}],[{type:"setting",title:"Setting"}],[{type:"help",title:"Help [H]"}]];const f=new class{get mapForControl(){return{buttonGroup:p.map((e=>({list:e.map((e=>({type:e.type,title:e.title})))})))}}get _buttons(){return p.flat()}_getEnabelButtonsWhenSelecting(e){return this._buttons.filter((t=>t.enableWhenSelecting&&t.enableWhenSelecting[e])).map((t=>({name:t.type,predicate:t.enableWhenSelecting[e]})))}get spanButtons(){return this._getEnabelButtonsWhenSelecting("span")}get entityButtons(){return this._getEnabelButtonsWhenSelecting("entity")}get relationButtons(){return this._getEnabelButtonsWhenSelecting("relation")}get pushButtons(){return this._buttons.filter((e=>e.push)).map((e=>e.type))}},m=new r;const g={read:!0,write:!0,help:!0};class _{constructor(e,t){const n=o().create(e(f.mapForControl));this._el=n,function(e,t){const n=e=>{if(e.currentTarget.classList.contains("textae-control__icon--disabled"))return;const{buttonType:n}=e.currentTarget.dataset;t.api.handleButtonClick(n)};for(const t of e.querySelectorAll(".textae-control__icon"))"help"===t.dataset.buttonType?t.addEventListener("click",(()=>m.open())):t.addEventListener("click",n)}(this._el,t)}get el(){return this._el}updateAllButtonEnableState(e){!function(e,t){!function(e,t){for(const n of e.querySelectorAll(".textae-control__icon")){const{buttonType:e}=n.dataset;!0===t[e]?n.classList.remove("textae-control__icon--disabled"):n.classList.add("textae-control__icon--disabled")}}(e,{...t,...g})}(this._el,e)}updateButtonPushState(e,t){!function(e,t,n){const i=e.querySelector(`.textae-control__${t}-button`);n?i.classList.add("textae-control__icon--pushed"):i.classList.remove("textae-control__icon--pushed")}(this._el,e,t)}}function v({type:e,title:t}){return`\n<span \nclass="textae-control__icon textae-control__${e}-button" \ntitle="${t}" \ndata-button-type="${e}">\n</span>\n`}function y(e){const{buttonGroup:t}=e;return`\n<div class="textae-control textae-control-bar">\n  <span class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </span>\n  ${t.map((({list:e})=>`\n  <span class="textae-control__separator"></span>\n  ${e.map(v).join("\n")}\n  `)).join("\n")}\n</div>\n`}class b extends _{constructor(e){super(y,e)}transitWriteButtonImage(e){!function(e,t){const n=e.querySelector(".textae-control__write-button");!0===t?n.classList.add("textae-control__write-button--transit"):n.classList.remove("textae-control__write-button--transit")}(super.el,e)}}function x(e){const{buttonGroup:t}=e;return`\n<div class="textae-control textae-context-menu">\n  <p class="textae-control__title">\n    <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n  </p>\n  ${t.map((({list:e})=>`\n  <p class="textae-control__separator"></p>\n  ${e.map((({type:e,title:t})=>`\n  <p \n    class="textae-control__icon textae-control__${e}-button" \n    data-button-type="${e}">${t}\n  </p>`)).join("\n")}\n  `)).join("\n")}\n</div>\n`}class w extends _{constructor(e){super(x,e)}show(e,t){super.el.setAttribute("style",`top: ${e}px; left: ${t}px`),super.el.classList.remove("textae-context-menu--hide"),super.el.classList.add("textae-context-menu--show")}hide(){this._isOpen&&(super.el.classList.remove("textae-context-menu--show"),super.el.classList.add("textae-context-menu--hide"))}get _isOpen(){return super.el.classList.contains("textae-context-menu--show")}}function k(e,t){(e=e.add(".ui-dialog, .ui-widget-overlay"))[`${t}Class`]("textae-editor--wait")}class C{constructor(e){this._editor=e}startWait(){k(this._editor,"add")}endWait(){k(this._editor,"remove")}}function $(e){return window.open(e,"_blank","width=600, height=500")}function S(e,t,n){const i=function(e){const t=e.status,n=e.getResponseHeader("WWW-Authenticate"),i=e.getResponseHeader("Location");return 401===t&&n&&"ServerPage"===n&&i?i:null}(e);if(i){const e=$(i);if(e){const t=setInterval((()=>{e.closed&&(clearInterval(t),n())}),1e3);return}}t()}function E(e,n,i,o,s,r){const a={type:e,url:n,contentType:"application/json",data:i,crossDomain:!0,xhrFields:{withCredentials:!0}},l=()=>{t().ajax(a).done(o).fail(s).always(r)};t().ajax(a).done(o).fail((e=>S(e,s,l))).always(r)}function T(e,t,n,i,o,s){console.assert(e,"url is necessary!"),n(),E("post",e,t,i,o,s)}class D{constructor(e,t,n){this.beforeSend=e,this.failHandler=t,this.finishHandler=n}post(e,t,n){T(e,t,this.beforeSend,n,this.failHandler,this.finishHandler)}patch(e,t,n){!function(e,t,n,i,o,s){console.assert(e,"url is necessary!"),n(),console.log("PATCH data",t),E("patch",e,t,i,(()=>T(e,t,n,i,o,s)),s)}(e,t,this.beforeSend,n,this.failHandler,this.finishHandler)}}function A(e,n,i,o){o.startWait(),function(e,n,i){console.assert(e,"url is necessary!");const o={type:"GET",url:e,cache:!1,xhrFields:{withCredentials:!0},timeout:3e4};t().ajax(o).done(n).fail(i)}(e,(e=>{n(e),o.endWait()}),(()=>{i(),o.endWait()}))}class N{constructor(e,t,n){this._type=e,this._id=t,this._data=n}get type(){return this._type}get id(){return this._id}get data(){return this._data}get displayName(){return function(e,t){switch(e){case"url":return new URL(t,location.href).href;case"local file":return`${t}(local file)`;case"inline":return"inline";default:throw`unknown source type: ${e}.`}}(this._type,this._id)}}class O{constructor(e){this._editor=e,this._urlOfLastRead={annotation:"",config:""},this._cursorChanger=new C(e),this._ajaxSender=new D((()=>this._cursorChanger.startWait()),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.save.error")),(()=>this._cursorChanger.endWait())),function(e){const t=e.eventEmitter;t.on("textae-event.save-annotation-dialog.download.click",(()=>t.emit("textae-event.data-access-object.annotation.save"))).on("textae-event.save-annotation-dialog.viewsource.click",(()=>t.emit("textae-event.data-access-object.annotation.save"))).on("textae-event.save-configuration-dialog.download.click",(e=>t.emit("textae-event.data-access-object.configuration.save",e)))}(e,this._ajaxSender)}get annotationUrl(){return this._urlOfLastRead.annotation}set annotationUrl(e){"url"===e.type&&(this._urlOfLastRead.annotation=e.id)}get configurationUrl(){return this._urlOfLastRead.config}set configurationUrl(e){"url"===e.type&&(this._urlOfLastRead.config=e.id)}loadAnnotation(e){A(e,(t=>{const n=new N("url",e,t);t&&t.text?(this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",n),this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.url.set",n)):this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",n)}),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.annotation.load.error",e)),this._cursorChanger)}loadConfigulation(e,t=null){A(e,(n=>{this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new N("url",e,n),t)}),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.load.error",e)),this._cursorChanger)}saveAnnotation(e,t){e&&function(e,t,n,i,o){t.post(n,i,(()=>e.eventEmitter.emit(o)))}(this._editor,this._ajaxSender,e,JSON.stringify(t),"textae-event.data-access-object.annotation.save")}saveConfiguration(e,t){e&&this._ajaxSender.patch(e,JSON.stringify(t),(()=>this._editor.eventEmitter.emit("textae-event.data-access-object.configuration.save",t)))}}class P{constructor(e,t){this._emitter=e,this._name=t,this._container=new Map}_toModel(e){return e}_toModels(e,t){return e.map((e=>this._toModel(e,t)))}addSource(e,t){for(const n of this._toModels(e,t))this._addToContainer(n)}add(e){const t=this._addToContainer(e);return this._emit(`textae-event.annotation-data.${this._name}.add`,t),t}get(e){return this._container.get(e)}get all(){return Array.from(this._container.values())}findByType(e){return this.all.filter((t=>t.typeName===e))}get some(){return this._container.size}changeType(e,t){const n=this._container.get(e);return n.typeName=t,this._emit(`textae-event.annotation-data.${this._name}.change`,n),n}remove(e){const t=this._container.get(e);return t&&(this._container.delete(e),this._emit(`textae-event.annotation-data.${this._name}.remove`,t)),t}clear(){this._container.clear()}_addToContainer(e){return this._container.set(e.id,e),e}_emit(e,t){this._emitter.emit(e,t)}}function j(e,t){return function(e,t){return!!t&&t.begin<=e.begin&&e.end<=t.end}(e,t)?t:t.parent?j(e,t.parent):null}function M(e,t){return e.begin-t.begin||t.end-e.end}function I(e,t){t.sort(M).forEach(((t,n,i)=>{t.severTies();const o=0!==n?i[n-1]:null;if(o){const n=j(t,o);n?t.beChildOf(n):t.beChildOf(e)}else t.beChildOf(e)}))}function R(e,t,n){return`${e.editorId}__S${t}_${n}`}function L(e,t,n){return`${e.editorId}__B${t}_${n}`}function z(e,t){return`${e.editorId}__E${t.replace(/[:.]/g,"")}`}const F="ui-selected";function H(e,t){const{entities:n}=e;return n.length*function(e){return 24*e+18}(t)+function(e){return e.map((e=>18*e.attributes.length)).reduce(((e,t)=>e+t),0)}(n)}function B(e,t){const n=0===e.children.length?0:function(e,t){return Math.max.apply(null,e.children.map((e=>B(e,t))))}(e,t);return H(e,t)+n}function W(e){return Math.round(100*e)/100}function q(e,t,n){(function(e,t,n){return!(!e.style||parseFloat(e.style.top)!==t||parseFloat(e.style.left)!==n)})(e,t,n)||(e.style.top=`${t}px`,e.style.left=`${n}px`)}function V(e){return e[0].querySelector(".textae-editor__annotation-box")}function U(e,t){return function(e,t,n){console.assert(t,"element MUST exists.");const i=e[0].querySelectorAll(`.${n}`),o=Array.from(i).indexOf(t);return i.length-o>1?i[o+1]:null}(e,document.querySelector(`#${t}`),"textae-editor__span")}function G(e,t){return{start:e.begin-t,end:e.end-t}}function K(e,t,n){const i=n.begin<e&&e<n.end&&n.end<t,o=e<n.begin&&n.begin<t&&t<n.end;return i||o}function J(e){const t=e.bigBrother;return t?function(e,t){if(K(e.begin,e.end,t))throw new Error(`span ${e.id} is corrisng with ${t.id}`);let{start:n,end:i}=G(e,t.end),o=t.element.nextSibling;return o.length<n&&(n-=o.length,i-=o.length,o=o.nextSibling),{textNode:o,start:n,end:i}}(e,t):function(e){const{start:t,end:n}=G(e,e.parent.begin);return{textNode:e.parent.element.firstChild,start:t,end:n}}(e)}function X(e){const{textNode:t,start:n,end:i}=J(e);if(!t)throw new Error(`The textNode on to create a span is not found. ${e.id}`);if(n<0)throw new Error(`start must be positive, but ${n} for ${e.id}.`);if(t.length<i)throw new Error(`oh my god! I cannot render ${e.id}. "${t.textContent.slice(n,i)}" at ${n}~${i} of text(${t.textContent.length}) as "${t.textContent}".`);return function(e,t,n){const i=document.createRange();return i.setStart(e,t),i.setEnd(e,n),i}(t,n,i)}class Y{constructor(e,t,n,i){this._editor=e,this._begin=t,this._end=n,this._spanContainer=i,this.severTies()}get id(){return R(this._editor,this._begin,this._end)}get begin(){return this._begin}get end(){return this._end}get types(){return[]}get entities(){return[]}get bigBrother(){return function(e){const t=e.parent.children,n=t.indexOf(e);return 0===n?null:t[n-1]}(this,this._spanContainer.topLevel)}get root(){return this._spanContainer}get parent(){return this._parent}get children(){return this._children}severTies(){this._parent=null,this._children=[]}beChildOf(e){e.children.push(this),this._parent=e}traverse(e,t){e(this);for(const n of this._children)n.traverse(e,t);t&&t(this)}get element(){return document.querySelector(`#${this.id}`)}renderElement(){const e=o().create(this._contentHTML);X(this).surroundContents(e)}destroyElement(){const e=this.element,t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}get gridElement(){return document.querySelector(`#G${this.id}`)}get isGridRendered(){return this.gridElement}renderGridElement(){const e=function(e,t){const n=U(e,t);return n?document.querySelector(`#G${n.id}`):null}(this._editor,this.id);if(e)return e.insertAdjacentElement("beforebegin",this._createGridElement()),e.previousElementSibling;{const e=V(this._editor);return e.insertAdjacentElement("beforeend",this._createGridElement()),e.lastElementChild}}_createGridElement(){const{width:e,top:t,left:n}=this._gridRectangle,i=function(e,t,n,i){return`\n<div \n  id=G${e} \n  class="textae-editor__grid" \n  style="top: ${t}px; left: ${n}px; width: ${i}px;">\n</div>\n`}(this.id,t,n,e);return o().create(i)}updateGridPosition(){const{top:e,left:t}=this._gridRectangle;q(this.gridElement,e,t)}destroyGridElement(){this.isGridRendered&&this.gridElement.remove()}get _styleClasses(){return[...this.styles.values()].map((e=>`textae-editor__style textae-editor__style--${e}`))}}class Q extends Y{constructor(e,t,n,i,o){super(e,t,n,o),this._entityContainer=i}get entities(){return this._entityContainer.getAllOfSpan(this)}passesAllEntitiesTo(e){for(const t of this.entities)t.span=e}get hasStyle(){return this.styles.size>0}get styles(){return this._spanContainer.getStyle(this.id)}get rectangle(){const e=this.element,t=e.getBoundingClientRect(),n=e.offsetParent.offsetParent.getBoundingClientRect();return{top:t.top-n.top,left:t.left-n.left,width:t.width}}get isDenotation(){return!0}select(){const e=super.element;e.classList.add(F),e.focus()}deselect(){const e=super.element;e&&e.classList.remove(F)}getHeightIncludeDescendantGrids(e){return B(this,e)+23+30}get _contentHTML(){return`\n      <span\n        id="${this.id}"\n        title="${this.id}"\n        tabindex="0"\n        class="${["textae-editor__span"].concat(this._styleClasses).join(" ")}"\n        >\n      </span>\n    `}get _gridRectangle(){console.assert(this.element,"span is not renderd");const{top:e,left:t,width:n}=this.rectangle;return{width:W(n),top:W(e-B(this,this._spanContainer._entityGap.value)),left:W(t)}}}class Z extends Y{constructor(e,t,n,i,o){super(e,t,n,i),this.styles=new Set([o])}get styleOnly(){return!0}appendStyles(e){this.styles=new Set([...this.styles,...e])}get _contentHTML(){return`\n      <span\n        id="${this.id}"\n        title="${this.id}"\n        class="${this._styleClasses.join(" ")}"\n        >\n      </span>\n    `}}class ee extends Y{constructor(e,t,n,i,o){super(e,t,n,o),this._entityContainer=i}get isBlock(){return!0}get entities(){return this._entityContainer.getAllOfSpan(this)}passesAllEntitiesTo(e){for(const t of this.entities)t.span=e}get id(){return L(this._editor,this._begin,this._end)}select(){const e=super.element;e.classList.add(F),this._backgroundElement.classList.add(F),e.focus()}deselect(){const e=super.element;e&&e.classList.remove(F),this._backgroundElement&&this._backgroundElement.classList.remove(F)}updateSidekicksOfBlockSpanPosition(e){const{top:t,left:n,width:i,height:o}=this.getReactOfSidekicksOfBlock(e);!function(e,t,n,i,o){e.style.top=`${t}px`,e.style.left=`${n}px`,e.style.width=`${i}px`,e.style.height=`${o}px`}(this._backgroundElement,t,n,i,o),this.gridElement.style.height=`${this._rectangle.height}px`}renderElement(){super.renderElement();!function(e,t){const n=o().create(`\n    <div id="${t}" class="textae-editor__block-bg"></div>\n  `);e.insertAdjacentElement("afterbegin",n)}(V(this._editor),this._backgroundId)}destroyElement(){super.destroyElement(),this._backgroundElement.remove()}getHeightIncludeDescendantGrids(e){return H(this,e)+35}get _contentHTML(){return`\n      <div id="${this.id}" title="${this.id}" class="textae-editor__block"></div>\n    `}_createGridElement(){const e=super._createGridElement();return e.classList.add("textae-editor__block-hit-area"),e.dataset.id=this.id,e.title=this.id,e}get _gridRectangle(){console.assert(this.element,"span is not renderd");const e=this._spanContainer._textBox.boundingClientRect;return{width:100,top:W(this.getReactOfSidekicksOfBlock(this._spanContainer._textBox).top),left:W(e.width-108)}}updateGridPosition(){super.updateGridPosition(),this._entityToFocusOn&&(this._entityToFocusOn.select(),this._entityToFocusOn=null)}get isGridBeforePositioned(){return!this.gridElement.style.top}set entityToFocusOn(e){this._entityToFocusOn=e}getReactOfSidekicksOfBlock(e){const t=this._rectangle;return{top:t.top-e.lineHeight/2+20,left:t.left-e.boundingClientRect.left-8,width:t.width+8,height:t.height}}get _backgroundId(){return`bg_of_${this.id}`}get _backgroundElement(){return document.querySelector(`#${this._backgroundId}`)}get _rectangle(){const e=this.element,t=e.getBoundingClientRect(),n=e.offsetParent.offsetParent.getBoundingClientRect();return{top:t.top-n.top,left:t.left,width:t.width,height:t.height}}}function te(e,t,n){return e.filter((({span:e})=>K(t,n,e)))}function ne(e,t,n){let i=e.get(t),o=e.get(n);if(M(i,o)>0){const e=i;i=o,o=e}return[...e.values()].filter((e=>i.begin<=e.begin&&e.end<=o.end)).map((e=>e.id))}class ie{constructor(e,t,n,i,o){this._editor=e,this._emitter=t,this._entityContainer=n,this._textBox=i,this._entityGap=o,this._denotations=new Map,this._blocks=new Map,this._styles=new Map}add(e){if(console.assert(e,"span is necessary."),e instanceof ee)return this._addBlock(e);if(e instanceof Q)return this._addDenotation(e);if(e.isBlock){console.assert(!this.doesParentSpanExits(e.begin,e.end),`There are some parent spans of {begin: ${e.begin}, end: ${e.end}}.`);const t=new ee(this._editor,e.begin,e.end,this._entityContainer,this);return this._addBlock(t)}{const t=new Q(this._editor,e.begin,e.end,this._entityContainer,this);return this._addDenotation(t)}}addSource(e,t){for(const n of e)this._addInstanceFromElement(t,n);this._updateSpanTree()}hasDenotationSpan(e,t){const n=R(this._editor,e,t);return this._denotations.has(n)}get(e){return this._denotations.has(e)?this._denotations.get(e):this._blocks.has(e)?this._blocks.get(e):this._styles.get(e)}getStyle(e){return this._styles.has(e)?this._styles.get(e).styles:new Set}rangeDenotationSpan(e,t){return ne(this._denotations,e,t)}rangeBlockSpan(e,t){return ne(this._blocks,e,t)}get topLevel(){return this.all.filter((e=>e.parent===this)).sort(M)}get children(){return this.topLevel}clear(){this._denotations.clear(),this._blocks.clear(),this._styles.clear()}remove(e){const t=this._blocks.get(e);if(t)return this._removeBlock(t);const n=this._denotations.get(e);return n?this._removeDenotation(n):void 0}moveDenotationSpan(e,t,n){console.assert(e!==R(this._editor,t,n),`Do not need move span:  ${e} ${t} ${n}`);const i=this._denotations.get(e);this._removeDenotation(i);const o=new Q(this._editor,t,n,this._entityContainer,this);return this._addDenotation(o,i),this._emitter.emit("textae-event.annotation-data.span.move"),{begin:i.begin,end:i.end,id:o.id}}moveBlockSpan(e,t,n){console.assert(e!==L(this._editor,t,n),`Do not need move span:  ${e} ${t} ${n}`);const i=this._blocks.get(e);this._removeBlock(i);const o=new ee(this._editor,t,n,this._entityContainer,this);return this._addBlock(o,i),this._emitter.emit("textae-event.annotation-data.span.move"),{begin:i.begin,end:i.end,id:o.id}}_addDenotation(e,t=null){return this._addSpan(this._denotations,e,t),e}_addBlock(e,t=null){return this._addSpan(this._blocks,e,t),this._textBox.forceUpdate(),e}_addSpan(e,t,n=null){e.set(t.id,t),this._updateSpanTree(),n&&n.passesAllEntitiesTo(t),this._emitter.emit("textae-event.annotation-data.span.add",t)}_removeDenotation(e){return this._denotations.delete(e.id),this._emitter.emit("textae-event.annotation-data.span.remove",e),e}_removeBlock(e){return this._blocks.delete(e.id),this._emitter.emit("textae-event.annotation-data.span.remove",e),this._textBox.forceUpdate(),e}isBoundaryCrossingWithOtherSpans(e,t){return function(e,t,n){return console.assert(void 0!==n,"end is necessary."),te(e.map((e=>({span:e}))),t,n).length>0}(this.all,e,t)}doesParentSpanExits(e,t){const n=n=>n.begin<e&&t<n.end;return[...this._denotations.values()].some(n)||[...this._blocks.values()].some(n)||[...this._styles.values()].some(n)}get all(){const e=[...this._styles.values()].filter((e=>!this._denotations.has(e.id)));return[...this._blocks.values()].concat([...this._denotations.values()]).concat(e)}get allDenotationSpans(){return[...this._denotations.values()]}get allBlockSpans(){return[...this._blocks.values()]}get begin(){return 0}get element(){return this._editor[0].querySelector(".textae-editor__text-box")}_updateSpanTree(){I(this,this.all)}_addInstanceFromElement(e,t){switch(e){case"denotation":{const e=new Q(this._editor,t.span.begin,t.span.end,this._entityContainer,this);this._denotations.set(e.id,e);break}case"block":{const e=new ee(this._editor,t.span.begin,t.span.end,this._entityContainer,this);this._blocks.set(e.id,e);break}case"typesetting":{const e=new Z(this._editor,t.span.begin,t.span.end,this,t.style);this._styles.has(e.id)?this._styles.get(e.id).appendStyles(e.styles):this._styles.set(e.id,e);break}default:throw`${e} is unknown type span!`}}arrangeDenotationEntityPosition(){for(const e of this.allDenotationSpans)e.updateGridPosition()}arrangeBlockEntityPosition(){for(const e of this.allBlockSpans)e.updateGridPosition()}arrangeBackgroundOfBlockSpanPosition(){for(const e of this.allBlockSpans)e.updateSidekicksOfBlockSpanPosition(this._textBox)}get maxHeight(){const e=[...this._blocks.values()].concat([...this._denotations.values()]);return e.length?function(e,t){return Math.max(...e.map((e=>e.getHeightIncludeDescendantGrids(t))))}(e,this._entityGap.value):null}}function oe(e){return e.trim().startsWith("http")}function se(e,t){const n=e.all.filter((e=>"_base"!==e.prefix)).filter((e=>0===t.indexOf(`${e.prefix}:`)));return 1===n.length?n[0]:null}function re(e){return/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([/]?[^\s?]*[/]{1})*(?:\/?([^\s\n?[\]{}#]*(?:(?=\.)){1}|[^\s\n?[\]{}.#]*)?([.]{1}[^\s?#]*)?)?(?:\?{1}([^\s\n#[\]]*))?([#][^\s\n]*)?\)?/gi.exec(e)}function ae(e,t,n){if(n)return n;if(oe(t))return function(e){if(oe(e)){const t=re(e);if(t)return t[9]?t[9].slice(1):t[6]?t[6]+(t[7]||""):t[5]&&t[5].length>1?t[5].split("/").filter((e=>""!==e)).pop():t[3]}return e}(t);const i=se(e,t);return i?t.replace(`${i.prefix}:`,""):t}function le(e,t,n){if(oe(t))return t;if(n)return n;if(e.some){const n=se(e,t);if(n)return`${n.uri}${t.replace(`${n.prefix}:`,"")}`;const i=e.all.find((e=>"_base"===e.prefix));if(i)return`${i.uri}${t}`}return null}class ce{constructor({id:e,subj:t,pred:n,obj:i},o,s,r){this.id=e,this.subj=t,this.pred=n,this.obj=i,this._entityContainer=o,this._namespace=s,this._definitionContainer=r}get subjectModel(){return this._entityContainer.get(this.subj)}get displayName(){return ae(this._namespace,"string"==typeof this.obj?this.obj:"",this._definitionContainer.getDisplayName(this.pred,this.obj))}get href(){return le(this._namespace,"string"==typeof this.obj?this.obj:"")}get color(){return this._definitionContainer.getColor(this.pred,this.obj)}equalsTo(e,t){return this.pred===e&&String(this.obj)===t}}function ue(e){return e.slice(1)}function de(e,t){return e.filter((e=>function(e,t){return new RegExp(`^${e}\\d+$`).test(t)}(t,e))).map(ue)}function he(e,t){return e+function(e){return(0===e.length?0:Math.max(...e))+1}(de(t,e))}class pe extends P{constructor(e,t,n){super(e,t),this._prefix=n}_toModels(e,t){const n=super._toModels(e,t);return n.sort(((e,t)=>e.id?t.id?e.id<t.id?-1:e.id>t.id?1:0:-1:1)),n}_addToContainer(e){return super._addToContainer(function(e,t,n){if(!e.id){const i=he(n,Array.from(t.keys()));e.id=i}return e}(e,this._container,this._prefix))}}class fe extends pe{constructor(e,t,n,i){super(e,"attribute","A"),this._entityContainer=t,this._namespace=n,this._definitionContainer=i}_toModel(e){return new ce(e,this._entityContainer,this._namespace,this._definitionContainer)}add(e){return e=e instanceof ce?e:this._toModel(e),super.add(e),e.subjectModel.updateElement(),e}change(e,t,n){const i=this.get(e);return t&&(i.pred=t),n&&(i.obj=n),super._emit("textae-event.annotation-data.attribute.change",i),i}remove(e){const t=super.remove(e);return console.assert(t,`There are no attribute ${e} to delete!`),t.subjectModel.updateElement(),super._emit("textae-event.annotation-data.attribute.remove",t),t}getSameDefinitionsAttributes(e){return this.all.filter((t=>t.pred===e))}getSameAttributes(e,t){return this.all.filter((n=>n.equalsTo(e,t)))}getAttributesFor(e){return this.all.filter((t=>t.subj===e)).sort(((e,t)=>this._definitionContainer.attributeCompareFunction(e,t)))}}function me(e,t){const n=z(e,t);return e[0].querySelector(`#${n} .textae-editor__entity__type-values`)}var ge,_e=new Uint8Array(16);function ve(){if(!ge&&!(ge="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ge(_e)}const ye=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const be=function(e){return"string"==typeof e&&ye.test(e)};for(var xe=[],we=0;we<256;++we)xe.push((we+256).toString(16).substr(1));const ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(xe[e[t+0]]+xe[e[t+1]]+xe[e[t+2]]+xe[e[t+3]]+"-"+xe[e[t+4]]+xe[e[t+5]]+"-"+xe[e[t+6]]+xe[e[t+7]]+"-"+xe[e[t+8]]+xe[e[t+9]]+"-"+xe[e[t+10]]+xe[e[t+11]]+xe[e[t+12]]+xe[e[t+13]]+xe[e[t+14]]+xe[e[t+15]]).toLowerCase();if(!be(n))throw TypeError("Stringified UUID is invalid");return n};const Ce=function(e,t,n){var i=(e=e||{}).random||(e.rng||ve)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=i[o];return t}return ke(i)},$e="http://www.w3.org/2000/svg";const Se=24;class Ee{constructor(e,t,n,i,o,s,r,a){this._container=e;const l=document.createElementNS($e,"text");l.textContent=i,e.appendChild(l);const c=l.getBBox();l.setAttribute("x",t-c.width/2),l.setAttribute("y",n),o&&l.classList.add("textae-editor__relation-label--isLink"),a&&l.classList.add("textae-editor__relation-label--isBold"),l.addEventListener("click",r),this._label=l;const u=document.createElementNS($e,"rect");u.setAttribute("x",t-c.width/2),u.setAttribute("y",n-c.height/2-3),u.setAttribute("width",c.width),u.setAttribute("height",c.height),u.style.fill=s,u.style.fillOpacity=.6,e.insertBefore(u,l),this._background=u}destructor(){this._container.removeChild(this._label),this._container.removeChild(this._background)}}class Te{constructor(e,t,n,i,o){this._relation=e,this._namespace=t,this._definitionContainer=n,this._onClick=i,this._editor=o,this._relationBox=o[0].querySelector(".textae-editor__relation-box"),this._createPath(!1),this._createLabel(!1)}destroy(){this._destoryPath()}select(){this._isSelected||(this._isSelected=!0,this.destroy(),this._createPath(!0),this._createLabel(!0))}deselect(){this._isSelected&&(this._isSelected=!1,this.recreate())}pointUp(){this._isSelected||this._isHovered||(this._isHovered=!0,this._destoryPath(),this._createPath(!0),this._createLabel(!0))}pointDown(){!this._isSelected&&this._isHovered&&(this._isHovered=!1,this.recreate())}recreate(){this.destroy(),this._isSelected?(this._createPath(!0),this._createLabel(!0)):(this._createPath(!1),this._createLabel(!1))}_createPath(e){const t=this._createMarker(this._relationBox,this._relation.color,e),n=this._editor[0].querySelector(".textae-editor__annotation-box").getBoundingClientRect(),i=function(e,t,n,i,o,s){const r=document.createElementNS($e,"path");let a=e.left+e.width/2-t.left;const l=e.top-t.top;let c=n.left+n.width/2-t.left;const u=n.top-t.top;a<c-Se&&(Se<=e.width/2&&(a+=24),Se<=n.width/2&&(c-=24)),c<a-Se&&(Se<=e.width/2&&(a-=8),Se<=n.width/2&&(c+=8));const d=Math.min(l,u)-Math.abs(c-a)/2+10;return r.setAttribute("d",`M ${a}, ${l} C ${a} ${d}, ${c} ${d}, ${c} ${u}`),r.setAttribute("style",`fill:none; stroke: ${i};`),r.setAttribute("marker-end",`url(#${o.id})`),s&&r.classList.add("textae-editor__relation--isBold"),r}(this._relation.sourceEndpoint.getBoundingClientRect(),n,this._relation.targetEndpoint.getBoundingClientRect(),this._relation.color,t,e);this._relationBox.appendChild(i),i.addEventListener("click",this._onClick),i.addEventListener("mouseenter",(()=>this.pointUp())),i.addEventListener("mouseleave",(()=>this.pointDown())),this._path=i}_createMarker(e,t,n){const i=`r${Ce()}`,o=n?.5:1,s=e.children[0];if(!s.querySelector(`#${i}`)){const e=function(e){const t=document.createElementNS($e,"marker");t.setAttribute("id",e),t.setAttribute("orient","auto");const n=document.createElementNS($e,"polygon");return t.appendChild(n),t}(i);s.appendChild(e)}const r=s.querySelector(`#${i}`);return function(e,t,n){e.setAttribute("markerWidth",12*t),e.setAttribute("markerHeight",12*t),e.setAttribute("refX",12*t),e.setAttribute("refY",6*t);const i=e.children[0];i.setAttribute("points",`0 0, ${12*t} ${6*t}, 0 ${12*t}, ${6*t} ${6*t}`),i.setAttribute("style",`fill: ${n}`)}(r,o,t),r}_createLabel(e){const t=this._path.getBBox(),n=t.x+t.width/2,i=t.y-2;this._label=new Ee(this._relationBox,n,i,`[${this._relation.id}] ${this._relation.displayName}`,this._relation.href,"yellow",this._onClick,e)}_destoryPath(){this._relationBox.removeChild(this._path),this._label.destructor()}}class De{constructor(e,{id:t,pred:n,subj:i,obj:o},s,r){this._editor=e,this._id=t,this.typeName=n,this._subj=i,this._obj=o,this._namespace=s,this._definitionContainer=r}get id(){return this._id}set id(e){this._id=e}get typeName(){return this._typeName}set typeName(e){this._typeName=String(e)}isSameType(e){return this.typeName===e}get subj(){return this._subj}get obj(){return this._obj}get sourceEndpoint(){return me(this._editor,this.subj)}get targetEndpoint(){return me(this._editor,this.obj)}select(){this._connect.select()}deselect(){this._connect.deselect()}pointUp(){this._connect.pointUp()}pointDown(){this._connect.pointDown()}renderElement(){const e=new Te(this,this._namespace,this._definitionContainer,(e=>{this._editor.eventEmitter.emit("textae-event.editor.relation.click",e,this),e.stopPropagation()}),this._editor);this._connect=e}updateElement(){this._connect.recreate()}destroyElement(){this._connect.destroy(),this._connect=void 0}get displayName(){return ae(this._namespace,this.typeName,this._definitionContainer.getLabel(this.typeName))}get href(){return le(this._namespace,this.typeName,this._definitionContainer.getUri(this.typeName))}get color(){return this._definitionContainer.getColor(this.typeName)}}class Ae extends pe{constructor(e,t,n,i){super(t,"relation","R"),this._editor=e,this._namespace=n,this._definitionContainer=i}_toModel(e){return new De(this._editor,e,this._namespace,this._definitionContainer)}add(e){return(e=e instanceof De?e:new De(this._editor,e,this._namespace,this._definitionContainer)).renderElement(),super.add(e)}changeType(e,t){const n=super.changeType(e,t);return n.updateElement(),n}remove(e){const t=super.remove(e);return t.destroyElement(),t}clear(){for(const e of this.all)e.destroyElement();super.clear()}}class Ne{constructor(e,t=[]){this._typeName=e,this._attributes=t}get typeName(){return this._typeName}get attributes(){return this._attributes}}var Oe=n(4576),Pe=n.n(Oe);function je(e,t){return t?Pe()`<a target="_blank" href="${t}">${e}</a>`:Pe()`${e}`}function Me({title:e,pred:t,obj:n,color:i,href:o,displayName:s}){return`\n<div\n  class="textae-editor__entity__attribute"\n  title="${e}"\n  data-pred="${t}"\n  data-obj="${n}"\n  ${i?`style="background-color: ${i};"`:""}\n  >\n  <span class="textae-editor__entity__attribute-label">\n    ${je(s,o)}\n  </span>\n</div>\n`}class Ie{constructor(e,t,n,i,o,s,r,a,l=null){this._editor=e,this._span=s,this.typeName=r,this._id=l,this._attributeContainer=t,this._relationContaier=n,this._entityGap=i,this._typeDefinition=o,this._namespace=a}get id(){return this._id}set id(e){this._id=e}get span(){return this._span}set span(e){this._span=e}get typeName(){return this._typeName}set typeName(e){this._typeName=String(e)}isSameType(e,t=null){return t?this.typeName===e&&this._hasSameAttributes(t):this.typeName===e}get typeValues(){return new Ne(this._typeName,this.attributes)}get attributes(){return this._attributeContainer.getAttributesFor(this._id)}get relations(){return this._relationContaier.all.filter((e=>e.obj===this.id||e.subj===this.id))}pointUpRelations(){for(const e of this.relations)e.pointUp()}pointDownRelations(){for(const e of this.relations)e.pointDown()}get _HTMLElementContext(){return{id:z(this._editor,this.id),title:this.id,displayName:this._displayName,href:this._href,color:this._color,attributes:this.attributes.map((({pred:e,obj:t,displayName:n,href:i,color:o})=>({pred:e,obj:t,title:`pred: ${e}, value: ${t}`,displayName:n,href:i,color:o})))}}_hasSameAttributes(e){return e.length==this.attributes.length&&e.filter((e=>this.attributes.some((t=>t.equalsTo(e.pred,e.obj))))).length==this.attributes.length}hasSpecificPredicateAttribute(e){return this.attributes.some((t=>t.pred===e))}get element(){return document.querySelector(`#${z(this._editor,this.id)}`)}get isDenotation(){return this._span.isDenotation}get isBlock(){return this._span.isBlock}select(){this._selected||(this._selected=!0,this._selectElement())}deselect(){this._selected&&(this._selected=!1,this.element.classList.remove(F))}renderElement(){return function(e){const{id:t,title:n,color:i,href:s,displayName:r,attributes:a}=e,l=`\n<div class="textae-editor__entity" id="${t}" title="${n}">\n  <div\n    class="textae-editor__entity__type-values"\n    style="background-color: ${i};"\n    >\n    <div\n      class="textae-editor__entity__type-label"\n      tabindex="0"\n      >\n      ${je(r,s)}\n    </div>\n    ${a.map(Me).join("\n")}\n  </div>\n</div>\n`;return o().create(l)}(this._HTMLElementContext)}updateElement(){const e=this.renderElement();this.element.replaceWith(e),this._selected&&this._selectElement(),this.reflectEntityGapInTheHeight()}destroyElement(){this.element.remove()}reflectEntityGapInTheHeight(){if(this.isDenotation){const e=this.element;e&&e.setAttribute("style",`padding-top: ${24*this._entityGap.value}px;`)}}_selectElement(){const e=this.element;e.classList.add(F),this.span.isGridBeforePositioned?this.span.entityToFocusOn=this:e.querySelector(".textae-editor__entity__type-label").focus()}get _definitionContainerFor(){if(this.isDenotation)return this._typeDefinition.denotation;if(this.isBlock)return this._typeDefinition.block;throw"unknown entity type"}get _displayName(){return ae(this._namespace,this.typeName,this._definitionContainerFor.getLabel(this.typeName))}get _href(){return le(this._namespace,this.typeName,this._definitionContainerFor.getUri(this.typeName))}get _color(){return this._definitionContainerFor.getColor(this.typeName)}}class Re extends pe{constructor(e,t,n,i,o){super(t,"entity","T"),this._editor=e,this._parentContainer=n,this._entityGap=i,this._namespace=o}get _spanContainer(){return this._parentContainer.span}get _attributeContainer(){return this._parentContainer.attribute}get _relationContainer(){return this._parentContainer.relation}_toModel(e,t){return new Ie(this._editor,this._attributeContainer,this._relationContainer,this._entityGap,this._parentContainer.typeDefinition,this._getSpan(t,e),e.obj,this._namespace,e.id)}add(e){if(!e.span)throw new Error(`entity has no span! ${JSON.stringify(e)}`);return e instanceof Ie?super.add(e):super.add(new Ie(this._editor,this._attributeContainer,this._relationContainer,this._entityGap,this._parentContainer.typeDefinition,this._spanContainer.get(e.span),e.typeName,this._namespace))}changeType(e,t){const n=super.changeType(e,t);return n.updateElement(),n}moveEntities(e,t){for(const n of t)n.span=e;this._emit("textae-event.annotation-data.entity.move",t)}getAllOfSpan(e){return this.all.filter((t=>e.id===t.span.id))}get denotations(){return this.all.filter((e=>e.isDenotation))}get blocks(){return this.all.filter((e=>e.isBlock))}_getSpan(e,t){return this._spanContainer.get(this._getSpanId(e,t))}_getSpanId(e,t){switch(e){case"denotation":return R(this._editor,t.span.begin,t.span.end);case"block":return L(this._editor,t.span.begin,t.span.end);default:throw`${e} is unknown type span!`}}}function Le(e,t){return 0<=e&&e<=t.length}class ze{constructor(){this._map=new Map}set(e,t){this._map.set(e,t)}get(e){return this._map.has(e)?this._map.get(e)[0]:[]}getInhibitors(e){return this._map.has(e)?this._map.get(e)[1]:[]}get size(){return this._map.size}}class Fe{constructor(e,t="root",n=(()=>!0),i){this._candidates=e||[],this._name=t,this._predicate=n,this._prevValidation=i}and(e,t){return new Fe(this._candidates,e,t,this)}validateAll(){const e=new ze;let t,n;for(t=this,n=this._candidates;t;t=t._prevValidation)n=t._validate(n,this._candidates,e);return[n,e]}_validate(e,t,n){return this._getRejects(t).length>0&&n.set(this._name,[this._getRejects(t),this._getInhibitors(t)]),this._getAccepts(e)}_getAccepts(e){return e.filter((e=>this._test(e)))}_getRejects(e){return e.filter((e=>!this._test(e)))}_getInhibitors(e){const t=new Map;for(const n of e){const e=this._predicate(n);Array.isArray(e)&&!e[0]&&t.set(n,e[1])}return t}_test(e){const t=this._predicate(e);return Array.isArray(t)?t[0]:t}}function He(e,t,n){return new Fe(e).and("hasLength",(e=>e.span.end-e.span.begin>0)).and("inText",(e=>function(e,t){return Le(t.begin,e)&&Le(t.end,e)}(t,e.span))).and("isNotCrossing",(e=>{const t=te(n,e.span.begin,e.span.end);return[0===t.length,t]}))}function Be(e,t){return e.some((e=>e.id===t))}function We(e,t){return void 0===t.id||1===e.filter((e=>t.id&&t.id===e.id)).length}function qe(e,t){return e.sourceProperty=t,e}function Ve(e,t){for(const[n,i]of t.getInhibitors("isNotCrossing"))console.warn(`Crossing ${e}: [${n.span.begin}:${n.span.end}](${n.id}) crosses with ${i.map((({id:e,span:t})=>`[${t.begin}:${t.end}](${e})`)).join(", ")}`)}function Ue(e,t){const n=(t.typesettings||[]).concat(t.denotations||[]).concat(t.blocks||[]),[i,o]=function(e,t,n){return He(t,e,n).validateAll()}(e,t.typesettings,n),[s,r]=function(e,t,n){return He(t,e,n).and("uniqueID",(e=>We(n,e))).validateAll()}(e,t.denotations,n),[a,l]=function(e,t,n){return He(t,e,n).and("uniqueID",(e=>We(n,e))).and("uniqueRange",(({span:e})=>1===t.filter((({span:t})=>e.begin===t.begin&e.end===t.end)).length)).validateAll()}(e,t.blocks,n),[c,u]=(d=s.concat(a),h=t.attributes,new Fe(h).and("subject",(e=>Be(d,e.subj))).and("unique",(e=>function(e,t){return 1===e.filter((e=>e.subj===t.subj&&e.pred===t.pred&&e.obj===t.obj)).length}(h,e))).validateAll());var d,h;const[p,f]=(m=s.concat(a),g=t.relations,new Fe(g).and("object",(e=>Be(m,e.obj))).and("subject",(e=>Be(m,e.subj))).validateAll());var m,g,_,v,y;return Ve("TypeSettings",o),Ve("Denotations",r),Ve("Blocks",l),{accept:{denotation:s,attribute:c,relation:p,typeSetting:i,block:a},reject:{wrongRangeDenotations:r.get("hasLength"),outOfTextDenotations:r.get("inText"),wrongRangeBlocks:l.get("hasLength"),outOfTextBlocks:l.get("inText"),duplicatedRangeBlocks:l.get("uniqueRange"),wrongRangeTypesettings:o.get("hasLength"),outOfTextTypesettings:o.get("inText"),duplicatedIDs:r.get("uniqueID").map((e=>qe(e,"denotations"))).concat(l.get("uniqueID").map((e=>qe(e,"blocks")))),boundaryCrossingSpans:o.get("isNotCrossing").map((e=>qe(e,"typesettings"))).concat(r.get("isNotCrossing").map((e=>qe(e,"denotations")))).concat(l.get("isNotCrossing").map((e=>qe(e,"blocks")))),referencedEntitiesDoNotExist:(_=u.get("subject"),v=f.get("object"),y=f.get("subject"),_.map((e=>(e.sourceProperty="attributes",e.alertSubj=!0,e))).concat(v.map((e=>(e.sourceProperty="relations",e.alertObj=!0,e)))).concat(y.map((e=>(e.sourceProperty="relations",e.alertSubj=!0,e))))),duplicatedAttributes:u.get("unique"),hasError:r.size||l.size||u.size||f.size||o.size}}}function Ge(e,t,n,i){n&&(n=n.map(t));for(const t of e)t.addSource(n,i)}function Ke(e,t){return e.id?t+e.id:null}function Je(e){return{...e,begin:parseInt(e.begin),end:parseInt(e.end)}}function Xe(e,t){return{...e,id:Ke(e,t),span:Je(e.span)}}function Ye(e,t,n,i,o,s,r=""){const a=Ue(o,s);return Ge([e,t],(e=>Xe(e,r)),a.accept.denotation,"denotation"),Ge([n],(e=>function(e,t){return{...e,id:Ke(e,t),subj:t+e.subj,obj:e.obj}}(e,r)),a.accept.attribute),Ge([i],(e=>function(e,t){return{...e,id:Ke(e,t),subj:t+e.subj,obj:t+e.obj}}(e,r)),a.accept.relation),Ge([e],(e=>({...e,span:Je(e.span)})),a.accept.typeSetting,"typesetting"),Ge([e,t],(e=>Xe(e,r)),a.accept.block,"block"),a.reject}function Qe(e,t){const[n,i]=function(e,t,n,i,o,s){if(!s.tracks)return[!1,[]];const{tracks:r}=s;return delete s.tracks,[!0,r.map(((s,r)=>{const a=r+1,l=Ye(e,t,n,i,o,s,`track${a}_`);return l.name=`Track ${a} annotations.`,l}))]}(e.span,e.entity,e.attribute,e.relation,t.text,t),o=Ye(e.span,e.entity,e.attribute,e.relation,t.text,t);var s,r;o.name="Root annotations.",s=e.namespace,r=t.namespaces||[],Ge([s],(e=>({id:e.prefix,...e})),r);const a=[o].concat(i);return{multitrack:n,hasError:a.some((e=>e.hasError)),rejects:a}}function Ze(e){return e.attribute.all.map((e=>({id:e.id,subj:e.subj,pred:e.pred,obj:e.obj})))}function et(e){return e.relation.all.map((e=>({id:e.id,pred:e.typeName,subj:e.subj,obj:e.obj})))}function tt(e){return e.entity.blocks.map((e=>({id:e.id,span:{begin:e.span.begin,end:e.span.end},obj:e.typeName})))}class nt{constructor(){this._isGapShown=!0,this._numberOfGap=2}bind(e){this._callback=e}set show(e){this._isGapShown=e,this._callback(this.value)}get show(){return this._isGapShown}get value(){return this._isGapShown?this._numberOfGap:0}set value(e){this._numberOfGap=e,this._callback(e)}}function it(e){const t=parseInt(e,10);return isNaN(t)?0:t}function ot(e){const t=window.getComputedStyle(e);e.style.height="auto",e.style.height=e.offsetHeight-it(t.paddingTop)+20+"px"}class st{constructor(e,t){this._editor=e,this._el=e.querySelector(".textae-editor__text-box"),this._annotationData=t}get boundingClientRect(){return this._el.getBoundingClientRect()}get lineHeight(){return e=this._el,it(window.getComputedStyle(e).lineHeight);var e}set lineHeight(e){var t,n;t=this._el,n=e,t.style.lineHeight=`${n}px`,t.style.paddingTop=n/2+"px",ot(this._el),this._updateSizeOfRelationBox()}render(e){this._el.innerHTML=e}updateLineHeight(){const e=this._annotationData.span.maxHeight;e?this.lineHeight=e:this._resetLineHeight()}forceUpdate(){ot(this._el),this._updateSizeOfRelationBox()}_resetLineHeight(){const{lineHeight:e}=window.getComputedStyle(this._editor);this.lineHeight=it(e)}_updateSizeOfRelationBox(){const e=this._editor.querySelector(".textae-editor__relation-box");e.style.height=this._el.style.height,e.style.width=window.getComputedStyle(this._el).width}}var rt=n(9462),at=n.n(rt);class lt{constructor(e,t,n,i,o){this._editor=e,this._denotationContainer=t,this._blockContainer=n,this._relationContainer=i,this._attributeContainer=o,this._lockStateObservable=new(at())(!1),this._lockStateObservable((()=>this._editor.eventEmitter.emit("textae-event.type-definition.lock")))}get denotation(){return this._denotationContainer}get block(){return this._blockContainer}get relation(){return this._relationContainer}get attribute(){return this._attributeContainer}get config(){const e={};return this._denotationContainer.config.length&&(e["entity types"]=this._denotationContainer.config),this._relationContainer.config.length&&(e["relation types"]=this._relationContainer.config),this._attributeContainer.config.length&&(e["attribute types"]=this._attributeContainer.config),this._blockContainer.config.length&&(e["block types"]=this._blockContainer.config),e}get isLock(){return this._lockStateObservable()}lockEdit(){this._lockStateObservable.set(!0)}unlockEdit(){this._lockStateObservable.set(!1)}setTypeConfig(e){e?(this._denotationContainer.definedTypes=e["entity types"]||[],this._relationContainer.definedTypes=e["relation types"]||[],this._attributeContainer.definedTypes=e["attribute types"]||[],this._blockContainer.definedTypes=e["block types"]||[],this.autocompletionWs=e.autocompletion_ws):(this._denotationContainer.definedTypes=[],this._relationContainer.definedTypes=[],this._attributeContainer.definedTypes=[],this._blockContainer.definedTypes=[],this.autocompletionWs=""),this._editor.eventEmitter.emit("textae-event.type-definition.reset")}}function ct(e){return e.reduce(((e,t)=>{const n=t.typeName;return e.has(n)?e.set(n,e.get(n)+1):e.set(n,1),e}),new Map)}function ut(e,t,n,i){const o=ct(e),s=function(e,t){const n=[];for(const i of e)t.has(i)||n.push(i);return n.sort(((e,t)=>e>t?1:e<t?-1:0)),n}(t.ids(),o);return function(e){const t=Array.from(e.keys());return t.sort(((t,n)=>{const i=e.get(n)-e.get(t);return 0!==i?i:t>n?1:t<n?-1:0})),t}(o).concat(s).map((e=>({id:e,label:t.has(e)&&t.get(e).label||void 0,defaultType:e===n,uri:re(e)?e:void 0,color:t.has(e)&&t.get(e).color||i,useNumber:o.get(e)})))}class dt{constructor(e){this._map=e.reduce(((e,t)=>e.set(t.id,t)),new Map)}has(e){return this._map.has(e)}get(e){return{...this._map.get(e)}}replace(e,t){e!==t.id&&this._map.delete(e),this._map.set(t.id,t)}delete(e){this._map.delete(e)}ids(){return this._map.keys()}getConfig(e){return function(e,t){return e.has(t)?e.get(t):function(e,t){const n=function(e,t){const n=[];for(const i of e)-1!==i.indexOf("*")&&0===t.indexOf(i.slice(0,-1))&&n.push(i);return n}(e.ids(),t);return 0===n.length?null:e.get(function(e){let t="";for(const n of e)n.length>t.length&&(t=n);return t}(n))}(e,t)}(this,e)}labelIncludes(e){return[...this._map.values()].filter((e=>e.label)).filter((t=>t.label.includes(e)))}clone(){return new Map(this._map)}}class ht{constructor(e,t,n,i){this._editor=e,this._annotationType=t,this._definedTypes=null,this._getAllInstanceFunc=n,this._defaultColor=i}get annotationType(){return this._annotationType}set definedTypes(e){this._definedTypes=new dt(e);const t=e.find((e=>!0===e.default));t?(delete t.default,this._defaultType=t.id):this._defaultType=null}has(e){return this._definedTypes.has(e)}get(e){const t={...this._definedTypes.get(e)};return this._defaultType===e?(t.default=!0,t):(delete t.default,t)}replace(e,t){this._definedTypes.replace(e,t),this._editor.eventEmitter.emit(`textae-event.type-definition.${this._annotationType}.change`,t.id)}addDefinedType(e){if(void 0===e.color){const t=this.getColor(e.id);t!==this._defaultColor&&(e.color=t)}if(void 0===e.label){const t=this.getLabel(e.id);t&&(e.label=t)}this.replace(e.id,e),e.default&&(this._defaultType=e.id)}get definedTypes(){return this._definedTypes}get config(){const e=this._definedTypes.clone();for(const{typeName:t}of this._getAllInstanceFunc())e.has(t)||e.set(t,{id:t});for(const[t,n]of e.entries()){const i={...n};n.id===this.defaultType?i.default=!0:delete i.default,e.set(t,i)}return[...e.values()]}get defaultType(){return this._defaultType?this._defaultType:function(e){const t=ct(e);if(0===t.size)return"something";const n=[...t.entries()].sort(),{mostCommonlyUsedType:i}=n.reduce((({max:e,mostCommonlyUsedType:t},[n,i])=>(i>e&&(e=i,t=n),{max:e,mostCommonlyUsedType:t})),{max:0,mostCommonlyUsedType:[n][0]});return i}(this._getAllInstanceFunc())}set defaultType(e){console.assert(e,"id is necessary!"),this._defaultType=e}get defaultColor(){return this._defaultColor}getColor(e){const t=this._definedTypes.getConfig(e);return t&&t.color||this._defaultColor}getLabel(e){const t=this._definedTypes.getConfig(e);return t&&t.label}getUri(e){return re(e)?e:void 0}findByLabel(e){return this.definedTypes.labelIncludes(e)}get pallet(){return ut(this._getAllInstanceFunc(),this._definedTypes,this.defaultType,this._defaultColor)}delete(e){this._definedTypes.delete(e)}}var pt=n(454),ft=n.n(pt);class mt{constructor(e,t){this.valueType=e,this.pred=t}get values(){return console.assert(this._values,"this._values to return!"),this._values}get JSON(){return{pred:this.pred}}get _valuesClone(){console.assert(this._values,"this._values is necessary to clone!");const e=[];for(const t of this._values)e.push({...t});return e}}class gt extends mt{constructor(e,t){super(e,t.pred),this.default=!0,this.label=t.label,this.color=t.color}getLabel(){return this.label}getDisplayName(){return this.label?this.label:this.pred}getColor(){return this.color}get JSON(){return Object.assign(super.JSON,{"value type":"flag",default:this.default,label:this.label,color:this.color})}}function _t(e,t){return e<=t}function vt(e,t){return e<t}function yt(e){if(e.startsWith("["))return t=>_t(new Number(e.replace("[","")),t);if(e.startsWith("("))return t=>vt(new Number(e.replace("(","")),t);throw`${e} is not valid interval notation`}function bt(e){if(e.endsWith("]"))return t=>_t(t,new Number(e.replace("]","")));if(e.endsWith(")"))return t=>vt(t,new Number(e.replace(")","")));throw`${e} is not valid interval notation`}class xt{constructor(e){const[t,n]=e.split(",");if(n?(this._lowwerCond=yt(t),this._upperCond=bt(n)):((t.startsWith("[")||t.startsWith("("))&&(this._lowwerCond=yt(t),this._upperCond=e=>!0),(t.endsWith("]")||t.endsWith(")"))&&(this._lowwerCond=e=>!0,this._upperCond=bt(t))),!this._lowwerCond||!this._upperCond)throw`${e} is not valid interval notation`}test(e){return this._lowwerCond(e)&&this._upperCond(e)}}class wt extends mt{constructor(e,t){super(e,t.pred),this.default=t.default,this.min=t.min,this.max=t.max,this.step=t.step,this._values=t.values||[]}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)||e}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}_getMatchedValue(e){const t=this._values.filter((e=>"default"!==e.range)).find((t=>new xt(t.range).test(e)));if(t)return t;const n=this._values.find((e=>"default"===e.range));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"numeric",default:this.default,min:this.min,max:this.max,step:this.step,values:super._valuesClone})}}class kt extends mt{constructor(e,t){super(e,t.pred),this._values=t.values||[]}get default(){return this.values.find((e=>e.default)).id}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}get values(){return this._values}get hasOnlyOneValue(){return 1===this._values.length}_getMatchedValue(e){return this.values.find((t=>t.id==e))}get JSON(){return Object.assign(super.JSON,{"value type":"selection",values:super._valuesClone})}}class Ct extends mt{constructor(e,t){super(e,t.pred),this.autocompletionWs=t.autocompletion_ws,this.default=t.default,this._values=t.values||[]}getLabel(e){const t=this._getMatchedValue(e);if(t&&t.label)return t.label}getDisplayName(e){return this.getLabel(e)}getColor(e){const t=this._getMatchedValue(e);return t&&t.color?t.color:null}_getMatchedValue(e){const t=this._values.filter((e=>"default"!==e.pattern)).find((t=>new RegExp(t.pattern).test(e)));if(t)return t;const n=this._values.find((e=>"default"===e.pattern));return n||null}get JSON(){return Object.assign(super.JSON,{"value type":"string",autocompletion_ws:this.autocompletionWs,default:this.default,values:super._valuesClone})}}function $t(e,t){switch(e){case"flag":return new gt(e,t);case"numeric":return new wt(e,t);case"selection":return new kt(e,t);case"string":return new Ct(e,t);default:throw new Error(`${e} of ${JSON.stringify(t)} is Uknown Attribute`)}}class St{constructor(e,t){this._editor=e,this._getAllInstanceFunc=t}set definedTypes(e){this._definedTypes=new Map((e||[]).map((e=>[e.pred,$t(e["value type"],e)])))}create(e,t,n=null){null!==n&&this._definedTypes.size!==n?this._definedTypes=new Map(Array.from(this._definedTypes.entries()).reduce(((i,[o,s],r)=>(r===n&&i.push([t.pred,$t(e,t)]),i.push([o,s]),i)),[])):this._definedTypes.set(t.pred,$t(e,t)),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.create",t.pred)}get(e){return this._definedTypes.get(e)}update(e,t){return this._definedTypes=new Map(Array.from(this._definedTypes.entries()).map((([n,i])=>n===e?[t.pred,$t(i.valueType,t)]:[n,i]))),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.change",t.pred),this.get(t.pred)}updateValues(e,t){const n=this.get(e).JSON;return this.update(e,{...n,values:t})}move(e,t){this._definedTypes=new Map(ft()(this.attributes,e,t).map((e=>[e.pred,e])));const{pred:n}=this.attributes[-1===t?this.attributes.length-1:t];this._editor.eventEmitter.emit("textae-event.type-definition.attribute.move",n)}delete(e){this._definedTypes.delete(e),this._editor.eventEmitter.emit("textae-event.type-definition.attribute.delete")}get attributes(){return Array.from(this._definedTypes.values())||[]}get config(){return this.attributes.map((e=>e.JSON))}isSelectionAttributeValueIndelible(e,t){return!!this.get(e).hasOnlyOneValue||!!this._getAllInstanceFunc().some((n=>n.equalsTo(e,t)))}getLabel(e,t){return console.assert(this._definedTypes.has(e),`There is no attribute definition for ${e}.`),this.get(e).getLabel(t)}getDisplayName(e,t){return console.assert(this._definedTypes.has(e),`There is no attribute definition for ${e}.`),this.get(e).getDisplayName(t)}getColor(e,t){if(this._definedTypes.has(e))return this.get(e).getColor(t)}getIndexOf(e){return Array.from(this._definedTypes.values()).findIndex((t=>t.pred===e))}getAttributeAt(e){return Array.from(this._definedTypes.values())[e-1]}attributeCompareFunction(e,t){const n=this.getIndexOf(e.pred),i=this.getIndexOf(t.pred);return n!==i?n-i:e.id&&t.id?e.id.localeCompare(t.id):0}}class Et{constructor(e){this._sourceDoc="",this.namespace=new P(e.eventEmitter,"namespace");const t=new ht(e,"relation",(()=>this.relation.all),"#555555");this.relation=new Ae(e,e.eventEmitter,this.namespace,t),this._entityGap=new nt,this.entity=new Re(e,e.eventEmitter,this,this._entityGap,this.namespace);const n=new St(e,(()=>this.attribute.all));this.attribute=new fe(e.eventEmitter,this.entity,this.namespace,n),this._textBox=function(e,t){const n='\n    <div class="textae-editor__body">\n      <div class="textae-editor__annotation-box"></div>\n      <div class="textae-editor__text-box"></div>\n      <svg\n        namespace="http://www.w3.org/2000/svg"\n        class="textae-editor__relation-box">\n        <defs></defs>\n      </svg>\n    </div>\n    ';return e[0].innerHTML=n.replace(/[\n\r]+/g,""),new st(e[0],t)}(e,this),this.span=new ie(e,e.eventEmitter,this.entity,this._textBox,this._entityGap),this._editor=e;const i=new ht(e,"entity",(()=>this.entity.denotations),"#77DDDD"),o=new ht(e,"entity",(()=>this.entity.blocks),"#77DDDD");this._typeDefinition=new lt(e,i,o,t,n)}reset(e,t){var n;console.assert(e.text,"This is not a json file of anntations."),this._typeDefinition.setTypeConfig(t),this._sourceDoc=e.text,this._textBox.render(this.sourceDoc),(n=this).span.clear(),n.entity.clear(),n.attribute.clear(),n.relation.clear(),n.namespace.clear();const{multitrack:i,hasError:o,rejects:s}=Qe(this,e);this._editor.eventEmitter.emit("textae-event.annotation-data.all.change",this,i,o,s)}toJson(){return{denotations:(e=this,e.entity.denotations.map((e=>({id:e.id,span:{begin:e.span.begin,end:e.span.end},obj:e.typeName})))),attributes:Ze(this),relations:et(this),blocks:tt(this)};var e}getReplicationRanges(e,t){return function(e,t,n,i,o){return function(e,t,n){const i=e.substring(t,n),o=n-t,s=[];let r=0;for(let t=e.indexOf(i);-1!==t;t=e.indexOf(i,r))r=t+o,s.push({begin:t,end:r});return s}(e,t,n).filter((({begin:e})=>e!==t)).filter((({begin:t,end:n})=>function(e,t,n,i){const o=e.charAt(t-1),s=e.charAt(n);return i(o)&&i(s)}(e,t,n,o))).filter((({begin:e,end:t})=>!i.hasDenotationSpan(e,t))).filter((({begin:e,end:t})=>!i.isBoundaryCrossingWithOtherSpans(e,t)))}(this.sourceDoc,e.begin,e.end,this.span,t)}get entityGap(){return this._entityGap}get textBox(){return this._textBox}get sourceDoc(){return this._sourceDoc.replaceAll(/\r\n/g," \n")}get typeDefinition(){return this._typeDefinition}}class Tt{constructor(e,t,n){this._emitter=e,this._kindName=t,this._selected=new Map,this._annotationData=n}add(e){if(this._selected.has(e))return;const t=this._annotationData[this._kindName].get(e);this._selected.set(e,t),t.select(),this._triggerChange()}has(e){return this._selected.has(e)}contains(e){for(const t of this._selected.values())if(e(t))return!0;return!1}get all(){return Array.from(this._selected.values())}get size(){return this._selected.size}get some(){return this.size>0}get singleId(){return 1===this._selected.size?this._selected.keys().next().value:null}get single(){const e=this.singleId;return e?this._selected.get(e):null}toggle(e){this._selected.has(e)?this.remove(e):this.add(e)}remove(e){this._selected.has(e)&&(this._selected.get(e).deselect(),this._selected.delete(e),this._triggerChange())}removeInstance(e){this.remove(e.id)}removeAll(){if(0!==this._selected.size){for(const[e]of this._selected)this._selected.get(e).deselect(),this._selected.delete(e);this._triggerChange()}}clear(){this._selected.clear()}_triggerChange(){this._emitter.emit(`textae-event.selection.${this._kindName}.change`)}}class Dt extends Tt{selectedWithAttributeOf(e){return this.all.some((t=>t.attributes.some((t=>t.pred===e))))}onlySelectedWithJustOneAttributeOf(e){return this.all.every((t=>1===t.attributes.filter((t=>t.pred===e)).length))}selectedWithoutAttributeOf(e){return this.all.some((t=>!t.attributes.some((t=>t.pred===e))))}isDupulicatedPredAttrributeSelected(e){return this.all.some((t=>t.attributes.filter((t=>t.pred===e)).length>1))}findSelectedWithSamePredicateAttribute(e){return this.all.find((t=>t.attributes.find((t=>t.pred===e))))}findSelectedAttributeWithSamePredicate(e){const t=this.findSelectedWithSamePredicateAttribute(e);if(t)return t.attributes.find((t=>t.pred===e))}}class At{constructor(e,t){this._annotationData=t,this.span=new Tt(e,"span",t),this.entity=new Dt(e,"entity",t),this.relation=new Tt(e,"relation",t),e.on("textae-event.annotation-data.span.remove",(e=>this.span.removeInstance(e))).on("textae-event.annotation-data.entity.remove",(e=>this.entity.removeInstance(e))).on("textae-event.annotation-data.relation.remove",(e=>this.relation.removeInstance(e))).on("textae-event.annotation-data.all.change",(()=>{this.span.clear(),this.entity.clear(),this.relation.clear()}))}add(e,t){console.assert(this[e]),this[e].add(t)}removeAll(){this.span.removeAll(),this.entity.removeAll(),this.relation.removeAll()}selectSpan(e){this.removeAll(),this.span.add(e)}selectSpanRange(e){this.removeAll();for(const t of e)this.span.add(t)}selectEntity(e){this.removeAll(),this.entity.add(e)}selectRelation(e){this.removeAll(),this.relation.add(e)}}class Nt{constructor(){this.reset()}reset(){this._lastEdit=-1,this._lastSave=-1}save(){this._lastSave=this._lastEdit}set lastEdit(e){this._lastEdit=e}get hasAnythingToSave(){return this._lastEdit!==this._lastSave}}class Ot{constructor(e){this._resetHistory(),this._eventEmitter=e}push(e){this._histories.splice(this._pointer+1,this._histories.length-this._pointer,e),this._pointer++,e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger()}next(){this._pointer++;const e=this._histories[this._pointer];return e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._pointer),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._pointer),this._trigger(),e}prev(){const e=this._histories[this._pointer];return e.kind.has("annotation_command")&&(this._pointerForAnnotation.lastEdit=this._getPrevPrevCommandIndexOf("annotation_command")),e.kind.has("configuration_command")&&(this._pointerForConfiguration.lastEdit=this._getPrevPrevCommandIndexOf("configuration_command")),this._pointer--,this._trigger(),e}resetConfiguration(){this._removeConfigurationOperationsFromHistory(),this._pointerForConfiguration.reset(),this._trigger()}resetAllHistories(){this._resetHistory(),this._trigger()}annotatioSaved(){this._pointerForAnnotation.save(),this._trigger()}configurationSaved(){this._pointerForConfiguration.save(),this._trigger()}get hasAnythingToSaveAnnotation(){return this._pointerForAnnotation.hasAnythingToSave}get hasAnythingToSaveConfiguration(){return this._pointerForConfiguration.hasAnythingToSave}get hasAnythingToUndo(){return this._pointer>-1}get hasAnythingToRedo(){return this._pointer<this._histories.length-1}_getPrevPrevCommandIndexOf(e){const t=this._getPrevKindCommand(e);return void 0!==t?t:-1}_getPrevKindCommand(e){for(let t=this._pointer-1;t>=0;t--)if(this._histories[t].kind.has(e))return t}_trigger(){this._eventEmitter.emit("textae-event.history.change",this)}_removeConfigurationOperationsFromHistory(){for(let e=0;e<this._histories.length;e++)this._histories[e].isExactly("configuration_command")&&(this._pointer--,this._histories.splice(e,1))}_resetHistory(){this._pointer=-1,this._histories=[],this._pointerForAnnotation=new Nt,this._pointerForConfiguration=new Nt}}class Pt{constructor(e){this._observable=new(at())(!1);let t=!1;e.eventEmitter.on("textae-event.history.change",(e=>{this._observable.set(t||e.hasAnythingToSaveAnnotation)})),e.eventEmitter.on("textae-event.data-access-object.annotation.save",(()=>{this._observable.set(!1),t=!1})),e.eventEmitter.on("textae-event.annotation-data.all.change",((e,n,i)=>{(n||i)&&(this._observable.set(!0),t=!0),this._observable.set(!1)}))}bind(e){this._observable(e)}get hasChange(){return this._observable()}}var jt=n(8307),Mt=n.n(jt);const It={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n",""],"non-edge characters":[" ","\n"]};class Rt{constructor(){this._delimiterCharacters=[],this._blankCharacters=[]}set(e){const t={...It,...e};return this._delimiterCharacters=t["delimiter characters"],this._blankCharacters=t["non-edge characters"],e}isDelimiter(e){return this._delimiterCharacters.indexOf("ANY")>=0?1:this._delimiterCharacters.indexOf(e)>=0}isBlankCharacter(e){return this._blankCharacters.indexOf(e)>=0}removeBlankChractors(e){for(const t of this._blankCharacters)e=e.replaceAll(t,"");return e}}function Lt(e,t){t?console.log("[command.invoke]",e,t):console.log("[command.invoke]",e)}class zt{get isEmpty(){return!1}isExactly(e){return this.kind.has(e)&&1===this.kind.size}}class Ft extends zt{get kind(){return new Set(["annotation_command"])}}class Ht extends Ft{constructor(e,t,n,i,o=null){super(),this._editor=e,this._annotationData=t,this._modelType=n,this._newModel=i,this._selectionModel=o}execute(){return this._newModel=this._annotationData[this._modelType].add(this._newModel),this._selectionModel&&this._selectionModel.add(this._modelType,this._newModel.id),Lt(`create a new ${this._modelType}: ${this._newModel.id}`),this._newModel}revert(){return new Bt(this._editor,this._annotationData,this._modelType,this._newModel.id)}}class Bt extends Ft{constructor(e,t,n,i){super(),this._editor=e,this._annotationData=t,this._modelType=n,this._id=i}execute(){this.oloModel=this._annotationData[this._modelType].remove(this._id),this.oloModel?Lt(`remove a ${this._modelType}: `,this.oloModel):Lt(`already removed ${this._modelType}: `,this._id)}revert(){return this.oloModel?new Ht(this._editor,this._annotationData,this._modelType,this.oloModel):{execute:()=>{}}}}class Wt extends zt{get kind(){return new Set(["configuration_command"])}}class qt extends Wt{constructor(e,t,n,i=null){super(),this._definitionContainer=e,this._attrDef=t,this._index=n,this._indexThatAddDefaultTo=i}execute(){const e=[...this._attrDef.values];if("selection"===this._attrDef.valueType&&e[this._index].default&&null===this._indexThatAddDefaultTo){let t=null;e.forEach(((e,n)=>{null===t&&n!=this._index&&(t=n)})),e[t]={...e[t],default:!0}}this._deletedValue=e.splice(this._index,1)[0],"selection"===this._attrDef.valueType&&null!==this._indexThatAddDefaultTo&&(e[this._indexThatAddDefaultTo]={...e[this._indexThatAddDefaultTo],default:!0}),this._updatedAttrDef=this._definitionContainer.updateValues(this._attrDef.pred,e),Lt(`remove a value from an attrribute:${this._attrDef.pred}, index:${this._index}, updated values: \n ${e.map((e=>JSON.stringify(e))).join("\n ")}`)}revert(){return new Vt(this._definitionContainer,this._updatedAttrDef,this._deletedValue,this._index)}}class Vt extends Wt{constructor(e,t,n,i=null){super(),this._definitionContainer=e,this._pred=t.pred,this._index=i,this._value=n;const o=[...t.values];if("selection"===t.valueType&&n.default){this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=o.findIndex((e=>e.default)));const e={...o[this._indexThatRemoveDefaultFrom]};delete e.default,o[this._indexThatRemoveDefaultFrom]=e}o.splice(i||o.length,0,n),this._modifiedValues=o}execute(){this._updatedAttrDef=this._definitionContainer.updateValues(this._pred,this._modifiedValues),Lt(`add a new value to attrribute:${this._pred}, value: ${JSON.stringify(this._value)}, index: ${this._index}, updated values: \n ${this._modifiedValues.map((e=>JSON.stringify(e))).join("\n ")}`)}revert(){return new qt(this._definitionContainer,this._updatedAttrDef,this._updatedAttrDef.values.length-1,this._indexThatRemoveDefaultFrom)}}class Ut extends zt{execute(){if(console.assert(this._subCommands,"_subCommands is necessary!"),this.isEmpty)this.revert=()=>({execute(){}});else{for(const e of this._subCommands)e.execute();this._afterInvoke&&this._afterInvoke(),this.revert=()=>({_subCommands:this._subCommands,_logMessage:this._logMessage,_afterInvoke:this._afterInvoke,execute(){for(const e of this._subCommands.map((e=>e.revert())).reverse())e.execute();this._afterInvoke&&this._afterInvoke(),Lt(`revert: ${this._logMessage}`)}}),Lt(this._logMessage)}}get kind(){return this._subCommands.reduce(((e,t)=>new Set([...e,...t.kind])),new Set)}get isEmpty(){return!this._subCommands||0===this._subCommands.length}}class Gt extends Wt{constructor(e,t,n){super(),this._definitionContainer=e,this._attrDef=t,this._changedProperties=n}execute(){const e=this._attrDef.pred,[t,n]=function(e,t){const n=e.JSON,i=new Map;for(const[o,s]of t.entries())null===s&&void 0!==e[o]?(delete n[o],i.set(o,e[o])):null!==s&&(n[o]=s,i.set(o,void 0===e[o]?null:e[o]));return[n,i]}(this._attrDef,this._changedProperties);this._revertAttrDef=this._definitionContainer.update(e,t),this._revertChangedProperties=n,Lt(`change old pred:${e} to new attridute definition:${JSON.stringify(t)}`)}revert(){return new Gt(this._definitionContainer,this._revertAttrDef,this._revertChangedProperties)}}class Kt extends Ft{constructor(e,t,n,i){super(),this._annotationData=e,this._attribute=t,this._oldPred=t.pred,this._oldObj=t.obj,this._newPred=n,this._newObj=i}execute(){this.newModel=this._annotationData.attribute.change(this._attribute.id,this._newPred,this._newObj),Lt(`atttribute: ${this._attribute.id} changed from ${this._oldPred}:${this._oldObj} to ${this._newPred}:${this._newObj}.`)}revert(){return new Kt(this._annotationData,this.newModel,this._oldPred,this._oldObj)}}class Jt extends Ut{constructor(e,t,n,i,o){super();const s=[new Gt(n,i,o)];let r=[];if(o.has("pred")){const n=t.attribute.getSameDefinitionsAttributes(i.pred);r=n.map((e=>new Kt(t,e,o.get("pred"),e.obj))),this._afterInvoke=()=>{e.eventEmitter.emit("textae-event.commander.attributes.change",n)}}this._subCommands=s.concat(r),this._logMessage=`set ${[...o.entries()].map((([e,t])=>`${e}:${t}`))} to attribute definition ${i.pred}`}}class Xt extends Ut{constructor(e,t,n,i,o,s,r=null){super();const a=[];for(const e of i){const t=e.attributes.find((e=>e.pred==o.pred&&e.obj!==s));t&&a.push(t)}this._subCommands=a.map((e=>new Kt(t,e,null,s))),a.length&&(this._afterInvoke=()=>e.eventEmitter.emit("textae-event.commander.attributes.change",a));const l=[];r&&"string"===o.valueType&&!o.values.some((e=>e.pattern===s))&&l.push(new Vt(n,o,{pattern:s,label:r})),this._subCommands=this._subCommands.concat(l),this._logMessage=`update obj ${s} to attributes: ${a.map((e=>e.id)).join(",")}`}}class Yt extends Ft{constructor(e,t,n,i,o){super(),this._editor=e,this._annotationData=t,this._annotationType=n,this._id=i,this._newType=o}execute(){this.oldType=this._annotationData[this._annotationType].get(this._id).typeName;const e=this._annotationData[this._annotationType].changeType(this._id,this._newType);Lt(`change type of a ${this._annotationType}. oldtype:${this.oldType} ${this._annotationType}:`,e)}revert(){return new Yt(this._editor,this._annotationData,this._annotationType,this._id,this.oldType)}}class Qt extends Ut{constructor(e,t,n,i,o,s){super();const r=n[i].all.filter((e=>!e.isSameType(o,s))),a=r.map((n=>new Yt(e,t,i,n.id,o))),l=function(e,t,n,i){const o=[];for(const s of e){if(s.attributes)for(const e of s.attributes){const s=t.find((t=>e.equalsTo(t.pred,t.obj)));s?String(e.obj)!==s.obj&&o.push(new Kt(n,e,s.pred,s.obj)):o.push(new Bt(i,n,"attribute",e.id))}for(const e of t)s.attributes.some((t=>t.equalsTo(e.pred,e.obj)))||o.push(new Ht(i,n,"attribute",{subj:s.id,pred:e.pred,obj:e.obj}))}return o}(r,s,t,e);this._subCommands=a.concat(l),this._logMessage=`set type ${o}${s.length>0?` and attributes ${JSON.stringify(s)}`:""} to ${i} items ${r.map((e=>e.id))}`}}class Zt extends Wt{constructor(e,t,n,i,o,s){super(),this._editor=e,this._annotationData=t,this._definitionContainer=n,this._id=i,this._changedProperties=o,this._newDefaultTypeId=s}execute(){const e=this._definitionContainer.get(this._id),[t,n]=function(e,t){const n={...t},i=new Map;for(const[o,s]of e.entries())null===s&&void 0!==t[o]?(delete n[o],i.set(o,t[o])):null!==s&&(n[o]=s,i.set(o,void 0===t[o]?null:t[o]));return[n,i]}(this._changedProperties,e);this._definitionContainer.replace(this._id,t),t.default?(this.revertDefaultTypeId=this._definitionContainer.defaultType,this._definitionContainer.defaultType=t.id):this._newDefaultTypeId&&(this._definitionContainer.defaultType=this._newDefaultTypeId),this.revertId=t.id,this.revertChangedProperties=n,Lt(`change old type:${JSON.stringify(e)} to new type:${JSON.stringify(t)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new Zt(this._editor,this._annotationData,this._definitionContainer,this.revertId,this.revertChangedProperties,this.revertDefaultTypeId)}}class en extends Wt{constructor(e,t,n,i){super(),this._editor=e,this._definitionContainer=t,this._removeType=n,this._revertDefaultTypeId=i}execute(){const{id:e}=this._removeType,t=this._definitionContainer.get(e);this._definitionContainer.delete(e),this._revertDefaultTypeId&&(this._definitionContainer.defaultType=this._revertDefaultTypeId),t&&(this._removeType=t),Lt(`remove a type:${JSON.stringify(this._removeType)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new tn(this._editor,this._definitionContainer,this._removeType)}}class tn extends Wt{constructor(e,t,n){super(),this._editor=e,this._definitionContainer=t,this._newType=n}execute(){this._newType.default&&(this._revertDefaultTypeId=this._definitionContainer.defaultType),this._definitionContainer.addDefinedType(this._newType),Lt(`create a new type:${JSON.stringify(this._newType)}, default is ${this._definitionContainer.defaultType}`)}revert(){return new en(this._editor,this._definitionContainer,this._newType,this._revertDefaultTypeId)}}function nn(e,t,n,i,o){return e.has(t)?new Zt(n,i,e,t,o,null):new tn(n,e,{id:t,...Object.fromEntries(o)})}class on extends Ut{constructor(e,t,n,i,o,s,r){super();const a=[];i&&a.push(nn(s,o,e,t,new Map([["label",i]])));const l=new Qt(e,t,n,s.annotationType,o,r);l.isEmpty||a.push(l),this._subCommands=a,this._logMessage=`change ${s.annotationType} value:"${o}"${i?`, label:"${i}"`:""}${r.length>0?`, attributes:${JSON.stringify(r)}`:""}`}}class sn extends Ut{constructor(e,t,n,i,o,s){super();const r=[nn(n,o,e,t,s)];let a=[];s.has("id")&&(a=function(e,t,n,i,o){return e[t].all.filter((e=>e.typeName===n)).map((n=>new Yt(i,e,t,n.id,o)))}(t,i,o,e,s.get("id"))),this._subCommands=r.concat(a),this._logMessage=`set ${[...s.entries()].map((([e,t])=>`${e}:${t}`))} to type definition ${o}`}}class rn extends Ut{constructor(e,t,n,i,o){super();const s=n[i].all.filter((e=>!e.isSameType(o)));this._subCommands=s.map((n=>new Yt(e,t,i,n.id,o))),this._logMessage=`set type ${o} to ${i} items ${s}`}}class an extends Wt{constructor(e,t,n,i,o){super(),this._definitionContainer=e,this._attrDef=t,this._targetIndex=n,this._newValue=i,this._indexThatRemoveDefaultFrom=o}execute(){if("selection"===this._attrDef["value type"]&&(!this._attrDef.values[this._targetIndex].default&&this._newValue.default&&(this._indexThatRemoveDefaultFrom||(this._indexThatRemoveDefaultFrom=this._attrDef.values.findIndex((e=>e.default))),delete this._attrDef.values[this._indexThatRemoveDefaultFrom].default),this._attrDef.values[this._targetIndex].default&&!this._newValue.default))if(1===this._attrDef.values.length)this._newValue.default=!0;else if(this._indexThatRemoveDefaultFrom)this._attrDef.values[this._indexThatRemoveDefaultFrom].default=!0;else{let e=null;this._attrDef.values.forEach(((t,n)=>{null===e&&n!=this._targetIndex&&(e=n)})),this._attrDef.values[e].default=!0,this._indexThatRemoveDefaultFrom=e}this._valueBeforeChange=this._attrDef.values.splice(this._targetIndex,1,this._newValue)[0],this._definitionContainer.update(this._attrDef.pred,this._attrDef),Lt(`change value of attrribute:${this._attrDef.pred}, oldValue: ${JSON.stringify(this._valueBeforeChange)}, newValue: ${JSON.stringify(this._newValue)}`)}revert(){return new an(this._definitionContainer,this._attrDef,this._targetIndex,this._valueBeforeChange,this._indexThatRemoveDefaultFrom)}}class ln extends Ut{constructor(e,t,n,i,o,s,r){if(super(),this._subCommands=[new an(n,i,o,s,r)],"selection"===i["value type"]&&i.values[o].id!==s.id){const n=t.attribute.getSameAttributes(i.pred,i.values[o].id),r=n.map((e=>new Kt(t,e,null,s.id)));this._subCommands=this._subCommands.concat(r),this._afterInvoke=()=>e.eventEmitter.emit("textae-event.commander.attributes.change",n)}this._logMessage="change attribute definition."}}class cn extends Wt{constructor(e,t){super(),this._definitionContainer=e,this._removeAttrdef=t,this._index=e.getIndexOf(t.pred)}execute(){this._definitionContainer.delete(this._removeAttrdef.pred),Lt(`remove an attrribute definition:${JSON.stringify(this._removeAttrdef)}, index:${this._index}`)}revert(){return new un(this._definitionContainer,this._removeAttrdef,this._index)}}class un extends Wt{constructor(e,t,n){super(),this._definitionContainer=e,this._newAttrDef=t,this._index=n}execute(){"selection"!==this._newAttrDef.valueType||this._newAttrDef.values||(this._newAttrDef.values=[{id:"default",default:!0}]),this._definitionContainer.create(this._newAttrDef.valueType,this._newAttrDef,this._index),Lt(`create a new attrribute definition:${JSON.stringify(this._newAttrDef)}, index: ${this._index}`)}revert(){return new cn(this._definitionContainer,this._newAttrDef)}}function dn(e,t,n,i,o){return n.filter((e=>!e.hasSpecificPredicateAttribute(i))).map((({id:n})=>new Ht(e,t,"attribute",{id:null,subj:n,pred:i,obj:o})))}class hn extends Ut{constructor(e,t,n,i,o){super(),this._subCommands=dn(e,t,n,i.pred,o||i.default),this._logMessage=`create attirbute ${i.pred}:${i.default} to item ${n.map((({id:e})=>e)).join(", ")}`}}class pn extends Ht{constructor(e,t,n,i){super(e,t,"attribute",{obj:n,pred:i})}execute(){const e=this._annotationData.entity.all.pop().id;return this._newModel.subj=e,super.execute()}}class fn extends Ut{constructor(e,t,n,i,o,s){super(),this._subCommands=[new Ht(e,t,"entity",{span:i,typeName:o},n)].concat(s.map((({obj:n,pred:i})=>new pn(e,t,n,i)))),this._logMessage=`create a type for span: ${i}`}}class mn extends Ut{constructor(e,t,n,i,o,s){super();const r=L(e,i,o),a=new Ht(e,t,"span",{begin:i,end:o,isBlock:!0},n),l=new fn(e,t,n,r,s,[]);this._subCommands=[a,l],this._logMessage=`create a span ${r}`}}class gn extends Ut{constructor(e,t,n,i){super();const o=n.span.all.filter((e=>e.isDenotation)).map((e=>e.id));this._subCommands=o.map((o=>new Ht(e,t,"entity",{span:o,typeName:i},n))),this._logMessage=`create a ${i} type entity to ${o}`}}class _n extends Ut{constructor(e,t,n,i,o,s,r){super(),this._subCommands=[new Ht(e,t,"span",{begin:o,end:s},n)].concat(r.map((o=>new fn(e,t,n,i,o.typeName,o.attributes)))),this._logMessage=`create a span ${i}`}}class vn extends Ut{constructor(e,t,n,i,o,s){super(),this._subCommands=t.getReplicationRanges(i,s).map((({begin:i,end:s})=>{const r=R(e,i,s);return new _n(e,t,n,r,i,s,o)})),this._logMessage=`replicate a span ${R(e,i.begin,i.end)}`}}class yn extends Ut{constructor(e,t,n,i,o,s,r){super();const a=[new Ne(o)],l=R(e,i.begin,i.end);this._subCommands=[new _n(e,t,n,l,i.begin,i.end,a)],this._logMessage=`create a span ${i.begin}:${i.end} with type ${a[0].typeName}`,s&&i.end-i.begin<=100&&(this._subCommands.push(new vn(e,t,n,{begin:i.begin,end:i.end},a,r)),this._logMessage=`${this._logMessage} and replicate auto`)}}class bn extends Wt{constructor(e,t,n){super(),this._definitionContainer=e,this._oldIndex=t,this._newIndex=n}execute(){this._definitionContainer.move(this._oldIndex,this._newIndex),Lt(`move the attrribute definition: from ${this._oldIndex} to ${this._newIndex}`)}revert(){return new bn(this._definitionContainer,this._newIndex,this._oldIndex)}}class xn extends Ft{constructor(e,t,n,i){super(),this._annotationData=e,this._spanId=t,this._begin=n,this._end=i}execute(){const{id:e,begin:t,end:n}=this._annotationData.span.moveBlockSpan(this._spanId,this._begin,this._end);this._newId=e,this._oldBegin=t,this._oldEnd=n,Lt(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new xn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}class wn extends Ft{constructor(e,t,n,i){super(),this._annotationData=e,this._spanId=t,this._begin=n,this._end=i}execute(){const{id:e,begin:t,end:n}=this._annotationData.span.moveDenotationSpan(this._spanId,this._begin,this._end);this._newId=e,this._oldBegin=t,this._oldEnd=n,Lt(`move span: ${this._spanId} to {begin: ${this._begin}, end: ${this._end}}`)}revert(){return new wn(this._annotationData,this._newId,this._oldBegin,this._oldEnd)}}function kn(e,t){return e.entities.every((e=>t.includes(e)))}class Cn extends Ut{constructor(e,t){super(),this._subCommands=[];for(const[n,i]of t.entries())this._subCommands.push(new $n(e,n,i));this._logMessage=`revert: move entities ${Array.from(t.values()).flat().map((e=>e.id)).join(", ")}`}}class $n extends Ft{constructor(e,t,n){super(),this._annotationData=e,this._span=t,this._entities=n}execute(){this._moveMap=this._entities.reduce(((e,t)=>(e.has(t.span)?e.get(t.span).push(t):e.set(t.span,[t]),e)),new Map);const e=`move entities: ${Array.from(this._moveMap.entries()).map((([e,t])=>`${t.map((e=>e.id)).join(", ")} from ${t[0].span.id} to ${this._span.id}`)).join(", ")}`;this._annotationData.entity.moveEntities(this._span,this._entities),Lt(e)}revert(){return new Cn(this._annotationData,this._moveMap)}}class Sn extends Ut{constructor(e,t,n,i){console.assert(n.span.single,"There must be one span to be pasted."),super();const o=[new $n(t,n.span.single,i)];for(const n of i.map((e=>e.span)).reduce(((e,t)=>(e.add(t),e)),new Set).values())kn(n,i)&&o.push(new Bt(e,t,"span",n.id));this._subCommands=o,this._logMessage="paste cut entities"}}class En extends Ut{constructor(e,t,n,i){super();const o=n.span.all.map((e=>e.id));this._subCommands=o.map((o=>i.map((i=>new fn(e,t,n,o,i.typeName,i.attributes))))).flat(),this._logMessage=`paste types [${i.map((({typeName:e,attributes:t})=>[`{type:${e}}`].concat(t.map((({pred:e,obj:t})=>`{${e}:${t}}`)))))}] to ${o}`}}function Tn(e,t,n,i){return n.reduce(((e,{attributes:t})=>e.concat(t)),[]).filter((e=>e.pred===i)).map((n=>new Bt(e,t,"attribute",n.id)))}class Dn extends Ut{constructor(e,t,n,i){super();const o=Tn(e,t,n,i.pred);this._subCommands=o,this._logMessage=`remove ${i.pred} attribute from items ${n.map((e=>e.id)).join(", ")}`}}class An extends Ut{constructor(e,t,n){super();const i=new Bt(e,t,"entity",n);const o=t.entity.get(n).relations.map((n=>new Bt(e,t,"relation",n.id))),s=t.entity.get(n).attributes.map((n=>new Bt(e,t,"attribute",n.id)));this._subCommands=o.concat(s).concat(i),this._logMessage=`remove an entity ${n}`}}class Nn extends Ut{constructor(e,t,n){super();const i=t.span.get(n).entities.map((({id:n})=>new An(e,t,n))),o=new Bt(e,t,"span",n);this._subCommands=i.concat(o),this._logMessage=`remove a span ${n}`}}function On(e,t){return e.filter((e=>e.span===t))}class Pn extends Ut{constructor(e,t,n){super();const i=n.entity.all,o=new Set(i.map((e=>e.span)));let s=[];for(const n of o.values())kn(n,i)?s.push(new Nn(e,t,n.id)):s=s.concat(On(i,n).map((n=>new An(e,t,n.id))));this._subCommands=s,this._logMessage=`remove entities ${i.map((e=>e.id))} from spans ${[...o.values()].map((e=>e.id))}`}}class jn extends Ut{constructor(e,t,n){super();const i=n.span.all.map((e=>e.id)),o=n.relation.all.map((e=>e.id));this._subCommands=[].concat(o.map((n=>new Bt(e,t,"relation",n))),n.entity.some?[new Pn(e,t,n)]:[],i.map((n=>new Nn(e,t,n)))),this._logMessage=`remove selected ${i.concat(n.entity.all.map((e=>e.id))).concat(o)}`}}class Mn extends Ut{constructor(e,t,n,i){super(),this._subCommands=dn(e,t,n,i.pred,i.default);const o=Tn(e,t,n,i.pred);this._subCommands=this._subCommands.concat(o),this._logMessage=`toggle flag attirbute ${i.pred} to item ${n.map((({id:e})=>e)).join(", ")}`}}class In{constructor(e,t,n){this._editor=e,this._annotationData=t,this._selectionModel=n}addValueToAttributeDefinitionCommand(e,t){return new Vt(this._annotationData.typeDefinition.attribute,e,t)}changeAttributeDefinitionCommand(e,t){return new Jt(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t)}changeAttributesOfItemsWithSamePred(e,t,n,i){return new Xt(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t,n,i)}changeItemTypeCommand(e,t,n,i){return new on(this._editor,this._annotationData,this._selectionModel,e,t,n,i)}changeTypeDefinitionCommand(e,t,n,i){return new sn(this._editor,this._annotationData,e,t,n,i)}changeTypeOfSelectedItemsCommand(e,t){return new rn(this._editor,this._annotationData,this._selectionModel,e,t)}changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(e,t,n){return new ln(this._editor,this._annotationData,this._annotationData.typeDefinition.attribute,e,t,n)}createAttributeDefinitionCommand(e){return new un(this._annotationData.typeDefinition.attribute,e)}createAttributeToItemsCommand(e,t,n=null){return new hn(this._editor,this._annotationData,e,t,n)}createBlockSpanCommand(e){return new mn(this._editor,this._annotationData,this._selectionModel,e.begin,e.end,this._annotationData.typeDefinition.block.defaultType)}createDefaultTypeEntityToSelectedSpansCommand(e){return new gn(this._editor,this._annotationData,this._selectionModel,e)}createRelationCommand(e){return new Ht(this._editor,this._annotationData,"relation",e,this._selectionModel)}createSpanAndAutoReplicateCommand(e,t,n){return new yn(this._editor,this._annotationData,this._selectionModel,e,this._annotationData.typeDefinition.denotation.defaultType,t,n)}createTypeDefinitionCommand(e,t){return new tn(this._editor,e,t)}deleteAttributeDefinitionCommand(e){return new cn(this._annotationData.typeDefinition.attribute,e)}moveAttributeDefintionComannd(e,t){return new bn(this._annotationData.typeDefinition.attribute,e,t)}moveBlockSpanCommand(e,t,n){return new xn(this._annotationData,e,t,n)}moveDenotationSpanCommand(e,t,n){return new wn(this._annotationData,e,t,n)}moveEntitiesToSelectedSpansCommand(e){return new Sn(this._editor,this._annotationData,this._selectionModel,e)}pasteTypesToSelectedSpansCommand(e){return new En(this._editor,this._annotationData,this._selectionModel,e)}replicateSpanCommand(e,t,n){return new vn(this._editor,this._annotationData,this._selectionModel,e,t,n)}removeAttributesFromItemsByPredCommand(e,t){return new Dn(this._editor,this._annotationData,e,t)}removeSpanCommand(e){return new Nn(this._editor,this._annotationData,e)}removeSelectedComand(){return new jn(this._editor,this._annotationData,this._selectionModel)}removeTypeDefinitionCommand(e,t){return new en(this._editor,e,t)}removeValueFromAttributeDefinitionCommand(e,t){return new qt(this._annotationData.typeDefinition.attribute,e,t)}toggleFlagAttributeToItemsCommand(e,t){return new Mn(this._editor,this._annotationData,e,t)}}class Rn{constructor(e,t,n,i){this._editor=e,this._annotationData=t,this._selectionModel=n,this._history=i}invoke(e){e.isEmpty||(e.execute(),this._history.push(e))}undo(){if(this._history.hasAnythingToUndo){this._selectionModel.removeAll(),this._editor.focus();const e=this._history.prev();e.kind.has("configuration_command")&&Mt().success("configuration has been undone"),e.revert().execute()}}redo(){if(this._history.hasAnythingToRedo){this._selectionModel.removeAll();const e=this._history.next();e.kind.has("configuration_command")&&Mt().success("configuration has been redo"),e.execute()}}get factory(){return new In(this._editor,this._annotationData,this._selectionModel,this._annotationData.typeDefinition)}}var Ln=n(9438),zn=n.n(Ln);class Fn{constructor(e,t,n){this._editor=e,this._annotationData=t,this._renderer=n}async update(){this._editor.eventEmitter.emit("textae-event.annotation-position.position-update.start"),this._annotationData.span.arrangeDenotationEntityPosition(),this._annotationData.span.arrangeBackgroundOfBlockSpanPosition(),this._annotationData.span.arrangeBlockEntityPosition(),this._renderer.arrangeRelationPositionAll(),this._editor.eventEmitter.emit("textae-event.annotation-position.position-update.end")}}const Hn="ui-to-be-cut";class Bn{constructor(e){this._annotationData=e}render(e){if(e.element)return;const t=e.span.gridElement||e.span.renderGridElement(),n=e.renderElement();t.insertAdjacentElement("beforeend",n),e.reflectEntityGapInTheHeight()}remove(e){0===e.span.entities.length?e.span.destroyGridElement():e.destroyElement()}updateEntityHtmlelement(e){for(const t of this._annotationData.entity.all)(t.typeName===e||e.lastIndexOf("*")===e.length-1&&t.typeName.indexOf(0===e.slice(0,-1)))&&t.updateElement()}updateAttribute(e){for(const t of this._annotationData.entity.all.filter((t=>t.hasSpecificPredicateAttribute(e))))t.updateElement()}updateEntityHtmlelementAll(){for(const e of this._annotationData.entity.all)e.updateElement()}}class Wn{constructor(e,t){this._editor=e,this._entityRenderer=t}render(e){e.traverse((e=>{null!==e.element&&e.destroyElement()})),e.traverse((e=>e.renderElement()),(e=>{for(const t of e.entities)this._entityRenderer.render(t)}))}remove(e){if(e.hasStyle){const t=e.element;t.removeAttribute("tabindex"),t.classList.remove("textae-editor__span")}else e.destroyElement()}}class qn{constructor(e,t){this._annotationData=t;const n=new Bn(t);!function(e,t,n){const i=new Wn(t,n);t.eventEmitter.on("textae-event.annotation-data.all.change",(()=>{V(t).innerHTML="";for(const t of e.span.topLevel)i.render(t);for(const t of e.relation.all)t.renderElement()})).on("textae-event.annotation-data.span.add",(e=>i.render(e))).on("textae-event.annotation-data.span.remove",(e=>{i.remove(e),e.destroyGridElement()})).on("textae-event.annotation-data.entity.add",(e=>{n.render(e)})).on("textae-event.annotation-data.entity.remove",(e=>{n.remove(e)})).on("textae-event.annotation-data.entity.move",(e=>{for(const t of e)n.remove(t),n.render(t)})).on("textae-event.commander.attributes.change",(e=>{for(const t of e.reduce(((e,t)=>e.add(t.subjectModel)),new Set))t.updateElement()}))}(t,e,n),e.eventEmitter.on("textae-event.type-definition.entity.change",(e=>n.updateEntityHtmlelement(e))).on("textae-event.type-definition.attribute.change",(e=>n.updateAttribute(e))).on("textae-event.type-definition.attribute.move",(e=>n.updateAttribute(e))).on("textae-event.type-definition.relation.change",(e=>{for(const t of this._annotationData.relation.all)(t.typeName===e||e.lastIndexOf("*")===e.length-1&&t.typeName.indexOf(0===e.slice(0,-1)))&&t.updateElement()})),this._editor=e,this._annotationData=t}arrangeRelationPositionAll(){for(const e of this._annotationData.relation.all)e.updateElement()}}var Vn=n(296),Un=n.n(Vn);class Gn{constructor(e,t){this._textBox=t,this._enable=!1,e.eventEmitter.on("textae-event.control.button.push",(({buttonName:e,state:t})=>{"line-height-auto"===e&&(this._enable=t)}))}updateLineHeight(){this._enable&&this._textBox.updateLineHeight()}}function Kn(e){return e.closest(".textae-editor__entity")}class Jn{constructor(e,t){const n=new qn(e,t);this._annotationPosition=new Fn(e,t,n),this._annotationData=t,t.entityGap.bind((()=>this._applyEntityGap())),function(e){e.eventEmitter.on("textae-event.clip-board.change",((e,t)=>{for(const t of e)t.element&&t.element.classList.add(Hn);for(const e of t)e.element&&e.element.classList.remove(Hn)}))}(e),function(e,t,n){const i=new Gn(e,n),o=Un()((()=>{i.updateLineHeight(),t.update()}),100);e.eventEmitter.on("textae-event.annotation-data.all.change",o).on("textae-event.annotation-data.entity.add",o).on("textae-event.annotation-data.entity.change",o).on("textae-event.annotation-data.entity.remove",o).on("textae-event.annotation-data.entity.move",o).on("textae-event.annotation-data.relation.add",o).on("textae-event.annotation-data.attribute.add",o).on("textae-event.annotation-data.attribute.change",o).on("textae-event.annotation-data.attribute.remove",o).on("textae-event.annotation-data.span.move",(()=>{t.update()}))}(e,this._annotationPosition,this._annotationData.textBox),function(e,t){e.eventEmitter.on("textae-event.annotation-position.position-update.start",(()=>t.startWait())).on("textae-event.annotation-position.position-update.end",(()=>t.endWait()))}(e,new C(e));const i=e[0];zn()(i,".textae-editor__entity__type-values","mouseover",(e=>{const n=Kn(e.target).title;t.entity.get(n).pointUpRelations()})),zn()(i,".textae-editor__entity__type-values","mouseout",(e=>{const n=Kn(e.target).title;t.entity.get(n).pointDownRelations()}))}updateDisplay(){this._annotationData.textBox.forceUpdate(),this._annotationPosition.update()}updateLineHeight(){this._annotationData.textBox.updateLineHeight(),this._annotationPosition.update()}_applyEntityGap(){for(const e of this._annotationData.entity.denotations)e.reflectEntityGapInTheHeight();this.updateLineHeight()}}const Xn="Init",Yn="View Term",Qn="View Instance",Zn="Term Centric",ei="Instance / Relation",ti="Block Centric",ni="Block / Relation",ii="Relation Edit";var oi=n(4676),si=n.n(oi);function ri(e){return!e.relation.some}function ai(e,t){switch(e.currentState){case ii:!function(e,t){ri(t)?e.setState(Zn):e.setState(ei)}(e,t);break;case Qn:case ni:e.setState(ei);break;case Yn:case ti:e.setState(Zn)}}function li(e){return`enter:${e}`}class ci{constructor(e){this._editor=e}setViewWithRelation(){this._setCssClassFor("view-with-relation")}setViewWithoutRelation(){this._setCssClassFor("view-without-relation")}setDenotationWithRelation(){this._setCssClassFor("denotation-with-relation")}setDenotationWithoutRelation(){this._setCssClassFor("denotation-without-relation")}setBlockWithRelation(){this._setCssClassFor("block-with-relation")}setBlockWithoutRelation(){this._setCssClassFor("block-without-relation")}setRelation(){this._setCssClassFor("relation")}_setCssClassFor(e){for(const e of this._editor.classList)e.startsWith("textae-editor__mode")&&this._editor.classList.remove(e);this._editor.classList.add(`textae-editor__mode--${e}`)}}class ui{constructor(e,t,n,i,o,s){this._editor=e,this._editorCSSClassForMode=new ci(e[0]),this._entityGap=t,this._noEdit=n,this._editEntity=i,this._editBlock=o,this._editRelation=s}toViewWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Yn),this._noEdit(),this._editorCSSClassForMode.setViewWithoutRelation()}toViewWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Qn),this._noEdit(),this._editorCSSClassForMode.setViewWithRelation()}toEditDenotationWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",Zn),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithoutRelation()}toEditDenotationWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ei),this._noEdit(),this._editEntity(),this._editorCSSClassForMode.setDenotationWithRelation()}toEditBlockWithoutRelation(){this._entityGap.show=!1,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ti),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithoutRelation()}toEditBlockWithRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ni),this._noEdit(),this._editBlock(),this._editorCSSClassForMode.setBlockWithRelation()}toEditRelation(){this._entityGap.show=!0,this._editor.eventEmitter.emit("textae-event.edit-mode.transition",ii),this._noEdit(),this._editRelation(),this._editorCSSClassForMode.setRelation()}}class di{constructor(e,t,n,i,o,s){const r=new(si())({states:[Xn,Zn,ei,ti,ni,ii,Yn,Qn]});r.config(Xn,{to:{exclude:[ii]}}),r.config(Zn,{from:{exclude:[Qn]},to:{exclude:[Xn,Qn]}}),r.config(ei,{from:{exclude:[Yn]},to:{exclude:[Xn,Yn]}}),r.config(ti,{from:{exclude:[Qn]},to:{exclude:[Xn,Qn]}}),r.config(ni,{from:{exclude:[Yn]},to:{exclude:[Xn,Yn]}}),r.config(ii,{from:{exclude:[Xn]},to:{exclude:[Xn,Yn]}}),r.config(Yn,{from:{exclude:[ei,ii]},to:{exclude:[Xn,ei]}}),r.config(Qn,{from:{exclude:[Zn]},to:{exclude:[Xn,Zn]}});!function(e,t){e.on(li(Zn),(()=>t.toEditDenotationWithoutRelation())).on(li(ei),(()=>t.toEditDenotationWithRelation())).on(li(ti),(()=>t.toEditBlockWithoutRelation())).on(li(ni),(()=>t.toEditBlockWithRelation())).on(li(ii),(()=>t.toEditRelation())).on(li(Yn),(()=>t.toViewWithoutRelation())).on(li(Qn),(()=>t.toViewWithRelation()))}(r,new ui(e,t,n,i,o,s)),this._m=r}get currentState(){return this._m.currentState}setState(e){this._m.setState(e)}pushView(){!function(e){switch(e.currentState){case Zn:case ti:e.setState(Yn);break;case ei:case ni:case ii:e.setState(Qn)}}(this)}pushTerm(e){ai(this,e)}pushBlock(e){!function(e,t){switch(e.currentState){case Zn:e.setState(ti);break;case ei:e.setState(ni);break;case ii:ri(t)?e.setState(ti):e.setState(ni);break;case Qn:e.setState(ni);break;case Yn:e.setState(ti)}}(this,e)}toggleSimple(){!function(e){switch(e.currentState){case Zn:e.setState(ei);break;case ti:e.setState(ni);break;case Yn:e.setState(Qn);break;case ei:e.setState(Zn);break;case ni:e.setState(ti);break;case Qn:e.setState(Yn);break;default:throw new Error(`Invalid state: ${e.currentState}`)}}(this)}changeByShortcut(){!function(e){switch(e.currentState){case Qn:e.setState(ei);break;case Yn:e.setState(Zn);break;case Zn:e.setState(ti);break;case ei:e.setState(ni);break;case ti:case ni:e.setState(ii);break;case ii:e.setState(Qn)}}(this)}}class hi extends s{constructor(e,t,n,i){super(e,t,"OK",n),this._promise=new Promise((e=>{const t=()=>{const t=i();t&&e(t),super.close()};this._option.buttons[0].click=t,zn()(super.el,".textae-editor__promise-daialog__observable-element","keyup",(e=>{13===e.keyCode&&t()}))}))}open(){return super.open(),this._promise}}function pi(e,t){return e.querySelector(`${t} input`)&&e.querySelector(`${t} input`).value}function fi(e,t){const{pred:n,default:i,label:o,color:s,min:r,max:a,step:l,valueType:c}=t,u="flag"===c,d="numeric"===c;return`\n    <div class="${e}__row">\n      <div class="${e}__pred textae-editor__promise-daialog__observable-element">\n        <label>Predicate:</label><br>\n        <input value="${n||""}">\n      </div>\n      ${"numeric"===c||"string"===c?`${function(e,t){return`\n    <div class="${e}__default-value">\n      <label>Default:</label><br>\n      <input value="${t||""}">\n    </div>\n  `}(e,i)}`:""}\n    </div>\n    ${u?`${function(e,t,n){return`\n    <div class="${e}__row">\n      <div class="${e}__label">\n        <label>Label:</label><br>\n        <input type="text" value="${t||""}">\n      </div>\n    </div>\n    <div class="${e}__row">\n      <div class="${e}__color">\n        <label>Color:</label><br>\n        <input type="text" value="${n||""}">\n      </div>\n    </div>\n  `}(e,o,s)}`:""}\n    ${d?`${function(e,t,n,i){return`\n    <div class="${e}__row">\n      <div class="${e}__min">\n        <label>Min:</label><br>\n        <input type="text" value="${t||0}">\n      </div>\n      <div class="${e}__max">\n        <label>Max:</label><br>\n        <input type="text" value="${n||0}">\n      </div>\n      <div class="${e}__step">\n        <label>Step:</label><br>\n        <input type="text" value="${i||0}">\n      </div>\n    </div>\n  `}(e,r,a,l)}`:""}\n  `}function mi(e,t){const{valueType:n}=t;return`\n<div class="${e}__container">\n  <div class="${e}__row">\n    <label>Attribute type:</label>\n    <select class="${e}__value-type">\n      <option value="flag"${"flag"===n?" selected":""}>\n        flag\n        </option>\n      <option value="selection"${"selection"===n?" selected":""}>\n        selection\n      </option>\n      <option value="string"${"string"===n?" selected":""}>\n        string\n      </option>\n      <option value="numeric"${"numeric"===n?" selected":""}>\n        numeric\n      </option>\n    </select>\n  </div>\n  ${fi(e,t)}\n</div>`}const gi="textae-editor__create-attribute-definition-dialog";class _i extends hi{constructor(){super("Please enter new attribute definition",mi(gi,{valueType:"flag"}),{},(()=>{const e=this._state;return"numeric"===e.valueType?{...e,default:parseFloat(e.default)||0,min:parseFloat(e.min)||0,max:parseFloat(e.max)||0,step:parseFloat(e.step)||0}:e})),zn()(super.el,`.${gi}__value-type`,"change",(()=>{const e=mi(gi,this._state);super.el.closest(".ui-dialog-content").innerHTML=e}))}get _state(){const e=super.el.querySelector(`.${gi}__value-type`).value;return{pred:pi(super.el,`.${gi}__pred`),label:pi(super.el,`.${gi}__label`),color:pi(super.el,`.${gi}__color`),default:pi(super.el,`.${gi}__default-value`),min:pi(super.el,`.${gi}__min`),max:pi(super.el,`.${gi}__max`),step:pi(super.el,`.${gi}__step`),valueType:e}}}function vi(e,t){return!Number.isNaN(parseFloat(t))&&e!==parseFloat(t)}const yi="textae-editor__edit-attribute-definition-dialog";class bi extends hi{constructor(e){super("Please enter new values",function(e,t){return`\n<div class="${e}__container">\n  ${fi(e,t)}\n</div>`}(yi,e),{},(()=>{const t=pi(super.el,".textae-editor__edit-attribute-definition-dialog__pred"),n=pi(super.el,".textae-editor__edit-attribute-definition-dialog__default-value"),i=new Map;if(e.pred!==t&&i.set("pred",t),"flag"===e.valueType){const t=pi(super.el,".textae-editor__edit-attribute-definition-dialog__label"),n=pi(super.el,".textae-editor__edit-attribute-definition-dialog__color");e.label!==t&&i.set("label",t),e.color!==n&&i.set("color",n)}if("string"===e.valueType&&e.default!==n&&i.set("default",n),"numeric"===e.valueType){vi(e.default,n)&&i.set("default",parseFloat(n));const t=pi(super.el,".textae-editor__edit-attribute-definition-dialog__min"),o=pi(super.el,".textae-editor__edit-attribute-definition-dialog__max"),s=pi(super.el,".textae-editor__edit-attribute-definition-dialog__step");vi(e.min,t)&&i.set("min",parseFloat(t)),vi(e.max,o)&&i.set("max",parseFloat(o)),vi(e.step,s)&&i.set("step",parseFloat(s))}return i}))}}function xi(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}class wi extends hi{constructor(e,t={}){const n={label:t.label,color:t.color};switch(e){case"numeric":n.labelForRangeOrIdOrPattern="range",n.rangeOrIdOrPattern=t.range;break;case"selection":n.labelForRangeOrIdOrPattern="id",n.rangeOrIdOrPattern=t.id,n.showDefault=!0,n.default=t.default;break;case"string":n.labelForRangeOrIdOrPattern="pattern",n.rangeOrIdOrPattern=t.pattern;break;default:throw new Error(`${e} is Uknown Attribute`)}super("Please enter new values",function(e){const{labelForRangeOrIdOrPattern:t,rangeOrIdOrPattern:n,showDefault:i,default:o,label:s,color:r}=e;return`\n<div class="textae-editor__add-value-to-attribute-dialog__container">\n  <div class="textae-editor__add-value-to-attribute-dialog__row">\n    <div class="textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern textae-editor__promise-daialog__observable-element">\n      <label>${t}:</label><br>\n      <input value="${n||""}">\n    </div>\n    ${function(e,t){return e?`\n    <div class="textae-editor__add-value-to-attribute-dialog__default">\n      <label>default:</label><br>\n      <input type="checkbox" ${t?'checked="checked"':""}>\n    </div>\n    `:""}(i,o)}\n    <div class="textae-editor__add-value-to-attribute-dialog__label">\n      <label>label:</label><br>\n      <input value="${s||""}">\n    </div>\n    <div class="textae-editor__add-value-to-attribute-dialog__color">\n      <label>color:</label><br>\n      <input value="${r||""}">\n    </div>\n  </div>\n</div>`}(n),{},(()=>{const t=pi(super.el,".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern"),n=pi(super.el,".textae-editor__add-value-to-attribute-dialog__label"),i=pi(super.el,".textae-editor__add-value-to-attribute-dialog__color"),o={};switch(n&&(o.label=n),i&&(o.color=i),e){case"numeric":o.range=t;break;case"selection":o.id=t,super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__default input").checked&&(o.default=!0);break;case"string":o.pattern=t}return o})),"numeric"===e&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(e=>{const{value:t}=e.target;try{new xt(t),xi(super.button,!0)}catch(e){xi(super.button,!1)}})),"string"===e&&super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__range_or_id_or_pattern").addEventListener("input",(e=>{const{value:t}=e.target;try{new RegExp(t),xi(super.button,!0)}catch(e){xi(super.button,!1)}})),super.el.querySelector(".textae-editor__add-value-to-attribute-dialog__color").addEventListener("input",(e=>{const{value:t}=e.target;xi(super.button,!t||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t))}))}}class ki extends hi{constructor(e,t){super("Please edit number",function(e){const{pred:t,min:n,max:i,step:o,value:s}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="${t}" \n      disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__promise-daialog__observable-element" \n      type="number" \n      min="${n}" \n      max="${i}" \n      step="${o}" \n      value="${s}">\n  </div>\n</div>`}({pred:t.pred,value:t.obj,min:e.min,max:e.max,step:e.step}),{},(()=>{const e=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value");return{newObj:parseFloat(e.value)}}))}}function Ci(e,t,n,i){new ki(t,n).open().then((({newObj:n})=>{const o=i.factory.changeAttributesOfItemsWithSamePred(e.all,t,n);i.invoke(o)}))}function $i(e,t,n,i){if(!e)return void i(t);const o=new XMLHttpRequest,s=new URL(e,location);s.searchParams.append("term",n),o.open("GET",s.href,!0),o.onload=()=>{if(o.status>=200&&o.status<400){const e=JSON.parse(o.response).filter((e=>!t.some((t=>e.id===t.id))));i(t.concat(e))}},o.send()}n(2993);function Si(){t().ui.autocomplete.prototype._renderItem=(e,{id:n,label:i})=>{const o=t()(Pe()`
      <li>
        <div>
          ${i} 
          <i class="fa fa-globe"></i>
          ${n}
        </div>
      </li>`);return e.append(o),o},t().ui.autocomplete.prototype._resizeMenu=()=>{}}function Ei(e,n,i,o){t()(e).autocomplete({source:(e,t)=>{n&&(n.innerText=""),$i(i,o(e.term),e.term,t)},minLength:3,select:(t,{item:i})=>(e.value=i.id,n&&(n.innerText=i.label),!1)})}Si();class Ti extends hi{constructor(e,t){super("Please edit string",function(e){const{pred:t,value:n}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="${t}" disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Object:</label><span></span><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__edit-value-and-pred-dialog--value" \n      value="${n}">\n  </div>\n</div>`}({pred:e.pred,value:e.obj}),{height:250},(()=>({newObj:super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value").value,newLabel:super.el.querySelector("span").innerText}))),Ei(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector("span"),t.autocompletionWs,(()=>[]))}}function Di(e,t,n,i){new Ti(t,i).open().then((({newObj:t,newLabel:o})=>{t?n.invoke(n.factory.changeAttributesOfItemsWithSamePred(e.all,i,t,o)):n.invoke(n.factory.removeAttributesFromItemsByPredCommand(e.all,i))}))}function Ai(e){const t=e.querySelector(".textae-editor__edit-type-dialog__type__value__value").value,n=e.querySelector(".textae-editor__edit-type-dialog__type__label__value").innerText,i=[];for(const t of e.querySelectorAll(".textae-editor__edit-type-dialog__attribute"))i.push({pred:t.querySelector(".textae-editor__edit-type-dialog__attribute__predicate__value").dataset.pred,obj:t.querySelector(".textae-editor__edit-type-dialog__attribute__value__value").innerText});return{typeName:t,label:n,attributes:i}}var Ni=n(8686),Oi=n.n(Ni);function Pi(e,t,n,i){return`\n    <div style="overflow-y: auto; max-height: 25em; overflow-x: hidden;">\n      <table class="textae-editor__edit-type-dialog__table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Predicate</th>\n            <th>Value</th>\n            <th>Label</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          ${function(e,t){return`\n    <tr>\n      <td></td>\n      <td>\n        <span class="textae-editor__edit-type-dialog__type__predicate__value">type</span>\n      </td>\n      <td class="ui-front">\n        <input class="textae-editor__edit-type-dialog__type__value__value textae-editor__promise-daialog__observable-element" value="${e}">\n      </td>\n      <td>\n        <span class="textae-editor__edit-type-dialog__type__label__value">${Oi()(t.getLabel(e))||""}</span>\n      </td>\n    </tr>\n  `}(e,n)}\n          ${t.map(((e,t,n)=>function(e,t,n,i){const{pred:o,obj:s}=e,r=n[t-1],a=r&&r.pred,l=i.getIndexOf(o),c=i.getLabel(o,s)||"",{valueType:u}=i.get(o);return`\n<tr class="textae-editor__edit-type-dialog__attribute">\n  ${o===a?"<td></td>":`<td>\n          ${l<9?`<span class="textae-editor__edit-type-dialog__shortcut-key" title="Shotcut key for this predicate">${l+1}</span>`:""}\n        </td>\n        `}\n  <td>\n    <span\n      class="textae-editor__edit-type-dialog__attribute__predicate__value ${o===a?"":`textae-editor__edit-type-dialog__attribute__predicate__value--${u}`}"\n      data-pred="${o}">\n      ${o===a?"":o}\n    </span>\n  </td>\n  <td>\n    <span class="textae-editor__edit-type-dialog__attribute__value__value">${s}</span>\n  </td>\n  <td>${c}</td>\n  <td>\n    <button\n      type="button"\n      class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__edit__value" data-pred="${o}"\n      data-index="${t}"\n      ${"flag"===u?'disabled="disabled"':""}>\n    </button>\n    <button\n      type="button" \n      class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__remove__value" \n      data-index="${t}">\n    </button>\n  </td>\n</tr>`}(e,t,n,i))).join("")}\n          </tbody>\n      </table>\n    </div>\n    <fieldset>\n      <legend>Available Predicates:</legend>\n      <div class="textae-editor__edit-type-dialog__add-attribute-buttons">\n      ${i.attributes.map((({pred:e,valueType:n})=>`<button\n              type="button" \n              class="ui-button ui-corner-all textae-editor__edit-type-dialog__attribute__add textae-editor__edit-type-dialog__attribute__add--${n}"\n              data-pred="${e}"\n              ${t.some((t=>t.pred===e&&String(t.obj)===String(i.get(e).default)))?'disabled="disabled" title="There is an attribute with a default value."':""}> ${e}</button>`)).join(" ")}\n      </div>\n    </fieldset>\n  `}n(7285);const ji={};document.querySelector("html").addEventListener("mousemove",(e=>{ji.clientY=e.clientY,ji.pageY=e.pageY,ji.left=e.clientX}));class Mi{constructor(e,n,i){this._editor=e,this._annotationType=n,this._title=i,this._el=function(e){const t=`\n    <div \n      class="textae-editor__type-pallet textae-editor__type-pallet--${e}"\n      style="display: none;"\n      >\n    </div>`;return o().create(t)}(n),function(e,n){t()(e).draggable({containment:n,distance:10})}(this._el,e),zn()(this._el,'[type="button"]',"click",(()=>e.focus())),zn()(this._el,".textae-editor__type-pallet__read-button","click",(()=>e.eventEmitter.emit("textae-event.pallet.read-button.click"))),zn()(this._el,".textae-editor__type-pallet__write-button","click",(()=>e.eventEmitter.emit("textae-event.pallet.write-button.click"))),zn()(this._el,".textae-editor__type-pallet__close-button","click",(()=>this.hide()))}updateDisplay(){this.visibly&&this._updateDisplay()}get el(){return this._el}show(){this._el.style.display="block",this._updateDisplay(),this._moveInto()}_updateDisplay(){var e,t;this._el.innerHTML=`\n      <div class="textae-editor__type-pallet__container">\n        <div class="textae-editor__type-pallet__title-bar ui-widget-header ui-corner-all">\n          <span>${this._title}</span>\n          <button \n            type="button"\n            class="textae-editor__type-pallet__close-button ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close"\n            title="Close">\n            <span class="ui-button-icon ui-icon ui-icon-closethick"></span>\n            <span class="ui-button-icon-space"> </span>Close\n          </button>\n        </div>\n        <div class="textae-editor__type-pallet__content">${this._content}</div>\n      </div>\n    `,e=this._el,t=this._maxWidth,e.style.width="auto",t-2<=e.offsetWidth&&(e.style.width=t-4+"px"),function(e,t){t-14<=e.offsetHeight?e.style.height=t-14+"px":e.style.height=null}(this._el.querySelector(".textae-editor__type-pallet__container"),this._maxHeight)}_moveInto(){const{left:e,clientY:t,pageY:n}=ji;if(this._el.offsetWidth+e<=this._maxWidth?this._el.style.left=`${e}px`:this._el.style.left=this._editor[0].offsetLeft+this._maxWidth-this._el.offsetWidth-2+"px",this._el.offsetHeight+t<=this._maxHeight){const e=n-this._editor[0].offsetTop;this._el.style.top=`${e}px`}else{const e=n-this._editor[0].offsetTop-(this._el.offsetHeight+t-this._maxHeight);this._el.style.top=`${e}px`}}get _maxWidth(){return this._editor[0].offsetWidth}get _maxHeight(){return document.documentElement.clientHeight}hide(){this._el.style.display="none"}get visibly(){return"none"!==this._el.style.display}}class Ii extends Mi{constructor(e){super(e,"entity","Please select value"),this._veil=o().create('<div style="position: fixed; right: 0; top: 0; bottom:0; left: 0; background-color: rgba(0, 0, 10, 0.3);"></div>')}show(e,t){return this._editor[0].appendChild(this._veil),this._editor[0].appendChild(this.el),this._veil.style["z-index"]=t+1,this._el.style["z-index"]=t+1,this._attributeDefinition=e,super.show(),new Promise((e=>{zn()(this._el,".textae-editor__type-pallet__selection-attribute-label","click",(t=>{this.hide(),e(t.target.dataset.id)}))}))}hide(){this._editor[0].removeChild(this._veil),this._editor[0].removeChild(this.el)}get _content(){return function(e){const{values:t}=e.attrDef;return`\n  <div>\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n        </tr>\n        ${t.map((({color:e="",id:t,default:n,label:i=""})=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="${t}">\n            ${t}\n            ${n?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${i}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n        </tr>\n        `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}({attrDef:this._attributeDefinition.JSON})}}class Ri extends hi{constructor(e,t,n,i,o){const{typeName:s,attributes:r}=o;super("Please edit type and attributes",Pi(s,r,t,n),{minHeight:300,width:800},(()=>Ai(super.el))),zn()(super.el,".textae-editor__edit-type-dialog__attribute__edit__value","click",(i=>{const{pred:o}=i.target.dataset,s=n.get(o),r=parseInt(super.el.closest(".textae-editor__dialog").style["z-index"]),{typeName:a,attributes:l}=Ai(super.el);switch(s.valueType){case"numeric":new ki(s,l[i.target.dataset.index]).open().then((({newObj:e})=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;case"selection":new Ii(e).show(s,r).then((e=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;case"string":new Ti(l[i.target.dataset.index],s).open().then((({newObj:e})=>{l[i.target.dataset.index].obj=e,this._updateDisplay(a,l,n,t)}));break;default:throw`${s.valueType} is unknown attribute.`}})),zn()(super.el,".textae-editor__edit-type-dialog__attribute__remove__value","click",(e=>{const{index:i}=e.target.dataset,o=parseInt(i),{typeName:s,attributes:r}=Ai(super.el);this._updateDisplay(s,r.filter(((e,t)=>t!==o)),n,t)})),zn()(super.el,".textae-editor__edit-type-dialog__attribute__add","click",(e=>{const{pred:i}=e.target.dataset,o=n.get(i).default,{typeName:s,attributes:r}=Ai(super.el);this._updateDisplay(s,r.concat({pred:i,obj:o,id:""}).sort(((e,t)=>n.attributeCompareFunction(e,t))),n,t)}));Ei(super.el.querySelector(".textae-editor__edit-type-dialog__type__value__value"),super.el.querySelector(".textae-editor__edit-type-dialog__type__label__value"),i,(e=>t.findByLabel(e)))}_updateDisplay(e,t,n,i){const o=Pi(e,t,i,n);super.el.closest(".ui-dialog-content").innerHTML=o}}function Li(e){const{typeName:t}=e[e.length-1],n=[];for(const{typeValues:t}of e)for(const e of t.attributes)n.some((t=>t.equalsTo(e.pred,e.obj)))||n.push(e);return new Ne(t,n)}class zi{constructor(e,t,n){this._annotationType=e,this._definitionContainer=t,this._commander=n}selectAll(e){this._selectionModel[this._annotationType].clear();for(const{id:t}of this._annotationData[this._annotationType].findByType(e))this._selectionModel[this._annotationType].add(t)}changeTypeOfSelectedElement(e){return this._commander.factory.changeTypeOfSelectedItemsCommand(this._annotationType,e)}addTypeDefinition(e){return console.assert(e.id,"id is necessary!"),this._commander.factory.createTypeDefinitionCommand(this._definitionContainer,e)}changeTypeDefinition(e,t){return this._commander.factory.changeTypeDefinitionCommand(this._definitionContainer,this._annotationType,e,t)}removeTypeDefinition(e,t){const n={id:e,label:t||""};if(void 0===e)throw new Error("You must set the type id to remove.");return this._commander.factory.removeTypeDefinitionCommand(this._definitionContainer,n)}relationClicked(){}_labelChanged({typeName:e,label:t,attributes:n=[]}){const i=this._commander.factory.changeItemTypeCommand(t,e,this._definitionContainer,n);e&&this._commander.invoke(i)}}class Fi extends zi{constructor(e,t,n,i,o,s){super("entity",t,n),this._editor=e,this._annotationData=i,this._selectionModel=o,this._attributeEditor=s}changeInstance(e){this._selectionModel.entity.some&&new Ri(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,Li(this._selectionModel.entity.all)).open().then((e=>this._labelChanged(e)))}manipulateAttribute(e,t){t?this._attributeEditor.deleteAt(e):this._attributeEditor.addOrEditAt(e)}}function Hi(){window.getSelection().removeAllRanges()}function Bi(e){return e.classList.contains("textae-editor__span")}function Wi(e){return e.classList.contains("textae-editor__text-box")}function qi(e){return e.classList.contains("textae-editor__style")}function Vi(e){return e.classList.contains("textae-editor__block")}class Ui{constructor(){this.selection=window.getSelection()}get isParentOfAnchorNodeTextBox(){return Wi(this.parentOfAnchorNode)}get isParentOfAnchorNodeDenotationSpan(){return Bi(this.parentOfAnchorNode)}get isParentOfAnchorNodeBlockSpan(){return Vi(this.parentOfAnchorNode)}get isParentOfAnchorNodeStyleSpan(){return qi(this.parentOfAnchorNode)}get isParentOfFocusNodeTextBox(){return Wi(this.parentOfFocusNode)}get isParentOfFocusNodeDenotationSpan(){return Bi(this.parentOfFocusNode)}get isParentOfFocusNodeBlockSpan(){return Vi(this.parentOfFocusNode)}get isParentOfFocusNodeStyleSpan(){return qi(this.parentOfFocusNode)}get isParentOfBothNodesSame(){return this.parentOfAnchorNode===this.parentOfFocusNode}get isParentsParentOfAnchorNodeAndFocusedNodeSame(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode.parentElement}get isAnchorNodeParentIsDescendantOfSelectedSpan(){return this.parentOfAnchorNode.closest(".ui-selected")}get isFocusOneDownUnderAnchor(){return this.parentOfAnchorNode===this.parentOfFocusNode.parentElement}get ancestorDenotationSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__span")}get ancestorDenotationSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__span")}get ancestorBlockSpanOfAnchorNode(){return this.parentOfAnchorNode.closest(".textae-editor__block")}get ancestorBlockSpanOfFocusNode(){return this.parentOfFocusNode.closest(".textae-editor__block")}get doesFitInOneBlockSpan(){return this.ancestorBlockSpanOfAnchorNode===this.ancestorBlockSpanOfFocusNode}get isAnchorOneDownUnderFocus(){return this.parentOfAnchorNode.parentElement===this.parentOfFocusNode}get parentOfAnchorNode(){return this.selection.anchorNode.parentElement}get parentOfFocusNode(){return this.selection.focusNode.parentElement}}function Gi(e,t,n,i){t.length?e.selectSpanRange(t):n.ctrlKey||n.metaKey?e.span.toggle(i):e.selectSpan(i)}class Ki{constructor(e,t,n,i,o){this._annotationData=t,this._selectionModel=n,this._spanEditor=o,this._editor=e,this._pallet=i}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(e){this._pallet.hide();"Range"===window.getSelection().type?(this._spanEditor.editFor(new Ui),e.stopPropagation()):this._selectionModel.removeAll()}denotationSpanClicked(e){2===e.button&&Hi();const t=window.getSelection();"Caret"!==t.type&&"None"!==t.type||this._selectSpan(e,e.target.id),"Range"===t.type&&this._spanEditor.editFor(new Ui)}blockSpanClicked(e){2===e.button&&Hi();const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&this._spanEditor.editFor(new Ui)}styleSpanClicked(e){2===e.button&&Hi();const t=window.getSelection();if("Caret"===t.type){const t=e.target.closest(".textae-editor__span");t?this._selectSpan(e,t.id):this._selectionModel.removeAll()}"Range"===t.type&&this._spanEditor.editFor(new Ui)}entityClicked(){this._editor.focus()}typeValuesClicked(e){const t=Kn(e.target).title;this._annotationData.entity.get(t).isDenotation&&(e.ctrlKey||e.metaKey?this._selectionModel.entity.toggle(t):this._selectionModel.selectEntity(t))}_selectSpan(e,t){const n=this._selectionModel.span.singleId,i=e.shiftKey&&n?this._annotationData.span.rangeDenotationSpan(n,t):[];Gi(this._selectionModel,i,e,t)}}function Ji(e,t){return function(e,t){const n=t.parentElement;if(Wi(n))return 0;if(Bi(n)||Vi(n)||qi(n))return e.get(n.id).begin;throw new Error(`Can not get position of a node : ${t} ${t.data}`)}(e,t)+function(e){let t=0;for(const n of e.parentElement.childNodes){if(n==e)break;"#text"===n.nodeName?t+=n.nodeValue.length:t+=n.textContent.length}return t}(t)}class Xi{constructor(e,t){this._spanContainer=e,this._selection=t.selection}get anchor(){return Ji(this._spanContainer,this._selection.anchorNode)+this._selection.anchorOffset}get focus(){return Ji(this._spanContainer,this._selection.focusNode)+this._selection.focusOffset}}function Yi(e,t,n,i,o){for(;o(e(n,i));)i+=t;return i}const Qi=function(e,t){return e.charAt(t)},Zi=function(e,t,n){return Yi(Qi,1,e,t,n)},eo=function(e,t,n){return Yi(Qi,-1,e,t,n)};class to{backFromBegin(e,t,n){}forwardFromEnd(e,t,n){}forwardFromBegin(e,t,n){}backFromEnd(e,t,n){}}function no(e,t){return[e.charAt(t),e.charAt(t-1)]}function io(e,t){return[e.charAt(t),e.charAt(t+1)]}function oo(e,t,n){return""!==n[0]&&!e(n[1])&&!t(n[1])||t(n[0])}class so extends to{backFromBegin(e,t,n){return function(e,t,n){return Yi(no,-1,e,t,(e=>e[1]&&!n(e[0])&&!n(e[1])))}(e,Zi(e,t,(e=>n.isBlankCharacter(e))),(e=>n.isDelimiter(e)))}forwardFromEnd(e,t,n){return function(e,t,n){return Yi(io,1,e,t,(e=>e[1]&&!n(e[0])&&!n(e[1])))}(e,eo(e,t,(e=>n.isBlankCharacter(e))),(e=>n.isDelimiter(e)))}forwardFromBegin(e,t,n){return function(e,t,n){return Yi(no,1,e,t,n)}(e,t,(e=>oo((e=>n.isBlankCharacter(e)),(e=>n.isDelimiter(e)),e)))}backFromEnd(e,t,n){return function(e,t,n){return Yi(io,-1,e,t,n)}(e,t,(e=>oo((e=>n.isBlankCharacter(e)),(e=>n.isDelimiter(e)),e)))}}class ro extends to{backFromBegin(e,t,n){return Zi(e,t,(e=>n.isBlankCharacter(e)))}forwardFromEnd(e,t,n){return eo(e,t,(e=>n.isBlankCharacter(e)))}forwardFromBegin(e,t,n){return Zi(e,t,(e=>n.isBlankCharacter(e)))}backFromEnd(e,t,n){return eo(e,t,(e=>n.isBlankCharacter(e)))}}class ao{constructor(e){this._positions=e}get begin(){return this._positions.anchor<this._positions.focus?this._positions.anchor:this._positions.focus}get end(){return this._positions.anchor<this._positions.focus?this._positions.focus:this._positions.anchor}}function lo(e,t,n,i){const o=new Xi(e.span,n),s=new ao(o);return{begin:t.backFromBegin(e.sourceDoc,s.begin,i),end:t.forwardFromEnd(e.sourceDoc,s.end-1,i)+1}}function co(e){Hi(),setTimeout((()=>alert(e)),10)}function uo(e,t,n,i,o,s,r){const{begin:a,end:l}=function(e,t,n,i,o){const{anchor:s,focus:r}=new Xi(e.span,n),a=e.span.get(o);return s<r?a.end===r?{begin:a.end,end:a.end}:{begin:t.forwardFromBegin(e.sourceDoc,r,i),end:a.end}:a.begin===r?{begin:a.begin,end:a.begin}:{begin:a.begin,end:t.backFromEnd(e.sourceDoc,r-1,i)+1}}(e,n,o,s,i);if(e.span.isBoundaryCrossingWithOtherSpans(a,l))return co("A span cannot be shrinked to make a boundary crossing."),!1;const c=e.span.hasDenotationSpan(a,l);return a<l&&!c?(r(a,l),!1):(t.invoke(t.factory.removeSpanCommand(i)),!0)}function ho(e,t,n,i,o,s,r,a,l){if(s){n.removeAll();const c=U(e,s);uo(t,i,o,s,r,a,l)&&c&&n.selectSpan(c.id)}}function po(e,t){return t.isAnchorNodeParentIsDescendantOfSelectedSpan?e.span.singleId:t.isAnchorOneDownUnderFocus?t.selection.anchorNode.parentNode.id:null}function fo(e,t,n,i,o,s,r){e.removeAll();const{begin:a,end:l}=function(e,t,n,i,o){const s=new Xi(e.span,i);return function(e,t,n,i,o,s){const r=e.span.get(n);return i>o?{begin:t.backFromBegin(e.sourceDoc,o,s),end:r.end}:{begin:r.begin,end:t.forwardFromEnd(e.sourceDoc,o-1,s)+1}}(e,t,n,s.anchor,s.focus,o)}(t,n,i,o,s);t.span.isBoundaryCrossingWithOtherSpans(a,l)?co("A span cannot be expanded to make a boundary crossing."):t.span.hasDenotationSpan(a,l)||r(a,l)}function mo(e,t,n){const i=new Xi(e.span,n),o=new ao(i),s=e.sourceDoc.substring(o.begin,o.end);return t.removeBlankChractors(s).length>0}function go(e,t){return e.valueOf("boundary-detection")?e=>t.isDelimiter(e):()=>!0}class _o{constructor(e,t,n,i,o,s){this._editor=e,this._annotationData=t,this._selectionModel=n,this._commander=i,this._buttonController=o,this._spanConfig=s}editFor(e){if(e.isParentOfAnchorNodeTextBox){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInTextBoxFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInTextBoxFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInTextBoxFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInTextBoxFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeDenotationSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInDenotationSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInDenotationSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInDenotationSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInDenotationSpanFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeBlockSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInBlockSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInBlockSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInBlockSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInBlockSpanFocusNodeInStyleSpan(e)}if(e.isParentOfAnchorNodeStyleSpan){if(e.isParentOfFocusNodeTextBox)return void this._anchorNodeInStyleSpanFocusNodeInTextBox(e);if(e.isParentOfFocusNodeDenotationSpan)return void this._anchorNodeInStyleSpanFocusNodeInDenotationSpan(e);if(e.isParentOfFocusNodeBlockSpan)return void this._anchorNodeInStyleSpanFocusNodeInBlockSpan(e);if(e.isParentOfFocusNodeStyleSpan)return void this._anchorNodeInStyleSpanFocusNodeInStyleSpan(e)}}_anchorNodeInTextBoxFocusNodeInTextBox(e){this._create(e)}_anchorNodeInTextBoxFocusNodeInDenotationSpan(e){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e)}_anchorNodeInTextBoxFocusNodeInBlockSpan(){Hi()}_anchorNodeInTextBoxFocusNodeInStyleSpan(e){if(e.ancestorDenotationSpanOfFocusNode){const t=e.ancestorDenotationSpanOfFocusNode.id;this._shrink(e,t)}else this._create(e)}_anchorNodeInDenotationSpanFocusNodeInTextBox(e){const t=po(this._selectionModel,e);this._expand(e,t)}_anchorNodeInDenotationSpanFocusNodeInDenotationSpan(e){if(e.isParentOfBothNodesSame){const t=this._annotationData.span.get(e.parentOfAnchorNode.id),n=new Xi(this._annotationData.span,e);n.anchor===t.begin||n.anchor===t.end?this._isFocusInSelectedSpan(e)?this._shrinkSelectedSpan(e):this._shrink(e,t.id):this._create(e)}else if(e.parentOfFocusNode.closest(`#${e.parentOfAnchorNode.id}`))this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e);else if(e.parentOfAnchorNode.closest(`#${e.parentOfFocusNode.id}`))if(this._isFocusInSelectedSpan(e))this._shrinkSelectedSpan(e);else{const t=po(this._selectionModel,e);this._expand(e,t)}else if(e.isParentsParentOfAnchorNodeAndFocusedNodeSame){const t=e.parentOfAnchorNode.id;this._expand(e,t)}else Hi()}_anchorNodeInDenotationSpanFocusNodeInBlockSpan(e){const t=po(this._selectionModel,e);this._expand(e,t)}_anchorNodeInDenotationSpanFocusNodeInStyleSpan(e){if(e.isParentsParentOfAnchorNodeAndFocusedNodeSame){const t=e.parentOfAnchorNode.id;this._expand(e,t)}else if(e.ancestorDenotationSpanOfFocusNode){const t=e.ancestorDenotationSpanOfFocusNode.id;this._shrink(e,t)}else;}_anchorNodeInBlockSpanFocusNodeInTextBox(){Hi()}_anchorNodeInBlockSpanFocusNodeInDenotationSpan(e){this._shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e)}_anchorNodeInBlockSpanFocusNodeInBlockSpan(e){this._create(e)}_anchorNodeInBlockSpanFocusNodeInStyleSpan(){Hi()}_anchorNodeInStyleSpanFocusNodeInTextBox(e){if(e.ancestorDenotationSpanOfAnchorNode){const t=e.ancestorDenotationSpanOfAnchorNode.id;this._expand(e,t)}else this._create(e)}_anchorNodeInStyleSpanFocusNodeInDenotationSpan(e){if(this._isFocusInSelectedSpan(e))this._shrinkSelectedSpan(e);else if(e.ancestorDenotationSpanOfAnchorNode&&e.ancestorDenotationSpanOfAnchorNode.parentElement===e.parentOfFocusNode){const t=e.ancestorDenotationSpanOfAnchorNode.id;this._expand(e,t)}else if(e.isFocusOneDownUnderAnchor)this._shrink(e,e.parentOfFocusNode.id);else{if(e.isAnchorOneDownUnderFocus){const{anchor:t}=new Xi(this._annotationData.span,e),n=this._annotationData.span.get(e.parentOfFocusNode.id);if(t===n.begin||t===n.end)return void this._shrink(e,e.parentOfFocusNode.id)}Hi()}}_anchorNodeInStyleSpanFocusNodeInBlockSpan(){Hi()}_anchorNodeInStyleSpanFocusNodeInStyleSpan(e){(e.isParentOfBothNodesSame||e.isParentsParentOfAnchorNodeAndFocusedNodeSame)&&this._create(e),Hi()}_isFocusInSelectedSpan(e){const t=this._selectionModel.span.single;if(!t)return!1;const n=new Xi(this._annotationData.span,e).focus;return t.begin<n&&n<t.end}_create(e){mo(this._annotationData,this._spanConfig,e)&&(this._selectionModel.removeAll(),function(e,t,n,i,o,s,r){const{begin:a,end:l}=lo(e,n,o,s);if(e.span.isBoundaryCrossingWithOtherSpans(a,l))return;if(e.span.hasDenotationSpan(a,l))return;const c=function(e,t,n,i){return e.factory.createSpanAndAutoReplicateCommand({begin:t.begin,end:t.end},n,i)}(t,{begin:a,end:l},i,r);t.invoke(c)}(this._annotationData,this._commander,this._spanAdjuster,this._isReplicateAuto,e,this._spanConfig,go(this._buttonController,this._spanConfig))),Hi()}_expand(e,t){t&&fo(this._selectionModel,this._annotationData,this._spanAdjuster,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(t,e,n))})),Hi()}_shrinkSelectSpanOrOneUpFocusParentDenotationSpan(e){this._isFocusInSelectedSpan(e)?this._shrinkSelectedSpan(e):e.isFocusOneDownUnderAnchor&&this._shrink(e,e.parentOfFocusNode.id),Hi()}_shrinkSelectedSpan(e){this._shrink(e,this._selectionModel.span.singleId)}_shrink(e,t){ho(this._editor,this._annotationData,this._selectionModel,this._commander,this._spanAdjuster,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveDenotationSpanCommand(t,e,n))})),Hi()}get _isReplicateAuto(){return this._buttonController.valueOf("replicate-auto")}get _spanAdjuster(){return this._buttonController.valueOf("boundary-detection")?new so:new ro}}function vo(e,t,{item:n}){return e.value=n.id,t.value=n.label,!1}Si();class yo extends hi{constructor(e,n,i,o,s){super(e,function(e){const{id:t,label:n,color:i,isDefault:o}=e;return`\n<div class="textae-editor__edit-type-definition-dialog__container">\n  <div class="textae-editor__edit-type-definition-dialog__input-box ui-front">\n    <label>Id:</label><br>\n    <input\n      class="textae-editor__edit-type-definition-dialog--id textae-editor__promise-daialog__observable-element" \n      value=${t||""}>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__input-box ui-front">\n    <label>Label:<span></span></label><br>\n    <input value="${n}">\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__color-picker">\n    <label>Color:<input \n      class="textae-editor__edit-type-definition-dialog__color-picker__input" \n      type="color" \n      value="${i}">\n    </label>\n  </div>\n  <div class="textae-editor__edit-type-definition-dialog__set-default">\n    <label>Default type:<input \n      class="textae-editor__edit-type-definition-dialog__set-default__input" \n      type="checkbox" ${o?'checked="checked" disabled="disabled"':""}>\n    </label>\n  </div>\n</div>`}(n),{},(()=>{const e=super.el.querySelectorAll("input");return s(e[0].value,e[1].value,e[2].value,e[3].checked)})),function(e,n,i){const o=e.querySelectorAll("input");t()(o[0]).autocomplete({source:(e,t)=>$i(n,i(e.term),e.term,t),minLength:3,select:(e,t)=>vo(o[0],o[1],t)}),t()(o[1]).autocomplete({source:(e,t)=>$i(n,i(e.term),e.term,t),minLength:3,select:(e,t)=>vo(o[0],o[1],t)})}(super.el,o,(e=>i.findByLabel(e)))}}class bo extends yo{constructor(e,t){super("Please create a new type",{id:null,label:"",color:e.defaultColor,isDefault:!1},e,t,((e,t,n,i)=>{if(""===e)return;const o={id:e,color:n};return""!==t&&(o.label=t),i&&(o.default=i),{newType:o}}))}}class xo extends yo{constructor(e,t,n,i,o){const s=e.getLabel(t)||"",r={id:t,label:s,color:n,isDefault:i};super("Please edit the type",r,e,o,((e,n,i,o)=>{const s=function(e,t){const n=new Map;return e.id!==t.id&&n.set("id",t.id),e.label!==t.label&&n.set("label",""===t.label?null:t.label),e.color!==t.color&&n.set("color",""===t.color?null:t.color),e.isDefault!==t.isDefault&&n.set("default",!!t.isDefault||null),n}(r,{id:e,label:n,color:i,isDefault:o});return{id:t,changedProperties:s}}))}}function wo(e){return!e.classList.contains("textae-editor__type-pallet__table-button--disabled")}class ko{constructor(e,t,n,i,o,s,r,a){this._editor=e,this._bindMouseEvents=t,this._mouseEventHandler=n,this._handler=i,this._pallet=o,function(e,t,n,i,o){zn()(e.el,".textae-editor__type-pallet__add-button","click",(()=>{new bo(o,i()).open().then((({newType:e})=>t.invoke(n.addTypeDefinition(e))))})),zn()(e.el,".textae-editor__type-pallet__label","click",(e=>t.invoke(n.changeTypeOfSelectedElement(e.delegateTarget.dataset.id)))),zn()(e.el,".textae-editor__type-pallet__select-all","click",(e=>{wo(e.target)&&n.selectAll(e.delegateTarget.dataset.id)})),zn()(e.el,".textae-editor__type-pallet__edit-type","click",(e=>{new xo(o,e.target.dataset.id,e.target.dataset.color.toLowerCase(),"true"===e.target.dataset.isDefault,i()).open().then((({id:e,changedProperties:i})=>{i.size&&t.invoke(n.changeTypeDefinition(e,i))}))})),zn()(e.el,".textae-editor__type-pallet__remove","click",(e=>{wo(e.target)&&t.invoke(n.removeTypeDefinition(e.delegateTarget.dataset.id,e.delegateTarget.dataset.label))}))}(o,s,i,r,a),e.eventEmitter.on("textae-event.editor.unselect",(()=>o.hide())).on("textae-event.history.change",(()=>o.updateDisplay())).on("textae-event.data-access-object.configuration.save",(()=>o.updateDisplay())).on("textae-event.type-definition.lock",(()=>o.updateDisplay())),e[0].appendChild(o.el)}init(){return this._bindMouseEvents(this._editor,this._mouseEventHandler)}get handler(){return this._handler}get pallet(){return this._pallet}}function Co(e,t){const n=[];let i=!1;return n.push(zn()(e[0],".textae-editor__text-box","click",(e=>{e.target.classList.contains("textae-editor__text-box")&&!i&&t.textBoxClicked(e)}))),n.push(zn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(zn()(e[0],".textae-editor__entity","click",(()=>t.entityClicked()))),n.push(zn()(e[0],".textae-editor__entity__type-values","click",(e=>t.typeValuesClicked(e)))),n.push(zn()(e[0],".textae-editor__span","mouseup",(e=>{e.target.classList.contains("textae-editor__span")&&(t.denotationSpanClicked(e),i=!0,setTimeout((()=>i=!1),0))}))),n.push(zn()(e[0],".textae-editor__block","mouseup",(e=>{e.target.classList.contains("textae-editor__block")&&t.blockSpanClicked(e)}))),n.push(zn()(e[0],".textae-editor__style","mouseup",(e=>{e.target.classList.contains("textae-editor__style")&&t.styleSpanClicked(e)}))),n}class $o{constructor(e,t,n,i,o){this._commander=e,this._annotationData=t,this._selectionModel=n,this._pallet=i,this._typeDefinition=o}addOrEditAt(e){this._pallet.hide();const t=this._typeDefinition.attribute.getAttributeAt(e);if(t)switch(t.valueType){case"flag":this._commander.invoke(this._commander.factory.toggleFlagAttributeToItemsCommand(this._selectionModel.entity.all,t));break;case"numeric":!function(e,t,n){const i=e.entity.findSelectedAttributeWithSamePredicate(t.pred);if(i)e.entity.onlySelectedWithJustOneAttributeOf(t.pred)?Ci(e.entity,t,i,n):Mt().warning("Some selected items has zero or multi this attribute.");else{const i=n.factory.createAttributeToItemsCommand(e.entity.all,t);n.invoke(i)}}(this._selectionModel,t,this._commander);break;case"selection":if(this._selectionModel.entity.findSelectedAttributeWithSamePredicate(t.pred))this._pallet.show(),this._pallet.showAttribute(t.pred);else{const e=this._commander.factory.createAttributeToItemsCommand(this._selectionModel.entity.all,t);this._commander.invoke(e)}break;case"string":!function(e,t,n){const i=e.entity.findSelectedAttributeWithSamePredicate(t.pred);if(i)e.entity.onlySelectedWithJustOneAttributeOf(t.pred)?Di(e.entity,i,n,t):Mt().warning("Some selected items has zero or multi this attribute.");else{const i=n.factory.createAttributeToItemsCommand(e.entity.all,t);n.invoke(i)}}(this._selectionModel,t,this._commander);break;default:throw`${t.valueType} is unknown attribute`}else Mt().warning(`Attribute No.${e} is not defined`)}deleteAt(e){const t=this._typeDefinition.attribute.getAttributeAt(e);if(this._selectionModel.entity.selectedWithAttributeOf(t.pred)){const e=this._commander.factory.removeAttributesFromItemsByPredCommand(this._selectionModel.entity.all,t);this._commander.invoke(e)}else Mt().warning("None of the selected items has this attribute.")}}var So=n(5311);function Eo(e,t,n){!function(e){zn()(e,".textae-editor__type-pallet__attribute","dragstart",(e=>{e.dataTransfer.setData("application/x-textae-attribute-tab-old-index",e.target.dataset.index),function(e){e.target.closest(".textae-editor__type-pallet__content").classList.add("textae-editor__type-pallet__content--dragging")}(e)})),zn()(e,".textae-editor__type-pallet__attribute","dragend",(e=>{!function(e){e.target.closest(".textae-editor__type-pallet__content").classList.remove("textae-editor__type-pallet__content--dragging")}(e)}))}(t),function(e,t){zn()(e,".textae-editor__type-pallet__drop-target","dragover",(e=>{const t=e.target.closest(".textae-editor__type-pallet__content").querySelector(".textae-editor__type-pallet__attribute").offsetWidth;e.target.innerHTML=`<div style="width: ${t}px;"></div>`,e.preventDefault()})),zn()(e,".textae-editor__type-pallet__drop-target","dragleave",(e=>{e.target.innerHTML=""})),zn()(e,".textae-editor__type-pallet__drop-target","drop",(e=>{const n=parseInt(e.dataTransfer.getData("application/x-textae-attribute-tab-old-index")),i=parseInt(e.target.dataset.index);t.emit("textae-event.entity-and-attribute-pallet.attribute.tab.drop",n,n<i?i-1:i)}))}(t,n),zn()(t,".textae-editor__type-pallet__attribute","click",(t=>{e.showAttribute(t.target.dataset.attribute)})),zn()(t,".textae-editor__type-pallet__create-predicate","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.attribute.create-attribute-definition-button.click"))),zn()(t,".textae-editor__type-pallet__edit-predicate","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.attribute.edit-attribute-definition-button.click",e.attrDef))),zn()(t,".textae-editor__type-pallet__delete-predicate","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.attribute.delete-attribute-definition-button.click",e.attrDef))),zn()(t,".textae-editor__type-pallet__selection-attribute-label","click",(t=>n.emit("textae-event.entity-and-attribute-pallet.attribute.value-of-attribute-definition-label.click",e.attrDef,t.target.dataset.id))),zn()(t,".textae-editor__type-pallet__add-attribute-value-button","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.attribute.add-value-of-attribute-definition-button.click",e.attrDef))),zn()(t,".textae-editor__type-pallet__edit-value","click",(t=>n.emit("textae-event.entity-and-attribute-pallet.attribute.edit-value-of-attribute-definition-button.click",e.attrDef,t.target.dataset.index))),zn()(t,".textae-editor__type-pallet__remove-value","click",(t=>n.emit("textae-event.entity-and-attribute-pallet.attribute.remove-value-from-attribute-definition-button.click",e.attrDef,t.target.dataset.index))),zn()(t,".textae-editor__type-pallet__add-attribute","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.add-attribute-instance-button.click",e.attrDef))),zn()(t,".textae-editor__type-pallet__edit-object","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.attribute.edit-object-of-attribute-instance-button.click",e.attrDef))),zn()(t,".textae-editor__type-pallet__remove-attribute","click",(()=>n.emit("textae-event.entity-and-attribute-pallet.attribute.remove-attribute-instance-button.click",e.attrDef)))}function To(e){const{isLock:t,selectionModelItems:n,selectedPred:i,attributes:o,hasDiff:s}=e,r=1===(a=n.size)?"1 entity selected":a>1?`${a} entities selected`:"";var a;const l=o.length<30,c=i===(o[o.length-1]&&o[o.length-1].pred);return`\n<div style="display: flex;">\n  <p class="textae-editor__type-pallet__information">\n    <span class="textae-editor__type-pallet__lock-icon" style="display: ${t?"inline-block":"none"};">locked</span>\n    <span class="textae-editor__type-pallet__selected-entity-label">${r}</span>\n  </p>\n  <p class="textae-editor__type-pallet__attribute ${i?"":"textae-editor__type-pallet__attribute--selected"}" data-attribute="">\n    Type\n  </p>\n  ${o.map(((e,t,n)=>function({pred:e},t,n,i){return`\n    ${e!==i&&t>1&&n[t-1].pred!==i?`<span class="textae-editor__type-pallet__drop-target" data-index="${t}"></span>`:""}\n    <p \n      class="textae-editor__type-pallet__attribute${e===i?" textae-editor__type-pallet__attribute--selected":""}"\n      data-attribute="${e}"\n      data-index="${t}"\n      ${e===i?'draggable="true"':""}>\n      ${t<9?`${t+1}:`:""}${e}\n    </p>\n  `}(e,t,n,i))).join("\n")}\n  ${t?"":`\n        ${c?"":'<span class="textae-editor__type-pallet__drop-target" data-index="-1"></span>'}\n        ${l?'\n            <p class="textae-editor__type-pallet__attribute textae-editor__type-pallet__create-predicate">\n              <span class="textae-editor__type-pallet__create-predicate__button" title="Add new attribute"></span>\n            </p>\n            ':""}`}\n  <div class="textae-editor__type-pallet__buttons">\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" title="Import"></span>\n    <span class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button ${s?"textae-editor__type-pallet__write-button--transit":""}" title="Upload"></span>\n  </div>\n</div>\n`}function Do(e){const{attrDef:t,selectionModelItems:n}=e,{pred:i}=t,{valueType:o}=t,s=n.size;return`\n  <div class="textae-editor__type-pallet__predicate-controller">\n    <div>\n      ${function(e){const{isLock:t,numberOfItemsUsingSelectedPred:n}=e;return t?'\n      <button \n        type="button"\n        class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__delete-predicate"\n        disabled="disabled">\n      </button>\n      <button\n        type="button"\n        class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__edit-predicate"\n        disabled="disabled">\n      </button>\n    ':`\n    ${n.size>0?`<button \n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__table-button--disabled textae-editor__type-pallet__delete-predicate"\n            disabled="disabled"\n            title="It cannot be deleted, as this attribute is used for ${n.size} items.">\n          </button>`:'<button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__delete-predicate"\n            title="Delet this predicate.">\n          </button>'}\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-predicate"\n      title="Edit this predicate.">\n    </button>\n  `}(e)}\n      Attribute\n      <span\n        class="textae-editor__type-pallet__predicate__value-type textae-editor__type-pallet__predicate__value-type--${o}"\n        title="${o} type">\n      </span>\n      "${i}"\n      ${s>0?`\n            ${function(e){const{selectionModelItems:t,selectedPred:n}=e;return t.selectedWithoutAttributeOf(n)?'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__add-attribute"\n        >add to</button>\n      ':'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__add-attribute"\n        disabled="disabled"\n        title="All the selected items already have this attribute."\n        >add to</button>\n      '}(e)}\n            ${function(e){const{attrDef:t,selectionModelItems:n,selectedPred:i}=e,{valueType:o}=t,s=n.onlySelectedWithJustOneAttributeOf(i);return"string"===o||"numeric"===o?s?'\n        <button\n          type="button"\n          class="textae-editor__type-pallet__edit-object"\n          >edit object of\n        </button>\n        ':'\n        <button\n          type="button"\n          class="textae-editor__type-pallet__edit-object"\n          disabled="disabled"\n          title="Some selected items has zero or multi this attribute."\n          >edit object of\n        </button>\n      ':""}(e)}\n            ${function(e){const{selectionModelItems:t,selectedPred:n}=e;return t.selectedWithAttributeOf(n)?'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__remove-attribute"\n        >remove from</button>\n      ':'\n      <button\n        type="button"\n        class="textae-editor__type-pallet__remove-attribute"\n        disabled="disabled"\n        title="None of the selected items has this attribute."\n        >remove from</button>\n      '}(e)}\n            the ${s} items selected\n            `:""}\n    </div>\n  </div>\n  `}function Ao(e,t,n){return e?"":`\n  <td class="textae-editor__type-pallet__table-attribute-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-value"\n      title="Edit this value." data-index="${t}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove-value${n?" textae-editor__type-pallet__table-button--disabled":""}"\n      title="${n?"To activate this button, remove all the annotations of this type.":"Remove this value."}"\n      ${n?' disabled="disabled"':""}\n      data-index="${t}">\n    </button>\n  </td>\n  `}function No(e){return e?"":'\n              <th>\n                <span class="textae-editor__type-pallet__add-attribute-value-button" title="Add new value"></span>\n              </th>'}function Oo(e,t,n,i,o,s,r){const{attributes:a}=o;if(!n)return function(e){const{types:t,isLock:n}=e;return`\n  ${To(e)}\n  <table>\n    <tbody>\n      <tr>\n        <th>id</th>\n        <th>label</th>\n        <th title="Number of annotations.">#</th>\n        <th>\n          ${n?"":'<span class="textae-editor__type-pallet__add-button" title="Add new type"></span>'}\n        </th>\n      </tr>\n      ${t?t.map((({color:e="",id:t,uri:i,defaultType:o,label:s="",useNumber:r})=>`\n      <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n        <td class="textae-editor__type-pallet__label" data-id="${t}">\n          <span title=${t}>\n            ${t}\n          </span>\n          ${i?`<a href="${i}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>`:""}\n          ${o?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n        </td>\n        <td class="textae-editor__type-pallet__short-label">\n          ${Oi()(s)}\n        </td>\n        <td class="textae-editor__type-pallet__use-number">\n          ${r||0}\n        </td>\n        <td class="textae-editor__type-pallet__table-buttons">\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all${r?"":" textae-editor__type-pallet__table-button--disabled"}"\n            title="Select all the cases of this type."\n            data-id="${t}"\n            data-use-number="${r}">\n          </button>\n          ${n?"":`\n          <button\n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n            title="Edit this type." data-id="${t}"\n            data-color="${e}"\n            data-is-default="${o}">\n          </button>\n          <button \n            type="button"\n            class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove${r?" textae-editor__type-pallet__table-button--disabled":""}"\n            title="${r?"To activate this button, remove all the annotations of this type.":"Remove this type."}"\n            data-id="${t}"\n            data-label="${s}">\n          </button>\n          `}\n        </td>\n      </tr>`)).join("\n"):'\n      <tr class="textae-editor__type-pallet__row">\n        <td class="textae-editor__type-pallet__no-config" colspan="4">There is no Entity definition.</td>\n      </tr>\n      '}\n    </tbody>\n  </table>\n  `}({isLock:r,attributes:a,hasDiff:t,types:e,selectionModelItems:i});const l=a.find((e=>e.pred===n)),c={isLock:r,attributes:a,hasDiff:t,attrDef:l,selectedPred:n,selectionModelItems:i,numberOfItemsUsingSelectedPred:new Set(s.filter((e=>e.pred===n)).map((e=>e.subj)))};switch(l.valueType){case"flag":return function(e){const{label:t,color:n}=e.attrDef;return`\n  ${To(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Do(e)}\n      label: "${t||""}"\n      color: "${n||""}"\n    </div>\n  </div>\n  `}(c);case"numeric":return function(e){const{min:t,max:n,step:i,default:o,values:s}=e.attrDef,{isLock:r}=e;return`\n  ${To(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Do(e)}\n      min: ${t}\n      max: ${n}\n      step: ${i}\n      default: ${o}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>range</th>\n          <th>label</th>\n          <th>color</th>\n          ${No(r)}\n        </tr>\n        ${s.map((({color:e="",range:t,label:n="",indelible:i},o)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            ${t}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${n}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${Ao(r,o,i)}\n        </tr>\n      `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c);case"selection":return function(e,t){const{values:n}=e.attrDef,{isLock:i,selectedPred:o}=e;return`\n  ${To(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Do(e)}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>id</th>\n          <th>label</th>\n          <th>color</th>\n          ${No(i)}\n        </tr>\n        ${n.map((({color:e="",id:n,default:s,label:r=""},a)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__selection-attribute-label" data-id="${n}">\n            ${n}\n            ${s?'<span class="textae-editor__type-pallet__default-icon" title="This type is set as a default type."></span>':""}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${r}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${Ao(i,a,t.isSelectionAttributeValueIndelible(o,n))}\n        </tr>\n        `)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c,o);case"string":return function(e){const{default:t,values:n}=e.attrDef,{isLock:i}=e;return`\n  ${To(e)}\n  <div>\n    <div class="textae-editor__type-pallet__predicate">\n      ${Do(e)}\n      default: ${t}\n    </div>\n\n    <table>\n      <tbody>\n        <tr>\n          <th>pattern</th>\n          <th>label</th>\n          <th>color</th>\n          ${No(i)}\n        </tr>\n        ${n.map((({color:e=" ",pattern:t="",label:n="",indelible:o},s)=>`\n        <tr class="textae-editor__type-pallet__row" style="background-color: ${e};">\n          <td class="textae-editor__type-pallet__attribute-label">\n            ${t}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${n}\n          </td>\n          <td class="textae-editor__type-pallet__short-label">\n            ${e}\n          </td>\n          ${Ao(i,s,o)}\n        </tr>`)).join("\n")}\n      </tbody>\n    </table>\n  </div>\n  `}(c);default:throw"attrDef.valueType is unknown attribute"}}function Po(e){for(const t of e.querySelectorAll(".textae-editor__type-pallet__attribute"))t.addEventListener("mousedown",(e=>{e.stopPropagation()}))}class jo extends Mi{constructor(e,t,n,i,o){super(e,"entity","Entity configuration"),this._eventEmitter=e.eventEmitter,this._originalData=t,this._annotationData=n,this._entityContainer=i,this._selectionModelEntity=o,Eo(this,this._el,e.eventEmitter),e.eventEmitter.on("textae-event.type-definition.attribute.create",(e=>{this.showAttribute(e)})).on("textae-event.type-definition.attribute.change",(e=>{this.showAttribute(e)})).on("textae-event.type-definition.attribute.delete",(()=>{this.showAttribute(null)})).on("textae-event.type-definition.attribute.move",(()=>{this.updateDisplay()})),e.eventEmitter.on("textae-event.annotation-data.attribute.add",(()=>this.updateDisplay())).on("textae-event.annotation-data.attribute.remove",(()=>this.updateDisplay())),e.eventEmitter.on("textae-event.selection.entity.change",(()=>this.updateDisplay()))}updateDisplay(){super.updateDisplay(),Po(this._el)}show(){this._selectedPred=null,super.show(),Po(this._el)}showAttribute(e){this._selectedPred=e,this.updateDisplay()}selectLeftTab(){this._selectedPred&&(0===this._selectedIndex?this.showAttribute():this.showAttribute(this._attributes[this._selectedIndex-1].pred))}selectRightTab(){if(this._selectedPred){if(this._selectedIndex===this._attributes.length-1)return;this.showAttribute(this._attributes[this._selectedIndex+1].pred)}else this._attributes.length&&this.showAttribute(this._attributes[0].pred)}get _selectedIndex(){return this._attributes.findIndex((e=>e.pred===this._selectedPred))}get _content(){return Oo(this._entityContainer.pallet,(0,So.diff)(this._originalData.configuration,{...this._originalData.configuration,...this._annotationData.typeDefinition.config}),this._selectedPred,this._selectionModelEntity,this._annotationData.typeDefinition.attribute,this._annotationData.attribute.all,this._annotationData.typeDefinition.isLock)}get attrDef(){return this._annotationData.typeDefinition.attribute.get(this._selectedPred)}get _attributes(){return this._annotationData.typeDefinition.attribute.attributes}}class Mo extends ko{constructor(e,t,n,i,o,s,r,a){const l=new _o(e,t,n,i,o,s),c=new jo(e,r,t,t.typeDefinition.denotation,n.entity),u=new $o(i,t,n,c,t.typeDefinition),d=new Fi(e,t.typeDefinition.denotation,i,t,n,u);super(e,Co,new Ki(e,t,n,c,l),d,c,i,(()=>a||t.typeDefinition.autocompletionWs),t.typeDefinition.denotation)}}class Io{constructor(e,t,n,i,o,s){this._editor=e,this._annotationData=t,this._spanConfig=n,this._commander=i,this._buttonController=o,this._selectionModel=s}editFor(e){if(e.isParentOfAnchorNodeTextBox){if(e.isParentOfFocusNodeTextBox)return void this._create(e);if(e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void(e.ancestorBlockSpanOfFocusNode?this._shrink(e):this._create(e));if(e.isParentOfFocusNodeBlockSpan)return void this._shrink(e)}if(e.isParentOfAnchorNodeDenotationSpan||e.isParentOfAnchorNodeStyleSpan){if(e.isParentOfFocusNodeTextBox||e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void(e.ancestorBlockSpanOfAnchorNode?e.doesFitInOneBlockSpan?this._shrink(e):this._expand(e):e.ancestorBlockSpanOfFocusNode?this._shrink(e):this._create(e));if(e.isParentOfFocusNodeBlockSpan)return void this._shrink(e)}if(e.isParentOfAnchorNodeBlockSpan){if(e.isParentOfFocusNodeTextBox||e.isParentOfFocusNodeDenotationSpan||e.isParentOfFocusNodeStyleSpan)return void this._expand(e);if(e.isParentOfFocusNodeBlockSpan){const{anchor:t}=new Xi(this._annotationData.span,e),n=this._annotationData.span.get(e.parentOfFocusNode.id);if(t===n.begin||t===n.end)return void this._shrink(e)}}Hi()}_create(e){if(mo(this._annotationData,this._spanConfig,e)){this._selectionModel.removeAll();const{begin:t,end:n}=lo(this._annotationData,new so,e,this._spanConfig);if(this._annotationData.span.isBoundaryCrossingWithOtherSpans(t,n))return;if(this._annotationData.span.doesParentSpanExits(t,n))return;const i=this._commander.factory.createBlockSpanCommand({begin:t,end:n});this._commander.invoke(i)}Hi()}_expand(e){const t=e.ancestorBlockSpanOfAnchorNode.id;fo(this._selectionModel,this._annotationData,new so,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(t,e,n))})),Hi()}_shrink(e){const t=e.ancestorBlockSpanOfFocusNode.id;ho(this._editor,this._annotationData,this._selectionModel,this._commander,new so,t,e,this._spanConfig,((e,n)=>{this._commander.invoke(this._commander.factory.moveBlockSpanCommand(t,e,n))})),Hi()}}function Ro(e,t){const n=[];return n.push(zn()(e[0],".textae-editor__text-box","click",(e=>{e.target.classList.contains("textae-editor__text-box")&&t.textBoxClicked(e)}))),n.push(zn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(zn()(e[0],".textae-editor__entity","click",(()=>t.entityClicked()))),n.push(zn()(e[0],".textae-editor__entity__type-values","click",(e=>t.typeValuesClicked(e)))),n.push(zn()(e[0],".textae-editor__block","mouseup",(e=>{e.target.classList.contains("textae-editor__block")&&t.blockSpanClicked()}))),n.push(zn()(e[0],".textae-editor__block-hit-area","mouseup",(e=>{e.target.classList.contains("textae-editor__block-hit-area")&&t.blockHitAreaClicked(e)}))),n.push(zn()(e[0],".textae-editor__style","mouseup",(e=>{e.target.classList.contains("textae-editor__style")&&t.styleSpanClicked(e)}))),n.push(zn()(e[0],".textae-editor__span","mouseup",(e=>{e.target.classList.contains("textae-editor__span")&&t.denotationSpanClicked(e)}))),n}class Lo{constructor(e,t,n,i,o){this._editor=e,this._annotationData=t,this._selectionModel=n,this._spanEditor=i,this._pallet=o}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(e){const t=window.getSelection();"Caret"===t.type&&(this._pallet.hide(),this._selectionModel.removeAll()),"Range"===t.type&&(this._spanEditor.editFor(new Ui),e.stopPropagation())}blockSpanClicked(){const e=window.getSelection();"Caret"===e.type&&(this._pallet.hide(),Hi(),this._selectionModel.removeAll()),"Range"===e.type&&this._spanEditor.editFor(new Ui)}blockHitAreaClicked(e){2===e.button&&Hi();const t=window.getSelection();if("Caret"===t.type||"None"===t.type){const t=e.target.dataset.id;this._selectSpanAndEntity(e,t)}}styleSpanClicked(e){const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&(this._spanEditor.editFor(new Ui),e.stopPropagation())}denotationSpanClicked(e){const t=window.getSelection();"Caret"===t.type&&this._selectionModel.removeAll(),"Range"===t.type&&(this._spanEditor.editFor(new Ui),e.stopPropagation())}entityClicked(){this._editor.focus()}typeValuesClicked(e){const t=Kn(e.target).title;if(this._annotationData.entity.get(t).isBlock){e.ctrlKey||e.metaKey?this._selectionModel.entity.toggle(t):this._selectionModel.selectEntity(t);for(const{span:e}of this._selectionModel.entity.all)this._selectionModel.span.add(e.id)}}_selectSpanAndEntity(e,t){const n=this._selectionModel.span.singleId,i=e.shiftKey&&n?this._annotationData.span.rangeBlockSpan(n,t):[];Gi(this._selectionModel,i,e,t);for(const{entities:e}of this._selectionModel.span.all)this._selectionModel.entity.add(e[0].id)}}class zo extends zi{constructor(e,t,n,i,o,s){super("entity",t,n),this._editor=e,this._selectionModel=o,this._annotationData=i,this._attributeEditor=s}changeInstance(e){this._selectionModel.entity.some&&new Ri(this._editor,this._definitionContainer,this._annotationData.typeDefinition.attribute,e,Li(this._selectionModel.entity.all)).open().then((e=>this._labelChanged(e)))}manipulateAttribute(e,t){t?this._attributeEditor.deleteAt(e):this._attributeEditor.addOrEditAt(e)}}class Fo extends ko{constructor(e,t,n,i,o,s,r,a){const l=new jo(e,r,t,t.typeDefinition.block,n.entity),c=new $o(o,t,n,l,t.typeDefinition),u=new zo(e,t.typeDefinition.block,o,t,n,c),d=new Io(e,t,i,o,s,n);super(e,Ro,new Lo(e,t,n,d,l),u,l,o,(()=>a||t.typeDefinition.autocompletionWs),t.typeDefinition.block)}}class Ho extends hi{constructor(e,t,n){super("Please enter new values",function(e){const{label:t,value:n}=e;return`\n<div class="textae-editor__edit-value-and-pred-dialog__container">\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box">\n    <label>Predicate:</label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--predicate" \n      value="type" \n      disabled="disabled">\n  </div>\n  <div class="textae-editor__edit-value-and-pred-dialog__input-box ui-front">\n    <label class="textae-editor__edit-value-and-pred-dialog--label">Value:<span>${t||""}</span></label><br>\n    <input \n      class="textae-editor__edit-value-and-pred-dialog--value textae-editor__promise-daialog__observable-element" \n      value="${n}">\n  </div>\n</div>`}({value:e,label:t.getLabel(e)}),{height:250},(()=>{const e=super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),t=super.el.querySelector("span");return{typeName:e.value,label:t.innerText}}));Ei(super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--value"),super.el.querySelector(".textae-editor__edit-value-and-pred-dialog--label span"),n,(e=>t.findByLabel(e)))}}class Bo extends zi{constructor(e,t,n,i){super("relation",e,t),this._annotationData=n,this._selectionModel=i}changeInstance(e){if(this._selectionModel.relation.some){const t=this._getSelectedType();new Ho(t,this._definitionContainer,e).open().then((e=>this._labelChanged(e)))}}relationClicked(e,t){e.ctrlKey||e.metaKey?this._selectionModel.relation.add(t.id):this._selectionModel.selectRelation(t.id)}manipulateAttribute(){}_getSelectedType(){const e=this._selectionModel.relation.single;return e?e.typeName:""}}function Wo(e,t){const n=[];return n.push(zn()(e[0],".textae-editor__text-box","click",(()=>t.textBoxClicked()))),n.push(zn()(e[0],".textae-editor","click",(e=>{e.target.classList.contains("textae-editor")&&t.bodyClicked()}))),n.push(zn()(e[0],".textae-editor__entity","click",(()=>t.entityClicked()))),n.push(zn()(e[0],".textae-editor__entity__type-values","click",(e=>t.typeValuesClicked(e)))),n}class qo{constructor(e,t,n,i,o){this._editor=e,this._selectionModel=t,this._commander=n,this._typeDefinition=i,this._pallet=o}bodyClicked(){this._pallet.hide(),this._selectionModel.removeAll()}textBoxClicked(){this._pallet.hide(),this._selectionModel.removeAll()}entityClicked(){this._editor.focus()}typeValuesClicked(e){const t=Kn(e.target).title;var n,i,o,s,r;n=this._selectionModel,i=t,o=this._commander,s=this._typeDefinition,r=e,n.entity.some?function(e,t,n,i,o){const s=e.entity.all[0].id,r=o;s===r?e.entity.remove(s):(function(e,t,n,i){e.invoke(e.factory.createRelationCommand({subj:t,obj:n,pred:i.relation.defaultType}))}(t,s,r,n),function(e,t,n,i){e.ctrlKey||e.metaKey?t.remove(i):e.shiftKey?(t.remove(n),t.add(i)):(t.remove(n),t.remove(i))}(i,e.entity,s,r))}(n,o,s,r,i):(n.removeAll(),n.entity.add(i))}}class Vo extends Mi{constructor(e,t,n){super(e,"relation","Relation configuration"),this._originalData=t,this._typeDefinition=n,this._definitionContainer=n.relation}get _content(){const e=(0,So.diff)(this._originalData.configuration,{...this._originalData.configuration,...this._typeDefinition.config});return function(e){const{isLock:t,hasDiff:n,types:i}=e;return`\n<p class="textae-editor__type-pallet__title">\n  <span \n    class="textae-editor__type-pallet__lock-icon" \n    style="display: ${t?"inline-block":"none"};">\n    locked\n  </span>\n</p>\n<div class="textae-editor__type-pallet__buttons">\n  <span \n    class="textae-editor__type-pallet__button textae-editor__type-pallet__read-button" \n    title="Import"></span>\n  <span \n    class="textae-editor__type-pallet__button textae-editor__type-pallet__write-button ${n?"textae-editor__type-pallet__write-button--transit":""}" \n    title="Upload"></span>\n</div>\n<table>\n  <tbody>\n    <tr>\n      <th>id</th>\n      <th>label</th>\n      <th title="Number of annotations.">#</th>\n      <th>\n        ${t?"":'\n        <span \n          class="textae-editor__type-pallet__add-button" \n          title="Add new type"></span>\n        '}\n      </th>\n    </tr>\n    ${i?`\n    ${i.map(function(e){return({color:t,id:n,uri:i,defaultType:o,label:s,useNumber:r})=>`\n<tr class="textae-editor__type-pallet__row" style="background-color: ${t};">\n  <td class="textae-editor__type-pallet__label" data-id="${n}">\n    <span title=${n}>\n      ${n}\n    </span>\n    ${i?`\n    <a \n      href="${i}" \n      target="_blank">\n      <span class="textae-editor__type-pallet__link"></span>\n    </a>\n    `:""}\n    ${o?'\n    <span \n      class="textae-editor__type-pallet__default-icon" \n      title="This type is set as a default type."></span>\n    ':""}\n  </td>\n  <td class="textae-editor__type-pallet__short-label">\n    ${s||""}\n  </td>\n  <td class="textae-editor__type-pallet__use-number">\n    ${r||"0"}\n  </td>\n  <td class="textae-editor__type-pallet__table-buttons">\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__select-all ${r?"":"textae-editor__type-pallet__table-button--disabled"}"\n      title="Select all the cases of this type."\n      data-id="${n}"\n      data-use-number="${r}">\n    </button>\n    ${e?"":`\n    <button\n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__edit-type"\n      title="Edit this type." data-id="${n}"\n      data-color="${t}"\n      data-is-default="${o}">\n    </button>\n    <button \n      type="button"\n      class="textae-editor__type-pallet__table-button textae-editor__type-pallet__remove ${r?"textae-editor__type-pallet__table-button--disabled":""}"\n      title="${r?"To activate this button, remove all the annotations of this type.":"Remove this type."}"\n      data-id="${n}"\n      data-label="${s}">\n    </button>\n    `}\n  </td>\n</tr>\n`}(t)).join("\n")}\n    `:'\n    <tr class="textae-editor__type-pallet__row">\n      <td \n        class="textae-editor__type-pallet__no-config" \n        colspan="4">\n        There is no Relation definition.\n      </td>\n    </tr>\n    '}\n  </tbody>\n</table>\n`}({isLock:this._typeDefinition.isLock,hasDiff:e,types:this._definitionContainer.pallet})}}class Uo extends ko{constructor(e,t,n,i,o,s){const r=new Vo(e,o,t.typeDefinition),a=new Bo(t.typeDefinition.relation,i,t,n);super(e,Wo,new qo(e,n,i,t.typeDefinition,r),a,r,i,(()=>s||t.typeDefinition.autocompletionWs),t.typeDefinition.relation)}}class Go{constructor(e,t){this._namespace=e,this._denititionContainer=t}relationClicked(e,t){const{href:n}=t;n&&window.open(n,"_blank")}changeInstance(){}manipulateAttribute(){}}class Ko{constructor(e,t,n,i,o,s,r,a){this._annotationData=t,this._editDenotation=new Mo(e,t,n,o,s,i,r,a),this._editBlock=new Fo(e,t,n,i,o,s,r,a),this._editRelation=new Uo(e,t,n,o,r,a),this._listeners=[],function(e,t,n){e.on("textae-event.entity-and-attribute-pallet.attribute.create-attribute-definition-button.click",(()=>{(new _i).open().then((e=>{e.pred&&t.invoke(t.factory.createAttributeDefinitionCommand(e))}))})).on("textae-event.entity-and-attribute-pallet.attribute.edit-attribute-definition-button.click",(e=>{new bi(e).open().then((n=>{n.size&&""!==n.get("pred")&&t.invoke(t.factory.changeAttributeDefinitionCommand(e,n))}))})).on("textae-event.entity-and-attribute-pallet.attribute.delete-attribute-definition-button.click",(e=>t.invoke(t.factory.deleteAttributeDefinitionCommand(e)))).on("textae-event.entity-and-attribute-pallet.attribute.add-value-of-attribute-definition-button.click",(e=>{new wi(e.valueType).open().then((n=>{(n.range||n.id||n.pattern)&&t.invoke(t.factory.addValueToAttributeDefinitionCommand(e,n))}))})).on("textae-event.entity-and-attribute-pallet.attribute.value-of-attribute-definition-label.click",((e,i)=>{if(n.selectedWithAttributeOf(e.pred))if(n.isDupulicatedPredAttrributeSelected(e.pred))Mt().warning("An item among the selected has this attribute multiple times.");else{const o=t.factory.changeAttributesOfItemsWithSamePred(n.all,e,i);t.invoke(o)}else{const o=t.factory.createAttributeToItemsCommand(n.all,e,i);t.invoke(o)}})).on("textae-event.entity-and-attribute-pallet.attribute.edit-value-of-attribute-definition-button.click",((e,n)=>{const i=e.values[n];new wi(e.valueType,i).open().then((o=>{if(o.range||o.id||o.pattern){if(!Object.keys(o).reduce(((e,t)=>e||o[t]!==i[t]),!1)&&!Object.keys(i).reduce(((e,t)=>e||o[t]!==i[t]),!1))return;t.invoke(t.factory.changeValueOfAttributeDefinitionAndObjectOfSelectionAttributeCommand(e.JSON,n,o))}}))})).on("textae-event.entity-and-attribute-pallet.attribute.remove-value-from-attribute-definition-button.click",((e,n)=>t.invoke(t.factory.removeValueFromAttributeDefinitionCommand(e,n)))).on("textae-event.entity-and-attribute-pallet.add-attribute-instance-button.click",(e=>t.invoke(t.factory.createAttributeToItemsCommand(n.all,e)))).on("textae-event.entity-and-attribute-pallet.attribute.edit-object-of-attribute-instance-button.click",(e=>{const i=n.findSelectedAttributeWithSamePredicate(e.pred);switch(e.valueType){case"numeric":Ci(n,e,i,t);break;case"string":Di(n,i,t,e);break;default:throw new Error(`Invalid attribute valueType: ${e.valueType}`)}})).on("textae-event.entity-and-attribute-pallet.attribute.remove-attribute-instance-button.click",(e=>t.invoke(t.factory.removeAttributesFromItemsByPredCommand(n.all,e)))).on("textae-event.entity-and-attribute-pallet.attribute.tab.drop",((e,n)=>{t.invoke(t.factory.moveAttributeDefintionComannd(e,n))}))}(e.eventEmitter,o,n.entity),this._stateMachine=new di(e,t.entityGap,(()=>{this.cancelSelect(),this._unbindAllMouseEventhandler()}),(()=>this._listeners=this._editDenotation.init()),(()=>this._listeners=this._editBlock.init()),(()=>this._listeners=this._editRelation.init())),this._autocompletionWsFromParams=a,this._selectionModel=n,e.eventEmitter.on("textae-event.editor.relation.click",((e,t)=>this._getHandler().relationClicked(e,t))),this._viewHandler=new Go(t.namespace,t.typeDefinition.relation)}get isEditDenotation(){return this._stateMachine.currentState===ei||this._stateMachine.currentState===Zn}toEditDenotationWithoutRelation(){this._stateMachine.setState(Zn)}toEditDenotationWithRelation(){this._stateMachine.setState(ei)}toViewWithoutRelation(){this._stateMachine.setState(Yn)}toViewWithRelation(){this._stateMachine.setState(Qn)}pushView(){this._stateMachine.pushView()}pushTerm(){this._stateMachine.pushTerm(this._annotationData)}pushBlock(){this._stateMachine.pushBlock(this._annotationData)}pushRelation(){this._stateMachine.setState(ii)}toggleSimple(){this._stateMachine.toggleSimple()}changeByShortcut(){this._stateMachine.changeByShortcut()}showPallet(){switch(this._stateMachine.currentState){case Zn:case ei:this._editDenotation.pallet.show();break;case ti:case ni:this._editBlock.pallet.show();break;case ii:this._editRelation.pallet.show()}}changeLabel(){this._getHandler().changeInstance(this._autocompletionWsFromParams||this._annotationData.typeDefinition.autocompletionWs)}manipulateAttribute(e,t){this._getHandler().manipulateAttribute(e,t)}cancelSelect(){this._editDenotation.pallet.hide(),this._editBlock.pallet.hide(),this._editRelation.pallet.hide(),this._selectionModel.removeAll()}get isEntityAndAttributePalletShown(){return this._editDenotation.pallet.visibly||this._editBlock.pallet.visibly}selectLeftAttributeTab(){switch(this._stateMachine.currentState){case Zn:case ei:this._editDenotation.pallet.selectLeftTab();break;case ti:case ni:this._editBlock.pallet.selectLeftTab()}}selectRightAttributeTab(){switch(this._stateMachine.currentState){case Zn:case ei:this._editDenotation.pallet.selectRightTab();break;case ti:case ni:this._editBlock.pallet.selectRightTab()}}_getHandler(){switch(this._stateMachine.currentState){case Zn:case ei:return this._editDenotation.handler;case ti:case ni:return this._editBlock.handler;case ii:return this._editRelation.handler;default:return this._viewHandler}}_unbindAllMouseEventhandler(){for(const e of this._listeners)e.destroy();this._listeners=[]}}function Jo(e,t,n){e.eventEmitter.on("textae-event.annotation-data.all.change",((e,i)=>{"edit"!==n?function(e,t){ri(t)?e.toViewWithoutRelation():e.toViewWithRelation()}(t,e):(function(e){e&&Mt().success("track annotations have been merged to root annotations.")}(i),function(e,t){ri(t)?e.toEditDenotationWithoutRelation():e.toEditDenotationWithRelation()}(t,e))}))}function Xo(e){return Un()(e,300)}function Yo(e,t){zn()(e,".line-height","change",Xo((e=>{t.lineHeight=e.target.value,function(){const e=new Event("resize");window.dispatchEvent(e)}()})))}function Qo(e,t,n,i,o){!function(e,t,n){zn()(e,".type-gap","change",Xo((i=>{t.value=Number(i.target.value),e.querySelector(".line-height").value=n.lineHeight})))}(e,n,o),Yo(e,o),function(e,t){zn()(e,".lock-config","change",Xo((e=>{e.target.checked?t.lockEdit():t.unlockEdit()})))}(e,i),function(e,t){zn()(e,".reset-hidden-message-boxes","click",(()=>t.eventEmitter.emit("textae-event.message-box.show")))}(e,t)}const Zo="6.6.4";class es extends s{constructor(e,t,n,i){super("Setting",function(e){const{typeGap:t,typeGapDisabled:n,lineHeight:i,typeDefinitionLocked:o,version:s}=e;return`\n<div class="textae-editor__setting-dialog">\n  <div>\n    <label class="textae-editor__setting-dialog__label">Type Gap</label>\n    <input \n      type="number" \n      class="textae-editor__setting-dialog__type-gap type-gap" \n      step="1" \n      min="0" \n      max="5" \n      value="${t}" ${n?'disabled="disabled"':""}>\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Line Height</label>\n    <input \n      type="number" class="textae-editor__setting-dialog__line-height line-height" \n      step="1" \n      min="50" \n      max="500" \n      value="${i}">px\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Lock Edit Config</label>\n    <input \n      type="checkbox" \n      class="textae-editor__setting-dialog__lock-config lock-config"\n      ${o?'checked="checked"':""}>\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Reset Hidden Message Boxes</label>\n    <input \n      type="button" \n      class="textae-editor__setting-dialog__reset-hidden-message-boxes reset-hidden-message-boxes" \n      value="Reset">\n  </div>\n  <div>\n    <label class="textae-editor__setting-dialog__label">Version</label>\n    ${s}\n  </div>\n</div>\n`}({typeGapDisabled:!n.show,typeGap:n.value,lineHeight:i.lineHeight,typeDefinitionLocked:t.isLock,version:Zo}),"OK"),Qo(super.el,e,n,t,i),zn()(super.el,".textae-editor__dialog","keyup",(e=>{13===e.keyCode&&super.close()}))}}class ts{constructor(e,t){this._editor=e,this._selectionModel=t}left(e){const t=this._searchLeft("textae-editor__span");if(t)return void(e?this._selectionModel.span.add(t.id):this._selectionModel.selectSpan(t.id));const n=this._searchLeft("textae-editor__entity");n&&(e?this._selectionModel.entity.add(n.title):this._selectionModel.selectEntity(n.title))}right(e){const t=this._searchRight("textae-editor__span");if(t)return void(e?this._selectionModel.span.add(t.id):this._selectionModel.selectSpan(t.id));const n=this._searchRight("textae-editor__entity");n&&(e?this._selectionModel.entity.add(n.title):this._selectionModel.selectEntity(n.title))}_searchLeft(e){const t=this._getAllElementsOf(e),n=[...t].findIndex((e=>e.classList.contains("ui-selected")));if(n>0)return t[n-1]}_searchRight(e){const t=this._getAllElementsOf(e),n=[...t].reverse().findIndex((e=>e.classList.contains("ui-selected")));if(t.length-n>0)return t[t.length-n]}_getAllElementsOf(e){return this._editor[0].querySelectorAll(`.${e}`)}}class ns{constructor(e,t){this._editor=e,this._selectionModel=t}up(){if(this._selectionModel.span.single){const e=this._selectionModel.span.single.gridElement.querySelector(".textae-editor__entity");this._selectionModel.selectEntity(e.title)}}down(){const e=this._editor[0].querySelector(".textae-editor__entity.ui-selected");if(e){const t=e.closest(".textae-editor__grid").id.substring(1);this._selectionModel.selectSpan(t)}}}class is{constructor(e,t,n,i,o,s,r,a,l){this._editor=e,this._commander=t,this._selectionModel=n,this._annotationData=i,this._buttonController=o,this._spanConfig=s,this._clipBoard=r,this._view=a,this._editMode=l,this._horizontal=new ts(e,n),this._vertical=new ns(e,n)}copyEntities(){this._clipBoard.copyEntities()}cutEntities(){this._clipBoard.cutEntities()}removeSelectedElements(){const e=this._commander.factory.removeSelectedComand();this._horizontal.right(null),this._commander.invoke(e)}createEntity(){!function(e,t){const n=e.factory.createDefaultTypeEntityToSelectedSpansCommand(t.denotation.defaultType);n.isEmpty||e.invoke(n)}(this._commander,this._annotationData.typeDefinition)}showPallet(){this._editMode.showPallet()}replicate(){!function(e,t,n,i){const o=go(t,n);i?e.invoke(e.factory.replicateSpanCommand(i,i.entities.map((e=>e.typeValues)),o)):alert("You can replicate span annotation when there is only span selected.")}(this._commander,this._buttonController,this._spanConfig,this._selectionModel.span.single)}pasteEntities(){this._clipBoard.pasteEntities()}changeLabel(){this._editMode.changeLabel()}manipulateAttribute(e,t){this._editMode.manipulateAttribute(e,t)}cancelSelect(){this._editMode.cancelSelect(),this._editor.focus()}showSettingDialog(){new es(this._editor,this._annotationData.typeDefinition,this._annotationData.entityGap,this._annotationData.textBox).open()}select(){this._editor[0].classList.add("textae-editor--active")}unselect(){this._editor[0].classList.remove("textae-editor--active"),this._editor.eventEmitter.emit("textae-event.editor.unselect")}selectLeft(e){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectLeftAttributeTab():this._horizontal.left(e)}selectRight(e){this._editMode.isEntityAndAttributePalletShown?this._editMode.selectRightAttributeTab():this._horizontal.right(e)}selectUp(){this._editMode.isEditDenotation&&this._vertical.up()}selectDown(){this._editMode.isEditDenotation&&this._vertical.down()}toggleSimpleMode(){this._editMode.toggleSimple()}toggleButton(e){this._buttonController.toggle(e)}changeMode(){this._editMode.changeByShortcut()}toViewMode(){this._editMode.pushView()}toTermMode(){this._editMode.pushTerm()}toBlockMode(){this._editMode.pushBlock()}toRelationMode(){this._editMode.pushRelation()}}class os{constructor(e,t,n,i,o,s,r,a,l,c,u){const d=new Ko(e,t,n,o,i,r,l,c);Jo(e,d,u),this.event=new is(e,i,n,t,r,o,s,a,d)}}class ss extends s{constructor(e,t,n,i,o){super(e,function(e){const{url:t}=e;return`\n<div>\n  <div class="textae-editor__load-dialog__row">\n    <label class="textae-editor__load-dialog__label">\n      URL\n    </label>\n    <input \n      type="text" \n      value="${t}" \n      class="textae-editor__load-dialog__file-name url">\n    <input \n      type="button" \n      class="url" ${t?"":'disabled="disabled"'} \n      value="Open">\n  </div>\n  <div class="textae-editor__load-dialog__row">\n    <label class="textae-editor__load-dialog__label">\n      Local\n    </label>\n    <input \n      class="textae-editor__load-dialog__file" \n      type="file">\n    <input \n      type="button" \n      class="local" \n      disabled="disabled" \n      value="Open">\n  </div>\n</div>`}({url:t}),"Cancel"),zn()(super.el,'[type="text"].url',"input",(e=>{xi(e.target.nextElementSibling,e.target.value)})),zn()(super.el,".textae-editor__load-dialog__file","change",(e=>{xi(e.target.nextElementSibling,e.target.files.length>0)}));const s=()=>!o||window.confirm("There is a change that has not been saved. If you procceed now, you will lose it.");zn()(super.el,'[type="button"].url',"click",(e=>{s()&&n(e.target.previousElementSibling.value),super.close()})),zn()(super.el,'[type="button"].local',"click",(e=>{const t=e.target.previousElementSibling;s()&&i(t),super.close()}))}}function rs(e){const t=new Blob([JSON.stringify(e)],{type:"application/json"});return URL.createObjectURL(t)}class as extends s{constructor(e,t,n,i,o){super("Save Annotations",function(e){const{url:t,filename:n}=e;return`\n<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input \n      type="text"\n      value="${t}"\n      class="textae-editor__save-dialog__server-file-name url">\n    <input \n      type="button"\n      class="url" ${t?"":'disabled="disabled"'}\n      value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input\n      type="text"\n      value="${n}"\n      class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label"></label>\n    <a class="viewsource" href="#">Click to see the json source in a new window.</a>\n  </div>\n</div>\n`}({filename:n,url:t}),"Cancel"),function(e,t,n,i,o){zn()(t,'[type="text"].url',"input",(e=>{xi(e.target.nextElementSibling,e.target.value)})),zn()(t,'[type="button"].url',"click",(e=>{o(e.target.previousElementSibling.value),i()})),zn()(t,"a.download","click",(t=>{const o=t.target,s=rs(n);o.setAttribute("href",s),o.setAttribute("download",o.previousElementSibling.value),e.eventEmitter.emit("textae-event.save-annotation-dialog.download.click"),i()})),zn()(t,"a.viewsource","click",(()=>{window.open(rs(n),"_blank"),e.eventEmitter.emit("textae-event.save-annotation-dialog.viewsource.click"),i()}))}(e,super.el,i,(()=>super.close()),o)}}const ls=(0,So.create)({objectHash:(e,t)=>e.id||`$$index:${t}`});function cs(e,t){const n=ls.diff(e,t);return So.formatters.html.format(n,e)}class us extends s{constructor(e,t,n,i,o,s){super("Save Configurations",function(e){const{url:t,filename:n,diff:i}=e;return`\n<div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">URL</label>\n    <input \n      type="text" value="${t}" \n      class="textae-editor__save-dialog__server-file-name url">\n    <input \n      type="button" \n      class="url" ${t?"":'disabled="disabled"'} \n      value="Save">\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <label class="textae-editor__save-dialog__label">Local</label>\n    <input \n      type="text" value="${n}" \n      class="textae-editor__save-dialog__local-file-name local">\n    <a class="download" href="#">Download</a>\n  </div>\n  <div class="textae-editor__save-dialog__row">\n    <p class="textae-editor__save-dialog__diff-title">\n      Configuration differences\n      <span class="diff-info diff-info--add">added</span>\n      <span class="diff-info diff-info--remove">removed</span>\n    </p>\n  </div>\n  <div class="textae-editor__save-dialog__diff-viewer">${i}</div>\n</div>\n`}({filename:n,url:t,diff:cs(i,o)||"nothing."}),"Cancel",{width:550}),this._$dialog.on("dialogopen",(()=>So.formatters.html.hideUnchanged())),function(e,t,n,i,o){zn()(t,'[type="text"].url',"input",(e=>{xi(e.target.nextElementSibling,e.target.value)})),zn()(t,'[type="button"].url',"click",(e=>{o(e.target.previousElementSibling.value),i()})),zn()(t,"a.download","click",(t=>{const o=t.target,s=rs(n);o.setAttribute("href",s),o.setAttribute("download",o.previousElementSibling.value),e.eventEmitter.emit("textae-event.save-configuration-dialog.download.click",n),i()}))}(e,super.el,o,(()=>super.close()),s)}}async function ds(e){return new Promise((t=>{const n=new FileReader;n.onload=e=>t(e),n.readAsText(e)}))}function hs(e){if("string"!=typeof e)return!1;try{JSON.parse(e)}catch(e){return!1}return!0}var ps=n(6470),fs=n.n(ps);async function ms(e,t){const n=e[0],i=(await ds(n)).target.result;if(o=n.name,".txt"!==fs().extname(o)){var o;if(hs(i)){const e=JSON.parse(i);if(e.text)return void t.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new N("local file",n.name,e))}t.eventEmitter.emit("textae-event.data-access-object.annotation.format.error",new N("local file",n.name))}else t.eventEmitter.emit("textae-event.data-access-object.annotation.load.success",new N("local file",n.name,{text:i}))}class gs{constructor(e,t,n,i,o,s,r){this._editor=e,this._dataAccessObject=t,this._history=n,this._annotationData=i,this._getOriginalAnnotation=o,this._getOriginalConfig=s,this._saveToParameter=r,this._filenameOfLastRead={annotation:"",configuration:""}}importAnnotation(){new ss("Load Annotations",this._dataAccessObject.annotationUrl,(e=>this._dataAccessObject.loadAnnotation(e)),(({files:e})=>{ms(e,this._editor),this._filenameOfLastRead.annotation=e[0].name}),this._history.hasAnythingToSaveAnnotation).open()}uploadAnnotation(){new as(this._editor,this._saveToParameter||this._dataAccessObject.annotationUrl,this._filenameOfLastRead.annotation,this._editedAnnotation,(e=>this._dataAccessObject.saveAnnotation(e,this._editedAnnotation))).open()}saveAnnotation(){this._dataAccessObject.saveAnnotation(this._saveToParameter||this._dataAccessObject.annotationUrl,this._editedAnnotation)}importConfiguration(){new ss("Load Configurations",this._dataAccessObject.configurationUrl,(e=>this._dataAccessObject.loadConfigulation(e)),(({files:e})=>{!function(e,t){const n=e[0];ds(n).then((({target:e})=>{hs(e.result)?t.eventEmitter.emit("textae-event.data-access-object.configuration.load.success",new N("local file",n.name,JSON.parse(e.result))):t.eventEmitter.emit("textae-event.data-access-object.configuration.format.error",new N("local file",n.name))}))}(e,this._editor),this._filenameOfLastRead.configuration=e[0].name}),this._history.hasAnythingToSaveConfiguration).open()}uploadConfiguration(){const e={...this._getOriginalConfig(),...this._annotationData.typeDefinition.config};new us(this._editor,this._dataAccessObject.configurationUrl,this._filenameOfLastRead.configuration,this._getOriginalConfig(),e,(t=>this._dataAccessObject.saveConfiguration(t,e))).open()}get _editedAnnotation(){return function(e,t,n){return Object.assign(e,t.toJson(),{config:n})}(this._getOriginalAnnotation(),this._annotationData,this._annotationData.typeDefinition.config)}}function _s(e,t,...n){e.has(t)&&e.get(t)(...n)}function vs(e,t,n){return new Map([["1",e=>t.event.manipulateAttribute(1,e)],["2",e=>t.event.manipulateAttribute(2,e)],["3",e=>t.event.manipulateAttribute(3,e)],["4",e=>t.event.manipulateAttribute(4,e)],["5",e=>t.event.manipulateAttribute(5,e)],["6",e=>t.event.manipulateAttribute(6,e)],["7",e=>t.event.manipulateAttribute(7,e)],["8",e=>t.event.manipulateAttribute(8,e)],["9",e=>t.event.manipulateAttribute(9,e)],["a",()=>e.redo()],["b",()=>t.event.toggleButton("boundary-detection")],["c",()=>t.event.copyEntities()],["d",()=>t.event.removeSelectedElements()],["e",()=>t.event.createEntity()],["f",()=>t.event.changeMode()],["i",()=>n.importAnnotation()],["m",()=>t.event.changeMode()],["q",()=>t.event.showPallet()],["r",()=>t.event.replicate()],["u",()=>n.uploadAnnotation()],["v",()=>t.event.pasteEntities()],["w",()=>t.event.changeLabel()],["x",()=>t.event.cutEntities()],["y",()=>e.redo()],["z",()=>e.undo()],["ArrowDown",()=>t.event.selectDown()],["ArrowLeft",e=>t.event.selectLeft(e)],["ArrowRight",e=>t.event.selectRight(e)],["ArrowUp",()=>t.event.selectUp()],["Backspace",()=>t.event.removeSelectedElements()],["Delete",()=>t.event.removeSelectedElements()],["Escape",()=>t.event.cancelSelect()]])}function ys(e,t,n,i,o){const s=new Map([["view",()=>t.event.toViewMode()],["term",()=>t.event.toTermMode()],["block",()=>t.event.toBlockMode()],["relation",()=>t.event.toRelationMode()],["simple",()=>t.event.toggleSimpleMode()],["read",()=>n.importAnnotation()],["write",()=>n.uploadAnnotation()],["undo",()=>e.undo()],["redo",()=>e.redo()],["replicate",()=>t.event.replicate()],["entity",()=>t.event.createEntity()],["change-label",()=>t.event.changeLabel()],["pallet",()=>t.event.showPallet()],["delete",()=>t.event.removeSelectedElements()],["copy",()=>t.event.copyEntities()],["cut",()=>t.event.cutEntities()],["paste",()=>t.event.pasteEntities()],["setting",()=>t.event.showSettingDialog()],["line-height",()=>i.updateLineHeight()]]);for(const e of o.pushButtonNames)s.has(e)||s.set(e,(()=>t.event.toggleButton(e)));return s}class bs{constructor(e,t,n,i,o){this._keyApiMap=new vs(e,t,n),this._iconApiMap=new ys(e,t,n,o,i),this._view=o,this._buttonController=i,this._presenter=t,this._isSelected=!1}handleKeyInput(e){if(this._isSelected){const t=e.shiftKey&&48<=e.keyCode&&e.keyCode<=57?String.fromCharCode(e.keyCode):e.key;_s(this._keyApiMap,t,e.shiftKey)}}handleButtonClick(e){_s(this._iconApiMap,e,{})}redraw(){this._view.updateDisplay()}updateButtons(){this._buttonController.propagate()}select(){this._presenter.event.select(),this._isSelected=!0}unselect(){this._presenter.event.unselect(),this._isSelected=!1}}const xs='\n<div class="textae-editor__footer">\n  <div class="textae-editor__footer__message"></div>\n</div>\n';class ws{constructor(e){this._container=e[0]}set status(e){const t=e.displayName;var n;""!==t&&((n=this._container,n.querySelector(".textae-editor__footer__message")||(n.insertAdjacentHTML("beforeend",xs.replace(/[\n\r]+/g,"")),n.querySelector(".textae-editor__footer__message"))).innerHTML=oe(t)?`Source: <a class="textae-editor__footer__message__link" href="${t}">${decodeURI(t)}</a>`:`Source: ${t}`)}}function ks(e,t,n,i,o){!function(e,t){!0===e.autosave?t.push("write-auto"):t.release("write-auto"),!0===e.autolineheight?t.push("line-height-auto"):t.release("line-height-auto"),!0===e.boundarydetection?t.push("boundary-detection"):t.release("boundary-detection")}(e,t),n.set(e),i.reset(o,e)}function Cs(e){if(!0===e)return"flag";if("number"==typeof e)return"numeric";if("string"==typeof e)return"string";throw`${JSON.stringify(e)} is an unexpected value for an Attribute.`}function $s(e){const t=e.reduce(((e,t)=>e.has(t)?e.set(t,e.get(t)+1):e.set(t,1)),new Map),n=Math.max(...t.values());for(const[e,i]of t.entries())if(i===n)return e}function Ss(e){const t=Math.max(...e.map((e=>{const[t,n]=String(e).split(".");return n?n.length:0})));return Number(Array.from(Array(t)).reduce(((e,t)=>.1*e),1).toFixed(t))}class Es{constructor({pred:e,obj:t}){this._pred=e,this._objects=[t]}push(e){this._objects.push(e)}get definition(){switch(Cs(this._objects[0])){case"flag":return this._prototype;case"numeric":return this._numericAttribute;case"string":return this._stringAttribute;default:throw new Error(`prototype: ${JSON.stringify(this._prototype)}`)}}get mostFrequentObject(){return $s(this._objects)}get _prototype(){return{pred:this._pred,"value type":Cs(this._objects[0])}}get _numericAttribute(){return{min:Math.min(...this._objects),max:Math.max(...this._objects),step:Ss(this._objects),default:$s(this._objects),...this._prototype}}get _stringAttribute(){return{default:$s(this._objects),...this._prototype}}}function Ts(e){return e.reduce(((e,t)=>(e.has(t.pred)?e.get(t.pred).push(t.obj):e.set(t.pred,new Es(t)),e)),new Map)}function Ds(e,t){return function(e,t){for(const n of t){const t=e.findIndex((e=>e.pred===n.pred));-1!==t?e[t]=Object.assign(n,e[t]):e.push(n)}return e}(e,function(e){return[...Ts(e).values()].map((e=>e.definition))}(t))}function As(e){return e?JSON.parse(JSON.stringify(e)):{}}class Ns{constructor(e=[],t=[]){this._annotations=t,this._config=e}get configuration(){return function(e,t){e=As(e);const n=Ts(t);for(const t of function(e){return e.filter((e=>"selection"===e["value type"]))}(e))if(t.values&&0!==t.values.length)if(t.values.find((e=>!0===e.default)));else if(n.has(t.pred)){const e=n.get(t.pred);t.values.find((t=>t.id===e.mostFrequentObject)).default=!0}else t.values[0].default=!0;else t.values=[{id:"default",default:!0}];return e}(Ds(this._config,this._annotations),this._annotations)}}function Os(e,t){return console.assert(e),(t=As(t))["attribute types"]=new Ns(t["attribute types"],e.attributes).configuration,t}var Ps=n(1581),js=n(5477),Ms=n.n(js);const Is=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"JSON schema for texta configuration files","definitions":{"characters":{"type":"array","items":{"type":"string","minLength":1,"maxLength":1}},"color":{"pattern":"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$","type":"string"},"default":{"type":"boolean"},"denote":{"type":"object","required":["id"],"properties":{"id":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"},"default":{"$ref":"#/definitions/default"}}},"types":{"type":"array","items":{"$ref":"#/definitions/denote"}},"autocompletion_ws":{"type":"string","format":"uri-reference"}},"type":"object","properties":{"delimiter characters":{"$ref":"#/definitions/characters"},"non-edge characters":{"$ref":"#/definitions/characters"},"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"autosave":{"type":"boolean"},"autolineheight":{"type":"boolean"},"boundarydetection":{"type":"boolean"},"entity types":{"$ref":"#/definitions/types"},"relation types":{"$ref":"#/definitions/types"},"attribute types":{"type":"array","items":{"type":"object","required":["pred","value type"],"properties":{"pred":{"type":"string"},"value type":{"enum":["flag","selection","string","numeric"]}},"allOf":[{"if":{"properties":{"value type":{"const":"flag"}}},"then":{"properties":{"color":{"$ref":"#/definitions/color"},"label":{"type":"string"}}}},{"if":{"properties":{"value type":{"const":"selection"}}},"then":{"required":["values"],"properties":{"values":{"type":"array","items":{"$ref":"#/definitions/denote"}}}}},{"if":{"properties":{"value type":{"const":"string"}}},"then":{"required":["default"],"properties":{"autocompletion_ws":{"$ref":"#/definitions/autocompletion_ws"},"default":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["pattern"],"properties":{"pattern":{"type":"string","format":"regex"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}},{"if":{"properties":{"value type":{"const":"numeric"}}},"then":{"required":["default","min","max","step"],"properties":{"default":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"values":{"type":"array","items":{"type":"object","required":["range"],"properties":{"range":{"type":"string"},"label":{"type":"string"},"color":{"$ref":"#/definitions/color"}}}}}}}]}}}}');const Rs=new Ps.ZP({verbose:!0});Ms()(Rs,["uri-reference","regex"]);const Ls=Rs.compile(Is);function zs(e){return console.assert(e,"config is required."),Ls(e)?null:(console.warn(Ls.errors),function(e){for(const t of e){if("required"===t.keyword)return`Invalid configuration: The attribute type whose predicate is '${t.data.pred}' misses a mandatory property, '${t.params.missingProperty}'.`;if(t.dataPath.includes("color"))return Pe()`Invalid configuration: '${t.data}' is invalid color format.`}}(Ls.errors))}function Fs(e,t){const n=function(e,t){if(console.assert(t,"If you don't have a configuration, generate a configuration from the annotation."),e.attributes){const n=t["attribute types"],i=e.attributes.filter((e=>n.some((t=>t.pred===e.pred&&"selection"===t["value type"])))).filter((e=>!n.some((t=>t.pred===e.pred&&t.values.some((t=>t.id===e.obj))))));if(i.length)return console.warn("selection attribute values without definition",i),`selection attribute value definition for "${i.map((e=>e.obj)).join(", ")}" in configuration is missing. `}}(e,t);if(!n)return t;Mt().error(n)}function Hs(e,t){const n=Os(e,t),i=zs(n);if(!i)return Fs(e,n);Mt().error(i)}function Bs(e){(function(e){if(e.denotations)for(const t of e.denotations){if(t.span.begin!==parseInt(t.span.begin))return!0;if(t.span.end!==parseInt(t.span.end))return!0}})(e)&&Mt().warning("In the annotation file, some of the begin and end offsets of denotations were not integer values.\n      TextAE converted them to integer values.\n      However, to avoid a chance of unexpected rendering, please fix them.",15)}function Ws(e,t,n,i,o,s,r){const a=i.get("annotation");if(a)if(a.has("inlineAnnotation")){const n=new N("inline",null,JSON.parse(a.get("inlineAnnotation")));if(!n.data.config&&i.get("config"))o.loadConfigulation(i.get("config"),n);else{if(Bs(n.data),n.data.config&&"object"!=typeof n.data.config)return void Mt().error("configuration in anntotaion file is invalid.");const i=Hs(n.data,n.data.config);i&&(ks(i,s,e,t,n.data),r.annotation=n)}}else a.has("url")?o.loadAnnotation(a.get("url")):i.get("config")?o.loadConfigulation(i.get("config")):function(e,t,n,i){ks(e.defaultConfiguration,t,n,i,e.defaultAnnotation)}(r,s,e,t)}function qs(e){if(e){const t=function(e){const t=new Map,n=e.split("?")[1];if(n){const e=n.split("&");for(let n=0;n<e.length;n++){const i=e[n].split("="),o=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]);t.set(o,decodeURIComponent(s))}}return t}(e);if(t.has("config_lock"))return t.get("config_lock")}return null}class Vs{constructor(e,t){this._dataAccessObject=e,this._statusBar=t,this._map=new Map}get defaultAnnotation(){return{text:"Currently, the document is empty. Use the `import` button or press the key `i` to open a document with annotation."}}get defaultConfiguration(){return Os(this.defaultAnnotation)}get annotation(){return this._map.has("annotation")?this._map.get("annotation").data:this.defaultAnnotation}set annotation(e){this._map.set("annotation",e),e.data.config&&(this.configuration=new N(null,null,e.data.config)),this._dataAccessObject.annotationUrl=e,e.type&&(this._statusBar.status=e)}get configuration(){return this._map.has("configuration")?this._map.get("configuration").data:{}}set configuration(e){this._map.set("configuration",e),this._dataAccessObject.configurationUrl=e}}class Us{constructor(e,t){this._editor=e,this.name=t,this.state=!1}value(e){return void 0===e?this.state:(this.state=e,this.propagate(),null)}toggle(){this.state=!this.state,this.propagate()}propagate(){this._editor.eventEmitter.emit("textae-event.control.button.push",{buttonName:this.name,state:this.state})}}class Gs{constructor(e){this._buttonMap=f.pushButtons.reduce(((t,n)=>(t.set(n,new Us(e,n)),t)),new Map),e.eventEmitter.on("textae-event.edit-mode.transition",(e=>this._setMode(e))),this._buttonMap.get("boundary-detection").value(!0)}propagate(){for(const e of this._buttonMap.values())e.propagate()}getButton(e){return this._buttonMap.get(e)}get names(){return this._buttonMap.keys()}_setMode(e){switch(e){case Yn:this._updateModeButtons(!0,!1,!1,!1,!0);break;case Qn:this._updateModeButtons(!0,!1,!1,!1,!1);break;case Zn:this._updateModeButtons(!1,!0,!1,!1,!0);break;case ei:this._updateModeButtons(!1,!0,!1,!1,!1);break;case ti:this._updateModeButtons(!1,!1,!0,!1,!0);break;case ni:this._updateModeButtons(!1,!1,!0,!1,!1);break;case ii:this._updateModeButtons(!1,!1,!1,!0,!1);break;default:throw`unknown edit mode!${e}`}}_updateModeButtons(e,t,n,i,o){this._buttonMap.get("view").value(e),this._buttonMap.get("term").value(t),this._buttonMap.get("block").value(n),this._buttonMap.get("relation").value(i),this._buttonMap.get("simple").value(o)}}class Ks{constructor(e,t,n){this._states={},this._editor=e,this._selectionModel=t,this._clipBoard=n,this.enable("view",!0),this.enable("term",!0),this.enable("block",!0),this.enable("relation",!0),this.enable("simple",!0),this.enable("setting",!0),function(e,t){e.eventEmitter.on("textae-event.history.change",(e=>{t.enable("undo",e.hasAnythingToUndo),t.enable("redo",e.hasAnythingToRedo)})).on("textae-event.selection.span.change",(()=>t.updateBySpan())).on("textae-event.selection.relation.change",(()=>t.updateByRelation())).on("textae-event.selection.entity.change",(()=>t.updateByEntity())).on("textae-event.edit-mode.transition",(e=>t.setForMode(e))).on("textae-event.clip-board.change",(()=>t.updateByClipboard)).on("textae-event.annotation-auto-saver.enable",(e=>t.enable("write-auto",e)))}(e,this)}propagate(){this._editor.eventEmitter.emit("textae-event.control.buttons.change",this._states)}enable(e,t){this._states[e]=t,this.propagate()}updateBySpan(){this._updateButtons(f.spanButtons),this.propagate()}updateByEntity(){this._updateButtons(f.entityButtons),this.propagate()}updateByRelation(){this._updateButtons(f.relationButtons),this.propagate()}_updateButtons(e){for(const{name:t,predicate:n}of e){const e=n(this._selectionModel,this._clipBoard);this.enable(t,e)}}updateByClipboard(){this.enable("paste",this._enablePaste)}get _enablePaste(){return f.spanButtons.find((({name:e})=>"copy"===e)).predicate(this._selectionModel,this._clipBoard)}setForMode(e){switch(e){case Yn:case Qn:this._updateButtonsForMode(!0,!1,!1,!1,!1,!1);break;case Zn:case ei:this._updateButtonsForMode(!0,!0,!0,!0,!0,!0);break;case ti:case ni:this._updateButtonsForMode(!0,!1,!0,!0,!0,!0);break;case ii:this._updateButtonsForMode(!1,!1,!1,!0,!0,!0);break;default:throw`unknown edit mode!${e}`}this.propagate()}_updateButtonsForMode(e,t,n,i,o,s){this._states.simple=e,this._states["replicate-auto"]=t,this._states["boundary-detection"]=n,this._states["line-height"]=i,this._states["line-height-auto"]=o,this._states.pallet=s}}class Js{constructor(e,t,n){this._enableState=new Ks(e,t,n),this._pushButtons=new Gs(e)}propagate(){this._enableState.propagate(),this._pushButtons.propagate()}get pushButtonNames(){return this._pushButtons.names}valueOf(e){return this._getPushButton(e).value()}push(e){this._getPushButton(e).value(!0)}release(e){this._getPushButton(e).value(!1)}toggle(e){return this._getPushButton(e).toggle()}_getPushButton(e){return this._pushButtons.getButton(e)}}function Xs(e){return new Set(function(e){return e.span.all.map((e=>e.entities)).flat()}(e).concat(e.entity.all))}class Ys{constructor(e,t,n){this._editor=e,this._commander=t,this._selectionModel=n,this._items=[],e.eventEmitter.on("textae-event.annotation-data.entity.remove",(e=>{this.hasCuttingItem&&this._updateItems(new Set(this._items.filter((t=>t!=e))))})).on("textae-event.edit-mode.transition",(()=>this._updateItems()))}get hasCopyingItem(){return this._items[0]instanceof Ne}get hasCuttingItem(){return this._items[0]instanceof Ie}copyEntities(){const e=[...Xs(this._selectionModel)].reduce(((e,t)=>e.add(t.typeValues)),new Set);this._updateItems(e)}cutEntities(){const e=Xs(this._selectionModel);this._cuttingItems.length&&this._cuttingItems.every((t=>e.has(t)))&&[...e].every((e=>this._cuttingItems.includes(e)))?this._updateItems():this._updateItems(e)}pasteEntities(){if(this.hasCopyingItem){const e=this._commander.factory.pasteTypesToSelectedSpansCommand(this._items);this._commander.invoke(e)}else if(this._itemsWillBeCutAndPaste.length&&this._selectionModel.span.single){const e=this._commander.factory.moveEntitiesToSelectedSpansCommand(this._itemsWillBeCutAndPaste);return this._commander.invoke(e),void this._updateItems()}}_updateItems(e=new Set){const t=this._cuttingItems.filter((t=>!e.has(t)));this._items=[...e],this._editor.eventEmitter.emit("textae-event.clip-board.change",this._cuttingItems,t)}get _itemsWillBeCutAndPaste(){return this._cuttingItems.filter((e=>e.span.id!==(this._selectionModel.span.single&&this._selectionModel.span.single.id)))}get _cuttingItems(){return this.hasCuttingItem?this._items:[]}}class Qs{constructor(e,t,n,i,o){this._buttonController=t;const s=Un()((()=>n.saveAnnotation()),5e3);o.bind((e=>{e&&t.valueOf("write-auto")&&s()})),e.eventEmitter.on("textae-event.data-access-object.annotation.load.success",(()=>this._disabled())).on("textae-event.data-access-object.save.error",(()=>this._disabled())).on("textae-event.data-access-object.annotation.url.set",(t=>e.eventEmitter.emit("textae-event.annotation-auto-saver.enable",Boolean(i||t.id)))).on("textae-event.control.button.push",(({buttonName:e,state:t})=>{"write-auto"===e&&!0===t&&o.hasChange&&n.saveAnnotation()}))}_disabled(){this._buttonController.valueOf("write-auto")&&this._buttonController.toggle("write-auto")}}function Zs(e,t,n,i,o,s,r,a,l){!function(e,t){e.eventEmitter.on("textae-event.type-definition.reset",(()=>t.resetConfiguration()))}(e,t),function(e){e.eventEmitter.on("textae-event.history.change",(e=>{window.onbeforeunload=e.hasAnythingToSaveAnnotation?()=>!0:null}))}(e),function(e,t,n,i,o,s,r,a){e.eventEmitter.on("textae-event.data-access-object.annotation.load.success",(e=>{if(!e.data.config&&i.get("config"))r.loadConfigulation(i.get("config"),e);else{if(Bs(e.data),e.data.config&&"object"!=typeof e.data.config)return void Mt().error("configuration in anntotaion file is invalid.");const i=Hs(e.data,e.data.config);i&&(ks(i,a,t,n,e.data),s.annotation=e)}})).on("textae-event.data-access-object.annotation.load.error",(e=>Mt().error(`Could not load the file from the location you specified.: ${e}`))).on("textae-event.data-access-object.annotation.format.error",(({displayName:e})=>Mt().error(`${e} is not a annotation file or its format is invalid.`))).on("textae-event.data-access-object.configuration.load.success",((e,i=null)=>{if("object"!=typeof e.data)return void Mt().error(`${e.displayName} is not a configuration file or its format is invalid.`);i&&Bs(i.data);const o=i&&i.data||Object.assign(s.annotation,n.toJson()),r=Hs(o,e.data);r&&(ks(r,a,t,n,o),i&&(s.annotation=i),s.configuration=e)})).on("textae-event.data-access-object.configuration.load.error",(e=>Mt().error(`Could not load the file from the location you specified.: ${e}`))).on("textae-event.data-access-object.configuration.format.error",(({displayName:e})=>Mt().error(`${e} is not a configuration file or its format is invalid.!`))).on("textae-event.data-access-object.configuration.save",(e=>{s.configuration=new N(null,null,e)}))}(e,i,n,o,0,r,a,l),function(e){const t=e[0];t.addEventListener("mousedown",(e=>{e.shiftKey&&e.preventDefault()})),zn()(t,".textae-editor__entity","mousedown",(e=>e.preventDefault()))}(e),function(e){e[0].addEventListener("keyup",(t=>{e.eventEmitter.emit("textae-event.editor.key.input"),e.api.handleKeyInput(t)}))}(e)}function er(e,t,n,i,o,s,r){const a=new Rt,l=new Rn(e,i,o,n),c=new Ys(e,l,o),u=new Js(e,o,c),d=new Jn(e,i),h=function(e,t){return"on"===t?new ws(e):{status(){}}}(e,r.get("status_bar")),p=new Vs(t,h),f=new os(e,i,o,l,a,c,u,d,p,r.get("autocompletion_ws"),r.get("mode"));!function(e){new MutationObserver((t=>{t.forEach((t=>{t.removedNodes.length&&1===t.removedNodes[0].nodeType&&(t.removedNodes[0].classList.contains("textae-editor__span")||t.removedNodes[0].classList.contains("textae-editor__type"))&&"BODY"===document.activeElement.tagName&&e.focus()}))})).observe(e[0].querySelector(".textae-editor__body"),{childList:!0,subtree:!0})}(e),"visible"===r.get("control")&&e[0].classList.add("textae-editor--control-visible"),"hidden"===r.get("control")&&e[0].classList.add("textae-editor--control-hidden");const m=qs(r.get("source"));null!==m&&r.set("config_lock",m),r.has("config_lock")&&"true"===r.get("config_lock")?i.typeDefinition.lockEdit():i.typeDefinition.unlockEdit(),Ws(a,i,0,r,t,u,p);const g=new gs(e,t,n,i,(()=>p.annotation),(()=>p.configuration),r.get("annotation").get("save_to"));new Qs(e,u,g,r.get("annotation").get("save_to"),s),e.api=new bs(l,f,g,u,d),Zs(e,n,i,a,r,0,p,t,u),e.eventEmitter.on("textae-event.pallet.read-button.click",(()=>g.importConfiguration())).on("textae-event.pallet.write-button.click",(()=>g.uploadConfiguration())),e[0].tabIndex=-1,Mt().set("notifier","position","top-right")}var tr=n(7187);class nr extends s{constructor(e){super("The following erroneous annotations ignored",e.map((({name:e,wrongRangeDenotations:t,outOfTextDenotations:n,wrongRangeBlocks:i,outOfTextBlocks:o,duplicatedRangeBlocks:s,wrongRangeTypesettings:r,outOfTextTypesettings:a,duplicatedIDs:l,boundaryCrossingSpans:c,referencedEntitiesDoNotExist:u,duplicatedAttributes:d},h)=>`\n    ${1===h?'\n      <div class="textae-editor__valiondate-dialog__content">\n        <h1>Track annatations will be merged to the root anntations.</h1>\n      </div>':""}\n    <div class="textae-editor__valiondate-dialog__content">\n      <h2>${e}</h2>\n      ${function(e){return e.length?`\n        <table>\n          <caption>Wrong range denotations.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n          `)).join("\n")}\n          </tbody>\n        </table>`:""}(t)}\n      ${function(e){return e.length?`\n        <table>\n          <caption>Out of text denotations.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n            `)).join("\n")}\n          </tbody>\n        </table>`:""}(n)}\n      ${function(e){return e.length?`\n        <table>\n          <caption>Wrong range blocks.</caption>\n          <thead>\n            <tr>\n              <th class="id">id</th>\n              <th class="range">begin</th>\n              <th class="range">end</th>\n              <th>obj</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${e.map((({id:e,span:t,obj:n})=>`\n            <tr>\n              <td>${e||""}</td>\n              <td class="alert">${t.begin}</td>\n              <td class="alert">${t.end}</td>\n              <td>${n}</td>\n            </tr>\n            `)).join("\n")}\n          </tbody>\n        </table>\n  `:""}(i)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Out of text blokcs.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,obj:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(o)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated range blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,obj:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(s)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Wrong range typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,style:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(r)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Out of text typesettings.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,span:t,style:n})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t.begin}</td>\n            <td class="alert">${t.end}</td>\n            <td>${n}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(a)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated IDs in Denotations and Blocks.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,span:n,obj:i})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td class="alert">${n.begin}</td>\n            <td class="alert">${n.end}</td>\n            <td>${i}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(l)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Denotations or Blocks or Typesettings with boundary-cross.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="range">begin</th>\n            <th class="range">end</th>\n            <th>style/obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,span:n,style:i,obj:o})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td class="alert">${n.begin}</td>\n            <td class="alert">${n.end}</td>\n            <td>${i||o}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(c)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Referenced entities do not exist.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="sourceProperty">source property</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,sourceProperty:t,alertSubj:n,subj:i,pred:o,alertObj:s,obj:r})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td>${t}</td>\n            <td${n?' class="alert"':""}>${i}</td>\n            <td>${o}</td>\n            <td${s?' class="alert"':""}>${r}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(u)}\n      ${function(e){return e.length?`\n      <table>\n        <caption>Duplicated attributes.</caption>\n        <thead>\n          <tr>\n            <th class="id">id</th>\n            <th class="referencedItem">subj</th>\n            <th>pred</th>\n            <th class="referencedItem">obj</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map((({id:e,subj:t,pred:n,obj:i})=>`\n          <tr>\n            <td>${e||""}</td>\n            <td class="alert">${t}</td>\n            <td>${n}</td>\n            <td class="alert">${i}</td>\n          </tr>\n          `)).join("\n")}\n        </tbody>\n      </table>\n      `:""}(d)}\n    </div>\n    `)).join("\n"),null,{width:900})}}function ir(e){const t=e.getAttribute("save_to");return t?decodeURIComponent(t):""}function or(e,t){const n=new Map,i=e.innerText;e.innerHTML="",i&&n.set("inlineAnnotation",i);const o=function(e){return e?decodeURIComponent(e):""}(t);o&&n.set("url",o);return ir(e)&&n.set("save_to",ir(e)),n}function sr(e,t){e.has(t)&&e.set(t,decodeURIComponent(e.get(t)))}function rr(e,t,n){t.getAttribute(n)&&e.set(n,t.getAttribute(n))}function ar(){this.eventEmitter=new tr.EventEmitter;const e=function(e){const t=new Map;return rr(t,e,"mode"),rr(t,e,"control"),rr(t,e,"status_bar"),rr(t,e,"config"),rr(t,e,"config_lock"),rr(t,e,"autocompletion_ws"),sr(t,"config"),sr(t,"autocompletion_ws"),t.set("source",function(e){return e.getAttribute("source")||e.getAttribute("target")}(e)),t.set("annotation",or(e,t.get("source"))),t}(this[0]),t=new Et(this),n=new At(this.eventEmitter,t),i=new Ot(this.eventEmitter),o=new O(this),s=new Pt(this);return s.bind((e=>this.eventEmitter.emit("textae-event.control.writeButton.transit",e))),function(e,t){e.eventEmitter.on("textae-event.data-access-object.annotation.save",(()=>{t.annotatioSaved(),Mt().success("annotation saved")})).on("textae-event.data-access-object.configuration.save",(()=>{t.configurationSaved(),Mt().success("configuration saved")})).on("textae-event.data-access-object.save.error",(()=>{Mt().error("could not save")}))}(this,i),function(e,t){e.eventEmitter.on("textae-event.annotation-data.all.change",((e,n,i,o)=>{t.resetAllHistories(),i&&new nr(o).open()}))}(this,i),this.api={start:r=>er(r,o,i,t,n,s,e)},this}function lr(e,t,n){!function(e,t){e[0].insertBefore(t.el,e[0].childNodes[0]),e.eventEmitter.on("textae-event.control.button.push",(e=>t.updateButtonPushState(e.buttonName,e.state))).on("textae-event.control.buttons.change",(e=>t.updateAllButtonEnableState(e))).on("textae-event.control.writeButton.transit",(e=>t.transitWriteButtonImage(e)))}(e,t),function(e,t){e[0].appendChild(t.el),e.eventEmitter.on("textae-event.control.button.push",(e=>t.updateButtonPushState(e.buttonName,e.state))).on("textae-event.control.buttons.change",(e=>t.updateAllButtonEnableState(e))).on("textae-event.editor.key.input",(()=>t.hide())),window.addEventListener("click",(e=>{3!==e.which&&t.hide()})),window.addEventListener("contextmenu",(n=>{t.hide();const i=n.target.closest(".textae-editor");if(i===e[0]){if(i.classList.contains("textae-editor__mode--view-with-relation")||i.classList.contains("textae-editor__mode--view-without-relation"))return;n.preventDefault(),t.show(n.pageY-e[0].offsetTop,n.pageX)}}))}(e,n),e.eventEmitter.on("textae-event.control.button.click",(t=>e.api.handleButtonClick(t))),e.api.updateButtons()}const cr=new class{constructor(){var e;this._editors=new l,this._veil=new h,e=this._editors,window.addEventListener("resize",u()((()=>e.redraw()),500)),window.addEventListener("load",(()=>{!function(e){document.body.addEventListener("focus",(t=>{const n=e.findByHTMLelement(t.target.closest(".textae-editor"));!function(e,t){t&&(e.selected&&t[0]!==e.selected[0]&&e.unselect(e.selected),e.selected=t)}(e,n)}),!0),document.body.addEventListener("click",(t=>{null===t.target.closest(".textae-editor__dialog")&&null===t.target.closest(".ui-autocomplete")&&null===t.target.closest(".ui-widget-overlay")&&null===t.target.closest(".textae-editor__type-pallet__content")&&(e.findByHTMLelement(t.target.closest(".textae-editor"))||e.selected&&e.unselect(e.selected))}))}(this._editors)}))}registerEditor(e){this._editors.push(e),this._veil.setObserver(e)}};document.addEventListener("DOMContentLoaded",(function(){for(const e of document.querySelectorAll(".textae-editor")){const n=t()(e);ar.call(n),cr.registerEditor(n),n.api.start(n),lr(n,new b(n),new w(n))}}))})()})();